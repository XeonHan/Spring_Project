window.__define_resource&&__define_resource("LBL18913","LBL18914","LBL18915","LBL18916","LBL18917","LBL18918","LBL18919","LBL05360","LBL18902","LBL06439","LBL02376","LBL05716","LBL01593","LBL18848","BTN00205","LBL00921","LBL06054","LBL05875","LBL19003");widget.calcCombine={};widget.calcCombine._baseLoaded=!1;widget.calcCombine._export=function(){return{_default:{controlType:"widget.calcCombine",initializeOptions:function(n){this.popupRequestParam=n.popupRequestParam||{};this.serializeKey=n.serializeKey;this.callbackID=ecount.global.registerCallback(this.ecPageID,this.onMessage,this);this.customPeriod=n.customPeriod;this.extractData=n.extractData;n.extractData=null;n.inlineModeList&&(this.inlineModeOptions={inlineModeList:n.inlineModeList,activeInlineMode:n.activeInlineMode},this.subTitle=n.activeInlineMode)},getFnList:function(n){return n=n||[],this._getFnList().filter(function(t){var i=t.id.replace(this.id,"");return!n.contains(i)}.bind(this))},_getFnList:function(){return[]},insertComparisonItem:function(n){var i=this.get(this.id+"_CALC"),r=i.getRequiredItem(),t=this._getFnList().find(function(t){return t.id==n}).id;r&&t&&(t=t.replace(this.id,""),i.insertItem([r,{value:t,label:t,type:"5"}]))},removeDisabled:function(n,t){t=t||"";n.setDisabled(!1);n.setFnDynamicView(!0);n.displayFnDynamicView(!1);n.changeAddonTitle(t);n.setPlaceHolder(t)},setDisabled:function(n,t){t=t||ecount.resource.LBL18913;n.setFnDynamicView(!1);n.displayFnDynamicView(!0);n.changeAddonTitle(t);n.setPlaceHolder(t)},toggleFixedFn:function(n,t){n&&(t==!0?(n.setFnDynamicView(!1),n.displayFnDynamicView(!0)):(n.setFnDynamicView(!0),n.displayFnDynamicView(!1)))},_openPopup:function(n){var t={targetID:this.id,control:this};this.openPopup(t,{url:"/ECERP/SVC/Popup/FM005P_01",popupType:!1,Request:_.merge({CALC_TYPE:"SEARCH",IS_CALC_ONLY:!1,IS_CALC_TYPE:!0,CALC_PAGE:"FM056P_01"},n,this.popupRequestParam||{})})},onMessage:function(n,t){t=t||{};var i=t.data||null,u=t.callback,r=this.get(this.id+"_CALC"),f;i&&(_.isArray(i)||(i=[i]),f=i[0].CALC_VALUE?i[0].CALC_VALUE[0]:i,r.removeItemAll(),r.insertItem(f),r.setFnActivedId(this.id+"custom",!0,!0),this.afterOnMessage&&this.afterOnMessage());_.isFunction(u)&&u()},afterOnMessage:function(n){var t=this.get(this.id+"_CALC"),i;this.hideAll();t.show();t.setFocus(0);n!=!1&&(i={syncHandler:this.afterOnMessage,cid:this.id,__self:this,targetID:this.id,isCombine:!0,args:[!1]},this.delegator&&this.delegator.triggerEvent("form.sync",i))},syncFnData:function(n,t){for(var i,u,r=0;r<this.controlList.length;r++)i=this.controlList[r],i.hasFn&&!$.isEmpty(i.getFnItem(n))&&i.setFnActivedId(n,!1,!1);t!=!1&&(u={syncHandler:this.syncFnData,cid:this.id,__self:this,targetID:this.id,isCombine:!0,args:[n,!1]},this.delegator&&this.delegator.triggerEvent("form.sync",u))},serialize:function(){for(var e=[],r,t,u,n,f,s,i=0,o=this.controlList.length;i<o;i++)for(r=this.controlList[i],t=r.serialize(),$.isArray(t)||(t=[t]),f=0,s=t.length;f<s;f++)n=t[f],u=null,(r.isVisible()==!1||r._isDateSpace&&n.value=="0000")&&(n.value=""),_.isString(n.key)&&n.key.toUpperCase().endsWith("_FN")?n.key=n.key.replace(/(_FN)$/,"_SELECT"):n.BASE_DATE_FN&&(u={key:n.key+"_SELECT",value:n.BASE_DATE_FN}),e.push(n),u&&e.push(u);return e},save:function(){for(var n,t,r=[],i=0,u=this.controlList.length;i<u;i++)t=this.controlList[i],n=t.save(),n.toggleData=t.isVisible(),r.push(n);return{key:this.id,value:r}},restore:function(n){function o(n,t){var i;return t.value&&t.value.fn&&(i=n.getFnItem(t.value.fn),i&&i.ecRole)?[i.fromDate,i.toDate]:null}var t,i,u,f,r,e;if(!n)return!1;for(u=0,f=n.length;u<f;u++)t=n[u],t&&t.key&&(i=this.get(t.key,!0)),i&&(r=o(i,t),e=i.controlType=="widget.calc"&&!_.isEmpty(t.value)?_.merge({fn:t.fn},t.value):t.value,i.restore(e),r&&(_.isFunction(this.customPeriod)&&(r=this.customPeriod(r,{cid:i.cid,controlType:i.controlType,pcid:this.pcid,pControlType:this.controlType})),i.setDate(r),this.syncFnData(t.value.fn)),t.toggleData==!0?i.show():t.toggleData==!1&&i.hide())},validate:function(){var n=this._super._super.validate.apply(this,arguments);return _.isArray(n)&&n.forEach(function(n){n.control=n.targetControl||n.control}),n},noFieldSerializeCallback:function(n){return{key:n.name,value:!!n.getState(0,"attr.disabled")}},onAfterRender:function(){var n=this.get(this.id+"_NOFIELD"),t=this.getDateControl&&this.getDateControl();n&&n.setDisabled(!0);t&&(this.oldDateValue=t.getDateFormat("yyyyMMdd"))},executeChangeDelegator:function(){this._super._super.executeChangeDelegator.apply(this,arguments);var t=this.getDateControl(),n=t.getDateFormat("yyyyMMdd"),i=this.id+"direct";_.isEqual(this.oldDateValue,n)==!1&&(this.oldDateValue=n,this.isAbleToExecuteDelegator()&&this.syncFnData(i))},_enableChangeFnEvent:function(n){return!$.isNull(n.originId)&&(n.originId!=n.oldFnActivedId||n.originId==this.id+"custom")&&n.originId!=this.id+"setting"},setPopupRequestParam:function(n){this.popupRequestParam=n}},calcPrice:{controlType:"widget.calcCombine.calcPrice",fnOptions:{},onInitChildControl:function(n,t){var e=widget.generator,u=e.control(),r=t.id,o=t.name,s=t.exceptFnList||[],f=this.serializeKey||o,i;this.useNoResiduals=!!t.useNoResiduals;i=this.getFnList(s,t);i.length==0&&(i=!1);this.fnOptions={keepLastActivedItem:!0,activedId:r+"between"};n.addControl(u.define("widget.input.between",r+"_BETWEEN",f+"_BETWEEN").hasFn(i,this.fnOptions));n.addControl(u.define("widget.calc",r+"_CALC",f+"_CALC").hasFn(i,this.fnOptions).setOptions({_isCalc:!1}).hide());n.addControl(u.define("widget.input",r+"_NOFIELD",f+"_NOFIELD").serializeCustomizer(this.noFieldSerializeCallback.bind(this)).hide().fnAlwaysShow(!0).fnDynamicView(!1).hasFn(i,this.fnOptions))},_getFnList:function(){var n=this.id,t=ecount.resource,i=[{id:n+"=",label:t.LBL18914},{id:n+"<>",label:t.LBL18915},{id:n+"<",label:t.LBL18916},{id:n+">",label:t.LBL18917},{id:n+"<=",label:t.LBL18918},{id:n+">=",label:t.LBL18919},{id:n+"custom",label:t.LBL05360,preventActive:!0},{id:n+"between",label:t.LBL18902},{id:n+"noField",label:t.LBL18913},];return this.useNoResiduals&&i.unshift({id:n+"_noResiduals",label:String.format(ecount.resource.LBL06439,"0")}),i},setValueByToggle:function(n){var t=_.get(n,"activatedId"),r=_.get(n,"value"),u=_.get(n,"sync",!1),i;t&&this._getFnList().any(function(n){return n.id===t}.bind(this))&&(this.syncFnData(t,u),this.toggleControls(t,u));_.isNil(r)||(i=this.itemList.find(function(n){return n.isVisible()}),i&&i.setStandardValue(r))},toggleControls:function(n,t){var r=this._getFnList(),u=this.useNoResiduals?1:0,o=this.get(this.id+"_NOFIELD"),i=this.get(this.id+"_CALC"),f=this.get(this.id+"_BETWEEN"),e=i.getValue()||{},s,h;this.useNoResiduals&&n&&!!~n.indexOf("noResiduals")&&(this.hideAll(),i.show(),i.removeItemAll(),f.setValue(["",""]),i.insertItem([i.getRequiredItem(),{Hide:!1,Section:null,dataType1:"TEXT",dataType2:"REQUIREDCHECKPASS",label:String.format(ecount.resource.LBL06439,"0"),type:"1",value:"NORESIDUALS"}]));switch(n){case r[u].id:case r[u+1].id:case r[u+2].id:case r[u+3].id:case r[u+4].id:case r[u+5].id:this.hideAll();i.show();i.removeItemAll();f.setValue(["",""]);this.insertComparisonItem(n);break;case r[u+6].id:s=_.get(e,"value")||"";!~s.indexOf("NORESIDUALS")||(e={});this._openPopup({CALC_DESC:e.value,CALC_GUBUN:e.type,PAGE_DATA_TYPE:"NUM",requiredItem:i.getRequiredItem(),notCheckRequiredItem:i.notCheckRequiredItem,requiredType:i.getRequiredType()});break;case r[u+7].id:this.hideAll();i.removeItemAll();f.setValue(["",""]);f.show();break;case r[u+8].id:this.hideAll();i.removeItemAll();f.setValue(["",""]);o.show();o.setDisabled(!0)}t!=!1&&(h={syncHandler:this.toggleControls,cid:this.id,__self:this,targetID:this.id,isCombine:!0,args:[n,!1]},this.delegator&&this.delegator.triggerEvent("form.sync",h))},serializeAdditionalData:function(){var n=this.serialize(),t="",u=n.find(function(n){return n.key==this.name+"_CALC"}.bind(this)),f=n.find(function(n){return n.key==this.name+"_BETWEEN_SELECT"}.bind(this)),i,r;return _.isEmpty(u.value)?_.isEmpty(f.value)||(i=n.find(function(n){return n.key==this.name+"_BETWEEN_FROM"}.bind(this)),r=n.find(function(n){return n.key==this.name+"_BETWEEN_TO"}.bind(this)),i.value&&r.value&&(t=i.value+"~"+r.value)):t=u.value.label.replaceAll("„Üç",""),{name:this.subTitle,value:t}},reset:function(n){n?this.toggleControls():this.toggleControls(this.getDefaultLayerOption());this._super.reset.apply(this,arguments)},getDefaultLayerOption:function(){return this.fnOptions.activedId},ON_CLICK_SERVICE:function(n,t,i,r){r.type=="dropdown.click"&&this._enableChangeFnEvent(r)&&(this.syncFnData(r.originId),this.toggleControls(r.originId))},validate:function(){var n=this._super.validate.apply(this,arguments),t=this.get(0).getValue();return this.get(0).isVisible()&&_.indexOf(t,"")!=-1&&t[0]!=t[1]&&(n.push({control:this.get(0),message:"This field is required.",method:"required"}),this.showError()),_.isArray(n)&&n.forEach(function(n){n.control=n.targetControl||n.control}),n}},calcSimpleSearch:{controlType:"widget.calcCombine.calcSimpleSearch",dataOptionList:[],defaultOptionList:{_optionList:[],_id:"",initialize:function(n){this._id=n;this._optionList=[[n+"direct",ecount.resource.LBL05716]]},getList:function(){return this._optionList},addSettingToOptionList:function(){this._optionList.push([this._id+"setting",ecount.resource.LBL01593,!1,!1,!1,!0,])}},getSimpleSearchListFromButton:function(){return this.getSimpleSearchList({useSimpleSearch:!0,useSimpleSearchEndDate:!1,useSimpleSearchSettingButton:!1,useDefaultSimpleSearchActive:!0})},initializeOptions:function(n){widget.calcCombine.prototype.initializeOptions.apply(this,arguments);this.serializeKey=n.serializeKey||ecount.constValue.DEFAULT_SIMPLESEARCH_KEY},onInitChildControl:function(n,t){function a(){var n=this.getSimpleSearchListFromButton();return this.simpleSearchConfig&&this.simpleSearchConfig.CofmDateShortCutMenuMappingButtons&&n.reduce(function(n,t,i){var u=[],r=Object.keys(this.simpleSearchConfig.CofmDateShortCutMenuMappingButtons[i]),i;for(r.sort(function(n,t){return n==="USER_TITLE"?1:n>t?-1:void 0}),i=0;i<r.length;i++)r[i]!=="U_SHORTCUT_NM"||_.isEmpty(t[r[i]])?u.length||r[i]!=="SHORTCUT_NM"||_.isEmpty(t[r[i]])||u.push(t[r[i]]):u.push(t[r[i]]),r[i]==="USER_TITLE"&&u.push(t[r[i]]);return u.length&&n.push(u),n}.bind(this),[]),n.reduce(function(t,i,r){var f=[],u=Object.keys(n[r]),r;for(u.sort(function(n,t){return n==="label"?1:n>t?-1:void 0}),r=0;r<u.length;r++)u[r]!=="value"||_.isEmpty(i[u[r]])||f.push(i[u[r]]),u[r]==="label"&&f.push(i[u[r]]);return f.length&&t.push(f),t}.bind(this),[])}var u=widget.generator,h=ecount.resource,i=t.id,v=t.name,c=t.dateType||"widget.multiDate",f=[{id:i+"toggleCalc",label:h.LBL18848,preventActive:!0}],y=this.getFnList(),e,r,l,o=this.serializeKey||v,s;this.defaultOptionList.initialize(i);s=this.getSimpleSearchListFromButton().find(function(n){return n.active})||{value:this.defaultOptionList.getList()[0][0],label:this.defaultOptionList.getList()[0][1]};(this.isRemoveCalcFromFN||c==="widget.date")&&(f=[]);this.simpleSearchConfig&&this.simpleSearchConfig.IsSettingButton&&this.defaultOptionList.addSettingToOptionList();this.dataOptionList=a.call(this).concat(this.defaultOptionList.getList());e=u.control().define("widget.select",i+"_SELECT",o+"_SELECT").setAddonTitle(h.BTN00205).option(this.dataOptionList).setChangeStateFuncName("toggleSelect").setInlineIndex(0).select(s.value).setOptions({isFooterCustomRoleId:!0}).hide();this.simpleSearchConfig&&e.setSimpleSearchConfig(this.simpleSearchConfig);r=u.control().define(c,i+"_DATE",o).setAddonTitle(s.label,{ecRole:"click.addonTitle"}).setExtendOptions(["dropdownOptions","fnOptions"]).setInlineMode(this.inlineModeOptions).setInlineIndex(1).setOptions({_extractFormat:"yyyyMMdd"});f.length&&r.hasFn(f,{keepLastActivedItem:!0});_.isBoolean(t._useSlip)&&r.useSlipDate(t._useSlip);this.simpleSearchConfig&&r.setSimpleSearchConfig(this.simpleSearchConfig);l=u.control().define("widget.calc.dateType",i+"_CALC",o+"_CALC").setInlineIndex(2).hasFn(y,{keepLastActivedItem:!0,activedId:i+"calc"}).setOptions({_isCalc:!1}).hide();n.addControl(e);n.addControl(r);n.addControl(l)},ON_CHANGE:function(n){n.cid===this.id+"_DATE"&&this.toggleDate(n.cindex,null,n.cid,!0)},ON_CLICK:function(n){n.cid===this.id+"_DATE"&&n.ecRole==="click.addonTitle"&&this.toggleLabel(null,null,null,!0)},setSimpleSearchValues:function(n,t,i,r,u,f){this.setChangeStateFuncCallFlag(!1);var o=this.getDateControl(),h=this.getSelectControl(),l=this.defaultOptionList.getList().map(function(n){return n[0]}),c=h.getSelectboxOptions(),e=c.find(function(n){return n.value===u}),s=[];s=_.isEmpty(e)?this.defaultOptionList.getList().find(function(n){return n[0].indexOf("direct")>-1}):[e.value,e.label];_.isEmpty(e)&&(e=this.defaultOptionList.getList().find(function(n){return n[0].indexOf("direct")>-1}));h.setValue(s[0],!0);this.syncAddonTitle(s[1],!0);o.isSingleDate()?o.setDate(f[0],!0):o.setDate(f,!0);this.setChangeStateFuncCallFlag(!0)},syncAddonTitle:function(n,t){var i=this.getDateControl(),u=this.getSelectControl(),r;_.isEmpty(n)||u.getState(this._IT_SELF,"style.display")?i.changeAddonTitle(""):i.changeAddonTitle(n);t!=!1&&(r={syncHandler:this.syncAddonTitle,cid:this.id,__self:this,targetID:this.id,isCombine:!0,args:[n,!1]},this.enableTabSync(),this.delegator&&this.delegator.triggerEvent("form.sync",r),this.disableTabSync())},toggleSelect:function(n,t,i){var r;this.setChangeStateFuncCallFlag(!1);var u=this.get(i).getSelectedItem(),e=this.defaultOptionList.getList().map(function(n){return n[0]}),f=this.getDateControl(),o=this.getSelectControl();if(e.includes(u.value))switch(u.value){case this.id+"direct":f.setFocus(0);break;case this.id+"setting":this.getSelectControl().setSelectedValue(this.getSelectControl().getOldValue())}else{if(r=this.getSimpleSearchListFromButton().find(function(n){return n.value===u.value}),_.isEmpty(r))return!1;f.isSingleDate()?f.setDate(r.toDate,!0):f.setDate([r.fromDate,r.toDate],!0);this.syncAddonTitle(u.label,!1)}this.setChangeStateFuncCallFlag(!0)},toggleLabel:function(n,t,i,r){this.getDateControl().changeAddonTitle("");var u=this.getSelectControl();u.show();u.setFocus(0);r!=!1&&this.toggleSync("toggleLabel")},toggleDate:function(n,t,i,r){this.setChangeStateFuncCallFlag(!1);var f=this.getSelectControl(),e=this.getDateControl(),u=this.defaultOptionList.getList().find(function(n){return n[0].indexOf("direct")>-1});f.setValue(u[0],!0);this.syncAddonTitle(u[1],!0);this.setChangeStateFuncCallFlag(!0);r!=!1&&this.toggleSync("toggleDate")},callToggleDate:function(n){_.isNil(n)&&(n=!1);this.toggleDate(null,null,null,n)},toggleSync:function(n,t,i,r,u,f,e){var o={syncHandler:this[n],cid:this.id,__self:this,targetID:this.id,isCombine:!0,args:[t,i,r,!1,f,e]};this.delegator&&this.delegator.triggerEvent("control.change",o)},onLazyRender:function(){this.extractData&&this.reset(this.extractData)},getSelectControl:function(){return this.get(this.id+"_SELECT")},getDateControl:function(){return this.get(this.id+"_DATE")},_getFnList:function(){var n=this.id,t=ecount.resource;return[{id:n+"=",label:t.LBL18914},{id:n+"<",label:t.LBL00921},{id:n+">",label:t.LBL06054},{id:n+"custom",label:t.LBL05360,preventActive:!0},{id:n+"calc",label:t.LBL05875},]},toggleControls:function(n,t){var r=this._getFnList(),u=this.get(this.id+"_DATE"),i=this.get(this.id+"_CALC"),f=i.getValue()||{},e;switch(n){case r[0].id:case r[1].id:case r[2].id:i.removeItemAll();this.insertComparisonItem(n);break;case r[3].id:return this._openPopup({CALC_DESC:f.value,CALC_GUBUN:f.type,PAGE_DATA_TYPE:"DATETIME",requiredItem:i.getRequiredItem(),notCheckRequiredItem:i.notCheckRequiredItem,requiredType:i.getRequiredType()}),!1;case this.id+"toggleCalc":i.isVisible()==!1?(i.show(),u.changeFnText(n,ecount.resource.LBL19003)):(i.hide(),i.removeItemAll(),i.setFnActivedId(this.id+"calc",!1,!1),u.changeFnText(n,ecount.resource.LBL18848))}t!=!1&&(e={syncHandler:this.toggleControls,cid:this.id,__self:this,targetID:this.id,isCombine:!0,args:[n,!1]},this.delegator&&this.delegator.triggerEvent("form.sync",e))},toggleCalc:function(){var n=this.get(this.id+"_DATE"),i=this.get(this.id+"_CALC"),t=this.id+"toggleCalc";i.isVisible()==!0?n.changeFnText(t,ecount.resource.LBL19003):n.changeFnText(t,ecount.resource.LBL18848)},serialize:function(){for(var n,f,o,s,i,t,h,r=[],u={},e=0,c=this.controlList.length;e<c;e++)for(i=this.controlList[e],t=i.serialize(),$.isArray(t)||(t=[t]),f=0,o=t.length;f<o;f++){if(n=t[f],h=null,n.key===this.serializeKey+"_SELECT"){u=n;continue}else(i.isVisible()==!1||i._isDateSpace&&n.value=="0000")&&(n.value="");_.isString(n.key)&&n.key.toUpperCase().endsWith("_FN")&&(n.key.indexOf(this.serializeKey+"_CALC")>-1?n.key=n.key.replace(/(_FN)$/,"_SELECT"):(n=u,u={}));r.push(n)}return s=r.filter(function(n){return n.key===this.serializeKey+"_SELECT"}.bind(this)),s.length<1&&r.push(u),r},serializeAdditionalData:function(){var t="",f=this.controlList.find(function(n){return n.id==this.id+"_DATE"}.bind(this)),n=f.serialize();if(!_.isEmpty(n)){var i="DATE10",r=n[0].value.length==8?ecount.infra.getECDateFormat(i,!1,n[0].value.toDate()):"",u=n[1].value.length==8?ecount.infra.getECDateFormat(i,!1,n[1].value.toDate()):"";_.isEmpty(r)&&_.isEmpty(u)||(t=String.format("{0} ~ {1}",r,u))}return{name:this.subTitle,value:t}},save:function(){for(var n,t,i="",u=[],r=0,f=this.controlList.length;r<f;r++){t=this.controlList[r];n=t.save();switch(n.key){case this.id+"_SELECT":i=n.value.selected;continue;case this.id+"_DATE":n.value.fn=i;i=""}n.toggleData=t.isVisible();u.push(n)}return{key:this.id,value:u}},restore:function(n){function c(n){if(_.isEmpty(n.value)||_.isEmpty(n.value.fn))return null;var t=this.getSimpleSearchListFromButton();return t.length&&t.filter(function(n){return n.ecRole}).length?t.find(function(t){return t.value===n.value.fn}):null}var t,f,r,u,e,i,o,s,h;if(!n)return!1;for(e=0;e<n.length;e++)(i=n[e],i&&i.key&&(t=this.get(i.key,!0)),_.isEmpty(t))||(t.controlType!=="widget.calc"||_.isEmpty(i.value)?t.isDateControl()&&(u=i.value,f=c.call(this,i),_.isEmpty(f)?(o=this.dataOptionList.find(function(n){return n[0].indexOf("direct")>-1}),r={value:o[0],label:o[1],date:u}):(s=f.fromDate.toDate().format("yyyy-MM-dd"),h=f.toDate.toDate().format("yyyy-MM-dd"),r={value:f.value,label:f.label,date:{date:_.merge([],u.date,[s,h])}},t.controlType==="widget.dualDate"&&u.activeInlineMode&&(r.date.activeInlineMode=u.activeInlineMode,t.isSingleInlineMode(u.activeInlineMode)&&(r.date.date[0]=r.date.date[1])),t.controlType==="widget.date"&&t.isSingleDate&&t.isSingleDate()&&(r.date.date[0]=r.date.date[1])),this.getSelectControl().restore(r.value),this.syncAddonTitle(r.label,!0),t.restore(r.date)):(u=_.merge({fn:i.fn},i.value),t.restore(u)),i.toggleData===!0?t.show():i.toggleData===!1&&t.hide());this.toggleCalc()},reset:function(n){var i,t,r,u;for(this.setChangeStateFuncCallFlag(!1),i={},t=0;t<this.controlList.length;t++)if(n&&n._controls&&Array.isArray(n._controls)){if(r=this.controlList[t].id,u=n._controls.find(function(n){return n.id===r}),i=u.extractData,r.indexOf("SELECT")>-1){var f=n._controls.find(function(n){return n.id.indexOf("SELECT")>-1}),e=f.extractData.__state.components[0].selectedValue,o=this.get(f.id),s=o.getSelectboxOptions().find(function(n){return n.value===e})||o.getSelectboxOptions().find(function(n){return n.value.indexOf("direct")>-1}),h=s.label;i.__state.components[0].selectedValue=e;i.__state.components[0].selectedLabel=h}this.controlList[t].reset(i)}else this.controlList[t].reset();this.toggleCalc();this.setChangeStateFuncCallFlag(!0)},ON_CLICK_SERVICE:function(n,t,i,r){r.type=="dropdown.click"&&this._enableChangeFnEvent(r)&&(this.syncFnData(r.originId),this.toggleControls(r.originId));var u=n.targetInstance[0];u.id.indexOf("_DATE")>-1&&u.selectedValue!==r.selected.value?this.toggleDate():n.ecFunction!=="datepicker"||_.isEmpty(r.selectedDate)||this.toggleDate()},ON_KEYDOWN_ARROW_UP_SERVICE:function(n){var t=n.targetInstance[0];t.id.indexOf("_DATE")>-1&&this.toggleDate()},ON_KEYDOWN_ARROW_DOWN_SERVICE:function(n){var t=n.targetInstance[0];t.id.indexOf("_DATE")>-1&&this.toggleDate()},afterOnMessage:function(){var n=this.get(this.id+"_CALC");n.setFocus(0)},getDateFormat:function(n){return dateControl=this.get(this.id+"_DATE"),n||(n="yyyyMMdd"),dateControl.getDateFormat(n)},getDate:function(){return dateControl=this.get(this.id+"_DATE"),dateControl.getDate()},getSYear:function(){return dateControl=this.get(this.id+"_DATE"),dateControl.getSYear()},getEYear:function(){return dateControl=this.get(this.id+"_DATE"),dateControl.getEYear()},getSMonth:function(){return dateControl=this.get(this.id+"_DATE"),dateControl.getSMonth()},getEMonth:function(){return dateControl=this.get(this.id+"_DATE"),dateControl.getEMonth()},setFocusToSDate:function(){return dateControl=this.get(this.id+"_DATE"),dateControl.setFocusToSDate()}},calcSimpleSearchChanger:{controlType:"widget.calcCombine.calcSimpleSearchChanger",initializeOptions:function(n){widget.calcCombine.prototype.initializeOptions.apply(this,arguments);this.serializeKey=n.serializeKey},onInitChildControl:function(n,t){var u=widget.generator,c=ecount.resource,i=t.id,l=t.name,a=t.dateType||"widget.multiDate",f=t.isUseFn||[!0,!0,!0],v=this.getFnList(),h=this.getFnList(["=","<",">","custom"]),y=this.getFnList(),e=this.serializeKey||l,r,o,s;this.simpleSearchConfig&&h.push({id:i+"setting",label:c.LBL01593,preventActive:!0});r=u.control().define(a,i+"_DATE",e).setInlineMode(this.inlineModeOptions).setOptions({searchDateName:this.serializeKey||ecount.constValue.DEFAULT_SIMPLESEARCH_KEY}).useDateSpace();f[0]&&r.hasFn(h,{keepLastActivedItem:!0,useSimpleSearch:!0,activedId:i+"direct"});this.simpleSearchConfig&&r.setSimpleSearchConfig(this.simpleSearchConfig);_.isBoolean(t._useSlip)&&r.useSlipDate(t._useSlip);o=u.control().define("widget.calc.dateType",i+"_CALC",e+"_CALC").setOptions({_isCalc:!1}).hide();f[1]&&o.hasFn(v,{keepLastActivedItem:!0});s=u.control().define("widget.input",i+"_NOFIELD",e+"_NOFIELD").serializeCustomizer(this.noFieldSerializeCallback.bind(this)).hide().fnAlwaysShow(!0).fnDynamicView(!1);f[2]&&s.hasFn(y,{keepLastActivedItem:!0});n.addControl(r);n.addControl(o);n.addControl(s)},getDateControl:function(){return this.get(0)},_getFnList:function(){var n=this.id,t=ecount.resource;return[{id:n+"=",label:t.LBL18914},{id:n+"<",label:t.LBL00921},{id:n+">",label:t.LBL06054},{id:n+"custom",label:t.LBL05360,preventActive:!0},{id:n+"direct",label:t.LBL05716},{id:n+"calc",label:t.LBL05875},{id:n+"noField",label:t.LBL18913}]},serializeAdditionalData:function(){var t="",f=this.controlList.find(function(n){return n.id==this.id+"_DATE"}.bind(this)),n=f.serialize();if(!_.isEmpty(n)){var i="DATE10",r=n[0].value.length==8?ecount.infra.getECDateFormat(i,!1,n[0].value.toDate()):"",u=n[1].value.length==8?ecount.infra.getECDateFormat(i,!1,n[1].value.toDate()):"";_.isEmpty(r)&&_.isEmpty(u)||(t=String.format("{0} ~ {1}",r,u))}return{name:this.subTitle,value:t}},toggleControls:function(n,t){var r=this._getFnList(),u=this.get(this.id+"_DATE"),i=this.get(this.id+"_CALC"),f=this.get(this.id+"_NOFIELD"),e=i.getValue()||{},o;switch(n){case r[0].id:case r[1].id:case r[2].id:this.hideAll();i.show();i.removeItemAll();this.insertComparisonItem(n);break;case r[3].id:return this._openPopup({CALC_DESC:e.value,CALC_GUBUN:e.type,PAGE_DATA_TYPE:"DATETIME",requiredItem:i.getRequiredItem(),notCheckRequiredItem:i.notCheckRequiredItem,requiredType:i.getRequiredType()}),!1;case r[4].id:this.hideAll();u.show();u.setDate(["",""]);break;case r[5].id:this.hideAll();i.show();i.removeItemAll();break;case r[6].id:this.hideAll();f.show();f.setDisabled(!0)}t!=!1&&(o={syncHandler:this.toggleControls,cid:this.id,__self:this,targetID:this.id,isCombine:!0,args:[n,!1]},this.delegator&&this.delegator.triggerEvent("form.sync",o))},ON_CLICK_SERVICE:function(n,t,i,r){r.type=="dropdown.click"&&this._enableChangeFnEvent(r)&&(this.syncFnData(r.originId),this.toggleControls(r.originId))}},create:function(n){var t,i,r;(n=n||"_default",t=widget.calcCombine.repository[n]||{},widget.calcCombine._baseLoaded||(ecount.control.lazyLoad("widget.combine"),i=$.Class(widget.combine,widget.calcCombine.repository._default),widget.calcCombine=$.extend(i,widget.calcCombine),widget.calcCombine._baseLoaded=!0,n!="_default"))&&(widget.calcCombine[n]||(t.init||(t.init=function(){widget.calcCombine.prototype.init.apply(this,arguments)}),t.render||(t.render=function(){widget.calcCombine.prototype.render.apply(this,arguments)}),r=t.__inheritParent?ecount.common.createNamespace(t.__inheritParent):widget.calcCombine,widget.calcCombine[n]=$.Class(r,t)))}}};