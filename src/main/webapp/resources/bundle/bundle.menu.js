window.__define_resource&&__define_resource("MSG01396","LBL40117","BTN00108","LBL10378","BTN00133","BTN00357","MSG00729","LBL01593","LBL11298","LBL05716","LBL09004","MSG70527","MSG11547","LBL22702","LBL12309","LBL22703","LBL19307","LBL70644","LBL70208","LBL08076","LBL93000","LBL20965","MSG09693","MSG09694","LBL70303","LBL70321","LBL08015","LBL70785","MSG09695");ecount.class("ecount.widget",null,{init:function(n){if(this.getInitData){var t=this.getInitData(n);t&&this.setInitData&&this.setInitData(t)}$.extend(this,n);try{ecount.runtime.notify(ECountEvent.Type.INITIALIZED_WIDGET,null,{ecPageID:this.ecPageID,layoutType:this.__type})}catch(i){}},destroy:function(){this.$el&&this.$el.remove()},render:function(n){this.setDefault&&this.setDefault();this.$el=this.useTemplateOnlyRender?$(this.template):$(ecount.widget.parseHTML.apply(this));this.hidden&&this.$el.hide();n.append(this.$el)}});ecount.widget.initializer="ecount#initializer";ecount.widget.initializerByCombine="ecount#initializerByCombine";ecount.widget.beforeAutoCompleteRequest="ecount#beforeAutoComplete";ecount.widget.autocompleteBeforeSelected="ecount#autocompleteBeforeSelected";ecount.widget.PROCESSBOOKMARK="ecount#processbookmark";ecount.widget.FORM_LOAD_COMPLETE="ecount#formLoadComplete";ecount.widget.RESIZE_FORM_HEADER="ecount#resizeFormHeader";ecount.widget.preInitPopupHandler="ecount#preInitPopupHandler";ecount.widget.LAZY_INITIALIZER="ecount#lazyInitializer";ecount.widget.LAZY_RENDER_CONTROL_GRID="ecount#lazyRenderControlGrid";ecount.widget.LAZY_RENDER_CONTROL="ecount#lazyRender";ecount.widget.serverNowDate="ecount#serverNowDate";ecount.widget.createEcPath=function(n,t,i,r,u,f,e){return[n||"",t||"",i||"",r||"",u||"",f||"",e||""].join(ecount.separator.ecPath)};ecount.widget.regisetrRequiredControlEvent=function(n){n.events.on({"control.change":n._ON_CHANGE_CONTROL,"control.openPopup":n._ON_POPUP,"anchor.click":n._ON_CLICK_CONTROL,"button.click":n._ON_CLICK_CONTROL,"dropdown.click":n._ON_CLICK_CONTROL,onClickControl:n._ON_CLICK_CONTROL,"control.focusout":n._ON_MOVE_FOCUS,"control.showError":n._ON_SHOWERROR_CONTROL,"control.hideError":n._ON_HIDEERROR_CONTROL,scope:n})};ecount.widget.serialize=function(n,t){var r={},i=null;return n.length===undefined&&(n=[n]),Array.prototype.forEach.call(n,function(n){n.isSerializeEnabled()&&(i=n.serialize(t?n.id:null),i&&($.isArray(i)?i.forEach(function(n){n&&(r[n.key]=n.value)}):(n._hideDateControl&&(r[n.name+"_DATECHK"]=i[n.name+"_DATECHK"]),n.useFnActivedItem()&&(r[n.name+"_FN"]=i[n.name+"_FN"]),r[i.key]=i.value)))}),r};ecount.widget.serializeWrap=function(n,t){var u={},r={},i=null;return n.length===undefined&&(n=[n]),Array.prototype.forEach.call(n,function(n){n.isSerializeEnabled()&&(i=n.serialize(t?n.id:null),i&&(r={},$.isArray(i)?i.forEach(function(n){n&&(r[n.key]=n.value)}):(n._hideDateControl&&(r[n.name+"_DATECHK"]=i[n.name+"_DATECHK"]),n.useFnActivedItem()&&(r[n.name+"_FN"]=i[n.name+"_FN"]),r[i.key]=i.value),u[n.id]=r))}),u};ecount.widget.serializeAdditionalData=function(n,t){var r={},i=null;return n.length===undefined&&(n=[n]),Array.prototype.forEach.call(n,function(n){i=n.serializeAdditionalData(t?n.id:null);i&&($.isArray(i)?i.forEach(function(n){n&&(r[n.key]={name:n.name,value:n.value})}):r[n.id]={name:i.name,value:i.value})}),r};ecount.widget.createDisplayID=function(n,t,i){function u(n,t){var r,i;if(n)for(i=0;i<t.length;i++)if(r=t[i],n.indexOf(r)>-1)return r;return n}var r=n.controlType;r=u(r,["widget.button","widget.link","widget.list"]);switch(r){case"widget.link":case"widget.link.dataToggle":case"widget.button":case"widget.button.group":case"widget.button.nextSlip":case"widget.searchGroup":case"widget.checkbox.linkLabel":case"widget.input.buttonGroup":case"widget.itemList":case"widget.button.loadSlip":case"widget.button.electronicApproval":case"widget.topBottomSetting":case"widget.list":case"widget.button.search":case"widget.button.dropdownList":case"widget.category":n.displayID=[t,i,n.id].join("-")}};ecount.widget.extract=function(n){var t={};return $(n).each(function(n,i){t[i.id]=i.extract.call(i)}),t};ecount.widget.clone=function(n){var t={};return $(n).each(function(n,i){t[i.id]=i.clone.call(i)}),t};ecount.widget.replaceAttr=function(n,t){var i,r;t.pcid&&(n=n.split("{{cid}}").join('{{cid}}" data-pcid="'+t.pcid));for(r in t)if(i=t[r],r!="pcid"){switch(r){case"value":i=(i+"").escapeHTML(!0);break;case"attr.checked":i=i?"checked":"";break;case"attr.selected":i=i?"selected":"";break;case"attr.disabled":i=i?"disabled":"";break;case"attr.readonly":i=i?"readonly":"";break;case"attr.target":i=i?'target="'+i+'"':"";break;case"style.color":i=i?"color:"+i+";":"";break;case"style.bgcolor":i=i?"background-color:"+i+";":""}n=n.split("{{"+r+"}}").join(i)}return n};ecount.widget.parseHTML=function(n,t){var l=n||this.data,a=ecount.control.template,f=t||this.template,r=f.match(/\(\((.*?)\)\)/g),e,u,s,i,h,c,o;if(r===null)return f;for(i=0,h=r.length;i<h;i++)u=a[r[i].replace(/\(\(|\)\)/g,"")],this.pcid&&r[i].toUpperCase().indexOf("FN")>-1&&(u=u.replace(new RegExp("{{cid}}","g"),'{{cid}}" data-pcid="'+this.pcid)),this._hideDateControl&&this.data[i].hidDate&&(u=u.replace(/^\(|\)$/g,"")),e=l[i],e&&(e.index=this.__index||i),this.findex!=undefined&&(e.findex=this.findex),s=u,c=ecount.widget.replaceAttr(s,e),o=f.split(r[i]),o.length>1&&(f=[o.shift(),o.join(r[i])].join(c));return f};ecount.widget.isVisible=function(n){if(n)return n.nodeType===3&&(n=n.parentNode),n.offsetWidth>0||n.offsetHeight>0||n.getAttribute("data-layouttype")=="grid"};ecount.widget.removeChild=function(n){n.parentNode&&n.parentNode.removeChild(n);for(var t=n.firstChild;t;)n.removeChild(t),t=n.firstChild;n.parentNode&&n.parentNode.removeChild(n)};ecount.widget.control={};ecount.widget.control.template=/\(\((.*?)\)\)/gi;ecount.Class=function(){var t=arguments.length,r=arguments[0],n=arguments[t-1],i=typeof n.initialize=="function"?n.initialize:function(){r.prototype.initialize.apply(this,arguments)},u;return t>1?(u=[i,r].concat(Array.prototype.slice.call(arguments).slice(1,t-1),n),ecount.inherit.apply(null,u)):i.prototype=n,i};ecount.inherit=function(n,t){var u=function(){},r,f,i;for(u.prototype=t.prototype,n.prototype=new u,r=2,f=arguments.length;r<f;r++)i=arguments[r],typeof i=="function"&&(i=i.prototype),$.extend(n.prototype,i)};ecount.class("ecount.control","ecount.widget",{initOptions:null,_IT_SELF:ecount.constValue.CONTROL_UPDATE_IT_SELF,_ALL_COMP:ecount.constValue.CONTROL_UPDATE_ALL_COMPONENT,_INIT_VALUE:ecount.delimiter,_during_input_event:!1,__viewOptions:null,onTransaction:!1,__state:null,_setDefaultPlaceholder:!1,_serializeCustomizer:null,_savedValue:null,__originData:null,_defaultCss:null,_clickDelayTime:700,_isCombinedControl:!1,_allowToggleLayer:!0,_useNumericRequired:!1,_isPositiveInteger:!1,_showZeroInPoint:!1,_delegatorQueue:null,_preventDelegatorExecution:!1,_preventSync:!1,_preventObservingStateChange:!1,_preventLayerOpenByHover:!1,_gridDelegatorOption:null,_usingIMEComosingInput:!1,useAsyncFocusChange:!1,_useResetData:!1,hasCarretButton:!1,hasFn:undefined,_timeoutNo:null,init:function(n){var t=this.getInitData(n);this._initializeClearOptions(n);this._initializeOptions(n,t);this._initializeAdditionalOption(n);this._initializeState(n,t);this._onInitState(t,this.__state,n);this.onInitComponents(t,this.__state,n);this.onInitFunctions(t,this.__state,n);this._clearViewOptions();this.extractData&&this._onInitExtractData(t,this.__state,n);this._onInitFilters(t,this.__state,n);this.isInGrid()&&this.initializeGridOptions(n,t);this._initializeViewOptions(n,t);this._onAfterInitialize();ecount.runtime.notify(ECountEvent.Type.INITIALIZED_WIDGET,null,{ecPageID:this.ecPageID,controlType:n.controlType})},render:function(n){!this.__HEADLESS&&this.onBeforeRender()?this.attachView(n):this._$parent=n;this.onLoadItems()},_onLazyRender:function(){this.onLazyRender();this.setBorderRadius()},setBorderRadius:function(){this.ecview&&this.ecview.$el&&this.ecview.setBorderRadius&&this.ecview.setBorderRadius()},onLazyRender:function(){},attachView:function(n){this.ecview||this.createView();this.renderView(n||this._$parent);this.__HEADLESS=!1;this._onAfterRender()},getComposedDomString:function(){return this.ecview||this.createView(),this.ecview.getComposedDomString(_.merge({},this.__state,this.__viewOptions))},destroyView:function(){this.ecview&&this.ecview.destroyView()},destroy:function(){this.unregister();this.ecview&&(this.ecview.destroy(),this.ecview=null)},unregister:function(){this.__viewOptions=null;ecount.layer.removeLayer(this.getLayerServiceKey(this));this.ecIKey&&ecount.global.removeEcInstance(this.ecIKey,this.containerName);this.ecIKey=null},getInitData:function(n){var t=ecount.control.getInitData(n.baseControlType||n.controlType,n.inIncludePage,n.ecPageID);return n.customInitData&&(n.customInitData.config&&(t.config=n.customInitData.config),n.customInitData.result&&(t.result=n.customInitData.result)),t},_initializeClearOptions:function(){this.hasFn===!0&&(this.hasFn=undefined,this.isFnbuttonDisable=undefined,this.dropdownOptions=[],this._caretDropdownList=[],this.onClickCaret=undefined,this.onClickCaretDropdownList=undefined,this.hasCarretButton=!1,this.fnOptions={});this.maxLength=null;this.__filter=null;this.__prettyFilter=null},_initializeOptions:function(n,t){var i=n.id||ecount.common.uuid(n.controlType||widget.generator.CONTROL);if(_.merge(this,{__originData:{},data:n.data||[],extractData:n.extractData,cid:i,id:i,isFromCS:!!n.isFromCS,useFavoriteCode:!!n.isFromFavoriteCode,isFromFavoriteCode:!!n.isFromFavoriteCode,useRecommendOption:!!n.useRecommendOption,originControlID:n.originControlID,pcid:n.pcid,ccIndex:n.ccIndex,ppcid:n.ppcid,findex:n.findex,subTitle:n.subTitle,groupId:n.groupId,pSubTitle:n.pSubTitle,formGroupId:n.formGroupId,formGroupName:n.formGroupName,name:n.name,controlType:n.controlType,ecPageID:n.ecPageID,initOptions:n.initOptions,containerDelegator:n.containerDelegator,delegator:n.delegator,executeParentChangeDelegator:n.executeParentChangeDelegator,responseID:n.responseID,containerName:n.containerName,panelID:n.panelID,tabId:n.tabId||"",tabID:n.tabID||n.tabId||"",pId:n.tabID||n.tabId||"",__pnode:n.__pnode,rowKey:n.rowKey,controlEvent:n.controlEvent,wType:n.__type,__type:n.__type,_callback:n._callback,OBSERVE_CHANGE_STATE:n.OBSERVE_CHANGE_STATE,inlineIndex:n.inlineIndex,changeStateFuncName:n.changeStateFuncName,useWrapperSet:n.useWrapperSet,__HEADLESS:n.__HEADLESS,strCase:n.strCase,_errPlacement:n.gridID?"auto":n._errPlacement,_focusPopover:n._focusPopover,_focusPopoverMsg:n._focusPopoverMsg,_tooltip:n._tooltip,alignRight:n.alignRight,maxLength:n.maxLength,_executeValidateIfVisible:n._executeValidateIfVisible,_useUnloadEventCallback:n._useUnloadEventCallback,formset:n.formset,searchItemCode:n.searchItemCode,__eventTargetInstanceEcIKey:n.__eventTargetInstanceEcIKey,suffixIndex:n.suffixIndex,_isController:n._isController,_controllerOption:n._controllerOption,mappingPath:n.mappingPath,searchDateName:n.searchDateName,_delegatorQueue:[],transaction:[],popupID:n.popupID,popupLevel:n.popupLevel,popupType:n.popupType,modal:n._modal,_inline:n._inline,_multiLine:n._multiLine,_userCss:n.css,inlineStyle:n.inlineStyle,isWholeRow:n.isWholeRow,_defaultOptions:n._defaultOptions,hasFn:n.hasFn,dropdownOptions:this._setDropdownControls(n.dropdownOptions),isSetDropdownSize:n.isSetDropdownSize,_caretDropdownList:this._setDropdownControls(n._caretDropdownList),onClickCaret:n.onClickCaret,onClickCaretDropdownList:n.onClickCaretDropdownList,hasCarretButton:n.hasCarretButton===undefined?this.hasCarretButton:n.hasCarretButton,fnOptions:n.fnOptions||{},extendFnOptions:n.extendFnOptions||{},isNotFixedLayer:n.isNotFixedLayer||!1,prgId:n.prgId,wigt_dv_cd:n.wigt_dv_cd,subLabel:n.subLabel||this.subLabel,dualMode:n.dualMode,dualStep:n.dualStep,dualModeMaster:n.dualModeMaster,dualPageType:n.dualPageType,dualStepButtonInfo:n.dualStepButtonInfo,serializeDualStep:n.serializeDualStep,isCustomDualControl:n.isCustomDualControl,isCustomDualAddedControl:n.isCustomDualAddedControl,useIndividual:n.useIndividual,dualControls:n.dualControls,dualLabel:n.dualLabel,enableSerialzeOnVisible:n.enableSerialzeOnVisible,noSerialize:n.noSerialize,activeInlineMode:n.fixedMode?n.fixedMode:n.activeInlineMode,inlineModeList:n.inlineModeList,fixedMode:n.fixedMode,addPopupOpenParam:n.addPopupOpenParam||this.addPopupOpenParam,numericOnly:n.numericOnly,_numericOptions:{type:"numericOnly",options:{numericMsg:n.numericMsg,numericRange:n.numericRange,numericPattern:n.numericPattern,useNumericRequired:$.isNull(n._useNumericRequired)?this._useNumericRequired:n._useNumericRequired,isPositiveInteger:$.isNull(n._isPositiveInteger)?this._isPositiveInteger:n._isPositiveInteger,showZeroInPoint:$.isNull(n._showZeroInPoint)?this._showZeroInPoint:n._showZeroInPoint,showValueZero:n._showValueZero,DEC_SEPARATOR:n.DEC_SEPARATOR,THOU_SEPARATOR:n.THOU_SEPARATOR,numericViewType:n.numericViewType||"round",numericViewKeepOrigin:_.isBoolean(n.numericViewKeepOrigin)?n.numericViewKeepOrigin:n.gridID?!1:!0}},_noReplacement:n._noReplacement,dataRules:n.dataRules,dataRulesMsg:n.dataRulesMsg,__filter:n.__filter||[],__prettyFilter:_.isArray(n.__prettyFilter)&&n.__prettyFilter.length>0?n.__prettyFilter:null,isRequired:n.isRequired==undefined?this.isRequired:n.isRequired,gridID:n.gridID||"",gridDataKey:n.gridDataKey,gridColumnID:n.gridColumnID,gridDetailTableID:n.gridDetailTableID,gridSectionType:n.gridSectionType,gridControlArea:n.gridControlArea,isGridV3:n.isGridV3,rowIdx:n.rowIdx,_ontarget:n.gridID&&!n.pcid?"grid":undefined,isHideCell:n.isHideCell,isMultiCell:n.isMultiCell,cellSize:n.cellSize,hideCellTitle:n.hideCellTitle,_hideRow:n._hideRow,_useCommonSerialize:n._useCommonSerialize,_serializeByCustomKey:n._serializeByCustomKey,_serializeByAll:n._serializeByAll,_extractFormat:n._extractFormat,_serializeCustomizer:n._serializeCustomizer,_serializeAdditionalDataCustomizer:n._serializeAdditionalDataCustomizer,absoluteIdxTable:n.absoluteIdxTable,rowIdxTable:n.rowIdxTable,columnIdxTable:n.columnIdxTable,_useTableRowIndex:n._useTableRowIndex,_makeCommand:n._makeCommand,isChangeEventPostpone:n.isChangeEventPostpone,simpleSearchConfig:n.simpleSearchConfig,customInitData:n.customInitData,__handler:n.__handler,fnDynamicView:n.fnDynamicView===undefined?!0:n.fnDynamicView,fnAlwaysShow:n.fnAlwaysShow||!1,setGridViewEmpty:n.setGridViewEmpty||!1,_preventSync:n._preventSync||this._preventSync,useFocusHandler:n.useFocusHandler,_afterViewChange:n._afterViewChange,isNotUseItemFold:!!n.isNotUseItemFold,_getCustomFoldLayerValue:n._getCustomFoldLayerValue}),(n._treeAll||n._treeParent||n._treeType||n._treeChildren||n._treeOpen||n._treeIndent)&&_.merge(this,{_treeAll:n._treeAll,_treeParent:n._treeParent,_treeType:n._treeType,_treeChildren:n._treeChildren,_treeOpen:n._treeOpen,_treeIndent:n._treeIndent}),n.__direction&&(this.__direction=n.__direction),this.callbackID=n.callbackID||ecount.global.registerCallback(this.ecPageID,this.onMessage,this),this.setEcPath(),this.setEcIKey(),n.initOptions){ecount.runtime.notify(ECountEvent.Type.WRITE_LOG,null,{type:"options.initOptions",ecPageID:this.ecPageID,popupLevel:this.popupLevel,controlType:this.controlType,cid:this.id,initOptions:n.initOptions});this.onInitControlOptions(n.initOptions,t)}this.initializeOptions(n,t);this.formset&&this.setControlByFormset(this.formset);this.setNumberSeparator(n,t);this.numericOnly&&this.__filter.some(function(n){return n.type===this._numericOptions.type}.bind(this))!=!0&&this.__filter.push(this._numericOptions)},onInitControlOptions:function(){},getEcPath:function(){return this.ecPath},setEcPath:function(){this.ecPath=[this.ecPageID,this.containerName,this.tabID,"",this.gridID,this.id,this.pcid].join(ecount.separator.ecPath)},getEcIKey:function(){return this.ecIKey},setEcIKey:function(){this.ecIKey=ecount.global.registerEcInstance(this)},getFormset:function(){return _.cloneDeep(this.formset)},setNumberSeparator:function(n){var t=this._numericOptions.options;if(n._customSeparator||$.isNull(ecount.config.company))return!1;this.gridID&&(t.DEC_SEPARATOR=this.DEC_SEPARATOR||ecount.config.company.DEC_SEPARATOR,t.THOU_SEPARATOR=this.THOU_SEPARATOR||ecount.config.company.THOU_SEPARATOR);this.formset?(t.DEC_SEPARATOR=this.formset.decimalSeparator||ecount.config.company.DEC_SEPARATOR,t.THOU_SEPARATOR=this.formset.thousandSeparator||ecount.config.company.THOU_SEPARATOR):(t.DEC_SEPARATOR=ecount.config.company.DEC_SEPARATOR,t.THOU_SEPARATOR=ecount.config.company.THOU_SEPARATOR)},setControlByFormset:function(n){function r(n){var i=n.dataType.toString(),e=n.defaultVal||"",f={Q:ecount.config.inventory.DEC_Q||0,U:ecount.config.inventory.ETC_DEC_UQ||0,P:ecount.config.inventory.DEC_P||0,PV:ecount.config.inventory.DEF_PRICE_VAT_DECIMAL_PLACE||0,R:ecount.config.inventory.DEC_RATE||0,D:ecount.config.inventory.DEC_DEFAULT||0,A:ecount.config.company.DEC_AMT||0},r,u;(i[0]==="8"||i[0]==="9")&&(r=Number(i.slice(1,i.length)),u=u||r+ecount.common.number.defaultLength,r==="00"&&(r=f[n.decimalType]),this.numericOnly||(this.numericOnly=!0,t.numericRange=t.numericRange||[u-r,r],t.numericMsg=t.numericMsg||ecount.resource.MSG01396),$.isNull(t.showValueZero)&&(i[0]==="9"?t.showValueZero=!0:i[0]==="8"&&(t.showValueZero=!1)))}function u(n){t.showZeroInPoint=n.isCheckZero}var t=this._numericOptions.options,i;["Q","U","P","PV","R","D","A"].contains(n.decimalType)&&(i=n.dataType,u.call(this,n),r.call(this,n))},_initializeAdditionalOption:function(n){this._setControlOptions(n);this._setDropdownOptions()},_setControlOptions:function(n){if(n&&n.controlOption){ecount.runtime.notify(ECountEvent.Type.WRITE_LOG,null,{type:"options.controlOption",ecPageID:this.ecPageID,popupLevel:this.popupLevel,controlType:this.controlType,cid:this.id,initOptions:n.controlOption});var t=n.controlOption;t=typeof t=="string"?$.parseJSON(t):t;this.addControlOptions(t.addControl)}},addControlOptions:function(){},_setDropdownOptions:function(){if(_.isEmpty(this.extendFnOptions)||_.extend(this.fnOptions,this.extendFnOptions),this.fnOptions.useSimpleSearch&&(this.dropdownOptions=this.getSimpleSearchList().concat(this.dropdownOptions)),_.isArray(this.dropdownOptions)&&$.isEmpty(this.fnOptions.activedId)){var n=this.dropdownOptions.find(function(n){return n.active===!0});n&&(this.fnOptions.activedId=n.id)}},initializeOptions:function(){},initializeGridOptions:function(n){var t=this._getDefaultGridOptions(n),i=this.id;this.callbackID=ecount.global.registerCallback(this.ecPageID,function(n,i){this.onMessage(n,_.extend(i,t))}.bind(this));this.getGridActiveInfo=n.getGridActiveInfo;this.getGridValidateInfo=n.getGridValidateInfo;this.getGridInputMode=n.getGridInputMode;this._getGridCellInfo=function(n,i){_.extend(n,t);i(n)}},_clearViewOptions:function(){this.__viewOptions=null},_getDefaultGridOptions:function(){return{gridID:this.gridID,gridDataKey:this.gridDataKey,gridColumnID:this.gridColumnID,gridSectionType:this.gridSectionType}},_initializeViewOptions:function(n,t){this.__viewOptions=this.__viewOptions||{ecPageID:this.ecPageID,ecPath:this.ecPath,ecIKey:this.ecIKey,id:this.id,cid:this.id,pcid:this.pcid,hasFn:n.hasFn||this.hasFn,subLabel:n.subLabel||this.subLabel,isLayerPopup:this.popupType==="layer",useWrapperSet:this.useWrapperSet,noneFlex:n.noneFlex,wrapperCss:n.wrapperCss,wrapperSetCss:n.wrapperSetCss,inlineStyle:n.inlineStyle,isDummyControl:n.isDummyControl,gridID:this.gridID,isGridV3:n.isGridV3,setGridViewEmpty:n.setGridViewEmpty,_inline:this._inline,isWholeRow:n.isWholeRow,activeInlineMode:this.isInlineMode()};this.initializeViewOptions(n,t)},initializeViewOptions:function(){},_onAfterInitialize:function(){this.onAfterInitialize()},onAfterInitialize:function(){},_initializeState:function(n){function t(n){$.isNull(n)&&(n=!1);$.isArray(n)||(n=[n]);for(var t=0,i=n.length;t<i;t++)if(n[t]!==!0)return!1;return!0}this.__state={id:this.id,cid:this.id,dualModeData:{dualMode:this.dualMode,dualStep:this.dualStep,dualModeMaster:this.dualModeMaster,dualPageType:this.dualPageType,dualStepButtonInfo:this.dualStepButtonInfo,serializeDualStep:this.serializeDualStep,isCustomDualControl:n.isCustomDualControl,isCustomDualAddedControl:n.isCustomDualAddedControl,useIndividual:n.useIndividual,dualControls:n.dualControls,dualLabel:n.dualLabel},"style.inline":n.inlineStyle||this._INIT_VALUE,"style.display":!n.hidden,"style.invisible":n.invisible,"style.addoncss":n._addonOptions?n._addonOptions.css:this._addonOptions?this._addonOptions.css:"","attr.disabled":t(n._readOnly),"wrapper.isFlex":!n.noneFlex,"validate.needvalidate":n.needvalidate||!1,"validate.containstype":n.containsType,"validate.errpreventhide":n.errpreventhide||!1,"validate.datafilter":n._dataFilter,"validate.datarules":n.dataRules,"validate.filters":this.__filter,"validate.datarulesmsg":n.dataRulesMsg,"validate.filterResult":"","popover.type":"popover","popover.message":"","popover.placement":"","popover.directShow":!1,"popover.trigger":"","popover.toggle":!1,"popover.isClearOnBodyClick":!1,"popover.title":"","popover.template":"","popover.unusedbodyclickhandler":!1,"inlineMode.activeInlineMode":n.activeInlineMode,"inlineMode.showLayerFocusIn":n.showLayerFocusIn===!0?!0:!1,"opt.addontitle":$.isNull(n._addonTitle)?this._addonTitle:n._addonTitle,"opt.addontitleOption":n._addonTitleOption,"opt.addontext":n._addonText,"opt.reflowflag":0,"opt.dualStep":n.dualStep,"opt.oldvalue":this._INIT_VALUE,"opt.triggerChange":!1,"opt.lockErrorStatus":!1,"opt.toggledByToolbar":!1}},_onInitState:function(n,t,i){this.__state.components=i.data&&i.data.length>0?this.getInitDataComponents(n,t,i):this.getInitComponents(n,t,i);this.onInitState(n,t,i)},getInitDataComponents:function(n,t,i){return Object.clone(i.data||[],!0)},getInitComponents:function(){return[{}]},getComponentSize:function(){return this.__state.components.length},onInitState:function(){},onInitComponents:function(n,t,i){function o(n,t,i,u,f){var e=f||i[n];r[n]=$.isNull(e)?u:$.isArray(e)?e[t]:e}function s(n,t,i,r){return $.isNull(t[n])?i&&!$.isNull(i[n])?i[n]:r:t[n]}var f,u,e,r;if(!t.components||t.components.length==0)throw ecount.logger.error(String.format("[{1}] of {0} must be overridden.",this.controlType,"onInitComponents"));for(f=t.components,u=0,e=f.length;u<e;u++){r=f[u];r.ecPath=this.ecPath;r.index=u;r.originID=r.id;r.id=r.id||this.id;r.cid=r.cid||this.id;r.name=r.name||this.name||this.id;r["style.inline"]=r["style.inline"]||t["style.inline"]||this.inlineStyle||"";r["style.css"]=[r["style.css"]||"",r.css||this._userCss||this._defaultCss||""].join(" ").trim();r["style.display"]=s("style.display",r,null,!0);r["style.width"]="";o("attr.disabled",u,t,!1,i._readOnly);r["attr.readonly"]=!1;r["css.disabled"]=!1;r["attr.placeholder"]="";r["attr.maxlength"]=$.isArray(this.maxLength)?this.maxLength[u]:this.maxLength;r["opt.selectRange"]=!1;r["opt.notVisible"]=r["opt.notVisible"]||!1;r.ecLazyService=i.isFromFavoriteCode||i.useRecommendOption?"layer.recommenddropdown":"";r.ecServiceAttr=i.isFromFavoriteCode||i.useRecommendOption?ecount.layer.constValue.FOCUSABLE:"";r["attr.inputmode"]=ecount.isMobile?i._inputmode||"text":"";this._pcid&&(r.pcid=this._pcid);u==0&&(r["attr.placeholder"]=$.isEmpty(this.gridID)?$.isEmpty(this.pcid)?i._placeHolder||i.placeHolder||i._addonTitle||i.subTitle||"":i._placeHolder||i.placeHolder||i._addonTitle||"":i._placeHolder||"");this.onInitComponent(n,u,t,r,i)}this.__originData=_.cloneDeep(t)},onInitComponent:function(){},onInitFunctions:function(n,t,i){var r,u,f;t.functions={};i.nationalFlagOptions&&(r=this.getInitNationalFlagProp(i.nationalFlagOptions),r&&(t.functions.nationalFlag=_.merge({cid:this.id},r),r.isFnOption&&(this.hasFn=!0,this.dropdownOptions=_.concat([{id:"_nationalFn",label:ecount.resource.LBL40117||"국가선택"}],this.dropdownOptions))));this.hasFn&&(i._readOnly?(u=!0,f=!1):(u=i.displayFnButton==undefined?!this.fnDynamicView:i.displayFnButton,f=!!this.fnDynamicView),t.functions.fn={cid:this.id,ecFunction:"fn",activedId:this.fnOptions.activedId||"","style.css":i.fnCss||"","style.inline":i.inlineStyle||"","style.display":u,fnDynamicView:f,"attr.disabled":!1});this.subLabel&&(t.functions.sublabel={ecFunction:"label",ecRole:"label.sublabel",label:this.subLabel});this.hasCarretButton&&(t.functions.codeCaretDropdown={cid:this.id,ecFunction:"fn",ecFunctionId:"code.carret",ecService:"layer.caretdropdown","style.display":!0,_caretDropdown:i._caretDropdown,_caretDropdownList:i._caretDropdownList,_caretDropdownOptions:i._caretDropdownOptions});i.addonPopoverOptions&&(t.functions.addonPopover={cid:this.id,ecFunction:"addonPopover",isLeftView:i.addonPopoverOptions.isLeftView||!1,content:i.addonPopoverOptions.content||"",placement:i.addonPopoverOptions.placement||"right",trigger:i.addonPopoverOptions.trigger||"hover click",otherPopoverContainer:i.otherPopoverContainer||null,"style.css":"user-help-mark","function":"addonPopover"});this.isInlineMode()&&_.isEmpty(this.fixedMode)&&(t.functions.selector={cid:this.id,ecFunction:"selector",ecPath:this.ecPath,ecService:"layer.selector",insertWrapper:!0,"style.display":t["inlineMode.showLayerFocusIn"]});!i.itemExcepted||(t.functions.excepted={cid:this.id,isLeftView:!0,"style.css":"excepted-mark","style.display":this.fnOptions.activedId==="NotContain"?!0:!1,"function":"excepted"});this.onInitFunction(n,t,i);this.__originData.functions=_.cloneDeep(t.functions)},getInitNationalFlagProp:function(n){if(!_.isPlainObject(n)||_.isNil(n))return null;var i=_.lowerCase(n.nationalCode)||_.lowerCase(ecount.company.STATE_CODE),t=_.get(n,"isDisplay",!0),r=_.get(n,"isIconHide",!1),u=_.get(n,"isMyCountryHidden",!0),e=_.get(n,"isLeftView",!0),f=_.get(n,"isFnOption",!1),o=f?!0:_.get(n,"isClickPopup",!1),s=_.get(n,"isFnUseOnReadOnly",!1);return u&&t&&(t=_.lowerCase(_.get(ecount,"company.STATE_CODE"))===i?!1:t),r&&(t=!1),{"style.css":"country-flag","style.display":t,isIconHide:r,isMyCountryHidden:u,isLeftView:e,isFnOption:f,isClickPopup:o,isFnUseOnReadOnly:s,nationalFlagBaseUrl:"/static/contents/images/country-flag/",nationalCode:i,ecFunction:"nationalFlag","function":"nationalFlag"}},onInitFunction:function(){},_onInitExtractData:function(n,t,i){this.__state=_.cloneDeep(this.extractData.__state);this.__viewOptions=_.extend({},this.extractData.__viewOptions,{ecPageID:this.ecPageID,ecPath:this.ecPath,ecIKey:this.ecIKey});this._onInitExtractComponent(n,this.__state,i)},_onInitExtractComponent:function(n,t,i){var f,r,u;i.data&&i.data.length>0&&(f=this.__originData.components,t.components.forEach(function(n,t){r=f[t];n.value=$.isNull(r.value)?n.value:r.value;n["attr.checked"]=$.isNull(r["attr.checked"])?n["attr.checked"]:r["attr.checked"]}.bind(this)));for(u in t.dualModeData)this[u]=t.dualModeData[u];t.components.forEach(function(n,t){n.ecPath=this.ecPath;t===0&&(n["attr.placeholder"]=i._placeHolder||i.placeHolder||i._addonTitle||i.subTitle||"")}.bind(this));this.onInitExtractComponent(n,t,i);delete this.extractData;this.__originData=_.cloneDeep(t)},onInitExtractComponent:function(){},_onInitFilters:function(n,t,i){var r=this.getState(this._IT_SELF,"validate.datafilter"),u=this.getState(this._IT_SELF,"validate.datarules"),f=this.getState(this._IT_SELF,"validate.filters")||this.__filter||[];this.clearAllFilters();r&&this.registerDataFilter(r);u&&this.registerValidateFilter(u);f.length>0&&this.registerKeyInputFilter(f);this.onInitFilters(n,this.__state,i)},onInitFilters:function(){},clearAllFilters:function(){["ecDataFilters","ecValidateFilters","ecKeyInputFilters"].forEach(function(n){this[n]=null}.bind(this))},registerDataFilter:function(n){this._registerFilter("ecDataFilters",n)},registerValidateFilter:function(n){this._registerFilter("ecValidateFilters",n)},registerKeyInputFilter:function(n){this._registerFilter("ecKeyInputFilters",n)},_registerFilter:function(n,t){t!=undefined&&t!=null&&($.isArray(t)||(t=[t]),this[n]=this[n]?this[n].filter(function(n){return n.type!=t[0].type}).concat(t):t)},setPrettyFilter:function(n){var t=[];n=_.isArray(n)?n:[n];this.__prettyFilter===null?this.__prettyFilter=n:(n.forEach(function(n){var i=this.__prettyFilter.find(function(t){return t.type==n.type},this);t.push(_.merge({},i,n))},this),this.__prettyFilter=_.uniqBy(_.concat(t,this.__prettyFilter),"type"));this.setConvertPrettyValue()},getPrettyFilter:function(n){if(this.__prettyFilter===null)return null;var t=n?this.__prettyFilter.find(function(t){return t.type===n}):null;return t?[t]:this.__prettyFilter},setConvertPrettyValue:function(){},setConvertUnPrettyValue:function(){},onBeforeRender:function(){return!0},_onAfterRender:function(){this.__renderCompleted=!0;ecount.control.registerLazyRender(this,function(){this._onLazyRender()});this.onAfterRender()},onAfterRender:function(){},onAfterViewChange:function(){_.isFunction(this._afterViewChange)&&this._afterViewChange()},onLoadItems:function(){this.__loadCompleted=!0;this.containerDelegator&&this.containerDelegator.triggerEvent("item.onload",{target:this.containerName,type:this.__type,__self:this})},createView:function(){if(!this.ecPackage)throw ecount.logger.error(String.format("'{0} of {1}' must be defined","ecPackage",this.controlType));var n=this.ecPackage.split(".");return n.splice(2,0,"view"),n=n.join("."),this.ecview=new(ecount.common.createNamespace(n))},renderView:function(n,t){this.ecview.render(_.merge({},t||this.__state,this.__viewOptions),n)},updateViewOptions:function(n){_.extend(this.__viewOptions,n)},updateEcViewWithTransaction:function(n){this.ecview&&(this.putBatchTransaction(_.merge({},n||this.__state)),this.executeTransaction())},notify:function(n,t,i){i=this.getExposableState(i);this.ecview&&(window.__ec_logging_state&&["validate.needvalidate","style.css","style.display","attr.disabled","attr.readonly","css.disabled","opt.selectRange","value","label","selectedValue","selectedLabel"].contains(t)&&ecount.runtime.notify(ECountEvent.Type.WRITE_LOG,null,{type:"change.state",ecPageID:this.ecPageID,popupLevel:this.popupLevel,controlType:this.controlType,cid:this.id,key:n,path:t,state:i}),this.ecview.update.apply(this.ecview,arguments))},notifyToStateObserver:function(n,t,i){this.OBSERVE_CHANGE_STATE&&(this._preventObservingStateChange||this.OBSERVE_CHANGE_STATE({self:this,targetID:this.id,key:n,path:t,state:i}))},_beforeSetState:function(n,t,i,r){t=="value"&&this.setOldValue(r[t])},_setState:function(n,t,i,r){function e(n){return n==this._IT_SELF?this.__state:isNaN(parseInt(n))?this.__state.functions[n]:this.__state.components[n]}var u=!1,f=e.call(this,n);return f&&!$.isNull(f[t])&&(f[t]!==i?(this._beforeSetState(n,t,i,f),f[t]=i,u=r!==!1):u=r===!0),u&&(u=!!(this.isViewUpdateable()&&u),this.OBSERVE_CHANGE_STATE&&($.isEmpty(this.gridID)||t!=="popover.toggle"||(t="popover.alloptions",i=this._getPopoverOptions()),this._preventObservingStateChange||this.OBSERVE_CHANGE_STATE({self:this,targetID:this.id,key:n,path:t,state:i}))),u&&(~t.indexOf("style.")||~t.indexOf("selectedItem"))&&ecount.runtime.notify(ECountEvent.Type.CHANGE_CONTROL_STYLE,null,{handler:ECountEvent.Type.CHANGE_CONTROL_STYLE,cid:this.cid,pcid:this.pcid,key:n,path:t,state:i}),u},getExposableState:function(n){return _.isArray(n)?n=n.map(_.cloneDeep):_.isObject(n)&&(n=_.cloneDeep(n)),n},setState:function(n,t,i,r){if(n==this._ALL_COMP){this.pendingViewUpdate(!0);this.getComponents().forEach(function(n,u){this._setState(u,t,i,r);this.putTransaction(u,t,i)}.bind(this));this.pendingViewUpdate(!1);this.batchUpdateView();return}this.isViewUpdateable()||this.putTransaction(n,t,i);var u=this._setState(n,t,i,r);u&&(this.batchUpdateView(),this.notify(n,t,i))},getState:function(n,t){return n===this._IT_SELF?this.__state[t]:n===this._ALL_COMP?this.__state.components:isNaN(+n)?this.__state.functions[n]?this.__state.functions[n][t]:undefined:this.__state.components[n]?this.__state.components[n][t]:undefined},hasState:function(n,t){var i=null;if(this.__state)if(n===this._IT_SELF)i=this.__state;else{if(n===this._ALL_COMP)return i=this.__state.components,i.some(function(n){return _.hasIn(n,t)});i=isNaN(+n)?this.__state.functions[n]:this.__state.components[n]}else return!1;return _.hasIn(i,t)},putBatchTransaction:function(n,t){var h=Object.keys(n),r,u,o,s,f,c,i,e;for(t===undefined&&(t=this._IT_SELF),f=0,c=h.length;f<c;f++){if(r=h[f],u=n[r],r=="components"){for(i=0,e=u.length;i<e;i++)this.putBatchTransaction(u[i],i);continue}if(r=="functions"){for(o=Object.keys(u),i=0,e=o.length;i<e;i++)s=o[i],this.putBatchTransaction(u[s],s);continue}["ecFunction","cid"].contains(r)||this.putTransaction(t,r,u)}},putTransaction:function(n,t,i){if(this.ecview){var r;this.transaction||(this.transaction=[]);r=_.findIndex(this.transaction,function(i){return i[0]==n&&i[1]==t});~r?this.transaction[r]=[n,t,this.getExposableState(i)]:this.transaction.push([n,t,this.getExposableState(i)])}},executeTransaction:function(){this.transaction&&(this.ecview&&this.ecview.executeTransaction(this.transaction),this.transaction=null)},getAddonTitle:function(){return this.getState(this._IT_SELF,"opt.addontitle")},changeAddonTitle:function(n){this.setState(this._IT_SELF,"opt.addontitle",n)},setNationalFlag:function(n,t){var r,i,u=this.getNationalFlag();u&&(_.isPlainObject(n)?(_.has(n,"nationalCode")&&(r=_.lowerCase(_.get(n,"nationalCode"))),_.has(n,"isDisplay")&&(i=!!n.isDisplay)):_.isString(n)?r=_.lowerCase(n):_.isBoolean(n)&&(i=n),_.isNil(r)||(this.setState("nationalFlag","nationalCode",r),t&&this.executeChangeDelegator(),i!==!0&&this.getState("nationalFlag","isMyCountryHidden")&&(i=_.lowerCase(_.get(ecount,"company.STATE_CODE"))===r?!1:!0)),_.isNil(i)||this.getState("nationalFlag","isIconHide")||this.setState("nationalFlag","style.display",i))},getNationalFlag:function(){return this.getState("nationalFlag","nationalCode")},setExcepted:function(n){this.setState("excepted","style.display",n)},enable:function(){this.show()},disable:function(){this.hide()},readOnly:function(n){_.isUndefined(n)&&(n=!0);this.setReadOnly(n)},_setStateByType:function(n,t,i){if(arguments.length==1)this._setCurrentState(n,_.times(this.getComponents().length),!0),this.setState(this._IT_SELF,n,!0);else if(arguments.length==2)i=arguments[1],this._setCurrentState(n,_.times(this.getComponents().length),i),this.setState(this._IT_SELF,n,i);else{$.isArray(t)||(t=[t]);for(var r=0,u=t.length;r<u;r++)this.getComponent(t[r])&&this.setState(t[r],n,i)}},_setCurrentState:function(n,t,i){for(var r=0,u=t.length;r<u;r++){if(n=="style.display"&&i==!0){this.getState(r,"opt.notVisible")||this.setState(t[r],n,i);continue}this.setState(t[r],n,i)}},_getStateByType:function(n,t){var i;return n===undefined||n===this._ALL_COMP?(i=this.getComponents(),i.filter(t.bind(this)).length==i.length):(i=n===this._IT_SELF?this.__state:this.__state.components[n],!i)?!1:t.call(i,i,n)},_setDisplayState:function(n){var t=this.getComponents().any(function(t){return t["style.display"]!==n});n==!1&&this.getState(this._IT_SELF,"style.display")==!1&&t&&this.setState(this._IT_SELF,"style.display",!0);this.getState(this._IT_SELF,"style.display")===n||t||this.setState(this._IT_SELF,"style.display",n)},_setReadonlyState:function(n){var t=this.getComponents().any(function(t){return t["attr.disabled"]!==n});n!=!0||t?n==!1&&this.getState(this._IT_SELF,"attr.disabled")&&this.setState(this._IT_SELF,"attr.disabled",!1):this.setState(this._IT_SELF,"attr.disabled",!0)},setReadOnly:function(){var n=Array.prototype.slice.call(arguments,0),t;n.unshift("attr.disabled");this._setStateByType.apply(this,n);n.length>2&&(t=n[2],this._setReadonlyState(t))},getComponents:function(){return this.__state?this.__state.components:{}},getFunctions:function(){return this.__state?_.toArray(this.__state.functions):[]},getFunction:function(n){return this.__state.functions[n]},getComponent:function(n){return this.__state.components[n]},getComponentsByAttr:function(n,t){var n=$.isArray(n)?n:[n],t=$.isArray(t)?t:[t];return this.getComponents().filter(function(i){for(var r=0;r<n.length;r++)if(i[n[r]]!==t[r])return!1;return!0})},getComponentByAttr:function(n,t){var n=$.isArray(n)?n:[n],t=$.isArray(t)?t:[t];return this.getComponents().head(function(i){for(var r=0;r<n.length;r++)if(i[n[r]]!==t[r])return!1;return!0})},getVisibleComponents:function(){return this.getComponents().filter(function(n){return n["style.display"]&&!this.isReadOnly(n.index)}.bind(this))},getVisibleComponent:function(n){return this.getVisibleComponents().find(function(t){return t.index==n})},isVisible:function(n){return n===undefined?this.getState(this._IT_SELF,"style.display")&&(this.getComponents().any(function(n){return n["style.display"]})||this.getFunctions().any(function(n){return _.isUndefined(n["style.display"])?!0:n["style.display"]})):this.getState(this._IT_SELF,"style.display")&&this._getStateByType(n,function(n){return n["style.display"]})},isVisibleElement:function(n){return this.ecview&&this.ecview.isVisibleElement(n)},isReadOnly:function(n){return this._getStateByType(n,function(n){return n["attr.disabled"]===!0||n["attr.readonly"]===!0})},hasReadOnlyState:function(n){return this.__state&&(this.isReadOnly(this._IT_SELF)||this.isReadOnly(n))},_isExceptionOfReadOnly:function(){return!1},isCombinedControl:function(){return this._isCombinedControl},isGridCellControl:function(){return!1},setValue:function(){var i,n,r,f=this.getComponents(),t,u;if(arguments.length===1?(i=0,n=$.isNull(arguments[0])?"":arguments[0]):(i=arguments[0],n=$.isNull(arguments[1])?"":arguments[1],r=$.isNull(arguments[2])?!1:arguments[2]),$.isArray(n))for(t=0,u=f.length;t<u;t++)this.setFilteredValueToComponent(n[t],t);else this.setFilteredValueToComponent(n,i);r&&this.executeChangeDelegator()},setStandardValue:function(){this.setValue.apply(this,arguments)},setOldValue:function(n){var t=$.isNull(n)?this.getValue():n;this.setState(this._IT_SELF,"opt.oldvalue",t,!1)},setFilteredValueToComponent:function(n,t){var o=this.getComponent(t),s=this._getContainsType(t),i=this.filteredNumericSeparator(n,o.value),u,f,r,e;if(this._checkContainsType(i,s).length>0)return this.setStateValue(t,i),!1;i=this._applyFilters(i,t);this._during_input_event!=!0&&this.numericOnly&&(this.id=="vat_amt"&&(this.ecPageID.indexOf("EBD010M_30")>=0||this.ecPageID.indexOf("EBD010M_31")>=0)&&(u={showValueZero:!0}),f=/^[-]$/,i=this._numericRTrim(f.test(i)?"":i,u),r=this.isUseOriginVal(t)?this.getState(t,"viewValue"):null,_.isEmpty(r)||(e=this._numericRTrim(f.test(r)?"":r,u),this.setState(t,"viewValue",e,!1)));this.setStateValue(t,i);ecount.constValue.isIE&&n!=i&&this._during_input_event==!0&&this.isSetFilteredValueChangeBlur()&&this.ecview&&this.setEventChangeByBlur(0)},setStateValue:function(n,t){this.setState(n,"value",t)},isUseOriginVal:function(){return!1},setNumericViewType:function(n,t){var u,r,i;if(this.numericOnly&&_.hasIn(this,"_numericOptions.options")&&this.hasState(this._ALL_COMP,"originValue")&&(n=!~_.indexOf(["round","ceil","floor"],n)?"none":n,t=_.isBoolean(t)?t:!1,u=this.ecKeyInputFilters.find(function(n){return n.type==="numericOnly"}),u))for(u.options.numericViewType=n,u.options.numericViewKeepOrigin=t,r=this.getComponents(),i=0;i<r.length;i++)this.setState(r[i].index,"originValue",""),this.setState(r[i].index,"viewValue","",!1),this.setState(r[i].index,"value","")},isSetFilteredValueChangeBlur:function(){return!1},_setNumericFilterdValueToComponent:function(n,t,i,r){if(this.numericOnly){var u=this._numericRTrim(t,{showZeroInPoint:i});(t!=u||r)&&this.setState(n,"value",u,r);this._focusInValue=this._numericRTrim(t)}},_getContainsType:function(){return this.getState(this._IT_SELF,"validate.containstype")},_setContainsType:function(n,t){this.setState(n,"validate.containstype",t)},filteredNumericSeparator:function(n){var t=_.isString(n)?n:n.toString(),i,r;return this.numericOnly&&this._during_input_event!=!0&&(i=this._numericOptions.options,r=i.DEC_SEPARATOR||".",t.length>0&&(t=Number.removeSeparator(t.decimalRTrim()).replaceAll(".",r))),t},isNumericOnlyChangeEventExcute:function(n){return($.browser.msie||navigator.userAgent.toLowerCase().indexOf("wow64")>-1||navigator.userAgent.toLowerCase().test(/windows\s?nt\s?5.1/)&&$.browser.chrome||ecount.isMobile&&ecount.common.isIOS)&&n.indexOf(this._numericOptions.options.THOU_SEPARATOR)>-1},setPlaceHolder:function(n,t){this.setState(t||0,"attr.placeholder",n)},getPlaceHolder:function(n){return this.getState(n||0,"attr.placeholder")},getNumericValue:function(n,t){var r,i;if(!this.numericOnly)return n;if($.isEmpty(n))return"";_.isArray(this.ecKeyInputFilters)&&this.ecKeyInputFilters.length>0&&(i=this.ecKeyInputFilters.find(function(n){return n.type=="numericOnly"}),i&&i.options&&(r={numericViewType:i.options.numericViewType,numericViewKeepOrigin:i.options.numericViewKeepOrigin}));var f=this.getComponent(t||0),e=this.filteredNumericSeparator(n,f.value),o=ecount.convertor.executeFilter(this._numericOptions,e,r),s=o.str,u;return this.id=="vat_amt"&&(this.ecPageID.indexOf("EBD010M_30")>=0||this.ecPageID.indexOf("EBD010M_31")>=0)&&(u={showValueZero:!0}),this._numericRTrim(s,u)},getStandardValue:function(){var n=this.getValue();return $.isArray(n)||(n=[n]),n},getComponentValue:function(n){return this.getValue(n)},getValue:function(){throw String.format("getValue of [{0}] must be overriden.",this.controlType);},getOldValue:function(){return this.getState(this._IT_SELF,"opt.oldvalue")},getResetData:function(){return this.getValue()},getContainerElement:function(){return this.ecview.getElements(null)},getParentContainerBoundary:function(){return this.ecview.getParentContainerBoundary()},getContainerBoundary:function(){return this.ecview.getContainerBoundary()},getComponentBoundary:function(n){return this.ecview.getComponentBoundary(n)},getFunctionBoundary:function(n,t,i){return this.ecview.getFunctionBoundary(n,t,i)},getRoleHolderBoundary:function(n,t,i){return this.ecview.getRoleHolderBoundary(n,t,i)},getCaretBoundary:function(n,t,i){return this.ecview.getCaretBoundary(n,t,i)},getEventTargetInstanceEcIKey:function(){return this.__eventTargetInstanceEcIKey},getAncestorID:function(){return this.ppcid||this.pcid||this.id},set$El:function(n){this.ecview&&this.ecview.set$El(n,this.getEcIKey())},addClass:function(n,t){$.isNull(t)&&(t=n,n=0);var i=this._getAllClass(n,t);this.setState(n,"style.css",i)},addClassAllComponents:function(n){this.getComponents().forEach(function(t){this.addClass(t.index,n)}.bind(this))},removeClass:function(n,t){$.isNull(t)&&(t=n,n=0);var i=this._getAllClass(n);this.setState(n,"style.css",ecount.convertor.removeClass(i,t))},removeClassAllComponents:function(n){this.getComponents().forEach(function(t){this.removeClass(t.index,n)}.bind(this))},changeInlineStyle:function(n,t){$.isNull(t)&&(t=n,n=0);this.setState(n,"style.inline",t)},changeWidth:function(n,t){$.isNull(t)&&(t=n,n=0);this.setState(n,"style.width",t)},changeWrapperFlex:function(n){this.setState(this._IT_SELF,"wrapper.isFlex",!!n)},changeSubLabel:function(n){if(arguments.length==1){var t=arguments;n=t[0];cindex=0}this.setState("sublabel","label",n)},isDualMode:function(){return this.dualMode},checkCustomDualAddedControl:function(){return!!this.isCustomDualAddedControl},getDualStep:function(){return this.getState(this._IT_SELF,"opt.dualStep")},getDualModeStep:function(){return this.getDualStep()},getDualMode:function(){return this.getDualStep()},setDualStep:function(n,t,i){(i==!0||this.getDualStep()!==n)&&(this.setState(this._IT_SELF,"opt.dualStep",n),this.dualStep=n,this.delegator&&t!==!0&&this.delegator.triggerEvent("dualMode.changeDualMode",{cid:this.id,dualStep:n}))},changeSubTitleByDualStep:function(n){this.delegator&&this.delegator.triggerEvent("dualMode.changeSubTitle",{cid:this.id,dualStep:n})},isInlineMode:function(){return!this.isCombinedControl()&&!!this.getActiveInlineMode()},isSingleInlineMode:function(n){return this.isInlineMode()&&(n||this.getActiveInlineMode())==this.inlineModeList[0].mode},getActiveInlineMode:function(){return this.__state&&this.getState(this._IT_SELF,"inlineMode.activeInlineMode")},setActiveInlineMode:function(n,t){if(_.isEmpty(this.fixedMode)){var i=this.inlineModeList.find(function(t){return t.mode==n});this.setState(this._IT_SELF,"inlineMode.activeInlineMode",n);i&&this.changeSubTitle(i.layerLabel);t!=!1&&this.delegator&&this.delegator.triggerEvent("form.sync",{cid:this.id,syncHandler:this.setActiveInlineMode,__self:this,preventTriggerEvent:!0,args:[n,!1]})}},changeSubTitle:function(n){this.delegator&&this.delegator.triggerEvent("form.changeSubTitle",{cid:this.getAncestorID(),title:n})},hide:function(){if(arguments.length==0)this.setState(this._IT_SELF,"style.display",!1);else{var n=Array.prototype.slice.call(arguments,0);n.unshift("style.display");n.push(!1);this._setStateByType.apply(this,n);this._setDisplayState(!1)}},show:function(){if(arguments.length==0)this.setState(this._IT_SELF,"style.display",!0);else{var n=Array.prototype.slice.call(arguments,0);n.unshift("style.display");n.push(!0);this._setStateByType.apply(this,n);this._setDisplayState(!0)}},setNotUseItemFold:function(n){this.isNotUseItemFold=n===!1?!1:!0},disabled:function(n){this.setState(this._ALL_COMP,"attr.disabled",n);this.setState(this._ALL_COMP,"css.disabled",n)},setDisabled:function(n){this.setState(this._ALL_COMP,"attr.disabled",n)},toggle:function(n){_.isBoolean(n)||(n=!this.isVisible());n==!0?this.show():this.hide()},isViewUpdateable:function(){return!this.onTransaction},pendingViewUpdate:function(n){this.onTransaction=n},batchUpdateView:function(){this.isViewUpdateable()&&this.ecview&&this.executeTransaction()},disableDelegatorExecution:function(){this._preventDelegatorExecution=!0},enableDelegatorExecution:function(){this._preventDelegatorExecution=!1},executeDelegatorQueue:function(){for(var t=this.getGridDelegatorOption(),n;this._delegatorQueue.length;)n=this._delegatorQueue.shift(),this.gridID&&t?this.executeChangeDelegator(_.extend(n,t)):this.executeChangeDelegator(n)},executeTabSync:function(){this.delegator&&this.delegator.triggerEvent("form.sync",this._getDefaultDelegatorInfo())},setGridDelegatorOption:function(n){this._gridDelegatorOption=n},getGridDelegatorOption:function(){return _.cloneDeep(this._gridDelegatorOption)},removeGridDelegatorOption:function(){this._gridDelegatorOption=null},isAbleToExecuteDelegator:function(){return!this._preventDelegatorExecution},disableTabSync:function(){this._preventSync=!0},enableTabSync:function(){this._preventSync=!1},isAbleTabSync:function(){return!this._preventSync},disableStateObserving:function(){this._preventObservingStateChange=!0},enableStateObserving:function(){this._preventObservingStateChange=!1},isAbleToStateObserving:function(){return!!this._preventObservingStateChange},isContainsLimitedSpecial:function(){return{result:!1,message:""}},resetData:function(){return!1},save:function(){var n=this.useFnActivedItem()?this.getFnActivedId():null,t;return t=$.isNull(n)?this.getValue():{value:this.getValue(),fn:n},{key:this.id,value:t}},saveWithoutEmpty:function(){return this.save()},restore:function(n){var i,t;_.isPlainObject(n)?(i=n.value,t=n.fn):i=n;this.setValue(0,i,!1);this.getNationalFlag()&&_.get(n,"nationalCode")&&this.setNationalFlag(_.get(n,"nationalCode"));this.useFnActivedItem()&&!$.isNull(t)&&(this.setFnActivedId(t),this.useFnExcepted()&&this.setExcepted(t==="NotContain"?!0:!1))},reset:function(n,t){var r=this.hasError(),i;n&&n.__state?this.resetAllState(n.__state):(i=n?n.data:this.getResetState(),this.resetStateByData(i));t&&this.executeChangeDelegator();this.isInlineMode()&&this.setActiveInlineMode(this.getActiveInlineMode(),!1);r&&this.hideError(this._IT_SELF,!1,!0)},callChangeEvent:function(){this.executeChangeDelegator()},_setResetValue:function(n,t,i){this.setState(n,t,i)},resetAllState:function(n){var i,r,u,t,f,o,s,h,c,l,e;this.pendingViewUpdate(!0);for(i in n)if(o=this._IT_SELF,i==="components")for(t=0,f=this.getComponents().length;t<f;t++){o=t;u=n[i][t];for(r in u)this._isComponentResetExceptionPath(r,u)||this.setState(o,r,u[r])}else if(i=="functions")for(s=n[i],h=Object.getOwnPropertyNames(s),t=0,f=h.length,e;t<f;t++){l=h[t];e=s[l];for(c in e)this.setState(l,c,e[c])}else this._isControlResetExceptionPath(i)||this.setState(this._IT_SELF,i,n[i]);this.pendingViewUpdate(!1);this.batchUpdateView()},resetStateByData:function(n){var t,i,r;for(this.pendingViewUpdate(!0),i=0,r=n.length;i<r;i++)t=n[i],t[1]=="value"?this._setResetValue(t[0],t[1],t[2]):this.setState(t[0],t[1],t[2]);this.pendingViewUpdate(!1);this.batchUpdateView()},getResetState:function(){return[]},_isComponentResetExceptionPath:function(n,t){return n.indexOf("css")>-1||["ecPath","cid","attr.name"].contains(n)||n=="viewValue"&&(!this.isUseOriginVal(t.index)||t.originValue==""||_.isNil(t.originValue))||this.isComponentResetExceptionPath(n,t)},isComponentResetExceptionPath:function(){return!1},_isControlResetExceptionPath:function(n){return n.indexOf("css")>-1||this.isControlResetExceptionPath(n)},isControlResetExceptionPath:function(){return!1},resetExceptionalState:function(){},extract:function(){return{__state:_.cloneDeep(this.__state),__viewOptions:_.cloneDeep(this.__viewOptions)}},clone:function(){return this.extract()},getSyncData:function(){return{data:[]}},getExtractState:function(n,t){var e=[],f,o,r,s,u,i;for($.isArray(n)||(n=[n]),f=0,o=n.length;f<o;f++)if(u=n[f],t===!0)i=this.getState(this._IT_SELF,u),$.isNull(i)||e.push([this._IT_SELF,u,i]);else for(r=0,s=this.getComponents().length;r<s;r++)i=this.getState(r,u),$.isNull(i)||e.push([r,u,i]);return e},getExtractFunctionState:function(n,t){var f=this.getState(this._IT_SELF,"functions"),r,i,u=[];for($.isArray(n)||(n=[n]),$.isNull(t)||$.isArray(t)||(t=[t]),index=0,length=n.length;index<length;index++)(r=n[index],i=f[r],i)&&(t?t.reduce(function(n,t){return $.isNull(i[t])?n:(n.push([r,t,i[t]]),n)}.bind(this),u):Object.getOwnPropertyNames(i).reduce(function(n,t){return n.push([r,t,i[t]]),n}.bind(this),u));return u},getOriginState:function(n,t){for(var n=$.isNull(n)?[]:$.isArray(n)?n:[n],t=$.isNull(t)?[]:$.isArray(t)?t:[t],u=[],f=_.cloneDeep(this.__originData),a=f.functions,r,s,e,l,h,c,i=0,o=n.length;i<o;i++)for(r=n[i],$.isNull(f[r])||u.push([this._IT_SELF,r,f[r]]),e=0,l=f.components.length;e<l;e++)h=f.components[e],$.isNull(h[r])||u.push([e,r,h[r]]);for(i=0,o=t.length;i<o;i++)s=t[i],c=a[s],u=u.concat(Object.getOwnPropertyNames(c).map(function(n){return[s,n,c[n]]}.bind(this)));return u},serialize:function(n){var t=this._serializeCustomizer(this);return(t&&(n=t),this.noSerialize==!0)?!1:(this.getNationalFlag()&&!_.isNil(n)&&_.isPlainObject(n)&&(n.nationalCode=this.getNationalFlag()),n===undefined?!1:n)},getFoldLayerValue:function(){var n=_.isFunction(this._getCustomFoldLayerValue)?this._getCustomFoldLayerValue(this):this.getText?this.getText():this.getValue();return _.isArray(n)?n.join(" "):n},_serializeCustomizer:function(){},serializeAdditionalData:function(n){var t=this._serializeAdditionalDataCustomizer(this);return t&&(n=t),n===undefined?!1:n},_serializeAdditionalDataCustomizer:function(){},isSerializeEnabled:function(){return _.isBoolean(this.enableSerialzeOnVisible)&&this.enableSerialzeOnVisible===!0&&!this.isVisible()?!1:this.noSerialize==!0?!1:!0},serializeById:function(){return this.serialize(null,this.id)},setValueBySerialized:function(){},dualModeShowButtonDisplay:function(){return!0},getGridViewHTML:function(){var t=this.getGridComposedTitleLabel(),n=[];return n.push(t),this.ecview.getGridViewTemplate(n)},getGridComposedTitleLabel:function(n){var t={},i=this.getGridControlContext(n);return t.title=i.getAddonTitle()||"",t.label=i._getGridSelectedLabel(),i.getNationalFlag()&&(t.nationalCode=i.getNationalFlag()),t},getGridControlContext:function(n){return n===undefined?this:n},_getGridSelectedLabel:function(){var n=this.getGridSelectedLabel&&this.getGridSelectedLabel();return n===undefined?"":n},getInitFocusIndex:function(){return 0},getCurrentFocusedIndex:function(){var n=this.getVisibleComponents(),t;return!n||!n.length?-1:(t=n.find(function(n){return this._hasFocus(n.index)?!0:!1}.bind(this)),t?t.index:-1)},getFocusableIndex:function(){return this._getFocusableIndex()},getReversedFocusableIndex:function(){return this._getFocusableIndex(!0)},_getFocusableIndex:function(n){var t=this.getVisibleComponents(),r,i;return!t||!t.length?-1:(r=t.find(function(t,r){return this._hasFocus(t.index)?(i=r+(n?-1:1),!0):!1}.bind(this)),r)?t[i]?t[i].index:-1:t[n?t.length-1:0].index},hasFocusableComponent:function(){return!!this.getVisibleComponents().length},hasFocus:function(){var n=this.getVisibleComponents();return!this.ecview||!n?!1:n.any(function(n){return this._hasFocus(n.index)}.bind(this))},_hasFocus:function(n){return this.ecview&&this.ecview.hasFocus(n)},onFocus:function(n){this.setFocusOnComponent(n,!0)},onFocusOut:function(n){this.getState(this._IT_SELF,"opt.lockErrorStatus")||this.validateIf(this.getState(this._IT_SELF,"validate.needvalidate")&&!this.doPreventAction());this.setState(this._IT_SELF,"opt.lockErrorStatus",!1);n===!0&&this.ecview&&this.ecview.onBlur()},setFocus:function(n,t){var f=this.__state,i=this.getComponent(n),r=!!(this.isVisibleElement(n)&&!this.isReadOnly(n)),u=t&&t.readonly===!0&&this.getState(this._IT_SELF,"validate.needvalidate");if(u&&this.isReadOnly(n)&&this.setState(this._IT_SELF,"opt.lockErrorStatus",!0),i&&r)this.setFocusOnComponent(n,!0);else this.onNextFocus(n)},setFocusOnComponent:function(n,t){this.notify(n,"focus.index",t)},onNextFocus:function(n){var t=n+1,i=this.getComponent(t);i?this.setFocus(t):this.setFocusOutTrigger()},setFocusOutTrigger:function(){this.delegator&&this.delegator.triggerEvent("control.focusout",{__self:this,cid:this.pcid||this.id,origin_id:this.id})},setRequestParameter:function(n,t){t.PARAM=n;this.addPopupOpenParam(t)},addPopupOpenParam:function(){},executeChangeDelegator:function(n){var t=n&&n.ecEvent?n.ecEvent:undefined,i=n&&n.event?n.event:undefined,r=this._getDefaultDelegatorInfo(t,i);if(n&&n.oldValue!=undefined&&(n.oldVlaue=n.oldValue),!this.isAbleToExecuteDelegator()){this._delegatorQueue.push(n);return}this._getGridCellInfo(n,function(){this.delegator&&this.delegator.triggerEvent("control.change",_.merge(r,{type:"control.change",value:this._getValueForDelegate(n),preventTriggerEvent:n?n.preventTriggerEvent:undefined},n))}.bind(this))},setEventChangeByBlur:function(n,t){this.notify(n,"blur.change",t)},hasValidateNeededComponent:function(){return this.getState(this._IT_SELF,"validate.needvalidate")||this.getComponents().any(function(n){return!!n["validate.needvalidate"]})},validateIf:function(n){n&&this.hideError(undefined,!1,!0)},validate:function(n,t){var i=[],r=this._getValidateValue(),e=this.getState(this._IT_SELF,"validate.containstype"),n=n||this.getState(this._IT_SELF,"validate.datarules")||[],t=t||this.getState(this._IT_SELF,"validate.datarulesmsg"),u,f,o;if(r=_.isNumber(r)?r+"":r,this._executeValidateIfVisible&&!this.isVisibleElement(0))return[];if(e&&r!==!1&&(i=this._checkContainsType(r,e),i.length>0))return i;for(this.ecDataFilters&&this.checkDataFilter(r),u=this.checkValidate(n,t)||[],f=0,o=u.length;f<o;f++)u[f].control=this;return i=this.checkEqualMsg(i,u),this.setDataRuleMessage(this._IT_SELF,i),i},_getValidateValue:function(n){return this.getValue(n)},_getGridCellInfo:function(n,t){t(n)},_checkContainsType:function(n,t){var r=[],i;return $.isNull(t)||this.isPreventCheckContainsType()==!0||(i=(n||"").toString().isContainsLimitedSpecial(t),i.result?(errMessage=i.message,r.push({message:errMessage,control:this,method:"limitedSpecial"}),this.setPreventHideError(!0),this.hasError()?this.setPopover(this._IT_SELF,{message:errMessage,placement:this._errPlacement,directShow:!0}):this.showError(this._IT_SELF,errMessage,!0),this._toggleValidate(this._IT_SELF,!0,!0)):this.setPreventHideError(!1)),r},isInGrid:function(){return!!(this.gridID&&this.gridColumnID&&this.gridDataKey&&this.gridSectionType)},isInGridWithoutCombineParent:function(){return this.isInGrid()&&!this.pcid},isPreventCheckContainsType:function(){var n=!!this._preventCheckContainsType;return(this.ecKeyInputFilters||[]).forEach(function(t){if(t.type=="numberOnlyAndSign"){n=!0;return}}),n},checkDataFilter:function(n){for(var u,i,t=0,r=this.ecDataFilters.length;t<r;t++)u=this.ecDataFilters[t],i=u(n),i.result===!1||i.data&&this.setFilteredValue(i.data)},setFilteredValue:function(n){this.setValue(n)},changeDataFilter:function(n){this.ecDataFilters=null;this._registerFilter("ecDataFilters",n)},checkValidate:function(){return[]},replacesSeparatorOrigin:function(n,t){var r=this._numericOptions.options,u,f,e,o,i;return $.isNull(n)?"":(t||(t={}),u=t.split_separator||r.DEC_SEPARATOR||".",f=t.reg_separator||r.THOU_SEPARATOR||",",e=t.replace_separator||",",o=t.join_separator||".",i=n.split(u),$.isNull(i[0])||(i[0]=i[0].replace(new RegExp("\\"+f,"g"),e)),i.join(o))},checkEqualMsg:function(n,t){var u=t.length,i,r;if(u==1)n.push(t[0]);else for(i=0;i<u;i++)for(r=i+1;r<=u;r++)if(n.push(t[i]),t[i].message==t[r].message)return n;return n},setDataRules:function(n,t){arguments.length==1&&n==null&&(this.setState(this._IT_SELF,"validate.datarules",null),this.setState(this._IT_SELF,"validate.datarulesmsg",null));n&&this.setState(this._IT_SELF,"validate.datarules",n);t&&this.setState(this._IT_SELF,"validate.datarulesmsg",t)},setDataRuleMessage:function(n,t){var r,i,u;if(this.hasError()&&this.hideError(n,undefined,!0),t.length>0){for(r=[],i=0,u=t.length;i<u;i++)t[i].method!="required"&&r.push(t[i].message);this.showError(n,r.length==0?null:r.join("<br/>"))}},hasError:function(n){return this.getState($.isNull(n)?this._IT_SELF:n,"validate.needvalidate")},showError:function(n,t,i,r,u){var f=Array.prototype.slice.apply(arguments),s=!1,e,h,c,o;f.length===1&&_.isPlainObject(f[0])?(n=f[0].key,t=f[0].message,i=f[0].directShow,r=f[0].preventTrigger,u=f[0].forceUpdateView,s=f[0].useDefaultOptions):f.length===0?n=this._IT_SELF:f.length===1&&(t=n,n=this._IT_SELF,c="focus hover");$.isEmpty(n)&&(n=this._IT_SELF);o=(t&&typeof t=="string"?t:"").cr2br();s==!0?(e=this._getPopoverOptions(),e.message=$.isEmpty(t)?this._getPopoverOptions().message:o,e.directShow=$.isNull(i)?!!this._getPopoverOptions().directShow:i):e={message:o,placement:this._errPlacement,directShow:!!i,trigger:c};this.setPopover(n,e);h=this.isViewUpdateable()&&!this.getState(n,"validate.needvalidate")||u;this._toggleValidate(n,!0,u);h&&!r&&this.delegator&&this.delegator.triggerEvent("control.showError",{instance:this,cid:this.id})},hideError:function(n,t,i){if(n=$.isEmpty(n)?this._IT_SELF:n,!this.isPreventHideError()){var r=this.isViewUpdateable()&&this.getState(n,"validate.needvalidate")||i;this._toggleValidate(n,!1,i);this._togglePopover(n,!1);r&&!t&&this.delegator&&this.delegator.triggerEvent("control.hideError",{instance:this,cid:this.id})}},setErrorMessage:function(n){this.setState(this._IT_SELF,"popover.message",n)},getErrorMessage:function(){return this.getState(this._IT_SELF,"popover.message")},setPreventHideError:function(n){this.setState(this._IT_SELF,"validate.errpreventhide",n)},isPreventHideError:function(){return this.getState(this._IT_SELF,"validate.errpreventhide")},setPopover:function(n,t){t=t||{};for(var i in t)$.isNull(this.getState(n,"popover."+i))||this.setState(n,"popover."+i,t[i],!0);this._togglePopover(n,!0,t.doNotNotifyGrid)},_togglePopover:function(n,t,i){this._getGridCellInfo({},function(r){var u=[this.ecPageID,this.tabID,this.gridID].join(ecount.delimiter),f=this.getState(n,"popover.toggle")!==t;this.setState(n,"popover.toggle",t);f&&!i&&ecount.runtime.notify("control.togglePopover",u,{flag:t,control:this,gridInfo:r,popoverInfo:this._getPopoverOptions()})}.bind(this))},_toggleValidate:function(n,t,i){this._getGridCellInfo({},function(r){var u=[this.ecPageID,this.tabID,this.gridID].join(ecount.delimiter);this.setState(n,"validate.needvalidate",t,i);ecount.runtime.notify("control.toggleValidate",u,{flag:t,control:this,gridInfo:r,validateInfo:this._getSpecificStateGroup(this._IT_SELF,"validate")})}.bind(this))},resetPopover:function(n,t){t=t||{};this._togglePopover(n,!1,t.doNotNotifyGrid);this.setPopover(n,t)},destroyPopover:function(n){this._togglePopover(n,!1)},_getPopoverOptions:function(n){for(var i=["type","message","placement","directShow","trigger","title","template","unusedbodyclickhandler","toggle"],n=$.isNull(n)?this._IT_SELF:n,r,f={},t=0,u=i.length;t<u;t++)r="popover."+i[t],f[i[t]]=this.getState(n,r);return f},_getSpecificStateGroup:function(n,t){var i;return n=$.isNull(n)?this._IT_SELF:n,t.indexOf(".")==-1&&(t=t+"."),i=n===this._IT_SELF?this.__state:this.__state[n],Object.getOwnPropertyNames(i).reduce(function(n,r){return r.indexOf(t)===0&&(n[r.replace(t,"")]=i[r]),n},{})},_doSelectAction:function(){return!1},appendSpace:function(){this.ecview&&this.ecview.appendSpace()},addFilterOptions:function(n){this.registerKeyInputFilter(n)},removeFilterOptions:function(n){_.isArray(n)||(n=[n]);_.isArray(this.ecKeyInputFilters)&&(this.ecKeyInputFilters=this.ecKeyInputFilters.filter(function(t){return n.contains(t.type)===!1}))},roundAllLayerItem:function(n,t){for(var i,r=0,u=(n||[]).length;r<u;r++){if(i=n[r],t.call(this,i,r,n)==!1)return null;i.isChildDepth===!0&&this.roundAllLayerItem(i.childItems,t)}return null},addDropdownItem:function(n){_.isArray(n)||(n=[n]);this.dropdownOptions=this.dropdownOptions&&this.dropdownOptions.length>0?this.dropdownOptions.concat(n):n},setDropdownSize:function(n){n===undefined&&(this.isSetDropdownSize=this.dropdownOptions&&this.dropdownOptions.length>8);this.isSetDropdownSize=n},addCaretDropdownItem:function(n){_.isArray(n)||(n=[n]);this._caretDropdownList=this._caretDropdownList&&this._caretDropdownList.length>0?this._caretDropdownList.concat(n):n},addFnItem:function(){this.addDropdownItem.apply(this,arguments)},removeDropdownItem:function(n,t){var i,r,f,u,e;if(t===!0)return this.dropdownOptions=[],!1;for(_.isArray(n)||(n=[n]),r=0,f=this.dropdownOptions.length;r<f;r++){if(i=this.dropdownOptions[r],n.contains(i.id)===!0){this.dropdownOptions.splice(r,1);r--;f--;continue}if(i.isChildDepth===!0)for(u=0,e=i.childItems.length;u<e;u++)n.contains(i.childItems[u].id)===!0&&(i.childItems.splice(u,1),u--,e--)}},removeCaretDropdownItem:function(n,t){if($.isEmpty(n)||t===!0)return this._caretDropdownList=[],!1;_.isArray(n)||(n=[n]);for(var r,i=0,u=this._caretDropdownList.length;i<u;i++)if(r=this._caretDropdownList[i],n.contains(r.EMAIL)===!0){this._caretDropdownList.splice(i,1);i--;u--;continue}},removeFnItem:function(){this.removeDropdownItem.apply(this,arguments)},addDropdownChildItem:function(n,t){var i=this.getDropdownItem(n);i&&(i.isChildDepth=!0,i.childItems=t)},addFnChildItem:function(){this.addDropdownChildItem.apply(this,arguments)},removeDropdownChildItem:function(n){var t=this.getDropdownItem(n);t&&t.childItems&&(t.childItems=null,t.isChildDepth=null,delete t.childItems,delete t.isChildDepth)},removeFnChildItem:function(){this.removeDropdownChildItem.apply(this,arguments)},hideDropdownItem:function(n){_.isArray(n)||(n=[n]);for(var t,i=0,r=n.length;i<r;i++)t=this.getDropdownItem(n[i]),t&&(t.hide=!0)},hideFnItem:function(){this.hideDropdownItem.apply(this,arguments)},showDropdownItem:function(n){_.isArray(n)||(n=[n]);for(var t,i=0,r=n.length;i<r;i++)t=this.getDropdownItem(n[i]),t&&(t.hide=!1)},showFnItem:function(){this.showDropdownItem.apply(this,arguments)},getDropdownItem:function(n){var t;return $.isNull(n)?this.dropdownOptions:(this.roundAllLayerItem(this.dropdownOptions,function(i){if(i.id===n)return t=i,!1}),t)},getFnItem:function(){return this.getDropdownItem.apply(this,arguments)},getFnItemById:function(){return this.getDropdownItem.apply(this,arguments)},getDropdownControl:function(n){var t;return this.roundAllLayerItem(this.dropdownOptions,function(i){if(i.id===n)return t=i,!1}),t},getDropdownVisibleItems:function(){var n=[];return this.roundAllLayerItem(this.dropdownOptions,function(t){t.hide!==!0&&n.push(t)}),n},getFnVisibleItems:function(){return this.getDropdownVisibleItems.apply(this,arguments)},getDropdownItemLength:function(){return this.dropdownOptions.length},getFnItemLength:function(){return this.getDropdownItemLength.apply(this,arguments)},changeFnClass:function(n,t){var i=this.getDropdownItem(n);$.isNull(i)||(i.aCss=t)},isVisibleFn:function(){return this.getState("fn","style.display")},changeFnText:function(n,t){var i=this.getDropdownItem(n);$.isNull(i)||(i.label=t)},changeFnClass:function(n,t){var i=this.getDropdownItem(n);$.isNull(i)||(i.aCss=t)},getFnActivedId:function(){return this.getState("fn","activedId")},setFnActivedId:function(n,t,i){var r=this.getFnItem(n);r&&!$.isNull(n)&&(i==!0||r.preventActive!=!0)&&this.setState("fn","activedId",n);t!=!1&&this.delegator&&this.delegator.triggerEvent("form.sync",{cid:this.id,syncHandler:this.setFnActivedId,__self:this,preventTriggerEvent:!0,args:[n,!1,i]})},useFnActivedItem:function(){return this.hasFn&&!$.isNull(this.fnOptions)&&!$.isNull(this.fnOptions.keepLastActivedItem)},useFnExcepted:function(){var n=this.__state.functions;return this.hasFn&&n&&n.excepted},getLayerServiceKey:function(n){var i=ecount.layer.constValue,r=n.ecPath,t;switch(n.ecService){case i.FN:t="fn";break;case i.TABLE:t="table";break;case i.DROPDOWN:t=n.cindex;break;case i.SELECTBOX:t=n.ecRoleIndex||n.ecFunctionId;break;case i.SPECTRUM:t="spectrum";break;case i.AUTOCOMPLETE:t=n.cindex;break;case i.CARETDROPDOWN:t="caret";break;case i.RECOMMENDDROPDOWN:t="recommend";break;case i.SELECTOR:t="selector"}return ecount.common.makeServiceKey(r,t)},getLazyLayerServiceKey:function(n){var r=ecount.layer.constValue,t=n&&n.ecPath||this.ecPath,u=n&&n.ecServiceAttr||this.getState(0,"ecServiceAttr"),i;return u==r.FOCUSABLE&&(i="recommend"),this.gridID&&(t=[t,this.rowKey].join(ecount.separator.ecPath)),ecount.common.makeServiceKey(t,i)},getLayerDefaultOption:function(n,t){if(this.ecview){var i=this.ecview.getGridElementInfo();return{type:n.ecService.split(".").pop(),ownerKey:this.ecIKey,serviceKey:this.getLayerServiceKey(n,t),ecPageID:this.ecPageID,containerName:this.containerName,tabID:this.tabID,gridID:this.gridID,isGridV3:this.isGridV3,tableId:i.gridTableID,rowId:i.dataKey,columnId:i.columnID,sectionType:i.sectionType}}},getLayerFnOption:function(n,t){var r=this.dropdownOptions,i=this.getFnActivedId();return this.useFnActivedItem()&&i&&!$.isEmpty(this.getFnItem(i))&&r.forEach(function(n){n.active=n.id==i?!0:!1}),_.extend(this.getLayerDefaultOption(n,t),this.fnOptions,{_commandPrefix:"function",items:r||[],boundary:this.getFunctionBoundary("fn")})},getLayerDropdownOption:function(n,t){return _.extend(this.getLayerDefaultOption(n,t),{boundary:this.getContainerBoundary()})},getLayerSelectorOption:function(n,t){var i=this.inlineModeList.map(function(n){return{id:n.layerId||[this.id,n.mode].join("_"),label:ecount.resource[n.layerLabel]||n.layerLabel,inlineMode:n.mode}}.bind(this));return _.extend(this.getLayerDefaultOption(n,t),{items:i||[],type:"dropdown",boundary:this.getFunctionBoundary("selector")})},getLayerSelectboxOption:function(n,t){var i=this.getLayerDefaultOption(n,t),r=this.getComponent(n.ecRoleIndex);return _.extend(i,r,{showingUpDelay:0,boundary:this.getRoleHolderBoundary(n.ecRole,n.ecRoleIndex)})},getLayerDatepickerOption:function(n,t){return _.extend(this.getLayerDefaultOption(n,t),{showingUpDelay:0,boundary:this.getContainerBoundary()})},getLayerSpectrumOption:function(n,t){var i=ecount.resource;return _.extend(this.getLayerDefaultOption(n,t),{boundary:this.getRoleHolderBoundary(n.ecRole),showingUpDelay:0,togglePaletteMoreText:i.BTN00108,togglePaletteLessText:i.LBL10378,cancelText:i.BTN00133,chooseText:i.BTN00357})},getLayerAutocompleteOption:function(n,t){return _.extend(this.getLayerDefaultOption(n,t),{type:"autocomplete",boundary:this.getComponentBoundary(n.cindex),minLength:1,searchURL:this.autocompleteSearchUrl||this.searchURL,searchSourceList:null,index:n.cindex,defaultParam:this.defaultParam,multiSelect:this.isCheckBoxDisplayFlag,showingUpDelay:300})},getLayerTableOption:function(n,t){var i=this.getLayerDefaultOption(n,t),r=this.getComponent(n.cindex||0);return _.extend(i,r,{boundary:this.getComponentBoundary(n.cindex||0),showingUpDelay:0,css:"dropdown-menu generate-other-slips"})},getLayerCaretdropdownOption:function(n,t){return _.extend(this.getLayerDefaultOption(n,t),{items:this._caretDropdownList||[],boundary:this.getCaretBoundary(),baseType:!1,withRemoveBtn:!0,cid:n.cid,cindex:n.cindex,pcid:this.id,ppcid:this.pcid,onClickCaretDropdownList:this._onClickCaretDropdownList.bind(this)})},getLazyLayerDefaultOption:function(n,t,i){var r=n.ecLazyService?n.ecLazyService:i.ecLazyService,u=this.getState(0,"ecServiceAttr")==ecount.layer.constValue.FOCUSABLE?!0:!1;return{type:r.split(".").pop(),ownerKey:this.ecIKey,serviceKey:this.getLazyLayerServiceKey(n,t),isFocusable:u,ecPageID:this.ecPageID,containerName:this.containerName,tabID:this.tabID,gridID:this.gridID}},getLazyLayerRecommenddropdownOption:function(n,t,i,r){var u=this.delegator;return new Promise(function(t,i){u&&u.triggerEvent("control.openLayer",{targetID:this.id,control:this,parameter:{event:n,isReload:r&&r.btnType=="Reload"||!1,responseID:responseID=ecount.global.registerCallback(this.ecPageID,this.onRecommendMessage,this)},handler:function(n){n.status==="success"?t(n):(n.status==="fail"||n.status===undefined)&&i()}})}.bind(this))},onRecommendMessage:function(){},dropdownLayerClick:function(n,t){var i=_.cloneDeep(this.defaultParam),r=_.extend({},i,t);this.delegator&&this.delegator.triggerEvent("control.openPopup",{targetID:this.id,control:this,parameter:r,handler:function(i,r,u,f){var e=this._getFavoriteCodePopupOption(i,n);e.popupLevel=f;e.parentPageID=i.parentPageID||u;this.openFavoriteCodeTreePopup(_.extend(e,t),u,f)}.bind(this)})},_getFavoriteCodePopupOption:function(n,t){var i={Request:{defaultParam:_.extend(this.defaultParam||{},n),PopupUrl:this.popupURL||"",PrgId:this.prgId,WigtCd:this.controlType,Wigt_dv_cd:t.wigt_dv_cd||this.cid,RowIdx:this.rowIdx,GridId:t.gridID},width:300||t.width,height:600||t.width,isOpenPopup:!0,responseID:ecount.global.registerCallback(this.ecPageID,this.onMessage,this),__ecPageID:this.ecPageID};return{url:n.url||t.url,name:n.name||"",param:i,popupID:this.id,popupType:n.popupType||!1,alreadyIncludedLayout:!n.popupType||!0}},openFavoriteCodeTreePopup:function(n){this._getGridCellInfo({},function(t){t.gridDataKey&&n.param&&n.param.Request&&(n.param.Request.RowIdx=t.gridDataKey);ecount.popup.openWindow(n)})},openPopup:function(n,t){t.responseID=this.callbackID;t.__ecPageID=this.ecPageID;this.delegator&&this.delegator.triggerEvent("control.openPopup",{targetID:n.targetID,control:n.control,parameter:t,handler:function(n,t,i,r){this.responseID=t;var u={url:n.url,name:n.name||"",param:n,popupType:n.popupType,popupID:this.id,popupLevel:r,parentPageID:n.parentPageID||i,isChangePopupType:n.isChangePopupType,alreadyIncludedLayout:!n.popupType};ecount.popup.openWindow(u)}.bind(this)})},setStyle:function(n,t){arguments.length===1?(t=n,n=this._IT_SELF):arguments.length===2&&$.isNull(n)&&(n=this._IT_SELF);for(var i in t)this.setState(n,"style."+i.toLowerCase(),t[i])},_setInputValue:function(n){this._during_input_event=!0;this.setValue(n.cindex,n.value);this._during_input_event=!1},onMessage:function(){},isCheckboxControl:function(){},_isLayerShow:function(n){var t;if(n)return(t=ecount.layer.getLayer(n),t&&t.isShow)?!0:!1},isDateControl:function(){},setImeModeKeydownHandler:function(n,t,i){var r={cindex:n,type:"imeMode",options:{mode:i}};this._registerFilter("ecKeyInputFilters",r)},doPreventAction:function(){return this.isPreventHideError()},_setPreventClick:function(n){var t=this;t[n]=!0;ecount.global.setTimeout(this.ecPageID,function(){t[n]=!1},t._clickDelayTime)},_getAllClass:function(n,t){return ecount.convertor.uniqSumClass(this._defaultCss,(this.getState(n,"style.css")||"").replaceAll("hidden",""),this.getState(n,"style.display")===!1?"hidden":"",n===this._IT_SELF&&this.hasError()?"has-error":"",t||"")},_setDropdownControls:function(n){if(n&&$.isArray(n)){for(var t,i=0;i<n.length;i++){t=n[i];switch(t.controlType){case"widget.checkbox":t.getValue=function(){return this.data[0].selected}}}return n}return[]},_setValueOnServiceControl:function(n,t){var i=this.getFnItem(n.id),t=n.getValue();if($.isNull(i))return!1;switch(n.controlType){case"widget.checkbox":i.data[0].selected=t;i.value=t}},_numericRTrim:function(n,t){var i=_.extend(_.clone(this._numericOptions.options),t||{});return ecount.convertor._numericRTrim(_.isNil(n)?"":n,i)},_applyFilters:function(n,t){for(var h=this.ecKeyInputFilters||[],o=!1,f=n,s="",u={},i,r,l,e=0,c=h.length;e<c;e++)if((i=h[e],!$.isNumber(i.cindex)||i.cindex===t)&&i.type!=="prettyFilter"){if(i.type=="password"&&_.isFunction(this.passwordValidate)&&(u.passwordValidate=this.passwordValidate),i.type==="numericOnly"&&(u.duringInputEvent=this._during_input_event,_.hasIn(i,"options.numericViewType")&&(u.numericViewType=i.options.numericViewType,u.numericViewKeepOrigin=i.options.numericViewKeepOrigin)),r=ecount.convertor.executeFilter(i,n,u),f=r.str,s=r.message,l=r.isErr,this.setState(this._IT_SELF,"validate.filterResult",r),i.type==="numericOnly"&&this.isUseOriginVal(t)&&(this.setState(t,"originValue",r.orgVal),this.setState(t,"viewValue",r.viewVal,!1)),this._useNumericRequired&&f==""){s="";o=!0;break}if(f!=n){o=l!=!1;break}}return o&&this._during_input_event==!0?this.hasError()||this.showError(this._IT_SELF,s,!0):this.hasError()&&this.hideError(this._IT_SELF),f},getConvertPrettyFilter:function(n,t,i){var f={value:t,isChange:!1},u,r,e;for(n=n||this.__prettyFilter||[],r=0;r<n.length;r++)e=n[r],u=ecount.convertor.executePrettyFilter(e,t,i),u.isChange&&_.merge(f,u);return f},_getDefaultDelegatorInfo:function(n,t){var i=n||{},r={cid:this.id,event:t,__self:this,gridID:i.gridID||this.gridID,gridDataKey:i.gridDataKey||this.gridDataKey,gridColumnID:i.gridColumnID||this.gridColumnID,gridSectionType:i.gridSectionType||this.gridSectionType};return this.getNationalFlag()&&(r.nationalCode=this.getNationalFlag()),$.isNull(i.cid)?_.extend(r,{syncData:this.getSyncData()}):_.extend(r,{type:n.handler.split(".").reverse().join("."),cid:n.cid,cindex:n.cindex||0,value:this.getValue?this.getValue(n.cindex):"",syncData:this.getSyncData(n.cindex)}),r},_getValueForDelegate:function(n){return this.getStandardValue(n&&n.cindex?n.cindex:0)},setDetailSearchLayoutStatus:function(n){this.detailSearchLayoutStatus=n},getDetailSearchLayoutStatus:function(){return this.detailSearchLayoutStatus==undefined?!1:this.detailSearchLayoutStatus},_showLayer:function(n,t,i){var o;if(this.getDetailSearchLayoutStatus())return!1;var e=n.handler.toLowerCase().split(".").slice(1).join("."),f=("get_"+e.replace(/\./g,"_")+"_option").ecCamelize(!0),r,u=ecount.layer.constValue;switch(e){case u.SELECTBOX:o=this.getState(this._IT_SELF,"useRecommendOption");r=ec$.safeCall(this,f,n,t);o&&r!==!1&&r.executeToggle!=!0&&ecount.layer.show(_.extend(r,i||{}));break;case u.FN:case u.DROPDOWN:case u.RECOMMENDDROPDOWN:case u.SELECTOR:case u.SELECTITEM:r=ec$.safeCall(this,f,n,t);r!==!1&&r.executeToggle!=!0&&ecount.layer.show(_.extend(r,i||{}));break;case u.TABLE:r=ec$.safeCall(this,f,n,t);ecount.layer.update(_.extend(r,i||{}))}},_showLayerRecommendDropdown:function(n,t,i,r){var f=this.getOptionsFunctionName(n,t,i,r,"get_"),u=ec$.safeCall(this,f,n,t,r);u!==!1&&u.executeToggle!=!0&&ecount.layer.show(_.extend(u,{}))},_hideLayer:function(n,t){var r=n.handler.toLowerCase().split(".").slice(1).join("."),u=this.getLayerServiceKey(n,t),i=ecount.layer.constValue;switch(r){case i.FN:case i.TABLE:case i.DROPDOWN:case i.RECOMMENDDROPDOWN:case i.SELECTOR:case i.SELECTITEM:ecount.layer.hide(u)}},_getUserHandlerParam:function(n,t){return t},_onBeforeEventExecute:function(n,t,i,r){var u="_ON_BEFORE_"+n.handler.toUpperCase().split(".").shift();return ec$.safeCall(this,u,n,t,i,r)},validatorOfShowRecommendLayer:function(n,t){var r=this.getLazyLayerServiceKey(n,t),f=ecount.layer.getTimer(r),i,u;return $.isEmpty(f)?(i=ecount.layer.getLayer(r),u=i&&i.isShow(),!u):!1},validatorOfDeleteRecommendLayer:function(){var n=this.getComponent(0),t=n.value;return!$.isEmpty(t)},getOptionsFunctionName:function(n,t,i,r,u){var e=r.handler?r.handler:n.handler,f=e.toLowerCase().split("."),o=f.slice(f.length>3?2:1).join(".");return(u+o.replace(/\./g,"_")+"_option").ecCamelize(!0)},_lazyLoadDropdown:function(n,t,i,r){return new Promise(function(u,f){var o=this.getOptionsFunctionName(n,t,i,r,"get_lazy_"),e=ec$.safeCall(this,o,n,t,i,r);if(e)e.then(function(n){return u(n.data)},function(){return u([])});else return f()}.bind(this)).then(function(u){if(this.hasFocus())this.onBeforeShowRecommendLayer(n,t,i,r,u)}.bind(this)).catch(function(n){console.log(n)}.bind(this))},hideLazyLayer:function(n,t){ecount.layer.hide(this.getLazyLayerServiceKey(n,t))},onClickCaret:function(){},_onClickCaretDropdownList:function(n){n.controlID=this.id;n.pcontrolID=this.pcid;this.onClickCaretDropdownList(n)},onClickCaretDropdownList:function(){},onBeforeShowRecommendLayer:function(n,t,i,r,u){var f=this.getState(this._IT_SELF,"useRecommendOption");this.useFavoriteCode=$.isArray(u)&&u.some(function(n){return n.USE_TF});(f||this.useFavoriteCode)&&(this.recommendDropdownOptions=u,this._showLayerRecommendDropdown(n,t,i,r))},setFunctionAttr:function(n,t,i){!this.isInGridWithoutCombineParent()||t.indexOf("style")<0||this.getState(n,t,i)&&this.setState(n,t,i)},setValueFromLayer:function(n,t,i,r){var f,u;if(r.type==ecount.layer.constValue.RECOMMENDDROPDOWN){if(!r.value)return!1;f=$.isArray(r.value)?r.value[0]:r.value;this.setValue(n.cindex||0,f||"",!0);this.isInGridWithoutCombineParent()&&(u=_.cloneDeep(n),u.value=r.value,u.serviceName=r.serviceName,this.executeChangeDelegator(u));this.removeDropdownLayer.apply(this,arguments);this.onNextFocus(0)}},removeDropdownLayer:function(n){!this.hasFnDynamicView()||this.isReadOnly(this._IT_SELF)||n.eventTriggerFromInternalTarget||n.eventTriggerFromInternalLayerTarget||(this.displayFnDynamicView(!1),this.hideLayerByEcServiceSuffix("fn"))},getLayerRecommenddropdownOption:function(n,t,i){return _.extend(this.getLazyLayerDefaultOption(n,t,i),this.fnOptions,{_commandPrefix:this.controlType.split(".")[1],_forcedDisplayPosition:this.containerName=="footer"?"top":"",cindex:n.cindex,items:this.recommendDropdownOptions||[],baseType:!0,boundary:this.getContainerBoundary(),afterShow:i.afterShow||{},isFromCS:this.isFromCS,useFavoriteCode:this.useFavoriteCode,useRecommendOption:this.useRecommendOption})},_onBeforeServiceEventExecute:function(n,t,i,r){var u="_ON_BEFORE_"+n.handler.toUpperCase().split(".").shift()+"_SERVICE";return ec$.safeCall(this,u,n,t,i,r)},_onValueDeleteShowRecommendLayer:function(n,t,i,r){n.ecLazyService&&this.validatorOfShowRecommendLayer(n,t)&&this._lazyLoadDropdown(n,t,i,r)},_ON_BEFORE_CHANGE:function(){return!0},_ON_CHANGE:function(n,t,i){if(this.triggerUserHandler("change",this._getUserHandlerParam(n,t,i)),this.__silence_change_event===!0||this._onBeforeEventExecute(n,t)===!1)return!1;this.ON_CHANGE(n,t,i)},ON_CHANGE:function(){},_ON_BEFORE_CLICK:function(n,t,i,r){if(n.handler==="click.controlExternal")return!1;if(n.ecService==ecount.layer.constValue.FN){if(!this.isToggleFnLayer())return!1}else if(this.isReadOnly(this._IT_SELF)&&!this._isExceptionOfReadOnly(n,t,i,r)||this.isReadOnly(n.cindex))return!1;return!0},_ON_CLICK:function(n,t,i,r){if(this.triggerUserHandler("click",this._getUserHandlerParam(n,t,i,r)),n.ecFunction=="nationalFlag"&&this.getState("nationalFlag","isClickPopup"))return this.openPopupNationalFlag(),!1;if(this._onBeforeEventExecute(n,t,i,r)===!1)return!1;if(n.ecPath==this.ecPath)if(n.ecService){var e=n.handler.toLowerCase().split(".").slice(1).join("."),o=("get_"+e.replace(/\./g,"_")+"_option").ecCamelize(!0),f=ec$.safeCall(this,o,n,t,i,r),u=ecount.layer.constValue;if(f&&f.executeToggle==!0&&(f.showingUpDelay=0,ecount.layer.toggle(f),!f.continuePropagation))return!1;switch(e){case u.AUTOCOMPLETE:if(!r.showLayerInputMode)return!1;case u.DATEPICKER:case u.SELECTBOX:case u.CREATETABLE:case u.IMAGEFILE:case u.BOXSIZESETTING:case u.PALETTE:case u.REPORT:case u.FILEGROUP:case u.REPORTALIGN:ecount.layer.toggle(f);break;case u.SPECTRUM:ecount.layer.show(f);break;case u.FN:case u.DROPDOWN:case u.SELECTITEM:case u.TABLE:case u.NOTIFICATIONDROPDOWN:case u.SELECTOR:this._fixClickedLayer(n,t,f);break;case u.CARETDROPDOWN:this.onClickCaret({layerShow:function(){f.items=this._caretDropdownList;f.items=$.isArray(this._caretDropdownList)&&this._caretDropdownList.length>0?this._caretDropdownList:[{id:ecount.resource.MSG00729,label:ecount.resource.MSG00729,value:ecount.resource.MSG00729}];this._fixClickedLayer(n,t,f)}.bind(this)})}}else n.ecLazyService&&setTimeout(function(){this.validatorOfShowRecommendLayer(n,t)&&this._lazyLoadDropdown(n,t,i,_.extend(r,{handler:"click."+n.ecLazyService,afterShow:{action:"removeLayer",delay:ecount.common.LAYER_DISAPPEAR_DELAY_1200}}))}.bind(this),0);if(this._tooltip&&(this._timeoutNo&&ecount.global.clearTimeoutByTimerNo(this.ecPageID,this._timeoutNo),this.destroyPopover(this._IT_SELF)),n.handler==ECountEvent.Type.CLICK_LAYER&&this.isOnTableLayer&&this.isOnTableLayer(n,t))this.ON_CLICK(_.extend({},n,{handler:ECountEvent.Type.CLICK_CONTROL}),t);else if(this.ON_CLICK(n,t,i,r)===!1)return!1},_fixClickedLayer:function(n,t,i){var r=i.serviceKey,u=ecount.layer.getLayer(r);if(!!i.useToggleMode&&!_.isNil(u)){ecount.layer.removeLayer(r);return}n.ecServiceAttr!=ecount.layer.constValue.FIXED||this.getDetailSearchLayoutStatus()?ecount.layer.clearTimer(i.serviceKey):(i.showingUpDelay=0,i._onClicked=!0,this.isInlineMode()&&(i.afterShow={action:"removeLayer",delay:ecount.common.LAYER_DISAPPEAR_DELAY_3000}),ecount.layer.show(i),ecount.layer.setOnClicked(i.serviceKey,!0))},ON_CLICK:function(){},_ON_BEFORE_MOUSEOVER:function(n){if(n.ecService==ecount.layer.constValue.FN){if(!this.isToggleFnLayer())return!1}else if(this.hasReadOnlyState(n.cindex))return!1;return!0},_ON_MOUSEOVER:function(n,t,i,r){if(this._onBeforeEventExecute(n,t,i,r)===!1)return!1;if(n.ecService&&n.ecService!="layer.selectbox"&&!this.hasError()&&!this._preventLayerOpenByHover){var u={};this.isInlineMode()&&(u.afterShow={action:"removeLayer",delay:ecount.common.LAYER_DISAPPEAR_DELAY_3000});this._showLayer(n,t,u)}return this._tooltip&&(this._timeoutNo=ecount.global.setTimeout(this.ecPageID,function(){this.setPopover(this._IT_SELF,{message:this._tooltip.message,placement:this._tooltip.placement,directShow:!0})}.bind(this),ecount.common.mouseHoverInTime)),this.ON_MOUSEOVER(n,t,i,r)===!1?!1:void 0},ON_MOUSEOVER:function(){},_ON_BEFORE_MOUSEOUT:function(n,t){return this.hasReadOnlyState(n.cindex)?(this.hasFnDynamicView()&&this._hideLayer(n,t),!1):!0},_ON_MOUSEOUT:function(n,t,i,r){return this._onBeforeEventExecute(n,t,i,r)===!1?!1:(n.ecService&&!this._preventLayerOpenByHover&&this._hideLayer(n,t),this._tooltip&&(this._timeoutNo&&ecount.global.clearTimeoutByTimerNo(this.ecPageID,this._timeoutNo),this.destroyPopover(this._IT_SELF)),this.ON_MOUSEOUT(n,t,i,r)===!1?!1:void 0)},ON_MOUSEOUT:function(){},_ON_BEFORE_MOUSEDOWN:function(n){return this.hasReadOnlyState(n.cindex)?!1:!0},_ON_MOUSEDOWN:function(n,t,i,r){return this._onBeforeEventExecute(n,t,i,r)===!1?!1:this.ON_MOUSEDOWN(n,t,i,r)===!1?!1:void 0},ON_MOUSEDOWN:function(){},_ON_BEFORE_INPUT:function(n,t){var i,r;return ecount.common.isChrome&&this.numericOnly&&n.value!==undefined&&n.cindex!==undefined&&t.originalEvent&&(i=this.getState(n.cindex,"value"),t.originalEvent.inputType=="insertCompositionText"&&(this._usingIMEComosingInput=!0),this._usingIMEComosingInput&&t.originalEvent.inputType=="insertText"&&(r=n.value,this._usingIMEComosingInput=!1,i.length>0&&i!==r))?(this.setState(n.cindex,"value",i,!0),!1):!0},_ON_COMPOSITIONUPDATE:function(n,t){var i;this.numericOnly&&t.target.value!==undefined&&t.originalEvent.data!==undefined&&(i=t.target.value.replace(/[\s\.\,·']/g,""),isNaN(+i)||(t.originalEvent.data.length>1&&ecount.user&&ecount.user.LAN_TYPE!="ja-JP"?this.setState(n.cindex,"value","",!0):this.setState(n.cindex,"value",t.target.value,!0)))},_ON_INPUT:function(n,t,i,r){return this._onBeforeEventExecute(n,t,i,r)===!1?!1:(this._onInputAction(n,t,i,r),n.ecLazyService&&this.validatorOfDeleteRecommendLayer(n,t)&&ecount.layer.removeLayer(this.getLazyLayerServiceKey(n,Event)),this.ON_INPUT(n,t,i,r)===!1?!1:void 0)},_onInputAction:function(n,t,i,r){function o(){var e=(n.value||"").toString().isContainsLimitedSpecial(this._getContainsType(n.cindex)),u;e.result||(u=ec$.safeCall(this,f,n,t,i,r),ecount.layer.update(u))}if(!this._checkValidation(n))return!1;if(this.setState(n.cindex,"value",n.value),n.cindex!=undefined&&this._setInputValue(n,t,i,r),n.ecService){var u=n.handler.toLowerCase().split(".").slice(1).join("."),f=("get_"+u.replace(/\./g,"_")+"_option").ecCamelize(!0),e=ecount.layer.constValue;switch(u){case e.AUTOCOMPLETE:o.call(this)}}},_checkValidation:function(){return!0},ON_INPUT:function(){},_ON_BEFORE_FOCUSIN:function(){return!0},_ON_FOCUSIN:function(n,t,i,r){var u,h,e,o,c;if(this._onBeforeEventExecute(n,t,i,r)===!1)return!1;var l=!$.isNull(n.gridID),a=!$.isNull(n.cindex),f=[],s=[];if(a&&!this.isReadOnly(this._IT_SELF)){if(this.hasFn&&this.getState("fn","attr.disabled")==!1&&this.hasFnDynamicView()&&this.displayFnDynamicView(!0),this.isInlineMode()&&this.getState("selector","style.display")==!0&&(f.push("selector"),s.push({afterShow:{action:"removeLayer",delay:ecount.common.LAYER_DISAPPEAR_DELAY_3000}})),l==!1&&r.showLayerInFocus!=!1)for(u=0,h=f.length;u<h;u++)this._showLayer(_.extend({},n,{handler:["focusin.layer",f[u]].join("."),ecService:["layer",f[u]].join(".")}),t,_.extend({showingUpDelay:ecount.common.mouseHoverInTime,_onClicked:!0},s[u]||{}));this.useFocusHandler&&(r.useFocusHandler=!0)}return $.isNull(n.cindex)||(e=n.value,o=null,this.isUseOriginVal(n.cindex)&&(c=this.getState(n.cindex,"viewValue"),_.isEmpty(c)||(e=this.getState(n.cindex,"value"),o=!0)),this._setNumericFilterdValueToComponent(n.cindex,e,!1,o)),ecount.global.setTimeout(this.ecPageID,function(){this.hasError()&&this.resetPopover(this._IT_SELF,{directShow:!0,trigger:"manual",doNotNotifyGrid:!0})}.bind(this)),this._focusPopover&&this.setPopover(this._IT_SELF,{message:this._focusPopoverMsg,placement:this._errPlacement,directShow:!0,trigger:"focus"}),n.ecLazyService&&this.validatorOfShowRecommendLayer(n,t)&&this._lazyLoadDropdown(n,t,i,_.extend(r,{afterShow:{action:"removeLayer",delay:ecount.common.LAYER_DISAPPEAR_DELAY_1200}})),this.ON_FOCUSIN(n,t,i,r)===!1?!1:void 0},ON_FOCUSIN:function(){},_ON_BEFORE_FOCUSOUT:function(){return!0},_ON_FOCUSOUT:function(n,t,i,r){var u,o,f,e;return this._onBeforeEventExecute(n,t,i,r)===!1?!1:!n.eventTriggerFromInternalTarget&&!n.eventTriggerFromIOSFnTarget&&this.getFunction("fn")&&[ecount.layer.constValue.FN].contains(n.ecService)?(this.hasReadOnlyState(n.cindex)||this.fnAlwaysShow||!this.hasFnDynamicView()||(this.hideLayerByEcServiceSuffix("fn"),this.displayFnDynamicView(!1)),!0):(!this.hasFnDynamicView()||this.isReadOnly(this._IT_SELF)||n.eventTriggerFromInternalTarget||n.eventTriggerFromIOSFnTarget||n.eventTriggerFromInternalLayerTarget||(this.displayFnDynamicView(!1),this.hideLayerByEcServiceSuffix("fn")),this.hasFn&&n.eventTriggerFromIOSFnTarget&&!this.gridColumnID&&this.ecview&&this.ecview.setFunctionFocus("fn"),this.isInlineMode()&&this.getState("selector","style.display")==!0&&this.hideLayerByEcServiceSuffix("selector"),this.numericOnly&&!_.isNull(n.cindex)&&(o=/^[-]$/,u=this._numericRTrim(o.test(n.value)?"":n.value),n.value!=u&&this.setState(n.cindex,"value",u),this.isUseOriginVal(n.cindex)&&(f=this.getState(n.cindex,"viewValue"),_.isEmpty(f)||this.setState(n.cindex,"viewValue",f,!0)),this.isNumericOnlyChangeEventExcute(u)&&this._focusInValue!=u&&this.setState(this._IT_SELF,"opt.triggerChange",n.cindex,!0)),this._useResetData&&(this._savedValue=this.getResetData()),this.hasError()&&(this.resetPopover(this._IT_SELF,{directShow:!1,trigger:"focus hover",doNotNotifyGrid:this.isInGridWithoutCombineParent()}),e=!1,typeof this.getGridActiveInfo=="function"&&typeof this.getGridValidateInfo=="function"&&typeof this.getGridInputMode=="function"&&(e=this.getGridActiveInfo()&&this.getGridValidateInfo()&&this.getGridInputMode()=="view"),this.isPreventHideError()||e||this.hideError(this._IT_SELF)),this._focusPopover&&this.destroyPopover(this._IT_SELF),n.gridColumnID&&n.ecService==ecount.layer.constValue.FN&&(n.eventTriggerFromInternalTarget||n.eventTriggerFromIOSFnTarget))?!1:this.isLayerMousedown?(this.isLayerMousedown=!1,!1):(n.ecLazyService&&this.hideLazyLayer(n,Event),this.ON_FOCUSOUT(n,t,i,r)===!1?!1:void 0)},ON_FOCUSOUT:function(){},_ON_BEFORE_KEYDOWN:function(){return!0},_ON_KEYDOWN:function(n,t,i,r){return this._onBeforeEventExecute(n,t,i,r)===!1?!1:this["_ON_"+n.keyEventHandlerName]&&this["_ON_"+n.keyEventHandlerName](n,t,i,r)===!1?!1:void 0},ON_KEYDOWN:function(){},_ON_KEYDOWN_SERVICE:function(n,t,i,r){if(this["_ON_"+n.keyEventHandlerName+"_SERVICE"]&&this["_ON_"+n.keyEventHandlerName+"_SERVICE"](n,t,i,r)===!1)return!1},_ON_BEFORE_KEYUP:function(){return!0},_ON_KEYUP:function(n,t,i,r){return this._onBeforeEventExecute(n,t,i,r)===!1?!1:this["_ON_"+n.keyEventHandlerName]&&this["_ON_"+n.keyEventHandlerName](n,t,i,r)===!1?!1:void 0},_ON_KEYUP_SERVICE:function(n,t,i,r){if(this["_ON_"+n.keyEventHandlerName+"_SERVICE"]&&this["_ON_"+n.keyEventHandlerName+"_SERVICE"](n,t,i,r)===!1)return!1},ON_KEYUP:function(){},_ON_KEYPRESS:function(n,t,i,r){if(this["ON_"+n.keyEventHandlerName]&&this["ON_"+n.keyEventHandlerName](n,t,i,r)===!1)return!1},_ON_KEYPRESS_SERVICE:function(n,t,i,r){if(this["_ON_"+n.keyEventHandlerName+"_SERVICE"]&&this["_ON_"+n.keyEventHandlerName+"_SERVICE"](n,t,i,r)===!1)return!1},_ON_BEFORE_DBLCLICK:function(){return!0},_ON_DBLCLICK:function(n,t,i,r){return this._onBeforeEventExecute(n,t,i,r)===!1?!1:this.ON_DBLCLICK(n,t,i,r)===!1?!1:void 0},ON_DBLCLICK:function(){},_ON_BEFORE_PASTE:function(){return!0},_ON_PASTE:function(n,t,i,r){return this._onBeforeEventExecute(n,t,i,r)===!1?!1:this.ON_PASTE(n,t,i,r)===!1?!1:void 0},ON_PASTE:function(){},_ON_KEYDOWN_BACKSPACE:function(n,t,i,r){if(n.ecService){var u=n.ecService.toLowerCase(),e=("get_"+u.replace(/\./g,"_")+"_option").ecCamelize(!0),f,o=ecount.layer.constValue;switch(u){case o.AUTOCOMPLETE:f=ec$.safeCall(this,e,n,t,i,r);ecount.layer.update(f)}}if(this.ON_KEYDOWN_BACKSPACE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_BACKSPACE:function(){},_ON_KEYDOWN_BACKSPACE_SERVICE:function(){if(this.ON_KEYDOWN_BACKSPACE_SERVICE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_BACKSPACE_SERVICE:function(){},_ON_KEYDOWN_DELETE:function(){if(this.ON_KEYDOWN_DELETE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_DELETE:function(){},_ON_KEYDOWN_TAB:function(){if(this.ON_KEYDOWN_TAB.apply(this,arguments)===!1)return!1},ON_KEYDOWN_TAB:function(){},_ON_KEYDOWN_SPACE:function(){if(this.ON_KEYDOWN_SPACE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_SPACE:function(){},_ON_KEYDOWN_UTILITY:function(){if(this.ON_KEYDOWN_UTILITY.apply(this,arguments)===!1)return!1},ON_KEYDOWN_UTILITY:function(){},_ON_KEYDOWN_ESC:function(){if(this.ON_KEYDOWN_ESC.apply(this,arguments)===!1)return!1},ON_KEYDOWN_ESC:function(){},_ON_KEYDOWN_ARROW_UP:function(){if(this.ON_KEYDOWN_ARROW_UP.apply(this,arguments)===!1)return!1},ON_KEYDOWN_ARROW_UP:function(){},_ON_KEYDOWN_ARROW_DOWN:function(){if(this.ON_KEYDOWN_ARROW_DOWN.apply(this,arguments)===!1)return!1},ON_KEYDOWN_ARROW_DOWN:function(n,t){if(n.ecLazyService){var i=ecount.layer.getLayer(this.getLazyLayerServiceKey(n,t));if(i&&i.isShow()&&(i.setFirstFocus(),t.preventDefault(),this.gridID&&!i.isEmtpyGroup()))return!1}},_ON_KEYDOWN_ARROW_RIGHT:function(){if(this.ON_KEYDOWN_ARROW_RIGHT.apply(this,arguments)===!1)return!1},ON_KEYDOWN_ARROW_RIGHT:function(){},_ON_KEYDOWN_ARROW_LEFT:function(){if(this.ON_KEYDOWN_ARROW_LEFT.apply(this,arguments)===!1)return!1},ON_KEYDOWN_ARROW_LEFT:function(){},_ON_KEYDOWN_ARROW_RIGHT_SERVICE:function(){if(this.ON_KEYDOWN_ARROW_RIGHT_SERVICE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_ARROW_RIGHT_SERVICE:function(){},_ON_KEYDOWN_ARROW_LEFT_SERVICE:function(){if(this.ON_KEYDOWN_ARROW_LEFT_SERVICE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_ARROW_LEFT_SERVICE:function(){},_ON_KEYDOWN_ENTER:function(){if(this.ON_KEYDOWN_ENTER.apply(this,arguments)===!1)return!1;this.hasFnDynamicView()&&this.hideLayerByEcServiceSuffix("fn")},ON_KEYDOWN_ENTER:function(){},_ON_KEYDOWN_F1:function(){if(this.ON_KEYDOWN_F1.apply(this,arguments)===!1)return!1},ON_KEYDOWN_F1:function(){},_ON_KEYDOWN_F2:function(){if(this.ON_KEYDOWN_F2.apply(this,arguments)===!1)return!1},ON_KEYDOWN_F2:function(){},_ON_KEYDOWN_F3:function(){if(this.ON_KEYDOWN_F3.apply(this,arguments)===!1)return!1},ON_KEYDOWN_F3:function(){},_ON_KEYDOWN_F4:function(){if(this.ON_KEYDOWN_F4.apply(this,arguments)===!1)return!1},ON_KEYDOWN_F4:function(){},_ON_KEYDOWN_F5:function(){if(this.ON_KEYDOWN_F5.apply(this,arguments)===!1)return!1},ON_KEYDOWN_F5:function(){},_ON_KEYDOWN_F6:function(){if(this.ON_KEYDOWN_F6.apply(this,arguments)===!1)return!1},ON_KEYDOWN_F6:function(){},_ON_KEYDOWN_F7:function(){if(this.ON_KEYDOWN_F7.apply(this,arguments)===!1)return!1},ON_KEYDOWN_F7:function(){},_ON_KEYDOWN_F8:function(){if(this.ON_KEYDOWN_F8.apply(this,arguments)===!1)return!1},ON_KEYDOWN_F8:function(){},_ON_KEYDOWN_F9:function(){if(this.ON_KEYDOWN_F9.apply(this,arguments)===!1)return!1},ON_KEYDOWN_F9:function(){},_ON_KEYDOWN_F10:function(){if(this.ON_KEYDOWN_F10.apply(this,arguments)===!1)return!1},ON_KEYDOWN_F10:function(){},_ON_KEYDOWN_F11:function(){if(this.ON_KEYDOWN_F11.apply(this,arguments)===!1)return!1},ON_KEYDOWN_F11:function(){},_ON_KEYDOWN_F12:function(){if(this.ON_KEYDOWN_F12.apply(this,arguments)===!1)return!1},ON_KEYDOWN_F12:function(){},_ON_KEYDOWN_OTHERS:function(){if(this.ON_KEYDOWN_OTHERS.apply(this,arguments)===!1)return!1},ON_KEYDOWN_OTHERS:function(){},_ON_KEYPRESS_OTHERS:function(){if(this.ON_KEYPRESS_OTHERS.apply(this,arguments)===!1)return!1},ON_KEYPRESS_OTHERS:function(){},_ON_KEYUP_SPACE:function(){if(this.ON_KEYUP_SPACE.apply(this,arguments)===!1)return!1},ON_KEYUP_SPACE:function(){},_ON_KEYUP_BACKSPACE:function(n,t,i,r){return this._onValueDeleteShowRecommendLayer(n,t,i,r),this.ON_KEYUP_BACKSPACE.apply(this,arguments)===!1?!1:void 0},ON_KEYUP_BACKSPACE:function(){},_ON_KEYUP_DELETE:function(n,t,i,r){return this._onValueDeleteShowRecommendLayer(n,t,i,r),this.ON_KEYUP_DELETE.apply(this,arguments)===!1?!1:void 0},ON_KEYUP_DELETE:function(){},_ON_KEYUP_OTHERS:function(){if(this.ON_KEYUP_OTHERS.apply(this,arguments)===!1)return!1},ON_KEYUP_OTHERS:function(){},_ON_CHANGE_SERVICE:function(n,t,i){return i&&this.getFnItem(i.id)&&this._setValueOnServiceControl(i),this.ON_CHANGE_SERVICE.apply(this,arguments)===!1?!1:void 0},ON_CHANGE_SERVICE:function(){return!0},_ON_CLICK_SERVICE:function(n,t,i,r){var u=r.originItem,f;return this.useFnActivedItem()&&(r.oldFnActivedId=this.getFnActivedId(),this.setFnActivedId(u?u.id:r.originId)),r.type==ecount.layer.constValue.RECOMMENDDROPDOWN?r.btnType=="Reload"&&(f=ecount.global.getEcServiceInstance(n.serviceKey,ecount.layer.serviceType),ecount.layer.removeLayer(f.serviceKey),this._lazyLoadDropdown(n,t,i,r)):this.gridDataKey&&this.controlEvent&&this.controlEvent.itemClick&&(r.value=this.getValue(),this.controlEvent.itemClick(this.gridDataKey,n,t,i,r)),this._useTableRowIndex&&(r.rowIndex=this.rowIdxTable,r.useTableRowIndex=!0),this.hasFnDynamicView()&&!this.hasReadOnlyState(n.cindex)&&r.hasFn&&this.displayFnDynamicView(!1),this.isInlineMode()&&!$.isNull(r.inlineMode)&&this.setActiveInlineMode(r.inlineMode),r.type=="caretdropdown"&&this._onClickCaretDropdownList(r),!this.isCombinedControl()&&u&&u.isSimpleSearch&&(_.extend(r,{shortcutName:u.ecRole,cid:u.cid,event:t,isNotSearch:!0},this.getSimpleSearchParam(u)),u.PopupCd&&(this.isGroupware?!$.isEmpty(u.PRG_ID):u.PRG_ID)&&(r.PopupCd=u.PopupCd,r.PRG_ID=u.PRG_ID,r.MENU_SEQ=u.MENU_SEQ)),n.ecFunctionId==="_nationalFn"&&this.openPopupNationalFlag(),this.ON_CLICK_SERVICE.apply(this,arguments)===!1?!1:void 0},openPopupNationalFlag:function(){this.getNationalFlag()&&!this.isCombinedControl()&&(!this.isReadOnly()||this.getState("nationalFlag","isFnUseOnReadOnly"))&&this.getState("nationalFlag","isClickPopup")&&this.openPopup({targetID:this.id,control:this},{url:"/ECERP/SVC/eck/eck001p_05",width:500,height:600,popupType:!1,isdisplayDialCd:!0})},ON_CLICK_SERVICE:function(n,t,i,r){this.setValueFromLayer(n,t,i,r)},_ON_MOUSEOVER_SERVICE:function(){if(this.ON_MOUSEOVER_SERVICE.apply(this,arguments)===!1)return!1},ON_MOUSEOVER_SERVICE:function(){return!0},_ON_MOUSEDOWN_SERVICE:function(){if(this.ON_MOUSEDOWN_SERVICE.apply(this,arguments)===!1)return!1},ON_MOUSEDOWN_SERVICE:function(){return!0},_ON_BEFORE_MOUSEOUT_SERVICE:function(n){return this.hasReadOnlyState(n.cindex)?!1:!0},_ON_MOUSEOUT_SERVICE:function(n,t,i,r){if(this._onBeforeServiceEventExecute(n,t,i,r)===!1)return!1;var u=ecount.global.getEcServiceInstance(n.serviceKey,ecount.layer.serviceType);return!this.hasFnDynamicView()||$.isNull(u.isOnClicked)||u.isOnClicked()||this.hasFocus()||n.eventTriggerFromInternalTarget||this.displayFnDynamicView(!1),this.ON_MOUSEOUT_SERVICE.apply(this,arguments)===!1?!1:void 0},ON_MOUSEOUT_SERVICE:function(){return!0},_ON_FOCUSIN_SERVICE:function(){if(this.ON_FOCUSIN_SERVICE.apply(this,arguments)===!1)return!1},ON_FOCUSIN_SERVICE:function(){return!0},_ON_FOCUSOUT_SERVICE:function(){if(this.ON_FOCUSOUT_SERVICE.apply(this,arguments)===!1)return!1},ON_FOCUSOUT_SERVICE:function(){return!0},_ON_INPUT_SERVICE:function(){if(this.ON_INPUT_SERVICE.apply(this,arguments)===!1)return!1},ON_INPUT_SERVICE:function(){return!0},_ON_KEYDOWN_ESC_SERVICE:function(){if(this.ON_KEYDOWN_ESC_SERVICE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_ESC_SERVICE:function(){return!0},_ON_KEYDOWN_ARROW_UP_SERVICE:function(){if(this.ON_KEYDOWN_ARROW_UP_SERVICE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_ARROW_UP_SERVICE:function(){return!0},_ON_KEYDOWN_ARROW_DOWN_SERVICE:function(){if(this.ON_KEYDOWN_ARROW_DOWN_SERVICE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_ARROW_DOWN_SERVICE:function(){return!0},_ON_KEYDOWN_ENTER_SERVICE:function(){if(this.ON_KEYDOWN_ENTER_SERVICE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_ENTER_SERVICE:function(n,t,i,r){this.setValueFromLayer(n,t,i,r)},_ON_KEYDOWN_TAB_SERVICE:function(){if(this.ON_KEYDOWN_TAB_SERVICE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_TAB_SERVICE:function(){return!0},_ON_KEYDOWN_UTILITY_SERVICE:function(){if(this.ON_KEYDOWN_UTILITY_SERVICE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_UTILITY_SERVICE:function(){return!0},_ON_KEYDOWN_OTHERS_SERVICE:function(){if(this.ON_KEYDOWN_OTHERS_SERVICE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_OTHERS_SERVICE:function(){return!0},_ON_KEYDOWN_F7_SERVICE:function(){if(this.ON_KEYDOWN_F7_SERVICE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_F7_SERVICE:function(){return!0},_ON_KEYDOWN_F8_SERVICE:function(){if(this.ON_KEYDOWN_F8_SERVICE.apply(this,arguments)===!1)return!1},ON_KEYDOWN_F8_SERVICE:function(){return!0},_ON_KEYPRESS_OTHERS_SERVICE:function(){if(this.ON_KEYPRESS_OTHERS_SERVICE.apply(this,arguments)===!1)return!1},ON_KEYPRESS_OTHERS_SERVICE:function(){return!0},triggerUserHandler:function(n,t){this.__handler&&this.__handler[n]&&this.__handler[n](t,this)},empty:function(n){return $.isEmpty(n)?!1:n},_makeCommandString:function(n){var t;return $.isNull(this._useTableRowIndex)?t=_.isNil(this._makeCommand)?n||this.id:this._makeCommand:(t=this.id.substring(0,this.id.lastIndexOf("_")),$.isNull(this._makeCommand)||(t=this._makeCommand)),"on"+[this.containerName,t].select(function(n){return n.charAt(0).toUpperCase()+n.slice(1)}).join("")},setFnbuttonDisableChange:function(n){var t=this.getFunction("fn");$.isNull(n)&&(n=!1);t&&this.setState("fn","attr.disabled",n!==!1)},getIsFnbuttonDisable:function(){var n=this.getFunction("fn");return n?this.getState("fn","attr.disabled"):!1},getToggledByToolbar:function(){return this.getState(this._IT_SELF,"opt.toggledByToolbar")},setToggledByToolbar:function(n){this.setState(this._IT_SELF,"opt.toggledByToolbar",n===!1?!1:!0)},isToggleFnLayer:function(){return!this.doPreventAction()&&this._allowToggleLayer&&this.isVisible()&&!this.getIsFnbuttonDisable()},showDropdownLayer:function(){},hideDropdownLayer:function(){},hideFnDropdownItemById:function(){},showFnDropdownItemById:function(){},isSelectType:function(){},setMaxLength:function(n,t){arguments.length===1&&(t=0);$.isEmpty(n)||this.setState(t,"attr.maxlength",n)},getCookies:function(n,t){var i=$.cookie(n);return $.isEmpty(i)?!1:t?n:i.split("&")[0]},displayFnDynamicView:function(n){var n=n===undefined?!0:n;this.setState("fn","style.display",n)},hideLayerByEcServiceSuffix:function(n){var t=ecount.common.makeServiceKey(this.getEcPath(),n);ecount.layer.setOnClicked(t,!1);ecount.layer.hide(t)},hasFnDynamicView:function(){return this.fnDynamicView&&this.hasFn?!0:!1},setFnDynamicView:function(n){this.fnDynamicView=n!=!1},getSimpleSearchParam:function(n){var t={transferType:"SimpleSearch",command:"onExecuteSimpleSearch",defaultDateTab:this.defaultDateTab,searchName:this.searchDateName||"",name:this.name,__self:this},i=n.fromDate||n.FROM_DATE||"",r=n.toDate||n.TO_DATE||"";return i&&i.length==8&&(t.fromDate=ecount.control.date.strToDate(i)),r&&r.length==8&&(t.toDate=ecount.control.date.strToDate(r)),t},getSimpleSearchList:function(n){var w=ecount.control.getInitData("widget.button.simpleSearch",!1,this.ecPageID),t=w.config,s=ecount.resource,h=n||this.fnOptions,b=h.useSimpleSearchEndDate,k=h.useSimpleSearchSettingButton,d=h.useDefaultSimpleSearchActive,u=[],r={},f,i,l,a,v,y,o,e,p,c;if(this.simpleSearchConfig&&(t=this.simpleSearchConfig),(n||{}).searchList)p=ecount.constValue.simpleSearchList,s=ecount.resource,n.searchList.forEach(function(n){r={ecRole:n,id:n,label:s[p[n]]};u.push(r)});else if(t&&t.CofmDateShortCutMenuMappingButtons&&t.Is_ScMode){if(l=t.PopupCd,a=t.PRG_ID,v=t.MENU_SEQ,y=k!=!1&&t.IsSettingButton,f=t.CofmDateShortCutMenuMappingButtons,!_.isArray(f)||f.length==0)return u;for(o=0;o<f.length;o++)i=f[o],e=i.U_SHORTCUT_NM||i.SHORTCUT_NM,b!=!0&&["endDay","endMonth"].contains(e)||(r={cid:this.id,id:e,ecRole:e,value:e,label:i.USER_TITLE,fromDate:i.FROM_DATE,toDate:i.TO_DATE,active:d!=!1&&i.IS_DEFAULT,isSimpleSearch:!0},u.push(r));y&&(c="settingButton",r={ecRole:c,id:c,label:s.LBL01593,PopupCd:l,PRG_ID:a,MENU_SEQ:v,isSimpleSearch:!0},u.push(r))}return u}});ecount.control.cachedDummyControl={};ecount.control.getInitData=function(n,t,i){var r,u,f,e;try{f=ecount.global.findViewBag(i);f&&(u=f.WidgetDatas);u&&(r=_.extend({},u[n]),r&&r.result&&(e=Object.clone(r.result,!0),delete r.result,r.result={Data:e}))}catch(o){console.log(o)}return r};ecount.control.initializeByUserSetting=function(n,t){var i=widget.generator.control(),r;i.define(t.controlType,t.id,t.name,t.subTitle,t.groupId,t.option);t.formset&&i.setOptions({formset:t.formset});t.searchItemCode&&i.setOptions({searchItemCode:t.searchItemCode});t.pcid?n(t.id,i,t.pcid):n(t.id,i);i.getOptions("_originId")&&_.isEmpty(i.getOptions("data"))&&_.isArray(t.data)&&t.data.length>0&&i.setOptions({data:t.data});i=i.end();for(r in i)if(i[r]!==undefined){if(r==="data"&&i[r]&&i[r].length===0)continue;t[r]=r==="data"?i[r]&&i[r].where(function(n){return $.isEmpty(n.isFnData)||n.isFnData==!1}):i[r]}};ecount.control.registerLazyRenderGrid=function(n,t){n._super?ecount.global.executeCallbak(n.ecPageID,ecount.widget.LAZY_RENDER_CONTROL_GRID,function(){n._lazyRender&&(n._lazyRender.call(n),n._lazyRender=null);t.call(n)}):n._lazyRender&&(n._lazyRender.call(n),n._lazyRender=null)};ecount.control.registerLazyRender=function(n,t){n._super?ecount.global.executeCallbak(n.ecPageID,ecount.widget.LAZY_RENDER_CONTROL,function(){n._lazyRender&&(n._lazyRender.call(n),n._lazyRender=null);t.call(n)}):n._lazyRender&&(n._lazyRender.call(n),n._lazyRender=null)};ecount.control.lazyLoad=function(n){var f=ecount.common.isExistNamespace(n),u,o;if(f==!1||f._export){var t=n.split("."),e=t.slice(0),i=ecount.common.createNamespace(t.shift()+"."+t.shift()),r=ecount.common.createNamespace(e.shift()+".view."+e.shift());i._export&&(i.repository=_.extend({},i._export()),i._export=null);r&&r._export&&(r.repository=_.extend({},r._export()),r._export=null);t.length>1&&!i[t.join(".")]?(u=t.slice(0),o=u.pop(),i.repository.create(u.join(".")),i.repository.create(ecount.common.createNamespace(n.split(".").slice(0,3).join(".")),o,t.join("."))):i.repository.create(t.join(".")==""?null:t.join("."))}};ecount.control.mountWidget=function(n,t,i,r){var u=n.prototype.ecPackage.split("."),e=u[0]=="widget"&&u.length==2?[u.shift(),"view",u.join(".")].join("."):[u.shift(),u.shift(),"view",u.join(".")].join("."),f=ecount.common.createNamespace(e);r.init||(r.init=function(){n.prototype.init.apply(this,arguments)});r.createView||(r.createView=function(){if(!this.viewName)return n.prototype.createView.apply(this,arguments);var i=this.viewName.split("."),u=i.pop(),r=i.join("."),t=ecount.common.createNamespace(i.join(".")).repository[u];return t!="function"&&(t.__inheritParent&&(t.__inheritParent.indexOf(r)>-1?t=ecount.control.getMergedWidgetProperty(t,r):f=ecount.common.createNamespace(t.__inheritParent)),t=$.Class(f,t)),this.ecview=new t});r.render||(r.render=function(){n.prototype.render.apply(this,arguments)});n[t]=$.Class(i,r)};ecount.control.mountMixinWidget=function(n,t,i,r){var e=r[0],u=r[1],o=r[2],f=ecount.common.createNamespace(i).repository,s;o&&(s=t.__inheritParent?ecount.common.createNamespace(t.__inheritParent):n,e[u]=$.Class(s,f[u]),t=f[o]);t.__inheritParent&&(~t.__inheritParent.indexOf(i)?(f.create(t.__inheritParent.split(".").pop()),t=ecount.control.getMergedWidgetProperty(t,i)):n=ecount.common.createNamespace(t.__inheritParent));ecount.control.mountWidget(e,u,n,t)};ecount.control.getMergedWidgetProperty=function(n,t){for(var i=Object.clone(n),e=ecount.common.createNamespace(t).repository,u=[],f,r;i.__inheritParent&&!~u.indexOf(i.__inheritParent)&&~i.__inheritParent.indexOf(t);)f=i.__inheritParent.split("."),r=e[f.pop()],u.push(i.__inheritParent),r&&r.__inheritParent&&(i.__inheritParent=r.__inheritParent),i=_.extend({},r,i);return i};ecount.control.loadRepository=function(n,t,i){for(var u=i.split("."),s=[u.shift(""),"view",u.join(".")],r,e,f,o,h,c,u=i.split(".");u.length>1;)r=(r?r:window)[u.shift()];while(s.length>1)f=(f?f:window)[s.shift()];e=u.shift();o=s.shift();h=$.Class(n,r[e].repository._default);c=$.Class(t,f[o].repository._default);r[e]=$.extend(h,r[e]);r[e]._baseLoaded=!0;f[o]=$.extend(c,f[o])};ecount.control.storeReloadTarget=function(n){var t=ecount.common.isExistNamespace(n);t!==!1&&(ecount.control.storeReloadTarget[n]=!0)};ecount.control.reloadRepository=function(n){var t=ecount.control.storeReloadTarget[n];t&&(ecount.control.lazyLoad(n),delete ecount.control.storeReloadTarget[n])};ecount.control.template={input:'<input type="text" {{attr.inputmode}} class="form-control {{style.css}} {{style.display}}" {{findex}} data-index={{index}} data-cid="{{cid}}" data-ecpath="{{ecPath}}" {{ecService}} {{ecServiceAttr}} {{ecLazyService}} placeholder="{{attr.placeholder}}" {{attr.disabled}} {{attr.readonly}} {{attr.maxlength}} value="{{value}}">',inputFn:'<div class="input-group {{style.display}}">((input))((fn))<\/div>',inputDate:'<input type="text" {{attr.inputmode}} class="form-control {{style.display}}" data-index={{index}} data-role-index="{{index}}" data-cid="{{cid}}" value="{{value}}" style="{{css.style}}" {{attr.disabled}} {{attr.maxlength}}>',inputPassword:'<input type="password" autocomplete="new-password" class="{{style.css}} {{style.display}}" placeholder="{{attr.placeholder}}" data-index={{index}} data-cid="{{cid}}" value="{{value}}" {{attr.maxlength}}  {{attr.readonly}} > ',inputColLabel:"((label))((divider))((input))",textarea:'<textarea rows="{{rows}}" class="form-control {{style.display}}" {{findex}} data-index={{index}} data-cid="{{cid}}" wrap="hard" placeholder="{{attr.placeholder}}" {{attr.readonly}} {{ecServiceAttr}} {{ecLazyService}} style="{{css.style}}">{{value}}<\/textarea>',textareaFn:'<div class="input-group {{style.display}}">((textarea))((fn))<\/div>',selectFn:'<div class="input-group {{style.display}}">((select))((fn))<\/div>',linkFn:'<div class="input-group {{style.display}}">((link))((fn))<\/div>',radio:'<span class="form-radio {{style.css}} {{style.display}}" data-cid="{{cid}}"><input type="radio" value="{{value}}" data-cid="{{cid}}" name="{{attr.name}}" {{findex}} data-index="{{index}}" id="{{attr.labelid}}" {{attr.checked}} {{attr.disabled}}><label  data-role="widget-focus" for="{{attr.labelid}}" data-cid="{{cid}}">{{label}}<\/label><\/span>',"radio-origin":'<input type="radio" value="{{value}}" data-cid="{{cid}}" name="{{name}}" {{findex}} data-index="{{index}}"  {{checked}}>{{label}}',"radio-vertical":'<input type="radio" value="{{value}}" data-cid="{{cid}}" name="{{name}}" {{findex}} data-index="{{index}}"  {{checked}}>{{label}}',"radio-span":'<span class="form-radio form-radio-icon {{style.display}}" data-cid="{{cid}}"><input type="radio" value="{{value}}" data-cid="{{cid}}" name="{{name}}" {{findex}} data-index="{{index}}" id="{{attr.labelid}}" {{attr.checked}} {{attr.readonly}} {{attr.disabled}} ><label data-role="widget-focus" for="{{attr.labelid}}" data-cid="{{cid}}"><span class="{{style.iconcss}}" data-cid="{{cid}}"><\/span><span class="{{style.labelcss}}" data-txtlabel="">{{label}}<\/span><\/label><\/span>',"radio-image":'<button id="{{id}}" class="{{style.css}} {{label}} {{style.active}} {{style.display}}" {{findex}} data-index={{index}} data-cid="{{cid}}"><\/button>',"radio-square":'<div class="checkbox-squared-fill {{style.css}} {{style.display}}" data-cid="{{cid}}"><input type="radio" value="{{value}}" data-cid="{{cid}}" name="{{attr.name}}" {{findex}} data-index="{{index}}" id="{{attr.labelid}}" {{attr.checked}} {{attr.disabled}}><label  data-role="widget-focus" for="{{attr.labelid}}" data-cid="{{cid}}"><\/label><\/div>',"radio-noLabel":'<span class="{{style.css}} {{style.display}} form-radio-text-no" data-cid="{{cid}}"><input type="radio" value="{{value}}" data-cid="{{cid}}" name="{{name}}" {{findex}} data-index="{{index}}" id="{{labelID}}" {{checked}}><label  data-role="widget-focus" for="{{labelID}}" data-cid="{{cid}}"><\/label><\/span>',"radio-labelColor":'<span class="{{style.css}} {{style.display}}" data-cid="{{cid}}" style="color:\'{{color}}\'"><input type="radio" value="{{value}}" data-cid="{{cid}}" name="{{attr.name}}" {{findex}} data-index="{{index}}" id="{{attr.labelid}}" {{attr.checked}} {{attr.readonly}} {{attr.disabled}}><label  data-role="widget-focus" for="{{attr.labelid}}" data-cid="{{cid}}" {{ecService}}>{{label}}<\/label><\/span>',"radio-thumbnail":'<span class="form-radio {{style.display}}" data-cid="{{cid}}"><input type="radio" value="{{value}}" data-cid="{{cid}}" name="{{name}}" {{findex}} data-index="{{index}}" id="{{attr.labelid}}" {{attr.checked}}><label data-role="widget-focus" for="{{attr.labelid}}" data-cid="{{cid}}"><img class="{{style.css}}" src="{{src}}" style="width: {{style.inline}}"><\/label><\/span>',checkbox:'<span class="{{style.css}}" data-cid="{{cid}}"><input type="checkbox" value="{{value}}" data-cid="{{cid}}" data-role="{{ecRole}}"name="{{attr.name}}" {{findex}} data-index="{{index}}" id="{{attr.labelid}}" class="{{style.display}}" {{attr.checked}} {{attr.readonly}} {{attr.disabled}}><label data-role="widget-focus" for="{{attr.labelid}}" data-cid="{{cid}}" class="{{style.display}}">{{label}}<\/label><\/span>',"checkbox-numbered":'<span class="{{style.divcss}} {{style.display}}"><input type="checkbox" value="{{value}}" data-cid="{{cid}}" name="{{name}}" {{findex}} data-index="{{index}}" id="{{attr.labelid}}" {{attr.checked}} {{attr.disabled}}/><div class="checkbox-numbered {{style.checked}} {{style.disabled}}" data-cid="{{cid}}">{{num}}<\/div>{{label}}<\/span>',"checkbox-plain":'<span class="form-checkbox form-checkbox-text-no {{style.display}}"><input class="{{style.checklayercss}}" type="checkbox" value="{{value}}" data-cid="{{cid}}" name="{{name}}" {{findex}} data-index="{{index}}" id="{{labelID}}" {{attr.checked}} {{attr.readonly}} {{attr.disabled}}><label data-role="widget-focus" for="{{labelID}}">{{label}}<\/label><\/span>',"checkbox-origin":'<input type="checkbox" value="{{value}}" data-cid="{{cid}}" name="{{name}}" {{findex}} data-index="{{index}}" id="{{labelID}}" {{checked}}><label  data-role="widget-focus" for="{{labelID}}"><\/label>',"checkbox-link":'<label  data-role="widget-focus" for="{{labelID}}"><a href="{{attr.href}}" {{attr.target}} {{findex}} data-index={{index}} id="{{id}}" data-cid="{{cid}}" class="{{style.css}} {{style.display}}">{{label}}<\/a><\/label>',"checkbox-square":'<div class="checkbox-squared-fill" data-cid="{{cid}}"><input type="checkbox" value="{{value}}" data-cid="{{cid}}" name="{{name}}" {{findex}} data-index="{{index}}" id="{{labelID}}" {{checked}}><label data-role="widget-focus" for="{{labelID}}" data-cid="{{cid}}" for="{{labelID}}"><\/label><\/div>',label:'<span style="{{style}} {{style.bgcolor}} {{style.color}}" data-index="{{index}}" data-value="{{attr.data-value}}" {{ecService}} class="{{style.css}} {{style.display}}">{{label}}<\/span>',"label-div":'<div id="{{id}}" name="{{name}}" class="{{style.css}} {{style.display}}" ><span style="{{style}}" class="{{labelCSS}}" data-index={{index}}>{{label}}<\/span><\/div>',"label-div1":'<div id="{{id}}" name="{{name}}" data-index={{index}}><\/div>',"label-div2":'<div id="{{id}}" name="{{name}}" data-index={{index}}>{{label}}<\/div>',"label-iframe":"{{label}}",link:'<a href="{{attr.href}}" {{attr.target}} {{findex}} data-index={{index}} id="{{id}}" data-cid="{{cid}}" class="{{style.css}} {{style.display}} {{css.disabled}} " style="{{style}} {{style.color}} {{style.bgcolor}}" data-role="{{ecRole}}" data-role-index="{{ecRoleIndex}}" data-toggle=\'{{data-toggle}}\' {{ecService}} {{ecServiceTrigger}} {{ecServiceAttr}}>{{label}}<\/a>',"link-arrow":'<a href="{{attr.href}}" {{attr.target}} {{findex}} data-index={{index}} id="{{id}}" data-cid="{{cid}}" class="{{attr.collapse}} {{style.css}} {{style.display}}" data-role="{{ecRole}}" data-role-index="{{ecRoleIndex}}" data-toggle=\'{{data-toggle}}\' {{ecService}} {{ecServiceAttr}}><span class="collapse-arrow" data-cid="{{cid}}" data-toggle=\'{{data-toggle}}\' data-role=\'dataToggle\'><\/span>{{label}}<\/a>',"link-caret":'<a href="{{attr.href}}" data-index="{{index}}" id="{{id}}" data-cid="{{cid}}" class="{{style.css}} {{style.display}}">{{label}}<span class="fa fa-caret-{{style.direction}}"><\/span><\/a>',"link-icon":'<a href="{{attr.href}}" data-index="{{index}}" id="{{id}}" data-cid="{{cid}}" class="{{style.css}} {{style.display}} {{style.labelcss}}">{{label}}<span data-cid="{{cid}}" data-index="{{index}}" class="{{style.iconcss}} {{style.preventPointer}}"><\/span><\/a>',"link-iconPopover":'<div class="option"><a href="{{attr.href}}" data-index="{{index}}" data-cid="{{cid}}" class="{{style.iconcss}}"><\/a><\/div><a href="{{attr.href}}" data-index="{{index}}" id="{{id}}" data-cid="{{cid}}" class="{{style.css}} {{style.display}} {{style.labelcss}}">{{label}}<\/a>',button:'<button  id="{{id}}" class="{{style.css}} {{style.display}} {{attr.disabled}}" {{findex}} data-index={{index}} data-cid="{{cid}}" data-ecpath="{{ecPath}}" data-role="{{ecRole}}" {{ecService}} {{ecServiceAttr}} {{ecServiceTrigger}} >{{label}}<\/button>',select:'<button {{ecService}} data-index="{{index}}" data-role="{{ecRole}}" data-role-index="{{index}}" data-cid="{{cid}}" class="{{style.css}} {{style.display}} {{attr.disabled}}"><div class="selectbox-label">{{selectedLabel}}<\/div><\/button><input type="text" {{attr.inputmode}} data-service="{{ecService.input}}" data-cid="{{cid}}" data-index="{{index}}" data-role="{{ecRole}}" data-role-index="{{index}}" {{attr.maxlength}} class="hidden form-control select-direct-input" {{attr.disabled}}>',"select-input":'<button {{ecService}} data-index="{{index}}" data-role="{{ecRole}}" data-role-index="{{index}}" data-cid="{{cid}}" class="hidden btn btn-default btn-selectbox {{style.css}} {{style.display}} {{attr.disabled}}"><div class="selectbox-label">{{selectedLabel}}<\/div><\/button><input type="text" {{attr.inputmode}} data-service="{{ecService.input}}" data-cid="{{cid}}" data-index="{{index}}" data-role="{{ecRole}}" data-role-index="{{index}}" {{attr.maxlength}} class="form-control select-direct-input" {{attr.disabled}}>',"select-image":'<button {{ecService}} data-index="{{index}}" {{findex}} data-role="{{ecRole}}" data-role-index="{{index}}" data-cid="{{cid}}" class="btn btn-default btn-selectbox {{style.css}} {{style.display}} {{attr.disabled}}"><div class="selectbox-label">{{selectedLabel}}<\/div><\/button>',code:'<span class="tag label label-primary label-light {{style.display}}" data-label="{{label}}" data-code="{{value}}">{{label}}<span class="tag-remove"><\/span><\/span>',sideLabel:'(<span class="{{style.css}} {{style.display}}" data-cid="{{cid}}"><input type="checkbox" value="{{value}}" data-cid="{{cid}}" name="{{name}}" data-index="{{index}}" id="{{attr.labelid}}" data-role="{{ecRole}}" {{attr.checked}}><label  data-role="widget-focus" for="{{attr.labelid}}" data-cid="{{cid}}">{{label}}<\/label><\/span>)',sideLabelCode:'<span class="control-inline {{style.display}}"><span class="form-checkbox"><span>&nbsp;<\/span><input type="checkbox" {{findex}} data-index="{{index}}" data-role="{{ecRole}}" data-cid="{{cid}}" tabindex="0" id="{{attr.labelid}}" {{attr.checked}} {{attr.readonly}} {{attr.disabled}} /><label data-role="{{ecRole}}" for="{{attr.labelid}}">{{label}}<\/label><\/span><\/span>',fn:'<button type="button" class="btn btn-default btn-fn dropdown-toggle fn {{style.css}} {{style.display}}" data-function="fn" data-service="layer.fn" data-service-attr="layer.fixed" data-cid="{{cid}}"><\/button>',dateFn:'<button type="button" class="btn btn-sm btn-default btn-fn dropdown-toggle fn {{style.css}} {{style.display}}"  data-service="layer.fn" data-service-attr="layer.fixed" data-cid="{{cid}}"><\/button>',colxs:'<div class="col-xs-{{column}}"><\/div>',colms:'<div class="col-sm-{{column}}"><\/div>',category:'<div class="col-xs-{{column}} {{style.display}}"><div class="panel panel-default"><div class="list-group" CATEGORY_DEPTH={{depth}}><\/div><\/div><\/div>',codeDropdown:'<div class="control-inline {{style.display}}"><div class="btn-group link-group"><a href="javascript:;" {{ecService}}><\/a><\/div><\/div>',codeSearchInput:'<input type="text" {{attr.inputmode}} class="{{style.css}} {{style.display}}" data-cid="{{cid}}" data-index={{index}} {{ecService}} {{ecServiceAttr}} {{ecLazyService}} placeholder="{{attr.placeholder}}" {{attr.readonly}} {{attr.disabled}} value="{{value}}" />',codeCaretDropdown:'<button class="btn btn-default dropdown-toggle btn-arrow btn-vertical-top {{style.display}}" data-service="{{ecService}}" data-service-attr="layer.fixed"><\/button>',codeInput:'<input type="text" {{attr.inputmode}} class="{{style.css}} {{style.display}}" data-index={{index}} data-cid="{{cid}}" {{ecService}} {{ecServiceAttr}} {{ecLazyService}}  placeholder="{{attr.placeholder}}" {{attr.readonly}} {{attr.disabled}} value="{{value}}"/>',codeHidden:'<input type="hidden"  data-index={{index}} data-cid="{{cid}}" value="{{value}}"  />',codeSearchButton:'<button class="btn btn-default btn-code-search {{style.display}}" data-function="{{ecFunction}}" data-function-id="{{ecFunctionId}}" data-cid="{{cid}}"><\/button>',divider:'<span class="inline-divider"><\/span>',singleControl1:"((codeInput))[[openpopup]]((codeInput))[[fn]]",singleControl2:"((codeInput))((codeInput))[[fn]]",singleControl3:"((codeInput))((codeHidden))[[fn]]",singleControl4:"((codeInput))((codeHidden))[[openpopup]][[fn]]","singleControl4-sm":"[[openpopup]]((codeInput))((codeHidden))[[fn]]",singleControl5:"[[openpopup]]((codeInput))((codeHidden))[[removeall]][[fn]]",singleControl6:"((codeInput))[[openpopup]]((codeInput))[[fn]]",singleControl7:"[[openpopup]]((codeInput))((codeHidden))",singleControl11:"((codeInput))((codeHidden))[[openpopup]][[fn]]","layer-select":'<ul data-service="layer.selectbox" data-servicekey= "{{serviceKey}}" data-notclear="mousedown" class="dropdown-menu {{style.css}} dropdown-menu-selectbox" style="{{style}}" data-index="{{index}}" data-ownerkey={{ownerKey}}>{{listItemHtml}}<\/ul>',"layer-select-editNewMode":'<div data-service="layer.selectbox" data-servicekey= "{{serviceKey}}" data-notclear="mousedown" class="dropdown-menu {{style.css}} position-fixed" style="{{style}}" data-index="{{index}}" data-ownerkey={{ownerKey}}>{{headerTemplate}}<ul class="dropdown-menu-item {{hiddenItem}}">{{listItemHtml}}<\/ul>{{footerTemplate}}<\/div>',"layer-datepicker":'<div data-service="layer.datepicker" data-service-attr="layer.focusable" data-servicekey= "{{serviceKey}}" class="hidden" data-ownerkey={{ownerKey}} data-notclear="mousedown"><\/div>',"layer-spectrum":'<div data-service="layer.spectrum" data-servicekey= "{{serviceKey}}" data-ownerkey="{{ownerKey}}"><\/div>',"layer-autocomplete":'<ui data-service="layer.autocomplete" data-servicekey= "{{serviceKey}}" data-ownerkey="{{ownerKey}}" style="{{style}}" tabindex="0" class="ui-autocomplete ui-front ui-menu ui-widget ui-widget-content ui-corner-all dropdown-menu">{{listItemHtml}}<\/ui>',listedItem:'<li><a href="{{attr.href}}" data-cid="{{cid}}" data-index="{{index}}" class="{{style.css}}">{{label}}<\/a><\/li>',sidelink:'<span class="inline-divider {{style.display}}" data-for="{{ecRole}}"><\/span>&nbsp;<a href="{{attr.href}}" data-cid="{{cid}}" data-index="{{index}}" data-role="{{ecRole}}" class="{{style.display}}"><span data-cid="{{cid}}"  class="{{style.css}}" data-role="{{ecRole}}">{{label}}<\/span><\/a>',itemList:"((select))((link))((link))",image:'<img id="{{id}}" src="{{src}}">',nationalFlag:'<img class="{{style.css}} {{style.display}}" data-function="{{function}}" src="{{nationalFlagBaseUrl}}{{nationalCode}}.png">',addonPopover:'<span class="{{style.css}}" data-function="{{function}}"><\/span>',litem:'<li {{findex}} data-index="{{index}}" data-cid="{{cid}}" class="{{isactive}}" data-menuid="{{id}}"><span  class="customer-support-icon {{style.css}}"><\/span>{{title}}<\/li>',litem2:'<li {{findex}} data-index="{{index}}" data-cid="{{cid}}" class="{{isactive}}" data-menuid="{{id}}"><a href="#">{{title}}<\/a><\/li>',scorebox:'<div class="{{style.css}}" data-index={{index}}><div class="score-box-heading" data-index={{index}}>{{value}}<\/div><div class="score-box-body" data-index={{index}}>{{label}}<\/div><\/div>',flowSlide:'<div class="label-group label-group-hover {{style.css}} {{style.noEllipsis}} {{style.display}}"><span id="{{id}}" data-index="{{index}}" data-cid="{{cid}}" {{ecService}} {{ecServiceAttr}} {{color}} class="label {{style.buttonType}}">{{label}}<\/span><\/div>',gridView:'<div class="wrapper-toolbar"><span class="label label-default label-light">((this.title))<\/span><span>((this.label))<\/span><\/div>',pagination:"",jstree:""};ecount.class("ecount.control.view",null,{_IT_SELF:ecount.constValue.CONTROL_UPDATE_IT_SELF,_ALL_COMP:ecount.constValue.CONTROL_UPDATE_ALL_COMPONENT,$el:null,_$parent:null,ecPageID:null,baseTemplateType:null,popoverMessage:null,popoverDirectShow:null,popoverPlacement:null,popoverTrigger:null,popoverTitle:null,popoverTemplate:null,popoverUnusedbodyclickhandler:null,useWrapperSet:!0,wrapperSet:'<div class="control-set {{style.multiline}} {{style.display}} {{wrapperSetCss}} {{isWholeRow}}" {{style.inline}}>{{selector}}',wrapperTemplate:'<div class="{{style.wrapper}} {{noneFlex}} {{style.display}}" data-ecpath="{{ecPath}}" {{style.inline}}>\n{{selector}}\n((this.template))\n<\/div>',fnTemplate:"((fn))",addonTitleTemplate:'<div>\n<span {{opt.addontitleOption}} class="label label-default label-light {{style.addoncss}}" addon-cid="addon-{{cid}}">{{opt.addontitle}}<\/span>\n<\/div>',sublabelTemplate:'<span data-function="sublabel">{{label}}<\/span>',exceptedTemplate:'<span class="{{style.css}} {{style.display}}" data-function="{{function}}"><\/span>',selectorFunctionTemplate:'<a data-ecpath="{{ecPath}}" data-cid="{{cid}}" data-function="selector" data-service="layer.selector" class="control-selector {{style.display}}" data-service-attr="layer.fixed"><\/a>',gridID:null,pcid:null,ecPageID:null,setGridViewEmpty:null,render:function(n,t){this._$parent=t||this._$parent;this.baseTemplateType=n.baseType||this.baseTemplateType;this.ecPageID=n.ecPageID;this.isLayerPopup=n.isLayerPopup;this.id=n.id;this.initializeViewOptions(n);this.beforeMount(n);this._$parent&&this._$parent.append(this.$el);this._onMount(n)},initializeViewOptions:function(){},setBorderRadius:function(n){var t=this.$el,i;return(n instanceof jQuery?t=n:n instanceof Element&&(t=$(n)),!t)?n:(i=t.hasClass("control")?t.children():t.find("div.control").children(),i.removeClass("first-child").removeClass("last-child"),i.filter("input[type='text'], button, textarea, div.tags-input").filter(":not(.hidden):first").addClass("first-child"),i.filter("input[type='text'], button, textarea, div.tags-input").filter(":not(.hidden):last").addClass("last-child"),t)},getComposedDomString:function(n){var t=this._onInitTemplate(n),i=this.addonTitleTemplate,u=this._onInitWrapperTemplate(n),r;if(t=this._onInitFunctions(t,n),n._addonTitle&&(t=this.parseAddonTitle(t)),n.noneFlex=n.noneFlex?"flex-none":"",!$.isNull(n["opt.addontitle"])){if(n["opt.addontitleOption"]){var f=n["opt.addontitleOption"].ecRole||"click.addontitle",e=n["opt.addontitleOption"].cid||n.cid,o=String.format('data-role="{0}" data-role-index="{1}" data-cid="{2}"',f,0,e);i=i.replace("{{opt.addontitleOption}}",o)}i=ecount.widget.replaceAttr(i,n);i=i.replace("{{style.addoncss}}","");t=i+t}return u=ecount.widget.replaceAttr(u,n),t=u.replace("((this.template))",t.replaceRegexpString()),r=$(this.parseHTML(t,n)),r=this.setBorderRadius(r,!0),r.outerHTML()},beforeMount:function(n){var t=this.getComposedDomString(n);this.ecPageID=n.ecPageID;this.gridID=n.gridID;this.pcid=n.pcid;this.containerZIndex=n.containerZIndex;this.setGridViewEmpty=n.setGridViewEmpty;this.$el=$(t);this.$el[0].ecIKey=n.ecIKey},_onMount:function(n){var t=n.functions;t.addonPopover&&this.createAddonPopover(n);this.onMount(n)},onMount:function(){},update:function(){var t=[].slice.call(arguments),n=t.shift(),r=t.shift(),i=isNaN(+n)&&!~[this._IT_SELF,this._ALL_COMP].indexOf(n)?n.ecCapitalize(!0):"",u=["on_change_",r.replace(/\./g,"_"),i].join("").ecCamelize(!0),f=["on_before_change_",r.replace(/\./g,"_"),i].join("").ecCamelize(!0),e=(i?[]:[n]).concat(t);typeof this[u]=="function"&&(typeof this[f]!="function"||this[f].apply(this,e)!=!1)&&this[u].apply(this,e)},executeTransaction:function(n){var t,i=this.$el&&this.$el.hasClass("hidden");if(n.length){for(this.$el.addClass("hidden");t=n.shift();)this.update.apply(this,t);i||this.$el.removeClass("hidden")}},parseAddonTitle:function(n){return n},hasFocus:function(n){var t=this.getElements(n);return document.activeElement==t.get(0)},setFunctionFocus:function(n){this.getFunctionElement(n).focus()},set$El:function(n,t){this.$el=n;n&&(this.$el[0].ecIKey=t)},destroyView:function(){this.$el.remove();this.$el=null},destroy:function(){},_onInitWrapperTemplate:function(n){var t,i=this.useWrapperSet=n.useWrapperSet!=!1;t=i==!1?ecount.widget.replaceAttr(this.wrapperTemplate,{"style.display":n["style.display"]===!1?"hidden":"","style.inline":n.inlineStyle||"",selector:n.functions.selector?this.selectorFunctionTemplate:""}):[ecount.widget.replaceAttr(this.wrapperSet,{"style.multiline":n.isVertical?"multi-line":"",wrapperSetCss:n.wrapperSetCss?n.wrapperSetCss:"","style.display":n["style.display"]===!1?"hidden":"","style.inline":n.inlineStyle||"",isWholeRow:n.isWholeRow?"whole-row":"",selector:n.functions.selector?this.selectorFunctionTemplate:""}),ecount.widget.replaceAttr(this.wrapperTemplate,{"style.display":"","style.inline":"",selector:""}),"<\/div>"].join("");t=t.replace("{{style.wrapper}}",[n.isVertical?"":"control",n.wrapperCss].join(" "));return this.onInitWrapperTemplate(t,n)},onInitWrapperTemplate:function(n){return n},_onInitTemplate:function(n){var t=this.template;(this.baseTemplateType||n.baseType)&&(t=this.cloneTemplateAsManyState(t,n));return this.onInitTemplate(t,n)},onInitTemplate:function(n){return n},onChangeOptTriggerChange:function(n,t){var i=this.getElements(t);i.trigger("change")},onChangeWrapperIsFlex:function(n,t){var i=this.useWrapperSet===!0?this.$el.find("div.control").eq(0):this.$el.filter("div.control").eq(0);t==!0?i.removeClass("flex-none"):i.addClass("flex-none")},onChangeStyleDisplay:function(n,t){t?this.getElements(n).removeClass("hidden"):this.getElements(n).addClass("hidden");this.setBorderRadius()},onChangeStyleCss:function(n,t){this.getElements(n)[0].className=t},onChangeStyleInline:function(n,t){this.getElements(n).attr("style",t)},onChangeStyleInlineFn:function(n){var t=this.$el.find('[data-function="fn"]');t.attr("style",n)},onChangeStyleWidth:function(n,t){this.getElements(n).width(t)},onChangeLabelSublabel:function(n){var t=this.$el.find('[data-function="sublabel"]');t.html(n)},onChangeOptAddontitle:function(n,t){this.$el.find("span[addon-cid]").text(t)},onBeforeChangeValue:function(n,t){return this.getElements(n).val()===t?!1:!0},onChangeValue:function(n,t){var r=this.getElements(n),i=r.prop("nodeName");i=i?i.toLowerCase():i;i=="input"&&(i=r.prop("type"));ecount.control.view.setValue[i]||(i="_default");ecount.control.view.setValue[i](r,t)},onChangeViewValue:function(){this.onChangeValue.apply(this,arguments)},onChangeAttrReadonly:function(){},onChangeAttrDisabled:function(n,t){var i=this.getElements(n);n!=this._IT_SELF&&i.prop("disabled",t)},onChangeAttrDisabledFn:function(n){var t=this.$el.find('[data-function="fn"]');t&&t.prop("disabled",n)},onChangeCssDisabled:function(n,t){var i=this.getElements(n);i.addClass(t?"form-control-disabled":"").removeClass(t?"":"form-control-disabled")},onChangeAttrChecked:function(n,t){var i=this.getElements(n);i.prop("checked",t)},onChangeAttrMaxlength:function(n,t){this.getElements(n).attr("maxlength",t)},onChangeFocusIndex:function(n,t){var i=this.getElements(n).filter(":visible");i&&(t?i.trigger("mousedown").focus():i.blur())},onChangeAttrPlaceholder:function(n,t){$.isNull(n)&&(n=0);var i=this.getElements(n);i&&i.attr("placeholder",t)},onChangeOptSelectRange:function(n,t){typeof t=="boolean"&&t&&ecview.util.select(this.getElements(n),this.ecPageID)},onChangePopoverType:function(n,t){this.popoverType=t},onChangePopoverDirectShow:function(n,t){this.popoverDirectShow=t},onChangePopoverTrigger:function(n,t){this.popoverTrigger=t},onChangePopoverPlacement:function(n,t){this.popoverPlacement=t},onChangePopoverMessage:function(n,t){this.popoverMessage=t},onChangePopoverTitle:function(n,t){this.popoverTitle=t},onChangePopoverTemplate:function(n,t){this.popoverTemplate=t},onChangePopoverUnusedbodyclickhandler:function(n,t){this.popoverUnusedbodyclickhandler=t},onChangePopoverIsClearOnBodyClick:function(n,t){this.popoverIsClearOnBodyClick=t},onChangePopoverToggle:function(n,t){if(this._isInGridWithoutCombineParent())return null;t==!0?this.setPopover():this.destroyPopover()},onChangeValidateNeedvalidate:function(n,t){if(this._isInGridWithoutCombineParent())return null;var i=this._getErrorContainer();t==!0?this.isVisibleElement(n)&&(i.hasClass("has-error")||(i.addClass("has-error"),i.prepend($("<div class='validation'>")))):(i.removeClass("has-error"),i.find("div.validation").remove())},onChangeNationalCodeNationalFlag:function(n){this.$el.find("img[data-function=nationalFlag]").attr("src",this.nationalFlagBaseUrl+n+".png")},onChangeStyleDisplayNationalFlag:function(n){this.$el.find("img[data-function=nationalFlag]")[n?"removeClass":"addClass"]("hidden");this.setBorderRadius()},onChangeStyleDisplayExcepted:function(n){var t=this.$el.find("[data-function='excepted']");t&&n?t.removeClass("hidden"):t&&!n&&t.addClass("hidden");this.setBorderRadius()},onChangeStyleDisplayFn:function(n){var t=this.$el.find('[data-service="layer.fn"]');t&&n?t.removeClass("hidden"):t&&!n&&t.addClass("hidden");this.setBorderRadius()},onChangeBlurChange:function(n){var t=this.getElements(n);t.one("blur",function(){t.trigger("change")}.bind(this))},onBlur:function(){this.$el.blur()},setPopover:function(n,t){n||(n={});var i=t||this._getPopoverTarget(),r=this.isLayerPopup?$("div[data-ecpageid="+this.ecPageID+"]").closest("div.ui-dialog"):"body",u=(this.popoverMessage||n.popoverMessage||"").cr2br(),e=i.is(":visible")?this.popoverDirectShow:!1,o=this.popoverPlacement||"auto",s=this.popoverTrigger?this.popoverTrigger:"manual",f;n.otherPopoverContainer&&(r=n.otherPopoverContainer);$.isEmpty(u)||(f=_.merge({type:this.popoverType,content:u,placement:o,container:r,html:!0,animation:!1,trigger:s,followMouse:!0,directShow:e,isClearOnBodyClick:this.popoverIsClearOnBodyClick},n||{}),ecount.popover.create(i,f))},createAddonPopover:function(n){var i=n.functions,t=i.addonPopover,r=this.$el.find("span[data-function=addonPopover]");this.popoverMessage=t.content;this.setPopover(t,r)},destroyPopover:function(n){var t=n||this._getPopoverTarget();ecount.popover.destroy(t)},_getPopoverTarget:function(){return this._getErrorContainer()},_getErrorContainer:function(){var n;return n=this.useWrapperSet===!0?"div.control-set":"div.control",this.$el.filter(n).length>0?this.$el.filter(n):this.$el.find(n)},cloneTemplateAsManyState:function(n,t){for(var e=n,f=t.components,i=[],r,u=0,o=f.length;u<o;u++)r=f[u],r.template?i.push(r.template):i.push(e);return i.join("")},_onInitFunctions:function(n,t){for(var u=t.functions,e=Object.getOwnPropertyNames(u),f=0,o=e.length,i,r;f<o;f++)i=e[f],r=this[i+"Template"]||ecount.control.template[i],r&&(r=r.replace(ecount.widget.control.template,function(n,t){return ecount.control.template[t]}),u[i].ecFunction=="nationalFlag"&&(this.nationalFlagBaseUrl=u[i].nationalFlagBaseUrl),u[i]["style.display"]=u[i]["style.display"]===!1?"hidden":"",r=ecount.widget.replaceAttr(r,u[i]),r=this.parseFunction(r,u[i],i),n=n.indexOf("[["+i+"]]")>-1?n.replace("[["+i+"]]",r):u[e[f]].isLeftView?r+n:n+r);return n.replace(/\[\[\w*?\]\]/gi,"")},parseFunction:function(n){return n},parseHTML:function(n,t){var a=t.components,s=ecount.control.template,f=n||this.template,u=f.match(ecount.widget.control.template),o,r,h,i,c,l,e;if(u===null)return ecount.widget.replaceAttr(f,t);for(i=0,c=u.length;i<c;i++)(r=s[u[i].replace(/\(\(|\)\)/g,"")],r!==undefined)&&(r=r.replace(ecount.widget.control.template,function(n,t){return s[t]}),this.pcid&&u[i].toUpperCase().indexOf("FN")>-1&&(r=r.replace(new RegExp("{{cid}}","g"),'{{cid}}" data-pcid="'+t.pcid)),o=a[i],this._parseAttrsValue(o,t,i),h=r,l=ecount.widget.replaceAttr(h,o),e=f.split(u[i]),e.length>1&&(f=[e.shift(),e.join(u[i])].join(l)));return f},_parseAttrsValue:function(n,t,i){n&&(n.index=$.isEmpty(t.__index)?i:t.__index,n.findex=$.isEmpty(t.findex)?"":"data-findex="+t.findex,n["style.display"]=n["style.display"]===!1?"hidden":"",n["attr.disabled"]=n["attr.disabled"]==!0?"disabled":"",n["attr.readonly"]=n["attr.readonly"]==!0?"readonly":"",n["attr.maxlength"]=$.isEmpty(n["attr.maxlength"])?"":"maxlength="+n["attr.maxlength"],n["attr.inputmode"]=$.isEmpty(n["attr.inputmode"])?"":"inputmode="+n["attr.inputmode"],n.ecService=$.isEmpty(n.ecService)?"":"data-service="+n.ecService,n.ecLazyService=$.isEmpty(n.ecLazyService)?"":"data-lazy-service="+n.ecLazyService,n.ecServiceAttr=$.isEmpty(n.ecServiceAttr)?"":"data-service-attr="+n.ecServiceAttr,n.ecServiceTrigger=$.isEmpty(n.ecServiceTrigger)?"":"data-service-trigger="+n.ecServiceTrigger,this.parseAttrsValue(n,t,i))},_isInGridWithoutCombineParent:function(){return this.gridID&&!this.pcid},parseAttrsValue:function(){},getElements:function(n){if(n==this._IT_SELF||$.isNull(n))return this.$el;var t=this.$el.find("[data-index]");return t.length===0?this.$el:$.isNull(n)?t:t.filter("[data-index="+n+"]")},getFunctionElement:function(n){return this.$el.find('[data-function="'+n+'"]')},getGridCellElement:function(){var n;return this.gridID&&(n=this.$el.closest(".edit_container")),n},getGridViewTemplate:function(n){for(var u,t,e,f,o,i=ecount.control.template["gridView"],r=0,s=n.length;r<s;r++)if(u=n[r].title,t=n[r].label,this.setGridViewEmpty&&(_.isEmpty(u)&&(u=this.setGridViewEmpty.titleEmpty?"&nbsp;":""),_.isEmpty(t)&&(t=this.setGridViewEmpty.contentsEmpty?"&nbsp;":"")),i=i.replace("((this.title))",u),$.isArray(t)&&t.length>1){for(e=[],f=0,o=t.length;f<o;f++)e.push(t[f]);i=i.replace("((this.label))",e).split(",").join(", ")}else i=i.replace("((this.label))",t);return i},getBoundaryElement:function(){var t=this.$el.get(0),n=this.getGridCellElement();return n&&n.length&&(t=n.get(0)),t},getOwnElement:function(n,t){if(!t)return $(this.$el.find(n).andSelf(n).get(0));var i=this.$el.attr("data-ecPath")||this.$el.find("[data-ecPath]").attr("data-ecPath");return this.$el.find(n).filter(function(n,t){return $(t).closest("[data-ecPath]").attr("data-ecPath")==i})},getParentContainerBoundary:function(){var n=this._$parent||this.$el.parent();return n?ec$.getZoomedBoundary(n.get(0),{}):this.getDefaultBoundaryObject()},getContainerBoundary:function(){var n=0,t=this.getBoundaryElement();return this.$el.find(".control").length&&(n=parseInt(this.$el.find(".control").css("margin-left"))),this.$el.length?ec$.getZoomedBoundary(t,{left:n}):this.getDefaultBoundaryObject()},getComponentBoundary:function(n){var t=this.$el.find("[data-cid][data-index="+n+"]");return t.length>1&&(t=t.filter(":visible")),t.length?ec$.getZoomedBoundary(t.get(0)):this.getDefaultBoundaryObject()},getFunctionBoundary:function(n,t,i){var r,u;return $.isNull(i)&&!isNaN(+t)&&(i=t,t=undefined),r=['[data-function="'+n+'"]'],$.isNull(t)||r.push('[data-function-id="'+t+'"]'),$.isNull(i)||r.push('[data-function-index="'+i+'"]'),u=this.$el.find(r.join("")),u.length?ec$.getZoomedBoundary(u.get(0)):this.getDefaultBoundaryObject()},getRoleHolderBoundary:function(n,t,i){var r,u;return $.isNull(i)&&!isNaN(+t)&&(i=t,t=undefined),r=['[data-role="'+n+'"]'],$.isNull(t)||r.push('[data-role-id="'+t+'"]'),$.isNull(i)||r.push('[data-role-index="'+i+'"]'),r.push(":visible"),u=this.$el.find(r.join("")),u.length?ec$.getZoomedBoundary(u.get(0)):this.getDefaultBoundaryObject()},getCaretBoundary:function(){var t,n;return t=['[data-service="layer.caretdropdown"]'],n=this.$el.find(t.join("")),n.length?ec$.getZoomedBoundary(n.get(0)):this.getDefaultBoundaryObject()},getDefaultBoundaryObject:function(){return{top:0,left:0,width:0,height:0}},setGridElementInfo:function(n){var t=ec$.parseGridElement(this.$el.get(0));_.merge(n,{gridId:t.gridID,tableId:t.gridTableID,rowId:t.dataKey,columnId:t.columnID,sectionType:t.sectionType})},getGridElementInfo:function(){return ec$.parseGridElement(this.$el.get(0))},isVisibleElement:function(n){var t=this.getElements(n);return t.length>0?ecount.widget.isVisible(t[0]):!1},reflowContainer:function(){},appendSpace:function(){this.$el.after(" ")},destroy:function(){this.$el&&(this.destroyPopover(),this.$el.remove())}});ecount.control.view.formElements=["input","button"];ecount.control.view.setValue={text:function(n,t){$.isNull(t)||(t=t.toString()||"",n.val(t),n.attr("value",t))},textarea:function(n,t){$.isNull(t)||(this._isUseHtmlFormate?n.val(t.toString()||""):n.val(this._notLineAlignment?t.toString()||"":(t.toString()||"").trimHtml()))},_default:function(n,t){$.isNull(t)||n.val(t.toString())}};ecount.menu=function(){function i(i,r){var e=i===n,u=ecount.common.getValidIdentifierString(i),f;return e?(f=0,new Promise(function(n,i){var r=ecount.parentFrame.setInterval(function(){if(t[u]||f>10)if(ecount.parentFrame.clearInterval(r),t[u]){var e=t[u];delete t[u];n(e)}else i("api call already sent")},300)})):(n=i,r.then(function(i){return t[u]=i,n=null,i}).catch(function(t){throw t;}))}function r(t){return i(t,new Promise(function(i,r){ecount.common.api({url:t,ecPageID:this.ecPageID,success:function(n){n.Data?i(n.Data):r(n)},error:r,complete:function(){n=null}})}))}function u(n){return i(n,new Promise(function(t,i){$.ajax({type:"GET",url:n,success:t,error:i})}))}function f(t){return i(t,new Promise(function(i){require(t,function(n,t,r){r?i(r):console.log("menu 예외처리 >> getMenuApiDataRequire result is undefined")},function(){n=null;console.log("menu 예외처리 >> script onload error, requestingUrl set null")})}))}function e(n,t){this.loaded&&this.loaded.menuClose&&this.loaded.menuClose(n,t)}var n,t={};return{otherMyPageSeq:9999,myPageSubMenuSeq:"603",prefixMp:"MP",prefixGw:"GW",myPageType:"6",gwType:"7",scType:"8",noChildMyPageUrl:"/ECERP/ECP/ECP060M?menuName=",getApiData:r,getMenuApiData:u,getMenuApiDataRequire:f,close:e,loaded:null}}();ecount.class("ecount.control.menu","ecount.control",{delimiter:"∮",delegator:null,id:null,title:null,level:null,parentID:null,menuData:null,menuItems:null,isActivated:!1,isClosed:!1,hasShowNewWindowIcon:!1,hasGroupArrow:!1,hasItemParent:!1,menuAPIUrl:null,isMenuControl:!0,mouseoverTimeout:ecount.common.mouseHoverInTime,mouseoutTimeout:ecount.common.mouseHoverOutTime,mouseoverTimer:null,mouseoutTimer:null,initializeOptions:function(n,t){_.extend(this,{delegator:n.delegator||new ecount.events(this),responseID:n.responseID});this.initializeTimeout(n,t);this.menuItems=this._getMenuItems(n,t)},initializeTimeout:function(n,t){this.mouseoverTimeout=this._getMouseoverTimeout(n,t);this.mouseoutTimeout=n.mouseoutTimeout!==undefined?n.mouseoutTimeout:this.mouseoutTimeout},initializeViewOptions:function(n){_.extend(this.__viewOptions,{depth:n.depth})},onInitState:function(){_.extend(this.__state,{ecPath:"",title:this.title,isActivated:!1,isAnchorActivated:!1,isClosed:!1,isShowNewWindowIcon:!1})},render:function(n){this.attachView(n)},onAfterRender:function(){if(this.menuItems){var n=this.ecview.getChildrenContainerDummy();this.menuItems.forEach(function(t){t.render(n)});this.ecview.setChildrenContainerItems(n)}},getWrapperMenuArea:function(){return this.$menuArea||(this.$menuArea=$("#menuArea")),this.$menuArea},getWrapperMenuAreaAddon:function(){return this.$menuAreaAddon||(this.$menuAreaAddon=$("#menuAreaAddon")),this.$menuAreaAddon},getInitComponents:function(n,t,i){return this._getOwnState(n,t,i)},getInitDataComponents:function(n,t,i){return this._getOwnState(n,t,i)},getAPIData:function(){},setHidden:function(){this.ecview.setHidden()},setShow:function(){this.ecview.setShow()},setBodyUrl:function(){this.getComponent(0)},setOwnChildren:function(){},findMenuByEcPath:function(){return this},_getOwnState:function(){return[{ecPageID:this.ecPageID}]},_getComponentIndex:function(){return 0},_getMouseoverTimeout:function(n){return n.mouseoverTimeout!==undefined?n.mouseoverTimeout:this.mouseoverTimeout},_getChildrenByAPI:function(){},_getMenuItems:function(n,t){return{target:n.target||this.target,domId:this._getDomId(t,state,n),label:n.label||this.label,containerId:this._getContainerId(t,state,n)}},_getDomId:function(){return this.id},_getContainerId:function(){return["control","","","",this.id].join(ecount.delimiter)}});ecount.class("ecount.control.view.menu","ecount.control.view",{template:"<li><\/li>",listClassName:"",activeClassName:"",anchorActiveClassName:"",visibleClassName:"",openClassName:"on",closeClassName:"off",showClassName:"show",render:function(n,t){if(this.$el){this.$el.removeClass(this.activeClassName);t.append(this.$el);return}ecount.control.view.prototype.render.apply(this,arguments)},getWrapperMenuArea:function(){return this.$menuArea||(this.$menuArea=$("#menuArea")),this.$menuArea},getWrapperMenuAreaAddon:function(){return this.$menuAreaAddon||(this.$menuAreaAddon=$("#menuAreaAddon")),this.$menuAreaAddon},getChildrenContainerDummy:function(){return $(document.createDocumentFragment())},getChildrenContainer:function(){return this.getOwnElement('[data-role="menu.itemContainer"]')},getChildrenListedItem:function(){return this.getOwnElement('[data-role="menu.listedItem"]')},setChildrenContainerItems:function(n){this.getChildrenContainer().append(n)},setChildrenContainerEmtpy:function(){this.getChildrenContainer().empty()},setChildrenStorage:function(){var t=this.getChildrenContainer(),n=this.getOwnElement('[data-role="menu.itemStorage"]');n.length||(n=t.after($('<div class="hidden" data-role="menu.itemStorage" />')));n.append(t.children())},onInitWrapperTemplate:function(){return"((this.template))"},onChangeIsActivated:function(n,t){var i=this.getChildrenContainer();t?i.addClass(this.activeClassName):i.removeClass(this.activeClassName)},onChangeIsClosed:function(){var n=this.getChildrenContainer();value?n.addClass(this.closeClassName):n.removeClass(this.closeClassName)},onChangeIsShowNewWindowIcon:function(){var n=this.getChildrenContainer();value?n.addClass(this.visibleClassName):n.removeClass(this.visibleClassName)}});ecount.class("ecount.control.select","ecount.control",{ecPackage:"ecount.control.select",moreOptionButton:!1,moreOptionData:null,_isSpace:!1,useManualInput:!1,useDynamicAdd:!1,manualInputItemId:null,selectCompIndex:null,cssMap:null,_keyStack:"",keyStackID:"",_defaultCss:"btn btn-default btn-selectbox ",_spaceSymbolLabel:"===",_spaceSymbolValue:"".padLeft(3,ecount.delimiter),initializeOptions:function(n){_.merge(this,{moreOptionButton:n.moreOptionButton,moreOptionData:n.moreOptionData,useManualInput:n.useManualInput,useDynamicAdd:n.useDynamicAdd,dynamicAddData:n.dynamicAddData,selectCompIndex:0,_isSpace:n._isSpace,spaceId:this.id+"_empty",manualInputItemId:this.id+"_manual",cssMap:n.cssMap||{},isFooterCustomRoleId:n.isFooterCustomRoleId})},onInitComponent:function(n,t,i,r,u){var f,e;if(!u.notUseDefaultCss&&(r.css||this._userCss)){var o=(this._defaultCss+r["style.css"]).split(" "),s={},h=[];for(f=0;f<o.length;f++)e=o[f],s[e]||(s[e]=!0,h.push(e));r["style.css"]=h.join(" ")+" "}},onInitExtractComponent:function(n,t,i){var u,r;i.data&&i.data.length>0&&(u=this.__originData.components,t.components.forEach(function(n,t){r=u[t];n.selectedValue=$.isNull(r.selectedValue)?n.selectedValue:r.selectedValue;n.selectedLabel=$.isNull(r.selectedLabel)?n.selectedLabel:r.selectedLabel}.bind(this)))},getInitDataComponents:function(n,t,i){return i.data.map(function(n){var t=this._getInitialSelectboxOption(n,i),r=this._getInitialSelectedValue(n,t),u,f,e;return $.isNull(n.selectedValue)||typeof n.selectedValue!="object"||(selectedLabel=this._getSelectedLabel(r,t)),(u=t.head(ecount.control.select.optionFindingPredicate.bind(t,r)))?(e=this._getSelectedPrefixCss(u.value,t),f=this._getSelectedOptionSet(u,e)):(f=this._getSelectedOptionSet(t[0],t[0].prefixCss),r=t[0].value),_.extend({},n,f,{option:t,lastSelectedValue:r,"attr.disabled":!!i._readOnly,"ecService.input":"layer.autocomplete","opt.oldvalue":"",isEditFormMode:i.isEditFormMode||!1,isNewFormMode:i.isNewFormMode||!1,newFormTitle:i.isNewFormMode?i.newFormTitle||ecount.resource.LBL11298:"",mode:i.mode||"button"})}.bind(this))},getInitComponents:function(n,t,i){return[$.extend({cid:this.cid,name:this.name,selectedCss:"",lastSelectedValue:"",selectedPrefixCss:"",ecService:"layer.selectbox","ecService.input":"layer.autocomplete","attr.disabled":!!i._readOnly,"opt.oldvalue":"",mode:i.mode||"button"},this._getDefaultOptionState(n,t,i))]},onInitState:function(n,t,i){_.merge(t,{recommendValue:i.recommendValue||{},useRecommendOption:i.useRecommendOption||!1,showLayerInputMode:i.showLayerInputMode||!1})},_getInitialSelectboxOption:function(n,t){var i;return n.option?typeof n.option=="string"?i=this._getOptionsFromString(n.option):(this._isSpace&&n.option&&(n.option[0].length===0&&n.option.pop(),n.option.unshift({id:this.spaceId,value:this._spaceSymbolValue,label:this._spaceSymbolLabel})),this.useManualInput&&n.option&&n.option.push({id:this.manualInputItemId,value:ecount.resource.LBL05716,label:ecount.resource.LBL05716,functionalCss:"noneFocus",useManualInput:this.useManualInput}),i=this._getOptionsFromArray(n.option,t.data.length)):i=this._getContinuosDataByRange(n),this.moreOptionButton&&i.push(this._getViewMoreOption()),i},_getInitialSelectedValue:function(n){if(!$.isNull(n.selectedValue))return typeof n.selectedValue!="object"?_.isNumber(n.selectedValue)?n.selectedValue+"":n.selectedValue:$.isArray(n.selectedValue)?n.selectedValue[0]:n.selectedValue.value},_getSelectedOptionSet:function(n,t){return{cid:this.cid,name:this.name,focusChangeFiredByModeChange:!1,ecRole:"select.selectbox",ecService:"layer.selectbox",ecServiceKey:this.ecPath,selectedValue:_.isNumber(n.value)?n.value+"":n.value,selectedLabel:n.label,selectedCss:n.className,prefixCss:t}},getValue:function(){return this.getState(this.selectCompIndex,"selectedValue")},initializeViewOptions:function(n){_.merge(this.__viewOptions,{isSmall:n._isSmall})},getOldValue:function(n){return this.getState(n||0,"opt.oldvalue")},getSelectedItem:function(){return{value:this.getValue(),label:this.getState(this.selectCompIndex,"selectedLabel")}},getGridSelectedLabel:function(){return this.getState(this.selectCompIndex,"selectedLabel")},getCodeData:function(){var n=this.getComponent(this.selectCompIndex),t=n.option.head(ecount.control.select.optionFindingPredicate.bind(n.option,n.selectedValue));if(t)return t.data},setValue:function(){var t=this.selectCompIndex,n,i=!1;switch(arguments.length){case 1:case 2:n=$.isNull(arguments[0])?"":arguments[0];i=$.isNull(arguments[1])?!1:arguments[1];break;default:t=arguments[0]||0;n=$.isNull(arguments[1])?"":arguments[1];i=$.isNull(arguments[2])?!1:arguments[2]}(_.isArray(n)&&(n=n[0]),this.useManualInput||this.getState(t,"option").any(function(t){return t.value==n}))&&(n==undefined&&(n=""),this._changeSelectedValue(t,n),this.setState(t,"attr.disabled",this.getState(t,"attr.disabled"),!0),this.setState(t,"lastSelectedValue",n),i&&this.executeChangeDelegator({cindex:t,value:n}))},setIsNewFormMode:function(n){this.setState(this.selectCompIndex,"isNewFormMode",n)},setStandardValue:function(){this.setValue.apply(this,arguments)},setSelectedIndex:function(n){var t=this.getComponent(this.selectCompIndex),i=t.option[n];i&&this._changeSelectedValue(t.index,i)},setSelectedValue:function(n){var t=this.getComponent(this.selectCompIndex),i=t.option.head(ecount.control.select.optionFindingPredicate.bind(t.option,n));i&&this._changeSelectedValue(t.index,i||{value:$.isNull(n)?"":n})},setVisibleBorder:function(){},setRecommendValue:function(n){this.resetRecommend();this.setState(this._IT_SELF,"recommendValue",n);this.setState(this._IT_SELF,"useRecommendOption",!0)},resetRecommend:function(){var n=this.getComponent(this.selectCompIndex),t;this.setState(this._IT_SELF,"recommendValue","");this.setState(this._IT_SELF,"useRecommendOption",!1);t=n.option.map(function(n){return n.recommend=!1,n});this.setState(n.index,"option",t)},getLayerServiceKey:function(n){var t,i;return n?(i=n.ecPath,t=n.ecService==ecount.layer.constValue.FN?"fn":n.ecRoleIndex||n.ecFunctionId):(i=this.ecPath,t=this.selectCompIndex),ecount.common.makeServiceKey(i,t)},addOption:function(n,t){var i=this.getState(this.selectCompIndex,"option"),r=this._getOptionsFromArray($.isArray(n)?n:[n],i.length),u=i.length==(this.useManualInput||this.useDynamicAdd?1:0),f=this.getLayerServiceKey();_.isArray(r)&&r.forEach(function(n){var t=_.isUndefined(n.index)||_.isNull(n.index)?this.useManualInput||this.useDynamicAdd?i.length-1:i.length:n.index;i.splice(t,0,n)}.bind(this));ecount.layer.hide(f);u&&this._changeSelectedValue(this.selectCompIndex,r[0]);t&&this.executeChangeDelegator({cindex:this.selectCompIndex,value:this.getState(this.selectCompIndex,"lastSelectedValue")})},addMoreSelectOption:function(){var n=this.getComponent(this.selectCompIndex),t=this._getOptionsFromArray(this.moreOptionData,n.option.length),i=_.findIndex(n.option,function(n){return n.value==this._getMoreOptionValue()}.bind(this)),u=this.getLayerServiceKey(),r;layer=ecount.layer.getLayer(u);firstOptionAdded;n.option.splice(i,1);this.useManualInput||this.useDynamicAdd?(r=n.option.pop(),n.option=n.option.concat(t).concat([r])):n.option=n.option.concat(t);firstOptionAdded=n.option[i];this._changeSelectedValue(n.index,firstOptionAdded);layer.update({option:n.option});this.setFocus(0);this.executeChangeDelegator({cindex:this.selectCompIndex,value:this.getState(this.selectCompIndex,"lastSelectedValue")})},setReadOnly:function(n){this._setStateByType("attr.disabled",n)},removeOption:function(n){var u=this.getLayerServiceKey(),t,r,i;ecount.layer.hide(u);n===undefined?(this.setState(this.selectCompIndex,"option",[]),this._changeSelectedValue(this.selectCompIndex,{label:"",value:""})):(t=this.getComponent(this.selectCompIndex,this.selectCompIndex),r=t.option[n],t.option.splice(n,1),t.selectedValue==r.value&&(i=t.option[n==t.option.length?this.selectCompIndex:n],this._changeSelectedValue(this.selectCompIndex,i?i:{value:""})))},setOption:function(n){var i=this.getLayerServiceKey(),t=this._getOptionsFromArray($.isArray(n)?n:[n]);ecount.layer.hide(i);this.moreOptionButton&&t.push(this._getViewMoreOption());this.setState(this.selectCompIndex,"option",t);this._changeSelectedValue(this.selectCompIndex,t[0])},hideOption:function(n){var t=this.getComponent(this.selectCompIndex),i=t.option.map(function(t,i){return i==n?_.merge(t,{"style.display":!1}):t}),r=i.head(function(n){return n.value==t.selectedValue});i[n].value==t.selectedValue&&i[n].label==t.selectedLabel&&n<i.length-1&&(r=i[n+1]);this.setState(t.index,"option",i);this._changeSelectedValue(t.index,r)},showOption:function(n){var t=this.getComponent(this.selectCompIndex).option.map(function(t,i){return i==n?_.omit(t,["style.display"]):t});this.setState(this.selectCompIndex,"option",t)},changeInputMode:function(n){var t=this.getComponent(n||0);this._changeCompModeBySelectedValue(t,{isModeChange:!0})},getOptionCount:function(){return this.getComponent(this.selectCompIndex).option.length},getSelectOptions:function(){return this.getState(this.selectCompIndex,"option").clone(!0)},getLength:function(){return this.getOptionCount()},getValueByIndex:function(n){return this.getComponent(this.selectCompIndex).option[n].value},isContain:function(n){var t=this.getComponent(this.selectCompIndex);return t.option.length>0&&_.findIndex(t.option,function(t){return t.value==n})>-1},hasChild:function(){return this.getComponent(this.selectCompIndex).option.length>0},getResetState:function(){return this.getOriginState(["option","selectedValue","selectedLabel","selectedPrefixCss"])},extract:function(){return{__state:_.extend({},this.__state,{components:this.__state.components.map(function(n){var t=_.cloneDeep(n);return n.mode&&delete t.mode,t})}),__viewOptions:_.cloneDeep(this.__viewOptions)}},getSyncData:function(){return{data:this.getExtractState(["option","selectedValue","selectedLabel","selectedPrefixCss"])}},save:function(){return{key:this.id,value:{options:this.getState(this.selectCompIndex,"option").clone(!0),selected:this.getValue()}}},restore:function(n){if(typeof n!="object")this.setValue(n);else{var t=n.selected,i=n.options;this.pendingViewUpdate(!0);this.setState(this.selectCompIndex,"option",i);this.setValue(t);this.pendingViewUpdate(!1);this.batchUpdateView()}},serialize:function(n){return ecount.control.prototype.serialize.call(this,{key:n||this.name,value:this.getValue()},n)},serializeById:function(){return this.serialize(this.id)},setValueBySerialized:function(n){this.setSelectedValue(n)},checkValidate:function(n,t){var i=this._getValidateValue(),r=n||[];return this._isSpace&&$.isEmpty("")&&r.contains("required")?ecount.validator.validate(i,r,t):ecount.validator.validate(i,n||[],t||"")},getSelectboxOptions:function(n){var t=this.getComponent(n||this.selectCompIndex);return _.cloneDeep(t.option)},executeChangeDelegator:function(n){n=n||{};_.isNil(n.cindex)||this.setState(n.cindex,"lastSelectedValue",n.value);ecount.control.prototype.executeChangeDelegator.call(this,n);this.pcid&&this.executeParentChangeDelegator&&(_.merge(n,{cid:this.cid}),this.executeParentChangeDelegator(n))},onClickSelectHandler:function(n){return this.ecview&&!this.ecview.hasFocus(n.ecRoleIndex)&&this.setFocus(n.ecRoleIndex),!1},onClickLayerSelectHandler:function(n,t,i,r){var u=this.getComponent(this.selectCompIndex),f;if(!u)return!1;if(this.moreOptionButton&&r.selected&&r.selected.value==this._getMoreOptionValue())return this.addMoreSelectOption();u.mode=="input"&&(f=this._getSelectedOption(n,r),this._changeCompModeBySelectedValue(u,{selected:{isModeChange:f.isModeChange,value:r.selected.value,label:r.selected.label}}),this.setFocus(u.index));this.onChangeSelectedValueHandler(n,t,r)},onChangeSelectedValueByKeyboard:function(n,t,i,r){var u=n.ecRoleIndex||this.selectCompIndex,f=this._getNextSelectedOption(n,t,i,r),e=this.getComponent(u);if(!f)return!1;switch(n.handler){case ECountEvent.Type.KEYDOWN_ARROW_UP_SELECT_LAYER:case ECountEvent.Type.KEYDOWN_ARROW_UP_AUTOCOMPLETE_LAYER:if(this.getState(u,"mode")=="input"&&f.id!==this.manualInputItemId)return this._changeToButtonMode(u),!1;break;case ECountEvent.Type.KEYDOWN_ARROW_DOWN_SELECT_LAYER:if(this.getState(u,"mode")=="input")if(f.id!==this.manualInputItemId)this._changeToButtonMode(u);else return!1;else if(this.getState(u,"mode")=="button"&&f.id===this.manualInputItemId)return this._changeCompModeBySelectedValue(e,f),!1}if(this.getState(u,"mode")!="input")this.onChangeSelectedValueHandler(n,t,{index:n.cindex||n.ecRoleIndex,selected:f,changeValue:!0})},onChangeSelectedValueOnServiceByKeyboard:function(n,t,i,r){var u=n.ecRoleIndex||this.selectCompIndex,e=this.getComponent(u),f=this._getNextSelectedOption(n,t,i,r),s=this._getSelectedOption(n,r),o=e.selectedValue;if(!f)return!1;switch(n.handler){case ECountEvent.Type.KEYDOWN_ARROW_UP_SELECT_LAYER:if(this.getState(u,"mode")=="input"&&f.id!==this.manualInputItemId)return this._changeToButtonMode(u),!1;break;case ECountEvent.Type.KEYDOWN_ARROW_DOWN_SELECT_LAYER:this.getState(u,"mode")=="input"?f.id!==this.manualInputItemId&&this._changeToButtonMode(u):this.getState(u,"mode")=="button"&&f.id===this.manualInputItemId&&this._changeCompModeBySelectedValue(e,f)}this.getState(u,"mode")!="input"&&(this._changeSelectedValue(u,f),this.setState(u,"opt.oldvalue",o))},onChangeAutocompleteOnServiceByKeyboard:function(n){var i=n.ecRoleIndex||this.selectCompIndex,t=this.getComponent(this.selectCompIndex),r=this.getLayerServiceKey(_.extend({},n,{ecService:ecount.layer.constValue.SELECTBOX})),u=ecount.layer.getLayer(r);if(!t)return!1;t.mode=="input"&&u.type==="selectbox"&&(this._changeToButtonMode(i),this._changeSelectboxLayerSelection(n,-1))},_changeSelectboxLayerSelection:function(n,t){var i=this.getLayerServiceKey(_.extend({},n,{ecService:ecount.layer.constValue.SELECTBOX})),r=ecount.layer.getLayer(i);r.setCurrentSelection(t)},onChangeSelectedValueHandler:function(n,t,i){var r=n.ecRoleIndex||this.selectCompIndex,e=this.getComponent(r),u=this._getSelectedOption(n,i),s=this.getState(this._IT_SELF,"showLayerInputMode"),o=this._getDefaultDelegatorInfo(n,t),f;(this.disableStateObserving(),this._changeCompModeBySelectedValue(e,u),this.getState(r,"mode")!="input"||i.changeValue)&&(f=e.selectedValue,this._changeToButtonMode(r),this._onBeforeChangeSelectedValue(n,t,i),this._changeSelectedValue(r,u),this._onAfterChangeSelectedValue(u),this.enableStateObserving(),f!=u.value?(this.setState(r,"lastSelectedValue",u.value),this.notifyToStateObserver(n.cindex,"selectedLabel",this.getState(r,"selectedLabel")),this.executeChangeDelegator({event:t,cindex:r,oldValue:f,value:u.value})):this.delegator&&this.delegator.triggerEvent("control.select",_.merge(o,{type:"control.select",event:t,cindex:r,value:u.value,oldValue:f})),this.validateIf(this.getState(this._IT_SELF,"validate.needvalidate")))},_setInputValue:function(n,t,i,r){this._updateInputValue(n,t,i,r)},_updateInputValue:function(n){var f=this.getComponent(n.ecRoleIndex||n.cindex),r=this.selectCompIndex,i=n.cindex,t=n.value,u=this.getState(r,"option");$.isEmpty(t)||(this.setState(i,"selectedValue",t),this.setState(i,"selectedLabel",this._getSelectedLabel(t,u)),this.setState(i,"value",t))},getLayerAutocompleteOption:function(n){var i=ecount.control.prototype.getLayerAutocompleteOption.apply(this,arguments),r=this.selectCompIndex,t=this.getState(r,"option"),u=_.isArray(t)?t.filter(function(n){return n.useManualInput!==!0}):[];return _.extend(i,{setMinWidth:!0,value:n.value,autoHighlightFirstResult:!0,searchSourceList:u,setupHandler:this.setManualInputAutoCompleteSetting.bind(this,this),responseFilter:this.getManualInputAutocompleteList.bind(this),boundary:this.getRoleHolderBoundary(n.ecRole,n.ecRoleIndex)})},setManualInputAutoCompleteSetting:function(n,t,i,r){r(i)},getManualInputAutocompleteList:function(n,t){return n.filter(function(n){return n.value.indexOf(t)>=0})},_onKeypressOthersHandler:function(n,t){var u=String.fromCharCode(t.which),i=this.getComponent(n.cindex||n.ecRoleIndex),f,r;if(i&&i.format!="d"&&i.mode!="input"){if(r=i.option,!!this.useManualInput&&i.mode=="button"){this.setState(i.index,"focusChangeFiredByModeChange",!0);this.setState(i.index,"mode","input");this.setFocusOnComponent(i.index,!0);return}u!=this._keyStack&&(this._keyStack+=u.toLowerCase());this.keyStackID&&ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.keyStackID);f=ecount.control.select.getCurrentOptionIndex(i);ecount.control.select.autoCompleteHandler(this._keyStack,f,r,function(n){this._changeSelectedValue(i.index,r[n])}.bind(this));this.keyStackID=ecount.global.setTimeout(this.ecPageID,function(){this.keyStackID=null;this._keyStack=""}.bind(this),300)}},_getOptionId:function(n,t){return arguments.length==2?this.id+"_"+(isNaN(+n)?t:t+n):this.id+"_"+(isNaN(+n)?"":n)},getOptionObject:function(n,t,i){var u=_.isNumber(t)?t:0,r=n.toString(),f=r.length>=u?r:new Array(u-r.length+1).join(_.isNil(i)?"":i)+r;return{id:this.id+"_"+n,label:f,value:n}},_getOptionsFromArray:function(n,t){return ecount.control.select.getOptionsFromArray(n,this._getOptionId.bind(this,t),this._getOptionObjFromArray.bind(this))},_getContinuosDataByRange:function(n){return ecount.control.select.getContinuosDataByRange(n,this.getOptionObject.bind(this))},_getOptionsFromString:function(n){return ecount.control.select.getOptionsFromString(this.id,n)},_getOptionObjFromArray:function(n){return{value:""+n[0],label:""+n[1],data:this.cssMap[n[3]]?{}:n[3],className:n.className,prefixCss:this.cssMap[n[3]]||"",activeCss:this.reportType?"checked-item":null,liCss:n[4]||"",isFooterOption:n[5]||"",isFooterCustomRoleId:this.isFooterCustomRoleId||!1,isEditMode:n[6]||""}},_getMoreOptionValue:function(){return"MORE_OPTION"},_getDefaultOptionState:function(){return{selectedValue:"",selectedLabel:"",option:[]}},_getViewMoreOption:function(){return{value:this._getMoreOptionValue(),label:ecount.resource.LBL09004,keepSelectBoxLayer:!0}},_getSelectedLabel:function(n,t){var i=t.head(ecount.control.select.optionFindingPredicate.bind(t,n));return i?i.label:n},_getSelectedCss:function(n,t){var i=t.head(ecount.control.select.optionFindingPredicate.bind(t,n));if(i)return i.className},_getSelectedPrefixCss:function(n,t){var i=t.head(ecount.control.select.optionFindingPredicate.bind(t,n));if(i)return i.prefixCss},_getSelectedLayerData:function(n,t){var i=t.selected,r="",u="",e="",o="",s="",f=!1;return i&&""+i.id&&i.id==this.manualInputItemId?{label:r,value:u,manual:f,isModeChange:!0}:(i?(r=i.label,u=i.value,e=i.className,o=i.prefixCss,f=!1,s=i.isFooterOption):this.getComponent(n.ecRoleIndex).mode=="input"&&(r=n.value,u=n.value,f=!0),{label:r,value:u,className:e,prefixCss:o,isFooterOption:s,manual:f,isModeChange:!1})},_getSelectedOption:function(n,t){var i=this.getComponent(n.ecRoleIndex||this.selectCompIndex),r;return r=t&&t.selected?t.selected:i.option.head(ecount.control.select.optionFindingPredicate.bind(i.option,i.selectedValue)),this._getSelectedLayerData(n,{selected:r})},_getNextSelectedOption:function(n,t,i,r){var s=n.ecRoleIndex||this.selectCompIndex,u=this.getComponent(s),f=_.findIndex(u.option,function(n){return n.value==u.selectedValue}),o=this.getState(this._IT_SELF,"useRecommendOption"),e;if(u){switch(n.handler){case ECountEvent.Type.KEYDOWN_ARROW_UP_SELECT_LAYER:if(r.prevLayerSection==="select"){if(o&&r.nextLayerSection&&r.nextLayerSection==="quickEntry")return u.option.filter(function(n){return n.recommend})[0]}else if(r.prevLayerSection==="quickEntry")return;if(f<=0)return;e=f-1;break;case ECountEvent.Type.KEYDOWN_ARROW_DOWN_SELECT_LAYER:if(r.removeClassHidden)return u.option.filter(function(n){return n.recommend})[0];if(r.prevLayerSection==="quickEntry"&&o&&r.nextLayerSection&&r.nextLayerSection==="select")return u.option[0];if(f+1>=u.option.length)return;e=f+1;break;default:e=f}return u.option[e]}},_onBeforeChangeSelectedValue:function(){},_onAfterChangeSelectedValue:function(){},_changeSelectedValue:function(n,t){var i=this.getState(n,"option"),r;this.pendingViewUpdate(!0);this.setState(n,"opt.oldvalue",this.getState(n,"selectedValue"),!1);typeof t=="object"?(this.setState(n,"selectedValue",""+t.value),this.setState(n,"selectedLabel",$.isNull(t.label)?this._getSelectedLabel(t.value,i):t.label),this.setState(n,"selectedPrefixCss",t.prefixCss||this._getSelectedPrefixCss(t.value,i))):(r=this._getSelectedLabel(t,i),this.setState(n,"selectedValue",""+t),this.setState(n,"selectedLabel",this.useManualInput?r||t:r),this.setState(n,"selectedPrefixCss",this._getSelectedPrefixCss(t,i)));this.pendingViewUpdate(!1);this.batchUpdateView()},_changeCompModeBySelectedValue:function(n,t){var i=n.index;$.isEmpty(t.isModeChange)&&(t.isModeChange=t.id===this.manualInputItemId);t.isModeChange?(this.setState(i,"focusChangeFiredByModeChange",!0),this.setState(i,"mode","input"),this.setFocus(i)):this.setState(i,"mode","button");t.manual&&this.setState(i,"manualInput",!0)},_changeToButtonMode:function(n){_.isEmpty(this.getState(n,"mode"))||this.getState(n,"mode")==="button"||(this.setState(n,"focusChangeFiredByModeChange",!0),this.setState(n,"mode","button"),this.setFocus(n))},_getValidateValue:function(n){var t=this.getValue(n);return t=="".padLeft(t.length,ecount.delimiter)&&(t="".padLeft(t.length," ")),t},_checkValidation:function(n){return this.maxLength&&n.value.length>this.maxLength?!1:!0},ON_FOCUSIN:function(n,t){var i=this.getComponent(n.ecRoleIndex),u=i&&i.lastSelectedValue,f=this.getState(this._IT_SELF,"useRecommendOption"),r=this.getState(this._IT_SELF,"recommendValue");f&&!!r&&u!=r&&this._showLayer(_.extend({},n,{handler:".layer.selectbox",ecService:"layer.selectbox"}),t,{showingUpDelay:400,hiddenBody:!0});i&&i.focusChangeFiredByModeChange&&this.setState(n.ecRoleIndex,"focusChangeFiredByModeChange",!1)},ON_FOCUSOUT:function(n,t,i,r){var u=this.getComponent(n.ecRoleIndex||n.cindex),f=u&&u.lastSelectedValue,e=u&&u.selectedValue,s=this.getLayerServiceKey(n),h=$.isEmpty(r.index)?n.ecRoleIndex:r.index,c=ecount.layer.getLayer(s),o;u&&f!=e&&this.executeChangeDelegator({event:t,cindex:u.index,oldValue:f,value:e});switch(n.handler){case ECountEvent.Type.FOCUSOUT_CONTROL:o=u&&u.mode=="input";o&&(this.getState(h,"focusChangeFiredByModeChange")||($.isEmpty(n.value)&&this.setValue(this._spaceSymbolValue),u&&this.setState(u.index,"mode","button")))}},_ON_BEFORE_CLICK:function(n,t,i,r){if(ecount.control.prototype._ON_BEFORE_CLICK.apply(this,arguments)===!1)return!1;var s=n.ecRoleIndex,u=this.getComponent(s),e=this.getState(this._IT_SELF,"showLayerInputMode"),f=this.getLayerServiceKey(n),o=ecount.layer.getLayer(f),h=this.getState(this._IT_SELF,"useRecommendOption");if(h&&f&&o&&o.hiddenBody&&(ecount.layer.clearTimer(f),ecount.layer.removeLayer(f)),u)switch(n.handler){case ECountEvent.Type.CLICK_SELECT:return u.mode=="input"&&!!e?!0:u.mode!="input";case ECountEvent.Type.CLICK_AUTOCOMPLETE:if(u.mode!="input"||e)u.mode!="input"||!e||_.merge(r,{showLayerInputMode:!0});else return!1;return!0}return!0},ON_CLICK:function(n,t,i,r){switch(n.handler){case ECountEvent.Type.CLICK_SELECT:return this.onClickSelectHandler(n,t,i,r)}},ON_CLICK_SERVICE:function(n,t,i,r){if(r.originId!="selectboxAddNewForm"&&r.originId!="selectboxOption"&&r.originId!="selectboxEditForm")switch(n.handler){case ECountEvent.Type.CLICK_LAYER:return this.onClickLayerSelectHandler(_.merge({cid:this.cid,ecRoleIndex:r.index},n),t,i,r)}},ON_MOUSEDOWN_SERVICE:function(n,t,i,r){if(r.hasAutocompleteFocus)switch(n.handler){case ECountEvent.Type.MOUSEDOWN_LAYER:r.selected=r.itemList[r.selectedIndex];return this.onClickLayerSelectHandler(_.merge({cid:this.cid,ecRoleIndex:r.index},n),t,i,r)}},ON_KEYDOWN_ARROW_UP:function(n,t,i,r){this.onChangeSelectedValueByKeyboard(n,t,i,r);n.suspend=!0},ON_KEYDOWN_ARROW_UP_SERVICE:function(n,t,i,r){switch(n.ecService){case"layer.selectbox":return this.onChangeSelectedValueOnServiceByKeyboard(_.merge({cid:this.cid,ecRoleIndex:r.index},n),t,i,r);case"layer.autocomplete":return this.onChangeAutocompleteOnServiceByKeyboard(n,t,r)}},ON_KEYDOWN_ARROW_DOWN:function(n,t,i,r){this.onChangeSelectedValueByKeyboard(n,t,r,!0);n.suspend=!0},ON_KEYDOWN_ARROW_DOWN_SERVICE:function(n,t,i,r){switch(n.ecService){case"layer.selectbox":return this.onChangeSelectedValueOnServiceByKeyboard(_.merge({cid:this.cid,ecRoleIndex:r.index},n),t,i,r);case"layer.autocomplete":return!1}},ON_KEYDOWN_ENTER:function(n,t,i,r){var u=$.isEmpty(r.index)?n.ecRoleIndex:r.index,e=this.getComponent(u),f=this.getState(u,"mode");if(this.moreOptionButton&&r.selected&&r.selected.value==this._getMoreOptionValue())return this.addMoreSelectOption();if(f=="input"&&(r.changeValue=!0,r.selected={label:n.value||this._spaceSymbolLabel,value:n.value||this._spaceSymbolValue}),f=="button"){var o=this.getValue(),s=this.getSelectOptions(),h=s.filter(function(n){return n.value!=this._spaceSymbolValue}.bind(this)).some(function(n){return n.value==o});h||(r.changeValue=!0,r.selected={label:this._spaceSymbolLabel,value:this._spaceSymbolValue})}this.onChangeSelectedValueHandler(n,t,r||{});!this.useManualInput||this.getState(u,"mode")!="input"||this.setState(e.index,"mode","button")},ON_KEYDOWN_ENTER_SERVICE:function(n,t,i,r){var u=$.isEmpty(r.index)?n.ecRoleIndex:r.index,f=this.getComponent(u);if(this.moreOptionButton&&r.selected&&r.selected.value==this._getMoreOptionValue())return this.addMoreSelectOption();if(this.getState(u,"mode")=="input"){r.changeValue=!0;switch(n.ecService){case"layer.selectbox":r.selected={label:n.value||this._spaceSymbolLabel,value:n.value||this.getState(u,"selectedLabel")};break;case"layer.autocomplete":if($.isEmpty(r.itemList)||$.isEmpty(r.selectedIndex))return!1;selectedValue=r.itemList[r.selectedIndex];r.selected={label:selectedValue.value||this.getState(u,"selectedValue"),value:selectedValue.value||this.getState(u,"selectedLabel")}}}this.onChangeSelectedValueHandler(_.merge({cid:this.cid,ecRoleIndex:r.index},n),t,r||{});f.lastSelectedValue!=f.selectedValue&&this.executeChangeDelegator({event:t,cindex:u,oldValue:f.lastSelectedValue,value:f.selectedValue});!this.useManualInput||this.getState(u,"mode")!="input"||this.setState(f.index,"mode","button");this.setFocus(u+1)},ON_KEYDOWN_ESC_SERVICE:function(n,t,i,r){if(this.moreOptionButton&&r.selected&&r.selected.value==this._getMoreOptionValue())return this.addMoreSelectOption();this.onChangeSelectedValueHandler(_.merge({cid:this.cid,ecRoleIndex:r.index},n),t,r||{})},ON_KEYPRESS_OTHERS:function(n,t,i,r){if(r.selected&&r.selected.selectedIndex!==undefined){var u=r.selected.selectedIndex,f=this.getComponent(r.selected.index).option[u];this._changeSelectedValue(r.index,f)}else this._onKeypressOthersHandler(n,t,r)},ON_KEYPRESS_OTHERS_SERVICE:function(n,t,i,r){if(r.selected){var u=r.selected,f=this.getState(u.index,"option");this._changeSelectedValue(u.index,f[u.selectedIndex])}}});ecount.control.select.getContinuosDataByRange=function(n,t){var i=n.step===undefined?1:Math.abs(parseInt(n.step)),r=parseInt(n.from),f=parseInt(n.to),e=[],o=parseInt(Math.abs(r-f)/i),s=n.padLength&&parseInt(n.padLength),h=n.padString&&n.padString.toString(),u;r>f&&(i=-(i||1));do u=t(r,s,h),$.isEmpty(u)||e.push(u),r+=i;while(o--);return e};ecount.control.select.getOptionsFromArray=function(n,t,i){return n.map(function(n,r){if($.isArray(n)){var f=t(r),u=_.merge(i(n),{id:f});return isNaN(+n[2])?u.className=n[2]:u.index=n[2],u}return _.merge({id:t,label:n.label||n.text,data:n.data||n.userData},n)}.bind(this))};ecount.control.select.getOptionsFromString=function(n,t){var i=JSON.parse(t);return i.map(function(t,i){if($.isArray(t)){var r={value:_.isNumber(t[0])?t[0]+"":t[0],label:t[1],data:optArr[3],className:optArra.className,id:n+"_"+i};return isNaN(+t[2])?r.className=t[2]:r.index=t[2],r}return t}.bind(this))};ecount.control.select.optionFindingPredicate=function(n,t){var i=$.isEmpty(t.value)?t.value:""+t.value,r=$.isEmpty(t.value)?n:""+n;return ecount.common.isTrue(i)&&ecount.common.isTrue(r)||ecount.common.isFalse(i)&&ecount.common.isFalse(r)||i==r};ecount.control.select.getCurrentOptionIndex=function(n){var i=0,r=n.option,t,u;if(n.selectedValue)for(t=0,u=r.length;t<u;t++)if(ecount.control.select.optionFindingPredicate(n.selectedValue,r[t])){i=t;break}return i};ecount.control.select.autoCompleteHandler=function(n,t,i,r){var f,u,e;u=i.reduce(function(t,i,r){return i.label&&(""+i.label).toLowerCase().indexOf(n)===0&&t.push(r),t}.bind(this),[]);u.length>0&&(e=u.filter(function(n){return n>t}),f=e.length?e[0]:u[0],f!=undefined&&r(f))};ecount.class("ecount.control.menu.container","ecount.control.menu",{ecPackage:"ecount.control.menu.container",initializeOptions:function(){if(ecount.control.menu.prototype.initializeOptions.apply(this,arguments),this.delegator)this.delegator.on({"container.openNewSite":this.openNewSite.bind(this)})},openNewSite:function(){},onInitState:function(n,t){t["style.showingDepth"]=1},onInitComponent:function(){ecount.control.menu.prototype.onInitComponent.apply(this,arguments)},setEcPath:function(){this.ecPath=[this.ecPageID,"menu","","","",this.id,this.pcid].join(ecount.separator.ecPath)},runMenuChangeProcess:function(n,t){ecount.menu.getMenuApiData().then(function(){t&&t()})},_getComponentIndex:function(){return 0},_getMenuItems:function(n,t){var i=widget.generator.control();return n._dataItems.map(function(r){return i.define("widget.menuSection").setDataItems(r).setOptions(this._getContainerData(n,t)).getInstance()}.bind(this))},_getContainerData:function(){return{ecPageID:this.ecPageID,delegator:this.delegator}}});ecount.class("ecount.control.menu.section","ecount.control.menu",{ecPackage:"ecount.control.menu.section",onInitState:function(){ecount.control.menu.prototype.onInitState.apply(this,arguments);$.extend(this.__state,{containerId:["control","","",this.ecPageID,this.id].join(ecount.separator.ecPath),"opt.hoverActiveItem":""})},setEcPath:function(){this.ecPath=[this.ecPageID,"menu","section","","",this.id,this.pcid].join(ecount.separator.ecPath)},setActivatedState:function(){},setHoverActiveItem:function(n){this.setState(this._IT_SELF,"opt.hoverActiveItem",n)},getHoverActiveItem:function(){return this.getState(this._IT_SELF,"opt.hoverActiveItem")},getSectionItem:function(){},activateMenuById:function(){},activateMenuByParentId:function(){},_getMenuItems:function(n,t){var i=widget.generator.control();return n._dataItems.map(function(r){return i.define("widget.menuItem").setDataItems([]).setOptions($.extend(this._getSectionData(n,t),{menuData:r})).getInstance()}.bind(this))},_getSectionData:function(){return{ecPageID:this.ecPageID,delegator:this.delegator}},ON_MOUSEOVER:function(){}});ecount.class("ecount.control.menu.item","ecount.control.menu",{ecPackage:"ecount.control.menu.item",onInitState:function(n,t,i){ecount.control.menu.prototype.onInitState.apply(this,arguments);$.extend(this.__state,{section:i.section,"attr.href":"javascript:;","attr.target":"","style.anchorClass":""})},setEcPath:function(){this.ecPath=[this.ecPageID,"menu","section","","",this.id,this.pcid].join(ecount.separator.ecPath)},_getOwnState:function(n,t,i){return[{target:i.target||this.target,domId:this._getDomId(n,t,i),label:i.label||this.label,containerId:this._getContainerId(n,t,i)}]},_getMenuHash:function(){return["#menuType=",this.menuData.MENU_TYPE,"&menuSeq=",this.menuData.MENU_SEQ,"&groupSeq=",this.menuData.GROUP_SEQ,"&prgId=",this.menuData.PRG_ID].join("")},_getMenuItems:function(){return[]},_getDomId:function(){return"ma"+this.id},_getMenuItemData:function(){return{ecPageID:this.ecPageID,delegator:this.delegator}},_hasMouseoutTimer:function(){return!1},ON_CLICK:function(){},ON_MOUSEOVER:function(){},ON_MOUSEOUT:function(){}});ecount.class("ecount.control.view.menu.container","ecount.control.view.menu",{template:'<div  class="global-nav" data-role="childContainer"><\/div>',openClassName:"on",onMount:function(){var n=this.getWrapperMenuAreaAddon();this.$el&&(n.attr("data-ecpath",this.$el.attr("data-ecpath")),n.attr("data-role",this.$el.attr("data-role")),n[0].ecIKey=this.$el[0].ecIKey)}});ecount.class("ecount.control.view.menu.section","ecount.control.view.menu",{wrapperTemplate:['<div class="{{containerClassName}} {{style.display}}" data-container-id="{{containerId}}" data-cid="{{cid}}" data-ecpath="{{ecPath}}">',"((this.template))","<\/div>",].join("\n"),template:'<ul id="{{id}}" class="{{ulClassName}}" data-cid="{{cid}}" data-role="menuListedItem"><\/ul>',containerClassName:"",getUlClassName:function(){return""},onInitTemplate:function(n,t){return ecount.widget.replaceAttr(n,$.extend(t,{ulClassName:this.getUlClassName(t)}))},onInitWrapperTemplate:function(){return"((this.template))"}});ecount.class("ecount.control.view.menu.item","ecount.control.view.menu",{template:'<li id={{id}} data-ecpath={{ecPath}} data-role="menu.listedItem" class="{{listClassName}}">\n<a href="{{attr.href}}" target="{{attr.target}}" data-role={{menuAnchor}} data-level={{level}} data-findex="{{findex}}" data-index={{index}} id="{{domId}}" data-cid="{{anchorId}}" class="{{anchorClassName}}" data-container-id="{{containerId}}">\n{{label}}[[arrow]][[newWinIconTemplate]]\n<\/a>\n<\/li>',childrenTemplate:'<ul data-ecPath={{ecPath}} class="{{style.display}}" data-role="menu.itemContainer">{{itemTemplate}}<\/ul>',arrowTemplate:'<span class="icon-nav-arrow" data-cid="{{cid}}" data-function="{{ecFunction}}"><\/span>',newWinIconTemplate:'<span class="new-window" data-cid="{{cid}}" data-function="{{ecFunction}}"><\/span>',listClassName:"",onInitTemplate:function(n,t){return ecount.widget.replaceAttr(n,$.extend(t,{listClassName:this.listClassName}))},onChangeIsAnchorActivated:function(){var n=this.getOwnElement("[data-role=menuAnchor]");value?n.addClass(this.anchorActiveClassName):n.removeClass(this.anchorActiveClassName)}});widget.menuContainer={};widget.menuContainer._baseLoaded=!1;widget.menuContainer._export=function(){return{_default:{controlType:"widget.menuContainer",createView:function(){return this.ecview=new widget.view.menuContainer}},common:{controlType:"widget.menuContainer.common",defaultClosedState:!0,navMouseoutTimer:null,depth1MouseoverTimer:null,depth2MouseoverTimer:null,depth3MouseoutTimer:null,closingTimer:null,navMouseoutTimeout:1e3,depth1MouseoverTimeout:null,depth2MouseoverTimeout:null,depth3MouseoutTimeout:null,blankPageUrl:"/ECErp/contents/pages/UI.Service/ECP/Views/blank.html",defaultBodyUrl:"",isUseLeftToggleSwitch:null,isLeftMenuCollapsed:null,preOpenLogicList:null,comInfo:null,versionData:null,clickedMenuId:null,initializeOptions:function(n){_.extend(this,{comInfo:n.comInfo,versionData:n.versionData,isMasterUser:n.isMasterUser,isUseLeftToggleSwitch:n.isUseLeftToggleSwitch,isLeftMenuCollapsed:n.isLeftMenuCollapsed,defaultBodyUrl:n.defaultBodyUrl||this.defaultBodyUrl,depth1MouseoverTimeout:ecount.common.mouseHoverInTime,depth2MouseoverTimeout:ecount.common.mouseHoverInTime,depth3MouseoutTimeout:ecount.common.mouseHoverOutTime});ecount.control.menu.container.prototype.initializeOptions.apply(this,arguments);this.onInitPreOpenLogic()},onInitState:function(){ecount.control.menu.container.prototype.onInitState.apply(this,arguments);$.extend(this.__state,{"style.showingDepth":1,"opt.isClosed":this.defaultClosedState,"opt.hasCursor":!1,"opt.isReadyToClose":!1,"opt.dragMode":!1,"opt.deleteMode":!1,"opt.draggable":!1,"opt.droppable":!1,"opt.responsiveOpenGlobal":!1,"opt.responsiveOpenLocal":!1})},onInitFunction:function(n,t){ecount.control.menu.container.prototype.onInitFunction.apply(this,arguments);t.functions.dropdownGroup={ecFunction:"selectbox",cid:this.id,css:"dropdown-menu dropdown-menu-fixed-height position-fixed",option:[],selectedLabel:"",selectedValue:""}},onAfterRender:function(){var n=$.url().ecHash;ecount.control.menu.container.prototype.onAfterRender.apply(this,arguments);this.onInitContainerObserver();n.menuType?this.runMenuChangeProcess(n):(this.moveToDefaultPage(),this.menuItems[2].hide())},onInitContainerObserver:function(){ecount.runtime.observe(ECountEvent.Type.MOUSEDOWN_BODY,null,this.documentMousedownAction.bind(this));ecount.runtime.observe("resize",this.ecPageID,this.windowResizeAction.bind(this));ecount.runtime.observe("menu.section1.selectItem",this.ecPageID,this.restoreSection1Menu.bind(this));ecount.runtime.observe("menu.section3.renewItem",this.ecPageID,this._updateDepth3MenuItem.bind(this))},onInitPreOpenLogic:function(){this.preOpenLogicList=[]},onClickActionHandler:function(n,t,i){var f,r=ecount.pageInfo.getPrevMenuID(),u;if(i.item.MENU_ID!=this.clickedMenuId&&(!ecount.pageInfo.getPageLoading()||r!==i.item.PRG_ID)){if(this.clickedMenuId=i.item.MENU_ID,ecount.pageInfo&&ecount.pageInfo.setPrevMenuID&&ecount.pageInfo.setPrevMenuID(i.item.PRG_ID),ecount.pageInfo&&ecount.pageInfo.setPageLoading&&ecount.pageInfo.setPageLoading(!0),ecount.destroyToast&&ecount.destroyToast(),u=200,ecount.company&&ecount.company.COM_CODE=="80000"&&i.item.MENU_ID=="GW_2138_M070303000003"&&(u=2e3),f=ecount.parentFrame.setTimeout(function(){this.clickedMenuId=null}.bind(this),u),n.shiftKey)return ecount.pageInfo&&ecount.pageInfo.setPrevMenuID&&ecount.pageInfo.setPrevMenuID(r),this.runOpenNewBrowserProcess(i.item);Promise.resolve().then(function(){return this._hasToWaitDataLoad(i.item)?this.dataLoadBeforeRoute(i.item):Promise.resolve(i.item)}.bind(this)).then(function(t){if(n.ctrlKey)return ecount.pageInfo&&ecount.pageInfo.setPrevMenuID&&ecount.pageInfo.setPrevMenuID(r),this.runOpenNewTabProcess(t);if(n.ecRole=="menu.newwindow")return ecount.pageInfo&&ecount.pageInfo.setPrevMenuID&&ecount.pageInfo.setPrevMenuID(r),this.runOpenNewWinProcess(t);if(this._isPopupMenu(t))return ecount.pageInfo&&ecount.pageInfo.setPrevMenuID&&ecount.pageInfo.setPrevMenuID(r),this.runOpenPopupMenuProcess(t);ecount.popup.parent.ecount.callback.find("__EC_UNLOAD_EVENT_CALLBACK_ID")&&!ecount.popup.parent.ecount.callback.execute("__EC_UNLOAD_EVENT_CALLBACK_ID","execute")?ecount.confirm(ecount.resource.MSG70527,{callback:function(n){n?ecount.router.route(this._getHashFromMenuData(t)):ecount.pageInfo&&ecount.pageInfo.setPrevMenuID&&ecount.pageInfo.setPrevMenuID(r)}.bind(this)}):ecount.router.route(this._getHashFromMenuData(t))}.bind(this))}},onButtonClickActionHandler:function(n){switch(n.ecRole){case"menu.navButton":case"menu.globalNavButton":this.toggleNavigatorAction();break;case"menu.backButton":this._showPrevDepth();break;case"menu.homeButton":this.setShowingDepth(1)}},onDropdownClickActionHandler:function(n){n.ecRole=='"menu.grouplist'},runPreOpenLogic:function(n,t){return new Promise(function(i){for(var r=Promise.resolve(),u=0,f=n.length;u<f;u++)(function(n){r=r.then(n.predicate.bind(null,t)).then(function(r){if(r)return $.isArray(n.action)?i(this.runPreOpenLogic(n.action,t)):i(n.action(t))}.bind(this))}).bind(this)(n[u]);r.then(i)}.bind(this)).then(function(){return t.BODY_URL})},runMenuChangeProcess:function(n){if(ecount.getWindowRefreshFlag()){location.reload(!0);return}this._getRoutingMenuData(n).then(function(t){if(this.isRedirectMenu(t)){this.redirectByOldUrlQuery(t);return}if(this.isRedirectTempMenu(t)){this.redirectByNewUrlQuery();return}(this.renderChangedMenu(t),this.getState(this._IT_SELF,"opt.draggable"))||this.runPreOpenLogic(this.preOpenLogicList,t).then(function(i){ecount.router.go({url:i,param:this._getMenuRoutingParam(n,t),doNotNeedLeftSpace:this._isNoLeftSpaceMenu(t),applicationVersion:n.applicationVersion||3})}.bind(this)).catch(this.logFailMenuChange.bind(this,t))}.bind(this)).catch(function(t){console.log(t);this.moveToNoMenuDataUrl(n)}.bind(this))},renderChangedMenu:function(n){switch(+n.DEPTH){case 1:this.depth1ItemRoutingAction(n);break;case 2:this.depth2ItemRoutingAction(n);break;case 3:this.depth3ItemRoutingAction(n);break;case 4:this.depth4ItemRoutingAction(n)}},moveToNoMenuDataUrl:function(n){if(this.menuItems[2]&&this.menuItems[2].removeCurrentItemKey(),n.menuUrl)return this.renderDataProvidedItemOnly(n),ecount.router.go(n.menuUrl);this.blockMenuAccessAction()},logFailMenuChange:function(n){var t=String.format("can not access to the menu:: menuSeq >> {0}, prgId >> {1}, menuName: {2}.",n.MENU_SEQ,n.PRG_ID,n.MENU_NAME);console.log(t)},_getMenuRoutingParam:function(n,t){return{PRG_ID:t.PRG_ID,FROM_FAVORITE:n.fromFavorite}},openNewSite:function(n){var t={},i={item:n.menuData};n.selected==="newTab"?t.ctrlKey=!0:t.ecRole="menu.newwindow";this.onClickActionHandler(t,{},i);this.delegator&&this.delegator.triggerEvent("section.menuClose",{})},runOpenPopupMenuProcess:function(n){this.runPreOpenLogic(this.preOpenLogicList,n).then(function(){ecount.popup.openWindow({url:n.BODY_URL,popupType:!1,alreadyIncludedLayout:!0,param:{responseID:this.callbackID,width:1200,height:800}})}.bind(this)).catch(function(){this.logFailMenuChange(n)}.bind(this))},runOpenNewWinProcess:function(n){if(!n){this.blockMenuAccessAction();return}if(this.isRedirectMenu(n)){this.openNewWindowByOldUrlQuery(n);return}this.runPreOpenLogic(this.preOpenLogicList,n).then(function(t){var i=this._getPopupOpenOptions(t,n);i=_.extend(i,{isLeftMenuNewOpen:!0});ecount.popup.openWindow(i)}.bind(this)).catch(function(){this.logFailMenuChange(n)}.bind(this))},runOpenNewBrowserProcess:function(n){var t=this._getUrlFromMenuData(n);window.open(t)},runOpenNewTabProcess:function(n){if(n){if(this.isRedirectMenu(n)){this.openNewTabByOldUrlQuery(n);return}this.runPreOpenLogic(this.preOpenLogicList,n).then(function(t){ecount.router.go({url:t,param:{menuSeq:n.MENU_SEQ,groupSeq:n.GROUP_SEQ}},"_blank")}.bind(this)).catch(function(){var t=String.format("can not access to the menu:: menuSeq >> {0}, prgId >> {1}, menuName: {2}.",n.MENU_SEQ,n.PRG_ID,n.MENU_NAME);console.log(t)})}},runOpenFavNewTabProcess:function(n){var t=this._getHashFromMenuData(n);ecount.router.go({url:location.pathname,hash:"#"+this._getHashStringFromHashData(t),doNotNeedLeftSpace:!ecount.parentFrame.location.hash||this._isNoLeftSpaceMenu(n)},"_blank")},runOpenFavMenuProcess:function(n,t){if(t=="favNewTab"){this.runOpenFavNewTabProcess(this._getMenuDataFromHash(n));return}this._getFavMenuTarget(n).then(this.routeToFavMenu.bind(this,t)).catch(function(){this.routeAction(this._getMenuDataFromHash(n),t)}.bind(this))},routeToFavMenu:function(n,t){var i=this._getHashFromMenuData(t);this._getRoutingMenuData(i).then(function(){this.routeAction(t,n)}.bind(this)).catch(function(){this.routeAction(t,n)}.bind(this))},dataLoadBeforeRoute:function(n){return Promise.resolve(n)},renderSection2ItemAction:function(){return Promise.resolve()},renderSection3ItemAction:function(n,t){var i=_.isPlainObject(t)?t:null;return t=i?t.BODY_URL:t,this.renderItemsByParent(3,n).then(function(){if(t.indexOf(ecount.menu.noChildMyPageUrl)!=0)if(i){var n={BODY_URL:i.BODY_URL};i.PRG_ID&&(n.PRG_ID=i.PRG_ID);i.MENU_SEQ&&(n.MENU_SEQ=i.MENU_SEQ);this.menuItems[2].activateMenuItemByMatch(n,!0)}else this.menuItems[2].activateMenuItemByBodyUrl(t,!0)}.bind(this))},activateSectionByMenuSeq:function(n,t,i){var r=n-1,u=this.menuItems[r].getMenuItemByMenuSeq(t);u&&this.menuItems[r].activateMenuItem(u.getMenuDataAttrs(),i)},activateSectionByMenuId:function(n,t,i){var r=n-1;this.menuItems[r].activateMenuItemById(t,i)},activateSectionByBodyUrl:function(n,t,i){var r=n-1;this.menuItems[r].activateMenuItemByBodyUrl(t,i)},depth1ItemRoutingAction:function(n){return ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.depth1MouseoverTimer),this.activateSection1Item(n,!0).then(function(){var r=n.BODY_URL||n.MENU_URL,t=this._getDefaultDepth2Group(n),i;this._updateMenuDefaultTargetData(t);ecount.menuCommand.container.renderSection1ClickedUI(this,n);ecount.menuCommand.container.renderSection2ClickedUI(this,t.getMenuData());ecount.menuCommand.container.renderClickedUIAnimation(this,1,n);i=this.menuItems[2].menuItems;i.forEach(function(n){var t=n.getClosedOptState();n.setClosedAttrState(t)}.bind(this))}.bind(this))},depth2ItemRoutingAction:function(n){var i=this.menuItems[0].getMenuItemByMenuSeq(n.MENU_TYPE),t=i.getMenuData();return ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.depth2MouseoverTimer),ecount.menuCommand.container.renderSection1ClickedUI(this,t),this.activateSection1Item(t,!0).then(this.activateSection2Item.bind(this,n)).then(function(){var i=this._isNoLeftSpaceMenu(n),r=this._isClosingTypeMenu(n),t;ecount.menuCommand.container.renderSection2ClickedUI(this,n);ecount.menuCommand.container.renderSection3ClickedUI(this,n,n.BODY_URL);ecount.menuCommand.container.renderClickedUIAnimation(this,2,n);t=this.menuItems[2].menuItems;t.forEach(function(n){var t=n.getClosedOptState();n.setClosedAttrState(t)}.bind(this));ecount.menuCommand.container.renderNoLeftSpaceMenu(this,i);ecount.menuCommand.container.renderClosingTypeMenu(this,r)}.bind(this))},leafItemRoutingAction:function(n,t){var u=this.menuItems[0].getMenuItemByMenuSeq(n.MENU_TYPE),f=this.menuItems[1].getMenuItemByGroupSeq(n.MENU_TYPE,n.GROUP_SEQ),r=u?u.getMenuData():null,i=f?f.getMenuData():null;return ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.depth1MouseoverTimer),ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.depth2MouseoverTimer),this.activateSection1Item(r,!0).then(this.activateSection2Item.bind(this,i)).then(function(){ecount.menuCommand.container.renderSection1ClickedUI(this,r);ecount.menuCommand.container.renderSection2ClickedUI(this,i);ecount.menuCommand.container.renderSection3ClickedUI(this,i,_.isEmpty(n.DEFAULT_PRG_ID)?n:n.BODY_URL);ecount.menuCommand.container.renderClickedUIAnimation(this,3,n);t(r,i,n)}.bind(this))},depth3ItemRoutingAction:function(n){this.leafItemRoutingAction(n,function(n,t,i){var r=this.menuItems[2].menuItems;r.forEach(function(n){if(n.cid==i.MENU_SEQ)n.setClosedAttrState(!1);else{var t=n.getClosedOptState()||n.getClosedAttrState();n.setClosedAttrState(t)}}.bind(this))}.bind(this))},depth4ItemRoutingAction:function(n){this.leafItemRoutingAction(n,function(n,t,i){var r=this.menuItems[2].menuItems;r.forEach(function(n){if(n.cid==i.PARENT_MENU_SEQ)n.setClosedAttrState(!1);else{var t=n.getClosedOptState()||n.getClosedAttrState();n.setClosedAttrState(t)}}.bind(this))}.bind(this))},dropdownGroupRoutingAction:function(n,t){var i=this.getFunction("dropdownGroup"),r=i.option,u=r.head(function(t){return t.value==n});this.routeAction(u,t)},allowMenuAccessAction:function(n){return Promise.resolve(n.BODY_URL)},blockMenuAccessAction:function(){return ecount.router.go({url:this.blankPageUrl,method:"GET"}),Promise.reject()},setSection2ActivationTimer:function(n,t,i){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.depth1MouseoverTimer);ecount.runtime.stopObserving(this.ecPageID,"menu.section2.deselectItem");this.depth1MouseoverTimer=ecount.global.setTimeout(this.ecPageID,this.activateSection1Item.bind(this,i.item),this.depth1MouseoverTimeout);ecount.runtime.observe("menu.section2.deselectItem",this.ecPageID,function(){ecount.runtime.stopObserving("menu.section2.deselectItem",this.ecPageID);ecount.runtime.observe("menu.section2.deselectItem",this.ecPageID,ecount.menuCommand.container.deselectItemAction.bind(null,this,2));ecount.menuCommand.container.deselectItemAction(this,2)}.bind(this))},setSection3ActivationTimer:function(n,t,i){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.depth2MouseoverTimer);ecount.runtime.stopObserving("menu.section2.selectItem",this.ecPageID);this.menuItems[0].activateMenuItem(i.item);this.depth2MouseoverTimer=ecount.global.setTimeout(this.ecPageID,this.activateSection2Item.bind(this,i.item),this.depth2MouseoverTimeout);ecount.runtime.observe("menu.section2.selectItem",this.ecPageID,function(n){ecount.runtime.stopObserving("menu.section2.selectItem",this.ecPageID);ecount.runtime.observe("menu.section2.selectItem",this.ecPageID);this.restoreSection2Menu(n)}.bind(this))},getLayerSelectboxOption:function(n,t){var i=this.getLayerDefaultOption(n,t),r=this.getFunction("dropdownGroup");return _.extend(i,r,{showingUpDelay:0,boundary:this.getRoleHolderBoundary(n.ecRole,n.ecRoleIndex)})},getDropdownGroupTarget:function(n){return n.DEPTH>2?this.menuItems[1].getMenuItemByGroupSeq(n.MENU_TYPE,n.GROUP_SEQ):this.menuItems[0].getMenuItemByMenuSeq(n.PARENT_MENU_SEQ)},getSibilingsGroup:function(n,t){var i=n-1,r=this.menuItems[i].getSibilingsGroup(t.MENU_ID);return r.map(function(n){return _.extend(n,{value:n.MENU_ID,label:n.MENU_NAME})})},getMenuItemDataByMenuId:function(n){var t=this._getMenuItemByMenuId(n);if(t)return t.getMenuDataAttrs()},getEditGuide:function(){if(this.ecview)return this.ecview.getEditGuide()},setSelectedDropdownGroup:function(n,t){var i=n.head(function(n){return n.value==t});i&&(this.setState("dropdownGroup","option",n),this.setState("dropdownGroup","selectedLabel",i.label),this.setState("dropdownGroup","selectedValue",i.value))},setParentDropdownGroup:function(n){var i=this.getDropdownGroupTarget(n),t;i&&(t=i.getMenuDataAttrs(),this.setSelectedDropdownGroup(this.getSibilingsGroup(t.DEPTH,t),t.MENU_ID))},enableEditMode:function(n,t,i){i||this.setState(this._IT_SELF,"opt.draggable",!0);t||this.setState(this._IT_SELF,"opt.droppable",!0);n!==undefined?(index=n-1,this._enableChildDraggable(t,i,this.menuItems[index])):this.menuItems.forEach(this._enableChildDraggable.bind(this,t,i));this.enableDeleteMode()},enableDeleteMode:function(n){if(n!==undefined){var t=n-1;this.menuItems[t].enableDeleteMode()}else this.menuItems.forEach(function(n){n.enableDeleteMode()})},disableEditMode:function(n,t,i){i||this.setState(this._IT_SELF,"opt.draggable",!1);t||this.setState(this._IT_SELF,"opt.droppable",!1);n!==undefined?(index=n-1,this._disableChildRaggable(t,i,this.menuItems[index])):this.menuItems.forEach(this._disableChildRaggable.bind(this,t,i));$("body").removeClass("navigation-edit")},disableDeleteMode:function(){if(depth!==undefined){var n=depth-1;this.menuItems[n].disableDeleteMode()}else this.menuItems.forEach(function(n){n.disableDeleteMode()})},hasFocus:function(){return this.getState(this._IT_SELF,"opt.hasCursor")},getDraggable$Target:function(n){for(var r,i=0,u=this.menuItems.length,t;i<u;i++)if(this.menuItems[i].isDraggableEnabled()&&(t=this.menuItems[i].getMenuItemByMenuId(n.cid)))return t.isDraggable()?(r=t.getDraggableTarget(),this.menuItems[i].setEditGuide(t.getMenuId(),{horizontal:"backword",vertical:"backword"}),t.hideMenuItemTemporarily(),r):t.getNotDraggableTarget()},getDraggableTarget:function(){return this.menuItems.reduce(function(n,t){return t.isDraggableEnabled()?n.add(t.getDraggableTarget()):n},$())},getDroppableTarget:function(){this.menuItems.reduce(function(n,t){return t.isDroppableEnabled()?n.add(t.getDraggableTarget()):n},$())},getSectionDepthFrom$Target:function(n){var t=this._getEcPathFrom$Target(n);if(t.containerName=="menu"&&t.layoutID)return t.layoutID=="group"?t.cid.split("").pop():t.layoutID.split("").pop()},getMenuIdFrom$Target:function(n){var t=this._getEcPathFrom$Target(n);if(t.containerName=="menu"&&t.cid)return t.cid},isDraggableMode:function(){return this.getState(this._IT_SELF,"opt.draggable")},isDroppableToSection:function(n,t,i){var f=this.menuItems.length,r=function(n){return n>f?n-=2:--n},e=r(i),o=r(t),u;return(u=this.menuItems[e])?u.isDroppableSection(n,t,i):!1},hasEditGuideIndex:function(){for(var n=0,t=this.menuItems.length;n<t;n++)if(this.menuItems[n].hasEditGuideIndex())return!0;return!1},serialize:function(){var n=this.menuItems[0].serialize(),t=this.menuItems[1].serialize(),i=this.menuItems[2].serialize();return n.concat(t).concat(i)},enableDragMode:function(){this.setState(this._IT_SELF,"opt.dragMode",!0);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].enableDragMode()},disableDragMode:function(){this.setState(this._IT_SELF,"opt.dragMode",!1);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].disableDragMode(),this.menuItems[n].clearDropAcceptState(),this.menuItems[n].removeEditGuide()},disableDraggable:function(){this.setState(this._IT_SELF,"opt.draggable",!1);this.menuItems.forEach(function(n){n.disableDraggable()});ecount.draggable.destroy()},noChildDepth2RoutingAction:function(){var t=this.menuItems[0].getActivatedChild(),n;t&&t.getBodyUrl().indexOf(ecount.menu.noChildMyPageUrl)==0&&(n=this.menuItems[1].getMenuItem(0).getMenuItem(0),this.menuItems[1].activateMenuItem(n.getMenuDataAttrs(),!0),this.menuItems[2].renderChildren(n,[]))},activateSection1Item:function(n,t){return this.menuItems[0].activateMenuItem(n,t),this.menuItems[0].activeteSection(!0),this.menuItems[1].activateMenuByParent(n).then(function(){var t=this.menuItems[0].getMenuItemByMenuSeq(n.MENU_SEQ).getMenuData();return ecount.menuCommand.container.activateSection1Action(this,t)}.bind(this))},activateSection2Item:function(n,t){this.menuItems[1].activateMenuItem(n,t);var i=this.menuItems[1].getHoverActiveItem();return i&&i!==n.MENU_SEQ&&!this.menuItems[0].getClickedItem()&&this.menuItems[1].getMenuItemByMenuSeq(i)&&this.menuItems[1].getMenuItemByMenuSeq(i).deselectItem(),this.menuItems[0].setHoverActiveItem(n.PARENT_MENU_SEQ),this.menuItems[1].setHoverActiveItem(n.MENU_SEQ),this.renderItemsByParent(3,n).then(ecount.menuCommand.container.activateSection2Action.bind(null,this,n))},hoverModeRestore:function(){if(!this.menuItems[0].getClickedItem()){var i=this.menuItems[2].getSelectedState(),n=this.menuItems[0].getHoverActiveItem(),t=this.menuItems[1].getHoverActiveItem();n&&(this.activateSectionByMenuSeq(1,n),t&&this.activateSectionByMenuSeq(2,t))}},getChildrenCount:function(n){var t=n-1;return this.menuItems[t].getChildrenCount()},setSectionTitle:function(n,t){var i=n-1;t!==undefined&&this.menuItems[i].setTitle(t)},setSectionTitleState:function(n,t){var i=n-1;t!==undefined&&this.menuItems[i].showTitle(t)},setSectionOpenState:function(n,t){var i=n-1;this.menuItems[i].setSectionState(t)},setResponsiveOpenGlobal:function(n,t){this.setState(this._IT_SELF,"opt.responsiveOpenGlobal",n,t)},getResponsiveOpenLocal:function(){return this.getState(this._IT_SELF,"opt.responsiveOpenLocal")},setResponsiveOpenLocal:function(n,t){this.setState(this._IT_SELF,"opt.responsiveOpenLocal",n,t)},getResponsiveOpenGlobal:function(){return this.getState(this._IT_SELF,"opt.responsiveOpenGlobal")},setOptIsClosedState:function(n,t){this.setState(this._IT_SELF,"opt.isClosed",n,t);this.setResponsiveOpenGlobal(!n,t);n?this.setResponsiveOpenLocal(!n,t):this.getShowingDepth()>1&&this.setResponsiveOpenLocal(!n,t)},getOptIsClosedState:function(){return this.getState(this._IT_SELF,"opt.isClosed")},setGlbalNavOpenState:function(n){this.setOptIsClosedState(!n)},setShowingDepth:function(n,t){this.setState(this._IT_SELF,"style.showingDepth",n,t);this.getOptIsClosedState()||this.setOptIsClosedState(!1,t)},getShowingDepth:function(){return this.getState(this._IT_SELF,"style.showingDepth")},setChildrenGroupSelectState:function(n){this.menuItems[1].getSelectedItem().setSelectedState(n)},setLeafItemSelectedState:function(n){this.menuItems[2].setSelectedState(n)},setChildrenHiddenState:function(n,t){var i=n-1;t?this.menuItems[i].hide():this.menuItems[i].show()},setReadyToClosingNavigatorState:function(n){this.setState(this._IT_SELF,"opt.isReadyToClose",n)},setSelectedSectionActivation:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.depth1MouseoverTimer);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.depth2MouseoverTimer);this.menuItems[0].fixCurrentlySelectedMenu();this.menuItems[1].fixCurrentlySelectedMenu();ecount.menuCommand.container.activateSection3Action(this,this.menuItems[2].getSelectedItem())},isRedirectMenu:function(){return!1},isReadyToClosingNavigator:function(){return this.getState(this._IT_SELF,"opt.isReadyToClose")},checkMenuAccessRight:function(){return!0},clearSection2Activation:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.depth1MouseoverTimer)},clearSection3Activation:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.depth2MouseoverTimer)},clearNavigationCloseTimer:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.navMouseoutTimer)},clearSection1MouseoverAction:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.depth2MouseoverTimer)},renderChildByParent:function(n,t){var i=n-1;this.menuItems[i].renderMenuItemByParent(t)},restoreSection1Menu:function(n){var t=this.menuItems[1].getSelectedItem(),i=!t||!n;i||t.getParentMenuId()==n.MENU_ID||t.isChildMenuData(n)||(i=!0);i&&ecount.menuCommand.container.restoreSectionStateAction(this,1)},restoreSection2Menu:function(n){this.clearSection1MouseoverAction();this.menuItems[1].activateMenuItem(n.item);ecount.menuCommand.container.restoreSectionStateAction(this,2,n.item)},renewMenuItems:function(n,t){var i=n-1,u=this._getCurrentHashData(),r;this.menuItems[i]&&(r=t.filter(function(t){return n>2?t.DEPTH>=n:t.DEPTH==n}),this.menuItems[i].renewMenuItems(r),this.activateCurrentlySelectedMenu())},restoreToClickedMenu:function(){var n=this.menuItems[0].getClickedItem(),t=this.menuItems[1].getClickedItem(),i;this.menuItems[0].hasFocus()||this.menuItems[1].hasFocus()||this.menuItems[2].hasFocus()||(n&&n!=this.menuItems[0].getSelectedItem()&&this.activateSection1Item(n.getMenuData()),t&&t!=this.menuItems[1].getSelectedItem()&&(i=t.getMenuData(),this.activateSection2Item(i).then(function(){var n=this.menuItems[2].getClickedItem();n&&ecount.menuCommand.container.activateSection3Action(this,n)}.bind(this))))},redirectByOldUrlQuery:function(n){var i=n.BODY_URL.split("?")[1],t;i&&(t=$.deparam(i.toUpperCase()),ecount.router.route({menuType:t.MENU_TYPE,groupSeq:t.MENU_SEQ,menuSeq:t.MENU_SEQ,depth:2}))},redirectByNewUrlQuery:function(){ecount.alert(ecount.resource.MSG11547,function(){ecount.router.route({menuType:2776,groupSeq:2910,menuSeq:2911,depth:3})}.bind(this))},activateCurrentlySelectedMenu:function(){var n=this._getCurrentHashData();n&&this._getRoutingMenuData(n).then(this.renderChangedMenu.bind(this)).catch(function(n){console.log(n)})},openNewWindowByOldUrlQuery:function(n){var i=n.BODY_URL.split("?")[1],t;i&&(t=$.deparam(i.toUpperCase()),this.runOpenNewWinProcess({MENU_TYPE:t.MENU_TYPE,GROUP_SEQ:t.MENU_SEQ,MENU_SEQ:t.MENU_SEQ,DEPTH:2}))},openNewTabByOldUrlQuery:function(){var t=menuData.BODY_URL.split("?")[1],n;t&&(n=$.deparam(t.toUpperCase()),this.runOpenNewTabProcess({MENU_TYPE:n.MENU_TYPE,GROUP_SEQ:n.MENU_SEQ,MENU_SEQ:n.MENU_SEQ,DEPTH:2}))},onDragStart:function(){for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].setDropAcceptState(!1)},onMenuItemDragAction:function(n,t,i,r){var o=this.getSectionDepthFrom$Target(t),s,h,e,f,c,u,l;if(n&&o){for(s=this.getSectionDepthFrom$Target(n),h=this.getMenuIdFrom$Target(n),e=r&&this.isDroppableToSection(h,s,o),f=o-1,c=this.getMenuIdFrom$Target(t),f>=this.menuItems.length&&f--,u=0,l=this.menuItems.length;u<l;u++)+f==u&&e?this.menuItems[u].setEditGuideUp(c,i):this.menuItems[u].removeEditGuide();if(this.menuItems[f].setDropAcceptState(e),e)return!0}},onEditGuideDragAction:function(n,t,i){var u,r,f,e;if(n&&i)for(u=this.getMenuIdFrom$Target(n),r=0,f=this.menuItems.length;r<f;r++)e=this.menuItems[r],e.setEditGuideUpdatedPosition(u,t)},onMoveItemAction:function(n,t){var r=this.getSectionDepthFrom$Target(t),f,i,u,e;n&&r&&(f=this.getSectionDepthFrom$Target(n),u=this.getMenuIdFrom$Target(n),e=this.getMenuIdFrom$Target(t),i=r-1,this.isDroppableToSection(u,f,r)&&(i>=this.menuItems.length&&i--,this.menuItems[i].editMenuItemOrder(u,e)));this.clearDropAcceptState()},onMoveItemOnEditGuideAction:function(n){var i,t,r,u;if(n)for(i=this.getMenuIdFrom$Target(n),t=0,r=this.menuItems.length;t<r;t++)u=this.menuItems[t],u.setMenuItemOnEditGuide(i);this.clearDropAcceptState()},clearDropAcceptState:function(){this.restoreTemporarilyHiddenItem();for(var t=0,i=this.menuItems.length,n;t<i;t++)n=this.menuItems[t],n.removeEditGuide(),n.removeDeleteButton(),n.clearDropAcceptState()},clearSectionRestoreTimer:function(n){var t=n-1;t>=2&&(t=1);this.menuItems[t].clearSectionRestoreTimer()},restoreTemporarilyHiddenItem:function(){for(var t=0,i=this.menuItems.length,n;t<i;t++)n=this.menuItems[t],n.removeEditGuide(),n.removeDeleteButton(),n.restoreTemporarilyHiddenItem()},deselectSection2MenuAction:function(n){var t=this.menuItems[1].getSelectedItem(),i;t&&t.getSelectedItem&&(i=t.getSelectedItem());i&&i.getMenuSeq()==n.item.MENU_SEQ||(t&&!i||ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.depth2MouseoverTimer),this.menuItems[2].hide())},moveToDefaultPage:function(){ecount.menuCommand.container.loadDefaultPageAction(this)},loadDefaultPageAction:function(){},routeAction:function(n,t){switch(t){case"newTab":this.runOpenNewTabProcess(n);break;case"newBrowser":this.runOpenNewBrowserProcess(n);break;default:ecount.router.route(this._getHashFromMenuData(n,!0))}},losingFocusAction:function(){this.navigationCollapsAction();this.delayedClosingAction()},gettingFocusAction:function(){ecount.menuCommand.container.notifyMenuExpandedAction(this)},navigationCollapsAction:function(){ecount.menuCommand.container.notifyMenuCollapsedAction(this)},delayedClosingAction:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.closingTimer);this.closingTimer=ecount.global.setTimeout(this.ecPageID,function(){var n=this.menuItems.any(function(n){return n.hasFocus()});!this.isReadyToClosingNavigator()||this.hasFocus()||n||this.closeNavigatorAction()}.bind(this),0)},documentMousedownAction:function(){ecount.menuCommand.container.documenutMousedownAction(this)},windowResizeAction:function(){var n=$.url().ecHash;_.isEmpty(n)||this._getRoutingMenuData(n).then(function(n){n&&this.renderChangedMenu(n)}.bind(this))},_getMenuItems:function(n,t){var i=widget.generator.control(),c=n._dataItems[0],u=this._getSection3Data(n,t),f=this._getSection2Data(n,t,u),e=this._getSection1Data(n,t,f),r=[],o=i.define.apply(i,this._getSection1GeneratorOption()).setDataItems(e).setOptions(this._getContainerData(n,t)).getInstance(),s=i.define.apply(i,this._getSection2GeneratorOption()).setDataItems(f).setOptions(_.extend(this._getGroupData(e),this._getContainerData(n,t))).setOptions({sectionLv1:o}).getInstance(),h=i.define.apply(i,this._getSection3GeneratorOption()).setDataItems(u).setOptions(_.extend(this._getContainerData(n,t),this._getSection3Options(n,t))).getInstance();return r.push(o),r.push(s),r.push(h),r},_getContainerData:function(){return{ecPageID:this.ecPageID,comInfo:this.comInfo,delegator:this.delegator}},_getSection3Data:function(n){var t=n._dataItems[0].AllSubMenuData;return n._dataItems[0].AllSubMenuData.map(function(n){if(n.M_CNT>0){var i=t.head(function(t){return t.DEPTH>4&&t.PARENTMENU_SEQ==n.MENU_SEQ});if(i)return _.extend({},n,{MENU_URL:i.MENU_URL})}return n})},_getSection2Data:function(n,t,i){return n._dataItems[0].SubMenuData.Data.map(function(n){var t=i.head(function(t){return t.PARENTMENU_SEQ_ORG==n.MENU_SEQ});return t&&t.MENU_URL?_.extend({},n,{MENU_URL:t.MENU_URL}):n})},_getSection1Data:function(n,t,i){return n._dataItems[0].MainMenuData.map(function(n){return _.extend({},n,{MENU_URL:i[0].MENU_URL})})},_getGroupData:function(n){return{groupKeys:n.map(function(n){return n.MENU_SEQ})}},_getDefaultDepth2Group:function(n){var r=n.BODY_URL||n.MENU_URL,i,t;return r&&(t=this.menuItems[1].getMenuItemByBodyUrl(r),t&&t.getDisplayState())?t:(n.GROUP_SEQ&&(i=this.menuItems[1].getMenuGroupByGroupSeq(n.GROUP_SEQ)),i||(i=this.menuItems[1].getMenuGroupByMenuType(n.MENU_TYPE)),i||(i=this.menuItems[1].getMenuGroup(0)),t=i.getMenuItemByMenuSeq(n.GROUP_SEQ),t&&t.getDisplayState())?t:i.getVisibleMenuItemByIndex(0)},_getMenuItemByMenuId:function(n){for(var t,i=0;i<3;i++)if(t=this.menuItems[i].getMenuItemByMenuId(n),t)return t},_getFavMenuTarget:function(n){var t=this.menuItems[0].getMenuItemByMenuSeq(n.menuType),i;return t?(i=t.getMenuData(),new Promise(function(t,r){this.activateSection1Item(i).then(this._findTargetGroupData.bind(this,n)).then(this.activateSection2Item.bind(this)).then(this._findTargetMenuData.bind(this,n)).then(this._getCertainFavData.bind(this,n)).then(t).catch(r)}.bind(this))):Promise.reject()},_getEcPathFrom$Target:function(n){var t=ec$.parseElement(n);return ec$.parseEcPath(t.ecPath)},_findTargetGroupData:function(n){var t=this.menuItems[1].getMenuItemByGroupSeq(n.menuType,n.groupSeq);return!t||this._checkMenuFavByPrgID(n.prgId)?this._getMenuDataFromHash(n):t.getMenuData()},_findTargetMenuData:function(n){var t=this.menuItems[2].getMenuItemByPrgId(n.prgId),i;return t||(t=this._isNoLeftSpaceMenu(this._getMenuDataFromHash(n))?this.menuItems[1].getMenuItemByMenuUrl(n.menuUrl):this.menuItems[2].getMenuItemByMenuUrl(n.menuUrl)),t&&(i=t.getMenuDataAttrs()),i},_getCertainFavData:function(n,t){return t?Promise.resolve(_.extend(t,{FROM_FAVORITE:"Y"})):new Promise(function(t){this.menuItems[1].getGroupSeqByMenuSeq(n.menuType,n.menuSeq).then(function(t){return _.extend(this._getMenuDataFromHash(n),{GROUP_SEQ:t})}.bind(this)).then(function(n){t(_.extend(n,{FROM_FAVORITE:"Y"}))}).catch(function(){var i=this._getMenuDataFromHash(n);t(_.extend(i,{FROM_FAVORITE:"Y"}))}.bind(this))}.bind(this))},_getHashFromMenuData:function(n,t){for(var f=["MENU_TYPE","MENU_SEQ","GROUP_SEQ","PRG_ID","FROM_FAVORITE","FROM_MYPAGE","DEPTH","APPLICATION_VERSION"],r={},u=0,e=f.length,i;u<e;u++)i=f[u],$.isEmpty(n[i])||(r[i.ecCamelize()]=n[i]);return t&&n.MENU_URL&&(r.menuUrl=n.MENU_URL),r},_getMenuDataFromHash:function(n){var t={},r=/([A-Z])+/g;for(var i in n)t[i.replace(r,"_$&").toUpperCase()]=n[i];return t},_getHashStringFromHashData:function(n){var t="";for(var i in n)t+=[i,n[i]].join("=")+"&";return t.substring(0,t.length-2)},_getCurrentHashData:function(){var n=ecount.runtime.root.location.hash,t;if(n)return t=n.substring(1).split("&"),t.reduce(function(n,t){var i=t.split("=");return n[i[0]]=i[1],n},{})},_getUrlFromMenuData:function(n){var i=this._getHashFromMenuData(n),t=[ecount.common.buildSessionUrl(ecount.runtime.root.location.pathname),"#"].join("");return this._hasAdditionalHashParam(n)&&(t=[t,this._getAdditionalHashParam(n),"&"].join("")),t+this._getHashStringFromHashData(i)},_getRoutingMenuData:function(n){return!n.menuType||!n.groupSeq?Promise.reject():this._getRoutingDataAfterGroupLoad(n)},_getRoutingDataAfterGroupLoad:function(n){var t=this.menuItems[0].getMenuItemByMenuSeq(n.menuType),i,r,u;return t?(i=t.getMenuDataAttrs(),r=n.prgId==i.PRG_ID?this._getDefaultDepth2Group(i):this.menuItems[1].getMenuItemByGroupSeq(n.menuType,n.groupSeq),!r)?Promise.reject():(u=r.getMenuData(),this.activateSection1Item(t.getMenuData()).then(this.activateSection2Item.bind(this,u,!0)).then(function(){var t;return(t=this._getRoutingDataFromCurrentData(n))?Promise.resolve(t):Promise.reject()}.bind(this)).catch(function(n){console.log(n)})):Promise.reject()},_getRoutingDataFromCurrentData:function(n){for(var i,t,r=0,f=this.menuItems.length,u;r<f;r++)if(u=this.menuItems[r],t=u.getMenuItemByMenuSeq(n.menuSeq)){this._updateMenuDefaultTargetData(t);break}if(t)return i=t.getMenuData(),i.PRG_ID=this._getPagePrgId(i),i},_updateGroupDefaultUrl:function(n,t){var i=this.menuItems[2].getVisibleMenuItemByIndexFromCache(t.GROUP_SEQ,0),u,r,f;t.DEPTH!="1"||i||(r=this._getDefaultDepth2Group(t),r&&(f=r.getMenuDataAttrs(),i=this.menuItems[2].getMenuItemByPrgId(f.DEFAULT_PRG_ID),i||(i=this.menuItems[2].getVisibleMenuItemByIndexFromCache(r.getMenuSeq(),0))));i&&(u=this._getLeafSection3Item(i),n.setBodyUrl(u.BODY_URL),n.setDefaultChildPrgId(u.PRG_ID))},_updateMenuDefaultTargetData:function(n){var i=n.getMenuDataAttrs(),r=i.BODY_URL||"",u=!!["ECP100M.ASPX","ECP050M.ASPX"].find(function(n){return r.toUpperCase().indexOf(n)>-1}),t;this.menuItems[n.depth]&&u&&(t=this.menuItems[n.depth].getMenuItem(0),t=this._getLeafSection3Item(t),n.setBodyUrl(t.getBodyUrl()),n.setDefaultChildPrgId(t.getPrgId()));n.getBodyUrl()||this._updateGroupDefaultUrl(n,i)},_updateGroupDefaultUrl:function(n,t){var i=this.menuItems[2].getVisibleMenuItemByIndexFromCache(t.GROUP_SEQ,0),u,r,f;t.DEPTH!="1"||i||(r=this._getDefaultDepth2Group(t),r&&(f=r.getMenuDataAttrs(),i=this.menuItems[2].getMenuItemByPrgId(f.DEFAULT_PRG_ID),i||(i=this.menuItems[2].getVisibleMenuItemByIndexFromCache(r.getMenuSeq(),0))));i&&(u=this._getLeafSection3Item(i),n.setBodyUrl(u.BODY_URL),n.setDefaultChildPrgId(u.PRG_ID))},_getLeafSection3Item:function(n){var i,t;return n&&(t=n.getMenuDataAttrs(),t.DEFAULT_PRG_ID&&(i=n.getMenuItem(0),i&&(t=i.getMenuDataAttrs()))),t},_getPagePrgId:function(n){var t=n.DEPTH,i;for(t>=this.menuItems.length&&t--;this.menuItems[t];t++)i=this.menuItems[t].getMenuItemByPrgId(n.DEFAULT_PRG_ID),i&&(n=i.getMenuDataAttrs());return n.PRG_ID},_getPopupOpenOptions:function(n,t){var r="",i;return this._hasAdditionalHashParam(t)&&(r=this._getAdditionalHashParam(t)),i=ecount.common.buildSessionUrl(n),this._checkMenuFavByPrgID(t.PRG_ID)&&t.GROUP_SEQ&&(i=i+"&groupSeq="+t.GROUP_SEQ),{url:[i,r].join("#"),popupType:!0,name:t.MENU_NAME||"popup",additional:!0,isNotSetLayout:!0,notSubmitWindowOpen:!0,popupID:ecount.common.uuid(t.MENU_NAME||(new Date).getTime()),param:{responseID:this.callbackID,width:window.outerWidth||900,height:window.outerHeight-70||600,menuSeq:t.MENU_SEQ,prgId:t.DEFAULT_PRG_ID||t.PRG_ID}}},_getAdditionalHashParam:function(){var n=this._getCurrentHashData(),i="",t;delete n.menuType;delete n.menuSeq;delete n.groupSeq;for(t in n)i+=["&",t,"=",n[t]].join("");return i.substring(1)},_isNoLeftSpaceMenu:function(){return!1},_isClosingTypeMenu:function(){return!1},_isPopupMenu:function(){return!1},_setNavagatorClosingTimer:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.navMouseoutTimer);this.navMouseoutTimer=ecount.global.setTimeout(this.ecPageID,function(){this.closeNavigatorAction()}.bind(this),this.navMouseoutTimeout)},_hasToWaitDataLoad:function(){return!1},_hasAdditionalPopupParam:function(){return!1},_enableChildDraggable:function(n,t,i){n||i.enableDroppable();t||i.enableDraggable()},_disableChildRaggable:function(n,t,i){n||i.disableDroppable();t||i.disableDraggable()},openNavigatorAction:function(){this.setOptIsClosedState(!1,!0);this.setShowingDepth(this.getShowingDepth(),!0)},_showPrevDepth:function(){var i=+this.getState(this._IT_SELF,"style.showingDepth");if(prevDepth=i-1,prevDepth>1){var n=prevDepth-1,r=this.menuItems[n].getSelectedItem(),t=r.getMenuDataAttrs(),u=this.getSibilingsGroup(n,t);this.setSelectedDropdownGroup(u,t.PARENT_MENU_SEQ)}this.setShowingDepth(prevDepth)},closeNavigatorAction:function(){this.setOptIsClosedState(!0);this.setReadyToClosingNavigatorState(!1)},toggleNavigatorAction:function(){this.getOptIsClosedState()?this.openNavigatorAction():this.closeNavigatorAction()},_updateDefaultMenu:function(n){if(n.item)switch(n.item.DEPTH){case 2:case"2":this._updateDefaultDepth2Menu(n.item);break;case 3:case"3":case 4:case"4":this._updateDefaultDepth3Menu(n.item)}},_updateDefaultDepth2Menu:function(n){var f=this.menuItems[0].getMenuItemByMenuSeq(n.PARENT_MENU_SEQ),e=this.menuItems[0].getMenuItemByDefaultMenuSeq(n.MENU_SEQ),t=this.menuItems[1].getMenuGroupByGroupSeq(n.GROUP_SEQ),r,u,i;f&&t&&(r=f.getMenuData(),t.activateMenuByParent(r,r.POSITION));e&&(t&&(u=t.getVisibleMenuItemByIndex(0)),u&&(i=u.getMenuDataAttrs(),this.menuItems[0].updateDefaultMenu(e.getMenuId(),i.MENU_SEQ,i.PRG_ID,i.BODY_URL)))},_updateDefaultDepth3Menu:function(n){var r=this.menuItems[1].getMenuItemByDefaultMenuSeq(n.MENU_SEQ),i,t;r&&(i=this.menuItems[2].getVisibleMenuItemByIndex(0),i&&(t=this._getLeafSection3Item(i),this.menuItems[1].updateDefaultMenu(r.getMenuId(),t.MENU_SEQ,t.PRG_ID,t.BODY_URL)))},_updateParentMenu:function(n){if(n.item)switch(n.item.DEPTH){case 2:case"2":this._updateDepthTopMenuParent(n.item);break;case 3:case"3":case 4:case"4":this._updateDepthLeftMenuParent(n.item)}},_updateDepthTopMenuParent:function(n){var i=this.menuItems[0].getMenuItemByMenuSeq(n.MENU_TYPE),t,r;i&&(t=this.menuItems[1].getMenuGroupByGroupSeq(n.MENU_SEQ),t&&(r=t.getVisibleMenuItemCount(),r||i.hideFromMyMenu()))},_updateDepthLeftMenuParent:function(n){var t=this.menuItems[1].getMenuItemByMenuSeq(n.GROUP_SEQ),i;t&&(i=this.menuItems[2].getVisibleMenuItemCountFromCache(n.GROUP_SEQ),i||t.hideFromMyMenu())},menuClose:function(n,t){ecount.menuCommand.container.menuClose(this,n,t)},ON_MOUSEOVER:function(n,t,i,r){if(this.getState(this._IT_SELF,"opt.dragMode"))return!1;n.eventTriggerFromInternalTarget||this.setState(this._IT_SELF,"opt.hasCursor",!0);ecount.menuCommand.container.defaultMouseoverAction(this,n,t,r);ecount.menuCommand.container.mouseoverAction(this,n,t,r)},ON_MOUSEOUT:function(n,t,i,r){if(this.getState(this._IT_SELF,"opt.dragMode"))return!1;if(n.eventTriggerFromInternalTarget||this.setState(this._IT_SELF,"opt.hasCursor",!1),n.ecRole=="menu.navButton"){ecount.menuCommand.container.mouseoutNavButtonAction(this,n,t,r);return}this.losingFocusAction(n,t,r);ecount.menuCommand.container.mouseoutAction(this,n,t,r)},ON_CLICK:function(n,t,i,r){if(this.getState(this._IT_SELF,"opt.dragMode"))return!1;if(n.ecRole=="button.delete"){this._updateDefaultMenu(r);this._updateParentMenu(r);return}if(r.item)this.onClickActionHandler(n,t,r);if(n.ecFunction=="menu.button"){this.onButtonClickActionHandler(n,t,r);return}if(n.ecService==ecount.layer.constValue.SELECTBOX){this.onDropdownClickActionHandler(n,t,r);return}this.gettingFocusAction(n,t,r)},ON_CLICK_SERVICE:function(n,t,i,r){if(this.getState(this._IT_SELF,"opt.dragMode"))return!1;if(n.handler==ECountEvent.Type.CLICK_LAYER){var u=n.shiftKey?"newBrowser":n.ctrlKey?"newTab":"";this.dropdownGroupRoutingAction(r.selected.value,u)}},destroy:function(){ecount.runtime.stopObserving("menu.section1.selectItem",this.ecPageID);ecount.runtime.stopObserving("menu.section2.selectItem",this.ecPageID);ecount.runtime.stopObserving("menu.section2.deselectItem",this.ecPageID);ecount.runtime.stopObserving("menu.section1.selectItem",this.ecPageID)}},erp:{controlType:"widget.menuContainer.erp",viewName:"widget.view.menuContainer.erp",__mixins:["widget.menuContainer.common"],conDomain:null,nowDt:null,isMasterUser:null,menuUseFlag:null,isGroupWareFree:null,useStatus:null,maxUsers:null,freeExpireDate:null,expiredReceivedMail:null,isUseLeftToggleSwitch:null,isLeftMenuCollapsed:null,defaultBodyUrl:"/ECERP/ECP/ECP001M",initializeOptions:function(n){_.extend(this,{comInfo:n.comInfo,versionData:n.versionData,isUseLeftToggleSwitch:n.isUseLeftToggleSwitch,isLeftMenuCollapsed:n.isLeftMenuCollapsed,menuUseFlag:n.menuUseFlag,defaultBodyUrl:n.defaultBodyUrl||this.defaultBodyUrl,isGroupWareFree:n.isGroupWareFree,useStatus:n.useStatus,maxUsers:n.maxUsers,freeExpireDate:n.freeExpireDate,expiredReceivedMail:n.expiredReceivedMail,checkPublicMailNotAllowed:n.checkPublicMailNotAllowed||function(){return Promise.resolve(!0)},depth1MouseoverTimeout:ecount.common.mouseHoverInTime,depth2MouseoverTimeout:ecount.common.mouseHoverInTime,depth3MouseoutTimeout:ecount.common.mouseHoverOutTime});ecount.control.menu.container.prototype.initializeOptions.apply(this,arguments);this.onInitPreOpenLogic()},onInitContainerObserver:function(){ecount.runtime.observe(ECountEvent.Type.MOUSEDOWN_BODY,null,this.documentMousedownAction.bind(this));ecount.runtime.observe("resize",this.ecPageID,_.debounce(this.windowResizeAction.bind(this),300));ecount.runtime.observe("menu.section1.selectItem",this.ecPageID,this.restoreSection1Menu.bind(this));ecount.runtime.observe("menu.section2.updateMyPage",this.ecPageID,this.updateDepth1MyPage.bind(this));ecount.runtime.observingOnce("menu.section2.setMyPageData",this.ecPageID,function(n){this.menuItems[2].setMyPageData(n)}.bind(this));ecount.runtime.observe("menu.hoverModeRestore",this.ecPageID,this.hoverModeRestore.bind(this))},onInitPreOpenLogic:function(){this.preOpenLogicList=[{predicate:function(n){return this.isFreeAccessibleMenu(n)?Promise.resolve(!0):Promise.resolve(!1)}.bind(this),action:this.allowMenuAccessAction.bind(this)},{predicate:function(n){var t=n.MENU_TYPE==ecount.menu.myPageType&&[n.DEFAULT_PAGE_ID,n.PRG_ID].contains("E000128");return Promise.resolve(t)},action:this.notifyUserInfoLayer.bind(this)},{predicate:function(n){return Promise.resolve(this.isPublicMailMenu(n))}.bind(this),action:[{predicate:this.checkPublicMailNotAllowed,action:function(){return this.openPulbicMailAccessRightPopup(),this.blockMenuAccessAction()}.bind(this)},{predicate:function(){return Promise.resolve(this.expiredReceivedMail<7)}.bind(this),action:function(n){return this.expiredReceivedMail<0?(this.openExpiredReceivedMailPopup(),this.blockMenuAccessAction()):(this.openExpireAlertReceivedMailPopup(this.expiredReceivedMail),Promise.resolve(n.BODY_URL))}.bind(this)}]}]},updateDepth1MyPage:function(n){this.menuItems[0].updateMyPage(n)},dataLoadBeforeRoute:function(n){var t=this.menuItems[0].getMenuItemByMenuSeq(n.MENU_TYPE);return this.activateSection1Item(t.getMenuData()).then(function(){var t=n.DEPTH-1,i=this.menuItems[t].getMenuItemByMenuSeq(n.MENU_SEQ),r=i.getMenuDataAttrs();return Promise.resolve(r)}.bind(this))},renderItemsByParent:function(n,t){var i=n-1;return i!=2?Promise.reject():this.menuItems[i].renderMenuItemByParent(t)},renderDataProvidedItemOnly:function(n){var t,i;n.menuType&&(t=this.menuItems[0].getMenuItemByMenuSeq(n.menuType));n.menuType&&n.groupSeq&&(i=this.menuItems[1].getMenuItemByGroupSeq(n.menuType,n.groupSeq));new Promise(function(n,r){if(t&&i){this.activateSection1Item(t.getMenuData()).then(this.activateSection2Item.bind(this,i.getMenuData())).then(n).catch(r);return}this.menuItems[2].setEmpty();ecount.menuCommand.container.renderNoSection3Menu(this);n()}.bind(this)).then(function(){var t=this.menuItems[2].getMenuItemByBodyUrlFromCache(n.menuUrl);if(t){ecount.menuCommand.container.renderClickedUIAnimation(this,3,t.getMenuDataAttrs());return}this.menuItems[2].deactivateNotClickedMenu({})}.bind(this))},isRedirectMenu:function(n){return["123","130","145","149","154","759"].contains(""+n.MENU_SEQ)},isRedirectTempMenu:function(n){return["2771"].contains(""+n.MENU_SEQ)},isFreeAccessibleMenu:function(n){return["/ECERP/SVC/EGJ/EGJ006M","/ECMAIN/EGM/EGM003M.ASPX","/ECERP/EGM/EGM014M","/ECERP/EGM/EGM017R","/ECERP/EGM/EGM018R","/ECMAIN/EGM/EGM_SEARCH_01_MAIN.ASPX?RPTGUBUN=3","/ECERP/EGM/EGM020R","/ECERP/EGM/EGM038R","/ECERP/EGM/EGM024M?MENU_TYPE=S&BOARD_CD=1000",].contains(n.BODY_URL.toUpperCase())},isPublicMailMenu:function(n){return n.MENU_SEQ==1980||n.PRG_ID.indexOf("E0770")==0||n.DEFAULT_PRG_ID&&n.DEFAULT_PRG_ID.indexOf("E0770")==0},isGroupwareMenu:function(n){var t=n.MENU_TYPE==ecount.menu.myPageType&&(n.PRG_ID.indexOf("E07")==0||n.DEFAULT_PRG_ID&&n.DEFAULT_PRG_ID.indexOf("E07")==0),i=n.MENU_TYPE==ecount.menu.gwType&&n.MENU_CD.indexOf("M07")==0;return t||i},openPulbicMailAccessRightPopup:function(){ecount.popup.openWindow({url:ecount.common.buildSessionUrl("/ECERP/SVC/PBM/PBM_AccountManagement_01"),popupType:!1,popupID:"PBM_AccountManagement_01",param:{responseID:this.callbackID,width:800,height:700}})},openExpiredReceivedMailPopup:function(){ecount.popup.openWindow({url:ecount.common.buildSessionUrl("/ECERP/ECU/ECU520M"),param:{width:1020,height:730},popupType:!1,popupFlag:!0})},openExpireAlertReceivedMailPopup:function(n){var t=$.cookie("ECU520P_02_NOSHOW");t!="SET"&&ecount.popup.openWindow({url:ecount.common.buildSessionUrl("/ECERP/SVC/ECU/ECU520P_02"),param:{width:500,height:500,RemainDays:n},popupType:!1,popupFlag:!0})},notifyMenuCollapsed:function(){this.mouseoverTimer=ecount.global.setTimeout(this.ecPageID,function(){var n=this.menuItems.any(function(n){return n.hasFocus()});!this.menuItems[2].getUseFlippedState()||this.hasFocus()||n||(this.menuItems[2].setFlippedState(!0),ecount.runtime.notify("menu.leftMenuToggle",this.ecPageID,!0))}.bind(this),this.mouseoverTimeout)},notifyMenuExpanded:function(){ecount.global.clearTimeout(this.ecPageID,this.mouseoverTimer);this.menuItems[2].setFlippedState(!1);ecount.runtime.notify("menu.leftMenuToggle",this.ecPageID,!1)},notifyUserInfoLayer:function(){return ecount.runtime.notify("menu.openUserInfo",this.ecPageID,{ecPageID:this.ecPageID}),Promise.reject()},moveToDefaultPage:function(){},destroy:function(){ecount.runtime.stopObserving(ECountEvent.Type.MOUSEDOWN_BODY);ecount.runtime.stopObserving("menu.section1.selectItem",this.ecPageID);ecount.runtime.stopObserving("menu.section2.selectItem",this.ecPageID);ecount.runtime.stopObserving("menu.section2.deselectItem",this.ecPageID);ecount.runtime.stopObserving("menu.section2.updateMyPage",this.ecPageID);ecount.runtime.stopObserving("menu.section2.setMyPageData",this.ecPageID)},_getSection3Data:function(){return[]},_getSection2Data:function(n,t,i){return this._selectDataFromSource(n._dataItems,function(n){return n.DEPTH=="2"},this._getDepth2Data.bind(this,i))},_getDepth2Data:function(n,t){return t},_getSection1Data:function(n,t,i){return this._selectDataFromSource(n._dataItems,function(n){return n.DEPTH=="1"},this._getDepth1Data.bind(this,i))},_getDepth1Data:function(n,t){if(!t.MENU_URL){var i=n.head(function(n){return n.MENU_SEQ==t.DEFAULT_MENU_SEQ});i||(i=n.head(function(n){return n.PARENT_MENU_SEQ==t.MENU_SEQ}));i&&(t.MENU_URL=i.MENU_URL,t.GROUP_SEQ=i.MENU_SEQ)}return t},_getSection1GeneratorOption:function(){return["widget.menuSection.erpDepth1","menuSection1","menuSection1"]},_getSection2GeneratorOption:function(){return["widget.menuSection.erpDepth2","menuSection2","menuSection2"]},_getSection3GeneratorOption:function(){return["widget.menuSection.erpDepth3","menuSection3","menuSection3"]},_getSection3Options:function(){return{hidden:!location.hash,isUseToggleSwitch:this.isUseLeftToggleSwitch,isMenuCollapsed:this.isLeftMenuCollapsed}},_getContainerData:function(){return{ecPageID:this.ecPageID,delegator:this.delegator,comInfo:this.comInfo,versionData:this.versionData,isMasterUser:this.isMasterUser,menuUseFlag:this.menuUseFlag}},_getMenuRoutingParam:function(n,t){return{PRG_ID:t.PRG_ID,FROM_FAVORITE:n.fromFavorite=="Y"?"Y":"N",FROM_MYPAGE:n.menuType==ecount.menu.myPageType?"Y":"N"}},_getRoutingMenuData:function(n){return n.menuType==ecount.menu.myPageType?this._getRoutingDataAfterMyPageLoad(n):!n.menuType||!n.groupSeq?Promise.reject("no menuType or no group seq. check the hashData"):this._getRoutingDataAfterGroupLoad(n)},_getRoutingDataAfterMyPageLoad:function(n){var t=this.menuItems[0].getMenuItemByMenuSeq(n.menuType);return this.activateSection1Item(t.getMenuData()).then(function(t){var i=+n.groupSeq?n.groupSeq:t.GROUP_SEQ;return this.menuItems[1].getMenuItemByGroupSeq(n.menuType,i)}.bind(this)).then(function(n){return this.activateSection2Item(n.getMenuData())}.bind(this)).then(function(){var t;return(t=this._getRoutingDataFromCurrentData(n))?Promise.resolve(t):Promise.reject()}.bind(this))},_isNoLeftSpaceMenu:function(n){return[].contains(n.PRG_ID)&&n.MENU_TYPE!=ecount.menu.myPageType},_isClosingTypeMenu:function(n){return["118","225"].contains(""+n.DEFAULT_MENU_SEQ)},_selectDataFromSource:function(n,t,i){for(var f=[],r=0,e=n.length,u;r<e;r++)u=n[r],t(u)&&f.push(i(u));return f},_hasAdditionalHashParam:function(n){return["C000904","E090215","E090216","C000905","E090180","E090181","E090199","C000906","E090182","E090184","E090196","E090174","E090195","E090178"].contains(n.PRG_ID)},_checkMenuFavByPrgID:function(n){return["E010101","E010110","E010112"].contains(n)},_hasToWaitDataLoad:function(n){return!!(n.MENU_SEQ==6&&!n.BODY_URL)}},erpMyPageOnly:{controlType:"widget.menuContainer.erpMyPageOnly",viewName:"widget.view.menuContainer.erpMyPageOnly",__mixins:["widget.menuContainer.common","widget.menuContainer.erp"],moveToDefaultPage:function(){var n=this.menuItems[0].getMenuItemByMenuSeq(ecount.menu.myPageType),t=n.getMenuData();this.menuItems[1].activateMenuByParent(t).then(function(){this.menuItems[1].deactivateNotClickedMenu({})}.bind(this));ecount.runtime.observingOnce("menu.section2.setMyPageData",this.ecPageID,function(){var t=this.menuItems[1].getMenuItemByGroupSeq(ecount.menu.myPageType,n.getMenuData().GROUP_SEQ),i;t&&(i=t.getMenuData(),ecount.menuCommand.container.renderDefultGroupAction(this,i))}.bind(this))},runOpenFavMenuProcess:function(n,t){var i=this.menuItems[0].getMenuItemByMenuSeq(ecount.menu.myPageType),r=i.getMenuData();if(t=="favNewTab"){this.runOpenFavNewTabProcess(this._getMenuDataFromHash(n));return}this.menuItems[1].activateMenuByParent(r).then(this._getFavMenuTarget.bind(this,n)).then(this.routeToFavMenu.bind(this,t)).catch(function(){this.routeAction(this._getMenuDataFromHash(n),t)}.bind(this))},_getSection1GeneratorOption:function(){return["widget.menuSection.erpMyPageOnlyDepth1","menuSection1","menuSection1"]},_getSection2GeneratorOption:function(){return["widget.menuSection.erpMyPageOnlyDepth2","menuSection2","menuSection2"]},_getSection3GeneratorOption:function(){return["widget.menuSection.erpMyPageOnlyDepth3","menuSection3","menuSection3"]},_getSection3Options:function(){return{isUseToggleSwitch:this.isUseLeftToggleSwitch,isMenuCollapsed:this.isLeftMenuCollapsed}},_getFavMenuTarget:function(n){return new Promise(function(t,i){var r,u,f;if(n.myPageGroupSeq==ecount.menu.noChildMyPageUrl?(r=ecount.menu.scType,u=n.groupSeq):(r=ecount.menu.myPageType,u=n.myPageGroupSeq),f=this.menuItems[1].getMenuItemByGroupSeq(r,u),!f)return t(this._getMenuDataFromHash(n));this.activateSection2Item(f.getMenuData()).then(this._findTargetMenuData.bind(this,n)).then(this._getCertainFavData.bind(this,n)).then(t).catch(i)}.bind(this))}},cs:{controlType:"widget.menuContainer.cs",viewName:"widget.view.menuContainer.cs",__mixins:["widget.menuContainer.common","widget.menuContainer.erp","widget.menuContainer.erpMyPageOnly"],defaultBodyUrl:"/ECErp/contents/pages/UI.Service/ECP/Views/blank.html",initializeOptions:function(n){_.extend(this,{comInfo:n.comInfo,versionData:n.versionData,isUseLeftToggleSwitch:n.isUseLeftToggleSwitch,isLeftMenuCollapsed:n.isLeftMenuCollapsed,defaultBodyUrl:n.defaultBodyUrl||this.defaultBodyUrl,isGroupWareFree:n.isGroupWareFree,useStatus:n.useStatus,maxUsers:n.maxUsers,freeExpireDate:n.freeExpireDate,depth1MouseoverTimeout:ecount.common.mouseHoverInTime,depth2MouseoverTimeout:ecount.common.mouseHoverInTime,depth3MouseoutTimeout:ecount.common.mouseHoverOutTime});ecount.control.menu.container.prototype.initializeOptions.apply(this,arguments);this.onInitPreOpenLogic()},_getSection1GeneratorOption:function(){return["widget.menuSection.csDepth1","menuSection1","menuSection1"]},_getSection2GeneratorOption:function(){return["widget.menuSection.csDepth2","menuSection2","menuSection2"]},_getSection3GeneratorOption:function(){return["widget.menuSection.csDepth3","menuSection3","menuSection3"]},_getSection3Options:function(){return{hidden:!1,isUseToggleSwitch:this.isUseLeftToggleSwitch,isMenuCollapsed:this.isLeftMenuCollapsed}},getDropdownGroupTarget:function(n){var i,t;return n.DEPTH>2?t=this.menuItems[1].getMenuItemByGroupSeq(n.MENU_TYPE,n.GROUP_SEQ):(i=n.PARENT_MENU_SEQ==ecount.menu.myPageSubMenuSeq?ecount.menu.myPageType:n.PARENT_MENU_SEQ,t=this.menuItems[0].getMenuItemByMenuSeq(i)),t},isFreeAccessibleMenu:function(n){return["/ECERP/CSA/CSA_EGM024M?MENU_TYPE=S&BOARD_CD=1000",].contains(n.BODY_URL.toUpperCase())},onAfterRender:function(){var n=$.url().ecHash,t=this.menuItems[0].getMenuItemByMenuSeq(ecount.menu.myPageType);ecount.control.menu.container.prototype.onAfterRender.apply(this,arguments);this.onInitContainerObserver();this.menuItems[1].activateMenuByParent(t.getMenuData(),!0);ecount.runtime.observingOnce("menu.section2.setMyPageData",this.ecPageID,function(){n.menuType?this.runMenuChangeProcess(n):this.moveToDefaultPage()}.bind(this))},moveToDefaultPage:function(){var r=this.menuItems[0].getMenuItemByMenuSeq(ecount.menu.myPageType),t=r.getMenuData(),i=this.menuItems[1].getMenuItemByGroupSeq(ecount.menu.myPageType,t.GROUP_SEQ),n;i?(n=i.getMenuData(),ecount.menuCommand.container.renderDefultGroupAction(this,n).then(this.activateSection1Item.bind(this,t,!0)).then(this.activateSection2Item.bind(this,n,!0)).then(ecount.menuCommand.container.renderSection3ClickedUI.bind(this,this,n,n.BODY_URL)),ecount.router.go({url:n.BODY_URL})):ecount.router.go({url:this.defaultBodyUrl})},routeToFavMenu:function(n,t){var i=this._getHashFromMenuData(t,!0);this._getRoutingMenuData(i).then(function(){this.routeAction(t,n)}.bind(this)).catch(function(){this.routeAction(t,n)}.bind(this))},_getRoutingMenuData:function(n){var t=this.menuItems[0].getMenuItemByMenuSeq(ecount.menu.myPageType);return n.menuType||(n.menuType=ecount.menu.myPageType),new Promise(function(i,r){this.menuItems[1].activateMenuByParent(t.getMenuData(),!0).then(function(){var t,u;return(n.menuUrl&&(t=this.menuItems[2].getMenuItemByMenuUrl(n.menuUrl),t&&(u=t.getMenuDataAttrs(),n.groupSeq=u.GROUP_SEQ,n.menuSeq=u.MENU_SEQ)),!n.groupSeq)?r():this._getRoutingDataAfterGroupLoad(n).then(i).catch(r)}.bind(this))}.bind(this))},_getRoutingDataAfterGroupLoad:function(n){var t=this.menuItems[0].getMenuItemByMenuSeq(ecount.menu.myPageType);return new Promise(function(i,r){this.activateSection1Item(t.getMenuData()).then(function(){var t=this.menuItems[1].getMenuItemByGroupSeq(n.menuType,n.groupSeq);return t?this.activateSection2Item(t.getMenuData(),!0):r()}.bind(this)).then(function(){var t;if(t=this._getRoutingDataFromCurrentData(n))return i(t);r()}.bind(this)).catch(r)}.bind(this))}},webMail:{controlType:"widget.menuContainer.webMail",viewName:"widget.view.menuContainer.webMail",__mixins:["widget.menuContainer.common","widget.menuContainer.erp","widget.menuContainer.erpMyPageOnly"],defaultBodyUrl:"/WMAIL/Mail/GetListMessages?MBoxName=INBOX",containerID:"",defaultPageUrl:"",initializeOptions:function(n){_.extend(this,{containerID:n.containerID,isUseLeftToggleSwitch:n.isUseLeftToggleSwitch,isLeftMenuCollapsed:n.isLeftMenuCollapsed,defaultPageUrl:n.defaultPageUrl,defaultPageQueryString:n.defaultPageQueryString,depth1MouseoverTimeout:ecount.common.mouseHoverInTime,depth2MouseoverTimeout:ecount.common.mouseHoverInTime,depth3MouseoutTimeout:ecount.common.mouseHoverOutTime});ecount.control.menu.container.prototype.initializeOptions.apply(this,arguments);this.onInitPreOpenLogic()},onInitContainerObserver:function(){ecount.runtime.observe(ECountEvent.Type.MOUSEDOWN_BODY,this.ecPageID,this.documentMousedownAction.bind(this));ecount.runtime.observe("resize",this.containerID,_.debounce(this.windowResizeAction.bind(this),300));ecount.runtime.observe("menu.section2.updateMyPage",this.ecPageID,this.updateDepth1MyPage.bind(this));ecount.runtime.observingOnce("menu.section2.setMyPageData",this.ecPageID,function(n){this.menuItems[2].setMyPageData(n)}.bind(this));ecount.runtime.observe("menu.section3.renewItem",this.ecPageID,this._updateDepth3MenuItem.bind(this))},runPreOpenLogic:function(n,t){var i=t.BODY_URL,r,u;return(r=this.menuItems[2].getMenuItemByBodyUrl(i))?(u=r.getMenuItemByBodyUrl(i),u)?Promise.resolve(u.getBodyUrl()):Promise.resolve(r.getBodyUrl()):Promise.resolve(i)},updateDefaultMailBox:function(n,t,i){var r=this.menuItems[1].getMenuItemByMenuId(n);r||(r=this.menuItems[2].getMenuItemByMenuId(n));r&&(r.setDefaultChildPrgId(t),r.setBodyUrl(i))},onAfterRender:function(){var t=$.url(),n=t.ecHash,i=this.menuItems[0].getMenuItemByMenuSeq(ecount.menu.myPageType);ecount.control.menu.container.prototype.onAfterRender.apply(this,arguments);this.onInitContainerObserver();this.menuItems[1].activateMenuByParent(i.getMenuData(),!0);ecount.runtime.observingOnce("menu.section2.setMyPageData",this.ecPageID,function(){if(this.defaultPageUrl){var i=this.menuItems[2].getMenuItemByBodyUrlFromCache(this.defaultPageUrl),t=i&&i.getMenuDataAttrs();t&&(n=this._getHashFromMenuData(t),this.defaultPageQueryString&&this.defaultPageQueryString.split("&").reduce(function(n,t){var i;return t.indexOf("?")===0&&(t=t.slice(1)),i=t.split("="),n[i.shift()]=i.shift(),n},n),this.replaceCurrentHashState(t))}n.menuType?this.runMenuChangeProcess(n):this.moveToDefaultPage()}.bind(this))},_getPopupOpenOptions:function(n,t){var r="",i;return this._hasAdditionalHashParam(t)&&(r=this._getAdditionalHashParam(t)),i=ecount.common.buildSessionUrl(n),this._checkMenuFavByPrgID(t.PRG_ID)&&t.GROUP_SEQ&&(i=i+"&groupSeq="+t.GROUP_SEQ),{url:[i,r].join("#"),popupType:!0,name:t.MENU_NAME||"popup",additional:!0,isNotSetLayout:!0,isChangePopupType:!1,popupID:ecount.common.uuid(t.MENU_NAME||(new Date).getTime()),param:{responseID:this.callbackID,width:window.outerWidth||900,height:window.outerHeight-70||600,menuSeq:t.MENU_SEQ,prgId:t.DEFAULT_PRG_ID||t.PRG_ID}}},moveToDefaultPage:function(){var r=this.menuItems[0].getMenuItemByMenuSeq(ecount.menu.myPageType),i=r.getMenuData(),t=this.menuItems[1].getMenuItemByGroupSeq(ecount.menu.myPageType,i.GROUP_SEQ),n;t&&(n=t.getMenuData(),ecount.menuCommand.container.renderDefultGroupAction(this,n).then(this.activateSection1Item.bind(this,i,!0)).then(this.activateSection2Item.bind(this,n,!0)).then(function(){this.setSelectedDropdownGroup(this.getSibilingsGroup(1,t),n.MENU_ID);this.replaceCurrentHashState(n);ecount.menuCommand.container.renderSection3ClickedUI.bind(this,this,n,n.BODY_URL)}.bind(this)),ecount.router.go({url:n.BODY_URL}))},replaceCurrentHashState:function(n){var t=ecount.getParentFrame(window),i=this._getHashStringFromHashData(this._getHashFromMenuData(n)),r=[location.href.split("#")[0],"#",i].join("");history.pushState?t.history.replaceState(null,n.MENU_NAME,r):t.location.hash=i},setCountLabelOfMenuItem:function(n,t){var i=this._getMenuItemByMenuId(n);i&&i.updateCountLabel(t)},showUsageContainer:function(){this.menuItems[2].toggleUsageContainer(!0)},hideUsageContainer:function(){this.menuItems[2].toggleUsageContainer(!1)},setUsagePercentage:function(n){this.menuItems[2].setUsagePercentage(n)},setUsageValue:function(n){this.menuItems[2].setUsageValue(n)},setDomainUsageValue:function(n){this.menuItems[2].setDomainUsageValue(n)},setDomainUsagePercentage:function(n){this.menuItems[2].setDomainUsagePercentage(n)},_getMenuRoutingParam:function(n){var t={};for(var i in n)t[i]=n[i];return t},_getHashStringFromHashData:function(n){var t="";for(var i in n)t+=[i,n[i]].join("=")+"&";return t.substring(0,t.length-1)},_updateDepth3MenuItem:function(n){var o=this._getCurrentHashData(),i,u,s,h,r,c,f,e,t;if(o?(u=this._getMenuDataFromHash(o),i=this.menuItems[1].getMenuItemByGroupSeq(u.MENU_TYPE,u.GROUP_SEQ)):(s=this.menuItems[0].getMenuItemByMenuSeq(ecount.menu.myPageType),h=s.getMenuData(),i=this.menuItems[1].getMenuItemByGroupSeq(ecount.menu.myPageType,h.GROUP_SEQ)),i)for(r=0,c=this.menuItems[1].getChildrenCount();r<c;r++)for(f=this.menuItems[1].getMenuItem(r),e=0,t=f.getMenuItem(e);t;t=f.getMenuItem(++e))this.menuItems[2].renewMenuItemsByParent(t.getMenuDataAttrs(),n,!!(t.getMenuId()==i.getMenuId()))},_getSection1GeneratorOption:function(){return["widget.menuSection.webMailDepth1","menuSection1","menuSection1"]},_getSection2GeneratorOption:function(){return["widget.menuSection.webMailDepth2","menuSection2","menuSection2"]},_getSection3GeneratorOption:function(){return["widget.menuSection.webMailDepth3","menuSection3","menuSection3"]},_getSection3Options:function(n){return{isUseToggleSwitch:this.isUseLeftToggleSwitch,isMenuCollapsed:this.isLeftMenuCollapsed,percentage:n.percentage,usage:n.usage,domainUsage:n.domainUsage,domainPercentage:n.domainPercentage,isViewDomain:n.isViewDomain,isViewUsage:n.isViewUsage}},_isPopupMenu:function(n){return n&&n.IS_POPUP_MENU=="Y"},_updateMenuDefaultUrl:function(){},_showPrevDepth:function(){var n=+this.getState(this._IT_SELF,"style.showingDepth");prevDepth=1;groupDepth=0;selected=this.menuItems[groupDepth].getSelectedItem();selectedData=selected.getMenuDataAttrs();group=this.getSibilingsGroup(groupDepth,selectedData);this.setSelectedDropdownGroup(group,selectedData.PARENT_MENU_SEQ);this.setShowingDepth(prevDepth)},getSibilingsGroup:function(n,t){var i=this.menuItems[1].getMenuItem(0).getSibilingsGroup(t.MENU_ID);return i.map(function(n){return _.extend(n,{value:n.MENU_ID,label:n.MENU_NAME})})},ON_MOUSEOVER:function(n){n.eventTriggerFromInternalTarget||this.setState(this._IT_SELF,"opt.hasCursor",!0)},ON_MOUSEOUT:function(n){n.eventTriggerFromInternalTarget||this.setState(this._IT_SELF,"opt.hasCursor",!1)},destroy:function(){ecount.runtime.stopObserving(ECountEvent.Type.MOUSEDOWN_BODY,this.ecPageID);ecount.runtime.stopObserving("menu.section1.selectItem",this.ecPageID);ecount.runtime.stopObserving("menu.section2.selectItem",this.ecPageID);ecount.runtime.stopObserving("menu.section2.updateMyPage",this.ecPageID);ecount.runtime.stopObserving("menu.section2.setMyPageData",this.ecPageID);ecount.runtime.stopObserving("menu.section3.renewItem",this.ecPageID)}},invoice:{controlType:"widget.menuContainer.invoice",viewName:"widget.view.menuContainer.invoice",__mixins:["widget.menuContainer.common","widget.menuContainer.erp","widget.menuContainer.erpMyPageOnly"],defaultPageUrl:"",containerID:"",initializeOptions:function(n){_.extend(this,{containerID:n.containerID,defaultPageUrl:n.defaultPageUrl,defaultPageQueryString:n.defaultPageQueryString,depth1MouseoverTimeout:ecount.common.mouseHoverInTime,depth2MouseoverTimeout:ecount.common.mouseHoverInTime,depth3MouseoutTimeout:ecount.common.mouseHoverOutTime});ecount.control.menu.container.prototype.initializeOptions.apply(this,arguments);this.onInitPreOpenLogic()},onInitContainerObserver:function(){ecount.runtime.observe(ECountEvent.Type.MOUSEDOWN_BODY,this.ecPageID,this.documentMousedownAction.bind(this));ecount.runtime.observe("resize",this.containerID,_.debounce(this.windowResizeAction.bind(this),300));ecount.runtime.observe("menu.section2.updateMyPage",this.ecPageID,this.updateDepth1MyPage.bind(this));ecount.runtime.observingOnce("menu.section2.setMyPageData",this.ecPageID,function(n){this.menuItems[2].setMyPageData(n)}.bind(this))},onAfterRender:function(){var t=$.url(),n=t.ecHash,i=this.menuItems[0].getMenuItemByMenuSeq(ecount.menu.myPageType);ecount.control.menu.container.prototype.onAfterRender.apply(this,arguments);this.onInitContainerObserver();this.menuItems[1].activateMenuByParent(i.getMenuData(),!0);ecount.runtime.observingOnce("menu.section2.setMyPageData",this.ecPageID,function(){if(this.defaultPageUrl){var i=this.menuItems[2].getMenuItemByBodyUrlFromCache(this.defaultPageUrl),t=i&&i.getMenuDataAttrs();t&&(n=this._getHashFromMenuData(t),this.replaceCurrentHashState(t))}n.menuType?this.runMenuChangeProcess(n):this.moveToDefaultPage()}.bind(this))},moveToDefaultPage:function(){var r=this.menuItems[0].getMenuItemByMenuSeq(ecount.menu.myPageType),i=r.getMenuData(),t=this.menuItems[1].getMenuItemByGroupSeq(ecount.menu.myPageType,i.GROUP_SEQ),n;t&&(n=t.getMenuData(),ecount.menuCommand.container.renderDefultGroupAction(this,n).then(this.activateSection1Item.bind(this,i,!0)).then(this.activateSection2Item.bind(this,n,!0)).then(function(){this.setSelectedDropdownGroup(this.getSibilingsGroup(1,t),n.MENU_ID);this.replaceCurrentHashState(n);ecount.menuCommand.container.renderSection3ClickedUI.bind(this,this,n,n.BODY_URL)}.bind(this)),ecount.router.go({url:n.BODY_URL}))},replaceCurrentHashState:function(n){var t=ecount.getParentFrame(window),i=this._getHashStringFromHashData(this._getHashFromMenuData(n)),r=[location.href,"#",i].join("");history.pushState?t.history.replaceState(null,n.MENU_NAME,r):t.location.hash=i},_getMenuRoutingParam:function(n){var t={};for(var i in n)t[i]=n[i];return t},_getHashStringFromHashData:function(n){var t="";for(var i in n)t+=[i,n[i]].join("=")+"&";return t.substring(0,t.length-1)},_getSection1GeneratorOption:function(){return["widget.menuSection.invoiceDepth1","menuSection1","menuSection1"]},_getSection2GeneratorOption:function(){return["widget.menuSection.invoiceDepth2","menuSection2","menuSection2"]},_getSection3GeneratorOption:function(){return["widget.menuSection.invoiceDepth3","menuSection3","menuSection3"]},_updateMenuDefaultUrl:function(){},_showPrevDepth:function(){var n=+this.getState(this._IT_SELF,"style.showingDepth");prevDepth=1;groupDepth=0;selected=this.menuItems[groupDepth].getSelectedItem();selectedData=selected.getMenuDataAttrs();group=this.getSibilingsGroup(groupDepth,selectedData);this.setSelectedDropdownGroup(group,selectedData.PARENT_MENU_SEQ);this.setShowingDepth(prevDepth)},getSibilingsGroup:function(n,t){var i=this.menuItems[1].getMenuItem(0).getSibilingsGroup(t.MENU_ID);return i.map(function(n){return _.extend(n,{value:n.MENU_ID,label:n.MENU_NAME})})},ON_MOUSEOVER:function(n){n.eventTriggerFromInternalTarget||this.setState(this._IT_SELF,"opt.hasCursor",!0)},ON_MOUSEOUT:function(n){n.eventTriggerFromInternalTarget||this.setState(this._IT_SELF,"opt.hasCursor",!1)},destroy:function(){ecount.runtime.stopObserving(ECountEvent.Type.MOUSEDOWN_BODY,this.ecPageID);ecount.runtime.stopObserving("menu.section1.selectItem",this.ecPageID);ecount.runtime.stopObserving("menu.section2.selectItem",this.ecPageID);ecount.runtime.stopObserving("menu.section2.updateMyPage",this.ecPageID);ecount.runtime.stopObserving("menu.section2.setMyPageData",this.ecPageID);ecount.runtime.stopObserving("menu.section3.renewItem",this.ecPageID)}},userpay:{controlType:"widget.menuContainer.userpay",viewName:"widget.view.menuContainer.userpay",__mixins:["widget.menuContainer.common","widget.menuContainer.erp","widget.menuContainer.erpMyPageOnly"],defaultBodyUrl:"/ECErp/contents/pages/UI.Service/ECP/Views/blank.html",_getSection1GeneratorOption:function(){return["widget.menuSection.userpayDepth1","menuSection1","menuSection1"]},_getSection2GeneratorOption:function(){return["widget.menuSection.userpayDepth2","menuSection2","menuSection2"]},_getSection3GeneratorOption:function(){return["widget.menuSection.userpayDepth3","menuSection3","menuSection3"]},onAfterRender:function(){var n=$.url().ecHash,t=this.menuItems[0].getMenuItemByMenuSeq(ecount.menu.myPageType);ecount.control.menu.container.prototype.onAfterRender.apply(this,arguments);this.onInitContainerObserver();this.menuItems[1].activateMenuByParent(t.getMenuData(),!0);ecount.runtime.observingOnce("menu.section2.setMyPageData",this.ecPageID,function(){n.menuType?this.runMenuChangeProcess(n):this.moveToDefaultPage()}.bind(this))},moveToDefaultPage:function(){var r=this.menuItems[0].getMenuItemByMenuSeq(ecount.menu.myPageType),t=r.getMenuData(),i=this.menuItems[1].getMenuItemByDefaultMenuSeq(t.DEFAULT_MENU_SEQ),n;i&&(n=i.getMenuData(),ecount.menuCommand.container.renderDefultGroupAction(this,n).then(this.activateSection1Item.bind(this,t,!0)).then(this.activateSection2Item.bind(this,n,!0)).then(function(){this.renderSection3ItemAction(n,n.BODY_URL);this.setShowingDepth(3)}.bind(this)),ecount.router.go({url:n.BODY_URL}))},windowResizeAction:function(){var n=$.url().ecHash;_.isEmpty(n)||this._getRoutingMenuData(n).then(function(n){n&&this.renderChangedMenu(n)}.bind(this))},_getContainerData:function(n){return{ecPageID:this.ecPageID,delegator:this.delegator,comInfo:this.comInfo,empInfo:n.empInfo,nowDt:n.nowDt,versionData:this.versionData}},_getRoutingMenuData:function(n){return n.menuType||(n.menuType=ecount.menu.myPageType),n.groupSeq||(n.groupSeq=this.menuItems[1].getMenuItemByGroupSeq(ecount.menu.noChildMyPageUrl)),this._getRoutingDataAfterGroupLoad(n)}},create:function(n){var t,u,f,i,r,e,o,s;if(n=n||"_default",t=widget.menuContainer.repository[n]||{},u=ecount.control.menu.container,widget.menuContainer._baseLoaded||(ecount.control.loadRepository(ecount.control.menu.container,ecount.control.view.menu.container,"widget.menuContainer"),n!="_default")){if(arguments.length>1){ecount.control.mountMixinWidget(widget.menuContainer,t,"widget.menuContainer",[].slice.call(arguments,0));return}if(t.__inheritParent&&~t.__inheritParent.indexOf("widget.menuContainer")){f=t.controlType.replace("widget.menuContainer.","");ecount.control.mountMixinWidget(widget.menuContainer,t,"widget.menuContainer",[widget.menuContainer,f]);return}if(!widget.menuContainer[n]){if(u=t.__inheritParent?ecount.common.createNamespace(t.__inheritParent):widget.menuContainer,t.__mixins){for(i={},r=0,e=t.__mixins.length;r<e;r++)o=t.__mixins[r].split("."),s=widget.menuContainer.repository[o.pop()],i=_.extend(i,s);t=_.extend(i,t)}ecount.control.mountWidget(widget.menuContainer,n,u,t)}}}}};widget.menuSection={};widget.menuSection._baseLoaded=!1;widget.menuSection._export=function(){return{_default:{createView:function(){return this.ecview=new widget.view.menuSection}},common:{controlType:"widget.menuSection.common",comInfo:null,menuUseFlag:null,paramRequesting:null,sectionMouseoverTimer:null,sectionMouseoutTimer:null,listMouseoverTimer:null,listMouseoutTimer:null,editGuideUpdateTimer:null,sectionMouseoverTimeout:ecount.common.mouseHoverInTime,sectionMouseoutTimeout:ecount.common.mouseHoverOutTime,listMouseoverTimeout:ecount.common.mouseHoverInTime,listMouseoutTimeout:700,editGuideUpdateTimeout:null,cachedItems:null,versionData:null,depth:"",setEcPath:function(){this.ecPath=[this.ecPageID,"menu","","section"+this.depth,"",this.id,this.pcid].join(ecount.separator.ecPath)},initializeOptions:function(n,t){this.onInitDefaultSectionOptions(n,t);this.onInitAdditionalSectionOptions(n,t);ecount.control.menu.section.prototype.initializeOptions.apply(this,arguments);this.onInitSectionObserver()},onInitDefaultSectionOptions:function(n){if(_.extend(this,{cachedItems:{},comInfo:n.comInfo,versionData:n.versionData,isMasterUser:n.isMasterUser,menuUseFlag:n.menuUseFlag}),this.delegator&&this.depth===3)this.delegator.on({"section.menuPanelClose":this.menuPanelClose.bind(this)})},menuPanelClose:function(){this.setState(this._IT_SELF,"opt.hasCursor",!1);this.getUseFlippedState()&&this._notifyMenuCollapsed()},onInitAdditionalSectionOptions:function(){},onInitSectionObserver:function(){},onInitState:function(){ecount.control.menu.section.prototype.onInitState.apply(this,arguments);$.extend(this.__state,{"style.dropAccept":!1,"opt.isClosed":!1,"opt.hasCursor":!1,"opt.dragMode":!1,"opt.deleteMode":!1,"opt.draggable":!1,"opt.droppable":!1})},onInitFunctions:function(n,t,i){ecount.control.menu.section.prototype.onInitFunctions.apply(this,arguments);ecount.menuCommand.section.setAdditionalFunction(this,n,t,i)},onInitTitleFunction:function(n,t){n.functions.title={ecFunction:"label",cid:this.cid,title:t||"","style.display":!1}},onInitTogglerFunction:function(n,t){t.isUseToggleSwitch&&(n.functions.sectionToggler={ecFunction:"button",cid:this.id,useFlipped:!!t.isMenuCollapsed,isFlipped:!!t.isMenuCollapsed,level:3},this._notifyTogglerState(t.isMenuCollapsed),t.isMenuCollapsed&&this._notifyMenuCollapsed())},getMenuItem:function(n){return this.menuItems[n]},getChild:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t],n(i))return i},getChildrenCount:function(){return this.menuItems.length},getSectionData:function(){return{ecPageID:this.ecPageID,delegator:this.delegator,depth:this.depth}},getSelectedItem:function(){return this.menuItems.head(function(n){return n.getSelectedState()})},getFocusedItem:function(){return this.menuItems.head(function(n){return n.hasFocus()})},getClickedItem:function(){return this.menuItems.head(function(n){return n.getClickedState()})},getMenuItemByBodyUrl:function(n){return this.menuItems.head(function(t){return t.getMenuData().BODY_URL==n})},getMenuItemByMatch:function(n){return this.menuItems.head(function(t){return _.isMatch(t.getMenuData(),n)})},getMenuItemByMenuId:function(n){return this.menuItems.head(function(t){return t.getMenuId()==n})},getMenuItemByMenuSeq:function(n){return this.menuItems.head(function(t){return t.getMenuSeq()==n})},getMenuItemByPrgId:function(n){return this.menuItems.head(function(t){return t.getPrgId()==n})},getMenuItemByMenuUrl:function(n){return this.menuItems.head(function(t){return t.getBodyUrl()==n})},getMenuIndexByMenuId:function(n){var t;return this.menuItems.head(function(i){if(i.getMenuId()==n){t=index;return}}),t},getMenuItemByDefaultMenuSeq:function(n){return this.menuItems.head(function(t){var i=t.getMenuDataAttrs();if(i.DEFAULT_MENU_SEQ==n)return t})},getEditGuidePositionItem:function(){var n=this.getEditGuideIndex();return this.menuItems.head(function(n){return n.getBodyUrl()==menuUrl})},getSibilingsGroup:function(){for(var i=[],n=0,r=this.menuItems.length,t;n<r;n++)t=this.menuItems[n],t.getDisplayState()&&i.push(t.getMenuDataAttrs());return i},getFlippedState:function(){return this.getState("sectionToggler","isFlipped")},setFlippedState:function(n){this.setState("sectionToggler","isFlipped",n);n?this.hide():this.show()},getUseFlippedState:function(){return this.getState("sectionToggler","useFlipped")},setUseFlippedState:function(n){this.setState("sectionToggler","useFlipped",n);this.getWrapperMenuAreaAddon().parent()[n?"addClass":"removeClass"]("collapsed-local-nav")},getEditGuideIndex:function(){if(this.ecview)return this.ecview.getEditGuideIndex()},getVisibleMenuItemByIndex:function(n){return this.menuItems.filter(function(n){return n.getDisplayState()})[n]},getVisibleMenuItemCount:function(){return this.menuItems.filter(function(n){return n.getDisplayState()}).length},setEmpty:function(){this.ecview&&this.ecview.setChildrenContainerEmtpy()},setChildrenStorage:function(){this.ecview&&this.ecview.setChildrenStorage()},setSectionState:function(n){this.setState(this._IT_SELF,"opt.isClosed",!n,!0)},setTitle:function(n){this.getFunction("title")&&this.setState("title","title",n)},setDropAcceptState:function(n){this.setState(this._IT_SELF,"style.dropAccept",n,!0);for(var t=0,i=this.menuItems.length;t<i;t++)this.menuItems[t].setDropAcceptState(n)},setEditGuideUp:function(n,t){this.setEditGuide(n,t)},setEditGuide:function(n,t){this.editGuideUpdateTimer||(this.editGuideUpdateTimer=ecount.global.setTimeout(this.ecPageID,function(){this.ecview&&this.ecview.setEditGuide(n,t.horizontal);this.editGuideUpdateTimer=null}.bind(this),this.editGuideUpdateTimeout))},setEditGuideUpdatedPosition:function(n,t){var r=this.getEditGuideIndex(),f=this.getMenuItemByMenuId(n),i,u;f&&(i=r>-1?this.menuItems[this._getAdjustedMenuIndex(r)]:this.menuItems[t.horizontal=="backword"?0:this.menuItems.length-1],i&&(u=i.getMenuId(),this.setEditGuide(u,t)))},setMenuItemOnEditGuide:function(n){var i=this.getEditGuideIndex(),r=this.getMenuItemByMenuId(n),t,u;if(targetId=this._getEditGuideTargetId(i,this.id),i>-1&&r&&targetId)for(this.editChildrenItemOrder(r,targetId),this.editOwnItemOrder(r,i),t=0,u=this.menuItems.length;t<u;t++)this.menuItems[t].setDeleteButtonState(!1);else this.restoreTemporarilyHiddenItem()},updateDefaultMenu:function(n,t,i,r){var u=this.getMenuItemByMenuId(n);u&&(u.setDefaultChildMenuSeq(t),u.setDefaultChildPrgId(i),u.setBodyUrl(r))},renderChildren:function(n,t){var i,r=this.isDraggableEnabled(),u=this.getState(this._IT_SELF,"opt.deleteMode");if(!this.ecview)return Promise.reject();i=this.ecview.getChildrenContainerDummy();this.setChildrenStorage();t.forEach(function(n){n.render(i);r&&n.enableDraggable();u&&n.enableDeleteMode()});this.ecview.setChildrenContainerItems(i);this.show()},removeEditGuide:function(){this.ecview&&this.ecview.removeEditGuide();ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.editGuideUpdateTimer);this.editGuideUpdateTimer=null;for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].removeEditGuide()},restoreTemporarilyHiddenItem:function(){for(var n=0,i=this.menuItems.length,t;n<i;n++)t=this.menuItems[n],t.restoreTemporarilyHiddenItem()},renewMenuItems:function(n){this.menuItems=this._getMenuItems({_dataItems:n});this.renderChildren(null,this.menuItems)},isDraggableEnabled:function(){return this.getState(this._IT_SELF,"opt.draggable")},isDroppableEnabled:function(){return this.getState(this._IT_SELF,"opt.droppable")},showTitle:function(n){this.getFunction("title")&&(n==undefined&&(n=!0),this.setState("title","style.display",n))},getDraggableTarget:function(){if(this.ecview)return this.ecview.getDraggableTarget()},hasMenuItems:function(){return!!this.menuItems.length},hasFocus:function(){return this.getState(this._IT_SELF,"opt.hasCursor")},hasEditGuideIndex:function(){var n=this.getEditGuideIndex();return n>-1?!0:!1},activateMenuItem:function(n,t){var i=this.getMenuItemByMenuSeq(n.MENU_SEQ);i&&i.setClickedState(!0);t&&this.deactivateNotClickedMenu(n.getMenuDataAttrs())},activateMenuItemByBodyUrl:function(n){var t=this.getMenuItemByBodyUrl(n);t&&(t.setClickedState(!0),this.deactivateNotClickedMenu(t.getMenuDataAttrs()))},deactivateNotClickedMenu:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)(i=this.menuItems[t],i.getMenuId()!=n.MENU_ID)&&this.deactivateMenuItems(i)},deactivateMenuItems:function(n){n.setSelectedState(!1);n.setClickedState(!1)},fixCurrentlySelectedMenu:function(n){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoverTimer);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoutTimer);for(var i=0,u=this.menuItems.length,t,r;i<u;i++)t=this.menuItems[i],r=t.getSelectedState(),this._fixItemActivationState(t,r),n&&t.setClickedState(r)},hideNotSelectedSection:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.listMouseoutTimeout);this.listMouseoutTimer=ecount.global.setTimeout(this.ecPageID,function(){var n=this.getHighlightedItem();n||this.hide()}.bind(this),this.listMouseoutTimeout)},clearDropAcceptState:function(){if(this.setState(this._IT_SELF,"style.dropAccept",!0),this.ecview&&this.ecview.clearDropAcceptState(),this.menuItems)for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].clearDropAcceptState()},restoreDragSourceAction:function(){for(var n=0,i=this.menuItems.length,t;n<i;n++)t=this.menuItems[n],t.restoreDragSourceAction()},mouseoutCloseAction:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.listMouseoutTimer);this.listMouseoutTimer=ecount.global.setTimeout(this.ecPageID,function(){this.hasFocus()||this.getFocusedItem()||this.setSectionState(!1)}.bind(this),this.listMouseoutTimeout)},enableDraggable:function(){this.setState(this._IT_SELF,"opt.draggable",!0);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].enableDraggable()},enableDroppable:function(){this.setState(this._IT_SELF,"opt.droppable",!0,!0);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].enableDroppable()},enableDragMode:function(){this.setState(this._IT_SELF,"opt.dragMode",!0);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].enableDragMode()},enableDeleteMode:function(){this.setState(this._IT_SELF,"opt.deleteMode",!0);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].enableDeleteMode()},disableDragMode:function(){this.setState(this._IT_SELF,"opt.dragMode",!1);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].disableDragMode()},disableDraggable:function(){this.setState(this._IT_SELF,"opt.draggable",!1);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].disableDraggable()},disableDroppable:function(){this.setState(this._IT_SELF,"opt.droppable",!1,!0);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].disableDroppable()},disableDeleteMode:function(){this.setState(this._IT_SELF,"opt.deleteMode",!1);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].disableDeleteMode()},editMenuItemOrder:function(n,t){var r=this.getEditGuideIndex(),u=this.getMenuItemByMenuId(n),i,f;for(t=this._getEditGuideTargetId(r,t),this.editChildrenItemOrder(u,t),this.editOwnItemOrder(u,r),i=0,f=this.menuItems.length;i<f;i++)this.menuItems[i].setDeleteButtonState(!1)},editChildrenItemOrder:function(n,t){var u=this.getMenuItemByMenuId(t),i=this.menuItems.head(function(n){return n.getEditGuideIndex()>-1}),r=this.menuItems.head(function(t){return t.isItemParent(n)});u&&(i=this.getMenuItemByMenuId(u.getParentMenuId()),i&&(i.editMenuItemOrder(n),n.show()));r!==i&&r&&r.editMenuItemOrder(n);this.renderChildren(null,this.menuItems)},editOwnItemOrder:function(n,t){var u,r,i;this.ecview&&(u=widget.generator.control(),r=this.menuItems.findIndex(function(t){return t==n}),r>-1&&this.menuItems.splice(r,1),t>-1&&(n.depth!=this.depth&&(i=n.menuData,i.DEPTH=this.depth,i.PARENT_MENU_SEQ=this.menuItems[0].getMenuDataAttrs().PARENT_MENU_SEQ,n=this._getChildItem(u,i)),this.menuItems.splice(t,0,n),n.show()),ecount.global.setTimeout(this.ecPageID,this.renderChildren.bind(this,null,this.menuItems),0))},removeDeleteButton:function(){for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].removeDeleteButton()},removeMenuItem:function(n){var t=this.menuItems.findIndex(function(t){return t.getMenuId()===n.MENU_ID}),i=this.getMenuItem(t);i.hideFromMyMenu()},show:function(){this.setState(this._IT_SELF,"style.display",!0,!0)},hide:function(){this.setState(this._IT_SELF,"style.display",!1,!0)},serialize:function(){return this.menuItems.reduce(function(n,t,i){var r=t.serialize();return r.MENU_TYPE!=ecount.menu.myPageType&&(r.SORT=i,n.push(r)),n},[])},onMouseoverHandler:function(n,t,i){this.depth==3&&n.ecRole=="menu.itemContainer"&&this.getUseFlippedState()&&ecount.menuCommand.section.notifyMenuExpandedAction(this);ecount.menuCommand.section.mouseoverAction(this,n,t,i)},onMouseoutHandler:function(n,t,i){this.getUseFlippedState()&&ecount.menuCommand.section.notifyMenuCollapsedAction(this);ecount.menuCommand.section.mouseoutAction(this,n,t,i)},onToggleButtonClickHandler:function(){var n=this.getUseFlippedState();if(!ecount.infra.checkIsAvailableForDemoUser(this.isMasterUser))return!1;this._callToggleStateUpdateAPI(n).then(function(){this.setUseFlippedState(!n);ecount.runtime.notify("menu.changeSectionTogglerState",null,{section:this.depth,collapseable:!this.getUseFlippedState()})}.bind(this))},_getChildItem:function(n,t){var i=this._getChildOption(t);return n.define(i.type,i.id,i.name).setOptions(i.options).getInstance()},_getChildOption:function(n){return{type:this._getChildCtrlType(n),id:n.MENU_SEQ,name:n.MENU_SEQ,options:_.extend(this._getSectionData(),{menuData:n})}},_getAPIVersionKey:function(n){var t=this._getUserInfo(),r=[t.ComCode,t.UserId].join("_"),u=this.versionData[r].Left[n.GROUP_SEQ],i;return t.Version=u,i=Object.toJSON(t).encryptXor("ecount"),Promise.resolve(i)},_getUserInfo:function(){return{ComInfo:this.comInfo,ComCode:ecount.config.company.COM_CODE.toUpperCase(),UserId:ecount.config.user.ID.trim().toUpperCase(),DomainType:$.url().domainType,LanType:ecount.user.LAN_TYPE}},_getAPIUrl:function(n,t){return["/ECERP/SVC/Popup/GetListCacheLeftMenu","?jsonp=eccb","&v=",t].join("")},_getCacheKey:function(n){return[n.MENU_TYPE,n.MENU_SEQ,n.SUB_MENU].join("#")},_getCachedItem:function(n){return this.cachedItems[n]},_getMenuDataFromAPI:function(n,t){var i=this._getCacheKey(n);return ecount.menu.getMenuApiDataRequire(t)},_getLeafItem:function(n,t){var i=t.find(this._isMyPageLeafItem);return i||(i=t.head(function(n){return n[this._getGroupSeqKey()]&&n.MENU_URL}.bind(this))),i||(i=t.head(function(t){return t.PARENT_MENU_SEQ==n&&t.MENU_URL})),i},_getEditGuideTargetId:function(n,t){if(t==this.id){var i=this.menuItems.head(function(n){return n.getEditGuideIndex()>-1}),r;if(i&&(r=i.getMenuItem(i.getEditGuideIndex()),r))return r.getMenuId()}return n>-1?this.menuItems[this._getAdjustedMenuIndex(n)].getMenuId():t},_getAdjustedMenuIndex:function(n){return n>=this.menuItems.length?this.menuItems.length-1:n},_setItemToCache:function(n,t){this.cachedItems[n]=t},_callToggleStateUpdateAPI:function(n){var t=this;return new Promise(function(i,r){ecount.common.api({ecPageID:t.ecPageID,url:"/SelfCustomize/User/SaveLeftMenuCollapse",data:{MENU_TYPE:1,IS_EXPANDED:n},success:i,error:r})}).catch(function(n){console.log(n)})},_isMyPageLeafItem:function(n){return n.MAIN_PROGRAM=="Y"},isDroppableSection:function(n,t,i){return t==i},isRemovableMenuItem:function(n){return this.menuItems.head(function(t){return t.getMenuId()===n.MENU_ID})},_fixItemActivationState:function(n,t){t?n.clearDeselectAction():n.clearSelectAction();n.setSelectedState(t)},_notifyMenuCollapsed:function(){},_notifyMenuExpanded:function(){},_notifyTogglerState:function(){},ON_MOUSEOVER:function(n,t,i,r){if(_.get(r,"section.depth")!=2||this.depth!=1){if(this.getState(this._IT_SELF,"opt.dragMode"))return!1;this.setState(this._IT_SELF,"opt.hasCursor",!0);this.onMouseoverHandler(n,t,r);r.section=this.getSectionData()}},ON_MOUSEOUT:function(n,t,i,r){if(_.get(r,"section.depth")!=2||this.depth!=1){if(this.getState(this._IT_SELF,"opt.dragMode"))return!1;this.setState(this._IT_SELF,"opt.hasCursor",!1);this.onMouseoutHandler(n,t,r);r.section=this.getSectionData()}},ON_CLICK:function(n,t,i,r){if(_.get(r,"section.depth")!=2||this.depth!=1){if(this.getState(this._IT_SELF,"opt.dragMode"))return!1;if(r.section=this.getSectionData(),n.ecRole=="button.delete"){this.isRemovableMenuItem(r.item)&&this.removeMenuItem(r.item);this.renderChildren(null,this.menuItems,r);return}if(n.ecRole=="flipswitch")this.onToggleButtonClickHandler(n,t,r)}}},depth1:{controlType:"widget.menuSection.depth1",viewName:"widget.view.menuSection.depth1",mouseoutTimeout:700,editGuideUpdateTimeout:100,depth:1,getHighlightedItem:function(){for(var n=0,i=this.menuItems.length,t;n<i;n++)if(t=this.menuItems[n],t.getHighlightedState())return t},activeteSection:function(n){this.setState(this._IT_SELF,"isActivated",n)},activateMenuItem:function(n,t){if(n)for(var r=0,f=this.menuItems.length,i,u;r<f;r++)i=this.menuItems[r],u=n.MENU_TYPE==i.getMenuSeq(),t?i.setClickedState(u):i.setSelectedState(u)},restoreToClickedItem:function(){this.mouseoutTimer=ecount.global.setTimeout(this.ecPageID,function(){var n=this.getClickedItem();n&&ecount.runtime.notify("menu.section1.selectItem",this.ecPageID,n.getMenuData())}.bind(this),this.mouseoutTimeout)},clearSectionRestoreTimer:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoutTimer)},_getMenuItems:function(n){var t=widget.generator.control();return n._dataItems.map(this._getChildItem.bind(this,t))},_getChildCtrlType:function(){return"widget.menuItem.depth1"}},depth2:{controlType:"widget.menuSection.depth2",viewName:"widget.view.menuSection.depth2",mouseoutTimeout:700,editGuideUpdateTimeout:200,depth:2,onInitAdditionalSectionOptions:function(n){_.extend(this,{menuType:n.menuType,sectionLv1:n.sectionLv1})},onAfterRender:function(){var n=_.get(this.sectionLv1,"ecview.$el",null);this.menuItems&&n&&this.menuItems.forEach(function(t){var i=n.find("li[id='"+t.menuType+"']"),r;i&&i.length>0&&(r=this.ecview.getCloneContainer(),t.sectionLv1Li=i,t.render(r),i.append(r))},this)},renderChildren:function(n,t,i){var e=this.isDraggableEnabled(),o=this.getState(this._IT_SELF,"opt.deleteMode"),u;if(!this.ecview)return Promise.reject();var s=this.sectionLv1.getMenuItemByMenuId(i.item.MENU_TYPE),r=s.ecview.getOwnElement('[data-role="menu.itemContainer"]'),f=r.find('[data-role="menu.itemStorage"]');f.length||(f=r.after($('<div class="hidden" data-role="menu.itemStorage" />')));f.append(r.children());u=t.find(function(n){return n.menuType==i.item.MENU_TYPE}.bind(this));u.render(r);e&&u.enableDraggable();o&&u.enableDeleteMode();this.show()},setChildrenStorage:function(n,t){var u=this.sectionLv1.getMenuItemByMenuId(t.item.MENU_TYPE),i=u.ecview.getOwnElement('[data-role="menu.itemContainer"]'),r=i.find('[data-role="menu.itemStorage"]');r.length||(r=i.after($('<div class="hidden" data-role="menu.itemStorage" />')));r.append(i.children())},getMenuGroup:function(n){return this.menuItems[n]},getMenuGroupByMenuType:function(n){return this.menuItems.head(function(t){return t.isMenuTypeGroup(n)})},getMenuGroupByGroupSeq:function(n){return this.menuItems.head(function(t){return t.getMenuItemByMenuSeq(n)})},getChild:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t],n(i))return i},getFocusedItem:function(){var n=this.getChild(function(n){return n.getFocusedItem()});if(n)return n.getFocusedItem()},getSelectedItem:function(){var n=this.getChild(function(n){return n.getSelectedState()});if(n)return n.getSelectedItem()},getClickedItem:function(){for(var n=0,i=this.menuItems.length,t;n<i;n++)if(t=this.menuItems[n].getClickedItem(),t)return t},getMenuItemByBodyUrl:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t].getMenuItemByBodyUrl(n),i)return i},getMenuItemByMatch:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t].getMenuItemByMatch(n),i)return i},getMenuItemByMenuId:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t].getMenuItemByMenuId(n),i)return i},getMenuItemByMenuSeq:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t].getMenuItemByMenuSeq(n),i)return i},getMenuItemByPrgId:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t].getMenuItemByPrgId(n),i)return i},getMenuItemByGroupSeq:function(n,t){for(var i=0,u=this.menuItems.length,r;i<u;i++)if(r=this.menuItems[i].getMenuItemByGroupSeq(n,t),r)return r},getMenuItemByDefaultMenuSeq:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t].getMenuItemByDefaultMenuSeq(n),i)return i},getGroupSeqByMenuSeq:function(n,t){var i={MENU_TYPE:n,GROUP_SEQ:t};return this._getAPIVersionKey(i).then(this._getAPIUrl.bind(this,i)).then(this._getMenuDataFromAPI.bind(this,i)).then(function(n){return n.length?n[0].GROUP_SEQ:Promise.reject("no siblings result")})},getGroupSeqByMenuUrl:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t].getMenuItemByGroupSeq(n,groupSeq),i)return i},getMenuItemByMenuUrl:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t].getMenuItemByMenuUrl(n),i)return i},getMenuIndexByMenuId:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t].getMenuIndexByMenuId(n),i!==undefined)return i},getVisibleMenuItemByIndex:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t].getVisibleMenuItemByIndex(n),i!==undefined)return i},getSibilingsGroup:function(n){var t=this.menuItems.head(function(t){return t.getMenuItemByMenuId(n)});return t.getSibilingsGroup(n)},getEditGuideIndex:function(){for(var n=0,i=this.menuItems.length,t;n<i;n++)if(t=this.menuItems[n].getEditGuideIndex(),t>-1)return t;return-1},setMenuItemBodyUrl:function(n,t){for(var i=0,r=this.menuItems.length;i<r;i++)this.menuItems[i].setMenuItemBodyUrl(n,t)},setEditGuide:function(n,t){for(var i=0,u=this.menuItems.length,r;i<u;i++)r=this.menuItems[i],r.getSelectedState()&&r.setEditGuide(n,t)},setDropAcceptState:function(n){for(var t=0,i=this.menuItems.length;t<i;t++)this.menuItems[t].setDropAcceptState(n)},isRemovableMenuItem:function(n){return this.menuItems.head(function(t){return t.isRemovableMenuItem(n)})},editMenuItemOrder:function(n,t){for(var i=0,u=this.menuItems.length,r;i<u;i++)r=this.menuItems[i],r.getSelectedState()&&r.editMenuItemOrder(n,t)},setEditGuideUpdatedPosition:function(n,t){for(var i=0,u=this.menuItems.length,r;i<u;i++)r=this.menuItems[i],r.setEditGuideUpdatedPosition(n,t)},setMenuItemOnEditGuide:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)i=this.menuItems[t],i.setMenuItemOnEditGuide(n)},updateDefaultMenu:function(n,t,i,r){for(var u=0,o=this.menuItems.length,f,e;u<o;u++)if(f=this.menuItems[u],e=f.getMenuItemByMenuId(n),e){f.updateDefaultMenu(n,t,i,r);return}},activateMenuItem:function(n,t){if(n)for(var r=0,u=this.menuItems.length,i;r<u;r++)i=this.menuItems[r],i.menuType==n.MENU_TYPE?(i.setSelectedState(!0),i.activateMenuItem(n,t)):i.setSelectedState(!1)},removeMenuItem:function(n){var t=this.getMenuGroupByGroupSeq(n.GROUP_SEQ);t&&t.removeMenuItem(n)},hasEditGuideIndex:function(){for(var n=0,i=this.menuItems.length,t;n<i;n++)if(t=this.menuItems[n].getEditGuideIndex(),t>-1)return!0;return!1},activateMenuByParent:function(n){for(var i=[],r=0,u=this.menuItems.length,t;r<u;r++)t=this.menuItems[r],t.menuType==n.MENU_SEQ?i.push(t.activateMenuByParent(n,n.POSITION)):i.push(new Promise(function(n){n(t.setSelectedState(!1))}));return Promise.all(i)},deactivateNotClickedMenu:function(n){for(var t=0,i=this.menuItems.length;t<i;t++)this.menuItems[t].deactivateNotClickedMenu(n)},fixCurrentlySelectedMenu:function(n){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoverTimer);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoutTimer);for(var t=0,i=this.menuItems.length;t<i;t++)this.menuItems[t].fixCurrentlySelectedMenu(n)},restoreToClickedItem:function(){for(var n=0,i=this.menuItems.length,t;n<i;n++)t=this.menuItems[n],t.getSelectedState()&&t.restoreToClickedItem()},clearSectionRestoreTimer:function(){for(var n=0,i=this.menuItems.length,t;n<i;n++)t=this.menuItems[n],t.clearSectionRestoreTimer()},renewMenuItems:function(n){this.menuItems=this._getMenuItems({_dataItems:n});this.renderChildren(null,this.menuItems)},enableDraggable:function(){this.setState(this._IT_SELF,"opt.draggable",!0);this.menuItems.forEach(function(n){n.enableDraggable()})},enableDroppable:function(){this.setState(this._IT_SELF,"opt.droppable",!0,!0);this.menuItems.forEach(function(n){n.enableDroppable()})},disableDraggable:function(){this.setState(this._IT_SELF,"opt.draggable",!1);this.menuItems.forEach(function(n){n.disableDraggable()})},disableDroppable:function(){this.setState(this._IT_SELF,"opt.droppable",!1,!0);this.menuItems.forEach(function(n){n.disableDroppable()})},serialize:function(){return this.menuItems.reduce(function(n,t){var i;return t.menuType==ecount.menu.myPageType?n:(i=t.serialize(),n.concat(i))},[])},_getMenuItems:function(n){var t=widget.generator.control(),i=this._getDepth2Group(n);return n.groupKeys.map(function(n){return{key:n,items:i[n]}}).filter(this._getFilteredGroup.bind(this)).map(this._getChildItem.bind(this,t))},_getFilteredGroup:function(n){return n.items},_getChildItem:function(n,t){var i=this._getChildOption(t);return n.define(i.type,i.id,i.name).setDataItems(t.items||[]).setOptions(i.options).setOptions({sectionLv1:this.sectionLv1}).getInstance()},_getChildOption:function(n){var t="group_"+n.key;return{type:this._getChildCtrlType(n),id:t,name:t,options:_.extend(this._getSectionData(),{menuType:n.key})}},_getDepth2Group:function(n){return _.groupBy(n._dataItems,"PARENT_MENU_SEQ")},_getChildCtrlType:function(){return"widget.menuSection.depth2Group"}},depth2Group:{controlType:"widget.menuSection.depth2Group",viewName:"widget.view.menuSection.depth2Group",depth:2,menuType:null,setEcPath:function(){this.ecPath=[this.ecPageID,"menu","section","group","",this.id,this.pcid].join(ecount.separator.ecPath)},onInitAdditionalSectionOptions:function(n){_.extend(this,{menuType:n.menuType,sectionLv1:n.sectionLv1})},onInitSectionObserver:function(){},onInitState:function(){ecount.control.menu.section.prototype.onInitState.apply(this,arguments);$.extend(this.__state,{ecpath:this.ecpath,ecPageID:this.ecPageID,"opt.selected":!1,"opt.hasCursor":!1,"opt.deleteMode":!1,"opt.draggable":!1,"opt.droppable":!1,"opt.allowDrop":!1})},renderChildren:function(n,t){var i,r=this.isDraggableEnabled(),u=this.getState(this._IT_SELF,"opt.deleteMode");if(!this.ecview)return Promise.reject();i=this.ecview.getChildrenContainerDummy();this.setChildrenStorage();t.forEach(function(n){n.render(i);r&&n.enableDraggable();u&&n.enableDeleteMode()});this.ecview.setChildrenContainerItems(i);this.show()},setChildrenStorage:function(){this.ecview&&this.ecview.setChildrenStorage()},getSelectedState:function(){return this.getState(this._IT_SELF,"opt.selected")},getMenuItemByGroupSeq:function(n,t){for(var i=0,f=this.menuItems.length,r,u;i<f;i++)if(r=this.menuItems[i],u=r.getMenuDataAttrs(),u.MENU_TYPE==n&&u.GROUP_SEQ==t)return r},getMenuItemByMatch:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t],_.isMatch(i.getMenuDataAttrs(),n))return i},setSelectedState:function(n){this.setState(this._IT_SELF,"opt.selected",n)},setViewPosition:function(n,t){this.ecview&&this.ecview.setPosition(n,t)},setMenuItemBodyUrl:function(n,t){for(var i=0,u=this.menuItems.length,r;i<u;i++)if(r=this.menuItems[i],r.getMenuId()==n.MENU_ID){r.setBodyUrl(t);return}},isMenuTypeGroup:function(n){return["group",n].join("_")==this.id},activateMenuItem:function(n,t){if(n)for(var r=0,f=this.menuItems.length,i,u;r<f;r++)i=this.menuItems[r],u=n.MENU_ID==i.getMenuId(),t?i.setClickedState(u):i.setSelectedState(u)},activateMenuByParent:function(n,t){return this._setLazyLoadedMenuData(n).then(function(){return this.menuItems.length?(ecount.menuCommand.sectionGroup.setGroupPosition(this,t),this.setSelectedState(!0)):this.setSelectedState(!1),Promise.resolve()}.bind(this)).catch(function(n){console.log(n)})},activatedClickedMenu:function(){for(var n=0,i=this.menuItems.length,t;n<i;n++)t=this.menuItems[n],t.setSelectedState(t.getClickedState())},restoreToClickedItem:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoutTimer);this.mouseoutTimer=ecount.global.setTimeout(this.ecPageID,function(){var t=this.getFocusedItem(),i=this.getSelectedItem(),n=this.getClickedItem();this.hasFocus()&&(!t||t!=i)&&ecount.menuCommand.sectionGroup.hasToRestoreToAnotherItem(i,n)&&(n.clearDeselectAction(),ecount.runtime.notify("menu.section2.selectItem",this.ecPageID,{ecPageID:this.ecPageID,item:n.getMenuData()}))}.bind(this),this.mouseoutTimeout)},clearSectionRestoreTimer:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoutTimer)},onMouseoutHandler:function(){this.restoreToClickedItem()},_getMenuItems:function(n){var t=widget.generator.control();return n._dataItems.map(this._getChildItem.bind(this,t))},_getChildCtrlType:function(){return"widget.menuItem.depth2"},_getMenuItemsByGroupId:function(n){return this.menuItems.filter(function(t){return t.getParentMenuId()==n})},_getGroupSeqKey:function(){return"GROUP_SEQ"},_setLazyLoadedMenuData:function(){return Promise.resolve(this.menuItems)},ON_MOUSEOUT:function(n,t,i,r){this.onMouseoutHandler(n,t,r);r.group=this.menuType}},depth3:{controlType:"widget.menuSection.depth3",viewName:"widget.view.menuSection.depth3",depth:3,editGuideUpdateTimeout:100,setEcPath:function(){this.ecPath=[this.ecPageID,"menu","section","group","",this.id,this.pcid].join(ecount.separator.ecPath)},onInitState:function(){ecount.control.menu.section.prototype.onInitState.apply(this,arguments);$.extend(this.__state,{ecpath:this.ecpath,ecPageID:this.ecPageID,"style.dropAccept":!1,"style.sectionDisplay":!1,"opt.selected":!1,"opt.hasCursor":!1,"opt.currentItemsKey":-Infinity,"opt.deleteMode":!1,"opt.draggable":!1,"opt.droppable":!1})},render:function(){this.attachView(this.getWrapperMenuAreaAddon())},renderMenuItemByParent:function(n){var t=this._getCacheKey(n);return t==this.getState(this._IT_SELF,"opt.currentItemsKey")?(ecount.menuCommand.section.reactivateMenuItemByParentAction(this,n),Promise.resolve()):this._getChildrenByParent(n,t).then(this._setMenuItems.bind(this)).then(ecount.menuCommand.section.renderChildrenAction.bind(null,this,n)).then(function(){this.setState(this._IT_SELF,"opt.currentItemsKey",t);this.setState(this._IT_SELF,"opt.selected",!0)}.bind(this)).catch(function(n){console.log(n)})},show:function(){(this.getState(this._IT_SELF,"style.sectionDisplay")||this.setState(this._IT_SELF,"style.sectionDisplay",!0),this.getUseFlippedState()&&this.getFlippedState())||this.setState(this._IT_SELF,"style.display",!0,!0)},setCurrentItemKey:function(n){this.setState(this._IT_SELF,"opt.currentItemsKey",n)},getCurrentItemKey:function(){var n=this.getState(this._IT_SELF,"opt.currentItemsKey");return n===-Infinity?null:n},getMenuItemByBodyUrl:function(n){return this.menuItems.head(function(t){return t.getMenuItemByBodyUrl(n)})},getMenuItemByMatch:function(n){return this.menuItems.head(function(t){return t.getMenuItemByMatch(n)})},getHighlightedItem:function(){for(var t=0,r=this.menuItems.length,n,i;t<r;t++){if(n=this.menuItems[t],i=n.getHighlightedItem(),i)return i;if(n.getHighlightedState())return n}},getSelectedItem:function(){for(var t=0,r=this.menuItems.length,n,i;t<r;t++){if(n=this.menuItems[t],i=n.getSelectedItem(),i)return i;if(n.getSelectedState())return n}},getMenuItemsHierarchy:function(n,t){var r=[],i=[];return t.forEach(function(t){return this._isDepth3Item(n,t)?r.push(t):this._isDepth4Item(n,t)?i.push(t):void 0}.bind(this)),r=r.filter(this.getFilteredDepth3List.bind(this,i)),r.map(function(t){for(var u=[],r=0,f=i.length;r<f;r++){if(!i[r])break;this._isChildOfDepth3Menu(n.MENU_TYPE,t,i[r])&&(u.push(this._getChildOfDepth3Item(n.MENU_TYPE,t,i[r])),i.splice(r--,1))}return this.getDepth3ChildControl(n,t,u)}.bind(this))},getDepth3ChildControl:function(n,t,i){var u=widget.generator.control(),r=this._getSectionData();return r.menuData=this._getDepth3Item(n,t,i),u.define(this._getChildCtrlType(n),t.MENU_SEQ,t.MENU_SEQ).setDataItems(i).setOptions(r).getInstance()},getFilteredDepth3List:function(){return!0},getVisibleMenuItemCountFromCache:function(n){return this._getDataFromCachedItems(function(t){if(t.getDisplayState()&&t.getMenuDataAttrs().GROUP_SEQ==n)return t})},getVisibleMenuItemByIndexFromCache:function(n,t){return this._getItemListFromCache(function(t){if(t.getDisplayState()&&t.getMenuDataAttrs().GROUP_SEQ==n)return t})[t]},getMenuItemByBodyUrlFromCache:function(n){return this._getDataFromCachedItems(function(t){var i=t.getMenuItemByBodyUrl(n);if(i)return i})},getMenuItemByMenuId:function(n){return this._getDataFromCachedItems(function(t){var i=t.getMenuItemByMenuId(n);if(i)return i})},getMenuItemByMenuSeq:function(n){return this._getDataFromCachedItems(function(t){var i=t.getMenuItemByMenuSeq(n);if(i)return i})},getMenuItemByPrgId:function(n){return this._getDataFromCachedItems(function(t){var i=t.getMenuItemByPrgId(n);if(i)return i})},getMenuItemByMenuUrl:function(n){return this._getDataFromCachedItems(function(t){var i=t.getMenuItemByMenuUrl(n);if(i)return i})},getMenuIndexByMenuId:function(n){var t;return this._getDataFromCachedItems(function(i){var r=i.getMenuIndexByMenuId(n);if(r!==undefined){t=r;return}}),t==undefined&&this.menuItems.head(function(i,r){if(i.getMenuId()==n){t=r;return}}),t},setEditGuideUp:function(n,t){var u=this.getEditGuideIndex(),i,r;u>-1&&t.vertical=="forward"&&(i=this.menuItems[this._getAdjustedMenuIndex(u)],i.getChildrenCount()>0&&!i.getClosedAttrState()&&(r=i.getVisibleMenuItemByIndex(0),r&&(n=r.getMenuId())));this.setEditGuide(n,t)},getSelectedState:function(){return this.getState(this._IT_SELF,"opt.selected")},setSelectedState:function(n){this.setState(this._IT_SELF,"opt.selected",n)},setViewLeftPosition:function(n){this.ecview&&this.ecview.setLeftPosition(n)},setEditGuideUpdatedPosition:function(n,t){var f=this.getEditGuideIndex(),s=this.getMenuItemByMenuId(n),r=this._getEditGuideTargetId(f,this.id),i,u,e,o;s&&(i=f>-1?this.menuItems[this._getAdjustedMenuIndex(f)]:this.menuItems[t.vertical=="backword"?0:this.menuItems.length-1],t.vertical=="forward"&&(u=this.getMenuItemByMenuId(r),r==this.id&&f==-1&&(i=this.menuItems[this.menuItems.length-1],r=i.getMenuId()),i&&i.getChildrenCount()>0&&!i.getClosedAttrState()&&(u=i.getVisibleMenuItemByIndex(0),u&&(r=i.getMenuId())),u&&(e=this.getMenuItemByMenuId(u.getParentMenuId()),e&&e.getChildrenCount()-1==u.index&&(r=e.getMenuId()))),(f>-1||r)&&(o=r||i.getMenuId(),this.setEditGuide(o,t)))},setMenuItemOnEditGuide:function(n){var r=this.getEditGuideIndex(),u=this.getMenuItemByMenuId(n),f=this._getEditGuideTargetId(r,this.id),i,e,t;if((r>-1||f)&&u)for(this.editChildrenItemOrder(u,f),this.editOwnItemOrder(u,r),i=0,e=this.menuItems.length;i<e;i++)t=this.menuItems[i],t.hasChildren()&&(t.getChildrenCount()&&t.getVisibleMenuItemByIndex(0)||t.hideFromMyMenu()),t.setDeleteButtonState(!1);else this.restoreTemporarilyHiddenItem()},setEditGuide:function(n,t){this.editGuideUpdateTimer||(this.editGuideUpdateTimer=ecount.global.setTimeout(this.ecPageID,function(){var u=this.getMenuItemByMenuId(n),i,r;if(this.editGuideUpdateTimer=null,!u){i=this.menuItems.head(function(t){return t.getMenuItemByMenuId(n)});i&&(r=this.getMenuItemByMenuId(i.getParentMenuId()),this.removeEditGuide(),r&&r.setEditGuide(n,t.vertical));return}this.ecview&&this.ecview.setEditGuide(n,t.vertical)}.bind(this),this.editGuideUpdateTimeout))},renewMenuItems:function(n){ecount.runtime.notify("menu.section3.renewItem",this.ecPageID,n)},renewMenuItemsByParent:function(n,t,i){var r=this._getCacheKey(n);depth3Items=this.getMenuItemsHierarchy(n,t);this.menuItems=depth3Items;this.setCurrentItemKey(r);this._setItemToCache(r,depth3Items);i&&this.renderChildren(n,this.menuItems)},isDroppableSection:function(n,t,i){var r=this.getMenuItemByMenuId(n);return t>=this.depth&&(t>=i||r&&!r.hasChildren())},removeCurrentItemKey:function(){this.setState(this._IT_SELF,"opt.currentItemsKey",-Infinity)},closeOtherItems:function(n){var t=this.getClickedItem();t&&n&&t.getMenuId()!=n.MENU_ID&&t.setClosedAttrState(!0)},activateMenuItem:function(n,t){if(n)for(var f=0,e=this.menuItems.length,i,r,u;f<e;f++)i=this.menuItems[f],r=!!i.getMenuItemByMenuId(n.MENU_ID),u=n.MENU_SEQ==i.getMenuSeq(),r?i.activateMenuItem(n):i.deactivateMenuItems(),t?(i.setClickedState(r||u),u&&i.setChildClickedStateByUrl(n.BODY_URL)):i.setSelectedState(r||u)},activateMenuItemById:function(n,t){var i=this.getMenuItemByMenuId(n);i&&this._activateMenuItem(i,t,function(){i.setChildClickedStateById(n)})},activateMenuItemByBodyUrl:function(n,t){var i=this.getMenuItemByBodyUrl(n);i&&this._activateMenuItem(i,t,function(){i.setChildClickedStateByUrl(n)})},activateMenuItemByMatch:function(n,t){var i=this.getMenuItemByMatch(n);i&&this._activateMenuItem(i,t,function(){i.setChildClickedStateByMatch(n)})},activateMenuByParent:function(){return Promise.resolve()},deactivateMenuItems:function(n){n.deactivateMenuItems();n.setSelectedState(!1);n.setClickedState(!1)},serialize:function(){return Object.getOwnPropertyNames(this.cachedItems).reduce(function(n,t){return t.indexOf(ecount.menu.prefixMp)==0?n:n.concat(this.cachedItems[t].reduce(function(n,t,i){var r=t.serialize();return groupSeq=t.PARENT_MENU_SEQ,r.SORT=i,n.push(r),r.children&&(n=n.concat(r.children),r.IS_GROUP=!0),n},[]))}.bind(this),[])},hasEditGuideIndex:function(){var i=this.getEditGuideIndex(),n,t;if(i>-1)return!0;for(n=0,t=this.menuItems.length;n<t;n++)if(this.menuItems[n].hasEditGuideIndex())return!0;return!1},_isDepth3Item:function(n,t){return!!(t.DEPTH==3)},_isDepth4Item:function(n,t){return t.DEPTH=="3"&&$.isEmpty(t.PARENTMENU_SEQ_ORG)||t.DEPTH=="4"},_isDepth4MypageItem:function(n){return!$.isEmpty(n.PARENT_MENU_SEQ)||n.PARENT_MENU_SEQ==ecount.menu.myPageSubMenuSeq&&!$.isEmpty(n.PARENTMENU_SEQ_ORG)&&n.MENU_SEQ!="604"},_isChildOfDepth3Menu:function(n,t,i){return t.MENU_SEQ==i.PARENT_MENU_SEQ},_getChildCtrlType:function(){return"widget.menuItem.depth3"},_getChildrenByParent:function(n,t){var i=n.API_PARAM,r;return(r=this._getCachedItem(t))?Promise.resolve(r):this._getAPIVersionKey(i).then(this._getAPIUrl.bind(this,i)).then(this._getMenuDataFromAPI.bind(this,i)).then(function(i){return Promise.resolve(this.getMenuItemsHierarchy(n,i)).then(function(n){return this.setCurrentItemKey(t),this._setItemToCache(t,n),n}.bind(this))}.bind(this))},_getDepth3Item:function(n,t,i){var r={MENU_TYPE:n.MENU_TYPE},u;return!t.DEFAULT_MENU_SEQ&&i.length&&(u=i[0],r.DEFAULT_MENU_SEQ=u.MENU_SEQ,r.DEFAULT_PRG_ID=u.PRG_ID,r.MENU_URL=u.MENU_URL),_.extend(t,r)},_getChildOfDepth3Item:function(n,t,i){return _.extend(i,{MENU_TYPE:n,GROUP_SEQ:i.GROUP_SEQ||"00000"})},_getMenuCloseState:function(n){return n.S_FLAG=="N"||n.FOLD_TYPE=="F"},_getCachedMenuItems:function(n){return new Promise(function(t){t(this.cachedItems[n])}.bind(this))},_getMenuItems:function(n){var t=widget.generator.control();return n._dataItems.map(this._getChildItem.bind(this,t))},_getChildItem:function(n,t){var i=this._getChildOption(t);return n.define(i.type,i.id,i.name).setDataItems(t.items||[]).setOptions(i.options).getInstance()},_getChildOption:function(n){return{type:this._getChildCtrlType(n),id:n.MENU_SEQ,name:n.MENU_SEQ,options:_.extend(this._getSectionData(),{menuData:n})}},_getDataFromCachedItems:function(n){for(var t,e,u,f=Object.getOwnPropertyNames(this.cachedItems),i=0,o=f.length,r;i<o;i++)for(r=this.cachedItems[f[i]],t=0,e=r.length;t<e;t++)if(u=n(r[t],t),u)return u},_getItemListFromCache:function(n){for(var t,o,u,f=Object.getOwnPropertyNames(this.cachedItems),e=[],i=0,s=f.length,r;i<s;i++)for(r=this.cachedItems[f[i]],t=0,o=r.length;t<o;t++)u=n(r[t]),u&&e.push(u);return e},_setMenuItems:function(n){return this.menuItems=n,Promise.resolve(n)},_activateMenuItem:function(n,t,i){var r=n.getMenuDataAttrs(),f,u;r.DEPTH>3?(f=r.PARENT_MENU_ID,u=this.getMenuItemByMenuId(f),u.setClickedState(t),this.deactivateNotClickedMenu(u.getMenuDataAttrs()),u.activateMenuItem(r,t)):(n.setClickedState(!0,!0),t&&i&&i(),this.deactivateNotClickedMenu(r))},_fixItemActivationState:function(n,t){t?n.clearDeselectAction():n.clearSelectAction()},_notifyMenuCollapsed:function(){ecount.global.clearTimeout(this.ecPageID,this.sectionMouseoverTimer);this.sectionMouseoutTimer=ecount.global.setTimeout(this.ecPageID,function(){this.getUseFlippedState()&&!this.hasFocus()&&(this.setFlippedState(!0),ecount.runtime.notify("menu.leftMenuToggle",this.ecPageID,!0))}.bind(this),this.sectionMouseoutTimeout)},_notifyMenuExpanded:function(){ecount.global.clearTimeout(this.ecPageID,this.sectionMouseoutTimer);this.sectionMouseoverTimer=ecount.global.setTimeout(this.ecPageID,function(){this.getUseFlippedState()&&this.hasFocus()&&(this.setFlippedState(!1),ecount.runtime.notify("menu.leftMenuToggle",this.ecPageID,!1))}.bind(this),this.sectionMouseoverTimeout)},_notifyTogglerState:function(n){this.setUseFlippedState(n);ecount.runtime.notify("menu.changeSectionTogglerState",null,{section:this.depth,collapseable:!n})}},erp:{controlType:"widget.menuSection.erp",_getAPIVersionKey:function(n){var f=n.MENU_TYPE==ecount.menu.myPageType,t=this._getUserInfo(),r=[t.ComCode,t.UserId].join("_"),i,u;return f?i=this.versionData[r].MyPage:(i=this.versionData[r].Left[n.GROUP_SEQ],t.Data={GROUP_SEQ:n.GROUP_SEQ,MENU_DV_CD:this.menuUseFlag}),t.Version=i,u=Object.toJSON(t).encryptXor("ecount"),Promise.resolve(u)},_getAPIUrl:function(n,t){return n.MENU_TYPE==ecount.menu.myPageType?["/ECERP/SVC/Popup/GetListCacheMyPageV2","?jsonp=eccb&v=",t,"&urlVersion=",ecount.common.version.getVersion("programConfig",ecount.common.version.programConfig.prgId)].join(""):["/ECERP/SVC/Popup/GetListCacheLeftMenuV3","?jsonp=eccb&v=",t,"&urlVersion=",ecount.common.version.getVersion("programConfig",ecount.common.version.programConfig.prgId)].join("")},_getGroupSeqKey:function(){return"GROUP_SEQ"},_getCacheKey:function(n){switch(n.MENU_TYPE){case 6:case ecount.menu.myPageType:return[ecount.menu.prefixMp,n.MENU_SEQ,n.SUB_MENU].join("#");case 7:case ecount.menu.gwType:return[ecount.menu.prefixGw,n.MENU_SEQ,n.SUB_MENU].join("#");default:return[n.MENU_TYPE,n.MENU_SEQ,n.SUB_MENU].join("#")}},_getSectionData:function(){return{ecPageID:this.ecPageID,delegator:this.delegator,depth:this.depth,mouseoutTimeout:this.mouseoutTimeout,mouseoutTimer:null,comInfo:this.comInfo,versionData:this.versionData,isMasterUser:this.isMasterUser,menuUseFlag:this.menuUseFlag}}},erpDepth1:{controlType:"widget.menuSection.erpDepth1",__mixins:["widget.menuSection.common","widget.menuSection.erp","widget.menuSection.depth1"],updateMyPage:function(n){var t=this.menuItems.find(function(n){return n.getMenuSeq()==ecount.menu.myPageType});t&&n&&(t.setBodyUrl(n.bodyUrl),t.setDefaultChildPrgId(n.childPrgId),t.setDefaultChildMenuSeq(n.childMenuSeq),t.setDefualtGroupSeq(n.group))},_getChildCtrlType:function(n){switch(n.MENU_SEQ){case 6:case ecount.menu.myPageType:return"widget.menuItem.erpMyPageDepth1";default:return"widget.menuItem.erpDepth1"}}},erpDepth2:{controlType:"widget.menuSection.erpDepth2",__mixins:["widget.menuSection.common","widget.menuSection.erp","widget.menuSection.depth2"],_getFilteredGroup:function(n){return n.key==ecount.menu.myPageType||n.items},_getChildCtrlType:function(){return"widget.menuSection.erpDepth2Group"}},erpDepth2Group:{controlType:"widget.menuSection.erpDepth2Group",__mixins:["widget.menuSection.common","widget.menuSection.erp","widget.menuSection.depth2Group"],_getMyPageDataFromAPI:function(n){var t=n.API_PARAM;return this._getAPIVersionKey(t).then(this._getAPIUrl.bind(this,t)).then(this._getMenuDataFromAPI.bind(this,t))},_getChildCtrlType:function(n){return n.MENU_TYPE==ecount.menu.myPageType?"widget.menuItem.erpMyPageDepth2":n.MENU_TYPE==ecount.menu.gwType?"widget.menuItem.erpGroupwareDepth2":"widget.menuItem.erpDepth2"},_getMyPageMainUrl:function(n){return n.MENU_URL},_getMyPageGroup:function(n){return n.filter(function(n){return n.PARENT_MENU_SEQ==ecount.menu.myPageSubMenuSeq})},_setMyPageMenuData:function(n){return n.MENU_URL?Promise.resolve(this.menuItems):this._getMyPageDataFromAPI(n).then(this._initMyPageGroups.bind(this)).then(this._setMyPageGroupChildren.bind(this)).catch(function(n){console.log("ERROR>>>>>>>>>>>>>>>>>>>>>>>> _setMyPageMenuData");console.log(n)})},_setMyPageGroupChildren:function(n){var t=this._getLeafItem(ecount.menu.myPageSubMenuSeq,n);return t?this._setMyPageGroupByLeafItem(t):this._setMyPageGroupByEmptyData(n),ecount.runtime.notify("menu.section2.setMyPageData",this.ecPageID,{group:this.menuItems.map(function(n){return n.getMenuData()}),menuItems:n.filter(this._isGroupItem.bind(this))}),Promise.resolve(n)},_setMyPageGroupByLeafItem:function(n){for(var u=this._getMyPageMainUrl(n),i=n[this._getGroupSeqKey()],r=0,f=this.menuItems.length,t;r<f;r++)t=this.menuItems[r],t.getGroupSeq()==i&&(t.setBodyUrl(u),t.setDefaultChildMenuSeq(n.MENU_SEQ),t.setDefaultChildPrgId(n.PRG_ID));i||(i=ecount.menu.noChildMyPageUrl);ecount.runtime.notify("menu.section2.updateMyPage",this.ecPageID,{ecPageID:this.ecPageID,bodyUrl:u,group:i,childPrgId:n.PRG_ID,childMenuSeq:n.MENU_SEQ})},_setMyPageGroupByEmptyData:function(n){var t;t=n.length?n[0].MENU_NAME:"";ecount.runtime.notify("menu.section2.updateMyPage",this.ecPageID,{ecPageID:this.ecPageID,bodyUrl:ecount.menu.noChildMyPageUrl+t,group:"",prgId:""})},_setMyPageGroups:function(n){var t=widget.generator.control(),i=this.ecview.getChildrenContainer(),r=this._getMyPageGroup(n),u=_.groupBy(n,this._getGroupSeqKey()),f=this.isDraggableEnabled(),e=this.getState(this._IT_SELF,"opt.deleteMode");this.menuItems=r.map(function(n){var i=this._getLeafItem(n.MENU_SEQ,u[n.MYPAGE_GROUP_SEQ]);return n.MENU_URL=i?i.MENU_URL:ecount.menu.noChildMyPageUrl+n.MENU_NAME,this._getChildItem(t,n)}.bind(this));this.menuItems.forEach(function(n){n.render(i);f&&n.enableDraggable();e&&n.enableDeleteMode()})},_setErpMenuData:function(){return Promise.resolve(this.menuItems)},_setLazyLoadedMenuData:function(n){switch(n.MENU_SEQ){case 6:case ecount.menu.myPageType:return this._setMyPageMenuData(n);default:return this._setErpMenuData(n)}},_isGroupItem:function(n){return n.PARENT_MENU_SEQ!=ecount.menu.myPageSubMenuSeq},_initMyPageGroups:function(n){var t=function(n){return n.getMenuId().indexOf(ecount.menu.prefixMp)==0};return this.menuItems.head(t)?Promise.resolve(n):(this._setMyPageGroups(n),Promise.resolve(n))}},erpDepth3:{controlType:"widget.menuSection.erpDepth3",__mixins:["widget.menuSection.common","widget.menuSection.erp","widget.menuSection.depth3"],prefixMp:ecount.menu.prefixMp,prefixGw:ecount.menu.prefixGw,onInitAdditionalSectionOptions:function(n){_.extend(this,{comInfo:n.comInfo})},getFilteredDepth3List:function(n,t){var i=t.MENU_TYPE==ecount.menu.myPageType?t.FOLD_TYPE:t.LEAF_YN=="Y";return i?!!n.head(function(n){return t.MENU_SEQ==n.PARENT_MENU_SEQ}):!0},setMyPageData:function(n){for(var u=n.group,f=_.groupBy(n.menuItems,this._getGroupSeqKey()),i=0,e=u.length,t,r;i<e;i++)t=u[i],r=this.getMenuItemsHierarchy(t,f[t.MYPAGE_GROUP_SEQ]||[]),this._setItemToCache(this._getCacheKey(t),r),this._setMenuItems(r)},_isDepth3Item:function(n,t){switch(n.MENU_TYPE){case 6:case ecount.menu.myPageType:return this._isDepth3MypageItem(n,t);default:return t.DEPTH==3}},_isDepth4Item:function(n,t){switch(n.MENU_TYPE){case 6:case ecount.menu.myPageType:return this._isDepth4MypageItem(n,t);case 7:case ecount.menu.gwType:return this._isDepth4GroupwareItem(n,t);default:return t.DEPTH=="4"}},_isDepth3MypageItem:function(n,t){var i=$.isEmpty(t.GROUP_SEQ);return t.DEPTH==3&&n.MYPAGE_GROUP_SEQ==t.GROUP_SEQ&&!i||t.PARENT_MENU_SEQ==ecount.menu.myPageSubMenuSeq&&(i||t.M_CNT==0)},_isDepth4MypageItem:function(n,t){return t.DEPTH==4},_isDepth4GroupwareItem:function(n,t){return t.DEPTH==3&&$.isEmpty(t.PARENT_MENU_SEQ_ORG)||t.DEPTH==4},_isChildOfDepth3Menu:function(n,t,i){switch(n){case 7:case ecount.menu.gwType:return["@BOARD_NAME","@WORK_BOARD_NAME","@PROJECT_NAME","@MULTI_BOARD_NAME"].contains(t.PARENT_MENU_SEQ_ORG)?[t.MENU_SEQ,t.MENU_CD].join("_")==[i.PARENTMENU_SEQ,i.MENU_CD].join("_"):t.MENU_SEQ==i.PARENT_MENU_SEQ;case 6:case ecount.menu.myPageType:default:return t.MENU_SEQ==i.PARENT_MENU_SEQ}},_getChildCtrlType:function(n){switch(n.MENU_TYPE){case 6:case ecount.menu.myPageType:return"widget.menuItem.erpMyPageDepth3";case 7:case ecount.menu.gwType:return"widget.menuItem.erpGroupwareDepth3";default:return"widget.menuItem.erpDepth3"}},_getChildOfDepth3Item:function(n,t,i){return _.extend(i,{MENU_TYPE:n,PARENT_MENU_SEQ:t.MENU_SEQ,GROUP_SEQ:t.GROUP_SEQ})}},erpMyPageOnlyDepth1:{controlType:"widget.menuSection.erpMyPageOnlyDepth1",__mixins:["widget.menuSection.common","widget.menuSection.erp","widget.menuSection.depth1","widget.menuSection.erpDepth1"]},erpMyPageOnlyDepth2:{controlType:"widget.menuSection.erpMyPageOnlyDepth2",__mixins:["widget.menuSection.common","widget.menuSection.erp","widget.menuSection.depth2","widget.menuSection.erpDepth2"],_getChildCtrlType:function(){return"widget.menuSection.erpMyPageOnlyDepth2Group"}},erpMyPageOnlyDepth2Group:{controlType:"widget.menuSection.erpMyPageOnlyDepth2Group",__mixins:["widget.menuSection.common","widget.menuSection.erp","widget.menuSection.depth2Group","widget.menuSection.erpDepth2Group"]},erpMyPageOnlyDepth3:{controlType:"widget.menuSection.erpMyPageOnlyDepth3",__mixins:["widget.menuSection.common","widget.menuSection.erp","widget.menuSection.depth3","widget.menuSection.erpDepth3"]},webMail:{controlType:"widget.menuSection.webMail",_getGroupSeqKey:function(){return"GROUP_SEQ"},_getAPIVersionKey:function(){return Promise.resolve("")},_getUserInfo:function(){return{}},_getAPIUrl:function(){return"/WMAPI/Login/GetMenu"},_getMenuDataFromAPI:function(n,t){return ecount.menu.getApiData(t)},_getSectionData:function(){return{ecPageID:this.ecPageID,delegator:this.delegator,depth:this.depth,mouseoutTimeout:this.mouseoutTimeout,mouseoutTimer:null,versionData:this.versionData}}},webMailDepth1:{controlType:"widget.menuSection.webMailDepth1",viewName:"widget.view.menuSection.webMailDepth1",__mixins:["widget.menuSection.common","widget.menuSection.webMail","widget.menuSection.depth1","widget.menuSection.erpDepth1"],_getChildCtrlType:function(){return"widget.menuItem.webMailDepth1"}},webMailDepth2:{controlType:"widget.menuSection.webMailDepth2",viewName:"widget.view.menuSection.webMailDepth2",__mixins:["widget.menuSection.common","widget.menuSection.webMail","widget.menuSection.depth2","widget.menuSection.erpDepth2"],_getChildCtrlType:function(){return"widget.menuSection.webMailDepth2Group"},_getDepth2Group:function(n){return _.groupBy(n._dataItems,"PARENT_MENU_SEQ")}},webMailDepth2Group:{controlType:"widget.menuSection.webMailDepth2Group",viewName:"widget.view.menuSection.webMailDepth2Group",__mixins:["widget.menuSection.common","widget.menuSection.webMail","widget.menuSection.depth2Group","widget.menuSection.erpDepth2Group"],_initMyPageGroups:function(n){return this._setMyPageGroups(n),Promise.resolve(n)},_getChildCtrlType:function(){return"widget.menuItem.webMailDepth2"},_isGroupItem:function(n){return n.PARENT_MENU_SEQ!=ecount.menu.myPageSubMenuSeq}},webMailDepth3:{controlType:"widget.menuSection.webMailDepth3",viewName:"widget.view.menuSection.webMailDepth3",__mixins:["widget.menuSection.common","widget.menuSection.webMail","widget.menuSection.depth3","widget.menuSection.erpDepth3"],_getProgressState:function(n){var t="success";return n&&n>70?t="danger":n&&n>50&&(t="warning"),t},_getPercentageState:function(n){var t="";return n||"0"?t=n+"%":n&&n>15&&(t=n+"%"),t},onInitFunctions:function(n,t,i){ecount.control.menu.section.prototype.onInitFunctions.apply(this,arguments);t.functions.webmailQuota={ecFunction:"button",cid:this.id,usageTitle:ecount.resource.LBL22702,addUsageTitle:ecount.resource.LBL12309,usage:i.usage||"",percentage:this._getPercentageState(i.percentage),percentageWidth:this._getPercentageState(i.percentage),progress:this._getProgressState(i.percentage),display:i.display===!1?!1:!0,usageDomainTitle:ecount.resource.LBL22703,domainUsage:i.domainUsage||"",domainPercentage:this._getPercentageState(i.domainPercentage),domainPercentageWidth:this._getPercentageState(i.domainPercentage),isViewDomain:i.isViewDomain,isViewUsage:i.isViewUsage,isTwoLines:i.isViewDomain&&i.isViewUsage?"two-lines":"",domainProgress:this._getProgressState(i.domainPercentage)};this._notifyTogglerState(i.isMenuCollapsed)},getFilteredDepth3List:function(){return!0},getDepth3ChildControl:function(n,t,i){var u=widget.generator.control(),f=this._getSectionData(),r;return f.menuData=this._getDepth3Item(n,t,i),u.define(this._getChildCtrlType(n),t.MENU_SEQ,t.MENU_SEQ).setDataItems(i).setOptions(f),t.HAS_FUNCTION&&(r=[{id:"setting",label:ecount.resource.LBL19307}],t.MENU_SEQ==="Mail-MyInbox"&&r.unshift({id:"new",label:ecount.resource.LBL70644}),(t.MENU_SEQ==="MyContact"||t.MENU_SEQ==="SharedContact")&&r.unshift({id:"newAddr",label:ecount.resource.LBL70208}),(t.MENU_SEQ==="Mail-MyInbox"||t.MENU_SEQ==="MyContact"||t.MENU_SEQ==="SharedContact")&&r.add({id:"orderSetting",label:ecount.resource.LBL08076}),u.hasFn(r)),u.getInstance()},_getDepth3Item:function(n,t){var i={MENU_TYPE:n.MENU_TYPE};return _.extend(t,i)},_isDepth4Item:function(n,t){return t.DEPTH==4},_getChildCtrlType:function(){return"widget.menuItem.webMailDepth3"},toggleUsageContainer:function(n){this.setState("webmailQuota","display",n)},setUsagePercentage:function(n){this.setState("webmailQuota","percentageWidth",this._getPercentageState(n));this.setState("webmailQuota","percentage",this._getPercentageState(n));this.setState("webmailQuota","progress",this._getProgressState(n))},setDomainUsagePercentage:function(n){this.setState("webmailQuota","domainPercentageWidth",this._getPercentageState(n));this.setState("webmailQuota","domainPercentage",this._getPercentageState(n));this.setState("webmailQuota","domainProgress",this._getProgressState(n))},setUsageValue:function(n){this.setState("webmailQuota","usage",n)},setDomainUsageValue:function(n){this.setState("webmailQuota","domainUsage",n)},ON_CLICK:function(n,t,i,r){n.ecRole=="menu.addUsage"?r.command="ON_CLICK_ADD_USAGE":n.ecRole=="menu.showDomainUsage"&&(r.command="ON_CLICK_SHOW_USAGE")}},invoice:{controlType:"widget.menuSection.invoice",_getGroupSeqKey:function(){return"GROUP_SEQ"},_getAPIVersionKey:function(){return Promise.resolve("")},_getUserInfo:function(){return{}},_getAPIUrl:function(){return""},_getMenuDataFromAPI:function(){return ecount.invoiceMenuData},_getSectionData:function(){return{ecPageID:this.ecPageID,delegator:this.delegator,depth:this.depth,mouseoutTimeout:this.mouseoutTimeout,mouseoutTimer:null,versionData:this.versionData}}},invoiceDepth1:{controlType:"widget.menuSection.invoiceDepth1",viewName:"widget.view.menuSection.invoiceDepth1",__mixins:["widget.menuSection.common","widget.menuSection.invoice","widget.menuSection.depth1","widget.menuSection.erpDepth1"],_getChildCtrlType:function(){return"widget.menuItem.invoiceDepth1"}},invoiceDepth2:{controlType:"widget.menuSection.invoiceDepth2",viewName:"widget.view.menuSection.invoiceDepth2",__mixins:["widget.menuSection.common","widget.menuSection.invoice","widget.menuSection.depth2","widget.menuSection.erpDepth2"],_getChildCtrlType:function(){return"widget.menuSection.invoiceDepth2Group"},_getDepth2Group:function(n){return _.groupBy(n._dataItems,"PARENT_MENU_SEQ")}},invoiceDepth2Group:{controlType:"widget.menuSection.invoiceDepth2Group",viewName:"widget.view.menuSection.invoiceDepth2Group",__mixins:["widget.menuSection.common","widget.menuSection.invoice","widget.menuSection.depth2Group","widget.menuSection.erpDepth2Group"],_initMyPageGroups:function(n){return this._setMyPageGroups(n),Promise.resolve(n)},_getChildCtrlType:function(){return"widget.menuItem.invoiceDepth2"},_isGroupItem:function(n){return n.PARENT_MENU_SEQ!=ecount.menu.myPageSubMenuSeq}},invoiceDepth3:{controlType:"widget.menuSection.invoiceDepth3",__mixins:["widget.menuSection.common","widget.menuSection.invoice","widget.menuSection.depth3","widget.menuSection.erpDepth3"],getFilteredDepth3List:function(){return!0},getDepth3ChildControl:function(n,t,i){var r=widget.generator.control(),u=this._getSectionData();return u.menuData=this._getDepth3Item(n,t,i),r.define(this._getChildCtrlType(n),t.MENU_SEQ,t.MENU_SEQ).setDataItems(i).setOptions(u),r.getInstance()},_isDepth4Item:function(n,t){return t.DEPTH==4},_getChildCtrlType:function(){return"widget.menuItem.invoiceDepth3"}},cs:{controlType:"widget.menuSection.cs",_getAPIVersionKey:function(){var n=this._getUserInfo(),i=[n.ComCode,n.UserId].join("_"),r=this.versionData[i].MyPage,t;return n.Version=r,t=Object.toJSON(n).encryptXor("ecount"),Promise.resolve(t)},_getAPIUrl:function(n,t){return["/ECERP/SVC/Popup/GetListCacheMyPageCsV2","?jsonp=eccb&v=",t].join("")},_getCacheKey:function(n){return[ecount.menu.prefixMp,n.MENU_SEQ,n.SUB_MENU].join("#")},_getGroupSeqKey:function(){return"PARENT_MENU_SEQ_ORG"},_getSectionData:function(){return{ecPageID:this.ecPageID,delegator:this.delegator,depth:this.depth,mouseoutTimeout:this.mouseoutTimeout,mouseoutTimer:null,comInfo:this.comInfo,versionData:this.versionData,isMasterUser:this.isMasterUser,menuUseFlag:this.menuUseFlag}}},csDepth1:{controlType:"widget.menuSection.csDepth1",__mixins:["widget.menuSection.common","widget.menuSection.cs","widget.menuSection.depth1","widget.menuSection.erpDepth1"],_getChildCtrlType:function(){return"widget.menuItem.csDepth1"}},csDepth2:{controlType:"widget.menuSection.csDepth2",__mixins:["widget.menuSection.common","widget.menuSection.cs","widget.menuSection.depth2","widget.menuSection.erpDepth2"],_getChildCtrlType:function(){return"widget.menuSection.csDepth2Group"}},csDepth2Group:{controlType:"widget.menuSection.csDepth2Group",__mixins:["widget.menuSection.common","widget.menuSection.cs","widget.menuSection.depth2Group","widget.menuSection.erpDepth2Group"],_getChildCtrlType:function(){return"widget.menuItem.csDepth2"},_setLazyLoadedMenuData:function(n){return this._setMyPageMenuData(n)},_isGroupItem:function(n){return n.PARENT_MENU_SEQ!=ecount.menu.myPageSubMenuSeq}},csDepth3:{controlType:"widget.menuSection.csDepth3",__mixins:["widget.menuSection.common","widget.menuSection.cs","widget.menuSection.depth3","widget.menuSection.erpDepth3"],onInitAdditionalSectionOptions:function(n){_.extend(this,{comInfo:n.comInfo})},getFilteredDepth3List:function(n,t){return t.FOLD_TYPE?!!n.head(function(n){return t.MENU_SEQ==n.PARENT_MENU_SEQ}):!0},setMyPageData:function(n){for(var e=n.group,o=_.groupBy(n.menuItems,this._getGroupSeqKey()),s=n.menuItems.filter(function(n){return n.DEPTH==4}),r=0,h=e.length,t,u,f,i;r<h;r++)t=e[r],u=o[t.MYPAGE_GROUP_SEQ]||[],i=[],u.forEach(function(n){i=i.concat(s.filter(function(t){return n.MENU_SEQ==t.PARENT_MENU_SEQ}))}),f=this.getMenuItemsHierarchy(t,u.concat(i)),this._setItemToCache(this._getCacheKey(t),f),this._setMenuItems(f)},_isDepth3Item:function(n,t){var i=$.isEmpty(t.GROUP_SEQ);return t.DEPTH==3&&n.MYPAGE_GROUP_SEQ==t.GROUP_SEQ&&!i||t.PARENT_MENU_SEQ==ecount.menu.myPageSubMenuSeq&&(i||t.M_CNT==0)},_isDepth4Item:function(n,t){return t.DEPTH==4},_getChildCtrlType:function(){return"widget.menuItem.csDepth3"},_getGroupItem:function(n){return _.extend({},n,{MENU_TYPE:ecount.menu.myPageType,GROUP_SEQ:n.MENU_SEQ_ORG})}},userpay:{controlType:"widget.menuSection.userpay",_getAPIVersionKey:function(){var n=this._getUserInfo(),r=[n.ComCode,n.UserId].join("_"),t,i;return t=this.versionData[r].MyPage,n.Version=t,i=Object.toJSON(n).encryptXor("ecount"),Promise.resolve(i)},_getUserInfo:function(){return{ComInfo:this.comInfo,ComCode:ecount.config.company.COM_CODE.toUpperCase(),UserId:this.empInfo.EMP_CD.trim().toUpperCase(),DomainType:"P",LanType:ecount.user.LAN_TYPE}},_getGroupSeqKey:function(){return"GROUP_SEQ"},_getSectionData:function(){return{ecPageID:this.ecPageID,delegator:this.delegator,depth:this.depth,mouseoutTimeout:this.mouseoutTimeout,mouseoutTimer:null,empInfo:this.empInfo,comInfo:this.comInfo,nowDt:this.nowDt,currYear:this.currYear,versionData:this.versionData}},_getAPIUrl:function(n,t){return["/ECERP/SVC/Popup/GetListCacheMyPageUserPayV3","?jsonp=eccb&v=",t].join("")}},userpayDepth1:{controlType:"widget.menuSection.userpayDepth1",__mixins:["widget.menuSection.common","widget.menuSection.userpay","widget.menuSection.depth1","widget.menuSection.erpDepth1"],onInitAdditionalSectionOptions:function(n){var t=n.nowDt.split(/[-\s:TZ]/),i=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5]);_.extend(this,{menuType:n.menuType,empInfo:n.empInfo,comInfo:n.comInfo,currYear:i.getFullYear(),nowDt:n.nowDt})},_getChildCtrlType:function(){return"widget.menuItem.userpayDepth1"}},userpayDepth2:{controlType:"widget.menuSection.userpayDepth2",__mixins:["widget.menuSection.common","widget.menuSection.userpay","widget.menuSection.depth2","widget.menuSection.erpDepth2"],onInitAdditionalSectionOptions:function(n){var t=n.nowDt.split(/[-\s:TZ]/),i=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5]);_.extend(this,{menuType:n.menuType,empInfo:n.empInfo,comInfo:n.comInfo,currYear:i.getFullYear(),nowDt:n.nowDt,sectionLv1:n.sectionLv1})},_getChildCtrlType:function(){return"widget.menuSection.userpayDepth2Group"}},userpayDepth2Group:{controlType:"widget.menuSection.userpayDepth2Group",__mixins:["widget.menuSection.common","widget.menuSection.userpay","widget.menuSection.depth2Group","widget.menuSection.erpDepth2Group"],onInitAdditionalSectionOptions:function(n){_.extend(this,{menuType:n.menuType,empInfo:n.empInfo,comInfo:n.comInfo,currYear:n.currYear,nowDt:n.nowDt,sectionLv1:n.sectionLv1})},_getChildCtrlType:function(){return"widget.menuItem.userpayDepth2"},_setLazyLoadedMenuData:function(n){return this._setMyPageMenuData(n)},_setMyPageGroupByLeafItem:function(n){for(var r=this._getMyPageMainUrl(n),u=n.GROUP_SEQ,i=0,f=this.menuItems.length,t;i<f;i++)t=this.menuItems[i],t.getGroupSeq()==u&&(t.setBodyUrl(r),t.setDefaultChildMenuSeq(n.MENU_SEQ),t.setDefaultChildPrgId(n.PRG_ID));ecount.runtime.notify("menu.section2.updateMyPage",this.ecPageID,{ecPageID:this.ecPageID,bodyUrl:r,group:u,childPrgId:n.PRG_ID,childMenuSeq:n.MENU_SEQ})},_setMyPageGroups:function(n){var t=widget.generator.control(),i=this.ecview.getChildrenContainer(),r=this.isDraggableEnabled(),u=this.getState(this._IT_SELF,"opt.deleteMode"),f=this._getMyPageGroup(n),e=_.groupBy(n,this._getGroupSeqKey());this.menuItems=f.map(function(n){var i=this._getLeafItem(n.MENU_SEQ,e[n.MYPAGE_GROUP_SEQ]);return n.MENU_URL=i?i.MENU_URL:ecount.menu.noChildMyPageUrl+n.MENU_NAME,this._getChildItem(t,n)}.bind(this));this.menuItems.forEach(function(n){n.render(i);r&&n.enableDraggable();u&&n.enableDeleteMode()})},_getLeafItem:function(n,t){var r=_.some(t,function(t){return t.MENU_SEQ==n&&t.DEPTH==1}),i=t.find(r?this._isMyPageLeafItemDepth2.bind(this,n):this._isMyPageLeafItem);return i||(i=t.head(function(n){return n[this._getGroupSeqKey()]&&n.MENU_URL}.bind(this))),i||(i=t.head(function(t){return t.PARENT_MENU_SEQ==n&&t.MENU_URL})),i},_isMyPageLeafItemDepth2:function(n,t){return t.MAIN_PROGRAM=="Y"&&t.PARENT_MENU_SEQ==n},_isUserpayGroup:function(n){return n.PARENT_MENU_SEQ==ecount.menu.myPageSubMenuSeq}},userpayDepth3:{controlType:"widget.menuSection.userpayDepth3",__mixins:["widget.menuSection.common","widget.menuSection.userpay","widget.menuSection.depth3","widget.menuSection.erpDepth3"],onInitAdditionalSectionOptions:function(n){var t=n.nowDt.split(/[-\s:TZ]/),i=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5]);_.extend(this,{menuType:n.menuType,empInfo:n.empInfo,comInfo:n.comInfo,currYear:i.getFullYear(),nowDt:n.nowDt})},_getChildCtrlType:function(){return"widget.menuItem.userpayDepth3"},_getGroupItem:function(n){return _.extend({},n,{MENU_TYPE:ecount.menu.myPageType,MENU_SEQ_ORG:n.PARENT_GROUP_SEQ,GROUP_SEQ:n.PARENT_GROUP_SEQ})}},horizontal:{controlType:"widget.menuSection.horizontal",viewName:"widget.view.menuSection.horizontal",onInitState:function(n,t,i){ecount.control.menu.section.prototype.onInitState.apply(this,arguments);$.extend(this.__state,{activatedIndexes:i._activedIndexes||[]})},_getMenuItems:function(n){var t=widget.generator.control();return n._dataItems.filter(function(n){return!!(n.title&&n.link)}).map(function(i,r){return t.define("widget.menuItem.horizontal",this.id,this.name).setDataItems(i).setOptions($.extend({containerName:this.containerName,menuIndex:r,isActivated:!!n._activedIndexes.contains(r)},this._getSectionData())).getInstance()}.bind(this))},ON_CLICK:function(n){n.ecRole=="menuItem"&&(this.setState(this._IT_SELF,"activatedItemId",n.id),this.menuItems.forEach(function(t,i){t.setActivated(i==n.id)}))}},navigation:{controlType:"widget.menuSection.naviation",viewName:"widget.view.menuSection.navigation",onInitState:function(n,t,i){ecount.control.menu.section.prototype.onInitState.apply(this,arguments);var r=i._dataItems.find(function(n){return n.isActived}),u=r?r.id:"";$.extend(this.__state,{activatedItemId:u})},_getMenuItems:function(n){var t=widget.generator.control();return n._dataItems.map(function(n,i){return t.define("widget.menuItem.navigation").setDataItems(n).setOptions($.extend({menuIndex:i},this._getSectionData())).getInstance()}.bind(this))},ON_CLICK:function(n){n.ecRole=="menuItem"&&(this.setState(this._IT_SELF,"activatedItemId",n.cid),this.menuItems.forEach(function(t){t.setActivated(t.id==n.cid)}))}},create:function(n){var t,u,f,i,r,e,o,s;if(n=n||"_default",t=widget.menuSection.repository[n]||{},u=ecount.control.menu.section,widget.menuSection._baseLoaded||(ecount.control.loadRepository(ecount.control.menu.section,ecount.control.view.menu.section,"widget.menuSection"),n!="_default")){if(arguments.length>1){ecount.control.mountMixinWidget(widget.menuSection,t,"widget.menuSection",[].slice.call(arguments,0));return}if(t.__inheritParent&&~t.__inheritParent.indexOf("widget.menuSection")){f=t.controlType.replace("widget.menuSection.","");ecount.control.mountMixinWidget(widget.menuSection,t,"widget.menuSection",[widget.menuSection,f]);return}if(!widget.menuSection[n]){if(u=t.__inheritParent?ecount.common.createNamespace(t.__inheritParent):widget.menuSection,t.__mixins){for(i={},r=0,e=t.__mixins.length;r<e;r++)o=t.__mixins[r].split("."),s=widget.menuSection.repository[o.pop()],i=_.extend(i,s);t=_.extend(i,t)}ecount.control.mountWidget(widget.menuSection,n,u,t)}}}}};widget.menuItem={};widget.menuItem._baseLoaded=!1;widget.menuItem._export=function(){return{_default:{controlType:"widget.menuItem",createView:function(){return this.ecview=new widget.view.menuItem}},common:{controlType:"widget.menuItem.common",viewName:"widget.view.menuItem.common",index:null,menuData:null,menuItems:null,comInfo:null,versionData:null,isMasterUser:null,showDeleteButtonTimer:null,showDeleteButtonTimeout:ecount.common.mouseHoverInTime,hideDeleteButtonTimer:null,boardMenuCdRegex:/:?(M07060)|(M07070)|(M07070)/i,boardGroupMenuCdRegex:/:?(M07010)|(M07030)|(M07050)|(M07060)|(M07070)/i,projectMenuMenuCdRegex:/:?(M07070)/i,depth:"",getMenuUIType:function(){return ecount.user&&ecount.user.UI_MENU_TYPE||"1"},setEcPath:function(){this.ecPath=[this.ecPageID,"menu","","section"+this.depth,"",this.id,this.pcid].join(ecount.separator.ecPath)},initializeOptions:function(n,t){this.onInitDefaultItemOptions(n,t);this.onInitAdditionalItemOptions(n,t)},onInitDefaultItemOptions:function(n){if(_.extend(this,{id:this._getMenuId(n.menuData),comInfo:n.comInfo,versionData:n.versionData,isMasterUser:n.isMasterUser,hasItemParent:n.hasItemParent,index:n.index}),this.setEcPath(),ecount.control.menu.item.prototype.initializeOptions.apply(this,arguments),_.extend(this,{mouseoutTimeout:n.mouseoutTimeout}),this.menuData=this._getInitMenuData(n.menuData),this.delegator&&this.depth===3)this.delegator.on({"item.closeGruop":this.closeGruop.bind(this)})},closeGruop:function(n){n&&n.menuData&&n.menuData.PARENT_MENU_SEQ===this.cid&&!this.getClickedState()&&this.getListSelectedOptState()&&this.onListedItemMouseoutHandler&&this.onListedItemMouseoutHandler()},onInitAdditionalItemOptions:function(){return{}},onInitFunctions:function(n,t,i){ecount.control.menu.item.prototype.onInitFunctions.apply(this,arguments);this._initDefaultFunctions(n,t,i);ecount.menuCommand.item.setAdditionalFunction(this,n,t,i)},onInitArrowButtonFunction:function(n){n.functions.navArrow={ecFunction:"button",cid:this.id,"style.display":_.isArray(this.menuItems)&&this.menuItems.length?!0:!1}},onInitState:function(n,t,i){ecount.control.menu.item.prototype.onInitState.apply(this,arguments);_.extend(this.__state,this._getDefaultItemState(n,t,i))},_getDefaultItemState:function(n,t,i){return{index:0,ecpath:this.ecpath,ecPageID:this.ecPageID,domId:this._getDomId(n,t,i),label:i.label||this.menuData.MENU_NAME,containerId:this._getContainerId(n,t,i),"style.display":this._getDisplayState(n,t,i),"style.dropAccept":!1,"attr.href":this._getMenuHash(n,t,i),"attr.selected":!1,"opt.isClicked":!1,"opt.hasCursor":!1,"opt.draggable":!1,"opt.droppable":!1,"opt.dragMode":!1,"opt.deleteMode":!1,"opt.isHighlighted":!1}},onInitComponent:function(n,t,i,r){_.extend(r,{})},getParentMenuId:function(){return this._getMenuDataAttrs().PARENTMENU_SEQ},getMenuId:function(){return this._getMenuDataAttrs().MENU_ID},getChildMenuData:function(){},getMenuType:function(){return this.getMenuDataAttrs().MENU_TYPE},getBodyUrl:function(){return this._getMenuDataAttrs().BODY_URL},getMenuSeq:function(){return this._getMenuDataAttrs().MENU_SEQ},getGroupSeq:function(){return this.getMenuDataAttrs().GROUP_SEQ},getPrgId:function(){return this.getMenuDataAttrs().PRG_ID},getAPIParam:function(){return{}},getMenuData:function(){return _.extend(this._getMenuDataAttrs(),{MENU_TARGET:this.menuData.MENU_TARGET||"mainbody",DEPTH:this.depth,POSITION:this.getContainerBoundary(),API_PARAM:this.getAPIParam()})},getMenuDataAttrs:function(){return this._getMenuDataAttrs()},getDisplayState:function(){return this.getState(this._IT_SELF,"style.display")},getHighlightedState:function(){return this.getState(this._IT_SELF,"opt.isHighlighted")},getSelectedState:function(){return this.getState(this._IT_SELF,"attr.selected")},getDraggableTarget:function(){if(this.ecview)return this.ecview.getDraggableTarget()},getNotDraggableTarget:function(n){if(this.ecview)return n||(n=this._getDefaultNotDraggableMsg()),this.ecview.getNotDraggableTarget(n)},getRawDataOfChildren:function(){return this.menuItems.map(function(n){return n.menuData})},getChildrenCount:function(){return 0},getClickedState:function(){return this.getState(this._IT_SELF,"opt.isClicked")},getEditGuideIndex:function(){if(this.ecview)return this.ecview.getEditGuideIndex()},setActivatedAttrState:function(n){this.setState(this._IT_SELF,"attr.selected",n,!0)},getActivatedAttrState:function(){return this.getState(this._IT_SELF,"attr.selected")},setBodyUrl:function(n){this.menuData.MENU_URL=n},setDefaultChildMenuSeq:function(n){this.menuData.DEFAULT_MENU_SEQ=n},setDefaultChildPrgId:function(n){this.menuData.DEFAULT_PRG_ID=n},setDefualtGroupSeq:function(n){this.menuData.GROUP_SEQ=n},setSelectedState:function(n){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoverTimer);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoutTimer);this.setActivatedAttrState(n)},setClickedState:function(n){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoutTimer);this.setActivatedAttrState(n);this.setState(this._IT_SELF,"opt.isClicked",n,!0)},setDropAcceptState:function(n){if(this.setState(this._IT_SELF,"style.dropAccept",n,!0),this.menuItems)for(var t=0,i=this.menuItems.length;t<i;t++)this.menuItems[t].setDropAcceptState(n)},setDeleteButtonState:function(n){this.setState("deleteButton","style.display",n)},setEditGuide:function(n,t){this.menuItems.head(function(t){return t.getMenuSeq()==n})&&this.ecview&&this.ecview.setEditGuide(n,t)},removeEditGuide:function(){this.ecview&&this.ecview.removeEditGuide()},editMenuItemOrder:function(n){if(this.ecview){var r=widget.generator.control(),t=this.menuItems.findIndex(function(t){return t==n}),i=this.getEditGuideIndex();t>-1&&this.menuItems.splice(t,1);i>-1&&(n=this._getChildItem(r,this.menuData,n.menuData),this.menuItems.splice(i,0,n))}},hideMenuItemTemporarily:function(){this.ecview&&this.ecview.hideMenuItemTemporarily()},hideFromMyMenu:function(){this.setState(this._IT_SELF,"style.display",!1);this.menuData.IS_MY_MENU="N"},restoreTemporarilyHiddenItem:function(){this.ecview&&this.ecview.restoreTemporarilyHiddenItem();for(var n=0,i=this.menuItems.length,t;n<i;n++)t=this.menuItems[n],t.restoreTemporarilyHiddenItem()},isChildMenuData:function(n){return this.getMenuSeq()==n.PARENT_MENU_SEQ},isItemParent:function(n){if(this.menuItems)for(var t=0,i=this.menuItems.length;t<i;t++)if(this.menuItems[t]===n)return!0;return!1},isDraggable:function(){return this.getState(this._IT_SELF,"opt.draggable")},clearDeselectAction:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoutTimer)},clearSelectAction:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoverTimer)},clearDropAcceptState:function(){this.setState(this._IT_SELF,"style.dropAccept",!0);this.setState("deleteButton","style.display",!1);this.ecview&&this.ecview.clearDropAcceptState()},removeDeleteButton:function(){this.setDeleteButtonState(!1)},deselectItem:function(){this.setActivatedAttrState(!1);this.hoverModeRestore()},hoverModeRestore:function(){this.hasFocus()||ecount.runtime.notify("menu.hoverModeRestore",this.ecPageID)},hasFocus:function(){return this.getState(this._IT_SELF,"opt.hasCursor")},hasChildren:function(){return this.menuItems&&!!this.menuItems.length},enableDraggable:function(){if(this.setState(this._IT_SELF,"opt.draggable",!0),this.menuItems)for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].enableDraggable()},enableDroppable:function(){if(this.setState(this._IT_SELF,"opt.droppable",!0,!0),this.menuItems)for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].enableDroppable()},enableDragMode:function(){this.setState(this._IT_SELF,"opt.dragMode",!0);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].enableDragMode()},enableDeleteMode:function(){this.setState(this._IT_SELF,"opt.deleteMode",!0,!0);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].enableDeleteMode()},disableDraggable:function(){if(this.setState(this._IT_SELF,"opt.draggable",!1),this.menuItems)for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].disableDraggable()},disableDroppable:function(){if(this.setState(this._IT_SELF,"opt.droppable",!1,!0),this.menuItems)for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].disableDroppable()},disableDragMode:function(){this.setState(this._IT_SELF,"opt.dragMode",!1);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].disableDragMode()},disableDeleteMode:function(){this.setState(this._IT_SELF,"opt.deleteMode",!1);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].disableDeleteMode()},removeMenuItem:function(n){var t,i;this.menuItems&&this.menuItems.length&&(t=this.menuItems.findIndex(function(t){return t.getMenuId()===n.MENU_ID}),t>-1&&this.menuItems[t].hideFromMyMenu(),i=this.menuItems.all(function(n){return!n.getDisplayState()}),i&&this.hideFromMyMenu())},serialize:function(){var n=_.cloneDeep(this.menuData);return n.MENU_NM=n.MENU_NAME,n.SPREAD_YN=n.S_FLAG=="N"||n.FOLD_TYPE=="F"?"N":"Y",n.USE_YN=n.IS_MY_MENU,this.menuItems.length&&(n.children=this.menuItems.map(function(n,t){return _.extend(n.serialize(),{SORT:t})})),n},onSelectedHandler:function(){var n=ecount.menuCommand.item.getMouseoverTimeout(this);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoverTimer);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoutTimer);this.mouseoverTimer=ecount.global.setTimeout(this.ecPageID,function(){this.setActivatedAttrState(!0)}.bind(this),n)},onDeselectedHandler:function(){var n=ecount.menuCommand.item.getMouseoutTimeout(this);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoverTimer);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoutTimer);this.mouseoutTimer=ecount.global.setTimeout(this.ecPageID,this.deselectItem.bind(this),n)},onDeselectedHoverModeRestore:function(){var n=ecount.menuCommand.item.getMouseoutTimeout(this);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoverTimer);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoutTimer);this.mouseoutTimer=ecount.global.setTimeout(this.ecPageID,this.hoverModeRestore.bind(this),n)},onSelectedActivationHandler:function(){},onMouseoverHandler:function(n,t,i){ecount.menuCommand.item.mouseoverAction(this,n,t,i)},onDeleteButtonMouseoverHandler:function(n){this.isDraggable()&&this.getState(this._IT_SELF,"opt.deleteMode")&&(n.eventTriggerFromInterernalTarget||(ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.showDeleteButtonTimer),this.showDeleteButtonTimer=ecount.global.setTimeout(this.ecPageID,this.setDeleteButtonState.bind(this,!0),this.showDeleteButtonTimeout)))},onDeleteButtonMouseoutHandler:function(n){this.getState(this._IT_SELF,"opt.deleteMode")&&(n.eventTriggerFromInterernalTarget||(ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.hideDeleteButtonTimer),this.hideDeleteButtonTimer=ecount.global.setTimeout(this.ecPageID,function(){this.getState(this._IT_SELF,"opt.hasCursor")||(ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.showDeleteButtonTimer),this.setDeleteButtonState(!1))}.bind(this),100)))},onMouseoutHandler:function(n,t,i){this.getClickedState()||ecount.menuCommand.item.mouseoutAction(this,n,t,i)},onClickHandler:function(n,t,i){if(this.getSelectedState()&&this.menuData.DEPTH=="3"&&!this._isFromChild(n,t,i)&&!n.ecRole&&!ecount.isResponsiveMode()||n.ecRole=="menu.navarrow"&&!ecount.isResponsiveMode()){this.onNavArrowClickHandler(n,t,i);return!1}if(this._isFromChild(n,t,i)){if(n.ecRole=="button.delete"){this.removeMenuItem(i.item);return}}else i.item||(i.item=this.getMenuData())},onNavArrowClickHandler:function(){},_initDefaultFunctions:function(n,t){t.functions.deleteButton={ecFunction:"button",cid:this.id,"style.display":!1}},_getMenuId:function(n){return""+n.MENU_SEQ},_getDomId:function(){return"ma"+this.menuData.MENU_SEQ},_getInitMenuData:function(n){return n},_getTargetUrl:function(n){return n.MENU_URL},_getDisplayState:function(){return!0},_getMenuDataAttrs:function(n){return _.extend({DEPTH:this.depth,MENU_ID:this._getMenuId(n),BODY_URL:this._getTargetUrl(n)},this.menuData)},_getDefaultNotDraggableMsg:function(){return""},_isFromChild:function(){return!1},isNewIconLayerUse:function(){var n=ecount&&ecount.isMobile===!1;return n&&!!~_.indexOf(document.body.classList,"responsive-web")&&(n=matchMedia("(min-width: 769px)").matches),n},showNewIconLayer:function(n,t,i){var r=this.isNewIconLayerUse();if(ecount.layer&&ecount.layer.dropdown&&r){var u=ecount.common.makeServiceKey(this.ecPath,n),f=t.classList.contains("nav-option")?$(t).find(".new-window")[0]:t,e={type:"dropdown",templateType:"droprightArrow",ecPageID:this.ecPageID,ownerKey:this.ecIKey,serviceKey:u,items:[{id:"newWindow",label:ecount.resource.LBL93000},{id:"newTab",label:ecount.resource.LBL20965}],dataItem:i,directionX:"right",_forcedDisplayPosition:"top",boundary:ec$.getZoomedBoundary(f)};ecount.layer.show(e)}},ON_MOUSEOVER:function(n,t,i,r){if(_.get(r,"item.DEPTH")!=2||this.depth!=1){this.onDeleteButtonMouseoverHandler(n,t,r);if(n.eventTriggerFromInternalTarget&&n.ecRole!="menu.newwindow"&&!r.item||(this.setState(this._IT_SELF,"opt.hasCursor",!0,!0),this.getState(this._IT_SELF,"opt.draggable"))||this.getState(this._IT_SELF,"opt.dragMode"))return!1;this.setState(this._IT_SELF,"opt.isHighlighted",!0);this.onMouseoverHandler(n,t,r);n.ecRole!="menu.newwindow"||r.item||this.showNewIconLayer(n.cid,t.target.parentElement,this.getMenuData());r.item=this.getMenuData()}},getCidByServiceKey:function(n){return n?n.split(ecount.popupIDDelimiter).pop():null},getServiceKey:function(n){if(n){if(n.hasAttribute("data-servicekey"))return n.getAttribute("data-servicekey");if(!!~Array.prototype.indexOf.call(n.classList,"arrow"))return n.parentElement.getAttribute("data-servicekey")}return null},ON_MOUSEOUT:function(n,t,i,r){var u,f;if(_.get(r,"item.DEPTH")!=2||this.depth!=1){this.onDeleteButtonMouseoutHandler(n,t,r);if((u=this.getServiceKey(t.relatedTarget),u&&(f=this.getCidByServiceKey(u),f===n.cid))||(ecount.layer.clear(),n.eventTriggerFromInternalTarget)||(this.setState(this._IT_SELF,"opt.hasCursor",!1,!0),this.getState(this._IT_SELF,"opt.draggable"))||this.getState(this._IT_SELF,"opt.dragMode"))return!1;this.setState(this._IT_SELF,"opt.isHighlighted",!1,!0);this.onMouseoutHandler(n,t,r);r.item=this.getMenuData()}},ON_CLICK:function(n,t,i,r){if(this.getState(this._IT_SELF,"opt.dragMode"))return!1;n.suspend=!0;return this.onClickHandler(n,t,r)},ON_MOUSEOUT_SERVICE:function(n,t,i,r){if(n.serviceKey){var u=this.getCidByServiceKey(n.serviceKey),f=t.relatedTarget&&t.relatedTarget.tagName=="A"&&t.relatedTarget.getAttribute("data-cid")===u;if(!n.eventTriggerFromInternalTarget&&!f&&(this.getFunction("newWinIcon")||this.getFunction("fn"))){this.setState(this._IT_SELF,"opt.hasCursor",!1,!0);this.setState(this._IT_SELF,"opt.isHighlighted",!1,!0);this.onMouseoutHandler(n,t,r);this.delegator&&this.delegator.triggerEvent("item.closeGruop",{menuData:this.menuData});this.delegator&&this.delegator.triggerEvent("section.menuPanelClose",{});ecount.menuCommand.item.mouseoutTrigger(this,n,t,r)}}},ON_CLICK_SERVICE:function(n,t,i,r){if(this.getState(this._IT_SELF,"opt.dragMode"))return!1;if(this.getFunction("newWinIcon")){this.setState(this._IT_SELF,"opt.hasCursor",!1,!0);this.setState(this._IT_SELF,"opt.isHighlighted",!1,!0);this.onMouseoutHandler(n,t,r);if(r&&r.originId){var u=this.getMenuItemByMenuId?this.getMenuItemByMenuId(r.controlID):this,f=u&&u.getMenuData();u&&f&&this.delegator&&(this.delegator&&this.delegator.triggerEvent("container.openNewSite",{selected:r.originId,menuData:f}),this.delegator&&this.delegator.triggerEvent("item.closeGruop",{menuData:f}),this.delegator&&this.delegator.triggerEvent("section.menuPanelClose",{}));ecount.menuCommand.item.mouseoutTrigger(this,n,t,r)}}},printLogState:function(){this._printLogState&&this._printLogState.apply(this,arguments)}},erp:{controlType:"widget.menuItem.erp",isRedirecedtMenu:function(n){return["123","130","145","149","154","759"].contains(n.MENU_SEQ)},isGwMenu:function(){var n=this._getMenuDataAttrs();return n.PRG_ID&&n.PRG_ID.indexOf("E07")==0},_getTargetUrl:function(n){return this.isRedirecedtMenu(n)?n.HELP_URL:n.MENU_URL},_getBoardCd:function(n){return n.MENU_SEQ>9e3&&n.MENU_URL?this._getBoardCodeInfoFromUrl(n.MENU_URL):""},_getDisplayState:function(n,t,i){return i.menuData.IS_MY_MENU!="N"},_getBoardCodeInfoFromUrl:function(n){var t=/(EGP004M)|(EGV004M)/gi.exec(n),i="",r;return t&&(r=n.split("?")[1].split("&"),t.shift(),(t[0]||t[1])&&(i=r[0].split("=")[1])),i}},depth1:{controlType:"widget.menuItem.depth1",viewName:"widget.view.menuItem.depth1",depth:1,onInitState:function(n,t,i){ecount.control.menu.item.prototype.onInitState.apply(this,arguments);_.extend(this.__state,this._getDefaultItemState(n,t,i),{"style.align":"center"})},getParentMenuId:function(){return""},onMouseoutHandler:function(n,t,i){ecount.menuCommand.item.mouseoutAction(this,n,t,i)},_getMenuDataAttrs:function(){return _.extend({DEPTH:this.depth,MENU_ID:this._getMenuId(this.menuData),BODY_URL:this._getTargetUrl(this.menuData)},this.menuData,this._getDepth1Attrs(this.menuData))},_getDepth1Attrs:function(){return{}}},depth2:{controlType:"widget.menuItem.depth2",viewName:"widget.view.menuItem.depth2",anchorMouseoverTimer:null,anchorMouseoutTimer:null,anchorMouseoverTimeout:ecount.common.mouseHoverInTime,anchorMouseoutTimeout:ecount.common.mouseHoverOutTime,depth:2,getParentMenuId:function(){return this._getMenuDataAttrs().PARENT_MENU_SEQ},deselectItem:function(){this.setActivatedAttrState(!1);ecount.runtime.notify("menu.section2.deselectItem",this.ecPageID,{ecPageID:this.ecPageID,item:this.getMenuData()})},onAnchorMouseoverHandler:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.anchorMouseoverTimer);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.anchorMouseoutTimer);this.anchorMouseoverTimer=ecount.global.setTimeout(this.ecPageID,function(){this.setState(this._IT_SELF,"opt.anchorSelected",!0)}.bind(this),this.anchorMouseoverTimeout)},onAnchorMouseoutHandler:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.anchorMouseoverTimer);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.anchorMouseoutTimer);this.anchorMouseoutTimer=ecount.global.setTimeout(this.ecPageID,function(){this.setState(this._IT_SELF,"opt.anchorSelected",!1)}.bind(this),this.anchorMouseoutTimeout)},onMouseoverHandler:function(n,t,i){n.ecRole=="menu.anchor"&&ecount.menuCommand.item.anchorMouseoverAction(this,n,t,i);ecount.menuCommand.item.mouseoverAction(this,n,t,i)},onMouseoutHandler:function(n,t,i){this.getClickedState()||(n.ecRole=="menu.anchor"&&ecount.menuCommand.item.anchorMouseoutAction(this,n,t,i),ecount.menuCommand.item.mouseoutAction(this,n,t,i))},_getMenuHash:function(){return["#menuType=",this.menuData.MENU_TYPE,"&menuSeq=",this.menuData.MENU_SEQ,"&groupSeq=",this.menuData.MENU_SEQ,"&prgId=",this.menuData.PRG_ID].join("")},_getMenuDataAttrs:function(){var n=this.menuData;return _.extend({},n,{DEPTH:this.depth,MENU_ID:this._getMenuId(n),MENU_TYPE:n.PARENT_MENU_SEQ,BODY_URL:this._getTargetUrl(n)},this._getDepth2Attrs(n))},_getDepth2Attrs:function(n){return{GROUP_SEQ:n.MENU_SEQ}}},depth3:{controlType:"widget.menuItem.depth3",viewName:"widget.view.menuItem.depth3",listedItemMouseoverTimer:null,listedItemMouseoutTimer:null,showNewWinIconTimer:null,hideNewWinIconTimer:null,listedItemMouseoverTimeout:ecount.common.mouseHoverInTime,listedItemMouseoutTimeout:ecount.common.mouseHoverOutTime,showNewWinIconTimeout:ecount.common.LAYER_DISAPPEAR_DELAY_400,depth:3,initializeTimeout:function(){ecount.control.menu.item.prototype.initializeTimeout.apply(this,arguments);_.extend(this,{listedItemMouseoverTimeout:this.listedItemMouseoverTimeout,listedItemMouseoutTimeout:this.listedItemMouseoutTimeout,showNewWinIconTimeout:this.showNewWinIconTimeout})},onInitState:function(n,t,i){ecount.control.menu.item.prototype.onInitState.apply(this,arguments);var r=this._getIsClosedState(n,t,i);_.extend(this.__state,this._getDefaultItemState(n,t,i),{"attr.isClosed":this.getMenuUIType()==="3"?!0:r,"opt.isClosed":r,"opt.liSelected":!1})},getParentMenuId:function(){return this._getMenuDataAttrs().PARENT_MENU_SEQ},getChild:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t],n(i))return i},getMenuItem:function(n){return this.menuItems[n]},getVisibleMenuItemByIndex:function(n){return this.menuItems.filter(function(n){return n.getDisplayState()})[n]},getVisibleMenuItemCount:function(){return this.menuItems.filter(function(n){return n.getDisplayState()}).length},getSelectedItem:function(){return this.menuItems.find(function(n){return n.getSelectedState()})},getHighlightedItem:function(){return this.menuItems.find(function(n){return n.getHighlightedState()})},getMenuItemByBodyUrl:function(n){var t=this._getMatchedChildren(function(t){return t.getMenuDataAttrs().BODY_URL==n});return t?t:this._getMenuDataAttrs().BODY_URL==n?this:void 0},getMenuItemByMatch:function(n){var t=this._getMatchedChildren(function(t){return _.isMatch(t.getMenuDataAttrs(),n)});return t?t:_.isMatch(this.getMenuDataAttrs(),n)?this:void 0},getMenuItemByMenuId:function(n){return this.getMenuId()==n?this:this.getChild(function(t){return t.getMenuId()==n})},getMenuItemByMenuSeq:function(n){return this._getMenuDataAttrs().MENU_SEQ==n?this:this.getChild(function(t){return t.getMenuSeq()==n})},getMenuItemByPrgId:function(n){return!this.menuItems.length&&this._getMenuDataAttrs().PRG_ID==n?this:this.getChild(function(t){return t.getPrgId()==n})},getMenuItemByMenuUrl:function(n){return!this.menuItems.length&&this._getMenuDataAttrs().MENU_URL==n?this:this.getChild(function(t){return t.getBodyUrl()==n})},getMenuItemByPrgId:function(n){return this._getMenuDataAttrs().PRG_ID==n?this:this.getChild(function(t){return t.getMenuDataAttrs().PRG_ID==n})},getMenuIndexByMenuId:function(n){var t;return this.getChild(function(i,r){if(i.getMenuId()==n){t=r;return}}),t},getChildrenCount:function(){return this.menuItems.length},getListSelectedOptState:function(){return this.getState(this._IT_SELF,"opt.liSelected")},getClosedAttrState:function(){return this.getState(this._IT_SELF,"attr.isClosed")},getClosedOptState:function(){return this.getState(this._IT_SELF,"opt.isClosed")},setActivatedState:function(n){this.setListSelectedOptState(n);this.setClosedAttrState(!n);this.setActivatedAttrState(n)},setListSelectedOptState:function(n,t){this.setState(this._IT_SELF,"opt.liSelected",n,t)},setClosedAttrState:function(n){this.setState(this._IT_SELF,"attr.isClosed",n)},setChildrenContainerScroll:function(){this.menuItems&&_.isArray(this.menuItems)&&this.menuItems.length>0&&this.ecview&&this.ecview&&this.ecview.setChildrenContainerScroll()},setNewWinIconState:function(n){this.getFunction("newWinIcon")&&this.setState("newWinIcon","style.display",n)},setClickedState:function(n,t){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoutTimer);n&&!t&&this.setClosedAttrState(!1);this.setListSelectedOptState(n,!0);this.setState(this._IT_SELF,"opt.isClicked",n,!0);this.setActivatedAttrState(n)},setChildClickedStateById:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)i=this.menuItems[t],i.setClickedState(i.getMenuId()==n)},setChildClickedStateByUrl:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)i=this.menuItems[t],i.setClickedState(i.getBodyUrl()==n)},setChildClickedStateByMatch:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)i=this.menuItems[t],i.setClickedState(_.isMatch(i.getMenuDataAttrs(),n))},activateMenuItem:function(n,t){for(var r=0,f=this.menuItems.length,i,u;r<f;r++)i=this.menuItems[r],u=n.MENU_ID==i.getMenuDataAttrs().MENU_ID,t?i.setClickedState(u):i.setActivatedState(u)},deselectItem:function(){this.setActivatedAttrState(!1);this.getFunction("newWinIcon")&&this.setState("newWinIcon","style.display",!1)},hasFocus:function(){return this.getState(this._IT_SELF,"opt.hasCursor")&&this.menuItems.any(function(n){return n.hasFocus()})},hasEditGuideIndex:function(){var n=this.getEditGuideIndex();return!!(n>-1)},hasChildren:function(){return!!this.__state.functions.navArrow},removeDeleteButton:function(){this.setDeleteButtonState(!1);for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].setDeleteButtonState(!1)},hideFromMyMenu:function(){for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].hideFromMyMenu();this.setState(this._IT_SELF,"style.display",!1);this.menuData.IS_MY_MENU="N"},clearDeselectAction:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoutTimer);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.anchorMouseoutTimer);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.listedItemMouseoutTimer)},clearSelectAction:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.mouseoverTimer);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.anchorMouseoverTimer);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.listedItemMouseoverTimer)},clearDropAcceptState:function(){if(this.setState(this._IT_SELF,"style.dropAccept",!0),this.setState("deleteButton","style.display",!1),this.ecview&&this.ecview.clearDropAcceptState(),this.menuItems)for(var n=0,t=this.menuItems.length;n<t;n++)this.menuItems[n].clearDropAcceptState()},deactivateMenuItems:function(){for(var t=0,i=this.menuItems.length,n;t<i;t++)n=this.menuItems[t],n.clearSelectAction(),n.setSelectedState(!1),n.setClickedState(!1)},clickedItemMouseoutHandler:function(){ecount.global.setTimeout(this.ecPageID,function(){var n=this.menuItems.any(function(n){return n.hasFocus()}),t=this.getState(this._IT_SELF,"opt.hasCursor");n||t||this.setClosedAttrState(!0)}.bind(this),ecount.common.mouseHoverInTime)},onNewWinIconMouseoverHandler:function(){this.getFunction("newWinIcon")&&(ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.showNewWinIconTimer),this.showNewWinIconTimer=ecount.global.setTimeout(this.ecPageID,function(){this.setNewWinIconState(!0)}.bind(this),this.showNewWinIconTimeout))},onNewWinIconMouseoutHandler:function(){this.getFunction("newWinIcon")&&(ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.hideNewWinIconTimer),this.hideNewWinIconTimer=ecount.global.setTimeout(this.ecPageID,function(){this.getState(this._IT_SELF,"opt.hasCursor")||(ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.showNewWinIconTimer),this.setNewWinIconState(!1))}.bind(this)))},onListedItemMouseoverHandler:function(){if(ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.listedItemMouseoverTimer),ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.listedItemMouseoutTimer),this.getMenuUIType()!=="3"){if(this.getState(this._IT_SELF,"opt.liSelected"))return;if(this.getState(this._IT_SELF,"opt.isClicked"))return}(!this.menuItems.length||this.getState(this._IT_SELF,"attr.isClosed"))&&(this.listedItemMouseoverTimer=ecount.global.setTimeout(this.ecPageID,function(){ecount.menuCommand.item.listOpenAction(this)}.bind(this),this.listedItemMouseoverTimeout))},onListedItemMouseoutHandler:function(){(ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.listedItemMouseoverTimer),ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.listedItemMouseoutTimer),this.getState(this._IT_SELF,"opt.liSelected"))&&(this.menuItems.length&&this.getState(this._IT_SELF,"attr.isClosed")||(this.listedItemMouseoutTimer=ecount.global.setTimeout(this.ecPageID,function(){ecount.menuCommand.item.listCloseAction(this)}.bind(this),this.listedItemMouseoutTimeout)))},onMouseoverHandler:function(n,t,i){if(this._isFromChild(n,t,i)){this._stopMouseoutAction(n,t,i);this.setState(this._IT_SELF,"opt.isHighlighted",!1);return}this.onNewWinIconMouseoverHandler(n,t,i);ecount.menuCommand.item.listedItemMouseoverAction(this,n,t,i);ecount.menuCommand.item.mouseoverAction(this,n,t,i)},onMouseoutHandler:function(n,t,i){this.onNewWinIconMouseoutHandler(n,t,i);if(this.getClickedState())return ecount.menuCommand.item.clickedItemMouseoutAction(this,n,t,i);ecount.menuCommand.item.listedItemMouseoutAction(this,n,t,i);ecount.menuCommand.item.mouseoutAction(this,n,t,i)},onNavArrowClickHandler:function(){var n=ecount.menuCommand.item.getListClosedState(this);n?ecount.menuCommand.item.listOpenAction(this):ecount.menuCommand.item.listCloseAction(this);this.setListSelectedOptState(!1)},_initDefaultFunctions:function(n,t){if(this.menuItems&&this.menuItems.length)this.onInitArrowButtonFunction(t);else t.functions.newWinIcon={ecFunction:"button",cid:this.id,"style.display":!1};t.functions.deleteButton={ecFunction:"button",cid:this.id,"style.display":!1}},_getIsClosedState:function(n,t,i){return i.menuData.S_FLAG=="N"||i.menuData.FOLD_TYPE=="F"},_getMenuItems:function(n){var t=widget.generator.control();return n._dataItems.map(this._getChildItem.bind(this,t,n.menuData))},_getChildItem:function(n,t,i,r){return n.define(this._getChildCtrlType(i),i.MENU_SEQ,i.MENU_SEQ).setOptions(_.extend({index:r,menuData:_.extend(i,this._getChildAttrs(t,i))},this._getItemData())).getInstance()},_getItemData:function(){return{ecPageID:this.ecPageID,delegator:this.delegator,mouseoutTimeout:this.mouseoutTimeout,comInfo:this.comInfo,versionData:this.versionData,isMasterUser:this.isMasterUser}},_getMenuDataAttrs:function(){var n=this.menuData;return _.extend({},n,{MENU_ID:this._getMenuId(n),BODY_URL:this._getTargetUrl(n),HAS_CHILD:this.menuItems&&this.menuItems.length},this._getDepth3Attrs(n))},_getDepth3Attrs:function(n){return{MENU_TYPE:n.MENU_TYPE,GROUP_SEQ:n.PARENT_MENU_SEQ}},_getChildCtrlType:function(){return"widget.menuItem.depth4"},_getMatchedChildren:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)if(i=this.menuItems[t],n(i))return i},_getChildAttrs:function(n){return{PARENT_MENU_ID:this._getMenuId(n),PARENT_MENU_SEQ:n.MENU_SEQ,MENU_TYPE:n.MENU_TYPE,GROUP_SEQ:n.PARENT_MENU_SEQ,DEPTH:this.depth+1}},_isFromChild:function(n,t,i){return i&&i.item&&i.item.PARENT_MENU_SEQ==this.menuData.MENU_SEQ},_stopMouseoutAction:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.listedItemMouseoutTimer)},_printLogState:function(n,t){console.log("%c === printLogState %o === \n - controlType : [%o]\n - id : [%o]\n - name : [%o]\n - opt.isClicked (클릭 상태) : [%o]\n - attr.selected (선택 상태) : [%o]\n - opt.liSelected (마우스 오버로 열린 상태) : [%o]\n - attr.isClosed (뷰 닫힘 상태) : [%o]\n - opt.isClosed (닫힘 상태 설정값) : [%o]","color: "+(t||"green")+";",n||"none",this.controlType,this.id,this.menuData?this.menuData.MENU_NAME||" - ":" - ",this.getClickedState(),this.getSelectedState(),this.getListSelectedOptState(),this.getClosedAttrState(),this.getClosedOptState())}},depth4:{controlType:"widget.menuItem.depth4",viewName:"widget.view.menuItem.depth4",showNewWinIconTimer:null,hideNewWinIconTimer:null,showNewWinIconTimeout:ecount.common.LAYER_DISAPPEAR_DELAY_400,depth:4,initializeTimeout:function(){ecount.control.menu.item.prototype.initializeTimeout.apply(this,arguments);_.extend(this,{listedItemMouseoverTimeout:this.listedItemMouseoverTimeout,listedItemMouseoutTimeout:this.listedItemMouseoutTimeout,showNewWinIconTimeout:this.showNewWinIconTimeout,showFnTimeout:this.showFnTimeout})},onInitFunctions:function(n,t){ecount.control.menu.item.prototype.onInitFunctions.apply(this,arguments);t.functions.newWinIcon={ecFunction:"button",cid:this.id,"style.display":!1};t.functions.deleteButton={ecFunction:"button",cid:this.id,"style.display":!1}},getParentMenuId:function(){var n=this._getMenuDataAttrs();return n.PARENT_MENU_ID||n.PARENT_MENU_SEQ},setNewWinIconState:function(n){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.showNewWinIconTimer);ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.hideNewWinIconTimer);this.setState("newWinIcon","style.display",n)},deselectItem:function(){this.setActivatedAttrState(!1);this.setState("newWinIcon","style.display",!1);this.setState("fn","style.display",!1)},onNewWinIconMouseoverHandler:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.showNewWinIconTimer);this.showNewWinIconTimer=ecount.global.setTimeout(this.ecPageID,function(){this.setState("newWinIcon","style.display",!0)}.bind(this),this.showNewWinIconTimeout)},onNewWinIconMouseoutHandler:function(){this.hideNewWinIconTimer=ecount.global.setTimeout(this.ecPageID,function(){this.getState(this._IT_SELF,"opt.hasCursor")||(ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.showNewWinIconTimer),this.setState("newWinIcon","style.display",!1))}.bind(this))},onMouseoverHandler:function(n,t,i){this.onNewWinIconMouseoverHandler(n,t,i);ecount.menuCommand.item.mouseoverAction(this,n,t,i)},onMouseoutHandler:function(n,t,i){this.onNewWinIconMouseoutHandler(n,t,i);this.getClickedState()||ecount.menuCommand.item.mouseoutAction(this,n,t,i)},_getMenuDataAttrs:function(){var n=this.menuData;return _.extend({},n,{DEPTH:this.depth,GROUP_SEQ:n.GROUP_SEQ||"00000",BODY_URL:this._getTargetUrl(n)},this._getDepth4Attrs(n))},_getDepth4Attrs:function(n){return{MENU_ID:n.MENU_SEQ}}},erpDepth1:{controlType:"widget.menuItem.erpDepth1",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth1"],getAPIParam:function(){var n=this._getMenuDataAttrs();return{MENU_TYPE:n.MENU_TYPE,MENU_SEQ:n.MENU_SEQ}}},erpDepth2:{controlType:"widget.menuItem.erpDepth2",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth2"],getAPIParam:function(){var n=this._getMenuDataAttrs();return{MENU_TYPE:n.MENU_TYPE,MENU_SEQ:n.MENU_SEQ,GROUP_SEQ:n.MENU_SEQ}}},erpDepth3:{controlType:"widget.menuItem.erpDepth3",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth3"],_getChildCtrlType:function(){return"widget.menuItem.erpDepth4"},_getTargetUrl:function(n){if(this.menuItems&&this.menuItems.length){var t=this.menuItems.find(function(t){return t.getMenuDataAttrs().BODY_URL==n.MENU_URL}.bind(this));if(!t)return this.menuItems[0].getMenuDataAttrs().BODY_URL}return n.MENU_URL}},erpDepth4:{controlType:"widget.menuItem.erpDepth4",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth4"]},erpMyPageDepth1:{controlType:"widget.menuItem.erpMyPageDepth1",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth1","widget.menuItem.erpDepth1"],getAPIParam:function(){var n=this._getMenuDataAttrs();return{MENU_TYPE:ecount.menu.myPageType,MENU_SEQ:n.SUB_MENU==ecount.menu.noChildMyPageUrl?ecount.menu.myPageSubMenuSeq:0,GROUP_SEQ:n.MENU_SEQ}},isChildMenuData:function(n){return n.MENU_TYPE==ecount.menu.myPageType}},erpMyPageDepth2:{controlType:"widget.menuItem.erpMyPageDepth2",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth2","widget.menuItem.erpDepth2"],getAPIParam:function(){var n=this._getMenuDataAttrs();return{MENU_TYPE:ecount.menu.myPageType,MENU_SEQ:n.MENU_SEQ,GROUP_SEQ:n.GROUP_SEQ}},isChildMenuData:function(n){return this.getMenuDataAttrs().GROUP_SEQ==n.GROUP_SEQ},isDraggable:function(){return!1},_getDefaultNotDraggableMsg:function(){return ecount.resource.MSG09693},_getMenuId:function(n){return[ecount.menu.prefixMp,n.MENU_SEQ].join("_")},_getDepth2Attrs:function(n){return{MENU_TYPE:ecount.menu.myPageType,MENU_ID:this._getMenuId(n),GROUP_SEQ:n.MYPAGE_GROUP_SEQ,GROUP_NM:n.MENU_NAME,PARENT_MENU_SEQ:ecount.menu.myPageType}}},erpMyPageDepth3:{controlType:"widget.menuItem.erpMyPageDepth3",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth3","widget.menuItem.erpDepth3"],prefixMp:ecount.menu.prefixMp,render:function(){(this.menuData.PARENT_MENU_SEQ!=ecount.menu.myPageSubMenuSeq||this.menuData.M_CNT!=0)&&ecount.control.menu.item.prototype.render.apply(this,arguments)},getParentMenuId:function(){return[this.prefixMp,this.menuData.PARENT_MENU_SEQ].join("_")},isDraggable:function(){return!1},_getDefaultNotDraggableMsg:function(){return ecount.resource.MSG09693},_getChildCtrlType:function(){return"widget.menuItem.erpMyPageDepth4"},_getMenuId:function(n){return[this.prefixMp,n.MENU_SEQ].join("_")},_getIsClosedState:function(n,t,i){var r=!1;return i.index!=0&&i.menuData.MENU_SEQ!="604"&&(r=i.menuData.S_FLAG=="N"||i.menuData.FOLD_TYPE=="F"),r},_getDepth3Attrs:function(n){return{MENU_TYPE:ecount.menu.myPageType,PARENT_MENU_SEQ_ORG:n.PARENT_MENU_SEQ==ecount.menu.myPageSubMenuSeq&&$.isEmpty(n.PARENT_MENU_SEQ_ORG)?ecount.menu.noChildMyPageUrl:n.PARENT_MENU_SEQ_ORG}},_getChildAttrs:function(n){return{PARENT_MENU_ID:this._getMenuId(n),PARENT_MENU_SEQ:n.MENU_SEQ,MENU_TYPE:n.MENU_TYPE,GROUP_SEQ:n.GROUP_SEQ,DEPTH:this.depth+1}}},erpMyPageDepth4:{controlType:"widget.menuItem.erpMyPageDepth4",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth4","widget.menuItem.erpDepth4"],prefixMp:ecount.menu.prefixMp,getGroupSeq:function(){return this.menuData.GROUP_SEQ},isDraggable:function(){return!1},_getMenuId:function(n){return[ecount.menu.prefixMp,n.MENU_SEQ].join("_")},_getDepth4Attrs:function(n){return{MENU_TYPE:ecount.menu.myPageType,MENU_ID:this._getMenuId(n)}},_getTargetUrl:function(n){return n.MENU_URL},_getDefaultNotDraggableMsg:function(){return ecount.resource.MSG09693}},erpGroupwareDepth1:{controlType:"widget.menuItem.erpGroupwareDepth1",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth1","widget.menuItem.erpDepth1"]},erpGroupwareDepth2:{controlType:"widget.menuItem.erpGroupwareDepth2",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth2","widget.menuItem.erpDepth2"],_getMenuId:function(n){return[ecount.menu.prefixGw,n.MENU_SEQ].join("_")},_getDepth2Attrs:function(n){return{MENU_TYPE:ecount.menu.gwType,GROUP_SEQ:n.MENU_SEQ,MENU_ID:this._getMenuId(n)}}},erpGroupwareDepth3:{controlType:"widget.menuItem.erpGroupwareDepth3",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth3","widget.menuItem.erpDepth3"],prefixGw:ecount.menu.prefixGw,getParentMenuId:function(){return[this.prefixGw,this.menuData.MENU_CD].join("_")},isDraggable:function(){return this.getState(this._IT_SELF,"opt.draggable")&&!this.projectMenuMenuCdRegex.test(this.menuData.MENU_CD)},_getChildCtrlType:function(){return"widget.menuItem.erpGroupwareDepth4"},_getMenuId:function(n){return[this.prefixGw,n.MENU_SEQ,n.MENU_CD].join("_")},_getDepth3Attrs:function(n){return{MENU_TYPE:ecount.menu.gwType,BOARD_CD:this._getBoardCd(n)}},_getChildAttrs:function(n){return{PARENT_MENU_ID:this._getMenuId(n),PARENT_MENU_SEQ:n.MENU_SEQ,DEPTH:this.depth+1}},_getDefaultNotDraggableMsg:function(){return ecount.resource.MSG09694}},erpGroupwareDepth4:{controlType:"widget.menuItem.erpGroupwareDepth4",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth4","widget.menuItem.erpDepth4"],isDraggable:function(){return this.getState(this._IT_SELF,"opt.draggable")&&!this.projectMenuMenuCdRegex.test(this.menuData.MENU_CD)},_getMenuId:function(n){return[ecount.menu.prefixGw,n.MENU_SEQ,n.MENU_CD].join("_")},_getDepth4Attrs:function(){var n=this.menuData;return _.extend({},n,{MENU_TYPE:ecount.menu.gwType,MENU_ID:this._getMenuId(n),BOARD_CD:this._getBoardCd(n)})},_getDefaultNotDraggableMsg:function(){return ecount.resource.MSG09694}},erpMyPageOnlyDepth1:{controlType:"widget.menuItem.erpMyPageOnlyDepth1",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth1","widget.menuItem.erpDepth1","widget.menuItem.erpMyPageDepth1"]},erpMyPageOnlyDepth2:{controlType:"widget.menuItem.erpMyPageOnlyDepth2",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth2","widget.menuItem.erpDepth2","widget.menuItem.erpMyPageDepth2"]},erpMyPageOnlyDepth3:{controlType:"widget.menuItem.erpMyPageOnlyDepth3",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth3","widget.menuItem.erpDepth3","widget.menuItem.erpMyPageDepth3"],_getChildCtrlType:function(){return"widget.menuItem.erpMyPageOnlyDepth4"}},erpMyPageOnlyDepth4:{controlType:"widget.menuItem.erpMyPageOnlyDepth4",__mixins:["widget.menuItem.common","widget.menuItem.erp","widget.menuItem.depth4","widget.menuItem.erpDepth4","widget.menuItem.erpMyPageDepth4"]},cs:{controlType:"widget.menuItem.cs",isGwMenu:function(){var n=this._getMenuDataAttrs();return n.PRG_ID&&n.PRG_ID.indexOf("E07")==0},_getTargetUrl:function(n){return n.MENU_URL},_getBoardCd:function(n){return n.MENU_SEQ>9e3&&n.MENU_URL?this._getBoardCodeInfoFromUrl(n.MENU_URL):""},_getBoardCodeInfoFromUrl:function(n){var t=/(EGP004M)|(EGV004M)/gi.exec(n),i="",r;return t&&(r=n.split("?")[1].split("&"),t.shift(),(t[0]||t[1])&&(i=r[0].split("=")[1])),i}},csDepth1:{controlType:"widget.menuItem.csDepth1",__mixins:["widget.menuItem.common","widget.menuItem.cs","widget.menuItem.depth1"],getAPIParam:function(){var n=this._getMenuDataAttrs();return{MENU_TYPE:n.MENU_TYPE,MENU_SEQ:n.MENU_SEQ}},_getDepth1Attrs:function(){return{MENU_TYPE:ecount.menu.myPageType}}},csDepth2:{controlType:"widget.menuItem.csDepth2",__mixins:["widget.menuItem.common","widget.menuItem.cs","widget.menuItem.depth2"],getAPIParam:function(){var n=this._getMenuDataAttrs();return{MENU_TYPE:n.MENU_TYPE,MENU_SEQ:n.MENU_SEQ,GROUP_SEQ:n.MENU_SEQ}},_getDepth2Attrs:function(n){return{MENU_TYPE:ecount.menu.myPageType,GROUP_SEQ:n.MYPAGE_GROUP_SEQ,GROUP_NM:n.MENU_NAME}}},csDepth3:{controlType:"widget.menuItem.csDepth3",__mixins:["widget.menuItem.common","widget.menuItem.cs","widget.menuItem.depth3"],_getChildCtrlType:function(){return"widget.menuItem.csDepth4"},_getDepth3Attrs:function(n){return{MENU_TYPE:ecount.menu.myPageType,GROUP_SEQ:n.PARENT_MENU_SEQ_ORG}},_getChildAttrs:function(n){return{PARENT_MENU_ID:this._getMenuId(n),PARENT_MENU_SEQ:n.MENU_SEQ,GROUP_SEQ:n.PARENT_MENU_SEQ_ORG,DEPTH:this.depth+1}}},csDepth4:{controlType:"widget.menuItem.csDepth4",__mixins:["widget.menuItem.common","widget.menuItem.cs","widget.menuItem.depth4"],_getDepth4Attrs:function(n){return{MENU_TYPE:ecount.menu.myPageType,MENU_ID:this._getMenuId(n)}}},webMail:{controlType:"widget.menuItem.webMail",showFnTimer:null,hideFnTimer:null,showFnTimeout:ecount.common.mouseHoverInTime,_getTargetUrl:function(n){return this.getDecodedUrl(n.MENU_URL)},getParameterNameWithMBoxName:function(n,t){var i=t?this.getDecodedUrl(n):n;return~i.indexOf("&")?i.split("&")[0]:i},getDecodedUrl:function(n){return decodeURI(n)},updateCountLabel:function(){},displayFnDynamicView:function(){},ON_MOUSEOVER:function(n,t,i,r){if(n.eventTriggerFromInternalTarget&&n.ecRole!="menu.newwindow"&&!r.item)return!1;this.setState(this._IT_SELF,"opt.hasCursor",!0,!0);this.onMouseoverHandler(n,t,r);n.ecRole!="menu.newwindow"||r.item||this.showNewIconLayer(n.cid,t.target.parentElement,this.getMenuData());r.item=this.getMenuData()},ON_MOUSEOUT:function(n,t,i,r){var u=this.getServiceKey(t.relatedTarget),f;if(u&&(f=this.getCidByServiceKey(u),f===n.cid)||(ecount.layer.clear(),n.eventTriggerFromInternalTarget))return!1;this.setState(this._IT_SELF,"opt.hasCursor",!1,!0);this.onMouseoutHandler(n,t,r);r.item=this.getMenuData()}},webMailDepth1:{controlType:"widget.menuItem.webMailDepth1",viewName:"widget.view.menuItem.webMailDepth1",__mixins:["widget.menuItem.common","widget.menuItem.webMail","widget.menuItem.depth1"],ON_CLICK:function(n){n.suspend=!0;return}},webMailDepth2:{controlType:"widget.menuItem.webMailDepth2",viewName:"widget.view.menuItem.webMailDepth2",__mixins:["widget.menuItem.common","widget.menuItem.webMail","widget.menuItem.depth2"],_getDepth2Attrs:function(n){return{MENU_TYPE:ecount.menu.myPageType,GROUP_SEQ:n.MYPAGE_GROUP_SEQ}},_getMenuHash:function(){return["#menuType=",this.menuData.MENU_TYPE,"&menuSeq=",this.menuData.MENU_SEQ,"&groupSeq=",this.menuData.MYPAGE_GROUP_SEQ,"&prgId=",this.menuData.PRG_ID].join("")},setChildClickedStateByUrl:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)i=this.menuItems[t],i.setClickedState(this.getParameterNameWithMBoxName(i.getBodyUrl(),!0)==this.getParameterNameWithMBoxName(n))},onMouseoverHandler:function(){this.setActivatedAttrState(!0)},onMouseoutHandler:function(){this.getState(this._IT_SELF,"opt.isClicked")||this.setActivatedAttrState(!1)}},webMailDepth3:{controlType:"widget.menuItem.webMailDepth3",viewName:"widget.view.menuItem.webMailDepth3",__mixins:["widget.menuItem.common","widget.menuItem.webMail","widget.menuItem.depth3"],_initDefaultFunctions:function(n,t){this.menuItems&&(this.menuItems.length||this.menuData.IS_POPUP_TYPE==="Y")||(t.functions.newWinIcon={ecFunction:"button",cid:this.id,"style.display":!1});t.functions.navArrow={ecFunction:"button",cid:this.id,"style.display":_.isArray(this.menuItems)&&this.menuItems.length?!0:!1};t.functions.countLabel={ecFunction:"label",cid:this.id,"style.display":!1,value:""}},initializeViewOptions:function(n){$.extend(this.__viewOptions,{dataItems:n._dataItems||[]})},_getChildItem:function(n,t,i,r){if(n.define(this._getChildCtrlType(i),i.MENU_SEQ,i.MENU_SEQ).setOptions(_.extend({index:r,menuData:_.extend(i,this._getChildAttrs(t,i))},this._getItemData())),i.HAS_FUNCTION&&(i.PRG_ID.indexOf("Mail-General")>-1||i.PRG_ID.indexOf("Mail-MyInbox")>-1||i.PRG_ID.indexOf("MyContact")>-1||i.PRG_ID.indexOf("SharedContact")>-1)){var u=[];if(i.PRG_ID.indexOf("Mail-General")>-1)switch(i.PRG_ID.split("Mail-General-")[1]){case"INBOX":case"Sent":u=[{id:"backup",label:ecount.resource.LBL70303},{id:"delete",label:ecount.resource.LBL70321},];break;case"Drafts":case"Junk":case"Trash":u=[{id:"delete",label:ecount.resource.LBL70321},]}else i.PRG_ID.indexOf("Mail-MyInbox")>-1?u=[{id:"modify",label:ecount.resource.LBL08015},{id:"backup",label:ecount.resource.LBL70303},{id:"delete",label:ecount.resource.LBL70321},]:(i.PRG_ID.indexOf("MyContact")>-1||i.PRG_ID.indexOf("SharedContact")>-1)&&(u=[{id:"modifyAddr",label:ecount.resource.LBL08015},]);u.length&&n.hasFn(u)}return n.getInstance()},_getChildCtrlType:function(){return"widget.menuItem.webMailDepth4"},_getDepth3Attrs:function(){return{MENU_TYPE:ecount.menu.myPageType}},setChildClickedStateByUrl:function(n){for(var t=0,r=this.menuItems.length,i;t<r;t++)i=this.menuItems[t],i.setClickedState(this.getParameterNameWithMBoxName(i.getBodyUrl(),!0)==this.getParameterNameWithMBoxName(n))},getMenuItemByBodyUrl:function(n){var t=this._getMatchedChildren(function(t){return t.getParameterNameWithMBoxName(t.getBodyUrl(),!0)==this.getParameterNameWithMBoxName(n)}.bind(this));return t?t:this.getParameterNameWithMBoxName(this.getBodyUrl(),!0)==this.getParameterNameWithMBoxName(n)?this:void 0},getLayerFnOption:function(){var n=ecount.control.menu.prototype.getLayerFnOption.apply(this,arguments);return _.extend(n,{mouseoverClass:"on"})},updateCountLabel:function(n){this.setState("countLabel","value",n);n?this.setCountLabelState(!0):this.setCountLabelState(!1)},setCountLabelState:function(n){this.getFunction("countLabel")&&(!n||this.getState("countLabel","value"))&&this.setState("countLabel","style.display",n)},onCountLabelMouseoverHandler:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.showCountLabelTimer);this.showCountLabelTimer=ecount.global.setTimeout(this.ecPageID,function(){this.setCountLabelState(!1)}.bind(this),this.showCountLabelTimeout)},onCountLabelMouseoutHandler:function(){this.hideCountLabelTimer=ecount.global.setTimeout(this.ecPageID,function(){this.getState(this._IT_SELF,"opt.hasCursor")||(ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.showCountLabelTimer),this.setCountLabelState(!0))}.bind(this))},onSelectedHandler:function(){this.setActivatedAttrState(!0)},onSelectedActivationHandler:function(n,t,i){this.setActivatedAttrState(!0);this.onCountLabelMouseoverHandler(n,t,i);if(this.getFunction("fn"))this.setState("fn","style.display",!0);else this.onNewWinIconMouseoverHandler(n,t,i)},onMouseoverHandler:function(n,t,i){if(this._isFromChild(n,t,i)){this._stopMouseoutAction(n,t,i);return}ecount.menuCommand.item.mouseoverAction(this,n,t,i)},onMouseoutHandler:function(n,t,i){if(this.getFunction("fn")&&this.getState("fn","style.display")&&this.setState("fn","style.display",!1),this.getClickedState())return ecount.menuCommand.item.clickedItemMouseoutAction(this,n,t,i);this._isFromChild(n,t,i)||this.getState(this._IT_SELF,"opt.isClicked")||this.setActivatedAttrState(!1);this.onCountLabelMouseoutHandler(n,t,i);this.onNewWinIconMouseoutHandler(n,t,i)},onClickHandler:function(n,t,i){if(n.ecFunction=="fn")return this._showLayer(n,t,{showingUpDelay:0}),!1;if(this.getSelectedState()&&this.menuData.DEPTH=="3"&&!this._isFromChild(n,t,i)&&!n.ecRole||n.ecRole=="menu.navarrow"){this.onNavArrowClickHandler(n,t,i);return!1}this._isFromChild(n,t,i)||(i.item=this.getMenuData())},_ON_BEFORE_FOCUSIN:function(n,t,i,r){if(this._isFromChild(n,t,r))return!1},ON_CLICK_SERVICE:function(n,t,i,r){if(this.getFunction("newWinIcon")&&!!~_.indexOf(["newTab","newWindow"],n.ecFunctionId)){if(r&&r.originId){var u=this.getMenuItemByMenuId?this.getMenuItemByMenuId(r.controlID):this,f=u&&u.getMenuData();u&&f&&this.delegator&&this.delegator&&this.delegator.triggerEvent("container.openNewSite",{selected:r.originId,menuData:f})}}else ecount.runtime.notify("menu.clickFunction",this.ecPageID,_.extend({},n,this.getMenuDataAttrs()))}},webMailDepth4:{controlType:"widget.menuItem.webMailDepth4",viewName:"widget.view.menuItem.webMailDepth4",__mixins:["widget.menuItem.common","widget.menuItem.webMail","widget.menuItem.depth4"],onInitFunctions:function(n,t){ecount.control.menu.item.prototype.onInitFunctions.apply(this,arguments);t.functions.newWinIcon={ecFunction:"button",cid:this.id,"style.display":!1};t.functions.countLabel={ecFunction:"label",cid:this.id,"style.display":!1,value:""}},_getDepth4Attrs:function(n){return{MENU_TYPE:ecount.menu.myPageType,MENU_ID:n.MENU_SEQ,GROUP_SEQ:n.MYPAGE_GROUP_SEQ}},_getMenuHash:function(){return["#menuType=",this.menuData.MENU_TYPE,"&menuSeq=",this.menuData.MENU_SEQ,"&groupSeq=",this.menuData.MYPAGE_GROUP_SEQ,"&prgId=",this.menuData.PRG_ID].join("")},getMenuItemByBodyUrl:function(n){if(this.getParameterNameWithMBoxName((this.getBodyUrl(),!0)==this.getParameterNameWithMBoxName(n)))return this},updateCountLabel:function(n){this.setState("countLabel","value",n);n?this.setState("countLabel","style.display",!0):this.setState("countLabel","style.display",!1)},setCountLabelState:function(n){this.getFunction("countLabel")&&(!n||this.getState("countLabel","value"))&&this.setState("countLabel","style.display",n)},onCountLabelMouseoverHandler:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.showCountLabelTimer);this.showCountLabelTimer=ecount.global.setTimeout(this.ecPageID,function(){this.setCountLabelState(!1)}.bind(this),this.showCountLabelTimeout)},onCountLabelMouseoutHandler:function(){this.hideCountLabelTimer=ecount.global.setTimeout(this.ecPageID,function(){this.getState(this._IT_SELF,"opt.hasCursor")||(ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.showCountLabelTimer),this.setCountLabelState(!0))}.bind(this))},onSelectedActivationHandler:function(n,t,i){this.onCountLabelMouseoverHandler(n,t,i);this.onNewWinIconMouseoverHandler(n,t,i);this.onFnMouseoverHandler(n,t,i)},onMouseoverHandler:function(n,t,i){return ecount.menuCommand.item.mouseoverAction(this,n,t,i),this.setActivatedAttrState(!0),!1},onMouseoutHandler:function(n,t,i){this.getState(this._IT_SELF,"opt.isClicked")||this.setActivatedAttrState(!1);this.onCountLabelMouseoutHandler(n,t,i);this.onNewWinIconMouseoutHandler(n,t,i);this.onFnMouseoutHandler(n,t,i)},onFnMouseoverHandler:function(){ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.showFnTimer);this.showFnTimer=ecount.global.setTimeout(this.ecPageID,function(){this.setState("fn","style.display",!0)}.bind(this),this.showFnTimeout)},onFnMouseoutHandler:function(){this.hideFnTimer=ecount.global.setTimeout(this.ecPageID,function(){this.getState(this._IT_SELF,"opt.hasCursor")||(ecount.global.clearTimeoutByTimerNo(this.ecPageID,this.showFnTimer),this.setState("fn","style.display",!1))}.bind(this))},onClickHandler:function(n,t,i){if(this.getSelectedState()&&this.menuData.DEPTH=="3"&&!this._isFromChild(n,t,i)&&!n.ecRole||n.ecRole=="menu.navarrow"){this.onNavArrowClickHandler(n,t,i);return!1}if(n.ecFunction=="fn"&&n.ecRole==="menu.foldermanagement")return this._showLayer(n,t,{showingUpDelay:0}),!1;if(this._isFromChild(n,t,i)){if(n.ecRole=="button.delete"){this.removeMenuItem(i.item);return}}else i.item=this.getMenuData()},ON_MOUSEOVER:function(n,t,i,r){if(n.eventTriggerFromInternalTarget&&n.ecRole!="menu.newwindow"&&!r.item)return!1;this.setState(this._IT_SELF,"opt.hasCursor",!0,!0);this.onMouseoverHandler(n,t,r);n.ecRole!="menu.newwindow"||r.item||this.showNewIconLayer(n.cid,t.target.parentElement,this.getMenuData());r.item=this.getMenuData()},ON_CLICK_SERVICE:function(n,t,i,r){if(this.getState(this._IT_SELF,"opt.dragMode"))return!1;this.setState(this._IT_SELF,"opt.hasCursor",!1,!0);this.setState(this._IT_SELF,"opt.isHighlighted",!1,!0);this.onMouseoutHandler(n,t,r);if(n.ecFunctionId==="newWindow"||n.ecFunctionId==="newTab"){if(this.getFunction("newWinIcon")&&r&&r.originId){var u=this.getMenuItemByMenuId?this.getMenuItemByMenuId(r.controlID):this,f=u&&u.getMenuData();u&&f&&this.delegator&&(this.delegator&&this.delegator.triggerEvent("container.openNewSite",{selected:r.originId,menuData:f}),this.delegator&&this.delegator.triggerEvent("item.closeGruop",{menuData:f}),this.delegator&&this.delegator.triggerEvent("section.menuPanelClose",{}));ecount.menuCommand.item.mouseoutTrigger(this,n,t,r)}}else this.getFunction("fn")&&(ecount.runtime.notify("menu.clickFunction",this.ecPageID,_.extend({},n,this.getMenuDataAttrs())),ecount.menuCommand.item.mouseoutTrigger(this,n,t,r))},ON_FOCUSIN:function(n,t,i,r){if(n.ecRole==="menu.foldermanagement")return!1;r.item=this.getMenuData()}},invoice:{controlType:"widget.menuItem.invoice",_getTargetUrl:function(n){return decodeURI(n.MENU_URL)},updateCountLabel:function(){},displayFnDynamicView:function(){},ON_MOUSEOVER:function(n,t,i,r){if(n.eventTriggerFromInternalTarget&&n.ecRole!="menu.newwindow"&&!r.item)return!1;this.setState(this._IT_SELF,"opt.hasCursor",!0,!0);this.onMouseoverHandler(n,t,r);n.ecRole!="menu.newwindow"||r.item||this.showNewIconLayer(n.cid,t.target.parentElement,this.getMenuData());r.item=this.getMenuData()},ON_MOUSEOUT:function(n,t,i,r){var u=this.getServiceKey(t.relatedTarget),f;if(u&&(f=this.getCidByServiceKey(u),f===n.cid)||(ecount.layer.clear(),n.eventTriggerFromInternalTarget))return!1;this.setState(this._IT_SELF,"opt.hasCursor",!1,!0);this.onMouseoutHandler(n,t,r);r.item=this.getMenuData()}},invoiceDepth1:{controlType:"widget.menuItem.invoiceDepth1",__mixins:["widget.menuItem.common","widget.menuItem.invoice","widget.menuItem.depth1"]},invoiceDepth2:{controlType:"widget.menuItem.invoiceDepth2",__mixins:["widget.menuItem.common","widget.menuItem.invoice","widget.menuItem.depth2"],_getDepth2Attrs:function(n){return{MENU_TYPE:ecount.menu.myPageType,GROUP_SEQ:n.MYPAGE_GROUP_SEQ}},_getMenuHash:function(){return["#menuType=",this.menuData.MENU_TYPE,"&menuSeq=",this.menuData.MENU_SEQ,"&groupSeq=",this.menuData.MYPAGE_GROUP_SEQ,"&prgId=",this.menuData.PRG_ID].join("")},onMouseoverHandler:function(){this.setActivatedAttrState(!0)},onMouseoutHandler:function(){this.getState(this._IT_SELF,"opt.isClicked")||this.setActivatedAttrState(!1)}},invoiceDepth3:{controlType:"widget.menuItem.invoiceDepth3",__mixins:["widget.menuItem.common","widget.menuItem.invoice","widget.menuItem.depth3"],_initDefaultFunctions:function(n,t){this.menuItems&&this.menuItems.length||(t.functions.newWinIcon={ecFunction:"button",cid:this.id,"style.display":!1})},_getChildCtrlType:function(){return"widget.menuItem.invoiceDepth4"},_getDepth3Attrs:function(){return{MENU_TYPE:ecount.menu.myPageType}},getMenuItemByBodyUrl:function(n){var t=this._getMatchedChildren(function(t){return t.getMenuDataAttrs().BODY_URL==n});return t?t:this._getMenuDataAttrs().BODY_URL==n?this:void 0},getLayerFnOption:function(){var n=ecount.control.menu.prototype.getLayerFnOption.apply(this,arguments);return _.extend(n,{mouseoverClass:"on"})},onSelectedHandler:function(){this.setActivatedAttrState(!0)},onSelectedActivationHandler:function(n,t,i){this.setActivatedAttrState(!0);this.onNewWinIconMouseoverHandler(n,t,i)},onMouseoverHandler:function(n,t,i){if(this._isFromChild(n,t,i)){this._stopMouseoutAction(n,t,i);return}ecount.menuCommand.item.mouseoverAction(this,n,t,i)},onMouseoutHandler:function(n,t,i){this.onNewWinIconMouseoutHandler(n,t,i);if(this.getClickedState())return ecount.menuCommand.item.clickedItemMouseoutAction(this,n,t,i);this._isFromChild(n,t,i)||this.getState(this._IT_SELF,"opt.isClicked")||this.setActivatedAttrState(!1)},onClickHandler:function(n,t,i){if(this.getSelectedState()&&this.menuData.DEPTH=="3"&&!this._isFromChild(n,t,i)&&!n.ecRole||n.ecRole=="menu.navarrow"){this.onNavArrowClickHandler(n,t,i);return!1}this._isFromChild(n,t,i)||(i.item=this.getMenuData())},_ON_BEFORE_FOCUSIN:function(n,t,i,r){if(this._isFromChild(n,t,r))return!1}},invoiceDepth4:{controlType:"widget.menuItem.invoiceDepth4",__mixins:["widget.menuItem.common","widget.menuItem.invoice","widget.menuItem.depth4"],onInitFunctions:function(n,t){ecount.control.menu.item.prototype.onInitFunctions.apply(this,arguments);t.functions.newWinIcon={ecFunction:"button",cid:this.id,"style.display":!1}},_getDepth4Attrs:function(n){return{MENU_TYPE:ecount.menu.myPageType,MENU_ID:n.MENU_SEQ,GROUP_SEQ:n.MYPAGE_GROUP_SEQ}},_getMenuHash:function(){return["#menuType=",this.menuData.MENU_TYPE,"&menuSeq=",this.menuData.MENU_SEQ,"&groupSeq=",this.menuData.MYPAGE_GROUP_SEQ,"&prgId=",this.menuData.PRG_ID].join("")},getMenuItemByBodyUrl:function(n){if(decodeURI(this._getMenuDataAttrs().BODY_URL)==n)return this},onMouseoverHandler:function(n,t,i){this.onNewWinIconMouseoverHandler(n,t,i);return ecount.menuCommand.item.mouseoverAction(this,n,t,i),this.setActivatedAttrState(!0),!1},onMouseoutHandler:function(n,t,i){this.getState(this._IT_SELF,"opt.isClicked")||this.setActivatedAttrState(!1);this.onNewWinIconMouseoutHandler(n,t,i)},ON_FOCUSIN:function(n,t,i,r){r.item=this.getMenuData()}},userpay:{controlType:"widget.menuItem.userpay",empCdRegex:/{EMP_CD}|{EMPCD}/gi,empNameRegex:/{EMP_KNAME}/gi,masterNameRegex:/{MASTER_NAME}|{MASTERNAME}/gi,businessNoRegex:/{BUSINESS_NO}|{BUSINESSNO}/gi,userpaySearchYearRegex:/{JSYY}/gi,empInfo:null,currYear:null,initializeOptions:function(n,t){this.onInitAdditionalItemOptions(n,t);this.onInitDefaultItemOptions(n,t)},onInitAdditionalItemOptions:function(n){_.extend(this,{empInfo:n.empInfo,currYear:n.currYear})},_getTargetUrl:function(n){return n.MENU_URL?n.MENU_URL.replace(this.empCdRegex,this.empInfo.EMP_CD).replace(this.empNameRegex,this.empInfo.EMP_KNAME).replace(this.masterNameRegex,this.empInfo.MASTER_NAME).replace(this.businessNoRegex,this.empInfo.BUSINESS_NO).replace(this.userpaySearchYearRegex,this.empInfo.JSYY):""}},userpayDepth1:{controlType:"widget.menuItem.userpayDepth1",__mixins:["widget.menuItem.common","widget.menuItem.userpay","widget.menuItem.depth1"]},userpayDepth2:{controlType:"widget.menuItem.userpayDepth2",__mixins:["widget.menuItem.common","widget.menuItem.userpay","widget.menuItem.depth2"],_getDepth2Attrs:function(n){return{MENU_TYPE:ecount.menu.myPageType,GROUP_SEQ:n.MYPAGE_GROUP_SEQ}}},userpayDepth3:{controlType:"widget.menuItem.userpayDepth3",__mixins:["widget.menuItem.common","widget.menuItem.userpay","widget.menuItem.depth3"],_getChildCtrlType:function(){return"widget.menuItem.userpayDepth4"},_getDepth3Attrs:function(n){return{MENU_TYPE:ecount.menu.myPageType,GROUP_SEQ:n.PARENT_MENU_SEQ_ORG}},_getItemData:function(){return{ecPageID:this.ecPageID,delegator:this.delegator,mouseoutTimeout:this.mouseoutTimeout,comInfo:this.comInfo,versionData:this.versionData,isMasterUser:this.isMasterUser,empInfo:this.empInfo,currYear:this.currYear}},_getChildAttrs:function(n){return{PARENT_MENU_ID:this._getMenuId(n),PARENT_MENU_SEQ:n.MENU_SEQ,GROUP_SEQ:n.GROUP_SEQ,DEPTH:this.depth+1}}},userpayDepth4:{controlType:"widget.menuItem.userpayDepth4",__mixins:["widget.menuItem.common","widget.menuItem.userpay","widget.menuItem.depth4"],_getDepth4Attrs:function(n){return{MENU_ID:n.MENU_SEQ,MENU_TYPE:ecount.menu.myPageType}}},horizontal:{controlType:"widget.menuItem.horizontal",viewName:"widget.view.menuItem.horizontal",onInitState:function(){ecount.control.menu.item.prototype.onInitState.apply(this,arguments)},setEcPath:function(){ecount.control.prototype.setEcPath.call(this)},setActivated:function(n){this.setState(0,"attr.isActivated",n)},_getOwnState:function(n,t,i){return i._dataItems.map(function(n){return $.extend({},n,{ecPageID:this.ecPageID,itemIndex:i.menuIndex,"attr.id":n.id,"attr.href":"javascript:;","attr.isActivated":i.isActivated||!1,label:n.title,ecRole:"menuItem","style.css":n.css})}.bind(this))},ON_CLICK:function(n,t,i,r){var u=this.getComponent(0);r.itemIndex=u.itemIndex;r.dataItem=_.cloneDeep(u)}},navigation:{controlType:"widget.menuItem.navigation",viewName:"widget.view.menuItem.navigation",setActivated:function(n){this.setState(0,"attr.isActivated",n)},render:function(n){this.attachView(n)},onInitState:function(n,t,i){ecount.control.menu.item.prototype.onInitState.apply(this,arguments);_.extend(this.__state,{menuIndex:i.menuIndex})},_getOwnState:function(n,t,i){return i._dataItems.map(function(n){return $.extend({},n,{ecPageID:this.ecPageID,"attr.id":n.id,"attr.isActivated":n.isActived||!1,label:n.title,popupType:n.popupType,ecRole:"menuItem"})}.bind(this))},ON_CLICK:function(n,t,i,r){var u=this.getComponent(0);r.url=u["attr.href"];r.id=u["attr.id"];r.index=this.__state.menuIndex;r.boardId=u.boardId;r.tabFlag=u.tabFlag;r.popupType=u.popupType}},create:function(n){var t,u,f,i,r,e,o,s;if(n=n||"_default",t=widget.menuItem.repository[n]||{},u=ecount.control.menu.item,widget.menuItem._baseLoaded||(ecount.control.loadRepository(ecount.control.menu.item,ecount.control.view.menu.item,"widget.menuItem"),n!="_default")){if(arguments.length>1){ecount.control.mountMixinWidget(widget.menuItem,t,"widget.menuItem",[].slice.call(arguments,0));return}if(t.__inheritParent&&~t.__inheritParent.indexOf("widget.menuItem")){f=t.controlType.replace("widget.menuItem.","");ecount.control.mountMixinWidget(widget.menuItem,t,"widget.menuItem",[widget.menuItem,f]);return}if(!widget.menuItem[n]){if(u=t.__inheritParent?ecount.common.createNamespace(t.__inheritParent):widget.menuItem,t.__mixins){for(i={},r=0,e=t.__mixins.length;r<e;r++)o=t.__mixins[r].split("."),s=widget.menuItem.repository[o.pop()],i=_.extend(i,s);t=_.extend(i,t)}ecount.control.mountWidget(widget.menuItem,n,u,t)}}}}};widget.view.menuContainer._export=function(){return{_default:{},erp:{dropdownItemAttrRegex:/{(\w+)}/gm,sectionDepthRegex:/:?(show-section-)(\d+)/g,editGuideTemplate:'<li data-role="line.guide" class="navigation-drag-holder"><\/li>',wrapperTemplate:ecount.menuViewCommand.container.erp.wrapperTemplate,template:ecount.menuViewCommand.container.erp.template,onInitTemplate:function(n,t){return n.replace(this.sectionDepthRegex,function(n,i){return i+Number(t["style.showingDepth"])})},onInitWrapperTemplate:function(n,t){return ecount.widget.replaceAttr(this.wrapperTemplate,t)},onChangeSelectedLabelDropdownGroup:function(n){var t=this.$el.find('[data-role="menu.grouplist"] > a'),i=t.find("span");t.html(n).append(i)},onChangeOptResponsiveOpenGlobal:function(n,t){this.getWrapperMenuArea()[t?"addClass":"removeClass"]("responsive-open");_.isFunction(_.get(ecmodule,"navigation.setLayerState"))&&(ecmodule.navigation.setLayerState("menu","isOpened",t),t===!1&&ecmodule.navigation.setLayerState("menu","isClicked",!1))},onChangeOptResponsiveOpenLocal:function(n,t){this.getWrapperMenuAreaAddon()[t?"addClass":"removeClass"]("responsive-open")},getEditGuide:function(){return this.editGuideTemplate}},erpMyPageOnly:{__inheritParent:"widget.view.menuContainer.erp"},cs:{__inheritParent:"widget.view.menuContainer.erp"},userpay:{__inheritParent:"widget.view.menuContainer.erp"},webMail:{__inheritParent:"widget.view.menuContainer.erp",openClassName:"open",onInitTemplate:function(n){return n}},invoice:{__inheritParent:"widget.view.menuContainer.erp",wrapperTemplate:['<div data-ecPath={{ecPath}} class="wrapper-global-nav">','<div class="toggle-nav" data-function="menu.button" data-role="menu.navButton" data-cid="{{cid}}">','<div class="toggler" style="pointer-events: none;"><\/div>',"<\/div>","((this.template))","<\/div>",].join("\n"),template:'<div data-function="menu.button" data-role="menu.globalNavButton" class="global-nav show-section-1" data-cid="{{cid}}">\n<div class="global-nav-header">\n<div class="nav-move-back" data-function="menu.button"data-role="menu.backButton"><\/div>\n[[dropdownGroup]]\n<div class="nav-move-home" data-function="menu.button" data-role="menu.homeButton" ><\/div>\n<\/div>\n<div class="nav" data-role="menu.itemContainer">\n<\/div>\n<\/div>',openClassName:"open",onInitTemplate:function(n){return n}},navigation:{template:'<div class="customer-support-nav" data-role="menu.itemContainer"><\/div>',onInitWrapperTemplate:function(){return"((this.template))"}}}};widget.view.menuSection._export=function(){return{_default:{},common:{editGuideTemplate:'<li data-role="line.guide" class="navigation-drag-holder"><\/li>',notDroppableClassName:"cursor-not-allowed",onChangeOptIsClosed:function(n,t){t?this.$el.removeClass(this.openClassName):this.$el.addClass(this.openClassName)},onChangeOptSelected:function(n,t){var i=this.getChildrenContainer();t?i.addClass(this.activeClassName):i.removeClass(this.activeClassName)},onChangeTitleTitle:function(n){this.$el.find('[data-role="menu.dropdown"]').html(n)},onChangeStyleDisplayTitle:function(n){var t=this.$el.find('[data-role="menu.dropdown"]');n?t.removeClass("hidden"):t.addClass("hidden")},onChangeStyleDropAccept:function(n,t){t?this.$el.removeClass(this.notDroppableClassName):this.$el.addClass(this.notDroppableClassName)},getDraggableTarget:function(){return this.getElements().clone()},getUlContainer:function(){return this.$el.children("ul")},getEditGuideIndex:function(){var n=this.getUlContainer(),t=n.children('[data-role="line.guide"]');return n.children("li").index(t)},setEditGuide:function(n,t){var i=this.$el.find("#"+n);this.removeEditGuide();i[t=="backword"?"before":"after"](this.editGuideTemplate)},removeEditGuide:function(){this.$el.find('[data-role="line.guide"]').remove()},setHoverAllowState:function(n){n?this.$el.find("a").removeClass(this.notDroppableClassName):this.$el.find("a").addClass(this.notDroppableClassName)},clearDropAcceptState:function(){this.$el.removeClass(this.notDroppableClassName)}},depth1:{__inheritParent:"widget.view.menuSection.common",template:ecount.menuViewCommand.section.depth1.template,titleTemplate:"",editGuideTemplate:'<li data-role="line.guide" class="navigation-drag-holder"><\/li>',containerClassName:"section-1",activeClassName:"active",openClassName:"open",onInitTemplate:function(n,t){var i=n.replace("{{containerClassName}}",this.containerClassName);return ecount.widget.replaceAttr(i,t)},getUlContainer:function(){return this.$el},setChildrenStorage:function(){var t=this.getChildrenContainer(),n=this.$el.parent().children('[data-role="menu.itemStorage"]');n.length||(n=t.after($('<div class="hidden" data-role="menu.itemStorage" />')));n.append(t.children())}},depth2:{__inheritParent:"widget.view.menuSection.common",containerClassName:"wrapper-depth2",activeClassName:"on",openClassName:"open",template:ecount.menuViewCommand.section.depth2.template,titleTemplate:'<div class="section-title {{style.display}}" data-role="menu.dropdown">{{title}}<\/div>',onInitTemplate:function(n,t){var i=n.replace("{{style.display}}",t["style.display"]?"":"hidden").replace("{{containerClassName}}",this.containerClassName);return ecount.widget.replaceAttr(i,t)},getCloneContainer:function(){var n=this.$el.clone().removeClass("hidden");return n[0].ecIKey=this.$el[0].ecIKey,n}},depth2Group:{__inheritParent:"widget.view.menuSection.common",template:ecount.menuViewCommand.sectionGroup.template,activeClassName:"active",onInitTemplate:function(n,t){return ecount.widget.replaceAttr(n,_.extend(t,{"style.display":t["style.display"]?"":"hidden","style.selected":t["opt.selected"]?this.activeClassName:""}))},onChangeOptSelected:function(n,t){var i=this._$parent||this.$el.parent();t?i.addClass(this.activeClassName):i.removeClass(this.activeClassName)},getEditGuideIndex:function(){var n=this.$el.children('[data-role="line.guide"]');return this.$el.children("li").index(n)},setPosition:function(n){var u=document.getElementsByClassName("wrapper-frame-body")[0].getBoundingClientRect(),f=document.getElementById("menuAreaAddon"),o=f.getBoundingClientRect(),r=this.getContainerBoundary(),t=n.sectionLv1.getMenuItemByMenuId(n.menuType),i=t.getContainerBoundary(),e=i.left+i.width/2,s=e-r.width/2<0,h=(f.classList.contains("open")?0:o.right)+u.width-e-r.width/2<0,c=i.left+r.width>u.width,l=i.left+i.width-r.width<0;s?c?t.setState(t._IT_SELF,"style.align","none"):t.setState(t._IT_SELF,"style.align","left"):h?l?t.setState(t._IT_SELF,"style.align","none"):t.setState(t._IT_SELF,"style.align","right"):t.setState(t._IT_SELF,"style.align","center")}},depth3:{__inheritParent:"widget.view.menuSection.common",template:ecount.menuViewCommand.section.depth3.template,editGuideTemplate:'<li data-role="line.guide" class="navigation-drag-holder"><\/li>',sectionTogglerTemplate:'<div class="local-nav-option" data-cid="{{cid}}"><div class="local-nav-option-pin" data-cid="{{cid}}" data-role="flipswitch"><\/div><\/div><div class="local-nav-toggler" data-cid="{{cid}}" data-role="menu.itemContainer"><\/div>',containerClassName:"wrapper-local-nav",activeClassName:"on",onInitTemplate:function(n,t){return ecount.widget.replaceAttr(n,t)},parseFunction:function(n){return n},onInitWrapperTemplate:function(n,t){return this.wrapperTemplate.replace("{{style.display}}",t["style.display"]?"":"hidden").replace("{{containerClassName}}",this.containerClassName)},onChangeStyleDisplay:function(n,t){t?this.getWrapperMenuAreaAddon().addClass("open"):this.getWrapperMenuAreaAddon().removeClass("open")},onChangeStyleSectionDisplay:function(n,t){t?this.getElements(n).removeClass("hidden"):this.getElements(n).addClass("hidden")},onChangeUseFlippedSectionToggler:function(){},setLeftPosition:function(n){var t=n.left,i=this.$el.find('ul[data-role="menu.itemContainer"]:first');t<0&&(t=0);i.css("left",t+"px")}},webMailDepth1:{__inheritParent:"widget.view.menuSection.common",template:ecount.menuViewCommand.section.depth1.template,titleTemplate:"",editGuideTemplate:'<li data-role="line.guide" class="navigation-drag-holder"><\/li>',containerClassName:"section-1",activeClassName:"active",openClassName:"open",onInitTemplate:function(n,t){var i=n.replace("{{containerClassName}}",this.containerClassName);return ecount.widget.replaceAttr(i,t)}},webMailDepth2:{__inheritParent:"widget.view.menuSection.common",template:ecount.menuViewCommand.section.depth2.template,containerClassName:"wrapper-depth2",activeClassName:"on",openClassName:"open",onInitTemplate:function(n,t){var i=n.replace("{{style.display}}",t["style.display"]?"":"hidden").replace("{{containerClassName}}",this.containerClassName);return ecount.widget.replaceAttr(i,t)},getCloneContainer:function(){var n=this.$el.clone().removeClass("hidden");return n[0].ecIKey=this.$el[0].ecIKey,n}},webMailDepth2Group:{__inheritParent:"widget.view.menuSection.common",template:ecount.menuViewCommand.sectionGroup.template,activeClassName:"active",onInitTemplate:function(n,t){return ecount.widget.replaceAttr(n,_.extend(t,{"style.display":t["style.display"]?"":"hidden","style.selected":t["opt.selected"]?this.activeClassName:""}))},onChangeOptSelected:function(n,t){var i=this._$parent||this.$el.parent();t?i.addClass(this.activeClassName):i.removeClass(this.activeClassName)},getEditGuideIndex:function(){},setPosition:function(){}},webMailDepth3:{__inheritParent:"widget.view.menuSection.common",template:ecount.menuViewCommand.section.webmail.template,webmailQuotaTemplate:['<div class="wrapper-webmail-useage {{isTwoLines}}">','<div class="webmail-useage {{isUsageShow}}">','<div class="webmail-useage-title">',"<span>{{usageTitle}}<\/span>",'<a href="#false" class="text-right" id="{{id}}" data-cid="{{cid}}" data-role="menu.addUsage">{{usage}}<\/a>',"<\/div>",'<div class="webmail-useage-progress">','<div class="progress progress-condensed">','<div class="progress-bar progress-bar-{{progress}}" data-role="usage.user.progress" style="width:{{percentageWidth}}">{{percentage}}<\/div>',"<\/div>","<\/div>","<\/div>",'<div class="webmail-useage {{isDomainShow}}">','<div class="webmail-useage-title">',"<span>{{usageDomainTitle}}<\/span>",'<a href="#false" class="text-right" id="{{id}}" data-cid="{{cid}}" data-role="menu.showDomainUsage">{{domainUsage}}<\/a>',"<\/div>",'<div class="webmail-useage-progress">','<div class="progress progress-condensed">','<div class="progress-bar progress-bar-{{domainProgress}}" style="width:{{domainPercentageWidth}}">{{domainPercentage}}<\/div>',"<\/div>","<\/div>","<\/div>","<\/div>",].join(""),containerClassName:"wrapper-local-nav",activeClassName:"on",onInitWrapperTemplate:function(n,t){return this.wrapperTemplate.replace("{{style.display}}",t["style.display"]?"":"hidden").replace("{{containerClassName}}",this.containerClassName)},parseFunction:function(n,t){var i=t.isViewDomain===!0?!0:!1,r=t.isViewUsage===!0?!0:!1;return n.replaceAll("{{isUsageShow}}",r?"":"hidden").replaceAll("{{isDomainShow}}",i?"":"hidden")}},invoiceDepth1:{__inheritParent:"widget.view.menuSection.common",template:'<div class="hidden" data-cid="{{cid}}" data-ecpath="{{ecPath}}" data-role="menu.listContainer">\n<ul id="{{id}}" data-container-id="{{containerId}}" data-cid="{{cid}}" data-role="menu.itemContainer"><\/ul>\n<\/div>',titleTemplate:'<div class="section-title" data-cid="{{cid}}" data-role="menu.dropdown">{{title}}<\/div>',editGuideTemplate:'<li data-role="line.guide" class="navigation-drag-holder"><\/li>',containerClassName:"section-1",openClassName:"open",onInitTemplate:function(n,t){var i=n.replace("{{containerClassName}}",this.containerClassName);return ecount.widget.replaceAttr(i,t)}},invoiceDepth2:{__inheritParent:"widget.view.menuSection.common",activeClassName:"on",openClassName:"open",template:'<div class="section-1" data-container-id="{{containerId}}" data-cid="{{cid}}" data-ecpath="{{ecPath}}" data-role="menu.listContainer">\n<ul id="{{id}}" data-container-id="{{containerId}}" data-cid="{{cid}}" data-role="menu.itemContainer"><\/ul>\n<\/div>\n<div class="section-2">\n<\/div>',onInitTemplate:function(n,t){return ecount.widget.replaceAttr(n,t)}},invoiceDepth2Group:{__inheritParent:"widget.view.menuSection.common",template:'<div class="{{containerClassName}} {{style.display}}" data-container-id="{{containerId}}" data-cid="{{cid}}" data-ecpath="{{ecPath}}" data-role="menu.itemContainer"><\/div>',activeClassName:"on",onInitTemplate:function(n,t){return ecount.widget.replaceAttr(n,_.extend(t,{"style.display":t["style.display"]?"":"hidden","style.selected":t["opt.selected"]?"on":""}))},getEditGuideIndex:function(){},setPosition:function(){}},horizontal:{template:'<ul id="{{id}}" class="nav nav-pills" data-role="menu.itemContainer"><\/ul>'},navigation:{template:'<ul id="{{id}}" class="{{style.css}}" data-role="menu.itemContainer"><\/ul>'}}};widget.view.menuItem._export=function(){return{_default:{},common:{template:ecount.menuViewCommand.item.common.template,anchorTemplate:'<a href="{{attr.href}}" data-role="menu.anchor" target="{{attr.target}}" data-index={{index}} id="{{domId}}" data-cid="{{id}}">\n{{label}}[[navArrow]]\n<\/a>',navArrowTemplate:'<span class="icon-nav-arrow {{style.display}}" data-cid="{{id}}" data-role="menu.navarrow"><\/span>',newWinIconTemplate:'<span class="new-window" data-cid="{{id}}" data-role="menu.newwindow"><\/span>',deleteButtonTemplate:'<span data-role="button.delete" data-cid="{{id}}" class="navigation-remove"><\/span>',editGuideTemplate:'<li data-role="line.guide" class="navigation-drag-holder"><\/li>',listClassName:"",activeClassName:"active",closeClassName:"collapsed",notDroppableClassName:"cursor-not-allowed",hasGroupArrow:!1,hasShowNewWindowIcon:!1,onInitTemplate:function(n,t){var i=n.replace("{{anchorTemplate}}",this.anchorTemplate);return ecount.widget.replaceAttr(i,$.extend(t,{"style.listClassName":this._getListClassName(t),"style.display":t["style.display"]==!1?"hidden":""}))},onChangeStyleDisplayNewWinIcon:function(n){var t=this.$el.find('span[data-role="menu.newwindow"]');n?t.addClass("visible"):t.removeClass("visible")},onChangeStyleDisplayDeleteButton:function(n){var t=this.$el.find('div.nav-option:first() > span[data-role="button.delete"]');t.length&&(n?t.addClass("visible"):t.removeClass("visible"))},onChangeAttrSelected:function(n,t){t?this.$el.addClass(this.activeClassName):this.$el.removeClass(this.activeClassName)},onChangeStyleAlign:function(n,t){this.$el.removeClass("align-left align-right align-center");t=="left"?this.$el.addClass("align-left"):t=="right"?this.$el.addClass("align-right"):t=="center"&&this.$el.addClass("align-center")},onChangeOptLiSelected:function(){ecount.menuViewCommand.item.common.onChangeOptLiSelected.apply(this,arguments)},onChangeAttrIsClosed:function(){ecount.menuViewCommand.item.common.onChangeAttrIsClosed.apply(this,arguments)},onChangeStyleDropAccept:function(n,t){t?this.$el.children("a").removeClass(this.notDroppableClassName):this.$el.children("a").addClass(this.notDroppableClassName)},getDraggableTarget:function(){for(var f=$('<div class="navigation draggable-helper"><a><\/a><\/div>'),i=this.getElements(),r=i.get(0).attributes,u=i.find("a:first").clone(),e=$('<span data-role="invalidMsg" class="hidden">'+ecount.resource.MSG09695+"<\/span>"),t=0,o=r.length,n;t<o;t++)n=r[t],n.name.indexOf("data")==0&&u.attr(n.name,n.value);return f.append(e).append(u)},getNotDraggableTarget:function(n){return $('<div class="navigation draggable-helper not-droppable" />').text(n).addClass("cursor-not-allowed")},getEditGuideIndex:function(){var n=this.$el.children("ul"),t=n.children('[data-role="line.guide"]');return n.children('li:not("[data-temp-role]")').index(t)},setEditGuide:function(n,t){var i=this.$el.find("#"+n),o=$(this.editGuideTemplate),f,e,u,s,r;for(this.removeEditGuide(),i.is(":hidden")&&(e=i[t=="backword"?"prev":"next"]("li:visible"),i=e.length?e:i),f=i.get(0).attributes,u=0,s=f.length;u<s;u++)r=f[u],r.name!="data-role"&&r.name!="data-temp-role"&&r.name.indexOf("data")==0&&o.attr(r.name,r.value);i[t=="backword"?"before":"after"](o)},removeEditGuide:function(){this.$el.find('[data-role="line.guide"]').remove()},clearDropAcceptState:function(){this.$el.children("a").removeClass(this.notDroppableClassName)},hideMenuItemTemporarily:function(){this.$el.addClass("hidden");this.$el.attr("data-temp-role","hide")},restoreTemporarilyHiddenItem:function(){this.$el.attr("data-temp-role")=="hide"&&(this.$el.get(0).removeAttribute("data-temp-role"),this.$el.removeClass("hidden"))},_getListClassName:function(n){var t=[];return n["attr.isClosed"]&&t.push(this.closeClassName),n["attr.selected"]&&t.push(this.activeClassName),t.join(" ")},_getIconClassName:function(n){return _.get({"6":"mypage","8":"sc","4":"inv1","783":"inv2","1":"acct1","5":"acct2","748":"manage","3":"tax","7":"gw","2776":"datacenter",Mail:"email",Contacts:"contact","Self-Customizing":"sc",ExternalLinkageGuide:"external-linkage-guide"},n,"mypage")}},depth1:{__inheritParent:"widget.view.menuItem.common",template:ecount.menuViewCommand.item.depth1.template,_getListClassName:function(n){var t=[];return n.id&&t.push(this._getIconClassName(n.id)),n["attr.isClosed"]&&t.push(this.closeClassName),n["attr.selected"]&&t.push(this.activeClassName),n["style.align"]&&n["style.align"]!=="none"&&t.push("align-"+n["style.align"]),t.join(" ")}},depth2:{__inheritParent:"widget.view.menuItem.common"},depth3:{__inheritParent:"widget.view.menuItem.common",template:ecount.menuViewCommand.item.depth3.template,onInitTemplate:function(n,t){var i=n.replace("{{anchorTemplate}}",this.anchorTemplate);return ecount.widget.replaceAttr(i,$.extend(t,{"style.listClassName":this._getListClassName(t),"style.display":t["style.display"]==!1?"hidden":"",childrenContainerTemplate:t.functions.newWinIcon?"":ecount.menuViewCommand.item.depth3.childrenContainerTemplate}))},anchorTemplate:'<a href="{{attr.href}}" data-role="menu.anchor" target="{{attr.target}}" data-index={{index}} id="{{domId}}" data-cid="{{id}}" class="{{style.anchorClass}}">\n{{label}}\n<\/a>',setChildrenContainerScroll:function(){var n=this.getChildrenContainer(),u=$(window).height(),e=2-ecount.common.getZoomRatio(),f=n.offset(),t,i,r;n.css({height:"",overflow:""});t=n.height();i=u-(f.top+t);r=t+Math.floor(i);i<0&&Math.abs(r)>30&&n.css({height:r+"px",overflow:"auto"})}},depth4:{__inheritParent:"widget.view.menuItem.common",anchorTemplate:'<a href="{{attr.href}}" data-level={{level}} data-role="menu.anchor" target="{{attr.target}}" data-index={{index}} id="{{domId}}" data-cid="{{id}}" class="{{style.anchorClass}}">\n{{label}}\n<\/a>'},webMailDepth1:{__inheritParent:"widget.view.menuItem.common",template:ecount.menuViewCommand.item.depth1.template},webMailDepth2:{__inheritParent:"widget.view.menuItem.common",_getListClassName:function(n){var t=[];return n.id&&t.push(this._getIconClassName(n.id)),n["attr.isClosed"]&&t.push(this.closeClassName),n["attr.selected"]&&t.push(this.activeClassName),t.join(" ")}},webMailDepth3:{__inheritParent:"widget.view.menuItem.common",template:'<li id="{{id}}" data-ecpath="{{ecPath}}" data-role="menu.listedItem" class="{{style.listClassName}} {{style.display}}" data-cid="{{id}}">\n{{anchorTemplate}}\n<div class="nav-option" data-ecpath={{ecPath}} data-role="menu.listedItem" data-cid="{{id}}">[[newWinIcon]][[countLabel]][[fn]][[navArrow]]<\/div>\n{{childrenContainerTemplate}}\n<\/li>',anchorTemplate:'<a href="{{attr.href}}" data-role="menu.anchor" target="{{attr.target}}" data-index={{index}} id="{{domId}}" data-cid="{{id}}">\n{{label}}\n<\/a>',fnTemplate:'<button class="btn btn-default btn-fn" data-function="fn" data-service="layer.fn" data-cid="{{cid}}"><\/button>',childrenContainerTemplate:'<ul data-role="menu.itemContainer"><\/ul>',countLabelTemplate:'<span class="label label-primary label-sm {{style.display}}" data-role="menu.countLabel">{{value}}<\/span>',onInitTemplate:function(n,t){return ecount.widget.replaceAttr(n,$.extend(t,{anchorTemplate:this.anchorTemplate,"style.listClassName":this._getListClassName(t),"style.display":t["style.display"]==!1?"hidden":"",childrenContainerTemplate:t.functions.newWinIcon?"":this.childrenContainerTemplate}))},onChangeValueCountLabel:function(n){var t=this.$el.find('[data-role="menu.countLabel"]:first()');t.length&&(this.$el.find('a:first span[data-role="menu.newwindow"]').removeClass("visible"),n?t.text(n):t.empty())},onChangeStyleDisplayCountLabel:function(n){var t=this.$el.find('[data-role="menu.countLabel"]:first()');t.length&&(n?t.removeClass("hidden"):t.addClass("hidden"))},onChangeStyleDisplayFn:function(n){var t=this.$el.find('[data-service="layer.fn"]').eq(0);t&&n?t.addClass("visible"):t&&!n&&t.removeClass("visible")}},webMailDepth4:{__inheritParent:"widget.view.menuItem.common",template:'<li id="{{id}}" data-ecpath="{{ecPath}}" data-role="menu.listedItem" class="{{style.listClassName}} {{style.display}}" data-cid="{{id}}">\n{{anchorTemplate}}\n{{btnNav}}\n<\/li>',btnNavTemplate:'<div class="nav-option">\n[[countLabel]][[fn]][[newWinIcon]]\n<\/div>',anchorTemplate:'<a href="{{attr.href}}" data-level={{level}} data-role="menu.anchor" target="{{attr.target}}" data-index={{index}} id="{{domId}}" data-cid="{{id}}" class="{{style.anchorClass}}">\n{{label}}\n<\/a>',fnTemplate:['<button class="btn btn-default btn-fn" data-function="fn" data-service="layer.fn" data-cid="{{cid}}" data-role="menu.foldermanagement"><\/button>',].join("\n"),countLabelTemplate:'<span class="label label-primary label-sm {{style.display}}" data-role="menu.countLabel">{{value}}<\/span>',onInitTemplate:function(n,t){var i=n.replace("{{anchorTemplate}}",this.anchorTemplate),r=ecount.widget.replaceAttr(i,$.extend(t,{"style.listClassName":this._getListClassName(t),"style.display":t["style.display"]==!1?"hidden":""}));return r.replace("{{btnNav}}",this.btnNavTemplate)},onChangeStyleDisplayFn:function(n){var t=this.$el.find('button[data-role="menu.foldermanagement"]').eq(0);n?t.addClass("visible"):t.removeClass("visible")},onChangeValueCountLabel:function(n){var t=this.$el.find('[data-role="menu.countLabel"]:first()');t.length&&(this.$el.find('a:first span[data-role="menu.newwindow"]').removeClass("visible"),n?t.text(n):t.empty())},onChangeStyleDisplayCountLabel:function(n){var t=this.$el.find('[data-role="menu.countLabel"]:first()');t.length&&(n?t.removeClass("hidden"):t.addClass("hidden"))}},horizontal:{template:'<li id="{{attr.id}}" class="{{attr.isActivated}}" data-ecpath="{{ecPath}}" data-role="{{ecRole}}" data-cid="{{cid}}"><a href="{{attr.href}}" id="{{attr.id}}" data-role="{{ecRole}}" data-cid="{{cid}}">{{label}}<\/a><\/li>',activeClassName:"active",onInitTemplate:function(n,t){var t=t.components&&t.components.length?$.extend(t,t.components[0]):t,i=n.replace("{{attr.isActivated}}",t["attr.isActivated"]?this.activeClassName:"");return ecount.widget.replaceAttr(i,t)},onChangeAttrIsActivated:function(n,t){t?this.$el.addClass(this.activeClassName):this.$el.removeClass(this.activeClassName)}},navigation:{template:'<li id="{{attr.id}}" class="{{attr.isActivated}}" data-ecpath="{{ecPath}}" data-role="{{ecRole}}" data-cid="{{cid}}"><span class="{{style.css}}" data-role="{{ecRole}}" data-cid="{{cid}}"><\/span>{{label}}<\/li>',activeClassName:"active",onInitTemplate:function(n,t){var t=t.components&&t.components.length?$.extend(t,t.components[0]):t,i=n.replace("{{attr.isActivated}}",t["attr.isActivated"]?this.activeClassName:"");return ecount.widget.replaceAttr(i,t)},onChangeAttrIsActivated:function(n,t){t?this.$el.addClass(this.activeClassName):this.$el.removeClass(this.activeClassName)}}}};