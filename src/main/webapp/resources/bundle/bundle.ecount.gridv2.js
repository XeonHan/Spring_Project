window.__define_resource&&__define_resource("LBL09091","MSG06586","LBL08019","BTN00070","BTN00008","MSG01136","MSG00684","MSG02158","MSG03839","LBL03176","MSG00238","LBL02170","LBL10119","LBL02792","LBL01593","LBL10736","LBL19460","LBL19461","LBL10699","LBL13743","LBL13744","LBL10388","LBL13745","LBL10387","LBL12304","LBL10956","LBL21369");ecount.gridV2=function(n,t){function tt(n){ecount.gridV2.config.dataPerformance&&ecount.gridV2.util.log(String.format("only row data performance time: {0}ms",(new Date).getTime()-ecount.gridV2.config.dataRowPerformanceStart));ecount.gridV2.config.dataPerformance&&ecount.gridV2.util.log(String.format("data performance time: {0}ms",(new Date).getTime()-ecount.gridV2.config.dataPerformanceStart));n=n||ecount.gridV2.config.viewEnable;n?(ecount.gridV2.config.renderingPerformance&&(ecount.gridV2.config.renderingPerformanceStart=(new Date).getTime()),i.render.init({core:i,setting:t,mixinOption:r}),i.render.render()):(s.init({core:i,setting:t,mixinOption:r,boundary:w,__events:h}),i.drawing=!1,ecount.gridV2.config.allPerformance&&ecount.gridV2.util.log(String.format("all performance time: {0}ms",(new Date).getTime()-ecount.gridV2.config.allPerformanceStart)))}function it(){i.lastUpdateTime=new Date}function gt(f){if(r.optLayout.layer==null||r.optLayout.layer==undefined){d();return}ecount.gridV2.config.renderingPerformance&&ecount.gridV2.util.log(String.format("rendering performance time: {0}ms",(new Date).getTime()-ecount.gridV2.config.renderingPerformanceStart));ecount.gridV2.config.viewPerformance&&(ecount.gridV2.config.viewPerformanceStart=(new Date).getTime());i.view.initProperties({core:i,setting:t,mixinOption:r,boundary:w,startBoundary:pt,endBoundary:wt},$.extend(f,{containerId:n}));i.view.render();ecount.gridV2.config.viewPerformance&&ecount.gridV2.util.log(String.format("view performance time: {0}ms",(new Date).getTime()-ecount.gridV2.config.viewPerformanceStart));s.init({core:i,setting:t,mixinOption:r,boundary:w,__events:h});i.drawing=!1;i.drawCount+=1;r.optPaging.totalRowCountSearchResult=f.dataCount;f.partitialRenderingStatus=="finish"&&ecount.global.setTimeout(r.optCommon.ecPageId,function(){var e=-1,o,s,t;r.optForm.version==u.formVersion.fourth&&(e=i.fn.getTableHeight(),r.optCommon.isRefreshForm&&(r.optEvent.onAfterSelect&&(r.optEvent.onAfterSelect=!1,r.optEvent.afterSelectInfo&&(o=i.view.cell.getCellOriginalElement(r.optEvent.afterSelectInfo.startSectionType,r.optEvent.afterSelectInfo.startColumnId,r.optEvent.afterSelectInfo.startRowId).cell,s=i.view.cell.getCellOriginalElement(r.optEvent.afterSelectInfo.endSectionType,r.optEvent.afterSelectInfo.endColumnId,r.optEvent.afterSelectInfo.endRowId).cell,r.viewSelector.hideOption().ecSelectByElement(o,s).ecDraw().show(),r.viewSelector.MOUSEUP_HANDLER(),t=i.fn.getDisplaySelectorOption(),t.isHorizontal&&t.isVertical?r.viewSelector.showOption({isShowCross:!0}):t.isHorizontal?r.viewSelector.showOption({isShowHorizontal:!0}):t.isVertical&&r.viewSelector.showOption({isShowVertical:!0}))),r.optEvent.onAfterInsertRow&&(r.optEvent.onAfterInsertRow=!1,h&&h._triggerEvent(ecount.grid.event.list.formAddedRow,null,{})),r.optCommon.isRefreshForm=!1));(!i.setting.getOnloadCompleteAfterShowContextmenu()||i.drawCount>1)&&v(!1);h&&h._triggerEvent(ecount.grid.event.list.renderComplete,{},{containerId:n,gridId:r.optCommon.ecGridId,drawCounter:i.drawCount,gridWidth:f.gridWidth,totalDataCount:f.totalDataCount,dataCount:f.dataCount,dataRows:f.dataRows,printPageCount:f.printPageCount,isPositionRelative:f.isPositionRelative,partitialRenderingStatus:f.partitialRenderingStatus,totalTableHeight:e});ecount.gridV2.logger.log(f.partitialRenderingStatus);ecount.gridV2.logger.log(i.drawCount);r.optCommon.parentGridEvent&&r.optCommon.parentGridEventArgs&&(_.merge(r.optCommon.parentGridEventArgs,{detailGrid:i.$container}),r.optCommon.parentGridEvent._triggerEvent(ecount.gridV2.renderEvent.renderCompleted,r.optCommon.parentGridEventArgs))},0);it();f.partitialRenderingStatus=="finish"&&(ecount.runtime.observe("scroll.page.eventContainer",[r.optCommon.ecPageId,"grid"].join("_"),s.onScroll.bind(s)),ecount.runtime.observe("resize",r.optCommon.ecPageId,s.onResize.bind(s)),ecount.runtime.observe("dragStop",r.optCommon.ecPageId,s.onPopupDragStop.bind(s)));ecount.gridV2.config.allPerformance&&ecount.gridV2.util.log(String.format("all performance time: {0}ms",(new Date).getTime()-ecount.gridV2.config.allPerformanceStart))}var yt=function(){if(ecount.gridV2.config.operateMode=="development"){if(t==undefined||t==null)return ecount.gridV2.util.notify("ecount.gridV2 첫번째 인자를 설정하지 않았습니다."),!1;if(!(t instanceof ecount.gridV2.setting))return ecount.gridV2.util.notify("ecount.gridV2 첫번째 인자는 ecount.gridV2.setting 객체여야 합니다."),!1}return!0},k;if(yt()){var u=ecount.grid.constValue,o=u.sectionType.thead,f=u.sectionType.tbody,e=u.sectionType.tfoot,h=t.eventsGet(),s=new ecount.gridV2.handler,w=new ecount.gridV2.modules.boundary,pt=new ecount.gridV2.modules.boundary,wt=new ecount.gridV2.modules.boundary,i={state:"none",renderCount:0,drawCount:0,drawing:!1,drawCancel:!1,maxColumnCountInRow:0,initRowCount:0,lastUpdateTime:null,boundary:null,onFocusin:!1,eventHost:null,keydownStartTime:null,freeSizeWidth:!1,isActive:!1,activeSectionType:null,activeColumnId:null,activeRowId:null,activeColumnIndex:-1,activeRowIndex:-1,savedSectionType:null,savedColumnId:null,savedRowId:null,savedColumnIndex:-1,savedRowIndex:-1,lastFocusedActiveSectionType:null,lastFocusedActiveColumnId:null,lastFocusedActiveRowId:null,lastFocusedActiveColumnIndex:-1,lastFocusedActiveRowIndex:-1,editLastActiveSectionType:null,editLastActiveColumnId:null,editLastActiveRowId:null,editLastActiveColumnIndex:-1,editLastActiveRowIndex:-1,oldValue:"",dropdownmenu:{setTimeoutId:null,activeServiceKey:null,activeSectionType:null,activeColumnId:null,activeRowId:null},moveScroll:!0};i.boundary=new ecount.gridV2.modules.boundary;i.dragBoundary=new ecount.gridV2.modules.boundary;var l=t.serialize(),b=function(n){return{optCommon:n.common,optLayout:n.layout,optEvent:n.event,optForm:n.form,optFormOption:n.formOption,optTable:n.table,optColumn:n.column,optRow:n.row,optKeyboard:n.keyboard,optEditable:n.editable,optTree:n.tree,optWidget:n.widget,optPaging:n.paging,optHeader:n.header,optHeaderToolbar:n.headerToolbar,optCheckbox:n.checkbox,optNumbering:n.numbering,optRowmoveable:n.rowmoveable,optShaded:n.shaded,optFoot:n.foot,optFootToolbar:n.footToolbar,optFix:n.fix,optMatrixState:n.matrixState,optDropdown:n.dropdown,optDrag:n.drag,optContextmenu:n.contextmenu,optSession:n.session,optResize:n.resize,optSelector:n.selector,optMerge:n.merge,optRadio:n.radio,optOuterVertical:n.outerVertical,optOuterHorizontal:n.outerHorizontal,optOverlay:n.overlay}},r=b(l),g=ec$.$getScrollContainer(r.optCommon.ecPageId);try{t.setLayoutContents(g[0]);t.setLayoutContents$(g)}catch(bu){}t.setLayoutContainerSelector(n);k=l.layout.$layer.find("div[data-gid="+n+"]");r.optForm.version==u.formVersion.fourth&&r.optForm.layoutTemplateType==u.formLayoutTemplateType.report?(i.$container=k.find(".areaselect-content"),i.container=i.$container.length>0?i.$container[0]:null):(i.$container=k,i.container=i.$container[0]);i.$container.append("<div><\/div>");i.events=new ecount.gridV2.events;i.customEvents=new ecount.gridV2.customEvents;t.setLayoutContainer(i.container);t.setLayoutContainer$(i.$container);t.setCommonGridUniqueId([t.getCommonGridId(),ecount.common.uuid(u.tableUniqueIdPrefix)].join(ecount.delimiter));t.setCommonGridId(n);h&&(h.register(ecount.gridV2.event.init,null,tt),h.register(ecount.gridV2.event.renderComplete,null,gt));i.setting=t;i.api=new ecount.gridV2.modules.api;i.data=new ecount.gridV2.data;ecount.gridV2.config.viewEnable&&(i.render=new ecount.gridV2.render,i.view=new ecount.gridV2.viewTableTable);i.transaction=new ecount.gridV2.transaction({view:i.view});i.history=new ecount.gridV2.modules.histroy;i.history.init();i.api.init();var bt=function(){return t},kt=function(){if(i.container){h._triggerEvent(ecount.gridV2.event.detach,{});for(var n;n=i.container.lastChild;)i.container.removeChild(n)}},dt=function(){i.freeSizeWidth=!1;i.pageInfo=null;kt()},v=function(n){r.optCommon.useLoadingProgressbar&&(n?r.optLayout.progressbar&&r.optLayout.progressbar.show&&r.optLayout.progressbar.show({gridId:r.optCommon.ecGridId}):r.optLayout.progressbar&&r.optLayout.progressbar.hide&&r.optLayout.progressbar.hide({gridId:r.optCommon.ecGridId}))},nt=function(){if(ecount.gridV2.config.allPerformance&&(ecount.gridV2.config.allPerformanceStart=(new Date).getTime()),r.optForm.version==u.formVersion.third?(r.optSelector.use&&(r.optSelector.version==null&&(r.optSelector.version=u.selector.version.singleSection),r.optOverlay.use===null&&(r.optOverlay.use=!0),r.optCommon.columnType==u.columnType.multi&&r.optCommon.renderType!=u.gridRenderType.salarySetting?(r.optOuterHorizontal.use=!0,r.optOuterVertical.use=!0):r.optCommon.columnType==u.columnType.single&&(r.optOuterHorizontal.use=!1,r.optOuterVertical.use=!1)),r.optContextmenu.keys===null&&(r.optContextmenu.keys=[u.mouseButton.left])):r.optForm.version==u.formVersion.fourth&&r.optContextmenu.keys===null&&(r.optContextmenu.keys=[u.mouseButton.right]),l=t.serialize(),r=b(l),r.__core=i,r.optContextmenu.type==u.contextmenuType.custom){var f=new ecount.events(this);f.register(ecount.grid.event.list.beforeOpeningContextmenu,this,function(n,t){return h._triggerEvent(n.type,n,t)}.bind(this));f.register(ecount.grid.event.list.afterOpeningContextmenu,this,function(n,t){return h._triggerEvent(n.type,n,t)}.bind(this));f.register(ecount.grid.event.list.completedOpenContextmenu,this,function(n,t){return h._triggerEvent(n.type,n,t)}.bind(this));r.optContextmenu.instance=new ecount.gridV2.modules.contextmenu({core:i,setting:t,fn:i.fn,mixinOption:r,contextmenuData:r.optContextmenu.itemList||[]},f)}r.optFormOption.gridIndex=1;v(!0);r.optWidget.commonEventDelegator||h._triggerEvent(ecount.gridV2.event.ready,{settings:t});i.renderCount+=1;i.$container.addClass("hide");ecount.gridLogString.eventLog({eventType:"initProcessRender",ecPageId:i.setting.getCommonEcPageId(),gridId:n,type:"",columnId:"",rowId:"",rowIdx:"",columnName:""});i.renderCount>1&&(h._triggerEvent(ecount.grid.event.list.beforeRemoveDOM,null,{}),wu());vt();dt();i.view&&i.view.destroyAll&&i.view.destroyAll();i.render&&i.render.destroyAll&&i.render.destroyAll();i.data&&i.data.destroyAll&&i.data.destroyAll();i.events&&i.events.initValue&&i.events.initValue();i.drawCancel=!1;i.drawing=!0;ecount.gridV2.config.dataPerformance&&(ecount.gridV2.config.dataPerformanceStart=(new Date).getTime());r.optCommon.parentGridId?i.data.init({core:i,setting:t,mixinOption:r}):ecount.global.setTimeout(r.optCommon.ecPageId,function(){i.data.init({core:i,setting:t,mixinOption:r})},0)};var ni=function(){i.drawCancel||(i.container&&i.container.classList.remove("variable-reset-full-size"),i.drawing?(h&&h.register(ecount.gridV2.renderEvent.cancelCompleted,null,function(){h.remove(ecount.gridV2.renderEvent.cancelCompleted);i&&(i.transaction&&i.transaction.reset(),i.history&&i.history.reset());nt()}.bind(this)),i.drawCancel=!0):nt())},rt=function(){i.drawing&&(v(!1),i.transaction&&i.transaction.reset(),i.history&&i.history.reset(),i.drawing=!1,i.drawCancel=!1)},ut=function(n){var f,e,r,o,t,s;if(i.isActive){for(f=i.data.column.getAll(n.gridSectionType,u.returnType.single,!1,"system",{isNotIndexSort:!0}),e=i.data.row.getAll(n.gridSectionType),ecount.gridV2.logger.log(String.format("grid v2 - active : {0} {1} {2}",n.gridSectionType,n.gridColumnID,n.gridDataKey)),i.deactiveSectionType=i.activeSectionType||i.lastFocusedActiveSectionType,i.deactiveColumnId=i.activeColumnId||i.lastFocusedActiveColumnId,i.deactiveRowId=i.activeRowId||i.lastFocusedActiveRowId,i.activeSectionType=n.gridSectionType,i.activeColumnId=n.gridColumnID,i.activeRowId=n.gridDataKey,i.lastFocusedActiveSectionType=n.gridSectionType,i.lastFocusedActiveColumnId=n.gridColumnID,i.lastFocusedActiveRowId=n.gridDataKey,r=0,o=e.length;r<o;r++)if(n.gridDataKey==e[r][u.keyColumnPropertyName]){i.activeRowIndex=r;i.lastFocusedActiveRowIndex=r;break}for(t=0,s=f.length;t<s;t++)if(!ecount.common.isTrue(f[t].isHideColumn)&&f[t].id==i.activeColumnId){i.activeColumnIndex=t;i.lastFocusedActiveColumnIndex=t;break}}},ti=function(){return r.optRow[ecount.grid.constValue.sectionType.tbody].dataUseFirst===!0&&r.optCommon.isPossibleRenderOnLoad===!0&&i.drawCount==0},ii=function(n,t){h&&h.register(n,null,t)},ri=function(n){h.remove(n)},ui=function(n,t,r,f){if(f=f||{},arguments.length==0?(n=o,t=u.returnType.single,r=!0):arguments.length==1&&(typeof arguments[0]=="object"&&arguments[0].constructor!=Array&&(f=arguments[0]),n=f.sectionType||o,t=f.isReturnValueMulti===!0?u.returnType.multi:u.returnType.single,r=typeof f.isClone=="boolean"?f.isClone:!0,delete f.sectionType,delete f.isReturnValueMulti,delete f.isClone),i.data&&i.data.column)return i.data.column.getAll(n,t,r,"custom",f)},a=function(n,t,r,s,h){var v,c,k,l,y,p,d,g;if((arguments.length==2?(r=arguments[1],t=arguments[0],n=f,h={}):arguments.length==3?(s=arguments[2],r=arguments[1],t=arguments[0],h={},n=/special-row-\d+/.test(r)?e:f):arguments.length==4?[o,f,e].contains(arguments[0])||(h=arguments[3],s=arguments[2],r=arguments[1],t=arguments[0],n=/special-row-\d+/.test(r)?e:f):arguments.length==5&&([o,f,e].contains(arguments[0])||(h=arguments[3],s=arguments[2],r=arguments[1],t=arguments[0],n=/special-row-\d+/.test(r)?e:f)),h=h||{},h.callByType=h.callByType==undefined||h.callByType==null?"user":h.callByType,ecount.gridV2.logger.log("cell set value - sectionType: %s, columnId: %s, rowId: %s, value: %s",n,t,r,s),n!=undefined&&t!=undefined&&r!=undefined)&&i.data.row){if(s=s==undefined?"":s,s!=undefined&&s!=null&&s.constructor&&s instanceof Decimal&&(s=s.toString()),r=r.toString(),i.data.validate)for(v=["widget","custom"],c=0,k=v.length;c<k;c++)l=i.data.validate.get(v[c],n,t,r),l&&(h.callByType=="user"&&(l.error.widget.needValidate=!1),i.view.cell.removeError(v[c],n,t,r),!l||l.isValidate||l.error.widget.needValidate||i.data.validate.remove(v[c],n,t,r));y=i.data.column.getById(n,t);p={continueToChange:!0};typeof s!="object"&&y&&i.data.column.isDecimalDataType(n,t)&&(s=i.data.column.getConvertor(n,u.dataType.modeInput,t)(s,{dataType:y.controlOption.dataType,isCheckZero:ecount.common.isTrue(y.controlOption.isCheckZero),amtCalc:y.amtCalc}).replace(u.thousandsPattern,""));var w=i.data.row.getViewDataCellMap(n,t,r),b=i.view.editLayer&&i.view.editLayer.getInstance(),a=i.view.editLayer&&i.view.editLayer.getActiveCell()||{};return(i.view.editLayer&&b&&a.activeSectionType==n&&a.activeColumnId==t&&a.activeRowId==r&&b.gridColumnID==t&&i.view.editLayer.setValue(s),i.data.optCheckbox[n]&&i.data.optCheckbox[n].items[t]&&i.data.optCheckbox[n].items[t].use&&w&&w.cellInfo&&w.cellInfo.controlType=="ecount.gridV2.widget.checkbox"&&!(h&&h.isCheckedFromGrid))?(h.isEnableDisableCheck||(d=i.data.checkbox.isDisabledCheckbox(n,t,r),d&&(s=!1)),s==!0&&fi(n,t,r),h.isSetCell=!0,i.data.checkbox.executeCheckbox(n,t,r,s,h),i.data.row.getValue(n,t,r)):(p=i.data.row.setValue(n,t,r,s,h),i.view.editLayer&&b&&a.activeSectionType==n&&a.activeColumnId==t&&a.activeRowId==r?i.view.editLayer.isViewMode()&&i.view.editLayer.refreshViewLayer(n,t,r):(g=i.transaction.begin(),i.transaction.push("cell","setValue",[n,t,r,s,h]),g&&i.transaction.commit()),p&&p.continueToChange)}},fi=function(n,t,r){var u=i.data.row.getViewDataCellMap(n,t,r);u.cellInfo&&u.cellInfo.disabled&&delete u.cellInfo.disabled;i.data.checkbox.setDisabledList(n,t,r,!1)},ei=function(n,t,r){return arguments.length==2&&(r=arguments[1],t=arguments[0],n=/special-row-\d+/g.test(r)?e:f),i.data.row.getValue(n,t,r)},ft=function(n,t,r,o){var h,v,y,p,w,s;if(arguments.length==2?(r=arguments[1],t=arguments[0],n=/special-row-\d+/g.test(r)?e:f):arguments.length==3&&typeof arguments[2]=="object"&&(o=arguments[2],r=arguments[1],t=arguments[0],n=/special-row-\d+/g.test(r)?e:f),n!=undefined&&t!=undefined&&r!=undefined){if(r=r.toString(),h=i.data.row.getValue(n,t,r),o=o||{},o.isRefresh=!0,!o.isRemove){var c=i.data.row.getViewDataCellMap(n,t,r),l=c.cellInfo?c.cellInfo.controlType:"",a=c.cellInfo?c.cellInfo.editControlType:"";u.controlInWidget[a]&&(l=a);v=["beforeChange",n,t,l,"custom"].join(ecount.constValue.gridDelimiter);i.events.exist(v)&&(y={type:"gridEvent.rowItem.beforeChange"},i.data.row.emitCustomEvent(n,t,r,"beforeChange",y,{newValue:h}))}p=i.view.editLayer&&i.view.editLayer.getInstance();i.view.editLayer&&p&&i.activeSectionType==n&&i.activeColumnId==t&&i.activeRowId==r?i.view.editLayer.setValue(h):(w=i.transaction.begin(),i.transaction.push("cell","setValue",[n,t,r,h,o]),s=i.data.column.getById(n,t),s&&s.TOP_BORD_USE_TF&&s.BTTM_BORD_USE_TF&&s.LEFT_BORD_USE_TF&&s.RGT_BORD_USE_TF&&i.transaction.push("table","changeStyle",[n,{"border-color":s.TOP_BORD_COLOR_CD||s.BTTM_BORD_COLOR_CD||s.LEFT_BORD_COLOR_CD||s.RGT_BORD_COLOR_CD,"border-width":s.TOP_BORD_THICK||s.BTTM_BORD_THICK||s.LEFT_BORD_THICK||s.RGT_BORD_THICK,"border-style":s.TOP_BORD_STYL_CD||s.BTTM_BORD_STYL_CD||s.LEFT_BORD_STYL_CD||s.RGT_BORD_STYL_CD}]),w&&i.transaction.commit())}},oi=function(n,t,i){var r,s,o;for(arguments.length==1?(t=arguments[0],n=[f,e]):arguments.length==2&&typeof arguments[1]=="object"&&(i=arguments[1],t=arguments[0],n=[f,e]),typeof n=="string"&&(n=[n]),r=0;r<n.length;r++)if(t){s=ht(n[r],u.keyColumnPropertyName,{});for(o in s)o!=="undefined"&&this.refreshCell(n[r],t,o,i,"callByUser")}},si=function(n,t,r,o){var c,s,l,p,h;if(arguments.length==3&&(o=arguments[2],r=arguments[1],t=arguments[0],n=/special-row-\d+/g.test(r)?e:f),i.data.row){if(c=o,typeof o=="string"&&(c=[o]),s=i.data.row.getViewDataTrMap(n,r),s&&s.rowInfo&&s.rowInfo[t]){(s.rowInfo[t].className==undefined||s.rowInfo[t].className==null)&&(s.rowInfo[t].className="");var v=i.data.column.getAll(n,u.returnType.multi),a=i.data.row.getViewDataCellMap(n,t,r),w=a&&a.cellInfo&&a.cellInfo.columnIdx,b=v&&v.length||1,k=i.data.row.getIndexById(n,r)*b,y=i.data.row.getViewDataMadeCell(n,w,k);if(y)for(l=0,p=c.length;l<p;l++)h=c[l].trim(),h==""||new RegExp("(\\s)"+h+"(?!(\\w|-))|^"+h+"(?!(\\w|-))","g").test(s.rowInfo[t].className)||(s.rowInfo[t].className+=h+" ",y.className.push(h))}i.transaction.push("cell","addClass",[n,t,r,c])}},hi=function(n,t,r,o){var h,s,l,y,c,a;if(arguments.length==3&&(o=arguments[2],r=arguments[1],t=arguments[0],n=/special-row-\d+/g.test(r)?e:f),h=o||[],typeof o=="string"&&(h=[o]),s=i.data.row.getViewDataTrMap(n,r),s&&s.rowInfo&&s.rowInfo[t]){(s.rowInfo[t].className==undefined||s.rowInfo[t].className==null)&&(s.rowInfo[t].className="");var p=i.data.column.getIndexById(n,u.returnColumnIndexType.multi,t),w=i.data.row.getIndexById(n,r),v=i.data.row.getViewDataMadeCell(n,p,w);for(l=0,y=h.length;l<y;l++)c=h[l].trim(),c!=""&&(s.rowInfo[t].className=s.rowInfo[t].className.replace(new RegExp("(\\s)"+c+"(?!(\\w|-))|^"+c+"(?!(\\w|-))","g"),""),a=v.className.indexOf(c),a>-1&&v.className.splice(a,1))}i.transaction.push("cell","removeClass",[n,t,r,h])},ku=function(){i.transaction.push("cell","addClassByControl",arguments)},et=function(n,t,o,s){var v,y,l,c,p,h,a,w;if(arguments.length==3&&(s=arguments[0],n=/special-row-\d+/.test(o)?e:f),arguments.length==2&&(s=arguments[0],n=/special-row-\d+/.test(o)?e:f),v=i.transaction.begin(),n!=i.activeSectionType||t!=i.activeColumnId||s||(o==i.activeRowId||o===!0)&&r.viewEditLayer.blur(i.activeSectionType,i.activeColumnId,i.activeRowId),o!==undefined&&o!==""&&o!==!0&&o!==!1)h=i.data.row.getById(n,o),y=i.data.column.getById(n,t),h&&y&&(i.data.row.setDisabled(n,t,o,s),i.transaction.push("cell","setEditable",[n,t,o,s]));else{for(l=i.data.row.getAll(n),c=0,p=l.length;c<p;c++)h=l[c],a=h[u.keyColumnPropertyName],i.data.row.setDisabled(n,t,a,s),i.transaction.push("cell","setEditable",[n,t,a,s]);o===!0&&(w=s==!0?1:0,i.data.column.setColumnInfo(n,t,{editableState:w}))}v&&i.transaction.commit()},ot=function(n,t,r){arguments.length==2&&(r=arguments[1],t=arguments[0],n=f);var u=i.data.row.getViewDataCellInfo(n,t,r);return u.editableState===!0},ci=function(n,t,r){var f=i.data.column.getById(n,t),e=i.data.row.getAll(n);f.isHideColumn=r?!1:!0;e.forEach(function(f){i.view.cell.removeClass(n,t,f[u.keyColumnPropertyName],"hide");r||i.view.cell.addClass(n,t,f[u.keyColumnPropertyName],"hide")})},li=function(n,t,s){var et=[o,f,e],tt,l,it=[],ot=0,c,rt,ct,y,lt,w,ut,v,b,g,nt,h,k;if(i.drawing!=!0){if(et.indexOf(arguments[0])>-1){ci.apply(this,arguments);return}for(rt=0,ct=et.length;rt<ct;rt++){var p=et[rt],st=i.data.column.getById(p,n),a=i.data.column.getAll(p,u.returnType.multi),d=i.data.row.getAll(p);if(!st||p==o&&!ecount.common.isTrue(st.isHideColumn)==t&&!s)break;if(st.isHideColumn=t?!1:!0,p==o)for(v=0,b=a.length;v<b;v++)if(tt=i.data.row.getViewDataCellMap(p,n,d[v][u.keyColumnPropertyName]),tt&&tt.cellInfo&&tt.cellInfo.adjustmentValue!=1){l=tt.cellInfo.columnIdx;break}if(p==o)for(v=0,b=d.length;v<b;v++)for(h=0,k=a.length;h<k;h++)$.isNull(l)||(c=i.view.cell.getCellElement(p,a[h][l].id,d[v][u.keyColumnPropertyName]),c&&c.map&&c.map.cellInfo&&c.map.cellInfo.adjustmentValue!=1&&(it.push(c.cell.colSpan?parseInt(c.cell.colSpan,10):1),t?(c.cell.className=c.cell.className.replace(/(\s)hide(?!(\w|-))|^hide(?!(\w|-))/g,""),a[h][l].className||(a[h][l].className=""),a[h][l].className=a[h][l].className.replace(/(\s)hide(?!(\w|-))|^hide(?!(\w|-))/g,""),a[h][l].isHideColumn="0",w=r.optColumn[o].columns.filter(function(n){return n.id==a[h][l].id}),w&&w.forEach(function(n){n.isHideColumn="0"}),c.map.cellInfo.className||(c.map.cellInfo.className=""),c.map.cellInfo.className=c.map.cellInfo.className.replace(/(\s)hide(?!(\w|-))|^hide(?!(\w|-))/g,"")):/(\s)hide(?!(\w|-))|^hide(?!(\w|-))/g.test(c.cell.className)||(c.cell.className+=" hide ",a[h][l].className||(a[h][l].className=""),a[h][l].className+=" hide ",a[h][l].isHideColumn="1",w=r.optColumn[o].columns.filter(function(n){return n.id==a[h][l].id}),w&&w.forEach(function(n){n.isHideColumn="1"}),c.map.cellInfo.className||(c.map.cellInfo.className=""),c.map.cellInfo.className+=" hide ")));else{for(v=0,b=d.length;v<b;v++)for(h=0,k=it.length;h<k;h++)for(y=0,lt=it[h];y<lt;y++)$.isNull(l)||(c=i.view.cell.getCellElement(p,a[h][l+y].id,d[v][u.keyColumnPropertyName]),c&&c.map&&c.map.cellInfo&&c.map.cellInfo.adjustmentValue!=1&&(t?(c.cell.className=c.cell.className.replace(/(\s)hide(?!(\w|-))|^hide(?!(\w|-))/g,""),a[h][l+y].className||(a[h][l+y].className=""),a[h][l+y].className=a[h][l+y].className.replace(/(\s)hide(?!(\w|-))|^hide(?!(\w|-))/g,""),a[h][l+y].isHideColumn="0",w=r.optColumn[o].columns.filter(function(n){return n.id==a[h][l+y].id}),w&&w.forEach(function(n){n.isHideColumn="0"}),c.map.cellInfo.className||(c.map.cellInfo.className=""),c.map.cellInfo.className=c.map.cellInfo.className.replace(/(\s)hide(?!(\w|-))|^hide(?!(\w|-))/g,"")):/(\s)hide(?!(\w|-))|^hide(?!(\w|-))/g.test(c.cell.className)||(c.cell.className+=" hide ",a[h][l+y].className||(a[h][l+y].className=""),a[h][l+y].className+=" hide ",a[h][l+y].isHideColumn="1",w=r.optColumn[o].columns.filter(function(n){return n.id==a[h][l+y].id}),w&&w.forEach(function(n){n.isHideColumn="1"}),c.map.cellInfo.className||(c.map.cellInfo.className=""),c.map.cellInfo.className+=" hide ")));if(d.length===0&&_.isFunction(_.get(i,"view.row.getSectionElement"))&&(ut=$(i.view.row.getSectionElement(p)),ut&&ut.length)){var ft=ut.find("tr > td"),at=ft.attr("colspan"),ht=_.get(i,"view.row.dataColumn._columns",[]).filter(function(n){return n.isHideColumn!=="1"&&n.isHideColumn!==!0}).length;ft&&ft.length&&at&&ht&&at!==ht&&ft.attr("colspan",ht)}}if(p==o)for(v=0,b=it.length;v<b;v++)for(h=0,k=it[v];h<k;h++)g=i.view.col.getColElementByIndex(p,l+h),t?g.className=g.className.replace(/(\s)hide(?!(\w|-))|^hide(?!(\w|-))/g,""):/(\s)hide(?!(\w|-))|^hide(?!(\w|-))/g.test(g.className)||(g.className+=" hide "),a[v][h].isHideColumn=["0","1"].contains(a[v][h].isHideColumn)?t?"0":"1":t?!1:!0,ot+=parseInt(g.style.width,10)}if(!i.data.column.isWidthFreeSize()&&(nt=i.view.table.getAllTableElement(o),nt&&nt.length>0))for(h=0,k=nt.length;h<k;h++)i.freeSizeWidth||(nt[h].style.width=parseInt(nt[h].style.width,10)+(t?ot:ot*-1)+"px")}},ai=function(n,t,u,f){var u,e;arguments.length==2&&(f=arguments[1],t=arguments[0],n=o,u=i.data.row.getIdByIndex(n,0));e=r.optColumn[n].columns;e.forEach(function(n){n.id==t&&(n.title=f)});a(n,t,u,f,{isRunChange:!1,isRunComplete:!1})},du=function(n){var r=i.data.column.getAll(n.sectionType,u.returnType.multi),t={top:$.isEmpty(n.top)?n.bottom||0:n.top,left:$.isEmpty(n.left)?n.right||0:n.left,right:$.isEmpty(n.right)?n.left||0:n.right,bottom:$.isEmpty(n.bottom)?n.top||0:n.bottom};return $.isEmpty(t)||(t.bottom=t.bottom<r.length-1?r.length-1:t.bottom),t},st=function(n,t,s,h){var b,tt,v,d,et,l,y,rt,a,g,k,ut,p,ft,w,nt;if(h=h===void 0?{}:h,b=[o,f,e],tt=i.setting.getFormIsAutoMergeSpecialrow(),tt){for(l=0,y=r.optEditable.specialRowMerge.length;l<y;l++)v=r.optEditable.specialRowMerge[l][u.rowVariableNames.mergeSet],v.splice(0,v.length);for(d=i.data.row.getAll(e),l=0,y=d.length;l<y;l++)v=d[l][u.rowVariableNames.mergeSet],v&&i.data.row.removeTotalMergeSet(e,e,null,v)}for(r.optForm.version==u.formVersion.fourth&&(et=this.getRangeInformationsOfSelectedArea({returnType:"array"})),l=0,y=s.length;l<y;l++){var c={top:t.top,left:t.left,bottom:t.bottom,right:t.right},a=s[l].sectionType||o,it=i.data.column.getAll(a,u.returnType.multi);if((t.top==undefined||t.top==null)&&(c.top=t.bottom||0),(t.left==undefined||t.left==null)&&(c.left=t.right||0),(t.bottom==undefined||t.bottom==null)&&(c.bottom=t.top||0,c.bottom=c.bottom<it.length-1?it.length-1:c.bottom),(t.right==undefined||t.right==null)&&(c.right=t.left||0),s[l]&&s[l].columns&&(h.addCount===void 0&&(h.addCount=1),s[l].columns.forEach(function(n){h.addCount=Math.max(h.addCount,n.length)})),c.right-c.left+1!==h.addCount&&(n==="right"?c.left+=c.right-c.left+1-h.addCount:n==="left"&&(c.right-=c.right-c.left+1-h.addCount)),rt=i.data.row.extendBoundary(a,a,{top:c.top,bottom:c.bottom,left:c.left,right:c.right},{top:c.top,bottom:c.bottom,left:c.left,right:c.right}),i.data.column.add(a,n,c,s[l],h),i.data.row.insertColumn(a,n,c,rt,s[l],h),resultView=i.transaction.push("cell","add",[a,n,c,h]),(r.optForm.version!=u.formVersion.fourth||r.optCommon.columnType!=u.columnType.single)&&resultView)for(a in resultView)if(resultView.hasOwnProperty(a))for(g=resultView[a].cells||[],k=0,ut=g.length;k<ut;k++)i.view.bindEventMouseenterDropdownmenu(g[k])}if(r.optForm.version!=u.formVersion.fourth||r.optCommon.columnType!=u.columnType.single){for(p=0,ft=b.length;p<ft;p++)r.optCommon.columnType==u.columnType.multi?b[p]==e?i.data.row.divideViewDataTrMap(f,e,c):i.data.row.divideViewDataTrMap(b[p],null,c):i.data.row.divideViewDataTrMap(b[p],null,c);this.remakeAllRow(e);nt=i.view.selector&&i.view.selector.getSelectionType();r.optSelector.use&&this.reselectSelector({direction:n,boundary:{left:c.left,right:c.right}});r.optOuterHorizontal.use&&(w=i.view.outerHorizontal.__datas.activeId,i.view.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render(),w&&i.view.outerHorizontal.active(nt,w));r.optOuterVertical.use&&(w=i.view.outerVertical.__datas.activeId,i.view.outerVertical.clearAllChildElement().clearContainerElement().resetData().render(),w&&i.view.outerVertical.active(nt,w))}},vi=function(n,t){var s,h,f,e,l,c,r,a,v,y;for(t=t||{},s="right",t.direction&&(s=t.direction,delete t.direction),h=i.data.column.getAll(o,u.returnType.multi),f=-1,e=0,l=h.length;e<l;e++)for(c=h[e],r=0,a=c.length;r<a;r++)if(c[r].id==t.columnId){f=r;delete t.columnId;break}f!=-1&&(v={right:f},y=[{sectionType:o,columns:[[n]]}],this.__columnAdd(s,v,y,t))},gu=function(){},nf=function(){},tf=function(){},yi=function(n,t,e,o){arguments.length==2?(o=arguments[2],e=arguments[1],t=arguments[0],n=f):arguments.length==3&&(typeof arguments[2]=="object"?(o=arguments[2],e=arguments[1],t=arguments[0],n=f):o={});ecount.global.setTimeout(r.optCommon.ecPageId,function(){var f,s,h,c,l,r,a;if(ecount.gridV2.logger.log("cell focus - sectionType: %s, columnId: %s, rowId: %s",n,t,e),i.view&&i.view.cell){if(f=i.view.cell.getCellElement(n,t,e),s=f?f.cell:null,s){if(s.offsetHeight===0&&s.offsetWidth===0)return!1}else return!1;if(h=i.view.editLayer&&i.view.editLayer.getInstance(),i.activeSectionType==n&&i.activeColumnId==t&&i.activeRowId==e){if(h)return;if(u.nativeControlInGrid[f&&f.map&&f.map.cellInfo&&f.map.cellInfo.controlType])return}c=i.transaction.begin();i.activeSectionType&&i.activeColumnId&&i.activeRowId&&y(i.activeSectionType,i.activeColumnId,i.activeRowId);i.isActive=!0;ut({gridSectionType:n,gridColumnID:t,gridDataKey:e});i.view.cell.focus(n,t,e,o);l=["widget","custom"];r=null;i.data.validate&&l.forEach(function(u){if(r=i.data.validate.get(u,n,t,e),r&&!r.isValidate&&r.error.popover.visible&&(r.error.popover.isShow=!0),r)return a=u,!1;r=null});r&&!r.isValidate&&i.view.cell.showPopover(a,n,t,e,o);c&&i.transaction.commit()}},0)},pi=function(n,t,r){var e,s,o,h;if(arguments.length==2&&(r=arguments[1],t=arguments[0],n=f),typeof r=="object"&&r.constructor!=Array)for(e in r)r.hasOwnProperty(e)&&a(n,t,e,r[e]);else for(s=i.data.row.getAll(n),o=0,h=s.length;o<h;o++)a(n,t,s[o][u.keyColumnPropertyName],r)},wi=function(n,t,i,r){if(arguments.length==2?(i=arguments[1],t=arguments[0],r={},n=f):arguments.length==3&&(r=arguments[2],i=arguments[1],t=arguments[0],n=f),t!=undefined&&typeof t=="object")for(var u in t)t.hasOwnProperty(u)&&a(n,u,i,t[u],r)},bi=function(n,t,r,e,o){arguments.length==3?(e=arguments[2],r=arguments[1],t=arguments[0],o={},n=f):arguments.length==4&&(o=arguments[3],e=arguments[2],r=arguments[1],t=arguments[0],n=f);var s=i.data.row.getByIndex(n,r);s&&a(n,t,s[u.keyColumnPropertyName],e,o)},ki=function(n,t,r){arguments.length==2&&(r=arguments[1],t=arguments[0],n=f);var e=i.data.row.getByIndex(n,r);return e?i.data.row.getValue(n,t,e[u.keyColumnPropertyName]):null},y=function(n,t,r,u){arguments.length==2&&(r=arguments[1],t=arguments[0],n=f,u={});i.view&&i.view.editLayer&&(i.view.editLayer.blur(n,t,r,u),i.view.editLayer.commit());i.view.cell.blur(n,t,r,u)},di=function(n,t,r,u){arguments.length==2?(r=arguments[1],t=arguments[0],n=f):arguments.length==3&&typeof arguments[2]=="object"&&(u=arguments[2],r=arguments[1],t=arguments[0],n=f);u=u||{};var o=u.validateType||"custom",e=i.data.validate.get(o,n,t,r),s=e!=null&&e!=undefined,e=s?e:{isValidate:!1,error:{popover:{visible:u.popOverVisible!==!1,isShow:u.showDirect===!0,message:u.message||"",placement:u.placement||"auto"},css:{visible:u.cssVisible!==!1},widget:{needValidate:u.widgetNeedValidate===!0,errorType:null,useValidate:!1}}},h=i.data.row.getViewDataCellInfo(n,t,r),c=h&&h.controlType||"";e.error.css.visible=u.cssVisible!==!1;e.error.widget.needValidate=u.widgetNeedValidate===!0;s||i.data.validate.add(o,n,t,r,e);u.cssVisible!==!1&&i.transaction.push("cell","showError",[o,n,t,r,u]);u&&u.setCellFocus&&i.transaction.push("cell","focus",[n,t,r,u]);i.fn.setCellShowPopover(o,n,t,r,u);i.view.setTooltipVisible(n,t,r,!1);l.widget.UIEventDelegator&&l.widget.UIEventDelegator.triggerEvent("control.showError",{instance:{},cid:n+"|"+t+"|"+r})},gi=function(n,t,r,u){var o,e;arguments.length==2?(r=arguments[1],t=arguments[0],u={},n=f):arguments.length==3&&(u=arguments[2],r=arguments[1],t=arguments[0],n=f);o=i.transaction.begin();for(e in r)r.hasOwnProperty(e)&&a(n,e,t,r[e],u);o&&i.transaction.commit()},nr=function(n,t,i,u,f){var e=r.optEditable.editLimitAddRow,o=r.optEditable.limitAddRowCallback,s;if(f.limitRowCount=i,e>0){if(e==t.length)return r.optRow[n].autoAddRowCount=0,o&&o(),!0;e<=t.length+i&&(r.optRow[n].autoAddRowMargin=1,f.limitRowCount=e-t.length)}else if(s={index:u,addCount:i,isMergeAddRow:f.isMergeAddRow,disUseAutoAddRow:function(){r.optRow[n].autoAddRowCount=0}},o&&!o(t,s))return!0;return!1},tr=function(n,t,e,s){var c,w,nt,k,b,v,l,a;if(arguments.length==1?(t=arguments[0],n=f,e=e||-1):arguments.length==2?(e=arguments[1],e=e-1,t=arguments[0],n=f):arguments.length==3&&typeof arguments[2]=="object"&&(s=arguments[2],e=arguments[1],t=arguments[0],n=f),t<1)return!1;if(c=i.data.row.getAll(n),s=s||{},s.addDirection=s.addDirection||"down",/^\d+$/.test(e))e>c.length&&(e=c.length-1);else if(c.length==0){if(s.addDirection=="down")e=-1;else if(s.addDirection=="up")return}else e=c.length,s.addDirection="last";if(!nr(n,c,t,e,s)){t!==s.limitRowCount&&(t=s.limitRowCount);var d=s.addDirection=="down"?1:0,y=i.data.row.getByIndex(n,e+d),rt=y?y[u.keyColumnPropertyName]:c[c.length-1]&&c[c.length-1][u.keyColumnPropertyName],ut=y&&i.view.row.getRowElement(n,y[u.keyColumnPropertyName]),p=e+d,g=e+d+t,tt=i.data.column.getAll(n),it,ft=s.isFirstRow===!0,et=s.isLastRow===!0;if(s.lastRowId=rt,s.targetRows=ut,w=i.data.row.add(n,t,e,s),i.data.optCheckbox[n].use)for(nt=i.data.row.getAll(o),l=0,b=nt.length;l<b;l++)i.data.checkbox.executeCheckbox(o,u.checkBoxPropertyName,nt[l][u.keyColumnPropertyName],!1);for(i.data.row.view.setRenderMode(u.renderMode.addRow),i.data.row.view.makeViewData(n,{dataRowStartIndex:p,dataRowEndIndex:g,madeTbodyRowCount:n==f?w.standardIndex+1:null}),i.transaction.push("row","add",[n,t,e,s]),i.data.row.view.setRenderMode(u.renderMode.none),k=0,b=w.refreshCell.length;k<b;k++)v=w.refreshCell[k],this.refreshCell(v.sectionType,v.columnId,v.rowId,v.option);for(l=0;l<tt.length;l++)if((a=tt[l],ecount.common.isTrue(a.isHideColumn)!==!0&&a.width!==0&&a.editableState===1&&![u.checkBoxPropertyName,u.rowMoveablePropertyName,u.rowNumberingPropertyName].contains(a.id))&&ot(a.id,c[p][u.keyColumnPropertyName])===!0){it=a.id;break}h&&h._triggerEvent(ecount.grid.event.list.renderAllRowComplete,{},{addRowStartIndex:p,addRowEndIndex:g-1,addRowStartKey:c[p][u.keyColumnPropertyName],addRowEndKey:c[g-1][u.keyColumnPropertyName],addRowMoveScroll:typeof s.moveScroll=="boolean"?s.moveScroll:i.moveScroll,gridId:r.optCommon.ecGridId,isAddedFirstRow:ft,isAddedLastRow:et,focusColumnId:it})}},ir=function(n,t,o,s,h,c,l){var v,nt,y,tt,it,b,k,a,p,d,w,g;if(l=l||{},nt=i.setting.getFormIsAutoMergeSpecialrow(),nt){for(a=0,p=r.optEditable.specialRowMerge.length;a<p;a++)y=r.optEditable.specialRowMerge[a][u.rowVariableNames.mergeSet],y.splice(0,y.length);for(v=i.data.row.getAll(e),a=0,p=v.length;a<p;a++)y=v[a][u.rowVariableNames.mergeSet],y&&i.data.row.removeTotalMergeSet(e,e,[o],y)}if(tt=i.data.column.insertRow(t||n,o,s,h,c,l.defaultColumnValues),it=i.data.row.insert(n,t,s,h,c),r.optForm.version!=u.formVersion.fourth||r.optCommon.columnType!=u.columnType.single){b=i.view.row.insert(n,t,o,s,h,c);r.optCommon.columnType==u.columnType.multi&&n==f&&i.data.row.changeViewDataTrMapAll(n,e);for(k in b)b.hasOwnProperty(k)&&i.view.selector&&i.view.selector.attachElements(b[k].$trs);for(this.remakeAllRow(e),i.data.column.increaseRowIndex(t||n,o,1),v=i.data.row.getAll(f),a=0,p=v.length;a<p;a++)(d=v[a][u.rowVariableNames.rowType]==u.rowType.separate?e:f,d!=e)&&this.refreshRow(f,d,v[a][u.keyColumnPropertyName]);g=i.view.selector&&i.view.selector.getSelectionType();r.optOuterHorizontal.use&&(w=i.view.outerHorizontal.__datas.activeId,i.view.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render(),w&&i.view.outerHorizontal.active(g,w));r.optOuterVertical.use&&(w=i.view.outerVertical.__datas.activeId,i.view.outerVertical.clearAllChildElement().clearContainerElement().resetData().render(),w&&i.view.outerVertical.active(g,w))}},rr=function(n,t,r){i.view.row.refresh(n,t,r)},ur=function(n,t,r,e){var o,s,h;arguments.length==3&&(e=arguments[2],r=arguments[1],t=arguments[0],n=f);e&&(o=i.data.column.getAll(n,u.returnType.multi),r-=o.length,t-=o.length);s=i.data.row.getIdByIndex(n,t);h=i.data.row.getIdByIndex(n,r);i.data.row.move(n,s,h)},fr=function(n,t,s){var y,l,b,h,v,c,k,a,d;if(arguments.length==1?(t=arguments[0],n=f):arguments.length==2&&(s=arguments[1],t=arguments[0],n=f),t!=undefined&&t!=null){if(t=t.toString(),s=s||{},/^special-row-\d+/g.test(t)&&(n=e),removeDOM=s.removeDOM||!1,y=i.data.column.getAll(n),u.gridType.editable==r.optCommon.gridType)for(h=0,v=y.length;h<v;h++)this.validateRemove(n,y[h].id,t);if(removeDOM){lr(n,t,s);return}var g=s.changeCascade||!1,nt=s.changeCascade||!1,tt=s.deleteImpossibilityColumnIdList||null,it=s.setDefaultValue||!1,rt=s.remainEditableState==undefined||s.remainEditableState==null?!0:s.remainEditableState,p=i.setting.getCheckBoxUse(o,u.checkBoxPropertyName),w=p?i.data.row.getAll(o):null;if(i.data.row.clear(n,t,s),l=i.data.column.getAll(n,u.returnType.multi),b=i.transaction.begin(),p)for(h=0,v=w.length;h<v;h++)r.dataCheckbox.executeCheckbox(o,u.checkBoxPropertyName,w[h][u.keyColumnPropertyName],!1);for(c=0,k=l.length;c<k;c++)for(a=0,d=l[c].length;a<d;a++)l[c][a].id==u.checkBoxPropertyName?i.data.checkbox.executeCheckbox(f,u.checkBoxPropertyName,t,!1,{isRunChange:!1,isRunComplete:!1}):i.transaction.push("cell","refresh",[n,l[c][a].id,t]);b&&i.transaction.commit()}},er=function(n,t,s,h){var p,y,w,b,nt,k,tt,l,d,v,g,c,a;if(i.data&&i.data.row&&i.data.column){for(p=[n],r.optCommon.columnType==u.columnType.multi&&(p=[o,f,e]),y=h,w=i.data.column.getSystemColumnCount(n),b=0,nt=p.length;b<nt;b++)k=i.data.column.getAll(n,u.returnType.multi),y=i.data.row.extendBoundary(n,t,{top:h.top,left:w,bottom:h.bottom,right:k[0].length-1},{top:h.top,left:w,bottom:h.bottom,right:k[0].length-1});if(tt=i.setting.getFormIsAutoMergeSpecialrow(),tt){for(c=0,a=r.optEditable.specialRowMerge.length;c<a;c++)l=r.optEditable.specialRowMerge[c][u.rowVariableNames.mergeSet],l.splice(0,l.length);for(d=i.data.row.getAll(e),c=0,a=d.length;c<a;c++)l=d[c][u.rowVariableNames.mergeSet],l&&i.data.row.removeTotalMergeSet(e,e,null,l)}for(v=i.transaction.push("row","removeAt",[n,t,h,y]),g=i.data.column.removeRowAtBoundary(t||n,h),i.data.row.removeAtBoundary(n,t,h,y,{removedColumnInfo:g}),r.optCommon.columnType==u.columnType.multi&&n==f&&i.data.row.changeViewDataTrMapAll(n,e),c=0,a=v.length;c<a;c++)this.refreshCell(v[c].sectionType,v[c].columnId,v[c].rowId);return r.optForm.version==u.formVersion.fourth&&r.optCommon.columnType==u.columnType.single&&this.remakeAllRow(f),this.remakeAllRow(e),i.data.column.decreaseRowIndex(t||n,s,h.bottom-h.top+1),r.optOuterHorizontal.use&&i.view.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render(),r.optOuterVertical.use&&i.view.outerVertical.clearAllChildElement().clearContainerElement().resetData().render(),r.optSelector.use&&i.view.selector.resetData().hide().hideOption(),g}},or=function(n){var v=i.setting.getFormIsAutoMergeSpecialrow(),c,l,h,a,s,t;if(v){for(c=r.dataRow.getAll(n),l=r.dataRow.getAll(f),h=0,a=c.length;h<a;h++)l[0][u.rowVariableNames.mergeSet]||(l[0][u.rowVariableNames.mergeSet]=[]),s=_.cloneDeep(l[0][u.rowVariableNames.mergeSet]),!r.optRow[n].additionalDatasInForm&&[f,e].contains(n)&&(r.optRow[n].additionalDatasInForm=_.cloneDeep(c[h])),this.removeRow(n,c[h][u.keyColumnPropertyName],{removeDOM:!0}),r.optForm.version==u.formVersion.fourth?(t=r.dataColumn.getDetailSections(n),(t.contains(u.sectionSeparateValue.pagetotslip)||t.contains(u.sectionSeparateValue.pagetot))&&r.dataRow.addTotalMergeSet(n,n,[u.sectionSeparateValue.pagetotslip,u.sectionSeparateValue.pagetot],s),(t.contains(u.sectionSeparateValue.subtot1slip)||t.contains(u.sectionSeparateValue.subtot1))&&r.dataRow.addTotalMergeSet(n,n,[u.sectionSeparateValue.subtot1slip,u.sectionSeparateValue.subtot1],s),(t.contains(u.sectionSeparateValue.subtot2slip)||t.contains(u.sectionSeparateValue.subtot2))&&r.dataRow.addTotalMergeSet(n,n,[u.sectionSeparateValue.subtot2slip,u.sectionSeparateValue.subtot2],s),(t.contains(u.sectionSeparateValue.subtot3slip)||t.contains(u.sectionSeparateValue.subtot3))&&r.dataRow.addTotalMergeSet(n,n,[u.sectionSeparateValue.subtot3slip,u.sectionSeparateValue.subtot3],s),(t.contains(u.sectionSeparateValue.subtot4slip)||t.contains(u.sectionSeparateValue.subtot4))&&r.dataRow.addTotalMergeSet(n,n,[u.sectionSeparateValue.subtot4slip,u.sectionSeparateValue.subtot4],s),(t.contains(u.sectionSeparateValue.subtot5slip)||t.contains(u.sectionSeparateValue.subtot5))&&r.dataRow.addTotalMergeSet(n,n,[u.sectionSeparateValue.subtot5slip,u.sectionSeparateValue.subtot5],s),n==e&&(t.contains(u.sectionSeparateValue.slip)||t.contains(u.sectionSeparateValue.line))&&r.dataRow.addTotalMergeSet(n,n,[u.sectionSeparateValue.slip,u.sectionSeparateValue.line],s)):r.dataRow.addTotalMergeSet(o,o,null,s),r.optRow[n].additionalDatasInForm&&[f,e].contains(n)&&(r.optRow[n].additionalDatasInForm[u.rowVariableNames.mergeSet]=s),n==e&&(r.optEditable.specialRowMerge[h][u.rowVariableNames.mergeSet]=s,r.optEditable.specialRowMerge&&_.extend(c[h],r.optEditable.specialRowMerge[h]));this.addRow(n,1,-1,{addDirection:"down"});r.optRow[n].additionalDatasInForm=null}},sr=function(n,t,i){var s=r.dataRow.getById(n,i),l,o,a,h,v,c,y,p;if(s){for(l=s[u.rowVariableNames.mergeSet]||[],!r.optRow[n].additionalDatasInForm&&[f,e].contains(n)&&(r.optRow[n].additionalDatasInForm=_.cloneDeep(s)),o=r.dataRow.getAll(n),a=r.dataRow.getIndexById(n,i),a<o.length-1?h="up":a==o.length-1?h="down":o.length==0&&(h="last"),this.removeRow(n,s[u.keyColumnPropertyName],{removeDOM:!0}),v=r.dataColumn.getDetailSections(t),c=0,y=v.length;c<y;c++)r.dataRow.addTotalMergeSet(n,t,[v[c]],l);r.optRow[n].additionalDatasInForm&&(r.optRow[n].additionalDatasInForm[u.rowVariableNames.mergeSet]=l);r.optCommon.columnType==u.columnType.single?(p=r.dataColumn.getAll(u.sectionType.tbody,u.returnType.multi),this.addRow(n,1,p.length-1,{addDirection:"down"})):r.optCommon.columnType==u.columnType.multi&&this.addRow(n,1,o.length-1,{addDirection:h});r.optRow[n].additionalDatasInForm=null}},hr=function(n,t,s,h){for(var b,a,v,nt,it,rt,p,tt,k,ut,l,w,g=[o,f,e],c=h,y={},d=0,ft=g.length;d<ft;d++)b=g[d],a=g[d],r.optCommon.columnType==u.columnType.multi&&(b=a==e?f:a),v=i.data.column.getAll(a,u.returnType.multi),r.optCommon.columnType==u.columnType.multi&&e==a&&v&&v.length>0&&v[0].length>0?(nt=i.data.column.getAll(f,u.returnType.multi),c=i.data.row.extendBoundary(b,a,{top:nt.length,left:c.left,bottom:nt.length+v.length-1,right:c.right},{top:0,left:c.left,bottom:v.length-1,right:c.right}),y[a]||(y[a]={extendBoundary:null}),y[a].extendBoundary=c):(it=i.data.row.getAll(b,null,{}),it.length>0&&(c=i.data.row.extendBoundary(b,a,{top:0,left:c.left,bottom:v.length-1,right:c.right},{top:0,left:c.left,bottom:v.length-1,right:c.right})),y[a]||(y[a]={extendBoundary:null}),y[a].extendBoundary=c);if(rt=i.setting.getFormIsAutoMergeSpecialrow(),rt){for(l=0,w=r.optEditable.specialRowMerge.length;l<w;l++)p=r.optEditable.specialRowMerge[l][u.rowVariableNames.mergeSet],p.splice(0,p.length);for(tt=i.data.row.getAll(e),l=0,w=tt.length;l<w;l++)p=tt[l][u.rowVariableNames.mergeSet],p&&i.data.row.removeTotalMergeSet(e,e,null,p)}for(k=i.transaction.push("cell","remove",[n,h,c]),ut=i.data.row.removeColumn(t||n,h,c,y),i.data.column.removeCol(u.sectionType.thead,h.left,h.right-h.left-1),i.transaction.push("table","changeStyle",[n,{width:i.data.column.getTotalWidth(!0)+"px"}]),r.optCommon.columnType==u.columnType.multi&&n==f&&i.data.row.changeViewDataTrMapAll(n,e),i.data.row.clearPopoverList(e),l=0,w=k.length;l<w;l++)this.refreshCell(k[l].sectionType,k[l].columnId,k[l].rowId);return r.optForm.version==u.formVersion.fourth&&r.optCommon.columnType==u.columnType.single&&this.remakeAllRow(f),this.remakeAllRow(e),r.optOuterHorizontal.use&&i.view.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render(),r.optOuterVertical.use&&i.view.outerVertical.clearAllChildElement().clearContainerElement().resetData().render(),r.optSelector.use&&(i.view.selector.getStartBoundary().reset(),i.view.selector.getEndBoundary().reset(),i.view.selector.hide().hideOption()),ut},cr=function(n,t){var e,r,o;for(arguments.length==0?n=f:arguments.length==1&&(t=arguments[0],n=f),t=t||{},e=i.data.row.getAll(n),r=e.length-1;r>-1;r--)o=i.data.checkbox.get(n,u.checkBoxPropertyName,e[r][u.keyColumnPropertyName]),o&&this.removeRow(n,o[u.keyColumnPropertyName],t)},lr=function(n,t,r){var e,u,o,s,h;for(arguments.length==1?(t=arguments[0],n=f):arguments.length==2&&(r=arguments[1],t=arguments[0],n=f),r=r||{},typeof t=="string"&&(t=[t]),e=i.transaction.begin(),u=0,o=t.length;u<o;u++)s=t[u],i.transaction.push("row","remove",[n,s,r]);i.transaction.commit();h=i.data.row.removes(n,t,r);e||i.transaction.begin()},ar=function(n,t){return(arguments.length==1&&(t=arguments[0],n=/special-row-\d+/.test(t)?e:f),!i.data&&!i.data.row)?null:(p(),i.data.row.getById(n,t,!0))},vr=function(n,t,r){var c=[],o,y,s,e,l;if(arguments.length==0?(n=f,r={}):arguments.length==1?(t=arguments[0],n=f,r={}):arguments.length==2&&(r=arguments[1],t=arguments[0],n=f),!i.data||!i.data.row)return[];if(y=r&&r.filterFunc,s=r.exceptRowType,typeof s=="string"&&s!=""&&(s=[s]),p({isRunChange:!0,isRunComplete:!0}),o=i.data.row.getAll(n,null,!0),$.isFunction(y)){for(e=0,l=o.length;e<l;e++)if((!s||!s.contains(o[e][u.rowVariableNames.rowType]))&&y(o[e])==!0)if(t){var a=i.data.column.getById(n,t),v=a&&a.propertyName||t,h={};h[u.keyColumnPropertyName]=o[e][u.keyColumnPropertyName];h[v]=o[e][v];c.push(h)}else c.push(JSON.parse(Object.toJSON(o[e]).replace(/(\")([\w|\-|\.|\|]+)(\"\:)/gi,function(n){return n.toUpperCase()})))}else for(e=0,l=o.length;e<l;e++)if(!s||!s.contains(o[e][u.rowVariableNames.rowType]))if(t){var a=i.data.column.getById(n,t),v=a&&a.propertyName||t,h={};h[u.keyColumnPropertyName]=o[e][u.keyColumnPropertyName];h[v]=o[e][v];c.push(h)}else c.push(JSON.parse(Object.toJSON(o[e]).replace(/(\")([\w|\-|\.|\|]+)(\"\:)/gi,function(n){return n.toUpperCase()})));return c},p=function(n){var r;n=n||{};var u=n.isRunChange===!0,f=n.isRunComplete===!0,t=i.view.editLayer&&i.view.editLayer.getInstance();i.activeSectionType&&i.activeColumnId&&i.activeRowId&&i.view.editLayer&&t&&(r=t.getValue(),i.data.row.setValue(i.activeSectionType,i.activeColumnId,i.activeRowId,r,{isRunChange:u,isRunComplete:f,isRemove:!0}))},yr=function(n,t,e,o){var h,c,s,y;arguments.length==1?(t=arguments[0],n=f):arguments.length==2?(e=arguments[1],t=arguments[0],n=f):arguments.length==3&&(o=arguments[2],e=arguments[1],t=arguments[0],n=f);o=o||{};var p=o.rowState||{},b=o.rowNumbering||{},l=o.exceptRowType,k=typeof p.check=="boolean"?p.check:r.optRow[n].rowState&&r.optRow[n].rowState.check,d=p.include||r.optRow[n].rowState.include||[],g=typeof b.isZeroBase=="boolean"?b.isZeroBase:r.optRow[n].rowNumbering&&r.optRow[n].rowNumbering.isZeroBase;e=e||r.optRow[n].filter;var a=[],w=[],v=0;if(typeof l=="string"&&l!=""&&(l=[l]),typeof e=="function"){for(h=i.data.row.getAll(n,null,!0),s=0,y=h.length;s<y;s++)l&&l.contains(h[s][u.rowVariableNames.rowType])||e(h[s],s)===!0&&(w.push(h[s]),h[s][ecount.grid.constValue.displayRowNumberingPropertyName]=v+(g?0:1),[ecount.grid.constValue.rowState.none,ecount.grid.constValue.rowState.changed,ecount.grid.constValue.rowState.changedIndex].contains(h[s][ecount.grid.constValue.rowStatePropertyName])&&(ecount.grid.constValue.rowState.changed!=h[s][ecount.grid.constValue.rowStatePropertyName]&&(h[s][ecount.grid.constValue.rowStatePropertyName]=h[s][ecount.grid.constValue.rowIndexPropertyName]==s?ecount.grid.constValue.rowState.none:ecount.grid.constValue.rowState.changedIndex),h[s][ecount.grid.constValue.rowChangedIndexPropertyName]=h[s][ecount.grid.constValue.rowIndexPropertyName]==s?!1:!0),k&&d.contains(h[s][ecount.grid.constValue.rowStatePropertyName])&&a.push(JSON.parse(Object.toJSON(h[s]).replace(/(\")([\w|\-]+)(\"\:)/gi,function(n){return n.toUpperCase()}))),v+=1);for(c=i.data.row.getDeletedAll(n,!0),s=0,y=c.length;s<y;s++)l&&l.contains(c[s][u.rowVariableNames.rowType])||e(c[s],s)===!0&&(w.push(c[s]),c[s][ecount.grid.constValue.displayRowNumberingPropertyName]=v+(g?0:1),[ecount.grid.constValue.rowState.none,ecount.grid.constValue.rowState.changed,ecount.grid.constValue.rowState.changedIndex].contains(c[s][ecount.grid.constValue.rowStatePropertyName])&&(ecount.grid.constValue.rowState.changed!=c[s][ecount.grid.constValue.rowStatePropertyName]&&(c[s][ecount.grid.constValue.rowStatePropertyName]=c[s][ecount.grid.constValue.rowIndexPropertyName]==s?ecount.grid.constValue.rowState.none:ecount.grid.constValue.rowState.changedIndex),c[s][ecount.grid.constValue.rowChangedIndexPropertyName]=c[s][ecount.grid.constValue.rowIndexPropertyName]==s?!1:!0),k&&d.contains(c[s][ecount.grid.constValue.rowStatePropertyName])&&a.push(JSON.parse(Object.toJSON(c[s]).replace(/(\")([\w|\-]+)(\"\:)/gi,function(n){return n.toUpperCase()}))),v+=1)}return t&&(a=wr(n,a,t)),{RowCount:w.length,InitRowCount:i.data.row.getInitRowCount(n),list:a}},ht=function(n,t,r){var s,o,e,h;if(arguments.length==1?(t=arguments[0],r={},n=f):arguments.length==2&&(r=arguments[1],t=arguments[0],n=f),s={},filter=r.filterFunc,t)return pr(n,t,filter);for(o=i.data.row.getAll(n,!0),e=0,h=o.length;e<h;e++)typeof filter=="function"?filter(o[e])===!0&&(s[o[e][u.keyColumnPropertyName]]=JSON.parse(Object.toJSON(o[e]).replace(/(\")([\w|\-]+)(\"\:)/gi,function(n){return n.toUpperCase()}))):s[o[e][u.keyColumnPropertyName]]=JSON.parse(Object.toJSON(o[e]).replace(/(\")([\w|\-]+)(\"\:)/gi,function(n){return n.toUpperCase()}));return s},pr=function(n,t,r){var h=i.data.row.getAll(n),c=i.data.column.getById(n,t),e={},f,o,s,l;for(o=c?c.propertyName:t,s=0,l=h.length;s<l;s++)f=h[s],typeof r=="function"?r(f)===!0&&(e[f[u.keyColumnPropertyName]]=f[f[u.keyColumnPropertyName]],e[f[o]]=f[o]):(e[f[u.keyColumnPropertyName]]=f[f[u.keyColumnPropertyName]],e[f[o]]=f[o]);return e},wr=function(n,t,r,f){var c=i.data.column.getById(n,r),o={},e,s,h,l;for(s=c?c.propertyName:r,h=0,l=t.length;h<l;h++)e=t[h],typeof f=="function"?f(e)===!0&&(o[e[u.keyColumnPropertyName]]=e[e[u.keyColumnPropertyName]],o[e[s]]=e[s]):(o[e[u.keyColumnPropertyName]]=e[e[u.keyColumnPropertyName]],o[e[s]]=e[s]);return o},br=function(n){var r,e,t,o;for(arguments.length==0&&(n=f),r=[],e=i.data.row.getAll(n),t=0,o=e.length;t<o;t++)r.push(e[t][u.keyColumnPropertyName]);return r},kr=function(n,t){arguments.length==1&&(t=arguments[0],n=f);var r=i.data.row.getByIndex(n,t);return r?r[u.keyColumnPropertyName]:null},rf=function(n,t,r){arguments.length==1?(t=arguments[0],n=f):arguments.length==2&&(r=arguments[1],t=arguments[0],n=f);var e=i.data.row.getById(n,t);return e?e[u.rowIndexPropertyName]:null},dr=function(n,t){var r,u,o,s,e,h;for(arguments.length==0?(t={},n=f):arguments.length==1&&(t=arguments[0],n=f),r=t.type||[ecount.grid.constValue.rowCount.type.none],typeof r=="string"&&(r=[r]),u=0,o=[f],e=0,h=o.length;e<h;e++)s=i.data.row.getAll(n),u+=s.length,r.contains(ecount.grid.constValue.rowCount.type.minusSubTotal)&&(u-=i.data.row.getSubTotalCount(n)),r.contains(ecount.grid.constValue.rowCount.type.minusTotal)&&(u-=i.data.row.getTotalCount(n));return u},gr=function(n,t,r){arguments.length==2&&(r=arguments[1],t=arguments[0],n=f);$.isString(r)&&(r=[r]);i.transaction.push("row","addClass",[n,t,r])},nu=function(n,t,r,u){arguments.length==3?(u=arguments[2],r=arguments[1],t=arguments[0],n=f):arguments.length==2&&(r=arguments[1],t=arguments[0],n=f,u={});$.isString(r)&&(r=[r]);i.transaction.push("row","removeClass",[n,t,r])},tu=function(n,t,r){return arguments.length==2&&(r=arguments[1],t=arguments[0],n=f),i.transaction.push("row","hasClass",[n,t,r])},uf=function(){i.transaction.push("row","focus",arguments)},ff=function(){i.transaction.push("table","focus",arguments)},iu=function(n,t){if(arguments.length==1)var t=arguments[0],n=f;$.isString(t)&&(t=[t]);i.transaction.push("table","addClass",[n,t])},ru=function(n,t){if(arguments.length==1)var t=arguments[0],n=f;$.isString(t)&&(t=[t]);i.transaction.push("table","removeClass",[n,t])},ef=function(){},of=function(){},uu=function(n){var u=r.optCommon.ecPageId,t=r.optCommon.graphProcedureCallbackID,i=!1,f=r.optLayout.containerSelector;return t&&ecount.global.findCallback(u,t)&&(i=!0),i!==!0&&(t=ecount.global.registerCallback(u,function(t,i){ecount.graph.openGraph(t,n,i)}),t&&(i=!0,r.optCommon.graphProcedureCallbackID=t)),i?t:null},ct=function(){return i.transaction.begin()},lt=function(){i.transaction.commit()},at=function(n){i.$container.addClass("position-fixed");i.$container.css("top","5000px");i.$container.removeClass("hidden");var t=n({isSetWidth:!0,isUnmounted:!0});return i.$container.addClass("hidden"),i.$container.removeClass("position-fixed"),i.$container.css("top",""),t},fu=function(){i.render.prettifyPrintableHTML(i.$container,{isInitailize:!0,isSetWidth:!0,isSetHeight:!0,isHideBack:!0})},sf=function(){},eu=function(n){return n&&(n.eventsSet(t.eventsGet()),n.setLayoutContents(t.getLayoutContents()),n.setLayoutContents$(t.getLayoutContents$()),n.setLayoutContainer(t.getLayoutContainer()),n.setLayoutContainer$(t.getLayoutContainer$()),n.setLayoutContainerSelector(t.getLayoutContainerSelector()),n.setCommonGridUniqueId(t.getCommonGridUniqueId()),n.setCommonGridId(t.getCommonGridId()),n.setCommonParentPageId(t.getCommonParentPageId()),n.setCommonEcPageId(t.getCommonEcPageId()),n.setAlreadyIncludedLayout(t.getAlreadyIncludedLayout()),n.setCommonWidgetInitializer(t.getCommonWidgetInitializer()),n.setEventContainerObj(t.getEventContainerObj()),n.setCommonPopupLevel(t.getCommonPopupLevel()),n.setCommonPopupID(t.getCommonPopupID()),n.setEventBodyDelegatorObj(t.getEventBodyDelegatorObj()),n.setCommonEcContainerName(t.getCommonEcContainerName()),t=n,_.extend(r,b(t.serialize()))),t},ou=function(){i.history&&i.history.destroyAll&&i.history.destroyAll();i.history=null},su=function(){i.transaction&&i.transaction.destroyAll&&i.transaction.destroyAll();i.transaction=null},hu=function(){i.view&&i.view.destroyAll&&i.view.destroyAll();i.view=null},cu=function(){i.render&&i.render.destroyAll&&i.render.destroyAll();i.render=null},lu=function(){i.data&&i.data.destroyAll&&i.data.destroyAll();i.data=null},au=function(){i.setting&&i.setting.destroyAll&&i.setting.destroyAll();i.setting=null},vu=function(){r.optLayout.printIframeArea&&(i.container&&i.container.removeChild(r.optLayout.printIframeArea),r.optLayout.printIframeArea=null)},vt=function(){ecount.runtime.stopObserving("scroll.page.eventContainer",[r.optCommon.ecPageId,"grid"].join("_"))},yu=function(){delete ecount.gridV2.parent.gridRegistered[r.optCommon.ecPageId+r.optCommon.ecGridId]},pu=function(){r.optDrag.dragableModule&&r.optDrag.dragableModule.destroy()},wu=function(){r.optCheckbox.useMultiCheckBulk&&s._multiChecked()},d=function(){ou();su();hu();i.pageInfo=null;cu();lu();pu();au();vu();vt();yu()},c={__columnAdd:st,__columnRemove:hr,addCellClass:si,setCellStyle:function(n,t,i,o,s){s=s||{applyType:"ALL"};r.optCommon.columnType==u.columnType.multi&&n==e&&(n=f);switch(s.applyType){case"UI":r.viewCell.setStyle(n,t,i,o)}},removeCellStyle:function(n,t,i,u,f){f=f||{applyType:"ALL"};switch(f.applyType){case"UI":r.viewCell.removeStyle(n,t,i,u)}},addColumn:vi,addColumnSection:st,addRow:tr,addRowClass:gr,begin:ct,cancel:rt,commit:lt,destroyAll:d,drawView:tt,emitEvent:s.emitEvent.bind(s),getGridVersion:function(){return"v2"},getCell:ei,getCellByIndex:ki,getEditableState:ot,getRowCount:dr,getRowFilterList:yr,getRowItem:ar,getRowKeyByIndex:kr,getRowKeyList:br,getRowList:vr,getRowListObject:ht,hasRowClass:tu,insertRow:ir,isPossibleRenderOnLoad:ti,moveRow:ur,off:ri,on:ii,refreshCell:ft,refreshCellByColumn:oi,cellRemakeSpecialrow:function(){var n,h,c,t,s;i.drawing||(r.optSelector.use&&(n=i.view.selector.getStartInfos(),t=i.view.selector.getStartBoundary().get(),s=i.view.selector.getEndBoundary().get(),h={top:t.top,left:t.left,bottom:s.bottom,right:s.right},[o,f,e].contains(n.sectionType)&&(c=i.data.column.getAll(n.columnSectionType||n.sectionType,u.returnType.multi))),r.optForm.version==u.formVersion.fourth&&r.optCommon.columnType==u.columnType.single&&this.remakeAllRow(f),this.remakeAllRow(e),this.reselectSelector())},remakeAllRow:or,executeAutoMerge:sr,refreshRow:rr,removeCellClass:hi,removeCheckedRow:cr,removeRow:fr,removeRowAtBoundary:er,removeRowClass:nu,render:ni,reload:function(){var t,o,n;r.optForm.version==u.formVersion.fourth&&(r.optCommon.columnType==u.columnType.single?(t=this.getRangeInformationsOfSelectedArea({returnType:"array"}),t&&t.length&&(o=this.getSelectorSelectedInfo(),r.dataRow.removeAutoMergeInfo(),n=r.dataRow.getAll(e),i.setting.setColumns(r.dataColumn.getAll(o.startSectionType)).setRowData(r.dataRow.getAll(f)).setRowDataSample(f,null).setIsRefreshForm(!0).setEventAfterSelect(!0).setEventSelectInfo(o),n&&n.length&&i.setting.setRowDataSample(e,n[0]),i.fn.render())):r.optCommon.columnType==u.columnType.multi)},renderStop:rt,setCell:a,setCellByColumn:pi,setCellByIndex:bi,setCellByRow:wi,setCellFocus:yi,setColumnTitle:ai,setColumnVisibility:li,setEditable:et,setLastUpdateTime:it,setRow:gi,settings:eu,transaction:i.transaction,setting:{get:bt},isActive:function(){if([u.gridType.list,u.gridStyle.tree].contains(r.optCommon.gridType)){if(r.optKeyboard.useMoveCursor)return i.view.keyboard&&i.view.keyboard.isActive()}else return i.activeSectionType&&i.activeColumnId&&i.activeRowId},getGridId:function(){return l.common.ecGridId},bindDocumentEvents:function(){},lazyInitialize:function(){},setTableActiveResponsive:function(n){n==!0?iu("table-responsive"):ru("table-responsive")},getTableHeight:function(){var n=-1,t=r.optLayout.$container.find("table[data-gridid]");return t&&t.length&&(n=0,t.each(function(t,i){n+=i.offsetHeight})),n},getMaxWidthForPrint:function(){return r.optFormOption.typeSpecTranMaxWidth||i.data.column.getTotalWidth()},setPrintGridPage:function(n){i.data.print&&i.data.print.setPrintGridPage(n)},getPrintGridCurrentPage:function(){return i.data.print&&i.data.print.getPrintGridCurrentPage()},getPrintGridPageInfo:function(n){return i.data.print&&i.data.print.getPrintGridPageInfo(n)},isChecked:function(n,t,r){return arguments.length==1&&(r=arguments[0],n=f,t=u.checkBoxPropertyName),i.data.checkbox.isChecked(n,t,r)},isCheckedCustomHeader:function(n,t,r){return arguments.length==1&&(r="0",t=arguments[0],n=o),i.setting.getCheckboxIgnore(n,t)?this.getCell(n,t,r):i.data.checkbox.isChecked(n,t,r)},checkAll:function(n,t){ecount.common.isTrue(t)?i.data.checkbox.headerCheckFunction(null,n):i.data.checkbox.checkAll(null,n)},checkAllCustom:function(n,t,r){$.isEmpty(r)&&(r=!0);ecount.common.isTrue(r)?i.data.checkbox.checkAll(n,t):i.data.checkbox.headerCheckFunction(n,t)},addChecked:function(n){$.isString(n)&&(n=new Array(n));$.isArray(n)&&i.data.checkbox.addList(null,null,n)},removeChecked:function(n){$.isString(n)&&(n=new Array(n));$.isArray(n)&&i.data.checkbox.removeList(null,null,n)},getCheckedCount:function(n,t){return i.data.checkbox.getCheckedTotalCount(n,t)},getCheckedKeyList:function(n,t,r){return i.data.checkbox.getCheckedRowIdList(t,r,n)},getChecked:function(n,t){return p(),i.data.checkbox&&i.data.checkbox.getCheckedItem(n,"array",t)||[]},getCheckedObject:function(n,t){return p(),i.data.checkbox.getCheckedItem(n,"object",t)},setCheckWithChild:function(n,t,r,u){arguments.length==2?(r=arguments[1],t=arguments[0],n=f):arguments.length==3&&(u=arguments[2],r=arguments[1],t=arguments[0],n=f);i.data.tree.setCheckWithChild(n,t,r,u)},getCheckedCustomData:function(n){if(gridCore.options.customcheckbox&&gridCore.outerOptions.checkbox.rememberCustomChecked[n])return gridCore.getCheckedCustomData(n)},getCheckedCustomRowDatas:function(n,t){arguments.length==1&&(t=arguments[0],n=f);var r=i.data.checkbox.getCheckedRememberRow(n,t);return _.map(r,function(n){return{columnId:t,isChecked:!0,rowItem:n,rowKey:n[u.keyColumnPropertyName]}})},clearChecked:function(n){i.data&&i.data.checkbox&&i.data.checkbox.clear(n)},getShadedColumn:function(n){return i.data.shaded.getShadedItems(n)},clickShadedByKey:function(n,t,r){i.data.shaded.clickShadedByKey(n,t,r)},removeShadedColumn:function(n){n=n||f;i.data&&i.data.shaded&&i.data.shaded.removeShadedItems(n)},getResizeResult:function(){var n={};return n.resizedTotalWidth=i.freeSizeWidth?i.container.offsetWidth:i.data.column.getTotalWidth(),n},isFreeSizeWidth:function(){return i.freeSizeWidth},setSelectDisabled:function(n,t,i,r){arguments.length==3&&(r=arguments[2],i=arguments[1],t=arguments[0],n=f);r=!r;typeof i=="number"&&(i=this.getRowKeyByIndex(i));et(n,t,i,r)},getColumnInfo:function(n,t){return arguments.length==1&&(t=arguments[0],n=f),[o,f,e].contains(n)||(n=f),i.data&&i.data.column&&i.data.column.getById(n,t,!0)},getColumnInfoByIndex:function(n,t,r,f){switch(n){case u.searchType.single:return i.data.column.getByIndex(t,r,f,n,!0);case u.searchType.multi:return i.data.column.getByIndex(t,r,f,n,!0)}return null},getMergeInfoByDataType:function(n,t,r){return i.data.column.getMergeInfoByDataType(n,n,r,t)},findAutoMergeSetInfo:function(n,t,r){var f,o,s,e,h;return(r=r||"number",f=i.data&&i.data.column&&i.data.column.getMergeInfoByDataType(n,n,[t],r)||{startColumnId:null,startRowIndex:-1,startColumnIndex:-1,endColumnId:null,endRowIndex:-1,endColumnIndex:-1},f.startRowIndex>-1&&f.endRowIndex>-1&&f.startColumnIndex>-1&&f.endColumnIndex>-1)?(o=i.data.column.getAll(n,u.returnType.multi),s=o[0].length,columnRowsIndexPerOneline=s-1,e={},h=[e],e[u.rowVariableNames.mergeStartIndex]=columnRowsIndexPerOneline*f.startRowIndex+(f.startColumnIndex+1),e[u.rowVariableNames.colspanCount]=f.endColumnIndex-f.startColumnIndex+1,e[u.rowVariableNames.rowspanCount]=f.endRowIndex-f.startRowIndex+1,h):null},findAutoMergeColumnInfo:function(n,t,r){t=_.isArray(t)?t:[t];r=r||"number";var u=i.data&&i.data.column&&i.data.column.getMergeInfoByDataType(n,n,t,r)||{startColumnId:null,startRowIndex:-1,startColumnIndex:-1,endColumnId:null,endRowIndex:-1,endColumnIndex:-1};return u.startRowIndex==-1||u.endRowIndex==-1||u.startColumnIndex==-1||u.endColumnIndex==-1?null:u},refreshAdjacentBorder:function(n,t,i,f){r.optCommon.columnType==u.columnType.single?this.refreshAdjacentBorderForSingle(n,t,i,f):r.optCommon.columnType==u.columnType.multi&&this.refreshAdjacentBorderForMulti(n,t,i,f)},refreshAdjacentBorderForSingle:function(){r.optCommon.columnType!=u.columnType.single},refreshAdjacentBorderForMulti:function(n,t,s,h){var nt,ni,a,lt,y,ct;if(r.optCommon.columnType==u.columnType.multi){var b,ii,kt,l,oi,c,bt,tt,p,d,at,v,fi,k,ti,it,w,ut,dt,rt,ri,g,ft,et,ot,vt,yt,pt,ui=0,ei=0,gt,wt,st,ht;for(n==e?(p=i.data.column.getById(n,t),d=i.data.column.getById(n,t),at=i.data.row.getViewDataRenderingTableMapAll(f),v=i.data.row.getViewDataRenderingTableMapAll(f),fi=k=i.data.row.getViewDataTrMapAll(f),k=i.data.row.getViewDataTrMapAll(f),dt=[],rt=[],ri=i.data.column.getAll(n,u.returnType.multi),g=i.data.column.getAll(n,u.returnType.multi),ui=ri[0].length,ei=ui-1,s?(b=i.data.row.getById(f,s),b&&dt.push(b)):dt=i.data.row.getAll(f)):(p=i.data.column.getById(n,t),d=i.data.column.getById(n,t),at=i.data.row.getViewDataRenderingTableMapAll(n),v=i.data.row.getViewDataRenderingTableMapAll(n),fi=k=i.data.row.getViewDataTrMapAll(n),k=i.data.row.getViewDataTrMapAll(n),dt=[],rt=[],ri=i.data.column.getAll(n,u.returnType.multi),g=i.data.column.getAll(n,u.returnType.multi),ui=ri[0].length,ei=ui-1,s?(b=i.data.row.getById(n,s),b&&dt.push(b)):dt=i.data.row.getAll(n)),a=0,lt=dt.length;a<lt;a++){if(b=dt[a],[o,f].contains(n)){if(b[u.rowVariableNames.rowType]==u.rowType.separate)continue}else if(n==e&&b[u.rowVariableNames.rowType]!=u.rowType.separate)continue;s=b[u.keyColumnPropertyName];ii=b[u.keyColumnPropertyName];kt=b[u.keyColumnPropertyName];ti=fi[s];w=targetTrMap=ti[t];l=oi=at[ti.trIdx[w.columnRowIdx]][w.columnIdx];["COLSPAN","ROWSPAN","ROWSPAN_AND_COLSPAN"].contains(l.type)&&(l=at[l.trIdx][l.columnIdx])}if(h.isChangedUseBorderTop||h.isChangedBorderTopColor||h.isChangedBorderTopWidth||h.isChangedBorderTopStyle){for(w.columnRowIdx==0?n==o?(tt=null,v=null,k=null,g=null,d=null,c=null,bt=null):n==f?(tt=o,v=i.data.row.getViewDataRenderingTableMapAll(o),k=i.data.row.getViewDataTrMapAll(o),rt=i.data.row.getAll(o),g=i.data.column.getAll(o,u.returnType.multi),d=g[0][w.columnIdx]):n==e&&(tt=f,v=i.data.row.getViewDataRenderingTableMapAll(f),k=i.data.row.getViewDataTrMapAll(f),rt=i.data.row.getAll(f),g=i.data.column.getAll(f,u.returnType.multi),d=g[0][w.columnIdx]):(targetSectionType=tt,n==e?(v=i.data.row.getViewDataRenderingTableMapAll(f),k=i.data.row.getViewDataTrMapAll(f),rt=i.data.row.getAll(f)):(v=i.data.row.getViewDataRenderingTableMapAll(n),k=i.data.row.getViewDataTrMapAll(n),rt=i.data.row.getAll(n)),g=i.data.column.getAll(n,u.returnType.multi),d=g[0][w.columnIdx]),a=0,lt=rt.length;a<lt;a++){if(b=rt[a],[o].contains(n))continue;else if(n==f){if(b[u.rowVariableNames.rowType]==u.rowType.separate)continue}else if(n==e&&b[u.rowVariableNames.rowType]==u.rowType.separate)continue;s=b[u.keyColumnPropertyName];kt=b[u.keyColumnPropertyName];it=k[s];ut=it[d.id];c=bt=v[it.trIdx[0]][ut.columnIdx];["COLSPAN","ROWSPAN","ROWSPAN_AND_COLSPAN"].contains(c.type)&&(c=v[c.trIdx][c.columnIdx])}if(gt=r.viewCell.getCellOriginalElement(n==e?f:n,p.id,ii).cell,c&&(wt=r.viewCell.getCellOriginalElement(c.columnSectionType==e?f:c.columnSectionType,d.id,kt).cell),r.viewTempSelector.resetData().selectStartByElement(gt),wt&&r.viewTempSelector.selectEndByElement(wt),r.viewTempSelector.selectExtend(),st=r.viewTempSelector.getStartBoundary(),ht=r.viewTempSelector.getEndBoundary(),ft=p.TOP_BORD_COLOR_CD,et=p.TOP_BORD_THICK,ot=p.TOP_BORD_STYL_CD,vt=p.TOP_BORD_COLOR_CD,yt=p.TOP_BORD_THICK,pt=p.TOP_BORD_STYL_CD,l)for(nt=Math.min(st.left,ht.left),ni=Math.max(st.right,ht.right);nt<=ni;)if(l=at[ti.trIdx[w.columnRowIdx]][nt],["MERGE"].contains(l.type))for(y=l.columnIdx,ct=l.columnIdx+l[u.rowVariableNames.colspanCount]||1;y<ct;y++)this.setColumnInfo(n,at[ti.trIdx[w.columnRowIdx]][y].columnId,{TOP_BORD_USE_TF:!0,TOP_BORD_COLOR_CD:ft,TOP_BORD_THICK:et,TOP_BORD_STYL_CD:ot,isBorderTrigger:!1}),nt+=1;else this.setColumnInfo(n,l.columnId,{TOP_BORD_USE_TF:!0,TOP_BORD_COLOR_CD:ft,TOP_BORD_THICK:et,TOP_BORD_STYL_CD:ot,isBorderTrigger:!1}),nt+=1;if(c)for(nt=Math.min(st.left,ht.left),ni=Math.max(st.right,ht.right);nt<=ni;)if(c=bt=v[it.trIdx[ut.columnRowIdx]][nt],["COLSPAN","ROWSPAN","ROWSPAN_AND_COLSPAN"].contains(c.type)&&(c=v[it.trIdx[it.trIdx.length-1]][c.columnIdx]),["MERGE"].contains(c.type)){for(y=c.columnIdx,ct=c.columnIdx+c[u.rowVariableNames.colspanCount]||1;y<ct;y++)this.setColumnInfo(tt,v[it.trIdx[ut.columnRowIdx]][y].columnId,{BTTM_BORD_USE_TF:!0,BTTM_BORD_COLOR_CD:vt,BTTM_BORD_THICK:yt,BTTM_BORD_STYL_CD:pt,isBorderTrigger:!1}),nt+=1;(c[u.rowVariableNames.rowspanCount]||1)>1&&this.setCellStyle(n,c.columnId,c.rowId,{"border-bottom-color":vt,"border-bottom-width":yt,"border-bottom-style":pt},{applyType:"UI"})}else this.setColumnInfo(tt,c.columnId,{BTTM_BORD_USE_TF:!0,BTTM_BORD_COLOR_CD:vt,BTTM_BORD_THICK:yt,BTTM_BORD_STYL_CD:pt,isBorderTrigger:!1}),nt+=1}if(h.isChangedUseBorderBottom||h.isChangedBorderBottomColor||h.isChangedBorderBottomWidth||h.isChangedBorderBottomStyle){if(w.columnRowIdx==ri.length-1?n==o?(tt=f,v=i.data.row.getViewDataRenderingTableMapAll(f),k=i.data.row.getViewDataTrMapAll(f),rt=i.data.row.getAll(f),g=i.data.column.getAll(f,u.returnType.multi),d=g[0][w.columnIdx]):n==f?(tt=e,v=i.data.row.getViewDataRenderingTableMapAll(f),k=i.data.row.getViewDataTrMapAll(f),rt=i.data.row.getAll(f),g=i.data.column.getAll(e,u.returnType.multi),d=g[0][w.columnIdx]):n==e&&(tt=null,v=null,k=null,g=null,d=null,c=null,bt=null):(tt=n,n==e?(v=i.data.row.getViewDataRenderingTableMapAll(f),k=i.data.row.getViewDataTrMapAll(f),rt=i.data.row.getAll(f)):(v=i.data.row.getViewDataRenderingTableMapAll(n),k=i.data.row.getViewDataTrMapAll(n),rt=i.data.row.getAll(n)),g=i.data.column.getAll(n,u.returnType.multi),d=g[w.columnRowIdx+1]&&g[w.columnRowIdx+1][w.columnIdx]),d)for(a=0,lt=rt.length;a<lt;a++){if(b=rt[a],[o].contains(n)){if(b[u.rowVariableNames.rowType]==u.rowType.separate)continue}else if(n==f){if(b[u.rowVariableNames.rowType]!=u.rowType.separate)continue}else if(n==e&&b[u.rowVariableNames.rowType]!=u.rowType.separate)continue;s=b[u.keyColumnPropertyName];kt=b[u.keyColumnPropertyName];it=k[s];ut=it[d.id];c=bt=v[it.trIdx[ut.columnRowIdx]][ut.columnIdx];["COLSPAN","ROWSPAN","ROWSPAN_AND_COLSPAN"].contains(c.type)&&(c=v[c.trIdx][c.columnIdx])}if(ft=p.BTTM_BORD_COLOR_CD,et=p.BTTM_BORD_THICK,ot=p.BTTM_BORD_STYL_CD,vt=p.BTTM_BORD_COLOR_CD,yt=p.BTTM_BORD_THICK,pt=p.BTTM_BORD_STYL_CD,gt=r.viewCell.getCellOriginalElement(n==e?f:n,p.id,ii).cell,c&&(wt=r.viewCell.getCellOriginalElement(c.columnSectionType==e?f:c.columnSectionType,d.id,kt)).cell,r.viewTempSelector.resetData().selectStartByElement(gt),wt&&r.viewTempSelector.selectEndByElement(wt),r.viewTempSelector.selectExtend(),st=r.viewTempSelector.getStartBoundary(),ht=r.viewTempSelector.getEndBoundary(),l)for(nt=Math.min(st.left,ht.left),ni=Math.max(st.right,ht.right);nt<=ni;)if(l=at[ti.trIdx[w.columnRowIdx]][nt],["MERGE"].contains(l.type)){for(y=l.columnIdx,ct=l.columnIdx+l[u.rowVariableNames.colspanCount]||1;y<ct;y++)this.setColumnInfo(n,at[ti.trIdx[w.columnRowIdx]][y].columnId,{BTTM_BORD_USE_TF:!0,BTTM_BORD_COLOR_CD:ft,BTTM_BORD_THICK:et,BTTM_BORD_STYL_CD:ot,isBorderTrigger:!1}),nt+=1;(l[u.rowVariableNames.rowspanCount]||1)>1&&this.setCellStyle(n,l.columnId,l.rowId,{"border-bottom-color":ft,"border-bottom-width":et,"border-bottom-style":ot},{applyType:"UI"})}else this.setColumnInfo(n,l.columnId,{BTTM_BORD_USE_TF:!0,BTTM_BORD_COLOR_CD:ft,BTTM_BORD_THICK:et,BTTM_BORD_STYL_CD:ot,isBorderTrigger:!1}),nt+=1;if(c)for(nt=Math.min(st.left,ht.left),ni=Math.max(st.right,ht.right);nt<=ni;)if(c=bt=v[it.trIdx[ut.columnRowIdx]][nt],["MERGE"].contains(c.type))for(y=c.columnIdx,ct=c.columnIdx+c[u.rowVariableNames.colspanCount]||1;y<ct;y++)this.setColumnInfo(targetSectionType,v[it.trIdx[ut.columnRowIdx]][y].columnId,{TOP_BORD_USE_TF:!0,TOP_BORD_COLOR_CD:vt,TOP_BORD_THICK:yt,TOP_BORD_STYL_CD:pt,isBorderTrigger:!1}),nt+=1;else this.setColumnInfo(tt,c.columnId,{TOP_BORD_USE_TF:!0,TOP_BORD_COLOR_CD:vt,TOP_BORD_THICK:yt,TOP_BORD_STYL_CD:pt,isBorderTrigger:!1}),nt+=1}if(h.isChangeduseBorderLeft||h.isChangedBorderLeftColor||h.isChangedBorderLeftWidth||h.isChangedBorderLeftStyle){if(w.columnIdx>0&&(tt=n,n==e?(v=i.data.row.getViewDataRenderingTableMapAll(f),k=i.data.row.getViewDataTrMapAll(f),rt=i.data.row.getAll(f)):(v=i.data.row.getViewDataRenderingTableMapAll(n),k=i.data.row.getViewDataTrMapAll(n),rt=i.data.row.getAll(n)),g=i.data.column.getAll(n,u.returnType.multi),d=g[w.columnRowIdx][w.columnIdx-1],it=k[kt],ut=it[d.id],c=bt=v[it.trIdx[0]][ut.columnIdx],["COLSPAN","ROWSPAN","ROWSPAN_AND_COLSPAN"].contains(c.type)&&(c=v[c.trIdx][c.columnIdx])),gt=r.viewCell.getCellOriginalElement(n==e?f:n,p.id,ii).cell,c&&(wt=r.viewCell.getCellOriginalElement(c.columnSectionType==e?f:c.columnSectionType,d.id,kt).cell),r.viewTempSelector.resetData().selectStartByElement(gt),wt&&r.viewTempSelector.selectEndByElement(wt),r.viewTempSelector.selectExtend(),st=r.viewTempSelector.getStartBoundary(),ht=r.viewTempSelector.getEndBoundary(),ft=p.LEFT_BORD_COLOR_CD,et=p.LEFT_BORD_THICK,ot=p.LEFT_BORD_STYL_CD,vt=p.LEFT_BORD_COLOR_CD,yt=p.LEFT_BORD_THICK,pt=p.LEFT_BORD_STYL_CD,l)for(a=st.top,lt=st.bottom;a<=lt;)if(l=at[a][w.columnIdx],["MERGE"].contains(l.type))for(y=a,ct=a+(l[u.rowVariableNames.rowspanCount]||1);y<ct;y++)this.setColumnInfo(n,at[y][w.columnIdx].columnId,{LEFT_BORD_USE_TF:!0,LEFT_BORD_COLOR_CD:ft,LEFT_BORD_THICK:et,LEFT_BORD_STYL_CD:ot}),a+=1;else this.setColumnInfo(n,l.columnId,{LEFT_BORD_USE_TF:!0,LEFT_BORD_COLOR_CD:ft,LEFT_BORD_THICK:et,LEFT_BORD_STYL_CD:ot}),a+=1;if(c)for(a=ht.top,lt=ht.bottom;a<=lt;){if(c=bt=v[a][ut.columnIdx],["MERGE","COLSPAN","ROWSPAN_AND_COLSPAN"].contains(c.type)){for(y=a,ct=a+(c[u.rowVariableNames.rowspanCount]||1);y<ct;y++)this.setColumnInfo(tt,v[y][ut.columnIdx].columnId,{RGT_BORD_USE_TF:!0,RGT_BORD_COLOR_CD:vt,RGT_BORD_THICK:yt,RGT_BORD_STYL_CD:pt,isBorderTrigger:!1}),a+=1;["COLSPAN","ROWSPAN_AND_COLSPAN"].contains(c.type)&&(c=v[c.trIdx][c.columnIdx],(c[u.rowVariableNames.colspanCount]||1)>1&&this.setCellStyle(tt,c.columnId,c.rowId,{"border-right-color":ft,"border-right-width":et,"border-right-style":ot},{applyType:"UI"}))}else this.setColumnInfo(tt,c.columnId,{RGT_BORD_USE_TF:!0,RGT_BORD_COLOR_CD:vt,RGT_BORD_THICK:yt,RGT_BORD_STYL_CD:pt,isBorderTrigger:!1});a+=1}}if(h.isChangedUseBorderRight||h.isChangedBorderRightColor||h.isChangedBorderRightWidth||h.isChangedBorderRightStyle){if(w.columnIdx<ei&&(tt=n,n==e?(v=i.data.row.getViewDataRenderingTableMapAll(f),k=i.data.row.getViewDataTrMapAll(f),rt=i.data.row.getAll(f)):(v=i.data.row.getViewDataRenderingTableMapAll(n),k=i.data.row.getViewDataTrMapAll(n),rt=i.data.row.getAll(n)),g=i.data.column.getAll(n,u.returnType.multi),d=g[w.columnRowIdx][w.columnIdx+1],it=k[l.rowId],ut=it[d.id],c=bt=v[it.trIdx[0]][ut.columnIdx],["COLSPAN","ROWSPAN","ROWSPAN_AND_COLSPAN"].contains(c.type)&&(c=v[c.trIdx][c.columnIdx])),gt=r.viewCell.getCellOriginalElement(n==e?f:n,p.id,ii).cell,c&&(wt=r.viewCell.getCellOriginalElement(c.columnSectionType==e?f:c.columnSectionType,d.id,kt).cell),r.viewTempSelector.resetData().selectStartByElement(gt),wt&&r.viewTempSelector.selectEndByElement(wt),r.viewTempSelector.selectExtend(),st=r.viewTempSelector.getStartBoundary(),ht=r.viewTempSelector.getEndBoundary(),ft=p.RGT_BORD_COLOR_CD,et=p.RGT_BORD_THICK,ot=p.RGT_BORD_STYL_CD,vt=p.RGT_BORD_COLOR_CD,yt=p.RGT_BORD_THICK,pt=p.RGT_BORD_STYL_CD,l)for(a=st.top,lt=st.bottom;a<=lt;)if(l=at[a][w.columnIdx],["COLSPAN","ROWSPAN","ROWSPAN_AND_COLSPAN"].contains(l.type)&&(l=at[l.trIdx][l.columnIdx]),["MERGE"].contains(l.type)){for(y=a,ct=a+(l[u.rowVariableNames.rowspanCount]||1);y<ct;y++)this.setColumnInfo(n,at[y][w.columnIdx].columnId,{RGT_BORD_USE_TF:!0,RGT_BORD_COLOR_CD:ft,RGT_BORD_THICK:et,RGT_BORD_STYL_CD:ot,isBorderTrigger:!1}),a+=1;l[u.rowVariableNames.colspanCount||1]>1&&this.setCellStyle(n,l.columnId,l.rowId,{"border-right-color":ft,"border-right-width":et,"border-right-style":ot},{applyType:"UI"})}else this.setColumnInfo(n,l.columnId,{RGT_BORD_USE_TF:!0,RGT_BORD_COLOR_CD:ft,RGT_BORD_THICK:et,RGT_BORD_STYL_CD:ot,isBorderTrigger:!1}),a+=1;if(c)for(a=ht.top,lt=ht.bottom;a<=lt;)if(c=bt=v[a][ut.columnIdx],["COLSPAN","ROWSPAN","ROWSPAN_AND_COLSPAN"].contains(c.type)&&(c=v[c.trIdx][c.columnIdx]),["MERGE"].contains(c.type)){for(y=a,ct=a+(c[u.rowVariableNames.rowspanCount]||1);y<ct;y++)this.setColumnInfo(tt,v[y][ut.columnIdx].columnId,{LEFT_BORD_USE_TF:!0,LEFT_BORD_COLOR_CD:vt,LEFT_BORD_THICK:yt,LEFT_BORD_STYL_CD:pt,isBorderTrigger:!1}),a+=1;(c[u.rowVariableNames.colspanCount]||1)>1&&this.setCellStyle(n,c.columnId,c.rowId,{"border-left-color":ft,"border-left-width":et,"border-left-style":ot},{applyType:"UI"})}else this.setColumnInfo(tt,c.columnId,{LEFT_BORD_USE_TF:!0,LEFT_BORD_COLOR_CD:vt,LEFT_BORD_THICK:yt,LEFT_BORD_STYL_CD:pt,isBorderTrigger:!1}),a+=1}}},setColumnBorderByBoundary:function(n,t,r){var c,l,a,y,p,w,b,k,d,g,nt,tt,it,rt,v,ut,ft,e,h,f,s,o;if(t.top!=-1&&t.left!=-1&&t.bottom!=-1&&t.right!=-1){c=i.data.column.getAll(n,u.returnType.multi);switch(r.type){case u.borderType.ALLLINE:for(f=t.top,s=t.bottom;f<=s;f++)for(o=c[f],e=t.left,h=t.right;e<=h;e++)this.setColumnInfo(n,o[e].id,r);break;case u.borderType.OUTERLINE:for(f=t.top,s=t.bottom;f<=s;f++)for(o=c[f],ft=f==t.top||f==t.bottom?1:t.right-t.left+1,e=t.left,h=t.right;e<=h;e+=ft)f==t.top?(e==t.left&&(d=r.LEFT_BORD_USE_TF,g=r.LEFT_BORD_COLOR_CD,nt=r.LEFT_BORD_THICK,tt=r.LEFT_BORD_STYL_CD),e==t.right&&(it=r.RGT_BORD_USE_TF,rt=r.RGT_BORD_COLOR_CD,borderRightWidth=r.RGT_BORD_THICK,ut=r.RGT_BORD_STYL_CD),l=r.TOP_BORD_USE_TF,a=r.TOP_BORD_COLOR_CD,v=r.TOP_BORD_THICK,y=r.TOP_BORD_STYL_CD,p=!0,w="000000",b="1",k="solid"):f==t.bottom?(e==t.left&&(d=r.LEFT_BORD_USE_TF,g=r.LEFT_BORD_COLOR_CD,nt=r.LEFT_BORD_THICK,tt=r.LEFT_BORD_STYL_CD),e==t.right&&(it=r.RGT_BORD_USE_TF,rt=r.RGT_BORD_COLOR_CD,borderRightWidth=r.RGT_BORD_THICK,ut=r.RGT_BORD_STYL_CD),l=!0,a="000000",v="1",y="solid",p=r.RGT_BORD_USE_TF,w=r.BTTM_BORD_COLOR_CD,b=r.BTTM_BORD_THICK,k=r.RGT_BORD_STYL_CD):(l=!0,a="000000",v="1",y="solid",p=!0,w="000000",b="1",k="solid",d=r.LEFT_BORD_USE_TF,g=r.LEFT_BORD_COLOR_CD,nt=r.LEFT_BORD_THICK,tt=r.LEFT_BORD_STYL_CD,it=r.RGT_BORD_USE_TF,rt=r.RGT_BORD_COLOR_CD,borderRightWidth=r.RGT_BORD_THICK,ut=r.RGT_BORD_STYL_CD),this.setColumnInfo(n,o[e].id,{TOP_BORD_USE_TF:l,TOP_BORD_COLOR_CD:a,TOP_BORD_THICK:v,TOP_BORD_STYL_CD:y,BTTM_BORD_USE_TF:p,BTTM_BORD_COLOR_CD:w,BTTM_BORD_THICK:b,BTTM_BORD_STYL_CD:k,LEFT_BORD_USE_TF:d,LEFT_BORD_COLOR_CD:g,LEFT_BORD_THICK:nt,LEFT_BORD_STYL_CD:tt,RGT_BORD_USE_TF:it,RGT_BORD_COLOR_CD:rt,RGT_BORD_THICK:borderRightWidth,RGT_BORD_STYL_CD:ut});break;case u.borderType.INNERLINE:for(f=t.top,s=t.bottom;f<=s;f++)for(o=c[f],e=t.left,h=t.right;e<=h;e++)l=r.TOP_BORD_USE_TF,a=r.TOP_BORD_COLOR_CD,v=r.TOP_BORD_THICK,y=r.TOP_BORD_STYL_CD,p=r.RGT_BORD_USE_TF,w=r.BTTM_BORD_COLOR_CD,b=r.BTTM_BORD_THICK,k=r.RGT_BORD_STYL_CD,d=r.LEFT_BORD_USE_TF,g=r.LEFT_BORD_COLOR_CD,nt=r.LEFT_BORD_THICK,tt=r.LEFT_BORD_STYL_CD,it=r.RGT_BORD_USE_TF,rt=r.RGT_BORD_COLOR_CD,borderRightWidth=r.RGT_BORD_THICK,ut=r.RGT_BORD_STYL_CD,f==t.top&&(l=!0,a="000000",v="1",y="solid"),f==t.bottom&&(p=!0,w="000000",b="1",k="solid"),e==t.left&&(d=!0,g="000000",nt="1",tt="solid"),e==t.right&&(it=!0,rt="000000",borderRightWidth="1",ut="solid"),this.setColumnInfo(n,o[e].id,{TOP_BORD_USE_TF:l,TOP_BORD_COLOR_CD:a,TOP_BORD_THICK:v,TOP_BORD_STYL_CD:y,BTTM_BORD_USE_TF:p,BTTM_BORD_COLOR_CD:w,BTTM_BORD_THICK:b,BTTM_BORD_STYL_CD:k,LEFT_BORD_USE_TF:d,LEFT_BORD_COLOR_CD:g,LEFT_BORD_THICK:nt,LEFT_BORD_STYL_CD:tt,RGT_BORD_USE_TF:it,RGT_BORD_COLOR_CD:rt,RGT_BORD_THICK:borderRightWidth,RGT_BORD_STYL_CD:ut});break;case u.borderType.NONELINE:for(f=t.top,s=t.bottom;f<=s;f++)for(o=c[f],e=t.left,h=t.right;e<=h;e++)this.setColumnInfo(n,o[e].id,r);break;case u.borderType.TOPLINE:for(o=c[t.top],e=t.left,h=t.right;e<=h;e++)l=r.TOP_BORD_USE_TF,a=r.TOP_BORD_COLOR_CD,v=r.TOP_BORD_THICK,y=r.TOP_BORD_STYL_CD,this.setColumnInfo(n,o[e].id,{TOP_BORD_USE_TF:l,TOP_BORD_COLOR_CD:a,TOP_BORD_THICK:v,TOP_BORD_STYL_CD:y});break;case u.borderType.BOTTOMLINE:for(o=c[t.bottom],e=t.left,h=t.right;e<=h;e++)p=r.RGT_BORD_USE_TF,w=r.BTTM_BORD_COLOR_CD,b=r.BTTM_BORD_THICK,k=r.RGT_BORD_STYL_CD,this.setColumnInfo(n,o[e].id,{BTTM_BORD_USE_TF:p,BTTM_BORD_COLOR_CD:w,BTTM_BORD_THICK:b,BTTM_BORD_STYL_CD:k});break;case u.borderType.LEFTLINE:for(f=t.top,s=t.bottom;f<=s;f++)o=c[f],d=r.LEFT_BORD_USE_TF,g=r.LEFT_BORD_COLOR_CD,nt=r.LEFT_BORD_THICK,tt=r.LEFT_BORD_STYL_CD,this.setColumnInfo(n,o[t.left].id,{LEFT_BORD_USE_TF:d,LEFT_BORD_COLOR_CD:g,LEFT_BORD_THICK:nt,LEFT_BORD_STYL_CD:tt});break;case u.borderType.RIGHTLINE:for(f=t.top,s=t.bottom;f<=s;f++)o=c[f],it=r.RGT_BORD_USE_TF,rt=r.RGT_BORD_COLOR_CD,borderRightWidth=r.RGT_BORD_THICK,ut=r.RGT_BORD_STYL_CD,this.setColumnInfo(n,o[t.right].id,{RGT_BORD_USE_TF:it,RGT_BORD_COLOR_CD:rt,RGT_BORD_THICK:borderRightWidth,RGT_BORD_STYL_CD:ut})}}},setColumnInfo:function(n,t,s){var l,a,y,b,k,h,d,c,v,p,w,g;if(arguments.length==2&&(s=arguments[1],t=arguments[0],n=typeof s=="object"?s.sectionType||o:o),s=s||{},i.data.column.getById(n,t)){if(r.optSelector.use&&(l=i.view.selector.getStartInfos(),i.view.selector.getStartBoundary().isValid()&&(b=i.view.selector.getStartBoundary().get(),k=i.view.selector.getEndBoundary().get(),a={top:b.top,left:b.left,bottom:k.bottom,right:k.right}),[o,f,e].contains(l.sectionType)&&(y=i.data.column.getAll(l.columnSectionType||l.sectionType,u.returnType.multi),c=i.data.row.getAll(l.sectionType))),h=i.data.column.setColumnInfo(n,t,s),h.isChangedHide&&(r.optCommon.columnType===u.columnType.single?this.setColumnVisibility(t,!s.isHideColumn,h.isChangedHide):this.setColumnVisibility(n,t,!s.isHideColumn,h.isChangedHide)),h.isChangedWidth){if(r.optCommon.columnType==u.columnType.multi){var nt=i.data.column.getIndexById(n,u.returnColumnIndexType.multi,t),tt=i.data.column.getAll(o,u.returnType.multi),it=tt[0][nt];i.transaction.push("col","setWidth",[o,it.id,s.width])}else i.transaction.push("col","setWidth",[n,t,s.width]);c=r.dataRow.getAll(n);c&&c.length>0&&(d=r.dataRow.getViewDataTrMap(n,c[0][u.keyColumnPropertyName]),i.transaction.push("table","setTableElementWidth",[n,d.tableId+d.tableIndex,s.width+"px"]))}if(h.isChangedTitle&&(r.optCommon.columnType==u.columnType.single?(c=r.dataRow.getAll(o),this.setCell(o,t,c[0][u.keyColumnPropertyName],s.title,{callByType:"system"})):r.optCommon.columnType==u.columnType.multi&&(n==e?(c=r.dataRow.getAll(f),this.setCell(f,t,c[c.length-1][u.keyColumnPropertyName],s.title,{callByType:"system"})):(c=r.dataRow.getAll(n),this.setCell(n,t,c[0][u.keyColumnPropertyName],s.title,{callByType:"system"})))),h.isChangedDataType||h.isChangedAlign||h.isChangedValign||h.isChangedFontSize||h.isChangedFont||h.isChangedFontBold||h.isChangedFontColor||h.isChangedFontItalic||h.isChangedFontStrike||h.isChangedFontUnderline||h.isChangedFontBgColor||h.isChangedLinebreak||h.isChangedBgShadow||h.isChangedBgColor||h.isChangedUseBorderTop||h.isChangedBorderTopColor||h.isChangedBorderTopWidth||h.isChangedBorderTopStyle||h.isChangedUseBorderBottom||h.isChangedBorderBottomColor||h.isChangedBorderBottomWidth||h.isChangedBorderBottomStyle||h.isChangeduseBorderLeft||h.isChangedBorderLeftColor||h.isChangedBorderLeftWidth||h.isChangedBorderLeftStyle||h.isChangedUseBorderRight||h.isChangedBorderRightColor||h.isChangedBorderRightWidth||h.isChangedBorderRightStyle||h.isChangedSubTotal||h.isChangedPageTotal||h.isChangedTotal){if($.isNull(s.isBorderTrigger)||s.isBorderTrigger===!0,r.optCommon.columnType==u.columnType.multi&&n==e)for(c=r.dataRow.getAll(f),v=0,p=c.length;v<p;v++)this.refreshCell(f,t,c[v][u.keyColumnPropertyName]);else for(c=r.dataRow.getAll(n),v=0,p=c.length;v<p;v++)this.refreshCell(n,t,c[v][u.keyColumnPropertyName]);r.optForm.version==u.formVersion.fourth?r.optCommon.columnType==u.columnType.single&&this.remakeAllRow(f):this.remakeAllRow(e)}r.optOuterHorizontal.use&&i.view.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render();r.optOuterVertical.use&&i.view.outerVertical.clearAllChildElement().clearContainerElement().resetData().render();r.optForm.version==u.formVersion.fourth?this.reselectSelector():i.view.selector&&a&&[o,f,e].contains(l.sectionType)&&(c=r.dataRow.getAll(l.sectionType),w=[],r.optCommon.columnType==u.columnType.multi&&n==e&&i.view.selector.getStartSectionType()==f?(w=i.data.column.getAll(f,u.returnType.multi),se=i.view.cell.getCellOriginalElement(l.sectionType,y[a.top-w.length][a.left].id,c[c.length-1][u.keyColumnPropertyName]).cell,g=i.view.cell.getCellOriginalElement(l.sectionType,y[a.bottom-w.length][a.right].id,c[c.length-1][u.keyColumnPropertyName]).cell):(se=i.view.cell.getCellOriginalElement(l.sectionType,y[a.top][a.left].id,c[0][u.keyColumnPropertyName]).cell,g=i.view.cell.getCellOriginalElement(l.sectionType,y[a.bottom][a.right].id,c[0][u.keyColumnPropertyName]).cell),i.view.selector.ecSelectByElement(se,g).ecDraw())}},setColumnDecimalOption:function(n,t,o){var h,c,v,l,y,s,p,a,w;if(arguments.length==1?(t=arguments[0],n=f):arguments.length==2&&(o=arguments[1],t=arguments[0],n=o.sectionType||f),r.optCommon.gridType==u.gridType.editable)for(h=r.optCommon.columnType==u.columnType.multi?typeof n=="string"?[n]:n:n==f?[f,e]:typeof n=="string"?[n]:n,l="",y="",o.dataType&&(l=o.dataType.substr(0,1),y=o.dataType.substr(1)),s=0,p=h.length;s<p;s++)for(c=i.data.column.getById(h[s],t),i.data.column.removeColumnDataType(h[s],c),$.extend(c,o),["8","9"].contains(l)&&(c.isDisplayZero=l=="9"?"1":"0",c.decCount=y),i.data.column.makeColumnDataType(h[s],c),v=i.data.row.getAll(h[s]),a=0,w=v.length;a<w;a++)ft(h[s],t,v[a][u.keyColumnPropertyName],{isRunChange:!1,isRunComplete:!1})},setMovingScrollTop:function(n){n&&(r.optLayout.moveScrollTop=n)},getColumnInfoList:function(n){n=n||{};var t=n.sectionType||o,i=n.isReturnValueMulti===!0?u.returnType.multi:u.returnType.single,r=n.isClone===!0?n.isClone:!1;return ui(t,i,r,n)},canMoveableByBoundary:function(n,t,i){return r.dataColumn.canMoveableByBoundary(t,i)},canCaretTypeMoveable:function(n,e,o,s){var h={},v={core:i,mixinOption:r,setting:t},y=ecount.gridV2.handler.dragMultiSectionCaret;if(r.optCommon.columnType!=u.columnType.single&&r.optCommon.columnType==u.columnType.multi){var p=r.dataColumn.getAll(e.columnSectionType,u.returnType.multi),b=r.dataRow.getById(e.sectionType,e.rowId),w=r.dataColumn.getAll(n.columnSectionType,u.returnType.multi),k=r.dataRow.getById(n.sectionType,n.rowId),l=_.cloneDeep(n.boundary),a=_.cloneDeep(e.boundary),c=[];return n.columnSectionType==u.sectionType.tfoot&&(c=r.dataColumn.getAll(f,u.returnType.multi),l.top+=c.length,l.bottom+=c.length),e.columnSectionType==u.sectionType.tfoot&&(c=r.dataColumn.getAll(f,u.returnType.multi),a.top+=c.length,a.bottom+=c.length),h.gridMoveBoundary=e.boundary,h.gridMoveColumnID=p[e.boundary.bottom][e.boundary.right].id,h.gridMoveDataKey=e.rowId,h.gridMoveDirection=s,h.gridMoveMethod=null,h.gridMoveSectionType=e.sectionType,h.gridMoveType=o,h.gridStartBoundary=n.boundary,h.gridStartColumnID=w[n.boundary.top][n.boundary.left].id,h.gridStartColumnSectionType=n.columnSectionType,h.gridStartDataKey=n.rowId,h.gridStartSectionType=n.sectionType,h.isCancelLeftFixed=!1,y.isMoveable.call(v,h)}},moveColumn:function(n,t,e){var s,h,c,l,a;(e=e||{},t||(s=i.data.column.getAll(o),h=i.data.row.getAll(f),t={columnId:s[s.length-1].id,rowKey:h[h.length-1][u.keyColumnPropertyName]}),c=i.data.column.getIndexById(o,n.columnId),l=i.data.column.getIndexById(o,t.columnId),c!=l)&&(a={gridMoveType:"horizontal",gridMoveDirection:c<l?u.crossDirection.right:u.crossDirection.left,gridMoveMethod:"horizontal",gridStartSectionType:o,gridStartRowType:null,gridStartColumnID:n.columnId,gridStartBoundary:{top:0,left:0,bottom:0,right:0},gridMoveSectionType:o,gridMoveRowType:null,gridMoveColumnID:t.columnId,gridMoveBoundary:{top:0,left:0,bottom:0,right:0}},ecount.gridV2.handler.drag.dragEndFinish.apply({core:i,mixinOption:r},a,null))},moveRangeColumn:function(n,e,o,s,h){var w;h=_.extend({isSyncWidth:!1},h||{});var v={},y=null,c={};if(r.optForm.version==u.formVersion.fourth&&(v={core:i,mixinOption:r,setting:t},y=ecount.gridV2.handler.dragMultiSectionCaret,r.optCommon.columnType!=u.columnType.single&&r.optCommon.columnType==u.columnType.multi)){var b=r.dataColumn.getAll(e.columnSectionType,u.returnType.multi),d=r.dataRow.getById(e.sectionType,e.rowId),k=r.dataColumn.getAll(n.columnSectionType,u.returnType.multi),g=r.dataRow.getById(n.sectionType,n.rowId),a=_.cloneDeep(n.boundary),p=_.cloneDeep(e.boundary),l=[];n.columnSectionType==u.sectionType.tfoot&&(l=r.dataColumn.getAll(f,u.returnType.multi),a.top+=l.length,a.bottom+=l.length);e.columnSectionType==u.sectionType.tfoot&&(l=r.dataColumn.getAll(f,u.returnType.multi),p.top+=l.length,p.bottom+=l.length);c.gridMoveBoundary=e.boundary;c.gridMoveColumnID=b[e.boundary.bottom][e.boundary.right].id;c.gridMoveDataKey=e.rowId;c.gridMoveDirection=s;c.gridMoveMethod=null;c.gridMoveSectionType=e.sectionType;c.gridMoveType=o;c.gridStartBoundary=n.boundary;c.gridStartColumnID=k[n.boundary.top][n.boundary.left].id;c.gridStartColumnSectionType=n.columnSectionType;c.gridStartDataKey=n.rowId;c.gridStartSectionType=n.sectionType;c.isCancelLeftFixed=!1;y.isMoveable.call(v,c)&&(w=this.getRangeInformationsByRange(n.sectionType,a,n.sectionType,a),w.forEach(function(n){y.moveRangeColumn.call(v,{sectionType:n.sectionType,columnSectionType:n.columnSectionType,detailSectionType:n.detailSectionType,moveType:c.gridMoveType,moveMethod:c.gridMoveMethod,moveDirection:c.gridMoveDirection,columnBoundary:n.columnBoundary,fromBoundary:a,toBoundary:p,isCancelLeftFixed:!1,isSyncWidth:h.isSyncWidth},null)}))}},removeColumn:function(n,t,r,f,e){var l,c,h,o,a,s,v;if(arguments.length<=2&&typeof arguments[0]=="string"&&![u.sectionType.thead,u.sectionType.tbody,u.sectionType.tfoot].contains(arguments[0])){for(e=arguments[1],l=arguments[0],c=!1,n=t=u.sectionType.thead,f={top:0,bottom:0,left:0,right:0},h=i.data.column.getAll(n,u.returnType.multi),o=0,a=h.length;o<a;o++)for(s=0,v=h[o].length;s<v;s++)if(h[o][s].id==l){f.top=o;f.bottom=o;f.left=s;f.right=s;c=!0;break}if(!c)return}return e=e||{},this.__columnRemove(n,t,r,f,e)},headerSetCell:function(n,t,u,s,h){arguments.length==2?(u=arguments[1],t=arguments[0],n=o,h={}):arguments.length==3?(s=arguments[2],u=arguments[1],t=arguments[0],h={},n=o):arguments.length==4?[o,f,e].contains(arguments[0])||(h=arguments[3],s=arguments[2],u=arguments[1],t=arguments[0],n=o):arguments.length==5&&([o,f,e].contains(arguments[0])||(h=arguments[3],s=arguments[2],u=arguments[1],t=arguments[0],n=o));var c=r.optColumn[o].columns,h={},l=i.data.optColumn[n].duplicationPoint&&i.data.optColumn[n].duplicationPoint.length;for(idx=0;idx<c.length;idx++)c[idx].id==t&&(h.columnOption=c[idx].columnOption);i.data.column.setColumnInfo(n,t,h);l&&u>0&&(t=t+"∬∬∬∬∬"+u,u="0");a(n,t,u,s,h)},getCellElement:function(){return i.transaction.push("cell","getCellElement",arguments)},setCellClick:function(n,t){var u,o,r;u=/special-row-\d+/g.test(t)?e:f;r=document.createEvent("MouseEvents");o=i.view.cell.getCellElement(u,n,t);r.initEvent("click",!0,!0);r.ignoreDetail=!0;o.cell.dispatchEvent(r)},setCellShowError:function(n,t,i,r){arguments.length==2?(i=arguments[1],t=arguments[0],n=f):arguments.length==3&&(r=arguments[2],i=arguments[1],t=arguments[0],n=f);di(n,t,i,r)},setCellShowPopover:function(n,t,r,u,f){f=f||{};var e=i.data.validate.get(n,t,r,u),o=e!=null&&e!=undefined,e=o?e:{isValidate:!1,error:{popover:{visible:f.popOverVisible!==!1,isShow:f.showDirect===!0,message:f.message||"",placement:f.placement||"auto"},css:{visible:f.cssVisbile!==!1},widget:{needValidate:f.widgetNeedValidate===!0,errorType:null,useValidate:!1}}};!o&&e.error.popover.visible&&i.data.validate.add(n,t,r,u,e);e&&(f.popOverVisible!=undefined&&f.popOverVisible!=null&&(e.error.popover.visible=f.popOverVisible),f.message!=undefined&&f.message!=null&&(e.error.popover.message=f.message),f.placement!=undefined&&f.placement!=null&&(e.error.popover.placement=f.placement),i.view.cell.destroyPopover(t,r,u),e.error.popover.visible&&i.view.cell.showPopover(n,t,r,u,f));o&&e.isValidate&&i.data.validate.remove(n,t,r,u,e)},setCellDestroyPopover:function(n,t,r,u){var f=i.data.validate.get(n,t,r,u);f&&i.view.cell.destroyPopover(t,r,u)},setCellLeftFixed:function(n,t,f,e){for(var v,it,et,s,l,g,nt,c=i.data.row.getAll(o),a=i.data.column.getAll(o,u.returnType.multi),tt=a[0].length,y={top:e.top,left:e.left,bottom:e.bottom,right:e.right},p={top:e.top,left:e.left,bottom:e.bottom,right:e.right},h=0,w=c.length;h<w;h++){var ot=c[h],b=ot[u.rowVariableNames.mergeSet];if(b)for(v=0,it=b.length;v<it;v++){var k=b[v],rt=k[u.rowVariableNames.mergeStartIndex],st=Math.floor(rt/tt),d=rt%tt,ht=k[u.rowVariableNames.rowspanCount]||1,ct=k[u.rowVariableNames.colspanCount]||1,lt=ht-1,ut=ct-1,at=d,ft=d+ut;st==e.top&&ft==e.right&&(p.right-=ut);ft==e.right&&(y.left=Math.min(y.left,d))}}for(i.data.column.setLeftFixed(o,t,y),et=a[p.top][p.right],h=0,w=c.length;h<w;h++)this.refreshCell(o,et.id,c[h][u.keyColumnPropertyName],{isRunChange:!1});u.selector&&f==u.selector.selectionType.allHorizontal?(r.optOuterHorizontal.use&&(s=i.view.outerHorizontal.getActiveId(),i.view.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render(),s&&(i.view.outerHorizontal.active(f,s),l=r.optLayout.$container.find("#"+s),l.length==1&&i.customEvents.fire("mousedown",l[0],{button:1,shiftKey:!1,altKey:!1,ctrlKey:!1,ignoreDetail:!0}))),r.optOuterVertical.use&&(s=i.view.outerVertical.getActiveId(),i.view.outerVertical.clearAllChildElement().clearContainerElement().resetData().render(),s&&(i.view.outerVertical.active(s),l=r.optLayout.$container.find("#"+s),l.length==1&&i.customEvents.fire("mousedown",l[0],{button:1,shiftKey:!1,altKey:!1,ctrlKey:!1,ignoreDetail:!0})))):(r.optOuterHorizontal.use&&i.view.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render(),r.optOuterVertical.use&&i.view.outerVertical.clearAllChildElement().clearContainerElement().resetData().render(),r.optSelector.use&&(g=i.view.cell.getCellOriginalElement(n,a[e.top][e.left].id,c[0][u.keyColumnPropertyName]).cell,nt=i.view.cell.getCellOriginalElement(n,a[e.bottom][e.right].id,c[0][u.keyColumnPropertyName]).cell,g&&nt&&i.view.selector.ecSelectStart(g).ecSelectEnd(nt).ecDraw()))},setCellCancelLeftFixed:function(n,t,f,e){var w=i.data.column.getLeftFixed(o),c,v,l,b,k,a,d,s,h,y,p;for(i.data.column.setCancelLeftFixed(n,t,e),c=i.data.row.getAll(o),v=i.data.column.getAll(o,u.returnType.multi),l=0,b=c.length;l<b;l++)for(k=c[l],a=0,d=w.length;a<d;a++)this.refreshCell(o,w[a].id,k[u.keyColumnPropertyName],{isRunChange:!1});u.selector&&f==u.selector.selectionType.allHorizontal?(r.optOuterHorizontal.use&&(s=i.view.outerHorizontal.getActiveId(),i.view.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render(),s&&(i.view.outerHorizontal.active(f,s),h=r.optLayout.$container.find("#"+s),h.length==1&&i.customEvents.fire("mousedown",h[0],{button:1,shiftKey:!1,altKey:!1,ctrlKey:!1,ignoreDetail:!0}))),r.optOuterVertical.use&&(s=i.view.outerVertical.getActiveId(),i.view.outerVertical.clearAllChildElement().clearContainerElement().resetData().render(),s&&(i.view.outerVertical.active(s),h=r.optLayout.$container.find("#"+s),h.length==1&&i.customEvents.fire("mousedown",h[0],{button:1,shiftKey:!1,altKey:!1,ctrlKey:!1,ignoreDetail:!0})))):(r.optOuterHorizontal.use&&i.view.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render(),r.optOuterVertical.use&&i.view.outerVertical.clearAllChildElement().clearContainerElement().resetData().render(),r.optSelector.use&&(y=i.view.cell.getCellOriginalElement(n,v[e.top][e.left].id,c[0][u.keyColumnPropertyName]).cell,p=i.view.cell.getCellOriginalElement(n,v[e.bottom][e.right].id,c[0][u.keyColumnPropertyName]).cell,y&&p&&i.view.selector.ecSelectStart(y).ecSelectEnd(p).ecDraw()))},setCellMerge:function(n,t,s,h,c,l){var ht,p,ft,v,d,et,ot,nt,ct,lt,tt,at,st,it,vt,g,a,y,w,rt,b,yt,k,ut;if(l=$.extend({isRemoveTotalMergeSet:!0,isResetValue:!0},l||{}),!u.selector||u.selector.selectionType.normal!=s||h.top!=h.bottom||h.left!=h.right){if(l.isRemoveTotalMergeSet&&(ht=i.setting.getFormIsAutoMergeSpecialrow(),ht)){for(v=0,d=r.optEditable.specialRowMerge.length;v<d;v++)p=r.optEditable.specialRowMerge[v][u.rowVariableNames.mergeSet],p.splice(0,p.length);for(ft=i.data.row.getAll(e),v=0,d=ft.length;v<d;v++)p=ft[v][u.rowVariableNames.mergeSet],p&&i.data.row.removeTotalMergeSet(e,e,null,p)}for(et=i.data.column.getLeftFixedByBoundary(o,h),i.data.column.setCancelLeftFixedByBoundary(n,t,h),ot=i.data.row.getAll(o),g=i.data.column.getAll(o,u.returnType.multi),nt=0,ct=ot.length;nt<ct;nt++)for(lt=ot[nt],tt=0,at=et.length;tt<at;tt++)this.refreshCell(o,et[tt].id,lt[u.keyColumnPropertyName],{isRunChange:!1});if(u.selector&&s==u.selector.selectionType.allHorizontal){for(st=[o,f,e],it=0,vt=st.length;it<vt;it++)t=st[it],n=t==e?f:t,g=i.data.column.getAll(t,u.returnType.multi),a=i.data.column.getStartEndInfo(t),a.line.start>-1&&a.line.end>-1&&a.slip.start>-1&&a.slip.end>-1?(h={top:a.line.start,left:h.left,bottom:a.line.end,right:h.right},rt=i.view.cell.merge(n,t,h),i.data.column.merge(n,t,h),i.data.row.merge(n,t,h),h={top:a.slip.start,left:h.left,bottom:a.slip.end,right:h.right},rt=i.view.cell.merge(n,t,h),i.data.column.merge(n,t,h),i.data.row.merge(n,t,h),i.data.row.mergeViewDataRenderingTableMap(n,t,{top:0,left:h.left,bottom:g.length-1,right:h.right})):(h={top:0,left:h.left,bottom:g.length-1,right:h.right},rt=i.view.cell.merge(n,t,h),i.data.column.merge(n,t,h),i.data.row.merge(n,t,h),i.data.row.mergeViewDataRenderingTableMap(n,t,h));r.optOuterHorizontal.use&&(y=i.view.outerHorizontal.getActiveId(),i.view.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render(),y&&(i.view.outerHorizontal.active(s,y),w=r.optLayout.$container.find("#"+y),w.length==1&&i.customEvents.fire("mousedown",w[0],{button:1,shiftKey:!1,altKey:!1,ctrlKey:!1,ignoreDetail:!0})));r.optOuterVertical.use&&(y=i.view.outerVertical.getActiveId(),i.view.outerVertical.clearAllChildElement().clearContainerElement().resetData().render(),y&&(i.view.outerVertical.active(y),w=r.optLayout.$container.find("#"+y),w.length==1&&i.customEvents.fire("mousedown",w[0],{button:1,shiftKey:!1,altKey:!1,ctrlKey:!1,ignoreDetail:!0})))}else if(rt=i.view.cell.merge(n,t,h,c),i.data.column.merge(n,t,h,c,l),i.data.row.merge(n,t,h,c,l),r.optForm.version!=u.formVersion.fourth||r.optCommon.columnType!=u.columnType.single){if(i.data.row.mergeViewDataRenderingTableMap(n,t,h),r.optForm.version==u.formVersion.fourth&&r.optCommon.columnType==u.columnType.single&&this.remakeAllRow(f),this.remakeAllRow(e),r.optCommon.renderType==u.gridRenderType.salarySetting)for(b=0,yt=r.optColumn[t||n].repeatCount;b<yt;b++)k=i.data.column.__datas[t||n].columnCountOfRow,ut={top:h.top,left:h.left+k+b*k,bottom:h.bottom,right:h.right+k+b*k},i.view.cell.merge(n,t,ut),i.data.column.merge(n,t,ut),i.data.row.merge(n,t,ut),r.optForm.version==u.formVersion.fourth&&r.optCommon.columnType==u.columnType.single&&this.remakeAllRow(f),this.remakeAllRow(e),i.data.row.mergeViewDataRenderingTableMap(n,t,h);r.optOuterHorizontal.use&&i.view.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render();r.optOuterVertical.use&&i.view.outerVertical.clearAllChildElement().clearContainerElement().resetData().render()}}},setCellDivide:function(n,t,s,h){var ft=i.setting.getFormIsAutoMergeSpecialrow(),a,v,l,w,g,b,it,k,c,rt,ot,st,ht,y,ut,p,d;if(ft){for(l=0,w=r.optEditable.specialRowMerge.length;l<w;l++)a=r.optEditable.specialRowMerge[l][u.rowVariableNames.mergeSet],a.splice(0,a.length);for(v=i.data.row.getAll(e),l=0,w=v.length;l<w;l++)a=v[l][u.rowVariableNames.mergeSet],a&&i.data.row.removeTotalMergeSet(e,e,null,a)}if(u.selector&&s==u.selector.selectionType.allHorizontal){for(g=[o,f,e],b=0,it=g.length;b<it;b++)t=g[b],n=t==e?f:t,k=i.data.column.getAll(t,u.returnType.multi),c=i.data.column.getStartEndInfo(t),c.line.start>-1&&c.line.end>-1&&c.slip.start>-1&&c.slip.end>-1?(h={top:c.line.start,left:h.left,bottom:c.line.end,right:h.right},i.data.column.divide(n,t,h),i.data.row.divide(n,t,h),i.view.cell.divide(n,t,h),h={top:c.slip.start,left:h.left,bottom:c.slip.end,right:h.right},i.data.column.divide(n,t,h),i.data.row.divide(n,t,h),i.view.cell.divide(n,t,h)):(h={top:0,left:h.left,bottom:k.length-1,right:h.right},i.data.column.divide(n,t,h),i.data.row.divide(n,t,h),i.view.cell.divide(n,t,h));if(r.optOuterHorizontal.use&&i.view.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render(),r.optOuterVertical.use&&i.view.outerVertical.clearAllChildElement().clearContainerElement().resetData().render(),r.optSelector.use){var k=i.data.column.getAll(t||n,u.returnType.multi),v=i.data.row.getAll(n),nt=0,tt,et;t==e&&(sectionRowIndex=i.data.row.getSectionRowIndex(n),rt=i.data.column.getAll(n,u.returnType.multi),tt=sectionRowIndex.endRowCount-sectionRowIndex.startRowIndex,et=tt*rt.length,nt+=tt);ot=i.view.cell.getCellElement(n,k[h.top][h.left].id,v[nt][u.keyColumnPropertyName]);st=i.view.cell.getCellElement(n,k[h.bottom][h.right].id,v[nt][u.keyColumnPropertyName]);i.view.selector.hide().resetData()}}else if(i.data.column.divide(n,t,h),i.data.row.divide(n,t,h),ht=i.view.cell.divide(n,t,h),r.optForm.version!=u.formVersion.fourth||r.optCommon.columnType!=u.columnType.single){if(this.remakeAllRow(e),r.optCommon.renderType==u.gridRenderType.salarySetting)for(y=0,ut=r.optColumn[n].repeatCount;y<ut;y++)p=i.data.column.__datas[n].columnCountOfRow,d={top:h.top,left:h.left+p+y*p,bottom:h.bottom,right:h.right+p+y*p},i.data.column.divide(n,t,d),i.data.row.divide(n,t,d),i.view.cell.divide(n,t,d),r.optForm.version==u.formVersion.fourth&&r.optCommon.columnType==u.columnType.single&&this.remakeAllRow(f),this.remakeAllRow(e);r.optOuterHorizontal.use&&i.view.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render();r.optOuterVertical.use&&i.view.outerVertical.clearAllChildElement().clearContainerElement().resetData().render()}},setStartCellSelection:function(n,t,u){r.optSelector.use&&i.view.selector.resetData().ecSelectStartByInfo(n,t,u).ecDraw()},setEndCellSelection:function(n,t,f){r.optSelector.use&&(i.view.selector.ecSelectEndByInfo(n,t,f).ecDraw(),r.viewSelector.setState(u.selector.state.mouseup))},getRowListMatrix:function(n,t,u,e){return(arguments.length==3&&(e=arguments[2],u=arguments[1],t=arguments[0],n=e.sectionType||f),r.optMatrixState.use)?i.data.row.getMatrixStateRowList(n,t,u):null},getRowIndexByKey:function(n,t,r){return arguments.length==2?(r=arguments[1],t=arguments[0],n=f):arguments.length==1&&(t=arguments[0],n=f),i.data.row.getIndexById(n,t,r)},getColumnIndexById:function(n,t,r){return r=r||u.returnType.single,i.data.column.getIndexById(n,r,t)},getMatrixIndexById:function(n,t){return i.data.column.getMatrixIndexById(n,t)},setCellTransaction:function(){return{start:ct,end:lt}},validate:function(){for(var w,r,o,b,f,n,c,k,a,t=u.sectionType.tbody,v=i.data.row.getAll(t),y=i.data.column.getAll(t),s=!0,h=[],p=0,d=i.transaction.begin(),e=0,g=v.length;e<g;e++)for(w=v[e],r=w[u.keyColumnPropertyName],h.push({count:0}),o=0,b=y.length;o<b;o++)f=y[o].id,n=this.validateCell(t,f,r),s&&n&&!n.result&&(s=n.result),p+=n&&n.result?0:1,h[e].count+=n&&n.result?0:1,n&&!n.result&&n.error.widget.useValidate!==!0&&(c=i.data.row.getViewDataCellInfo(t,f,r),k=c&&c.controlType||"",u.combineControlWidget[k]?(a=i.fn.getCellWidgetInstance(t,f,r),a&&a.validate()):(i.transaction.push("cell","showError",["system",t,f,r]),i.transaction.push("cell","showPopover",["system",t,f,r])),l.widget.UIEventDelegator&&l.widget.UIEventDelegator.triggerEvent("control.showError",{instance:{},cid:t+"|"+f+"|"+r}));return d&&i.transaction.commit(),{result:s,error:{totalCount:p,row:h}}},validateCell:function(n,t,r){var s=i.data.row.getById(n,r,!0),f=i.data.column.getById(n,t),h=typeof f.validation=="function"?f.validation:null,e=i.data.validate.get(u.validateType.system,n,t,r),o;return h&&(o=h(s[f.propertyName],s),o.isValidate=!1,e=$.extend(!0,e,o)),e},validateRedraw:function(n){var h,e,c,t,r,l,a,o,v,s;for(arguments.length==0&&(n=f),h=i.transaction.begin(),e=["widget","custom"],r=0,l=e.length;r<l;r++){c=i.data.validate.getAll(e[r],n);for(a in c)t=a.split(ecount.constValue.gridDelimiter),o=i.data.row.getViewDataCellInfo(n,t[0],t[1]),v=o&&o.controlType||"",u.combineControlWidget[v]?(s=i.fn.getCellWidgetInstance(n,t[0],t[1]),s&&s.validate()):(i.transaction.push("cell","showError",[e[r],n,t[0],t[1]]),i.transaction.push("cell","showPopover",[e[r],n,t[0],t[1]]))}i.transaction.commit();h||i.transaction.begin()},validateRemove:function(n,t,r){var e,u,s,o;for(arguments.length==2&&(r=arguments[1],t=arguments[0],n=f),e=["widget","custom"],u=0,s=e.length;u<s;u++)o=i.data.validate.get(e[u],n,t,r),o&&(i.view.cell.removeError(e[u],n,t,r),!o||o.isValidate||o.error.widget.needValidate||i.data.validate.remove(e[u],n,t,r))},validateRemoveAll:function(n){var t=n?[n]:[o,f,e];["widget","custom"].forEach(function(n){t.forEach(function(t){var r=i.data.validate&&i.data.validate.getAll(n,t)||{};Object.keys(r).forEach(function(u){var f=u.split(ecount.constValue.gridDelimiter);i.view.cell.removeError(n,t,f[0],f[1]);!r[u]||r[u].isValidate||r[u].error.widget.needValidate||i.data.validate.remove(n,t,f[0],f[1])})})})},validateGetErrorTotalCount:function(n){var r,u,e,t,o;for(arguments.length==0&&(n=f),r=["widget","custom"],u=0,t=0,o=r.length;t<o;t++)e=i.data.validate.getAll(r[t],n),e&&(u+=Object.keys(e).length);return u},validateGetErrorKeyList:function(n){var e,o,s,r,u,h,t,c;for(arguments.length==0&&(n=f),e=["widget","custom"],o=[],u=0,h=e.length;u<h;u++)for(s=i.data.validate.getAll(e[u],n),r=Object.keys(s),t=0,c=r.length;t<c;t++){var l=r[t].lastIndexOf(ecount.constValue.gridDelimiter),a=r[t].substring(0,l),v=r[t].substring(l+1);o.push({rowKey:v,columnId:a})}return o},validateGetCellResult:function(n,t,r,u){return arguments.length==3&&(u=arguments[2],r=arguments[1],t=arguments[0],n=f),i.data.validate.get(u,n,t,r,!0)},getLastUpdateTime:function(){return i.lastUpdateTime},getRowListForTempSave:function(n){var r,e,c,k,a;n=n||{};var o=u.sectionType.tbody,d=n.useColumnAlias||!1,g=n.aliasPrefix||"A"+ecount.delimiter,v=0,y={},s,p=n.retunType||"string",w=n.maxLimit||100,h,l,f=[],b="",t={};if(h=i.data.row.getAll(o),r=0,e=h.length,e=e>w?w:e,d){for(l=i.data.column.getAll(o,u.returnType.single),c=0,k=l.length;c<k;c++)t[l[c].propertyName]="";i.mixinOption.optRow[o].additionalDatas&&(t=$.extend(!0,t,i.mixinOption.optRow[o].additionalDatas));t[u.checkBoxPropertyName]="";t[u.rowMoveablePropertyName]="";t[u.rowNumberingPropertyName]="";t[u.keyColumnPropertyName]="";for(a in t)t.hasOwnProperty(a)&&(t[a]=g+v.toString(),v+=1);for(;r<e;r++)f.push(Object.toJSON(h[r]).replace(/(\")([\w|\-]+)(\"\:)/gi,function(n){return(s=t[arguments[2]],s)?(y[s]=arguments[2],String.format("{0}{1}{2}",'"',s,'":')):n}));return b=p=="string"?String.format("{0}{1}{2}","[",f.join(","),"]"):f,{columnAliasMap:y,rows:b}}for(;r<e;r++)f.push(h[r]);return p=="string"?Object.toJSON(f):f},getOriginalRowListForTempSave:function(n,t,r){var u,s;if(typeof n=="string")try{n=JSON.parse(n)}finally{}if(n.constructor==Array&&t){r=r||{};var h=f,o=[],e,c=new RegExp('(\\")(['+aliasPrefix+'|\\w|\\-]+)(\\"\\:)',"gi"),n=i.data.row.getAll(h);for(u=0,s=n.length;u<s;u++)o.push(JSON.parse(Object.toJSON(n[u]).replace(c,function(n){return(e=t[arguments[2]],e)?String.format("{0}{1}{2}",'"',e,'":'):n})));return o}return{}},saveActiveCell:function(){i.savedSectionType=i.activeSectionType;i.savedColumnId=i.activeColumnId;i.savedRowId=i.activeRowId;i.savedColumnIndex=i.activeColumnIndex;i.savedRowIndex=i.activeRowIndex},getActiveSectionType:function(){return i.editLastActiveSectionType||i.activeSectionType},getActiveCellColumnId:function(){return i.editLastActiveColumnId||i.activeColumnId},getActiveCellRowId:function(){return i.editLastActiveRowId||i.activeRowId},getActiveCellByTarget:function(n){return!n||!($(n).closest("table").length>0&&$(n).closest("table")[0].getAttribute("data-gridid"))?null:n.getAttribute("data-key")||n.parentNode.getAttribute("data-key")},getActiveCellData:function(){return i.deactiveSectionType&&i.deactiveColumnId&&i.deactiveRowId?i.data.row.getValue(i.deactiveSectionType,i.deactiveColumnId,i.deactiveRowId):null},restoreActiveCell:function(){if(i.savedSectionType&&i.savedColumnId&&i.savedRowId){if(ecount.gridV2.logger.log(String.format("grid v2 - restoreActiveCell : {0} {1} {2}",i.savedSectionType,i.savedColumnId,i.savedRowId)),i.activeSectionType=i.savedSectionType,i.activeColumnId=i.savedColumnId,i.activeRowId=i.savedRowId,i.activeColumnIndex=i.savedColumnIndex,i.activeRowIndex=i.savedRowIndex,map=i.view.cell.getCellElement(i.activeSectionType,i.activeColumnId,i.activeRowId),map&&map.map&&map.map.cellInfo&&map.map.cellInfo.adjustmentValue!=1){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0);n.ignoreDetail=!0;map.cell.dispatchEvent(n)}i.savedSectionType=null;i.savedColumnId=null;i.savedRowId=null;i.savedColumnIndex=null;i.savedRowIndex=null}},getLastActiveCellPosition:function(){return{sectionType:i.lastFocusedActiveSectionType,columnId:i.lastFocusedActiveColumnId,rowKey:i.lastFocusedActiveRowId}},restoreLastActiveCell:function(){if(!i&&!i.view&&!i.view.cell&&i.lastFocusedActiveSectionType&&i.lastFocusedActiveColumnId&&i.lastFocusedActiveRowId){if(ecount.gridV2.logger.log(String.format("grid v2 - restoreLastActiveCell : {0} {1} {2}",i.lastFocusedActiveSectionType,i.lastFocusedActiveColumnId,i.lastFocusedActiveRowId)),i.activeSectionType=i.lastFocusedActiveSectionType,i.activeColumnId=i.lastFocusedActiveColumnId,i.activeRowId=i.lastFocusedActiveRowId,i.activeColumnIndex=i.lastFocusedActiveColumnIndex,i.activeRowIndex=i.lastFocusedActiveRowIndex,map=i.view.cell.getCellElement(i.activeSectionType,i.activeColumnId,i.activeRowId),map&&map.map&&map.map.cellInfo&&map.map.cellInfo.adjustmentValue!=1){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0);n.ignoreDetail=!0;map.cell.dispatchEvent(n)}i.lastFocusedActiveSectionType=null;i.lastFocusedActiveColumnId=null;i.lastFocusedActiveRowId=null;i.lastFocusedActiveColumnIndex=null;i.lastFocusedActiveRowIndex=null}},editDone:function(n,t,r){arguments.lenght===0?(n=tbody,t="set",r={}):arguments.lenght===2&&(n=tbody,t=arguments[1],r=arguments[0]);var u={editDoneType:t,editDoneOption:r};i.activeSectionType&&i.activeColumnId&&i.activeRowId&&y(i.activeSectionType,i.activeColumnId,i.activeRowId,u)},activeCellBlur:function(){},activeCellFocusout:function(){i.activeSectionType&&i.activeColumnId&&i.activeRowId&&y(i.activeSectionType,i.activeColumnId,i.activeRowId)},treeNodeOpen:function(n,t){arguments.length==0?n=f:arguments.length==1&&(t=arguments[0],n=f);i.data.tree.treeNodeToggle(n,t,!0)},treeNodeClose:function(n,t){arguments.length==1&&(t=arguments[0],n=f);i.data.tree.treeNodeToggle(n,t,!1)},getTreeNodeOpenClose:function(n,t){return i.data.tree.isTreeExpand(t,n)},treeNodeToggleOpenClose:function(){},isParent:function(n,t){return i.data.tree.isParent(n,t)},getParentKey:function(n,t){return i.data.tree.getParentKey(n,t)},hasChildRow:function(n,t,r,u){return arguments.length==1?(t=arguments[0],n=f,r=!1):arguments.length==3&&(u=arguments[2],r=arguments[1],t=arguments[0],n=f),i.data.tree.hasChildRow(n,t,r,u)},getChildRowList:function(n,t){return i.data.tree.getChildRowList(n,t)},setTreeNodeInOut:function(n,t,r,u){arguments.length===3&&(u=arguments[2],r=arguments[1],t=arguments[0],n=f);i.data.tree.setTreeNodeInOut(n,t,r,u)},moveRowWithChild:function(n,t,u){var s,c;arguments.length==2&&(u=arguments[1],t=arguments[0],n=f);var o=i.data.row.getIndexById(n,t),e=i.data.row.getIndexById(n,u),l=i.data.row.getRowCount(n);if(!isNaN(o)&&!isNaN(e)&&o!=e&&o>0&&e>0&&o<l&&e<l){var y=i.data.tree.hasChildRow(n,t),p=i.data.tree.getParentKey(n,t),h=i.data.tree.getChildRowList(p),a=-1,v=-1;for(s=0,c=h.length;s<c;s++)if(t==h[s]){a=s;break}for(s=0,c=h.length;s<c;s++)if(u==h[s]){v=s;break}h.splice(a,1);h.splice(v,0,t);ecount.global.setTimeout(r.optCommon.ecPageId,function(){var f,r,s,h;y?o<e?(r=i.data.tree.getChildRowList(t,{isRetrieveKey:!0}),f=i.data.tree.getChildRowList(u,{isRetrieveKey:!0}),e+=f.length,i.data.row.moveBulkRows(n,o,e,r.length)):(r=i.data.tree.getChildRowList(t,{isRetrieveKey:!0}),i.data.row.moveBulkRows(n,o,e,r.length)):o<e?(s=i.data.tree.getChildRowList(u),h=i.data.row.getIdByIndex(n,e+s.length),i.data.row.moveBulkRows(n,o,e,0)):i.data.row.moveBulkRows(n,o,e,0)}.bind(this),0)}},addChild:function(n,t){i.data.tree.addChild(n,t)},checkTreeNumberRadio:function(n,t,r){return i.data.tree.checkTreeNumberRadio(n,t,r)},destroy:function(){d()},containerFocus:function(){r.optLayout.$container.focus()},popupGridFocus:function(){r.optKeyboard.useMoveCursor&&r.optKeyboard.useMovePage&&r.optKeyboard.spacebarForSelect&&r.optKeyboard.enterForExecute&&this.focus()},focus:function(n){n=n||{};var t=r.optCommon.ecGridId;if(i.activeSectionType&&i.activeRowId)i.activeColumnId?i.view.cell.addClass(i.activeSectionType,i.activeColumnId,i.activeRowId,"active-kbd"):i.view.row.addClass(i.activeSectionType,i.activeRowId,"active-kbd");else if(i.drawcount>0&&h._triggerEvent(ecount.grid.event.list.focus,{},{gridID:t}),n.direction&&n.direction=="down")i.view.keyboard.onKeydown({changeGrid:!0},{which:40});else if(n.direction&&n.direction=="up")i.view.keyboard.onKeydown({changeGrid:!0},{which:38})},blur:function(){i.view.keyboard&&(i.view.keyboard.removeCurRowClass&&i.view.keyboard.removeCurRowClass(),i.view.keyboard.reset&&i.view.keyboard.reset())},_ON_GRID_SHOW_ERROR:function(){},_ON_GRID_HIDE_ERROR:function(){},getHTML:function(n,t,r,u){var e;if(arguments.length===1?_.isEmpty(n)||_.isArray(n)||_.isBoolean(n)||(u=n):arguments.length===2&&(_.isEmpty(t)||_.isBoolean(t)||(u=t)),i.data.column==undefined||i.data.row==undefined)return"";var f="",s=i.$container.hasClass("hidden"),o=function(u){return ecount.gridV2.modules.print.getHTML(i,n,t,r,u)};return f=s?at(o):o(),u&&u.deleteLink===!0&&(e=$("<div><\/div>").html(f),e.find("a").each(function(){$(this).replaceWith($(this).html())}),f=e.html().replace(/text-primary-inverse/g,"bsy").replace(/url\(\"/g,"url(").replace(/.gif"\)/g,".gif)")),f},hasShown:function(){[u.gridRenderType.typeSpecTran].contains(r.optCommon.renderType)&&fu()},hasHidden:function(){},getHTMLByGrid:function(n,t){if(i.data.column==undefined||i.data.row==undefined)return"";var f=i.$container.hasClass("hidden"),u=function(u){return ecount.gridV2.modules.print.getHTMLbyGrid(i,n,t,r,u)};return f?at(u):u()},getNextRowId:function(n,t){return arguments.length==1&&(t=arguments[0],n=f),i.data.row.getNextRowId(n,t)},getNextColumnId:function(n,t,r){return arguments.length==2&&(r=arguments[1],t=arguments[0],n=f),i.data.column.getNextColumnId(n,t,r)},getPrevColumnId:function(n,t,r){return arguments.length==2&&(r=arguments[1],t=arguments[0],n=f),i.data.column.getPrevColumnId(n,t,r)},getCellControlType:function(n,t,r){if(arguments.length==2&&(r=arguments[1],t=arguments[0],n=f),n==undefined||n==null||t==undefined||t==null||r==undefined||r==null)return null;var u=i.data.row.getViewDataCellInfo(n,t,r);return u?u.controlType:null},getRowTotalCount:function(n){return i.data.row.getTotalCount(n||"tbody")},getRowSubTotalCount:function(n){return i.data.row.getSubTotalCount(n||"tbody")},moveUpChecked:function(n){var r,c,s,t,o,f;if(n=n||"tbody",r=this.getCheckedKeyList(),r.length!=0){var a=i.data.column.getAll(n,u.returnType.multi),e=99999,l,h=[];for(t=0,o=r.length;t<o;t++)f=i.data.row.getIndexById(n,r[t]),f<e&&(e=f,l=r[t]),h.push({index:f,rowId:r[t]});for(h.sort(function(n,t){return n.index>t.index?1:n.index<t.index?-1:0}),c=[],t=0,o=h.length;t<o;t++)c.push(h[t].rowId);for(r=c,s=parseInt(i.view.cell.getCellElement(n,u.checkBoxPropertyName,l).cell.querySelector("div").innerText,10),s=s-1<1?1:s-1,i.data.row.moveUpByKeyList(n,r),e=99999,t=0,o=r.length;t<o;t++)f=i.data.row.getIndexById(n,r[t]),f<e&&(e=f);i.transaction.push("row","remakeCheckboxRowItemIndex",[n,e*a.length,null,{checkboxStartNumber:s}])}},moveUpByKeyList:function(n,t){arguments.length==1&&(t=arguments[0],n=f);i.data.row.moveUpByKeyList(n,t)},moveDownChecked:function(n){var t=this.getCheckedKeyList(),o,f,s,r,h,e,c;if(n=n||"tbody",t.length!=0){for(o=i.data.column.getAll(n,u.returnType.multi),f=99999,r=0,h=t.length;r<h;r++)e=i.data.row.getIndexById(n,t[r]),e<f&&(f=e,s=t[r]);c=parseInt(i.view.cell.getCellElement(n,u.checkBoxPropertyName,s).cell.querySelector("div").innerText,10);i.data.row.moveDownByKeyList(n,t);i.transaction.push("row","remakeCheckboxRowItemIndex",[n,f*o.length,null,{checkboxStartNumber:c}])}},moveDownByKeyList:function(n,t){arguments.length==1&&(t=arguments[0],n=f);i.data.row.moveUpByKeyList(n,t)},insertUpChecked:function(n){var t=this.getCheckedKeyList();this.insertUpByKeyList(n||"tbody",t)},insertUpByKeyList:function(n,t){arguments.length==1&&(t=arguments[0],n=f);i.data.row.insertUpByKeyList(n,t)},setNextFocus:function(n,t,e){var s,h,a,l,c,v,o;if(arguments.length==2&&(e=arguments[1],t=arguments[0],n=f),s=this.getNextColumnId(n,t,e),h="",s!=null&&s!=undefined&&s!="")h=e;else{for(a=i.data.row.getIndexById(n,e),l=i.data.column.getAll(n),c=0,v=l.length;c<v;c++)if((o=l[c],!u.checkBoxPropertyNameRex.test(o.id)&&!u.rowMoveablePropertyNameRex.test(o.id)&&!u.rowNumberingPropertyNameRex.test(o.id))&&!ecount.common.isTrue(o.isHideColumn)&&!ecount.common.isTrue(o.isMergeColumn)){s=o.id;break}h=i.data.row.getIdByIndex(n,a+1)}ecount.global.setTimeout(r.optCommon.ecPageId,function(){this.setCellFocus(n,s,h)}.bind(this),200)},getMergeInfo:function(n){var t,f;return typeof n=="object"?(sectionType=n.sectionType,t=n.columnId,f=n.rowId):[u.columnType.single,u.columnType.each].contains(r.optCommon.columnType)&&(sectionType=o),i.data.row.getMergeInfo(sectionType,f,t,n)},getMergeInfoAssigned:function(n,t,r,u){u=u||{};for(var s=i.data.row.getIndexById(n,r),o,e=this.getMergeInfo({sectionType:n,columnId:t,isNotForm:!0}),f=e.length-1;f>-1;f--)if(e[f].dataIdx<=s){o=e[f];break}return o},getMatrixInfo:function(n){return typeof n=="object"&&(n=n.sectionType),{rowCount:i.data.row.getRowCount(n),columnCount:i.data.column.getColumnCount(n)}},getMatrixEmptyArray:function(n,t){return this.createRowColumns(n,t)},createRowColumns:function(n,t){t=t||{};for(var e=t.defaultColumnInfo||{},f=t.rowConfig||[],o=[],s=i.data.column.getAll(n,u.returnType.multi),r=t.startRowIndex||0,h=t.endRowCount||s.length;r<h;r++)f[r]||(f[r]={}),o.push(this.createColumns(n,r,{width:e.width,isGarbage:e.isGarbage,isMergeColumn:f[r].isMergeColumn||e.isMergeColumn,columnType:f[r].columnType||u.columnBitmask.normal},t));return o},createColumns:function(n,t,f,e){var c=[],l=e.startColumnIndex||0,a=e.endColumnCount||1,h=i.data.column.getAll(n,u.returnType.multi),s;if(!h[t]||h[t].length==0)return c;for(;l<a;l++)s=this.getCreateColumnInfo(n,f),r.optCommon.columnType==u.columnType.multi?(s.POSITION=n,s.GROUP_FLAG=h[t][0].GROUP_FLAG||u.sectionSeparateValue.line):(s.POSITION=o,s.GROUP_FLAG=h[t][0].GROUP_FLAG||u.sectionSeparateValue.line),s.lineNo=t+1,s.isTempColumn="1",s.isHideRow=h[t][0]&&h[t][0].isHideRow,c.push(s);return c},getCreateColumnInfo:function(n,t){t=t||{};var i=r.optColumn.generator,f=t.id||r.optColumn.generator.uniqueId();return t.columnType||(t.columnType=u.columnBitmask.normal),i.setColumnType(r.optCommon.columnType),i.create(n,$.extend({id:f,width:100},t))},getTrHeights:function(n){n=n||{};var t=n.sectionType,r=n.detailSectionType,u=n.isShowRow||!1;return i.view.row.getHeights(t,r,u)},setTrHeights:function(n,t,u,f){r.viewRow.setRowElementHeight(n,t,u,f+"px");var e=i.view.row.getHeights(n)[n];e[u]=f;i.setting.setRowTrHeight(n,e);r.optSelector.use&&this.reselectSelector()},setTrHeightsByIndex:function(n,t){var r=i.data.row.getByIndex(n,t),f=r[u.keyColumnPropertyName]},getTrHeightsBySection:function(n,t){return i&&i.view&&i.view.row&&i.view.row.getTrHeightsBySection(n,t)||{}},getTrOffsetHeightBySection:function(n,t,r){return i&&i.view&&i.view.row&&i.view.row.getTrOffsetHeightBySection(n,t,r)||{}},getCellWidgetInstance:function(n,t,r){arguments.length==2&&(r=arguments[1],t=arguments[0],n=f);var e=i.data.row.getViewDataCellMap(n,t,r);return u.nativeControlInWidget[e.cellInfo.editControlType]?i.data.row.getViewDataWidgetInstanceById(n,e.cellInfo.editControlId):null},getWidgetInstance:function(n,t,r){return arguments.length==1?(t=arguments[0],n=f):arguments.length==2&&(r=arguments[1]||{},t=arguments[0],n=f),r.searchTarget=="paging"?i.data.paging&&i.data.paging.getPagingControl(t):i.data.row.getViewDataWidgetInstanceById(n,t,r)},openPopupForGraphSetup:function(n,t){ecount.graph&&(callbackID=uu(this),callbackID&&ecount.graph.openGraphSetup(this,n,t,callbackID))},openPopup:function(n,t){var r={event:n,data:t,forceOpenPopup:!0};i.nativeCodeCloser?i.nativeCodeCloser(n):i.activeSectionType&&i.activeColumnId&&i.activeRowId&&(y(i.activeSectionType,i.activeColumnId,i.activeRowId,r),i.view.editLayer&&i.view.editLayer.setStateOpenPopup(!1));i.nativeCodeCloser=null},getColumnIndexAddtionCount:function(n){arguments.length==0&&(n=f);var t=0;return ecount.common.isTrue(r.optCheckbox[n].use)&&t++,ecount.common.isTrue(r.optNumbering.use)&&t++,ecount.common.isTrue(r.optRowmoveable.use)&&t++,t},setActiveCellColorClass:function(n){r.optCommon.activeCellColor=$.isString(n)?n:null},setCellShowDropdownMenu:function(n,t,s){if(arguments.length==3?typeof arguments[2]=="object"&&(options=arguments[2],s=arguments[1],t=arguments[0],n=o):arguments.length==2&&(s=arguments[1],t=arguments[0],options={},n=o),r.optForm.version==u.formVersion.second)cellInfo=r.viewCell.getCellElement(f,t,s),cellInfo.cell&&i.customEvents.fire("mousemove",cellInfo.cell,{shiftKey:!1,altKey:!1,ctrlKey:!1,ignoreDetail:!0});else if(u.formVersion.third==r.optForm.version)n=r.optCommon.columnType==u.columnType.single?o:n,cellInfo=r.viewCell.getCellElement(n,t,s),cellInfo.cell&&(i.customEvents.fire("mousedown",cellInfo.cell,{button:u.mouseButton.left,shiftKey:!1,altKey:!1,ctrlKey:!1,ignoreDetail:!0}),i.customEvents.fire("mouseup",cellInfo.cell,{shiftKey:!1,altKey:!1,ctrlKey:!1,ignoreDetail:!0}));else if(u.formVersion.fourth==r.optForm.version){if(n=r.optCommon.columnType==u.columnType.single?o:n,cellInfo=r.viewCell.getCellElement(n,t,s),cellInfo.cell)if(i.setting.getOnloadCompleteAfterShowContextmenu()){r.viewSelector.selectStartByElement(cellInfo.cell).selectExtend().draw().show().hideOption();var h=function(){var n=this.getDisplaySelectorOption(r.viewSelector.getStartSectionType(),r.viewSelector.getStartBoundary(),r.viewSelector.getEndSectionType(),r.viewSelector.getEndBoundary());n.isHorizontal&&n.isVertical?r.viewSelector.showOption({isShowCross:!0}):n.isHorizontal?r.viewSelector.showOption({isShowHorizontal:!0}):n.isVertical&&r.viewSelector.showOption({isShowVertical:!0})}.bind(this);r.optCommon.columnType==u.columnType.single?[f,e].contains(r.viewSelector.getStartSectionType())||h():h();i.fn.ON_CONTEXTMENU_HANDLER({target:cellInfo.cell,originalEvent:{shiftKey:!1,altKey:!1,ctrlKey:!1,ignoreDetail:!0}})}else i.customEvents.fire("mousedown",cellInfo.cell,{button:u.mouseButton.right,shiftKey:!1,altKey:!1,ctrlKey:!1,ignoreDetail:!0}),i.customEvents.fire("mouseup",cellInfo.cell,{shiftKey:!1,altKey:!1,ctrlKey:!1,ignoreDetail:!0});v(!1)}},toSort:function(n,t,r,e,o,s,h){function ot(n,t){var i=["D","DESC"].contains(n.sortOrder&&n.sortOrder.toUpperCase())?-1:1;return function(r,u){var o=isNaN(r[n.prop])?r[n.prop]||"":r[n.prop],s=isNaN(u[n.prop])?u[n.prop]||"":u[n.prop],l=n.dataType&&n.dataType.substr(0,1)||"0",f=0,e=0,c=0,a=o.length,h=0;if(["8","9"].contains(l))o=parseInt(o,10),s=parseInt(s,10),h=o<s?-1:o>s?1:0;else{if(isNaN(o)||isNaN(s))while(o[c]||s[c]){if(f=o[c]&&o.charCodeAt(c)||0,e=s[c]&&s.charCodeAt(c)||0,h=f>=65&&f<=90||f>=97&&f<=122?e<32||e>126?1:f<e?-1:f>e?1:0:e>=65&&e<=90||e>=97&&e<=122?f<32||f>126?-1:f<e?-1:f>e?1:0:f<e?-1:f>e?1:0,h!=0)break;c+=1}else h=o<s?-1:o>s?1:0;ecount.common.isChrome&&t&&h==0&&(h=(r.temp_index<u.temp_index?-1:r.temp_index>u.temp_index?1:0)*i)}return h*i}}function st(){var n=arguments;return function(t,i){for(var r=0,u=0,f=n.length;u===0&&r<f;)u=ot(n[r],r==f-1)(t,i),r+=1;return u}}var nt,p,a,b,c,tt;o=typeof o=="boolean"?o:!1;s=typeof s=="boolean"?s:!1;h=typeof h=="boolean"?h:!1;var k=this.getRowList(),d=[],ft=[],g=[],w,l=[],et=[],v=[],y=[];for(t!=null&&t!=undefined&&t!=""&&l.push(t),r!=null&&r!=undefined&&r!=""&&l.push(r),e!=null&&e!=undefined&&e!=""&&l.push(e),b=[],c=0,tt=l.length;c<tt;c++){nt=l[c];p=i.data.column.getById(f,nt,!0);var it=n=="D"||n=="d"?"desc":"asc",rt=p&&p.propertyName||i.data.column.convertNormalize(f,l[c]),ut=(p&&p.dataType||"").substring(0,1);b.push({prop:rt,dataType:ut,sortOrder:it||"A"});et.push(it);y.push(rt);v.push(ut)}for(c=0;c<k.length;c++)a=k[c],o||ecount.gridV2.util.isNotEmptyOrZero(a,v[0],y[0])||s||ecount.gridV2.util.isNotEmptyOrZero(a,v[1],y[1])||h||ecount.gridV2.util.isNotEmptyOrZero(a,v[2],y[2])?(w=ecount.gridV2.util.getCompareData(a,y,v),w.temp_index=c,g.push(w)):ft.push(a[u.keyColumnPropertyName]);g.sort(st.apply(null,b)).forEach(function(n){d.push(n[ecount.grid.constValue.keyColumnPropertyName])});i.data.row.sortByKeyList(f,d);i.view.row.remakeCheckboxRowItemIndex(f,0,null)},searchInputText:function(n,t){i.searchText||(i.searchText=new ecount.gridV2.modules.searchText);i.searchText.getVisible()?i.searchText.destroyAll():(i.searchText.init(i,n,t),i.searchText.render(n,t))},searchTextCellHighlight:function(n,t,r){if(arguments.length==1?(t=arguments[0],n=f,r={}):arguments.length==2&&(r=arguments[1],t=arguments[0],n=f),!i.searchText)if(r.noButton)i.searchText=new ecount.gridV2.modules.searchText,i.searchText.init(i,null,r);else return;return i.searchText.searchTextCellHighlight(n,t,r)},searchTextClearCellHighlight:function(){i.searchText&&i.searchText.resetSearching()},resetClipboardObj:function(){i.view.clipboard.reset()},addMergeRow:function(n,t,r,u){var e,s;arguments.length==3&&(u=arguments[2],r=arguments[1],t=arguments[0],n=f);this.addRow(n,t,r-1,{addDirection:ecount.grid.constValue.rowAddType.down});var o=i.data.column.getAll(n),h=i.data.row.getIdByIndex(n,r-1),c="";for(e=0;e<o.length;e++)s=i.data.row.getViewDataCellMap(n,o[e].id,h),s.cellInfo&&s.cellInfo.controlType=="ecount.gridV2.widget.mergeAddRow"&&(c=o[e].id);this.refreshCell(n,c,h)},changeFooterBottomRightHTML:function(n,t,r){arguments.length==2&&(r=arguments[1],n=arguments[0]);i.view.changeToolbarHTML(n,!1,!1,t,r)},changeFooterBottomLeftHTML:function(n,t,r){arguments.length==2&&(r=arguments[1],n=arguments[0]);i.view.changeToolbarHTML(n,!1,!0,t,r)},changeHeaderTopRightHTML:function(n,t,r){arguments.length==2&&(r=arguments[1],n=arguments[0]);i.view.changeToolbarHTML(n,!0,!1,t,r)},changeHeaderTopLeftHTML:function(n,t,r){arguments.length==2&&(r=arguments[1],n=arguments[0]);i.view.changeToolbarHTML(n,!0,!0,t,r)},executeHeaderSort:function(n,t,u,f){r.optColumn.sortable&&n==o&&r.dataSortable.enableList[t]&&i.data&&i.data.sortable&&i.data.sortable.sort(n,t,u,f)},executeCheckbox:function(n,t,u,f,e){r.dataCheckbox.getCheckboxUse(n,t)&&i.data&&i.data.checkbox&&i.data.checkbox.setChecked(n,t,u,f,e)},excuteMultiCheckbox:function(n,t,r){var f,o,s,e;for(r=r||{},f=r.start;f<r.end;f++)s=i.data.row.getByIndex(n,f),e=s[u.keyColumnPropertyName],o=i.data.checkbox.isChecked(n,t,e),i.data.checkbox.setChecked(n,t,e,!o,r)},getSectionTypes:function(n,t){var i,s,h;return r.optCommon.columnType==u.columnType.single?i=[o,f,e]:r.optCommon.columnType==u.columnType.multi&&(i=[o,f]),s=i.indexOf(n),h=i.indexOf(t),i.splice(s,h-s+1)},getMultiSectionSelectionRange:function(n,t,i,f,e){var o={top:-1,bottom:-1,left:-1,right:-1},s;return r.optCommon.columnType==u.columnType.single?(o.top=i.top,o.left=i.left,o.bottom=e.bottom,o.right=e.right):t==f?(o.top=i.top,o.left=i.left,o.bottom=e.bottom,o.right=e.right):t==n?(s=r.dataColumn.getAll(n,u.returnType.multi),o.top=i.top,o.left=i.left,o.bottom=s.length-1,o.right=e.right):f==n&&(o.top=0,o.left=i.left,o.bottom=e.bottom,o.right=e.right),o},ON_CONTEXTMENU_HANDLER:function(n){var nt,ft,pt,ti,nr,wt,c,k,bt,wi,bi,l,ct,ki,b,lt,ut,at,a,vt,v,yt,f,h,kt,dt,t,si,di;if(i.dropdownmenu.activeSectionType&&i.dropdownmenu.activeColumnId&&i.dropdownmenu.activeRowId&&(i.fn.hideLayer(i.dropdownmenu.activeSectionType,i.dropdownmenu.activeColumnId,i.dropdownmenu.activeRowId),i.dropdownmenu.activeSectionType=null,i.dropdownmenu.activeColumnId=null,i.dropdownmenu.activeRowId=null),nt=n.target,ft=$(nt),ft=ft.closest("td, th"),ft.length!=0){nt=ft[0];var tt,s,it,hi="",y,ci,li,rt,et,gt,gi,ni=r.viewSelector.getStartSectionType(),ai=r.viewSelector.getEndSectionType(),vi=r.viewSelector.getStartBoundary(),yi=r.viewSelector.getEndBoundary(),ur=r.viewSelector.getStartRowType(),fr=r.viewSelector.getEndRowType(),g,ot,w,pi=this.getSectionTypes(ni,ai),p={ecPageID:r.optCommon.ecPageId,ecTabID:r.optCommon.ecTabId,ecGridID:r.optCommon.ecGridId,isPossibleMerge:!1,isPossibleDivide:!1,isPossibleDeleteRow:!1,isPossibleDeleteColumn:!1,isPossibleAddLeftColumn:!0,isPossibleAddRightColumn:!0,isPossibleAddUpRow:!0,isPossibleAddDownRow:!0};if(vi.isValid()&&yi.isValid())for(b=0,lt=pi.length;b<lt;b++){for(s=pi[b],g=this.getMultiSectionSelectionRange(s,ni,vi,ai,yi),at=r.dataRow.getViewDataRenderingTableMapAll(s),a=g.top,vt=g.bottom;a<=vt;a++){for(v=g.left,yt=g.right;v<=yt;v++)if(pt=at[a][v],["MERGE","NORMAL"].contains(pt.type)&&(ti=r.viewCell.getCellElement(s,pt.columnId,pt.rowId),ti.cell==nt)){tt=ti.cell;et=tt.getAttribute("data-columnid");break}if(tt)break}if(tt)break}if(nr=!1,wt=!1,tt&&r.optCommon.columnType==u.columnType.single,tt){if(c=[],k=_.merge(ec$.parseElement(nt),ec$.parseGridElement(nt)),[u.checkBoxPropertyName,u.rowMoveablePropertyName,u.rowNumberingPropertyName].contains(k.gridColumnID))return;s=k.gridSectionType;et=k.gridColumnID;rowId=k.gridDataKey;ci=r.dataRow.getById(s,rowId);li=ci[u.rowVariableNames.rowType];y=li==u.rowType.separate?e:s;n.originalEvent&&n.originalEvent.ignoreDetail?(elementSize=r.viewCell.getSizeByScreen(s,et,rowId),elementSize.left+=elementSize.width-10<0?0:elementSize.width-10,elementSize.right=elementSize.left+1,elementSize.top-=elementSize.height-6<0?0:6,elementSize.bottom-=elementSize.height-6<0?0:6):elementSize={top:n.pageY*ecount.common.getZoomRatio(),bottom:n.pageY*ecount.common.getZoomRatio()+1,left:n.pageX*ecount.common.getZoomRatio(),right:n.pageX*ecount.common.getZoomRatio()+1};var d=r.optLayout.$layer[0],ii=0,ri=0,ui=0,fi=0;if(d==document.body?(d=r.optLayout.window,ui=d.innerWidth,fi=d.innerHeight):(ii=d.offsetTop,ri=d.offsetLeft,ui=d.offsetWidth,fi=d.offsetHeight),ri<=elementSize.left&&elementSize.left<=ri+ui&&ii<=elementSize.top&&elementSize.top<=ii+fi){i.dropdownmenu.keys||(i.dropdownmenu.keys={});var tr=r.optCommon.ecPageId,ir=r.optCommon.ecGridId,er=[tr,ir,s,et,rowId].join(ecount.separator.ecPath);function d(n,t){for(var r,i=0,u=t.length;i<u;i++)t[i].type=="section"?(r=n.find(function(n){return n.value==t[i].value}),r?d(r.childItems,t[i].childItems):n.find(function(n){return n.value==t[i].value})||n.push(t[i])):n.find(function(n){return n.value==t[i].value})||n.push(t[i])}function nt(n,t){var i=null,r=0;return n.forEach(function(n){i?i!=n[t]&&(i=n[t],r+=1):(i=n[t],r+=1)}),r}var st=this.getRangeInformationsOfSelectedArea({returnType:"array"}),ei={result:!0},oi=[];for(bt=0,wi=st.length;bt<wi;bt++){bi=st[bt];l=bi;l.boundary=l.columnBoundary;var ht=[],rr=r.dataColumn.getAll(l.columnSectionType,u.returnType.multi,!0),ht=rr.splice(l.boundary.top,l.boundary.bottom-l.boundary.top+1);for(ct=0,ki=ht.length;ct<ki;ct++)ht[ct].splice(l.boundary.right+1),ht[ct].splice(0,l.boundary.left);l.columnRows=ht;l.columns=ht.reduce(function(n,t){return n.concat(t)},[]);oi.push(l)}if(r.optContextmenu.type==u.contextmenuType.custom)r.optSelector.use&&r.viewSelector.setState(u.selector.state.mouseup),ei.result&&r.optContextmenu.instance.setPosition(elementSize).openContextmenu({selectedBoundaryDatas:oi});else if(r.optContextmenu.contextmenuBeforeCallback){if(ei=r.optContextmenu.contextmenuBeforeCallback({datas:oi}),ei.result)for(b=0,lt=st.length;b<lt;b++)for(ut=st[b],s=ut.sectionType,at=r.dataRow.getViewDataRenderingTableMapAll(s),it=ut.detailSectionType,y=ut.columnSectionType,ot=ut.rowBoundary,w=ut.columnBoundary,p.isPossibleMerge||(p.isPossibleMerge=i.fn.getIsPossibleMerge(y,w)),p.isPossibleDivide||(p.isPossibleDivide=i.fn.getIsPossibleDivide(y,w)),p.isPossibleDeleteRow||(p.isPossibleDeleteRow=i.fn.getIsPossibleDeleteRow(y,w)),p.isPossibleDeleteColumn||(p.isPossibleDeleteColumn=i.fn.getIsPossibleDeleteColumn(y,w)),a=ot.top,vt=ot.bottom;a<=vt;a++)for(v=ot.left,yt=ot.right;v<=yt;v++)["MERGE","NORMAL"].contains(at[a][v].type)&&(f=r.optContextmenu.type=="detailSectionType"?Object.clone(r.optContextmenu.itemList[s]&&r.optContextmenu.itemList[s][it+hi]&&r.optContextmenu.itemList[s][it+hi].filter(function(n){return n.use===!0}),!0)||[]:Object.clone(r.optContextmenu.itemList[s]&&r.optContextmenu.itemList[s].filter(function(n){return n.use===!0}),!0)||[],rt=r.dataColumn.getAll(y,u.returnType.multi),gt=rt[0].length,gi=gt-1,r.optCommon.gridType==u.gridType.editableForm&&(gt==1&&(t=f.find(function(n){return n.value=="removeColumn"}),t&&(t.liCss?t.liCss+=" disabled":t.liCss="disabled")),r.dataColumn.isPossibleMergeBoundary(y,w)||(h=f.find(function(n){return n.value=="combinationsection"}),h&&h.childItems&&(t=h.childItems.find(function(n){return n.value=="merge"}),t&&(t.liCss?t.liCss+=" disabled":t.liCss="disabled"))),r.dataColumn.isPossibleDivideBoundary(y,w)||(h=f.find(function(n){return n.value=="combinationsection"}),h&&h.childItems&&(t=h.childItems.find(function(n){return n.value=="divide"}),t&&(t.liCss?t.liCss+=" disabled":t.liCss="disabled"))),p.isPossibleDeleteRow||(h=f.find(function(n){return n.value=="removesection"}),h&&h.childItems&&(t=h.childItems.find(function(n){return n.value=="removeRow"}),t&&(t.liCss?t.liCss+=" disabled":t.liCss="disabled"))),p.isPossibleDeleteColumn||(h=f.find(function(n){return n.value=="removesection"}),h&&h.childItems&&(t=h.childItems.find(function(n){return n.value=="removeColumn"}),t&&(t.liCss?t.liCss+=" disabled":t.liCss="disabled"))),s==o?(kt=f.find(function(n){return n.value=="leftColumnSection"}),r.dataColumn.isPossibleLeftFixed(y,w)&&(kt&&kt.childItems&&(t=kt.childItems.find(function(n){return n.value=="cancelLeftFixed"}),t&&(t.liCss?t.liCss+=" disabled":t.liCss="disabled")),f.remove(function(n){return n.value=="cancelFreezeLeftColumn"}))):(f.remove(function(n){return n.value=="freezeLeftColumn"}),f.remove(function(n){return n.value=="cancelFreezeLeftColumn"})),r.optColumn[s].repeatCount>0&&(f.contains("removeColumn")?(t=f.find(function(n){return n.value=="insertColumn"}),t&&(t.liCss?t.liCss+=" disabled":t.liCss="disabled")):(t=f.find(function(n){return n.value=="insertColumn"||n.value=="removeColumn"}),t&&(t.liCss?t.liCss+=" disabled":t.liCss="disabled"))),r.optCommon.columnType==u.columnType.single&&(dt=r.dataColumn.isDecimalDataType(s,rt[g.top][g.left].id),[u.sectionSeparateValue.tsubtot1,u.sectionSeparateValue.tsubtot2,u.sectionSeparateValue.tsubtot3,u.sectionSeparateValue.tsubtot4,u.sectionSeparateValue.tsubtot5,u.sectionSeparateValue.subtot1,u.sectionSeparateValue.subtot2,u.sectionSeparateValue.subtot3,u.sectionSeparateValue.subtot4,u.sectionSeparateValue.subtot5].contains(it)?dt&&c.filter(function(n){return n.value=="showText"}).length==0?ecount.common.isTrue(rt[a][v].IsSubTotal)?f.remove(function(n){return n.value=="showText"}):(c.remove(function(n){return n.value=="hideText"}),f.remove(function(n){return n.value=="hideText"})):wt||(f=[]):[u.sectionSeparateValue.pagetot].contains(it)?dt&&c.filter(function(n){return n.value=="showText"}).length==0?ecount.common.isTrue(rt[a][v].footerOption.IsPageTotal)?f.remove(function(n){return n.value=="showText"}):(c.remove(function(n){return n.value=="hideText"}),f.remove(function(n){return n.value=="hideText"})):wt||(f=[]):u.sectionSeparateValue.line==it&&e==ni&&(dt&&c.filter(function(n){return n.value=="showText"}).length==0?ecount.common.isTrue(rt[a][v].footerOption.IsTotal)?f.remove(function(n){return n.value=="showText"}):(c.remove(function(n){return n.value=="hideText"}),f.remove(function(n){return n.value=="hideText"})):wt||(f=[])))),d(c,f));nt(st,"columnSectionType")>1&&(t=c.find(function(n){return n.value=="setting"}),t&&(t.liCss?t.liCss+=" disabled":t.liCss="disabled"),t=c.find(function(n){return n.value=="allsetting"}),t&&(t.liCss?t.liCss+=" disabled":t.liCss="disabled"));function n(n,t){return n.index>t.index?1:n.index<t.index?-1:0}c.sort(n);c.forEach(function(t){t.childItems&&t.childItems.sort(n)});function l(n){for(var t=0,i=n.length;t<i;t++)if(n[t].isChildDepth){if(l(n[t].childItems))return!0}else if(!$.isNull(n[t].aCss))return!0;return!1}if(si="",l(c)&&(si="dropdown-menu-icon-list"),di={type:"click",className:si+" dropdown-menu-report context-menu",_onClicked:!0,dropdownmenuData:c,boundary:elementSize},c.length==0)return;r.optSelector.use&&r.viewSelector.setState(u.selector.state.mouseup);i.fn.showLayer(k.gridSectionType,k.gridColumnID,k.gridDataKey,di)}i.dropdownmenu.activeSectionType=s;i.dropdownmenu.activeColumnId=et;i.dropdownmenu.activeRowId=rowId;i.dropdownmenu.event=n}}}},showLayerByEvent:function(n){var v=n.target,t,l,ft,p,at,vt,ot,ut,gt,ni,tt,ti,y,rt,k,d,w,ii;if(r.viewSelector.__datas.selectionType=="allHorizontal")v=ecount.gridV2.modules.util.findParentElementByTagName(v,/T(D|H)/g),ft=ecount.gridV2.modules.util.findParentElementByTagName(v,/T(HEAD|BODY|FOOT)/g),t=ft&&ft.tagName.toLowerCase(),p=v.getAttribute("data-key"),t==f&&(at=r.dataRow.getById(t,p),vt=at[u.rowVariableNames.rowType],l=vt==u.rowType.separate?e:t);else{if(v=null,["mousedown","mousemove"].contains(n.type)&&![u.selector.state.mousedown,u.selector.state.mousemove,u.selector.state.dragable].contains(r.viewSelector.__datas.state))return;t=r.viewSelector.getStartSectionType();l=r.viewSelector.getStartColumnSectionType()}var yt=n.clientX,pt=n.clientY,ri=r.optLayout.scrollContainer&&r.optLayout.scrollContainer.scrollTop||0,ui=r.optLayout.scrollContainer&&r.optLayout.scrollContainer.scrollLeft||0,wt=ri*(2-ecount.common.getZoomRatio()),bt=ui*(2-ecount.common.getZoomRatio()),fi={screenPositionX:Math.abs(yt+bt),screenPositionY:Math.abs(pt+wt),screenPositionLeft:Math.abs(yt+bt),screenPositionTop:Math.abs(pt+wt)},kt=r.viewSelector.getStartBoundary(),dt=r.viewSelector.getEndBoundary(),s=r.viewSelector.getStartBoundary().clone();s.top=kt.top;s.left=kt.left;s.bottom=dt.bottom;s.right=dt.right;var a=r.viewSelector.getSelectionType(),it=r.dataRow.getAll(t),b=r.dataColumn.getAll(l||t,u.returnType.multi),et=b[0].length,ei=et-1,nt,p,h,oi;for(r.optCommon.columnType==u.columnType.multi&&[u.selector.selectionType.normal,u.selector.selectionType.allVertical].contains(a)&&l==e&&(ot=r.dataColumn.getAll(f,u.returnType.multi),s.top-=ot.length,s.bottom-=ot.length),y=0,rt=it.length;y<rt;y++){for(ut=s.top,gt=s.bottom;ut<=gt;ut++){for(k=s.left,ni=s.right;k<=ni;k++)if(d=r.viewCell.getCellElement(t,b[ut][k].id,it[y][u.keyColumnPropertyName]),d.map&&d.map.cellInfo&&d.map.cellInfo.adjustmentValue!=1&&ecount.gridV2.view.util.isRectangleInnerPointByElement(d.cell,fi)){v=d.cell;break}if(v)break}if(v)break}if(v){if(tt=_.merge(ec$.parseElement(v),ec$.parseGridElement(v)),[u.checkBoxPropertyName,u.rowMoveablePropertyName,u.rowNumberingPropertyName].contains(tt.gridColumnID))return;t!=tt.gridSectionType?(h=r.viewCell.getSizeByScreen(t,b[b.length-1][s.right].id,it[it.length-1][u.keyColumnPropertyName]),h.left+=h.width-10<0?0:h.width-10,h.right=h.left+1,h.top-=h.height-6<0?0:6,h.bottom=h.top+1):(t=tt.gridSectionType,nt=tt.gridColumnID,p=tt.gridDataKey,h={top:n.pageY*ecount.common.getZoomRatio(),bottom:n.pageY*ecount.common.getZoomRatio()+1,left:n.pageX*ecount.common.getZoomRatio(),right:n.pageX*ecount.common.getZoomRatio()+1})}else{for(y=0,r.optCommon.columnType==u.columnType.multi&&l==e&&(ti=r.dataRow.getSectionRowIndex(t,l),y=ti.startRowIndex),p=it[y][u.keyColumnPropertyName],y=s.bottom,rt=s.top;y>=rt;y--)for(k=s.right;k>=s.left;k--)if(nt=b[y][k].id,d=r.dataRow.getViewDataCellMap(t,nt,p),d.cellInfo.adjustmentValue!=1)break;h=r.viewCell.getSizeByScreen(t,nt,p);h.left+=h.width-10<0?0:h.width-10;h.right=h.left+1;h.top-=h.height-6<0?0:6;h.bottom-=h.height-6<0?0:6;r.optLayout.scrollContainer&&(h.left-=r.optLayout.scrollContainer.scrollLeft,h.top-=r.optLayout.scrollContainer.scrollTop)}var g=r.optLayout.$layer[0],st=0,ht=0,ct=0,lt=0;if(g==document.body?(g=r.optLayout.window,ct=g.innerWidth,lt=g.innerHeight):(st=g.offsetTop,ht=g.offsetLeft,ct=g.offsetWidth,lt=g.offsetHeight),ht<=h.left&&h.left<=ht+ct&&st<=h.top&&h.top<=st+lt){i.dropdownmenu.keys||(i.dropdownmenu.keys={});var si=r.optCommon.ecPageId,hi=r.optCommon.ecGridId,ci=[si,hi,t,nt,p].join(ecount.separator.ecPath),c=r.optContextmenu.itemList[t]&&r.optContextmenu.itemList[t].filter(function(n){return n.use===!0});r.optCommon.gridType==u.gridType.editableForm&&(r.optCommon.columnType==u.columnType.single&&t==o?(b.length-1==s.bottom-s.top&&c.remove(function(n){return n.value=="removeRow"}),et==1&&c.remove(function(n){return n.value=="removeColumn"}),r.dataColumn.isPossibleMergeBoundary(l||t,s,a)||c.remove(function(n){return n.value=="merge"}),r.dataColumn.isPossibleDivideBoundary(l||t,s,a)||c.remove(function(n){return n.value=="divide"}),r.dataColumn.isPossibleLeftFixed(l||t,s,a)&&c.remove(function(n){return n.value=="cancelLeftFixed"}),r.optColumn[t].repeatCount>0&&(c.contains("removeColumn")?c.remove(function(n){return n.value=="insertColumn"}):c.remove(function(n){return n.value=="insertColumn"||n.value=="removeColumn"}))):r.optCommon.columnType==u.columnType.multi&&a=="normal"?(t==o&&c.remove(function(n){return n.value=="add"}),b.length-1==s.bottom-s.top&&c.remove(function(n){return n.value=="removeRow"}),et==1&&c.remove(function(n){return n.value=="removeColumn"}),r.dataColumn.isPossibleMergeBoundary(l||t,s,a)||c.remove(function(n){return n.value=="merge"}),r.dataColumn.isPossibleDivideBoundary(l||t,s,a)||c.remove(function(n){return n.value=="divide"}),t==o?r.dataColumn.isPossibleLeftFixed(l||t,s,a)&&c.remove(function(n){return n.value=="cancelLeftFixed"}):(c.remove(function(n){return n.value=="leftFixed"}),c.remove(function(n){return n.value=="cancelLeftFixed"})),r.optColumn[t].repeatCount>0&&(c.contains("removeColumn")?c.remove(function(n){return n.value=="insertColumn"}):c.remove(function(n){return n.value=="insertColumn"||n.value=="removeColumn"}))):r.optCommon.columnType==u.columnType.multi&&a=="allVertical"?(w=["leftFixed","cancelLeftFixed","insertColumn","removeColumn","totalSetting"],t==o&&c.remove(function(n){return n.value=="add"}),b.length-1==s.bottom-s.top&&c.remove(function(n){return n.value=="removeRow"}),r.dataColumn.isPossibleMergeBoundary(l||t,s,a)||c.remove(function(n){return n.value=="merge"}),r.dataColumn.isPossibleDivideBoundary(l||t,s,a)||c.remove(function(n){return n.value=="divide"}),c.remove(function(n){var t=w.indexOf(n.value);return t>-1?(w.splice(t,1),!0):!1})):r.optCommon.columnType==u.columnType.multi&&a=="allHorizontal"&&(w=["add","setting","allsetting","insertRow","removeRow","totalSetting"],r.dataColumn.isPossibleMergeBoundary(l||t,s,a)||w.push("merge"),r.dataColumn.isPossibleDivideBoundary(l||t,s,a)||w.push("divide"),r.dataColumn.isPossibleLeftFixed(l||t,s,a)&&c.remove(function(n){return n.value=="cancelLeftFixed"}),s.left==0&&s.right==ei&&w.push("removeColumn"),c.remove(function(n){var t=w.indexOf(n.value);return t>-1?(w.splice(t,1),!0):!1})));ii={type:"click",dropdownmenuData:c,boundary:h,directionX:oi,_onClicked:!0};i.dropdownmenu.activeSectionType=t;i.dropdownmenu.activeColumnId=nt;i.dropdownmenu.activeRowId=p;i.dropdownmenu.event=n;r.optSelector.use&&r.viewSelector.setState(u.selector.state.mouseup);i.fn.showLayer(t,nt,p,ii)}},showLayer:function(n,t,f,o){var v,k,d,h,a,c,tt,y;if(o=o||{},v=i.view.cell.getCellElement(n,t,f),v.cell){var p=r.dataRow.getById(n,f),it=p[u.rowVariableNames.rowType]==u.rowType.separate?e:n,w=r.dataColumn.getById(it||n,t),g=r.optCommon.ecPageId,nt=r.optCommon.ecGridId,rt=[g,nt,n,t,f].join(ecount.separator.ecPath),l=[],s=v.map.cellInfo.dropdownmenuData,b=ec$.getZoomedBoundary(v.cell);if(!s&&p[w.propertyName]&&p[w.propertyName].constructor==Array)for(k=p[w.propertyName],s=[],h=0,a=k.length;h<a;h++)c=k[h],s.push({label:c.name,id:c.name,iconType:c.iconType});if(s&&s.length){if(d=$.isArray(s)&&s||s[o.childElementId]||[],!d[0]||d[0].value){if(l=Object.clone(s,!0),l.length===0)return}else if($.isArray(s))for(h=0,a=s.length;h<a;h++)c=s[h],l.push({label:c.label,value:c.id,liCss:c.iconType});else if(s[o.childElementId]){for(h=0,a=s[o.childElementId].length;h<a;h++)c=s[o.childElementId][h],l.push({label:c.label,value:c.id,liCss:c.iconType});tt=$(v.cell).find("span[childelementid="+o.childElementId+"]");b=ec$.getZoomedBoundary(tt[0])}}else if(o.dropdownmenuData&&o.dropdownmenuData.constructor==Array)l=o.dropdownmenuData,o.boundary&&(b=o.boundary);else return;y={type:"dropdown",ownerKey:i.setting.getCommonEcIKey(),serviceKey:rt,ecPageID:g,gridID:nt,popupID:i.setting.getCommonPopupID(),popupLevel:i.setting.getCommonPopupLevel(),popupType:i.setting.getCommonPopupType(),boundary:b,items:l||[],css:o.className,baseType:!1,showingUpDelay:0,directionX:o.directionX};i.dropdownmenu.activeSectionType=n;i.dropdownmenu.activeColumnId=t;i.dropdownmenu.activeRowId=f;o.type=="click"?(y._onClicked=o._onClicked,ecount.layer.show(y),ecount.layer.setOnClicked(y.serviceKey,!0)):ecount.layer.show(y)}},showDropdownLayer:function(){var i,u,t,f,e,o,s,n;arguments.length>3?(f=arguments[0],e=arguments[1],o=arguments[2],t=arguments[3]||{},n=r.viewCell.getSizeByScreen(f,e,o),n.left+=n.width-10<0?0:n.width-10,n.right=n.left+1,n.top-=n.height-6<0?0:6,n.bottom-=n.height-6<0?0:6,s={top:n.top,bottom:n.bottom,left:n.left,right:n.right}):arguments.length<4&&(i=arguments[0],u=arguments[1],t=arguments[2]||{},f=u.gridSectionType,e=u.gridColumnID,o=u.gridDataKey,s={top:i.pageY*ecount.common.getZoomRatio(),bottom:i.pageY*ecount.common.getZoomRatio()+1,left:i.pageX*ecount.common.getZoomRatio(),right:i.pageX*ecount.common.getZoomRatio()+1});$.isArray(t)&&(t.dropdownmenuData=t);t=_.extend({type:"click",boundary:s,dropdownmenuData:r.optDropdown.dropdownList},t);this.showLayer(f,e,o,t)},popupDragStopEnd:function(){var n=i.view.fix;n&&n.setCloneTablePosition()},popupResizeEnd:function(){var n=i.view.fix;n&&n.setCloneTablePosition()},getUniqueId:function(){return r.optColumn&&r.optColumn.generator&&r.optColumn.generator.uniqueId()},hideLayer:function(n,t,i){var u=r.optCommon.ecPageId,f=r.optCommon.ecGridId,e=[u,f,n,t,i].join(ecount.separator.ecPath);ecount.layer.hide(e)},visibleLayer:function(n,t,i,u){var e=r.optCommon.ecPageId,o=r.optCommon.ecGridId,f=[e,o,n,t,i].join(ecount.separator.ecPath);u?ecount.layer.show({serviceKey:f}):(ecount.layer.setOnClicked(f,!1),ecount.layer.hide(f))},setDropdownListShowLayer:function(n,t,u,f){var h,o,c,l,y;f=f||{};var s=this.getRowItem(n.gridSectionType,n.gridDataKey),e=s[t.columnProperty],p=e.ISEXECAPI===undefined||e.ISEXECAPI==null?!0:e.ISEXECAPI===!0,a=e.PARAMFIELDS||[],v=e.VALUEKEYFIELDS||[],w=e.VALUES||[],b=r.optCommon.ecPageId;if(p){for(h={},o=0;o<a.length;o++)c=a[o],h[c]=s[c];ecount.common.api({ecPageID:b,url:u,async:!0,data:Object.toJSON(h),success:function(t){var c,l,k,y,p,d,r,b,h,g,tt,it;for(t.Data=t.Data||{},c=[],c=f.containsValue?t.Data.FileInfoList:ecmodule.common.slipLink.setRefDataChange(t.Data,s),e.VALUES=c,e.ISEXECAPI=!1,l=0,k=v.length;l<k;l++)y=v[l],e[y]=t.Data[y];if(this.setCell(n.gridSectionType,n.gridColumnID,n.gridDataKey,e,{callByType:"system"}),w.length==1)p=i.setting.getContextmenuDownloadCallback(),d=this.getRowItem(n.gridSectionType,n.gridDataKey),p&&p(n.gridDataKey,d,0);else{for(r=c,$.isArray(r)||(r=[r]),b=[],h=0,g=r.length;h<g;h++){var u=r[h].name,o="",nt="",a=-1;typeof u=="string"&&(a=u.lastIndexOf("."),a>-1?(o=u.substring(0,a),nt=u.substring(a)):o=u);tt=o.byte();tt>50&&(o=o.substring(50)+"...");b.push({id:u,label:o+nt,iconType:r[h].iconType})}it=i.view.cell.getCellElement(n.gridSectionType,n.gridColumnID,n.gridDataKey);it.map.cellInfo.dropdownmenuData=b;this.showLayer(n.gridSectionType,n.gridColumnID,n.gridDataKey,{type:"click",className:f.className||""})}}.bind(this),error:function(n,t,i){ecount.error(i.Message,{title:"System Error "+t,trace:i.MessageDetail})}})}else{if(e.VALUES.length==1&&(l=i.setting.getContextmenuDownloadCallback(),y=this.getRowItem(n.gridSectionType,n.gridDataKey),l)){l(n.gridDataKey,y,0);return}this.showLayer(n.gridSectionType,n.gridColumnID,n.gridDataKey,{type:"click",className:f.className||""})}},openContextmenu:function(n,t,i){var e,o,s,u,l,h,f,a;if(t&&t._DEPTH_1&&(e=ecount.gridV2.view.util.parents(n.target,/T[DH]/),e)){for(o=[],s={},u=0,l=t._DEPTH_1.length;u<l;u++)h=t._DEPTH_1[u],f=h.depthName||"",o.push({label:f,value:f}),s[f]=h.depthEventFunction;a=i=="mouse"?{top:n.pageY,bottom:n.pageY+1,left:n.pageX,right:n.pageX+1}:n.target.getBoundingClientRect();var c=ec$.parseGridElement(e),v=r.optCommon.ecPageId,y=r.optCommon.ecGridId,w=[v,y,c.sectionType,c.columnID,c.dataKey].join(ecount.separator.ecPath),p={type:"dropdown",ownerKey:r.optCommon.ecIKey,serviceKey:w,ecPageID:v,gridID:y,popupID:r.optCommon.popupId,popupLevel:r.optCommon.popupLevel,popupType:r.optCommon.popupType,boundary:a,showingUpDelay:0,items:o};ecount.layer.show(p);ecount.layer.setOnClicked(p.serviceKey,!0);r.optContextmenu.callback=s}},setSigncodeVisibility:function(n,t){t=t||"";visiblity=n==!0?'url(" '+t+' ")':"none";var r=i.$container.find(".wrapper-print #signcode");r.each(function(){$(this).css("background-image",visiblity)})},setApprovalLineVisibility:function(n){visiblity=n==!0?"table-row":"none";var t=i.$container.find(".wrapper-print #approvalline");t.each(function(){$(this).css("display",visiblity)})},reloadOuterHorizontalManager:function(){r.optOuterHorizontal.use&&i.view.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render()},reloadOuterVerticalManager:function(){r.optOuterVertical.use&&i.view.outerVertical.clearAllChildElement().clearContainerElement().resetData().render()},resetGridDraggable:function(){function v(n){var f=n.gridDataKey;if(f){var t=r.optLayout.$container.find("table#grid-main"),e=t.find("tbody > tr[data-key='"+f+"']").html(),o="left: "+event.clientX+"px; top: "+event.clientY+"px;",s=r.optCommon.defaultTableClass.join(" "),h=t.attr("style"),c=t.find("colGroup").html(),u=i.fn.getCheckedCount();return"<div class='draggable-helper' style='"+o+"'>"+(u>1?"<span class='badge'>"+u+"<\/span>":"")+"<table class = '"+s+"' style='"+h+"'><colGroup>"+c+"<\/colGroup><tbody><tr>"+e+"<\/tr><\/tbody><\/table>"+(u>1?"<div class='overlap-paper'><\/div>":"")+"<\/div>"}}var a=i.fn.getRowKeyList(),t,s,h,c,e,n,o,l;a.length>0&&(t=i.view.row.getRowElement(f,i.fn.getRowKeyList()[0]),s=t[0].offsetHeight*t.length,h=t[0].offsetWidth,c=t[0].children.length);e=r.optDrag.moveMode?"<tr drag-grid-blank='true' class='draggable-holder' style='height:"+s+"px; width:"+h+"px;'><td colspan='"+c+"'><\/td><\/tr>":null;n=[];o=r.optDrag.moveMode?"hidden":"draggable-selected";r.optDrag.dragableModule.setDragData({id:r.optCommon.ecPageId,target:"div#"+r.optCommon.ecGridId+" > table#grid-main > tbody",helper:v,helperDistance:{x:20,y:10},droppable:"div#"+r.optCommon.ecGridId+" > table#grid-main",blank:e,axis:"vertical",drag_start:function(t){var s=t.originalEvent&&t.originalEvent.target,e,c,h;if(s){e=this.getActiveCellByTarget(s);var l=$(s).closest("td").data("columnid"),a=$(s).closest("td").data("key"),v=i.data.row.getViewDataCellMap(f,l,a);if(isCheckbox=_.merge(u.nativeControlInWidgetCheckbox,{"ecount.gridV2.widget.checkbox":!0,"ecount.gridV2.widget.rowItemCheckbox":!0}),isCheckbox[v.cellInfo.controlType])return!1}if(e&&e!=""&&(e=ecount.gridV2.util.replaceEscape(e),_.merge(t,{rowKey:e})),c=r.optDrag.dragCallback&&r.optDrag.dragCallback(t)===!1?!1:!0,c)for(i.fn.addChecked(e),i.data.tree.isParent(f,e)&&i.data.tree.setCheckWithChild(f,e,!0),n=i.fn.getCheckedKeyList(),h=0;h<n.length;h++)i.fn.addRowClass(f,n[h],o);return c}.bind(this),drag_move:function(n){return r.optDrag.moveCallback&&r.optDrag.moveCallback(n)===!1?!1:!0}.bind(this),drag_stop:function(t){var h=t.originalEvent&&t.originalEvent.target,u,s;for(h&&(u=this.getActiveCellByTarget(h)),e&&r.optLayout.$container.find("tr[drag-grid-blank='true']").length>0&&r.optLayout.$container.find("tr[drag-grid-blank='true']").remove(),s=0;s<n.length;s++)i.fn.removeRowClass(f,n[s],o,{});return u&&u!=""&&(u=ecount.gridV2.util.replaceEscape(u)),_.merge(t,{rowKey:u,blankTargetDataKey:l}),r.optDrag.dropCallback&&r.optDrag.dropCallback(t)===!1?!1:!0}.bind(this),getBlankArea:function(n){var t=this.getActiveCellByTarget(n.originalEvent.target),i=r.optLayout.$container.find("tbody > tr[data-key='"+this.getActiveCellByTarget(n.originalEvent.target)+"']");return t&&(l=t),{blankArea:i.length>0?i:null}}.bind(this)})},isDragging:function(){return r.optDrag.dragableModule&&r.optDrag.dragableModule.isDragging()},isCurrentPageLast:function(){return i.data.paging?i.data.paging.isCurrentPageLast():!1},setDroppable:function(n){return r.optDrag.dragableModule&&r.optDrag.dragableModule.setDroppable(n)},getRangeInformationsByRange:function(n,t,i,f,e){var o,w,b,tt,s,g,c,p,y,nt,k,h,it,v;if((e=_.extend({returnType:"array",sort:"asc"},e||{}),o=[],!n||!i)||t.top==-1&&t.left==-1&&t.bottom==-1&&t.right==-1||f.top==-1&&f.left==-1&&f.bottom==-1&&f.right==-1)return o;for(w=this.getSectionTypes(n,i),b=0,tt=w.length;b<tt;b++){var v=w[b],d=this.getMultiSectionSelectionRange(v,n,t,i,f),rt=r.dataRow.getViewDataRenderingTableMapAll(v),l=null,a=null;for(s=d.bottom,g=d.top;s>=g;s--)c=rt[s][0],p=r.dataColumn.getById(c.columnSectionType,c.columnId),(s==d.bottom||l&&l!=p.GROUP_FLAG||a&&a!=c.columnSectionType)&&((l&&l!=p.GROUP_FLAG||a&&a!=c.columnSectionType)&&(o.push(y),l=null,a=null),y={sectionType:v,columnSectionType:c.columnSectionType,detailSectionType:p.GROUP_FLAG,columnBoundary:{top:s,bottom:s,left:t.left,right:f.right},rowBoundary:{top:s,bottom:s,left:t.left,right:f.right},sectionTypes:w},r.optCommon.columnType==u.columnType.single||r.optCommon.columnType==u.columnType.multi&&c.columnSectionType==u.sectionType.tfoot&&(nt=r.dataColumn.getAll(u.sectionType.tbody,u.returnType.multi),y.columnBoundary.top-=nt.length,y.columnBoundary.bottom-=nt.length)),(l&&l==p.GROUP_FLAG||a&&a==c.columnSectionType)&&(y.columnBoundary.top-=1,y.rowBoundary.top-=1),s==g&&o.push(y),l=p.GROUP_FLAG,a=c.columnSectionType}if(e.returnType=="object"){if(k={thead:[],tbody:[],tfoot:[]},e.sort=="asc")for(h=o.length-1;h>-1;h--)v=o[h].sectionType,k[v].push(o[h]);else for(h=0,it=o.length;h<it;h++)v=o[h].sectionType,k[v].push(o[h]);o=k}else e.returnType=="array"&&(e.sort=="asc"?o.sort(function(n,t){return n.sectionType==t.sectionType?n.columnSectionType==t.columnSectionType?n.columnBoundary.top>t.columnBoundary.top?1:n.columnBoundary.top<t.columnBoundary.top?-1:0:n.columnSectionType=="thead"&&t.columnSectionType=="tbody"?-1:n.columnSectionType=="tbody"&&t.columnSectionType=="tfoot"?-1:n.columnSectionType=="tfoot"&&t.columnSectionType=="thead"?1:n.columnSectionType=="tfoot"&&t.columnSectionType=="tbody"?1:0:n.columnSectionType=="tbody"&&t.columnSectionType=="thead"?1:n.columnSectionType=="tfoot"&&t.columnSectionType=="tbody"?1:n.columnSectionType=="tfoot"&&t.columnSectionType=="thead"?1:0}):e.sort=="desc"&&o.sort(function(n,t){return n.sectionType==t.sectionType?n.columnSectionType==t.columnSectionType?n.columnBoundary.top>t.columnBoundary.top?-1:n.columnBoundary.top<t.columnBoundary.top?1:0:n.columnSectionType=="tbody"&&t.columnSectionType=="thead"?-1:n.columnSectionType=="tfoot"&&t.columnSectionType=="tbody"?-1:n.columnSectionType=="tfoot"&&t.columnSectionType=="thead"?-1:0:n.columnSectionType=="tbody"&&t.columnSectionType=="thead"?-1:n.columnSectionType=="tfoot"&&t.columnSectionType=="tbody"?-1:n.columnSectionType=="tfoot"&&t.columnSectionType=="thead"?-1:0}));return o},getRangeInformationsOfSelectedArea:function(n){var t=r.viewSelector.getStartSectionType(),i=r.viewSelector.getStartBoundary(),u=r.viewSelector.getEndSectionType(),f=r.viewSelector.getEndBoundary();return this.getRangeInformationsByRange(t,i,u,f,n)},getSelectedBoundaryInfos:function(n,t,i,u,f){var n=n||r.viewSelector.getStartSectionType(),t=t||r.viewSelector.getStartBoundary(),i=i||r.viewSelector.getEndSectionType(),u=u||r.viewSelector.getEndBoundary();return this.getRangeInformationsByRange(n,t,i,u,f)},getMoveVerticalType:function(n,t,i,f,e){var h=r.dataColumn.getAll(t||n,u.returnType.multi),o=h[0].length,s=r.dataColumn.getSystemColumnCount(t||n);return f.startRow>-1&&f.endRow>-1&&i.startRow>-1&&i.endRow>-1?e.top==i.startRow&&e.bottom==i.endRow&&o-s==e.right-e.left+1?"MOVE_TO_DIFFERENT_ROWTYPE":e.top==f.startRow&&e.bottom==f.endRow&&o-s==e.right-e.left+1?"MOVE_TO_DIFFERENT_ROWTYPE":i.startRow<=e.top&&i.endRow>=e.bottom&&o-s==e.right-e.left+1||f.startRow<=e.top&&f.endRow>=e.bottom&&o-s==e.right-e.left+1?"MOVE_TO_SAME_ROWTYPE":"NONE":"MOVE_TO_SAME_ROWTYPE"},getDisplaySelectorOption:function(n,t,i,u){var s=ecount.grid.constValue,f=this.getRangeInformationsByRange(n,t,i,u,{returnType:"array"}),h={},e,o,l,c;return h[s.sectionSeparateValue.line]=s.sectionSeparateValue.slip,h[s.sectionSeparateValue.slip]=s.sectionSeparateValue.line,e={isHorizontal:!1,isVertical:!1},f&&f.length&&(o=r.dataColumn.getAll(f[0].columnSectionType,ecount.grid.constValue.returnType.multi,!1,null,{byDetailSection:!0}),o[f[0].detailSectionType]&&(l=o[f[0].detailSectionType].columnRows.length,c=o[f[0].detailSectionType].columnRows[0].length,f[0].columnBoundary.right-f[0].columnBoundary.left!=c-1&&(e.isHorizontal=!0),f[0].sectionTypes.length==1&&(f[0].columnBoundary.bottom-f[0].columnBoundary.top==l-1?o[h[f[0].detailSectionType]]&&f[0].columnBoundary.right-f[0].columnBoundary.left==c-1&&(e.isVertical=!0):e.isVertical=!0))),e},getSelector:function(){return r.viewSelector},getSelectorSelectedInfo:function(){var t,l,a,v,o,s,i=this.getRangeInformationsOfSelectedArea({returnType:"array"}),f,y,n,h,c;if(i&&i.length){for(t=r.viewSelector.getStartSectionType(),l=r.viewSelector.getEndSectionType(),f=0,y=i.length;f<y;f++)n=i[f],h=r.dataColumn.getAll(n.columnSectionType,u.returnType.multi,!0),a=h[n.columnBoundary.top][n.columnBoundary.left].id,v=h[n.columnBoundary.bottom][n.columnBoundary.right].id,c=r.dataRow.getAll(n.sectionType),o=c[0][u.keyColumnPropertyName],s=c[0][u.keyColumnPropertyName];return r.optCommon.columnType==u.columnType.single&&(o=t==e?"special-row-0":"0",s=t==e?"special-row-0":"0"),{startSectionType:t,startColumnId:a,startRowId:o,endSectionType:l,endColumnId:v,endRowId:s}}return null},reselectSelector:function(n){var l,h,c,o,s,a,v,t,f;n=$.extend({direction:"none",boundary:{top:-1,bottom:-1,left:-1,right:-1}},n||{});l=this.getRangeInformationsOfSelectedArea({returnType:"array"});l&&l.length&&(t=l[0],f=l[l.length-1],n.direction=="left"&&(t.columnBoundary.left+=n.boundary.right-n.boundary.left+1,t.columnBoundary.right+=n.boundary.right-n.boundary.left+1),r.optCommon.columnType==u.columnType.single?(h=r.dataColumn.getAll(t.columnSectionType||t.sectionType,u.returnType.multi),c=h[t.columnBoundary.top][t.columnBoundary.left],o=r.dataRow.getAll(t.sectionType),s=o&&o.length>0?o[0]:null,s&&(a=r.viewCell.getCellElement(t.sectionType,c.id,s[u.keyColumnPropertyName]).cell),h=r.dataColumn.getAll(f.columnSectionType||f.sectionType,u.returnType.multi),c=h[f.columnBoundary.bottom][f.columnBoundary.right],o=r.dataRow.getAll(f.sectionType),s=o&&o.length>0?o[0]:null,s&&(v=r.viewCell.getCellOriginalElement(f.sectionType,c.id,s[u.keyColumnPropertyName]).cell)):r.optCommon.columnType==u.columnType.multi&&(h=r.dataColumn.getAll(t.columnSectionType||t.sectionType,u.returnType.multi),c=h[t.columnBoundary.top][t.columnBoundary.left],o=r.dataRow.getAll(t.sectionType),s=o.find(function(n){return t.columnSectionType==e?n[u.rowVariableNames.rowType]==u.rowType.separate:n[u.rowVariableNames.rowType]!=u.rowType.separate}),a=r.viewCell.getCellElement(t.sectionType,c.id,s[u.keyColumnPropertyName]).cell,h=r.dataColumn.getAll(f.columnSectionType||f.sectionType,u.returnType.multi),c=h[f.columnBoundary.bottom][f.columnBoundary.right],o=r.dataRow.getAll(f.sectionType),s=o.find(function(n){return f.columnSectionType==e?n[u.rowVariableNames.rowType]==u.rowType.separate:n[u.rowVariableNames.rowType]!=u.rowType.separate}),v=r.viewCell.getCellOriginalElement(f.sectionType,c.id,s[u.keyColumnPropertyName]).cell));a&&v&&i.view.selector.ecSelectByElement(a,v).ecDraw()},getExtendBoundary:function(n,t,e){var o=0;return r.optCommon.columnType==u.columnType.single||r.optCommon.columnType==u.columnType.multi&&t==u.sectionType.tfoot&&(tbodyColumnRows=r.dataColumn.getAll(f,u.returnType.multi),o=tbodyColumnRows.length),i.data.row.extendBoundary(n,t,{top:e.top+o,bottom:e.bottom+o,left:e.left,right:e.right},{top:e.top,bottom:e.bottom,left:e.left,right:e.right})},getExtendBoundary2:function(n,t,e,o){var s=0;return r.optCommon.columnType==u.columnType.single||r.optCommon.columnType==u.columnType.multi&&t==u.sectionType.tfoot&&(tbodyColumnRows=r.dataColumn.getAll(f,u.returnType.multi),s=tbodyColumnRows.length),i.data.row.extendBoundary2(n,t,e,{top:o.top+s,bottom:o.bottom+s,left:o.left,right:o.right},{top:o.top,bottom:o.bottom,left:o.left,right:o.right})},setCellMergeFormV4:function(){if(r.optForm.version==u.formVersion.fourth){if(r.optSelector.handlerVersion==u.selector.handlerVersion.single)return ecount.gridV2.handler.formV4SingleSectionContextmenu.merge.apply(r,arguments);if(r.optSelector.handlerVersion==u.selector.handlerVersion.multi)return ecount.gridV2.handler.formV4MultiSectionContextmenu.merge.apply(r,arguments);if(r.optSelector.handlerVersion==u.selector.handlerVersion.custom)return ecount.gridV2.handler.formV4CustomContextmenu.merge.apply(r,arguments)}},setCellDivideFormV4:function(){if(r.optForm.version==u.formVersion.fourth){if(r.optSelector.handlerVersion==u.selector.handlerVersion.single)return ecount.gridV2.handler.formV4SingleSectionContextmenu.divide.apply(r,arguments);if(r.optSelector.handlerVersion==u.selector.handlerVersion.multi)return ecount.gridV2.handler.formV4MultiSectionContextmenu.divide.apply(r,arguments);if(r.optSelector.handlerVersion==u.selector.handlerVersion.custom)return ecount.gridV2.handler.formV4CustomContextmenu.divide.apply(r,arguments)}},removeColumnFormV4:function(){if(r.optForm.version==u.formVersion.fourth){if(r.optSelector.handlerVersion==u.selector.handlerVersion.single)return ecount.gridV2.handler.formV4SingleSectionContextmenu.removeColumn.apply(r,arguments);if(r.optSelector.handlerVersion==u.selector.handlerVersion.multi)return ecount.gridV2.handler.formV4MultiSectionContextmenu.removeColumn.apply(r,arguments);if(r.optSelector.handlerVersion==u.selector.handlerVersion.custom)return ecount.gridV2.handler.formV4CustomContextmenu.removeColumn.apply(r,arguments)}},removeRowFormV4:function(){if(r.optForm.version==u.formVersion.fourth){if(r.optSelector.handlerVersion==u.selector.handlerVersion.single)return ecount.gridV2.handler.formV4SingleSectionContextmenu.removeRow.apply(r,arguments);if(r.optSelector.handlerVersion==u.selector.handlerVersion.multi)return ecount.gridV2.handler.formV4MultiSectionContextmenu.removeRow.apply(r,arguments);if(r.optSelector.handlerVersion==u.selector.handlerVersion.custom)return ecount.gridV2.handler.formV4CustomContextmenu.removeRow.apply(r,arguments)}},insertColumnFormV4:function(){if(r.optForm.version==u.formVersion.fourth){if(r.optSelector.handlerVersion==u.selector.handlerVersion.single)return ecount.gridV2.handler.formV4SingleSectionContextmenu.insertColumn.apply(r,arguments);if(r.optSelector.handlerVersion==u.selector.handlerVersion.multi)return ecount.gridV2.handler.formV4MultiSectionContextmenu.insertColumn.apply(r,arguments);if(r.optSelector.handlerVersion==u.selector.handlerVersion.custom)return ecount.gridV2.handler.formV4CustomContextmenu.insertColumn.apply(r,arguments)}},insertRowFormV4:function(){if(r.optForm.version==u.formVersion.fourth){if(r.optSelector.handlerVersion==u.selector.handlerVersion.single)return ecount.gridV2.handler.formV4SingleSectionContextmenu.insertRow.apply(r,arguments);if(r.optSelector.handlerVersion==u.selector.handlerVersion.multi)return ecount.gridV2.handler.formV4MultiSectionContextmenu.insertRow.apply(r,arguments);if(r.optSelector.handlerVersion==u.selector.handlerVersion.custom)return ecount.gridV2.handler.formV4CustomContextmenu.insertRow.apply(r,arguments)}},getIsPossibleMerge:function(n,t){var i=r.dataColumn.getAll(n,u.returnType.multi),f=i[0].length,e=f-1;return r.dataColumn.isPossibleMergeBoundary(n,t)},getIsPossibleDivide:function(n,t){var i=r.dataColumn.getAll(n,u.returnType.multi),f=i[0].length,e=f-1;return r.dataColumn.isPossibleDivideBoundary(n,t)},getIsPossbileLeftCancel:function(n,t){return r.dataColumn.isPossibleLeftFixed(n,t)},getIsPossibleDeleteRow:function(n){var t=r.dataColumn.getAll(n,u.returnType.multi),i=t[0].length,f=i-1;return t.length!=1},getIsPossibleDeleteColumn:function(n){var i=r.dataColumn.getAll(n,u.returnType.multi),t=i[0].length,f=t-1;return t!=1},activeSelect:function(){r.optLayout.$selectContainer||(r.optLayout.$selectContainer=r.optLayout.$container.closest(ecount.constValue.drawingPaper.containerPrefix+ecount.constValue.drawingPaper.containerSelector));r.optLayout.$selectContainer.visibleResize()},deactiveSelect:function(){r.optLayout.$selectContainer||(r.optLayout.$selectContainer=r.optLayout.$container.closest(ecount.constValue.drawingPaper.containerPrefix+ecount.constValue.drawingPaper.containerSelector));r.optLayout.$selectContainer.invisibleResize()},_ON_CHANGE:s.onChange.bind(s),_ON_CLICK_MENU_TOGGLE:s.onClickMenuToggle.bind(s),_ON_CLICK_SERVICE:s.onClickService.bind(s),_ON_CLICK:s.onClick.bind(s),_ON_DBLCLICK:s.onDblClick.bind(s),_ON_FOCUSIN:s.onFocusin.bind(s),_ON_FOCUSOUT:s.onFocusout.bind(s),_ON_GRID_ACTIVATE:s.onActive.bind(s),_ON_GRID_DEACTIVATE:s.onDeactive.bind(s),_ON_GRID_FOCUS_IN:s.onFocusin.bind(s),_ON_GRID_FOCUS_OUT:s.onFocusout.bind(s),_ON_GRID_KEYDOWN_ARROW_DOWN:s.onKeydown.bind(s),_ON_GRID_KEYDOWN_ARROW_LEFT:s.onKeydown.bind(s),_ON_GRID_KEYDOWN_ARROW_OTHERS:s.onKeydownOthers.bind(s),_ON_GRID_KEYDOWN_ARROW_RIGHT:s.onKeydown.bind(s),_ON_GRID_KEYDOWN_ARROW_UP:s.onKeydown.bind(s),_ON_GRID_KEYDOWN_BACKSPACE:s.onKeydownBackspace.bind(s),_ON_GRID_KEYDOWN_ENTER:s.onKeydown.bind(s),_ON_GRID_KEYDOWN_ESC:s.onKeydownESC.bind(s),_ON_GRID_KEYDOWN_SPACE:s.onKeydownOthers.bind(s),_ON_GRID_KEYUP_ARROW_DOWN:s.onKeyup.bind(s),_ON_GRID_KEYUP_ARROW_LEFT:s.onKeyup.bind(s),_ON_GRID_KEYUP_ARROW_RIGHT:s.onKeyup.bind(s),_ON_GRID_KEYUP_ARROW_UP:s.onKeyup.bind(s),_ON_GRID_KEYUP_SPACE:s.onKeyup.bind(s),_ON_GRID_KEYUP:s.onKeyup.bind(s),_ON_GRID_PASTE:s.onPaste.bind(s),_ON_INPUT:s.onInput.bind(s),_ON_KEYDOWN_ENTER:s.onKeydown.bind(s),_ON_KEYDOWN_F8:s.onKeydown.bind(s),_ON_KEYDOWN_SPACE:s.onKeydown.bind(s),_ON_KEYDOWN_TAB:s.onKeydown.bind(s),_ON_KEYUP:s.onKeyup.bind(s),_ON_MOUSEDOWN:s.onMousedown.bind(s),_ON_MOUSEOUT:s.onMouseOut.bind(s),_ON_MOUSEOVER:s.onMouseOver.bind(s),_ON_MOUSEUP:s.onMouseup.bind(s),_ON_GRID_CONTEXTMENU:s.onContextmenu.bind(s),_ON_GRID_RESIZE_MAXIMIZE:s.onResizeMaximize.bind(s)};return c.removeValidate=c.validateRemove,c.removeAllValidate=c.validateRemoveAll,c.getValidateErrorTotalCount=c.validateGetErrorTotalCount,c.getValidateErrorKeyList=c.validateGetErrorKeyList,c.getCellValidateResult=c.validateGetCellResult,i.fn=c,i.drawProcessStop=function(){v(!1);i.drawCancel=!1;i.drawing=!0},i.active=ut,ecount.gridV2.parent.gridRegistered[r.optCommon.ecPageId+r.optCommon.ecGridId]=c,c}};ecount.gridV2.parent=function(){function n(t){return t=t||window,t[ecount.page.prefix+"ecp.ecp050m"]?t:t.parent&&t.parent!=t?t.name=="__externalEcountIFrame"?t:n(t.parent.window):t.ecount!==undefined?t:window}return window.__ecTargetWindow=n(),window.__ecTargetWindow}();ecount.gridV2.logger=function(){var n=!1;return{on:function(){n=!0},off:function(){n=!1},state:function(){return n},log:function(){ecount.gridV2.util&&ecount.gridV2.util.log.apply(null,arguments);n&&console.log(" gridV2 ::: "+msg)}}}();ecount.gridV2.parent.gridRegistered||(ecount.gridV2.parent.gridRegistered={});ecount.gridV2.constEvent={};ecount.gridV2.renderEvent={cancelCompleted:"table.render.cancelCompleted",renderSkipRow:"table.render.renderSkipRow",renderCompleted:"table.render.renderCompleted"};ecount.gridV2.rowEvent={initData:"table.row.init.data",prepareInit:"table.row.prepareInit",prepareInitCompleted:"table.row.prepareInitCompleted",initCompleted:"table.row.initCompleted",prepareRender:"table.row.prepareRender",renderCompleted:"table.row.renderCompleted"};ecount.gridV2.columnEvent={prepareInit:"table.column.prepareInit",prepareInitCompleted:"table.column.prepareInitCompleted",initCompleted:"table.column.initCompleted",prepareRender:"table.column.prepareRender",renderCompleted:"table.column.renderCompleted"};ecount.gridV2.pagingEvent={initCompleted:"table.paging.initCompleted",renderCompleted:"table.paging.renderCompleted"};ecount.gridV2.cellEvent={change:"cell.change",changeCompleted:"cell.changeCompleted",changCompleted:"cell.changCompleted",renderCompleted:"cell.renderCompleted",focus:"cell.focus",blur:"cell.blur",mouseenter:"cell.mouseenter",mouseleave:"cell.mouseleave"};ecount.gridV2.event={init:"table.init",ready:"table.ready",renderComplete:"table.renderComplete",detach:"table.detach",focus:"table.focus",blur:"table.blur",mousedown:"table.mousedown",mouseup:"table.mouseup",click:"table.click",mouseenter:"table.mouseenter",mouseout:"table.mouseout"};ecount.gridV2.widgetEvent={createWidgetInstance:"gridEvent.createWidgetInstance",destroyWidgetInstance:"gridEvent.destroyWidgetInstance"};ecount.gridV2.constEvent.filter={getDataList:"ecount.gridV2.constEvent.filter.getDataList"};ecount.gridV2.constEvent.selector={initMousedown:"ecount.gridV2.handler.selector.initMousedown",isSelectableTarget:"ecount.gridV2.handler.selector.isSelectableTarget",hasReselectItem:"ecount.gridV2.handler.selector.hasReselectItem",selectStart:"ecount.gridV2.handler.selector.selectStart",selectEnd:"ecount.gridV2.handler.selector.selectEnd",select:"ecount.gridV2.handler.selector.select",selectExtend:"ecount.gridV2.handler.selector.selectExtend",draw:"ecount.gridV2.handler.selector.draw",drawHorizontal:"ecount.gridV2.handler.selector.drawHorizontal",isSelectContinue:"ns.handler.selector.isSelectContinue",isExternalSelection:"ns.handler.selector.isExternalSelection",getColumnSectionType:"ns.handler.selector.getColumnSectionType",afterInsideSelection:"ecount.gridV2.handler.selector.afterInsideSelection",movePossible:"ecount.gridV2.handler.selector.movePossible",unselectable:"ecount.gridV2.handler.selector.unselectable",isAutoMerge:"ecount.gridV2.handler.selector.isAutoMerge",isIncludeAutoMerge:"ecount.gridV2.handler.selector.isIncludeAutoMerge",getScreenBoundingClientRect:"ecount.gridV2.handler.selector.getScreenBoundingClientRect",completedMouseUp:"ecount.gridV2.handler.selector.completedMouseUp"};ecount.gridV2.constEvent.drag={dragStartPrepare:"ecount.gridV2.handler.drag.dragStartPrepare",dragStartFinish:"ecount.gridV2.handler.drag.dragStartFinish",dragMovePrepare:"ecount.gridV2.handler.drag.dragMovePrepare",dragMoveFinish:"ecount.gridV2.handler.drag.dragMoveFinish",dragEndPrepare:"ecount.gridV2.handler.drag.dragEndPrepare",dragEndFinish:"ecount.gridV2.handler.drag.dragEndFinish",dragMovePossible:"ecount.gridV2.handler.drag.dragMovePossible",dragBeforeMovingStart:"ecount.gridV2.handler.drag.dragBeforeMovingStart",dragEndCompleted:"ecount.gridV2.handler.drag.dragEndCompleted",getSelectedBoundaryInfos:"ecount.gridV2.handler.drag.getSelectedBoundaryInfos",getDragableElement:"ecount.gridV2.handler.drag.getDragableElement",beforeMovingStart:"ecount.gridV2.handler.drag.beforeMovingStart",getColumnSectionType:"ecount.gridV2.handler.drag.getColumnSectionType",isPossibleMoveable:"ecount.gridV2.handler.drag.isPossibleMoveable",isMoveHorizontalDirection:"ecount.gridV2.handler.drag.isMoveHorizontalDirection",isMoveVerticalDirection:"ecount.gridV2.handler.drag.isMoveVerticalDirection",isMoveAllDirection:"ecount.gridV2.handler.drag.isMoveAllDirection",getMoveDirection:"ecount.gridV2.handler.drag.getMoveDirection",getMoveBoundingClientRect:"ecount.gridV2.handler.drag.getMoveBoundingClientRect"};ecount.gridV2.constEvent.resize={resizeStart:"ecount.gridV2.handler.resize.resizeStart",resizeEnable:"ecount.gridV2.handler.resize.resizeEnable",resizeMove:"ecount.gridV2.handler.resize.resizeMove",resizeEnd:"ecount.gridV2.handler.resize.resizeEnd"};ecount.gridV2.constEvent.outerHorizontalManager={click:"ecount.gridV2.handler.outerHorizontalManager.click",deactive:"ecount.gridV2.handler.outerHorizontalManager.deactive",getList:"ecount.gridV2.handler.outerHorizontalManager.getList",onBeforeMousedown:"ecount.gridV2.handler.outerHorizontalManager.onBeforeMousedown"};ecount.gridV2.constEvent.outerVerticalManager={click:"ecount.gridV2.handler.outerVerticalManager.click",getList:"ecount.gridV2.handler.outerVerticalManager.getList",onBeforeMousedown:"ecount.gridV2.handler.outerVerticalManager.onBeforeMousedown"};ecount.gridV2.constEvent.overlayManager={getSize:"ecount.gridV2.handler.overlayManager.getSize",getSectionInfos:"ecount.gridV2.handler.overlayManager.getSectionInfos"};ecount.gridV2.config={operateMode:function(){return window.location.href.test(/http(s)?:\/\/(test|zeus|apollo)\d*(a\d*|b\d*|c\d*|d\d*|e\d*|f\d*|ba)?(-dev)?.ecount.com/)?"development":"operating"}(),rowLimit:2e3,allPerformance:!1,initRenderPerformance:!1,renderRenderPerformance:!1,allRenderPerformance:!1,dataPerformance:!1,viewPerformance:!1,renderingPerformance:!1,viewEnable:!0,forceOperatingMode:!1},function(n){n.operateMode=n.forceOperatingMode?"operating":n.operateMode;switch(n.operateMode){case"development":n.allPerformance=!0;n.initRenderPerformance=!0;n.renderRenderPerformance=!0;n.dataPerformance=!0;n.allRenderPerformance=!0;n.viewPerformance=!0;n.renderingPerformance=!0;break;case"operating":n.allPerformance=!1;n.initRenderPerformance=!1;n.renderRenderPerformance=!1;n.allRenderPerformance=!1;n.dataPerformance=!1;n.viewPerformance=!1;n.renderingPerformance=!1}}(ecount.gridV2.config);ecount.class("ecount.gridV2.list",null,{add:function(){},remove:function(){},move:function(){},removeAt:function(){}});ecount.class("ecount.gridV2.merge",null,{divide:function(){},merge:function(){}});ecount.gridV2.transaction=function(n){this.view=n.view;this.state=ecount.gridV2.transaction.state.close;this.__stack=[];this.__key={}};ecount.gridV2.transaction.prototype={init:function(){return this.reset()},reset:function(){return this.state=ecount.gridV2.transaction.state.close,this.__stack=[],this.__key={},this},begin:function(){return this.state==ecount.gridV2.transaction.state.open?!1:(this.state=ecount.gridV2.transaction.state.open,!0)},push:function(n,t,i){if(ecount.gridV2.config.viewEnable)if(this.state==ecount.gridV2.transaction.state.open)this.__stack.push({o:n,fn:t,param:i});else return this.execute(n,t,i);return this},commit:function(){if(this.state==ecount.gridV2.transaction.state.open)for(var n;n=this.__stack.shift();)this.execute(n.o,n.fn,n.param);return this.reset()},execute:function(n,t,i){return this.view&&this.view[n]&&this.view[n][t]&&this.view[n][t].apply(this.view[n],i)},destoryAll:function(){this.__stack=null;this.__key=null}};ecount.gridV2.transaction.state={open:1,close:0};ecount.gridV2.util={log:function(){ecount.gridV2.config.operateMode=="development"&&(arguments.length==1?console.log(arguments[0]):console.log(String.format.apply("",arguments)))},warn:function(){ecount.gridV2.config.operateMode=="development"&&(arguments.length==1?console.warn(arguments[0]):console.warn(String.format.apply("",arguments)))},notify:function(){ecount.gridV2.config.operateMode=="development"&&(arguments.length==1?window.alert(arguments[0]):window.alert(String.format.apply("",arguments)))},getBrowserSize:function(){var n=window,t=document,i=t.documentElement,r=t.body,u=n.innerWidth||i.clientWidth||r.clientWidth,f=n.innerHeight||i.clientHeight||r.clientHeight;return{width:u,height:f}},convertToStyle:function(n){var t,r,i;if(typeof n=="string")return"style='"+n+"'";if(!$.isPlainObject(n))return"";t="";r="";for(i in n)if(n.hasOwnProperty(i)){if(n[i]=="")continue;r="";t!=""&&(t+=" ");t+=i+":"+n[i]+r+";"}return t!=""&&(t="style='"+t+"'"),t},convertToNationalFlag:function(n,t){return!_.isEmpty(n)&&n["style.display"]?ecount.widget.replaceAttr(ecount.control.template.nationalFlag,n)+(t?"&nbsp;":""):""},convertToClassName:function(n){return $.isArray(n)?n.length==0?"":"class='"+n.join(" ")+"'":""},convertToAttribute:function(n,t){var r,u,i;if(!$.isPlainObject(n))return"";r="";for(i in n)if((!t||!t.contains(i))&&n.hasOwnProperty(i)){if(n[i]=="")continue;u="";r!=""&&(r+=" ");r+=i+"='"+this.replaceEscapeString(n[i].toString())+u+"'"}return r},replaceEscapeString:function(n){return typeof n=="boolean"?n:n.escapeHTML(!0)},replaceRegexpString:function(n){return $.isNull(n)?n:typeof n!="string"?n:n.replace&&n.replace(/\$/g,function(n){return n+n})||n},getCheckedValue:function(n){if(n==undefined||n==null)return"";switch(typeof n){case"string":return["true","checked"].contains(n.toLowerCase())?"checked":"";case"boolean":return n===!0?"checked":"";default:return""}},convertAsteriscus:function(n,t,i){var r=n.length;if(r>i){var f=n.substring(0,r-(t+i)),e=n.substring(r-i),u="";for(r>=t+i||r>=i&&(t=r-i);t--;)u+="*";n=String.format("{0}{1}{2}",f,u,e)}return n},convert2ByteChar2:function(n){for(var t,r="",u=n.length,i=0;i<u;i++)t=n.charCodeAt(i),r+=t>=65281&&t<=65374&&t!=65340?String.fromCharCode(t-65248):t==8217?String.fromCharCode(39):t==8221?String.fromCharCode(34):t==12288?String.fromCharCode(32):t==65507?String.fromCharCode(126):t==65509?String.fromCharCode(92):n.charAt(i);return r},isNotEmptyOrZero:function(n,t,i){if(n[i]!==""&&n[i]!=undefined)if(t=="1"||t=="2"){if(n[i]!="0")return!0;arrEmptys.push(n)}else{if(t=="8"||t=="9"){var r=new Decimal(n[i]);return r.isZero()?!1:!0}return!0}else return!1},getCompareData:function(n,t,i){for(var f={},e,o,r,u=0,s=t.length;u<s;u++)e=t[u],o=i[u],r=n[e],f[e]=o=="8"||o=="9"?parseInt(r,10):r?ecount.gridV2.util.convert2ByteChar2(r.toString()).toLowerCase():0;return f[ecount.grid.constValue.keyColumnPropertyName]=n[ecount.grid.constValue.keyColumnPropertyName],f},sort:function(n){var t=["D","DESC"].contains(n.sortOrder&&n.sortOrder.toUpperCase())?-1:1;return function(i,r){var e,u=i[n.prop]||"",f=r[n.prop]||"",o=n.dataType&&n.dataType.substr(0,1)||"0";return["8","9"].contains(o)?(u=parseInt(u,10),f=parseInt(f,10),e=u<f?-1:u>f?1:0):e=u.localeCompare(f),e*t}},multiSort:function(){var n=arguments;return function(t,i){for(var r=0,u=0,f=n.length;u===0&&r<f;)u=dynamicSort(n[r])(t,i),r+=1;return u}},createElement:function(n){return document.createElement(n)},cloneNode:function(n,t){return n&&n.cloneNode(t)},hasClass:function(n,t){return n.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n.className)},removeClass:function(n,t){n.className=n.className.replace(new RegExp("\b"+t+"/g"),"")},addClass:function(n,t){var i=n.className.split(" ");i.indexOf(t)==-1&&(n.className+=" "+t)},setStyle:function(n,t,i){n.style[t]=i},replaceEscape:function(n){return $.isString(n)?(n=n.replace(/&lt;/g,"<"),n=n.replace(/&gt;/g,">"),n=n.replace(/&#39;/g,"'"),n=n.replace(/&quot;/g,'"'),n.replace(/&amp;/g,"&")):n},escapeHTML:function(n){return typeof n=="string"&&/['"&<>\t]/.test(n)&&(/[&\t]/.test(n)&&(n=n.replace(/&/g,"&amp;")),/[<>]/.test(n)&&(n=n.replace(/</g,"&lt;"),n=n.replace(/>/g,"&gt;")),/['"]/.test(n)&&(n=n.replace(/"/g,"&quot;"),n=n.replace(/'/g,"&#39;")),n=n.replace(/&lt;(\/?)(b|strong|br|br\s*\/|u|strike|font|span|div|p|marquee)(\s*)&gt;/gi,"<$1$2$3>"),n=n.replace(/&lt;(font|span|div|p|marquee) (\?|%|&|$|\/|\.|\s|;|:|-|=|"|'|\#|\w|\&quot;|&#39;|&amp;|[가-힣])*&gt;/gi,ecount.gridV2.util.replaceEscape),/&amp;/.test(n)&&(n=n.replace(/&amp;(lt;|gt;|#39;|quot;|amp;|nbsp;)/g,"&$1"))),n},isPropertyInConstValue:function(n){var t=ecount.grid.constValue,i,r;if(['"'+t.keyColumnPropertyName+'":','"'+t.checkBoxPropertyName+'":','"'+t.rowMoveablePropertyName+'":','"'+t.rowNumberingPropertyName+'":','"'+t.rowStatePropertyName+'":','"'+t.rowCountColumnPropertyName+'":'].contains(n))return!0;for(i in t.rowVariableNames)if('"'+t.rowVariableNames[i]+'":'==n)return!0;for(r in t.tree)if('"'+t.tree[r]+'":'==n)return!0;return!1},setProcessTag:function(n,t){var u,i,r,f;if(t){if(t.notice&&typeof t.notice=="string"&&(n="<span class = 'text-bold'>["+t.notice+"]<\/span> "+n),t.preLabel){for(u="",i=t.preLabel,typeof i=="string"&&(i=[i]),r=0,f=i.length;r<f;r++)u+=i[r].color>"#dddddd"?"<span class='label label-light mr-5' style='background-color:"+i[r].color+";'>"+i[r].label+"<\/span>":"<span class='label mr-5' style='background-color:"+i[r].color+";'>"+i[r].label+"<\/span>";n=u+n}t.searchType==2?n='<SPAN class="ml-1"><\/SPAN>'+n:t.reply===!0&&(n='<SPAN class="icon-list-reply ml-1"><\/SPAN>'+n);t.commentCount&&$.isNumber(t.commentCount)&&(n=n+' <span class="text-bold">['+t.commentCount+"]<\/span>");t.newWriting===!0&&(n=n+' <span class = "icon-list-new"><\/span>');t.isVertical&&(n+='<div class="pull-right"><a href="#" class="text-primary-inverse">횡<\/a><\/div>');t.isHorizontal&&(n+='<div class="pull-right"><a href="#" class="text-primary-inverse">종<\/a><\/div>')}return n},getValueString:function(n){return n?n.constructor==Array?n.toJSON():n.constructor==Object?JSON.stringify(n):n.constructor==String?n:"":n},convertAnchorToSpan:function(n){var t=n&&n.cell.data,i=/<a[^>]*>.*?<\/s*a>/g,r=/<a href=['|"].*?['|"]((.*)class\s*(=\s*['|"]([^'|"]*)['|"])?)?([^>]*)>(.*?)<s*\/s*a>/g;return i.test(t)&&(n.cell.data=t.replace(i,function(n){return n.replace(r,'<span$2 class="$4 text-link"$5>$6<\/span>')})),n},isCollideLeftFixed:function(n,t,i,r,u){for(var h,f,p,c,w,d,v=!1,y=ecount.grid.constValue,e=!1,a=i.right,o=0,s=t.left,g=t.right;s<=g;s++){for(h=!1,f=t.top,p=t.bottom;f<=p;f++)e===!1&&ecount.common.isTrue(r[f][s].LEFT_FIXD_STND_TF)&&(e=!0),/(8|9)\d+/g.test(r[f][s].dataType)&&(h=!0);if(e===!1&&(a+=1),h)break;o+=1}if(e&&o>0)for(c=0,w=n.length;c<w;c++){var b=n[c],l=b[y.rowVariableNames.mergeStartIndex],l=l%u,nt=b[y.rowVariableNames.colspanCount]||1,k=nt-1;k+=o;d=h?l+o:l+k;l<=a&&d>a&&(v=!0)}return v},getRowspanCount:function(n){var t=1;return n.some(function(n,i){if(i==0)t=1;else if(ecount.common.isTrue(n[0].isMergeColumn))t+=1;else return!0}),t},getColspanCount:function(n){var t=1;return!n||n.length==0?t:(n[0].some(function(n,i){if(i==0)t=1;else if(ecount.common.isTrue(n.isMergeColumn))t+=1;else return!0}),t)}};ecount.gridV2.modules=function(){};ecount.gridV2.events=function(){this.initValue()};ecount.gridV2.events.prototype={__events:null,initValue:function(){this.__events=[]},on:function(n,t,i){this.__events.push({type:n,callback:t,scope:i})},off:function(n){this.__events.remove(function(t){return t.type==n})},find:function(n,t){var u={items:[]},i,f,r;for(typeof t!="function"&&(t=function(n,t){var i={result:!1};return t.type==n&&(i.result=!0,i.item=t),i}),i=0,f=this.__events.length;i<f;i++)r=t(n,this.__events[i]),r.result&&u.items.push(r.item);return u.items},exist:function(n){return this.find(n).length>0},emit:function(n,t){for(var u,r=this.find(n),i=0,f=r.length;i<f;i++)if(u=typeof t=="object"&&t.constructor==Array?r[i].callback&&r[i].callback.apply(r[i].scope,t):r[i].callback&&r[i].callback.apply(r[i].scope,Array.prototype.slice.call(arguments,1)),u&&u.cancel)break;return u},safeCall:function(n,t,i,r){var u,f,e,o;try{u=this.exist(n)?this.emit(n,t,i,r):null}catch(s){if(f=this.find(n),f)for(e=0,o=f.length;e<o;e++)if(u=f[e].callback&&f[e].callback(t,i,r),u&&u.cancel)break}return u}};ecount.gridV2.customEvents=function(){};ecount.gridV2.customEvents.prototype={fire:function(n,t,i){var r,u;if(document.createEvent){switch(n){case"mousedown":case"mouseup":case"mouseenter":case"mousemove":case"click":r=document.createEvent("MouseEvents");r.initMouseEvent(n,!0,!0,i.view||window,i.detail||0,i.screenX||0,i.screenY||0,i.clientX||0,i.clientY||0,i.ctrlKey||!1,i.altKey||!1,i.shiftKey||!1,i.metaKey||!1,i.button||0,i.relatedTarget||null);break;default:r=document.createEvent("Event");r.initEvent(n,!1,!1)}if(i)for(u in i)i.hasOwnProperty(u)&&(r[u]=i[u]);t.dispatchEvent(r)}else{if(r=document.createEventObject(),i)for(u in i)i.hasOwnProperty(u)&&(r[u]=i[u]);document.fireEvent(n,r)}},init:function(){},destroyAll:function(){}};ecount.gridV2.generatorColumn={column:function(n,t,i,r){var f=n||"ec",e=parseInt(t||1,10),u=i||ecount.grid.constValue.columnType.single,h=r||{},c={POSITION:null,id:null,realId:null,propertyName:null,name:null,width:0,lineNo:0,linechange:!1,index:0,GROUP_FLAG:null,title:""},o=function(){e+=1;return f+e},l=function(n){f=n},a=function(n){u=n},v=function(n,t){t=t||{};var i=t.id||o(),r=u==ecount.grid.constValue.columnType.each?1:100,f={id:i,realId:i,propertyName:i,name:i,width:r};return $.extend({},c,f,s(n),t)},s=function(n){var t=$.extend({BitMaskType:"DesignDefaultColumn",BitMask:"0",align:"center",controlOption:null,controlType:null,customizeDate:null,data:null,dataType:null,dataType1:null,dataType2:null,dateFormat:null,decCount:0,decimalSeparator:null,decimalType:null,font:"dotum",fontColor:"",fontSize:12,fontUnderline:"0",fontItalic:"0",fontStrike:"0",fontBold:"0",isShadow:"0",fontCellBgColor:"",fontBgColor:"",TOP_BORD_USE_TF:!1,TOP_BORD_COLOR_CD:"",TOP_BORD_THICK:"",TOP_BORD_STYL_CD:"",BTTM_BORD_USE_TF:!1,BTTM_BORD_COLOR_CD:"",BTTM_BORD_THICK:"",BTTM_BORD_STYL_CD:"",LEFT_BORD_USE_TF:!1,LEFT_BORD_COLOR_CD:"",LEFT_BORD_THICK:"",LEFT_BORD_STYL_CD:"",RGT_BORD_USE_TF:!1,RGT_BORD_COLOR_CD:"",RGT_BORD_THICK:"",RGT_BORD_STYL_CD:"",isDisplayZero:"0",isCheckZero:"0",isHideColumn:"0",isTodayTime:"0",IsSubTotal:"0",IsTotal:"0",IsPageTotal:"0",colEssentialYn:"0",isRequisite2:"0",isEditable:"0",isInputable:"0",groupColCd:null,headerClass:null,imageSize:null,isColorSettable:!1,pairId:null,thousandSeparator:null,valign:"",controlOption:{}},h);return u==ecount.grid.constValue.columnType.multi?[ecount.grid.constValue.sectionType.thead,ecount.grid.constValue.sectionType.tfoot].contains(n)?(t.isShadow="1",t.align=ecount.config.companyForm.OUT_ALIGN_TITLE_HALIGN,t.valign=ecount.config.companyForm.OUT_ALIGN_TITLE_VALIGN,t.fontUnderline=ecount.config.companyForm.OUT_FONT_UNDERLINE_TFT,t.fontItalic=ecount.config.companyForm.OUT_FONT_ITALIC_TFT,t.fontStrike=ecount.config.companyForm.OUT_FONT_STRIKE_TFT,t.fontBold=ecount.config.companyForm.OUT_FONT_BOLD_TFT,t.fontSize=ecount.config.companyForm.OUT_FONT_SIZET,t.fontColor=ecount.config.companyForm.OUT_FONT_COLORT):t.isShadow="0":(t.columnOption={BitMaskType:"ColumnOption",BitMask:"0",fontUnderline:ecount.config.companyForm.OUT_FONT_UNDERLINE_TFT,fontItalic:ecount.config.companyForm.OUT_FONT_ITALIC_TFT,fontStrike:ecount.config.companyForm.OUT_FONT_STRIKE_TFT,fontBold:ecount.config.companyForm.OUT_FONT_BOLD_TFT,fontSize:ecount.config.companyForm.OUT_FONT_SIZET,fontColor:ecount.config.companyForm.OUT_FONT_COLORT,align:ecount.config.companyForm.OUT_ALIGN_TITLE_HALIGN,valign:ecount.config.companyForm.OUT_ALIGN_TITLE_VALIGN,fontCellBgColor:"",fontBgColor:"",TOP_BORD_USE_TF:!1,TOP_BORD_COLOR_CD:"",TOP_BORD_THICK:"",TOP_BORD_STYL_CD:"",BTTM_BORD_USE_TF:!1,BTTM_BORD_COLOR_CD:"",BTTM_BORD_THICK:"",BTTM_BORD_STYL_CD:"",LEFT_BORD_USE_TF:!1,LEFT_BORD_COLOR_CD:"",LEFT_BORD_THICK:"",LEFT_BORD_STYL_CD:"",RGT_BORD_USE_TF:!1,RGT_BORD_COLOR_CD:"",RGT_BORD_THICK:"",RGT_BORD_STYL_CD:"",IsTotal:"0",IsPageTotal:"0"},t.footerOption={BitMaskType:"FooterOption",BitMask:"0",fontUnderline:ecount.config.companyForm.OUT_FONT_UNDERLINE_TFT,fontItalic:ecount.config.companyForm.OUT_FONT_ITALIC_TFT,fontStrike:ecount.config.companyForm.OUT_FONT_STRIKE_TFT,fontBold:ecount.config.companyForm.OUT_FONT_BOLD_TFT,fontSize:ecount.config.companyForm.OUT_FONT_SIZET,fontColor:ecount.config.companyForm.OUT_FONT_COLORT,align:ecount.config.companyForm.OUT_ALIGN_TITLE_HALIGN,valign:ecount.config.companyForm.OUT_ALIGN_TITLE_VALIGN,fontCellBgColor:"",fontBgColor:"",TOP_BORD_USE_TF:!1,TOP_BORD_COLOR_CD:"",TOP_BORD_THICK:"",TOP_BORD_STYL_CD:"",BTTM_BORD_USE_TF:!1,BTTM_BORD_COLOR_CD:"",BTTM_BORD_THICK:"",BTTM_BORD_STYL_CD:"",LEFT_BORD_USE_TF:!1,LEFT_BORD_COLOR_CD:"",LEFT_BORD_THICK:"",LEFT_BORD_STYL_CD:"",RGT_BORD_USE_TF:!1,RGT_BORD_COLOR_CD:"",RGT_BORD_THICK:"",RGT_BORD_STYL_CD:"",IsTotal:"0",IsPageTotal:"0"}),t},y=function(){};return{uniqueId:o,create:v,setPrefixId:l,setColumnType:a,getDefaultColumnOption:s,destroy:y}},columnTemp:function(n){n=n||{};var t=n.lineCount||0,i=n.columnCountPerLine||0,r=n.tempColumnCountPerLine||0,u=typeof n.idGenerator=="function"?n.idGenerator:function(){return ecount.gridV2.logger.log("idGenerator 가 설정되지 않아 컬럼ID는 빈값으로 설정됩니다."),""},f=typeof n.realIdCallback=="function"?n.realIdCallback:function(n,t,i,r,u){return ecount.gridV2.logger.log("realIdCallback 이 설정되지 않아 realId 는 idGenerator 로 만들어진 값을 사용합니다."),u},e=typeof n.columnMappingIdCallback=="function"?n.columnMappingIdCallback:function(){},o=function(n){u=n},s=function(n){f=n},h=function(n,u){u=u||{};for(var f=typeof u.lineCount=="number"?u.lineCount:t,o=typeof u.columnCountPerLine=="number"?u.columnCountPerLine:i,e=typeof u.tempColumnCountPerLine=="number"?u.tempColumnCountPerLine:r;f>0;)n.splice(f*o-e,e),f-=1;return n},c=function(n,t,i){var s,r,e;i=i||{};var y=typeof i.idGenerator=="function"?i.idGenerator:u,p=typeof i.realIdCallback=="function"?i.realIdCallback:f,o=[],h,c,l=0,a={},v=n.length;for(s=0;s<t;s++)for(r=0,e=0;e<v;e++)n[e].linechange?(r+=1,l=1):l+=1,o[r]||(o[r]=[]),h=Object.clone(n[e]),c=y(),h.id=c,h.propertyName=c,h.linechange=!1,h.realId=p(e,r,s,n[e],c),o[r].push(h),a[c]={columnId:n[e].id};for(var s=0,r=o.length-1,w=o.length;s<w;s++,r--)o[r].splice(0,0,v-l*s,0),n.splice.apply(n,o[r]);return a},l=function(n,u){var o,c;u=u||{};var l=typeof u.lineCount=="number"?u.lineCount:t,s=typeof u.columnCountPerLine=="number"?u.columnCountPerLine:i,a=typeof u.tempColumnCountPerLine=="number"?u.tempColumnCountPerLine:r,v=typeof u.columnMappingIdCallback=="function"?u.columnMappingIdCallback:e,f,h,y={};for(o=0,c=l;o<c;o++)for(f=o*s+s-a,h=o*s+s;f<h;f++)y[n[f].id]={columnId:v(n[f])}};return{create:c,createMap:l,remove:h,setIdGenerator:o,setRealIdCallback:s}}};ecount.gridV2.modules.api=function(){"use strict";var n,i,t,r,f;this.init=function(){n=[];i={};t=0;r=1;f={resolve:null,reject:null,completed:null,url:"",param:{},async:!1}};this.reset=function(){n=null;i=null;n=[];i={};t=0;r=1};this.render=function(){};this.destroyAll=function(){};this.add=function(t,i){var r={};i.success=o;i.error=s;r.apiKey=t;r.requestInfo=i;n.push(r);r.index=n.length-1};this.call=function(){n.length!=0&&(t>n.length||e())};this.length=function(){return n.length};var o=function(i){ecount.gridV2.logger.log("ecount.grid2.commonApi success");var r=u(),o,f;ecount.gridV2.logger.log(r);f=r.resolve&&r.resolve(r.sectionType,i);f&&f.result&&t<n.length-1?(h().increaseLoopIndex(),e()):(this.reset(),o={state:"success"},r.completed&&r.completed(o,r.option))}.bind(this),s=function(n,t,i){ecount.gridV2.logger.log("ecount.grid2.commonApi fail");var r=u(),f;f={state:"fail"};this.reset();r.reject&&r.reject(n,t,i);ecount.gridV2.logger.log(r)}.bind(this),h=function(){return r+=1,this},c=function(){return t+=1,this},u=function(){return n[t]&&n[t].requestInfo},e=function(){var n=u();ecount.common.api($.extend(!0,{},f,n))}};ecount.gridV2.modules.histroy=function(){};ecount.gridV2.modules.histroy.prototype={__datas:null,reset:function(){this.__datas={currentIndex:0,queue:[],queueMaxCount:20}},init:function(){this.reset()},render:function(){},destroyAll:function(){},add:function(n,t,i){this.__datas.queue&&(this.__datas.queue.length==this.__datas.queueMaxCount&&this.__datas.queue.shift(),this.__datas.queue.length-1>this.__datas.currentIndex&&this.__datas.queue.splice(this.__datas.currentIndex+1,this.__datas.queue.length-this.__datas.currentIndex),this.__datas.currentIndex=this.__datas.queue.length,this.__datas.queue.push({scope:n,callback:t,param:i}))},executeUndo:function(){var n=this.__datas.queue[this.__datas.currentIndex-1];n&&(n.scope[n.callback]&&n.scope[n.callback].apply(n.scope,n.param),this.__datas.currentIndex-=1)},executeRedo:function(){var n=this.__datas.queue[this.__datas.currentIndex+1];n&&(n.scope[n.callback]&&n.scope[n.callback].apply(n.scope,n.param),this.__datas.currentIndex+=1)}};ecount.class("ecount.gridV2.modules.contextmenu","ecount.contextmenu",{init:function(n,t){this.__core=n.core;this.__setting=n.setting;this.__fn=this.__core.fn;delete n.core;delete n.setting;ecount.contextmenu.prototype.init.apply(this,[n.mixinOption,t])},getDefualtLayerOptions:function(n){return _.extend({ecPageID:this.optCommon.ecPageId,gridId:this.optCommon.ecGridId,serviceKey:this.optCommon.ecGridUniqueId,ownerKey:this.optCommon.ecIKey,pcid:this.optCommon.ecGridUniqueId},ecount.contextmenu.prototype.getDefualtLayerOptions.call(this,n))},openContextmenu:function(n){n=_.extend(n,{_onClicked:!0});ecount.contextmenu.prototype.openContextmenu.call(this,this.getDefualtLayerOptions(n),ecount.layer)}});ecount.gridV2.modules.clipboard=$.Class(ecount.clipboard,{value:null,columns:null,columnMap:null,arrByLines:[],columnPropertyList:[],bindEvent:null,gridResult:null,firstSetting:!0,isFixedType:!1,failList:[],successList:[],currentColumnId:null,currentRowKey:null,columnIndexAddition:0,columnProperty:null,exceptColumnCounter:0,columnNameIdx:{},lineFeedKeyword:"\tEcount"+String.fromCharCode(13),noLineFeedKeyword:String.fromCharCode(13),init:function(){},setOptions:function(n){this.setColumns(n.columnInfo);this.setColumnMap(n.columnMap);this.currentColumnId=n.columnId;this.currentRowKey=n.rowKey;this.columnIndexAddition=n.columnIndexAddition;this.exceptColumnCounter=n.exceptColumnCounter;this.lineFeedKeyword=n.clipboardKeyword?n.clipboardKeyword:this.lineFeedKeyword},render:function(){},destroy:function(){this._super.destroy()},reset:function(){this.value=null;this.columns=null;this.columnMap=null;this.arrByLines=[];this.columnPropertyList=[];this.bindEvent=null;this.gridResult=null;this.firstSetting=!0;this.isFixedType=!1;this.failList=[];this.successList=[];this.currentColumnId=null;this.currentRowKey=null;this.columnIndexAddition=0;this.columnProperty=null;this.exceptColumnCounter=0;this.columnNameIdx={}},executeEvent:function(){},setValue:function(){},setGridResult:function(){this.gridResult={correctColumns:null,incorrectColumns:null,rowData:[],success:!1,failCause:null,firstSetting:!1,currentColumnId:null,currentRowKey:null,columnIdList:[]}},getValue:function(){return this.setGridResult(),this.value=ecount.clipboard.prototype.getValue.apply(this,arguments),this.splitNewline(),this.setRowData(),this.gridResult},setColumns:function(n){this.columns=n},setColumnMap:function(n){this.columnMap=n},splitNewline:function(){var t=new RegExp(this.lineFeedKeyword,"i"),n,i;if(this.arrByLines=this.value.split(t),this.arrByLines.length==1&&(t=new RegExp(this.noLineFeedKeyword),this.arrByLines=this.value.split(t)),this.arrByLines.length==1)this.arrByLines=this.value.split(/\r\n|\n/);else for(n=0,i=this.arrByLines.length;n<i;n++)n==0&&(this.arrByLines[n]="\n"+this.arrByLines[n]),this.arrByLines[n]=this.arrByLines[n].trim(/\r\n|\n/);this.arrByLines[this.arrByLines.length-1]==""&&this.arrByLines.pop()},setColumnPropertyList:function(){for(var i,n=0,t=this.columns.length;n<t;n++)i=this.columns[n].propertyName||"A"+n,this.columnPropertyList.push(i)},validateColumnName:function(){var u=this.arrByLines[0]&&this.arrByLines[0].trim(/\r\n|\n/).split("\t")||"",e,o,c=Object.clone(this.columnMap,!0),n={},r,s,t,f,i,h;for(n.returnValue=u.length>0?!0:!1,n.correctCounter=0,n.incorrectCounter=0,r=0,s=u.length;r<s;r++){for(t=u[r],f=!1,i=0,h=this.columns.length-this.exceptColumnCounter;i<h;i++)if(e=this.columns[i].title,o=ecount.common.isTrue(this.columns[i].isHideColumn),e==t&&!o){f=!0;this.columnNameIdx[t]=i;break}f==!1?(this.failList.push(t),n.returnValue=!1,n.incorrectCounter++):(this.successList.push(t),delete c[t],n.correctCounter++)}return n},setFirstSetting:function(){var r=this.validateColumnName(),s=this.columns.filter(function(n){return!ecount.common.isTrue(n.isHideColumn)}),u,f,e,o,t,n,i;if(r.returnValue===!0){if(this.arrByLines&&this.arrByLines.length>=0&&this.arrByLines[0]!==undefined&&typeof this.arrByLines[0]=="string"){for(t=this.arrByLines[0].trim(/\r\n|\n/).split("\t"),u=[],n=0,i=t.length;n<i;n++)f=this.columnNameIdx[t[n]],e=this.columns[f]&&this.columns[f].propertyName,e&&u.push(e);this.columnProperty=u;this.gridResult.success=!0}}else if(r.correctCounter==0)if(s.length-this.exceptColumnCounter>=r.incorrectCounter){if(this.arrByLines&&this.arrByLines.length>=0&&this.arrByLines[0]!==undefined&&typeof this.arrByLines[0]=="string"){for(o=[],t=this.arrByLines[0].trim(/\r\n|\n/).split("\t"),n=0,i=t.length;n<i;n++)o.push(s[n].propertyName);this.arrByLines.splice(0,0,o);this.columnProperty=this.arrByLines[0];this.gridResult.success=!0}}else this.gridResult.failCause="excess";else this.gridResult.failCause="partial error"},setAfterSetting:function(){var t=this.columnMap[this.currentColumnId].columnIdx-this.columnIndexAddition,i=this.arrByLines[0].trim(/\r\n|\n/).split("\t").length+t,n,r;if(this.columns.length>=i){for(n=t;n<i;n++)this.gridResult.columnIdList.push(this.columns[n].id);for(n=0,r=this.arrByLines.length;n<r;n++)this.gridResult.rowData.push(this.arrByLines[n].trim(/\r\n|\n/).split("\t"));this.gridResult.success=!0}else this.gridResult.success=!1},setRowData:function(){var i,u,n,r,t,f;if(this.firstSetting===!0){for(this.setFirstSetting(),this.gridResult.correctColumns=this.successList,this.gridResult.incorrectColumns=this.failList,this.gridResult.firstSetting=!0,typeof this.columnProperty=="string"&&(this.columnProperty=this.columnProperty.trim(/\r\n|\n/).split("\t")),i=1,u=this.arrByLines.length;i<u;i++)if(n=null,r={},n=this.arrByLines[i],typeof n=="string"&&(n=n.split("\t")),this.columnProperty&&$.isArray(this.columnProperty)==!0&&this.columnProperty.length>0)if(this.columnProperty.length<=n.length){for(t=0,f=this.columnProperty.length;t<f;t++)n[t]=n[t].replace(/[\s\S]*\n[\s\S]*/g,this.replaceFunc),r[this.columnProperty[t]]=n[t];this.gridResult.rowData.push(r)}else this.gridResult.rowData=[],this.gridResult.success=!1,this.gridResult.failCause="incorrect form"}else this.setAfterSetting(),this.gridResult.currentRowKey=this.currentRowKey,this.gridResult.currentColumnId=this.currentColumnId;return this.gridResult},replaceFunc:function(n){var t;return t=n.slice(1,-1),t.replace(/""/g,'"')},destroyAll:function(){}});ecount.gridV2.modules.print={getHTML:function(n,t,i,r,u){var l,y,w,b,c;u=u||{};var e=n.container.cloneNode(!0),f=$(e),g=new RegExp('url\\(\\\\*"[^\\)^\\\\]*\\\\*"\\)',"gi"),nt=new RegExp('\\\\*"',"gi"),o=n.setting._getSettings(),s=ecount.grid.constValue,tt=n.container.querySelectorAll('#grid-main tr[style*="height:"]'),v=e.querySelectorAll('#grid-main tr[style*="height:"]');for(l=0;l<v.length;l++)y=tt[l],y.offsetHeight>parseInt(v[l].style.height)&&(v[l].style.height=y.offsetHeight+"px");if(f.find('div[fixedgrid="true"]').remove(),f.find("#tempIframeForPrint").remove(),f.find("#gridChromeDummy").remove(),f.find("input[type=radio]").hide(),f.find(".fix-clone").remove(),f.find(".grid-toolbar-clone").remove(),f.find("#grid-fixedtop-div").remove(),f.find("#grid-fixedleft-div").remove(),f.find("#grid-fixedcorner-div").remove(),r===!0&&(w=f.find("table"),w.hasClass("ie-border-bug-fix")||f.find("table").addClass("ie-border-bug-fix")),u.isUnmounted&&(f.removeClass("position-fixed"),f.css("top","")),this.removeColumns(n,f,t),o.layout.useEmailType&&(b=e.children[o.common.containerId+"-emailTarget"],e.removeChild(b)),o.common.renderType===s.gridRenderType.typeSpecTran||o.common.renderType===s.gridRenderType.salaryPayrollBookList)t!==!0?(c=o.layout.printIframeArea,$(c).html(""),c.appendChild(e),n.render.prettifyPrintableHTML(f,{isSetWidth:u.isSetWidth,isSetHeight:!0}),$(e).addClass("wrapper-grid-print"),gridHTML=e.outerHTML,s.isIE_LT11&&!s.isIE_LT9&&(gridHTML=s.IE10BorderHack+gridHTML),$(c).html("")):gridHTML=this.getHTMLByGrid(n,!0,null,!0);else if(o.common.renderType===s.gridRenderType.salaryPrint)if(t!==!0){c=o.layout.printIframeArea;$(c).html("");c.appendChild(e);n.render.prettifyPrintableHTML(f,{isSetHeight:!0});var k=$(e).find(".wrapper-print"),it=k.length||0,rt=Math.floor((o.formOption.pageHeight-(o.formOption.topMargin+o.formOption.bottomMargin))/25.4*96),p=1,h=null,a=null,d=0;k.each(function(n,t){if(a=$(t),o.formOption.gridCountPerPage==1)a.css({"margin-bottom":""}),n!=it-1&&a.after("<div class='page-break'><\/div>");else if(o.formOption.gridCountPerPage==2){if(p<=2){if(p++,h){var r=rt/2,i=r-d;i>0?h.css({"margin-bottom":+i+"px"}):(h.css({"margin-bottom":""}),h.after("<div class='page-break'><\/div>"))}}else h&&(h&&h.css({"margin-bottom":""}),h&&h.after("<div class='page-break'><\/div>")),a.css({"margin-bottom":""}),p=2;d=a.height();h=a}});$(e).addClass("wrapper-grid-print");gridHTML=e.outerHTML;s.isIE_LT11&&!s.isIE_LT9&&(gridHTML=s.IE10BorderHack+gridHTML);$(c).html("")}else gridHTML=this.getHTMLByGrid(n,!0,null,!0);else o.formOption.typeSpecTranMaxWidth=n.data.column.getTotalWidth(),i===!0&&$(e).css({width:n.data.column.getTotalWidth()+"px"}),gridHTML=e.outerHTML;return s.isIE&&$.isString(gridHTML)&&(gridHTML=gridHTML.replace(g,function(n){return n.replace(nt,"")})),gridHTML},removeColumns:function(n,t,i){var c=ecount.grid.constValue,o=[],e,l,a=0,v=t[0],s,f,h,u,r,y;if($.isArray(i)&&(s=t.find("table[id='grid-main']"),s&&s.length>0&&(f=s[0]),f)){for(h=0;h<i.length;h++){for(r=n.data.column.getIndexById(c.sectionType.tbody,c.returnColumnIndexType.multi,i[h]),o.push($(f).find("colgroup").find("col")[r]),e=$(f).find("thead").find("tr"),u=0;u<e.length;u++)o.push($(e[u]).find("th")[r]);for(e=$(f).find("tbody").find("tr"),u=0;u<e.length;u++)o.push($(e[u]).find("td")[r]);a+=parseInt($(f).find("colgroup").find("col")[r].style.width,10)}for($(o).remove(),l=parseInt(f.style.width,10)-a+"px",r=0,y=v.childNodes.length;r<y;r++)v.childNodes[r].style.width=l}},getHTMLbyGrid:function(n,t,i,r,u){var w,d,a,l,f,e,c,y;u=u||{};var rt=new RegExp('url\\(\\\\*"[^\\)^\\\\]*\\\\*"\\)',"gi"),ut=new RegExp('\\\\*"',"gi"),b=n.setting._getSettings(),k=n.container.cloneNode(!0),ot=!(t||!1),p=null,nt="",s={},h={},o={},tt={},it=!1,v=ecount.grid.constValue;if(i)for(f in i)if(i.hasOwnProperty(f))if(w=i[f],$.isArray(w))for(e=0,c=w.length;e<c;e++)tt[w[e]]=f,it=!0;else $.isString(w)&&(tt[w]=f,it=!0);u.isUnmounted&&($(k).removeClass("position-fixed"),$(k).css("top",""));for(var ft=$('<div class="wrapper-print" container-type="wrapper-print"><\/div>')[0],et=$('<div class="page-break"><\/div>')[0],g=k.cloneNode(!0);child=g.lastChild;)g.removeChild(child),child=null;if(p=$(k).find(".grid-print-cut-line"),p=p.length>0?p[0]:null,$(k).find(".grid-wrapper-print-content").filter(function(n,t){var u=t.getAttribute("groupid"),i=u.split(ecount.delimiter),r="";if(i.length===2){if(p&&!nt&&(nt=(b.formOption.backupSecondTablePosition||b.formOption.secondTablePosition||b.formOption.secondTablePosition_default)+"mm"),$(t).css("top",""),/\d+_DUPLICATE/.test(i[1])&&!ot)return;r=it===!0?tt[i[0]]:i[0];s[r]||(s[r]=[]);s[r].push(t)}}),p){for(f in s)if(s.hasOwnProperty(f))for(a=null,d=null,h[f]=[],e=0,c=s[f].length;e<c;e+=2)a=ft.cloneNode(!0),a.appendChild(s[f][e]),d=s[f][e+1],d&&(a.appendChild(p.cloneNode(!0)),d.style.top=nt,a.appendChild(d)),h[f].push(a)}else for(f in s)if(s.hasOwnProperty(f))for(a=null,h[f]=[],e=0,c=s[f].length;e<c;e++)a=ft.cloneNode(!0),a.appendChild(s[f][e]),h[f].push(a);if(r!==!0){for(f in h)if(h.hasOwnProperty(f)){for(l=g.cloneNode(!0),e=0,c=h[f].length;e<c;e++)l.appendChild(h[f][e]),e<c-1&&l.appendChild(et.cloneNode(!0));y=b.layout.printIframeArea;$(y).html("");y.appendChild(l);n.render.prettifyPrintableHTML($(l),{isSetWidth:!0,isSetHeight:!0,isHideBack:!0});o[f]=l.outerHTML;v.isIE_LT11&&!v.isIE_LT9&&(o[f]=v.IE10BorderHack+o[f]);v.isIE&&$.isString(o[f])&&(o[f]=o[f].replace(rt,function(n){return n.replace(ut,"")}));$(y).html("")}}else{l=g.cloneNode(!0);for(f in h)if(h.hasOwnProperty(f))for(e=0,c=h[f].length;e<c;e++)l.appendChild(h[f][e]),e<c-1&&l.appendChild(et.cloneNode(!0));y=b.layout.printIframeArea;$(y).html("");y.appendChild(l);n.render.prettifyPrintableHTML($(l),{isSetWidth:!0,isSetHeight:!0,isHideBack:!0});o=l.outerHTML;v.isIE_LT11&&!v.isIE_LT9&&(o=v.IE10BorderHack+o);v.isIE&&$.isString(o)&&(o=o.replace(rt,function(n){return n.replace(ut,"")}));$(y).html("")}return o}};ecount.gridV2.modules.searchText=function(){};ecount.gridV2.modules.searchText.prototype={searchTextBlur:!1,_isVisible:!1,getSearchElement:function(n){n=n||{};tabId=n.tabId;var t;this.elementId?this.settingOption.common&&this.settingOption.common.ecPageId&&(this.searchButtonId=this.elementId,t=ecount.global.findPageInstance(this.settingOption.common.ecPageId).contents.getControl(this.elementId,tabId)):(this.searchButtonId="searchText",t=ecount.global.findPageInstance(this.settingOption.common.ecPageId).contents.getControl("searchText",tabId));t||(t=this.__fn.getWidgetInstance(this.elementId,{searchTarget:"paging"}));this.searchElement=t&&t.getContainerElement()},setPosition:function(){this.fixedGrid!=!0&&this.searchElement&&(this.positionTop=this.searchElement[0].offsetTop+22,this.positionLeft=this.searchElement[0].offsetLeft-5,this.targetHTML=$("#divSearchText"))},searchTextCellHighlight:function(n,t,i){var c,s,a,e,r,f;i=i||{};var o=t.toUpperCase().trim(),l=i.isMoveScrollTop?i.isMoveScrollTop:!0,u=0,h=i.isTreeOpen?i.isTreeOpen:!1;if(this.searchCellColor=i.searchCellColor?i.searchCellColor:"active-kbd",this.searchTextTarget&&this.searchText==o||this.setSearchTextTarget(t),(this.searchText!=o||o.length==0)&&this.resetSearching(),this.searchCnt<this.searchTextTarget.length?(c=this.searchTextTarget[this.searchCnt].getAttribute("data-columnid"),s=this.searchTextTarget[this.searchCnt].getAttribute("data-key"),this.preColumnId&&this.preRowId&&this.__core.view.cell.removeClass(n,this.preColumnId,this.preRowId,this.searchCellColor),this.__core.view.cell.addClass(n,c,s,this.searchCellColor),this.preColumnId=c,this.preRowId=s,this.searchText=o,h||(u=this.searchTextTarget[this.searchCnt].offsetTop,this.settingOption.layout.$contents?this.settingOption.layout.$contents.scrollTop(u):$(document).scrollTop(u)),this.searchCnt++):(this.searchCnt==this.searchTextTarget.length&&l==!0&&(h?this.settingOption.layout.$contents?this.settingOption.layout.$contents.scrollTop(0):$(document).scrollTop(0):this.searchItem&&this.searchItem.setFocus(0,{resetSearching:!0})),this.resetSearching()),this.settingOption.common.gridStyle==this.constValue.gridStyle.tree&&h===!0){if(a=this.__core.data.tree.getParentGroup(s),e=this.searchCnt-1,e==-1)return-1;this.__core.data.tree.treeNodeToggle(this.tbodyType,a,!0);l==!0?(r=this.__core.view.fix.getLayerBoundary(),f=0,r&&(r.toolbarHeight&&r.toolbarHeight.fixTopToolbar==!0&&(f+=r.toolbarHeight.height),r.topBoundary&&r.topBoundary[0]&&(r.topBoundary[0][this.theadType]&&(f+=r.topBoundary[0][this.theadType]*2),r.topBoundary[0][this.tbodyType]&&(f+=r.topBoundary[0][this.tbodyType]))),this.searchTextTarget[e].offsetTop>f&&(u=this.searchTextTarget[e].offsetTop-f),u<f&&(u=0)):u=this.searchTextTarget[e].offsetTop;this.settingOption.layout.$contents?this.settingOption.layout.$contents.scrollTop(u):$(document).scrollTop(u)}return this.searchCnt},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n;this.__data=this.__core.data;this.__view=this.__core.view;this.__fn=this.__core.fn;this.__setting=n.setting;this.settingOption=this.__setting._getSettings();this.__renderer=this.__core.render;this.__events=this.__setting.eventsGet()},setSearchTextTarget:function(n){var t=this.__core.$container.find("tbody > tr > td").find(String.format(':Contains("{0}"):not(.hide)',n)).closest("td"),s=t.find("div.wrapper-datepicker").closest("td"),e=this.__core.$container.find("tbody").find("tr").find("div.wrapper-datepicker").find("input").filter(":not('input.hidden')"),v=[],i,h,r,f,u,y,c,l,a,o;if(this.__setting.getCheckBoxUse()&&!this.__setting.getCheckBoxOriginalStyle())for(i=0,h=t.length;i<h;i++)$(t[i]).find("div.checkbox-numbered").length>0&&(t.splice(i,1),i--,h--);for(r=0;r<s.length;r++){var c=s[r].getAttribute("data-columnid"),l=s[r].getAttribute("data-key"),u=[this.tbodyType,c,l].join(ecount.constValue.gridDelimiter);v.push(u)}if(e.length>0&&1<=parseInt(n,10)&&parseInt(n,10)<=31)for(f=0;f<e.length;f++)value=e[f].value||"",value.indexOf(n)>-1&&(u=e[f].getAttribute("data-cid"),u&&v.indexOf(u)==-1&&(o=u.split(ecount.constValue.gridDelimiter),y=o[0],c=o[1],l=o[2],a=this.__core.view.cell.getCellElement(y,c,l).cell,a&&t.push(a)));this.searchTextTarget=t},resetSearching:function(){this.preColumnId&&this.preRowId&&this.__core.view.cell.removeClass(this.tbodyType,this.preColumnId,this.preRowId,this.searchCellColor);this.preColumnId="";this.preRowId="";this.searchCnt=0},reset:function(){this.searchButtonId=null;this.widgetInstance=null;this.searchElement=null;this.searchItem=null},initDataValue:function(n,t){t=t||{};this.elementId=n||"";this.txtControlId="txt-contents-searchText"+(this.elementId==""?"":"-"+this.elementId);this.fixedGrid=t.useFixed?t.useFixed:!1;this.preColumnId="";this.preRowId="";this.searchText="";this.searchCnt=-1},init:function(n,t,i){this.initGlobalValue(n);this.initDataValue(t,i);this.reset();this.getSearchElement(i);this.setPosition()},render:function(){if(this.searchElement&&this.searchElement.is(":visible")!==!1){var n=String.format("style = 'position: absolute; top: {0}px; left: {1}px; z-index: 5;'",this.positionTop,this.positionLeft),t=this.__setting.getCommonEcIKey(),i={ecPageID:this.settingOption.common.ecPageId,containerName:this.settingOption.common.ecContainerName,tabId:this.settingOption.common.ecTabId,gridID:this.settingOption.layout.containerSelector,gridDataKey:"searchText",gridColumnID:"searchText",gridSectionType:this.tbodyType,inlineStyle:n,__eventTargetInstanceEcIKey:t},r=widget.generator.control(),u=r.define("widget.input.searchLayer",this.txtControlId,"searchText","searchText").setOptions(i).inline().end(),f=ecount.common.createNamespace("widget.input.searchLayer");this.searchItem=new f(u);this.searchItem.render(this.searchElement.parent());this.searchItem.setFocus(0);this._isVisible=!0}},getVisible:function(){return this._isVisible},destroyAll:function(){this.searchItem&&this.searchItem.destroy&&this.searchItem.destroy();this.reset();this._isVisible=!1},serialize:function(){}};ecount.gridV2.modules.filter=$.Class(null,{$el:null,orignalElement:null,parent:null,$parent:null,$checkboxAll:null,isShow:null,isCheckedAll:null,renderComplete:null,columnId:null,columnRowList:null,isCheckedItem:null,isRowHidden:null,hideCount:0,isChecked:!0,__defaultOptions:null,dropdownTemplate:'<div class="dropdown-menu dropdown-menu">{{dropdown}}<\/div>',headerTemplate:'<div class="dropdown-menu-header"><span class="form-checkbox"><input type="checkbox" id={{id}} {{check}}><label for={{id}}>{0}<\/label><\/span><\/div>',contentsTemplate:'<ul class="filter-item">{{checkbox}}<\/ul>',footerTemplate:'<div class="dropdown-menu-footer"><button class="btn btn-width-auto btn-primary">{0}<\/button> <button class="btn btn-width-auto btn-default">{1}<\/button><\/div>',checkboxTemplate:'<li><span class="form-checkbox"><input type="checkbox" id={{id}} {{check}}><label for={{id}}>{{label}}<\/label><\/span><\/li>',afterTemplate:null,initGlobalValue:function(){this.constValue=ecount.grid.constValue;this.constEvent=ecount.gridV2.constEvent.filter;this.util=ecount.gridV2.modules.util},init:function(n,t,i){t=t||{};this.initGlobalValue(n);this.__defaultOptions={};$.extend(!0,this.__defaultOptions,t);this.columnRowList={};this.isCheckedItem={};this.isRowHidden=[];this.$layout=$("[data-gid='"+this.__defaultOptions.layoutId+"']");this.dataCheckbox=this.__defaultOptions.dataCheckbox;this.__events=i},render:function(n,t,i){this.templateSetting(n,t,i);this.$el=$(this.afterTemplate);this.$parent.append(this.$el);this.bindEvent();this.renderComplete=!0},bindEvent:function(){var n=this.$el.find(".filter-item"),t=n.find("input[type=checkbox]");t.on("change.filter",this.checkboxHandler.bind(this));this.$checkboxAll=this.$el.find(".dropdown-menu-header").find("input[type=checkbox]");this.$checkboxAll.on("change.filter",this.checkboxHandler.bind(this))},templateSetting:function(n,t,i){var u,f,r,e,o;u=this.checkboxSetting(n,t,i);f=this.contentsTemplate.replace(new RegExp("{{checkbox}}","g"),u);r=this.headerTemplate.replace(new RegExp("{{check}}","g"),this.isCheckedAll==0?"checked":"");r=r.replace(new RegExp("{{id}}","g"),this.__defaultOptions.layoutId+"#filterAll");r=String.format(r,ecount.resource.LBL08019);e=String.format(this.footerTemplate,ecount.resource.BTN00070,ecount.resource.BTN00008);o=r+f+e;this.afterTemplate=this.dropdownTemplate.replace(new RegExp("{{dropdown}}","g"),o)},checkboxSetting:function(n,t,i){var o=this.__events&&this.__events._triggerEvent(this.constEvent.getDataList,{gridSectionType:"tbody",gridColumnID:t,gridDataKey:i}),r="",e=o.datas||[],l=o.column,s=0,u,h;for(this.columnRowList={},this.datas=e,this.columnProperty=l.propertyName,this.isCheckedItem[this.columnProperty]||(this.isCheckedItem[this.columnProperty]={}),u=0,h=e.length;u<h;u++){var c=e[u],i=c["K-E-Y"],f=c[this.columnProperty];this.isRowHidden[u]=="hide"&&!(this.isCheckedItem[this.columnProperty][f]===!1)||this.checkRowData(u,f)&&(r=r+this.checkboxTemplate.replace(new RegExp("{{label}}","g"),f),r=r.replace(new RegExp("{{id}}","g"),this.__defaultOptions.layoutId+"#filter"+s),r=r.replace(new RegExp("{{check}}","g"),this.checkHiddenRow(f)),s++)}return r},checkRowData:function(n,t){return this.columnRowList[t]?(this.columnRowList[t].push(n),!1):(this.columnRowList[t]=[],this.columnRowList[t].push(n),!0)},checkHiddenRow:function(n){return this.isCheckedItem[this.columnProperty][n]===!1?(this.isCheckedAll++,""):(this.isCheckedItem[this.columnProperty][n]=!0,"checked")},onClickHandler:function(n){var t,i;if(n&&$(n.target).parents().hasClass("dropdown-menu")){this.dropdownClickHandler(n);return}if(t=$(n.target),t=t.closest("th, td"),i=this.isShow,this.$el&&this.hide(),!i||n.target!=this.$parent.find(".dropdown-toggle")[0]){this.renderComplete=!1;this.orignalElement=n.target;this.parent=$(n.target).parent()[0];this.$parent=$(n.target).parent();this.isShow=!1;this.isCheckedAll=0;var r=t.closest("THEAD, TBODY, TFOOT")[0].tagName.toLowerCase(),u=t.attr("data-columnid"),f=t.attr("data-key");this.render(r,u,f);this.show()}},dropdownClickHandler:function(n){$(n.target).hasClass("btn")&&this.buttonHandler(n)},buttonHandler:function(n){$(n.target).hasClass("btn-primary")?(this.onApplyButton(),this.hide(),this.orignalElement&&this.orignalElement.focus()):$(n.target).hasClass("btn-default")&&(this.hide(),this.orignalElement&&this.orignalElement.focus())},checkboxHandler:function(n){var r=$(n.target).parent().find("input[type=checkbox]"),i=r.prop("checked"),f=r[0].id,u,t;f==this.$checkboxAll[0].id?(u=this.$el.find(".filter-item"),t=u.find("input[type=checkbox]"),this.isCheckedAll=i?t.length:0,i?t.prop("checked",!0):t.prop("checked",!1)):(i?this.isCheckedAll--:this.isCheckedAll++,this.isCheckedAll==0?this.$checkboxAll.prop("checked",!0):this.$checkboxAll.prop("checked",!1))},onApplyButton:function(){for(var o,h=this.$el.find(".filter-item"),c=h.find("input[type=checkbox]"),l=h.find("label"),r=this.$parent.find(".dropdown-toggle"),t=[],i=[],u,n=0,f=c.length;n<f;n++)$(c[n]).prop("checked")?(u=l[n].outerText,this.isCheckedItem[this.columnProperty][u]===!1&&(i=i.concat(this.isCheckedItem[this.columnProperty].hideArray),this.isCheckedItem[this.columnProperty][u]=!0)):(u=l[n].outerText,t=t.concat(this.columnRowList[u]),this.isCheckedItem[this.columnProperty][u]=!1);for(this.isCheckedItem[this.columnProperty].hideArray=t.slice(),o=this.$layout.find("tbody"),n=0,f=i.length;n<f;n++){this.isRowHidden[i[n]]="show";var s=this.datas[i[n]]["K-E-Y"],e=o.find("tr[data-key='"+s+"']"),a=e.length>0?e[0]:null;i[n]=a;this.dataCheckbox&&this.dataCheckbox.setAvailablePageCount(this.constValue.sectionType.tbody,this.constValue.checkBoxPropertyName,1)}for(i.length>0&&this.dataCheckbox&&this.dataCheckbox.executeCheckbox(this.constValue.sectionType.thead,this.constValue.checkBoxPropertyName,"0",!1,{isRunChange:!1,isRunComplete:!1}),n=0,f=t.length;n<f;n++){this.isRowHidden[t[n]]="hide";var s=this.datas[t[n]]["K-E-Y"],e=o.find("tr[data-key='"+s+"']"),a=e.length>0?e[0]:null;t[n]=a;this.dataCheckbox&&this.dataCheckbox.setAvailablePageCount(this.constValue.sectionType.tbody,this.constValue.checkBoxPropertyName,-1);this.dataCheckbox&&this.dataCheckbox.executeCheckbox(this.constValue.sectionType.tbody,this.constValue.checkBoxPropertyName,s,!1,{isRunChange:!1,isRunComplete:!1})}t[0]?r.hasClass("btn-default")&&(r.removeClass("btn-default"),r.addClass("btn-warning")):r.hasClass("btn-warning")&&(r.removeClass("btn-warning"),r.addClass("btn-default"));$(i).removeClass("hidden");$(t).addClass("hidden");this.getHideRowLength()},getHideRowLength:function(){this.hideCount=0;for(var n=0;n<this.isRowHidden.length;n++)this.isRowHidden[n]=="hide"&&this.hideCount++},show:function(){if(this.$parent.addClass("open"),this.isShow=!0,ecount.grid.constValue.isIE){var n=this.$el.width();this.$el.attr("style","width:"+n+"px;")}},hide:function(n){n&&$(n.target).parents().hasClass("dropdown-menu")||(this.$parent.removeClass("open"),this.isShow=!1,this.$el.remove())}});ecount.gridV2.setting=function(n){var r=ecount.grid.constValue,w=r.sectionType.thead,t=r.sectionType.tbody,d=r.sectionType.tfoot,it=_.get(window,"webmail.config")||_.get(ecount,"config.user"),kt=function(){if(ecount.gridV2.config.operateMode=="development"){if(n==undefined||n==null)return ecount.gridV2.util.notify("ecount.gridV2.setting 첫번째 인자를 설정하지 않았습니다."),!1;if(typeof n!="object"||n.constructor!=Object)return ecount.gridV2.util.notify("ecount.gridV2.setting 첫번째 인자는 object 형식입니다."),!1;if(!n.hasOwnProperty("events"))return ecount.gridV2.util.notify("ecount.gridV2.setting 인자의 속성 events 가 필요합니다."),!1;if(!(n.events instanceof ecount.events))return ecount.gridV2.util.notify("ecount.gridV2.setting 인자의 속성 events 는 ecount.events 객체여야 합니다."),!1}return!0},c,bt;if(kt()){this.events=n.events;this.eventsSet=function(n){return this.events=n,this};this.eventsGet=function(){return this.events};var s={common:{ecPageId:"",ecContainerName:"",ecTabId:"",ecGridId:"grid-main",ecGridUniqueId:"",parentPageId:"",alreadyIncludedLayout:"",useLoadingProgressbar:!0,isLazyInitializeOnLoad:!1,widgetInitializer:null,useTableResponsive:!0,isIgnoreResponsiveApplyType:!1,settingPanel:document,prefixIdIdx:null,prefixIdIdxReset:!1,detailSectionPrefixIdIdx:null,detailSectionPrefixIdIdxReset:!1,prefixRepeatColumnIdx:null,prefixRepeatColumnIdxReset:!1,useImageListTypeGrid:!1,useMergeAutoGenratorTotal:!1,parentGridEvent:null,parentGridEventArgs:null,containerId:"",container:null,gridType:"list",gridStyle:null,controlViewMode:r.controlViewMode.input,tableLayout:r.tableLayout.grid,tableRenderingDirection:r.tableRenderingDirection.horizontal,columnType:r.columnType.single,templateType:ecount.gridV2.render.template.horizontal,defaultTableClass:["table","table-bordered"],defaultTableRemoveClass:[],tbodyClassName:null,isSubtotalInitialAutomaticMergeSetting:!0,isPagetotalInitialAutomaticMergeSetting:!0,isTotalInitialAutomaticMergeSetting:!0,isRefreshForm:!1},layout:{header:null,contents:null,footer:null,containerSelector:null,container:null,$container:null,window:null,layer:null,$layer:null,bootstrapContainer:null,$bootstrapContainer:null,useEmailType:!1,printIframeArea:null},form:{type:r.formType.single,url:"/Common/Form/GetFormView",param:null,data:null,version:-1,layoutTemplateType:r.formLayoutTemplateType.normal},formOption:{bodyRowCount:null,bodyRowCount_default:0,isAppearTopAreaOnlyFirst:null,isAppearTopAreaOnlyFirst_default:!1,appearTopAreaOnlyFirstAddBodyRowCount:null,appearTopAreaOnlyFirstAddBodyRowCount_default:2,cutLinePosition:null,cutLinePosition_default:135.5,useCutLine:null,useCutLine_default:!0,secondTablePosition:null,secondTablePosition_default:145,topMargin:null,topMargin_default:0,bottomMargin:null,bottomMargin_default:0,leftMargin:null,leftMargin_default:0,rightMargin:null,rightMargin_default:0,pageWidth:null,pageWidth_default:0,pageHeight:null,pageHeight_default:0,pageWay:null,pageWay_default:"P",gridCountPerPage:null,gridCountPerPage_default:!1,useTop:null,useTop_default:!0,topOnly:null,topOnly_default:!1,useBody:null,useBody_default:!0,useBottom:null,useBottom_default:!0,headerTrHeight:null,headerTrHeight_default:0,rowTrHeight:null,rowTrHeight_default:-1,footerHeight:null,footerTrHeight_default:-1,borderRemoveVertical:null,borderRemoveVertical_default:!1,borderRemoveHorizontal:null,borderRemoveHorizontal_default:!1,removeEmptyLine:null,removeEmptyLine_default:!1,borderRemoveAll:null,borderRemoveAll_default:!1,gridDuplicationCount:null,gridDuplicationCount_default:1,prefixIdIdx:null,skipSecondGridInPage:!1,showPageNumber:!0,topBottomHTML:null,borderColor:null,showHeaderWithDetail:!1,rowTrHeightAdjust:0,gridIndex:1},table:{marginLeft:null,disableHover:!1,restrictedTime:!1,tableTagName:"table"},column:{sortable:!1,sortableReset:!0,sortOrder:"A",sortEnableList:null,sortDisableList:null,thead:{columns:[],formColumns:[],propertyColumnName:"",propertyColumnNormalize:"",customCell:null,dataConversionColumns:null,customEvent:null,resetRepeatCount:!1,repeatCount:-1,detailSectionDefaultValue:null},tbody:{columns:[],formColumns:[],propertyColumnName:"",propertyColumnNormalize:"",customCell:null,dataConversionColumns:null,customEvent:null,resetRepeatCount:!1,repeatCount:-1,detailSectionDefaultValue:null},tfoot:{columns:[],formColumns:[],propertyColumnName:"",propertyColumnNormalize:"",customCell:null,dataConversionColumns:null,customEvent:null,resetRepeatCount:!1,repeatCount:-1,detailSectionDefaultValue:null},generator:null,repeatGenerator:null,detailSectionGenerator:null,columnFixed:0,rowFixed:0,headFixed:!1,filter:null,sortDisplayPosition:{},isAllSortableReset:!1,visible:!0,canOverrideDataTypeInCustomRowCell:!1,isColumnFormWithStatic:!1,copyMergeInfo:!1},row:{thead:{datas:[],apiDatas:null,url:null,param:null,isWithColumn:!1,keyColumnIdList:null,makeKeyFn:null,additionalDatas:null,additionalDatasInForm:null,notContainRowType:null,showInputFakeOutLine:!1,isInitRowIndex:!1,isInitRowState:!1,initRowState:null,isShade:!1,shadeType:null,shadeMultiple:2,shadeCss:"tr-striped",trHeight:null,topSubtotal1MergeInfoRowTitle:null,topSubtotal2MergeInfoRowTitle:null,topSubtotal3MergeInfoRowTitle:null,topSubtotal4MergeInfoRowTitle:null,topSubtotal5MergeInfoRowTitle:null,bottomSubtotal1MergeInfoRowTitle:null,bottomSubtotal2MergeInfoRowTitle:null,bottomSubtotal3MergeInfoRowTitle:null,bottomSubtotal4MergeInfoRowTitle:null,bottomSubtotal5MergeInfoRowTitle:null,pageTotal1MergeInfoRowTitle:null,dataMergeInfoRowTitle:null,isVisibleTopSubtotal1Slip:!0,isVisibleTopSubtotal2Slip:!0,isVisibleTopSubtotal3Slip:!0,isVisibleTopSubtotal4Slip:!0,isVisibleTopSubtotal5Slip:!0,isVisibleTopSubtotal1:!0,isVisibleTopSubtotal2:!0,isVisibleTopSubtotal3:!0,isVisibleTopSubtotal4:!0,isVisibleTopSubtotal5:!0,isVisibleData:!0,isVisibleSlipData:!0,isVisibleBottomSubtotal1Slip:!0,isVisibleBottomSubtotal2Slip:!0,isVisibleBottomSubtotal3Slip:!0,isVisibleBottomSubtotal4Slip:!0,isVisibleBottomSubtotal5Slip:!0,isVisibleBottomSubtotal1:!0,isVisibleBottomSubtotal2:!0,isVisibleBottomSubtotal3:!0,isVisibleBottomSubtotal4:!0,isVisibleBottomSubtotal5:!0,isVisiblePageTotal1Slip:!0,isVisiblePageTotal1:!0},tbody:{datas:[],apiDatas:null,url:null,param:null,isWithColumn:!1,keyColumnIdList:null,makeKeyFn:null,additionalDatas:null,additionalDatasInForm:null,notContainRowType:null,dataUseFirst:!1,autoAddRowOnLastRow:!1,autoAddRowCount:10,autoAddRowMargin:2,showInputFakeOutLine:!0,isInitRowIndex:!1,isInitRowState:!1,initRowState:null,isShade:!1,shadeType:null,shadeMultiple:2,shadeCss:"tr-striped",trHeight:null,topSubtotal1MergeInfoRowTitle:null,topSubtotal2MergeInfoRowTitle:null,topSubtotal3MergeInfoRowTitle:null,topSubtotal4MergeInfoRowTitle:null,topSubtotal5MergeInfoRowTitle:null,bottomSubtotal1MergeInfoRowTitle:null,bottomSubtotal2MergeInfoRowTitle:null,bottomSubtotal3MergeInfoRowTitle:null,bottomSubtotal4MergeInfoRowTitle:null,bottomSubtotal5MergeInfoRowTitle:null,pageTotal1MergeInfoRowTitle:null,dataMergeInfoRowTitle:null,isVisibleTopSubtotal1Slip:!0,isVisibleTopSubtotal2Slip:!0,isVisibleTopSubtotal3Slip:!0,isVisibleTopSubtotal4Slip:!0,isVisibleTopSubtotal5Slip:!0,isVisibleTopSubtotal1:!0,isVisibleTopSubtotal2:!0,isVisibleTopSubtotal3:!0,isVisibleTopSubtotal4:!0,isVisibleTopSubtotal5:!0,isVisibleData:!0,isVisibleSlipData:!0,isVisibleBottomSubtotal1Slip:!0,isVisibleBottomSubtotal2Slip:!0,isVisibleBottomSubtotal3Slip:!0,isVisibleBottomSubtotal4Slip:!0,isVisibleBottomSubtotal5Slip:!0,isVisibleBottomSubtotal1:!0,isVisibleBottomSubtotal2:!0,isVisibleBottomSubtotal3:!0,isVisibleBottomSubtotal4:!0,isVisibleBottomSubtotal5:!0,isVisiblePageTotal1Slip:!0,isVisiblePageTotal1:!0},tfoot:{datas:[],apiDatas:null,url:null,param:null,isWithColumn:!1,keyColumnIdList:null,makeKeyFn:null,additionalDatas:null,additionalDatasInForm:null,notContainRowType:null,specialRowCount:0,showInputFakeOutLine:!1,isInitRowIndex:!1,isInitRowState:!1,initRowState:null,isShade:!1,shadeType:null,shadeMultiple:2,shadeCss:"tr-striped",trHeight:null,topSubtotal1MergeInfoRowTitle:null,topSubtotal2MergeInfoRowTitle:null,topSubtotal3MergeInfoRowTitle:null,topSubtotal4MergeInfoRowTitle:null,topSubtotal5MergeInfoRowTitle:null,bottomSubtotal1MergeInfoRowTitle:null,bottomSubtotal2MergeInfoRowTitle:null,bottomSubtotal3MergeInfoRowTitle:null,bottomSubtotal4MergeInfoRowTitle:null,bottomSubtotal5MergeInfoRowTitle:null,pageTotal1MergeInfoRowTitle:null,dataMergeInfoRowTitle:null,isVisibleTopSubtotal1Slip:!0,isVisibleTopSubtotal2Slip:!0,isVisibleTopSubtotal3Slip:!0,isVisibleTopSubtotal4Slip:!0,isVisibleTopSubtotal5Slip:!0,isVisibleTopSubtotal1:!0,isVisibleTopSubtotal2:!0,isVisibleTopSubtotal3:!0,isVisibleTopSubtotal4:!0,isVisibleTopSubtotal5:!0,isVisibleData:!0,isVisibleSlipData:!0,isVisibleBottomSubtotal1Slip:!0,isVisibleBottomSubtotal2Slip:!0,isVisibleBottomSubtotal3Slip:!0,isVisibleBottomSubtotal4Slip:!0,isVisibleBottomSubtotal5Slip:!0,isVisibleBottomSubtotal1:!0,isVisibleBottomSubtotal2:!0,isVisibleBottomSubtotal3:!0,isVisibleBottomSubtotal4:!0,isVisibleBottomSubtotal5:!0,isVisiblePageTotal1Slip:!0,isVisiblePageTotal1:!0}},widget:{},top:{html:null},header:{styleFontSize:null,styleFontSize_default:ecount.isMobile?it.FONT_SIZE_MOBILE_TYPCD=="B"?it.OUT_FONT_SIZE_DEFAULT:0:it.FONT_SIZE_PC_TYPCD=="B"?it.OUT_FONT_SIZE_DEFAULT:0,styleFontBold:null,styleFontBold_default:!1,styleFontItalic:null,styleFontItalic_default:!1,styleFontUnderline:null,styleFontUnderline_default:!1,styleFontStrike:null,styleFontStrike_default:!1,styleFontAlign:null,styleFontAlign_default:"center",styleFontVAlign:null,styleFontVAlign_default:"center",styleFont:null,styleFont_default:null,styleFontColor:null,styleFontColor_default:null},headerToolbar:{use:!1,leftHTML:"",rightHTML:""},editable:{use:!1,initialRowCount:10,initialRowCountMargin:2,specialRowMerge:[],specialRowKeepControlType:!1,editLimitAddRow:null,isClipboardMode:!1,exceptColumnCounter:0,clipboardKeyword:null,highlightHeader:!1},tree:{treeColumns:null,treeOpenOnInit:null,eventOnLabel:!1,eventDisable:!1,treeHideOnNoChild:!1,treeOpenOnInitCallback:null,sort:!0},event:{notFocusableCallback:null,triggerAfterRowDataLoadOnSetRowData:!1,clipboardCallback:null,useRightClick:!1,onAfterSelect:!1,onAfterInsertRow:!1,afterSelectInfo:null},keyboard:{useMoveCursor:!1,useMovePage:!1,continueMoveCursor:null,prevMoveCallback:null,nextMoveCallback:null},key:{keyColumn:null},checkbox:{displayMergeType:ecount.grid.constValue.displayCheckboxMegeType.merge,headerStyle:null,removeAfterRedraw:!0,isAfterRenderingUse:!1,useMultiCheck:!0,useMultiCheckBulk:!1,thead:{use:!1,items:{}},tbody:{use:!1,items:{}},tfoot:{use:!1,items:{}},fixCheckBox:!1},numbering:{use:!1,index:-1,accumulated:!0,headerStyle:{},thead:{sequenceIndex:1},tbody:{sequenceIndex:1},tfoot:{sequenceIndex:1}},rowmoveable:{use:!1,index:-1,isEventTrigger:!0,thead:{sequenceIndex:1},tbody:{sequenceIndex:1},tfoot:{sequenceIndex:1}},radio:{checkingDeterminer:null},shaded:{className:"text-primary-inverse "},foot:{count:0,styleFontSize:null,styleFontSize_default:ecount.isMobile?it.FONT_SIZE_MOBILE_TYPCD=="B"?it.OUT_FONT_SIZE_DEFAULT:0:it.FONT_SIZE_PC_TYPCD=="B"?it.OUT_FONT_SIZE_DEFAULT:0,styleFontBold:null,styleFontBold_default:!1,styleFontItalic:null,styleFontItalic_default:!1,styleFontUnderline:null,styleFontUnderline_default:!1,styleFontStrike:null,styleFontStrike_default:!1,styleFontAlign:null,styleFontAlign_default:"center",styleFontVAlign:null,styleFontVAlign_default:"center",styleFont:null,styleFont_default:null,styleFontColor:null,styleFontColor_default:null},footToolbar:{isShowPageNo:!0,leftHTML:"",rightHTML:""},fix:{columnHeader:!1,headFixed:!1,isCopyHeaderArea:!0,columnFixed:0,rowFixed:0,checkBoxFixed:!1,headerFix:!1},paging:{use:!1,rowCountPerPage:null,rowCountPerPagePreferManualSetting:!1,position:ecount.grid.constValue.pagingPosition.topLeftMost,useDefaultPageIndexChanging:!1,customPageIndexChangingCallback:null,currentPage:1,totalRowCount:0,totalRowCountSearchResult:0,backTrack:!0,backTrackCount:1,backTrackCountFinish:0,controlPosition:"left",controlData:{},isDisplayRowCount:!1,isDisplayRowCountWithPaging:!0,isUseCalendarStyle:!1,isDisplayMovePaging:!0,pagingHelper:null},matrixState:{use:!1},session:{createSessionLocationType:null,useGmcNotUseCN:!1,locationInfo:"",createURL:null,domain:null,param:{},sid:null},dropdown:{useDropdown:!1,dropdownList:null},drag:{use:!1,isPartitionPage:!1,type:"all",direction:"horizontal",disableColumns:null,isHeaderCalculation:!1,headerCalculationOption:{calculate:"minus"},isShowTotalSetupDragable:!1,totalSetupMenu:[],totalSetupOption:{},isShowTitleSetupDragable:!1,titleSetupMenu:[],titleSetupOption:{},titleSetupCallback:null,totalSetupCallback:null,dragCallback:null,moveCallback:null,dropCallback:null,dragTarget:null,dragableModule:null,moveMode:!1},outerVertical:{use:null},outerHorizontal:{use:null},contextmenu:{type:null,keys:null,instance:null,downloadMenuCallback:null,callback:null,contextmenuBeforeCallback:null,afterOnloadCompleteShow:!1,itemList:{thead:[{use:!1,label:"",value:"leftFixed"},{use:!1,label:"",value:"cancelLeftFixed"}],tbody:[{use:!1,value:"leftFixed"},{use:!1,value:"cancelLeftFixed"}],tfoot:[{use:!1,value:"leftFixed"},{use:!1,value:"cancelLeftFixed"}]}},resize:{use:!1,target:null,type:null,groupColumns:null,heightSections:null,enableColumns:null},selector:{use:!1,version:null,handlerVersion:null},merge:{use:!1,contextmenu:null},overlay:{use:null,showDelay:0,hideDelay:0}},f=s.common,h=s.layout,g=s.form,i=s.formOption,tt=s.table,e=s.column,u=s.row,ht=s.widget,dt=s.top,p=s.header,yt=s.headerToolbar,y=s.editable,b=s.tree,rt=s.event,k=s.keyboard,o=s.checkbox,ct=s.numbering,st=s.rowmoveable,ut=s.shaded,l=s.foot,lt=s.footToolbar,ft=s.fix,a=s.paging,gt=s.matrixState,ni=s.key,ot=s.session,pt=s.dropdown,v=s.drag,ui=s.widgetDrag,nt=s.contextmenu,et=s.resize,at=s.selector,wt=s.merge,ti=s.radio,ii=s.outerVertical,ri=s.outerHorizontal,vt=s.overlay;this.createGrid=function(n){var t=null;return $.isString(n)&&(t=ecount.gridV2(n,this)),t};this._setSettings=function(n){s=n};this._getSettings=function(){return s};this.clone=function(){var n=ecount.gridV2.settings(),t=Object.clone(s);return n._setSettings(t),n};this.getCommonPrefixIdIndex=function(){return f.prefixIdIdx};this.setCommonIsLazyInitializeOnLoad=function(n){return f.isLazyInitializeOnLoad=n===!0,!0};this.setCommonParentPageId=function(n){return f.parentEcPageId=n,this};this.getCommonParentPageId=function(){return f.parentEcPageId};this.setAlreadyIncludedLayout=function(n){return f.alreadyIncludedLayout=n,this};this.getAlreadyIncludedLayout=function(){return f.alreadyIncludedLayout};this.setCommonWidgetInitializer=function(n){return f.widgetInitializer=$.isFunction(n)?n:null,this};this.setCommonWidgetCallbackId=function(){};this.getCommonWidgetInitializer=function(){return f.widgetInitializer};this.setCommonUseTableResponsive=function(n,t){return f.useTableResponsive=n===!0,f.isIgnoreResponsiveApplyType=t===!0,this};this.setCommonSettingPanel=function(n){return f.settingPanel=n,this};this.setCommonPrefixIdIndex=function(n,t){return f.prefixIdIdx=n,f.prefixIdIdxReset=t===!0,this};this.setCommonDetailSectionPrefixIdIndex=function(n,t){return f.detailSectionPrefixIdIdx=n,f.detailSectionPrefixIdIdxReset=t===!0,this};this.setCommonPrefixRepeatColumnIndex=function(n,t){return f.prefixRepeatColumnIdx=n,f.prefixRepeatColumnIdxReset=t===!0,this};this.setCommonPopupLevel=function(n){return f.popupLevel=n,this};this.getCommonPopupLevel=function(){return f.popupLevel};this.setCommonPopupID=function(n){return f.popupId=n,this};this.getCommonPopupID=function(){return f.popupId};this.setCommonPopupType=function(n){return f.popupType=n,this};this.getCommonPopupType=function(){return f.popupType};this.setCommonEcIKey=function(n){return f.ecIKey=n,this};this.getCommonEcIKey=function(){return f.ecIKey};this.setCommonEcPageId=function(n){return f.ecPageId=n,this};this.getCommonEcPageId=function(){return f.ecPageId};this.setCommonEcContainerName=function(n){return f.ecContainerName=n,this};this.getCommonEcContainerName=function(){return f.ecContainerName};this.setCommonTabId=function(n){return f.ecTabId=n,this};this.getCommonTabId=function(){return f.ecTabId};this.setCommonUseProgressbar=function(n){return f.useLoadingProgressbar=n===!0,this};this.setCommonGridId=function(n){return f.ecGridId=n,this};this.getCommonGridId=function(){return f.ecGridId};this.setCommonGridUniqueId=function(n){return f.ecGridUniqueId=n,this};this.getCommonGridUniqueId=function(){return f.ecGridUniqueId};this.setCommonIsPossibleRenderOnLoad=function(n){return f.isPossibleRenderOnLoad=n===!0,this};this.getCommonIsPossibleRenderOnLoad=function(){return f.isPossibleRenderOnLoad===!0};this.setCommonTableLayout=function(n){if(![r.tableLayout.grid,r.tableLayout.table].contains(n)){ecount.gridV2.util.notify("table layout 으로 설정할 수 있는 값은 constValue.tableLayout.grid | constValue.tableLayout.table 입니다.");return}return r.tableLayout.table==n&&(ecount.gridV2.util.notify("table layout 을 table 로 설정할 경우 control view mode 는 native 으로 자동 설정 됩니다."),this.setControlViewMode(r.controlViewMode.native)),f.tableLayout=n,this};this.getCommonTableLayout=function(){return f.tableLayout};this.setCommonTableRenderingDirection=function(n){if(![r.tableRenderingDirection.horizontal,r.tableRenderingDirection.vertical].contains(n)){ecount.gridV2.util.notify("table rendering direction 으로 설정할 수 있는 값은 constValue.tableRenderingDirection.horizontal | constValue.tableRenderingDirection.vertical 입니다.");return}return f.tableRenderingDirection=n,this};this.getCommonTableRenderingDirection=function(){return f.tableRenderingDirection};this.setGridTypeColumnType=function(n){switch(n){case"columnFix":case"single":n=r.columnType.single;break;case"separate":case"separateSetting":case"multi":n=r.columnType.multi;break;default:n=r.columnType.single}if(![r.columnType.single,r.columnType.multi,r.columnType.each].contains(n)){ecount.gridV2.util.notify("column type 으로 사용할 수 있는 값은 constValue.columnType.single | constValue.columnType.multi | constValue.columnType.each 입니다.");return}return f.columnType=n,this};this.setCommonColumnType=this.setGridTypeColumnType;this.getGridTypeColumnType=function(){return f.columnType};this.getCommonColumnType=this.getGridTypeColumnType;this.setCommonControlViewMode=function(n){if([r.controlViewMode.native,r.controlViewMode.view,r.controlViewMode.input].contains(n)){ecount.gridV2.util.notify("control view mode 로 사용할 수 있는 값은 constValue.controlViewMode.native | constValue.controlViewMode.view | constValue.controlViewMode.input 입니다.");return}if(f.tableLayout==r.tableLayout.table&&![r.controlViewMode.view,r.controlViewMode.input].contains(n))throw"table layout 을 table 로 설정 후 control view mode 는 input 만 사용 가능합니다.";f.controlViewMode=n};this.getCommonControlViewMode=function(){return f.controlViewMode};this.setGridTypeRenderType=function(n){var t;switch(n){case r.gridRenderType.typeSpecTran:t=ecount.gridV2.render.template.typeSpecTran;break;case r.gridRenderType.typeSplitList:case r.gridRenderType.typeStatusList:t=ecount.gridV2.render.template.typeSplitList;this.setTableRemoveEmptyLine(!0);break;case r.gridRenderType.typeDetailList:case r.gridRenderType.salaryDetail:t=ecount.gridV2.render.template.typeDetailList;break;case r.gridRenderType.salaryPayrollBookList:t=ecount.gridV2.render.template.salaryPayrollBookList;break;case r.gridRenderType.salaryPrint:t=ecount.gridV2.render.template.salaryPrint;break;case r.gridRenderType.typeHorizonList:t=ecount.gridV2.render.template.typeHorizonList;break;case r.gridRenderType.formSetting:t=ecount.gridV2.render.template.formSetting;break;default:t=ecount.gridV2.render.template.horizontal}return f.renderType=n,f.templateType=t,this};this.setCommonRenderType=this.setGridTypeRenderType;this.getGridTypeRenderType=function(){return f.renderType};this.getCommonRenderType=this.getGridTypeRenderType;this.getCommonTemplateType=function(){return f.templateType};this.getCommonDefaultTableClass=function(){return f.defaultTableClass};this.addCommonTableClass=function(n){return n&&(_.isArray(n)||(n=[n]),f.defaultTableClass=f.defaultTableClass.concat(n)),this};this.removeCommonTableClass=function(n){return n&&(_.isArray(n)||(n=[n]),f.defaultTableRemoveClass=f.defaultTableRemoveClass.concat(n)),this};this.setCommonParentGridId=function(n){return f.parentGridId=n,this};this.setCommonGridType=function(n){return f.gridType=n||r.gridType.list,this};this.getCommonGridType=function(){return f.gridType};this.setIsRefreshForm=function(n){return f.isRefreshForm=n,this};this.setMergeAutoGenerateTotalMerge=function(n){return f.useMergeAutoGenratorTotal=n,this};this.setCommonAutoGenerateTotalMergeUse=this.setMergeAutoGenerateTotalMerge;this.setParentGridEvent=function(n,t){return f.parentGridEvent=n,f.parentGridEventArgs=t,this};this.setTbodyClassName=function(n){return typeof n=="string"&&(n=[n]),f.tbodyClassName?n.forEach(function(n){f.tbodyClassName.contains(n)||f.tbodyClassName.push(n)}):f.tbodyClassName=n,this};this.setSessionCreateLocationType=function(n,t,i){if(ot.createSessionLocationType=n,ot.locationInfo=t==undefined||t==null?"":t,i)this.setSessionDomain(i);else switch(t&&t.toUpperCase()){case"F":this.setSessionDomain(".ecount.cn");break;default:this.setSessionDomain(null)}return ecount.grid.constValue.locationType.GMC==n?this.setSessionCreateURL("/Common/Infra/MakeGMCSession"):ecount.grid.constValue.locationType.ZONE==n&&this.setSessionCreateURL("/Common/Infra/MakeZONESession"),this};this.setGMCNotUseCN=function(n){return ot.useGmcNotUseCN=n===!0,this};this.setSessionCreateURL=function(n){return ot.createURL=n,this};this.setSessionDomain=function(n){return ot.domain=n,this};this.setSessionParameter=function(n){return ot.param=n,this};this.setEventContainerObj=function(n){return n&&(n.nodeType?n.nodeType==HTMLElement.ELEMENT_NODE?(h.bootstrapContainer=n,h.$bootstrapContainer=$(n)):n.nodeType==HTMLElement.DOCUMENT_NODE&&(h.bootstrapContainer=document.body,h.$bootstrapContainer=$(document.body)):n instanceof $&&(h.bootstrapContainer=n[0],h.$bootstrapContainer=n)),this};this.setLayoutBootstrapContainer=this.setEventContainerObj;this.getEventContainerObj=function(){return h.bootstrapContainer};this.setEventProgressBarObj=function(n){return h.progressbar=n,this};this.setLayoutProgressBar=this.setEventProgressBarObj;this.getEventBodyDelegatorObj=function(){return h.window};this.setEventBodyDelegatorObj=function(n){return this.setLayoutWindow(n)};this.setEventBodyDelegatorObj=function(n){return h.window=n==document?window:n instanceof jQuery?n[0]:n,this.setLayoutLayer(n),this};this.setEventAfterSelect=function(n){return rt.onAfterSelect=n,this};this.setEventAfterInsertRow=function(n){return rt.onAfterInsertRow=n,this};this.setEventSelectInfo=function(n){return rt.afterSelectInfo=n,this};this.setLayoutLayer=function(n){return h.layer=arguments.length==0?h.window==window?document.body:h.window:n==document?document.body:n instanceof jQuery?n[0]:n,this.setLayoutLayer$($(h.layer)),this};this.setLayoutLayer$=function(n){return h.$layer=n,this};this.setPanelContainer=function(n){return h.panelContainer=n,this};this.getPanelContainer=function(){return h.panelContainer};this.setLayoutScrollContainer=function(n){return h.scrollContainer=n,this};this.getLayoutScrollContainer=function(){return h.scrollContainer};this.setLayoutHeader=function(n){return h.header=n,this};this.getLayoutHeader=function(){return h.header};this.setLayoutContents=function(n){return h.contents=n,this};this.getLayoutContents=function(){return h.contents};this.setLayoutContents$=function(n){return h.$contents=n,this};this.getLayoutContents$=function(){return h.$contents};this.setLayoutFooter=function(n){h.footer=n};this.getLayoutFooter=function(){return h.footer};this.setLayoutContainerSelector=function(n){return h.containerSelector=n,this};this.getLayoutContainerSelector=function(){return h.containerSelector};this.setLayoutContainer=function(n){return h.container=n,this};this.getLayoutContainer=function(){return h.container};this.setLayoutContainer$=function(n){return h.$container=n,this};this.getLayoutContainer$=function(){return h.$container};this.setSubLayoutLeft=function(n){return h.leftLayout=n,this};this.setLayoutLeftLayout=this.setSubLayoutLeft;this.setSubLayoutRight=function(n){return h.rightLayout=n,this};this.setLayoutRightLayout=this.setSubLayoutRight;this.setImageListTypeGrid=function(n){return n==!0?(f.useImageListTypeGrid=!0,f.templateType=ecount.gridV2.render.template.imageListTypeGrid,tt.tableTagName="ul"):(f.useImageListTypeGrid=!1,f.templateType=ecount.gridV2.render.template.horizontal,tt.tableTagName="table"),this};this.getFormIsAutoMergeSpecialrow=function(){if(f.gridType==r.gridType.editableForm)if(g.version==r.formVersion.third){if(f.columnType==r.columnType.single&&f.useMergeAutoGenratorTotal&&y.specialRowMerge&&y.specialRowMerge.length>0)return!0}else if(g.version==r.formVersion.fourth)if(f.columnType==r.columnType.single){if(f.useMergeAutoGenratorTotal&&y.specialRowMerge&&y.specialRowMerge.length>0)return!0}else if(f.columnType==r.columnType.multi&&f.useMergeAutoGenratorTotal&&y.specialRowMerge&&y.specialRowMerge.length>0)return!0;return!1};this.setFormSubtotalInitialAutomaticMergeSetting=function(n){return f.isSubtotalInitialAutomaticMergeSetting=n,this};this.setFormTotalInitialAutomaticMergeSetting=function(n){return f.isTotalInitialAutomaticMergeSetting=n,this};this.setFormType=function(n){arguments.length==0&&(sectionType=w);switch(n){case r.formType.single:g.url="/Common/Form/GetFormView";break;case r.formType.multi:g.url="/SVC/Common/Form/GetXFormTab";break;default:g.url="/Common/Form/GetFormView"}return g.type=n,this};this.setFormParameter=function(n){return g.param=n,g.data=null,this};this.setFormData=function(n){return g.data=n,g.param=null,this};this.setFormVersion=function(n){return[r.formVersion.second,r.formVersion.third,r.formVersion.fourth].contains(n)?(g.version=n,tt.tableTagName="table"):(g.version=-1,tt.tableTagName="table"),g.layoutTemplateType=[r.formVersion.fourth].contains(n)?r.formLayoutTemplateType.report:r.formLayoutTemplateType.normal,this};this.setFormLayoutTemplateType=function(n){return g.layoutTemplateType=n,this};this.setGridTypeTopBottomHTML=function(n){return i.topBottomHTML=n,this};this.setCommonFormOption=function(n){var e,o,s;return i.bodyRowCount===null&&(e=$.isNumber(n.bodyRowCnt)?$.parseNumber(n.bodyRowCnt):i.bodyRowCount_default,this.setCommonMaxRowCountPerGrid(e),e>0&&this.setFixGridColumn(0)),i.isAppearTopAreaOnlyFirst===null&&i.appearTopAreaOnlyFirstAddBodyRowCount===null&&(n.appearTopAreaOnlyFirst?(e=n.appearTopAreaOnlyFirst,o=n.useTopAreaOnlyFirstAddBodyRowCount||0):(e=i.isAppearTopAreaOnlyFirst_default,o=i.appearTopAreaOnlyFirstAddBodyRowCount_default),this.setCommonAppearTopAreaFirst(e,o)),i.isAppearBottomAreaLast===null&&i.appearBottomAreaLastAddBodyRowCount===null&&(n.appearBottomAreaOnlyLast?(e=n.appearBottomAreaOnlyLast,o=n.useBottomAreaOnlyLastAddBodyRowCount||0):(e=i.isAppearBottomAreaLast,o=i.appearBottomAreaLastAddBodyRowCount),this.setGridTypeAppearBottomAreaLast(e,o)),i.cutLinePosition===null&&(e=$.isNumber(n.dotLineHeight)?$.parseNumber(n.dotLineHeight):i.cutLinePosition_default,this.setGridTypeTableCutLinePosition(e)),i.useCutLine===null&&(e=$.isEmpty(n.dottedlineYn)?i.useCutLine_default:ecount.common.isTrue(n.dottedlineYn),this.setGridTypeUseTableCutLine(e)),i.secondTablePosition===null&&(e=$.isNumber(n.tMarginTwo)?$.parseNumber(n.tMarginTwo):i.secondTablePosition_default,this.setGridTypeSecondTablePosition(e),i.backupSecondTablePosition=e),i.topMargin===null&&(e=$.isEmpty(n.tMargin)?i.topMargin_default:n.tMargin||0,i.topMargin=$.isNumber(e)?parseFloat(e||0):0),i.bottomMargin===null&&(e=$.isEmpty(n.bMargin)?i.bottomMargin_default:n.bMargin||0,i.bottomMargin=$.isNumber(e)?parseFloat(e||0):0),i.leftMargin===null&&(e=$.isEmpty(n.lMargin)?i.leftMargin_default:n.lMargin||0,i.leftMargin=$.isNumber(e)?parseFloat(e||0):0),i.rightMargin===null&&(e=$.isEmpty(n.rMargin)?i.rightMargin_default:n.rMargin||0,i.rightMargin=$.isNumber(e)?parseFloat(e||0):0),i.pageWidth===null&&(e=$.isEmpty(n.width)?i.pageWidth_default:n.width||0,i.pageWidth=$.isNumber(e)?parseFloat(e||0):0),i.pageHeight===null&&(e=$.isEmpty(n.height)?i.pageHeight_default:n.height||0,i.pageHeight=$.isNumber(e)?parseFloat(e||0):0),i.pageWay===null&&(e=n.printWay?n.printWay:i.pageWay_default,i.pageWay=e),i.gridCountPerPage===null&&(e=$.isEmpty(n.sheetYn)?i.gridCountPerPage_default:!ecount.common.isTrue(n.sheetYn),this.setGridTypeMultipleGridPerPage(e)),i.useTop===null&&(e=$.isEmpty(n.useTop)?i.useTop_default:ecount.common.isTrue(n.useTop),this.setGridTypeUseTop(e),e===!1&&this.setGridTypeAppearTopAreaFirst(!1,0)),i.topOnly===null&&(e=$.isEmpty(n.onlyTopUseYn)?i.topOnly_default:ecount.common.isTrue(n.onlyTopUseYn),this.setGridTypeTopOnly(e)),i.useBody===null&&(e=$.isEmpty(n.useBody)?i.useBody_default:ecount.common.isTrue(n.useBody),this.setGridTypeUseBody(e)),i.useBottom===null&&(e=$.isEmpty(n.useBottom)?i.useBottom_default:ecount.common.isTrue(n.useBottom),this.setGridTypeUseBottom(e),e===!1&&this.setGridTypeAppearBottomAreaLast(!1,0)),u[w].trHeight===null&&(e=$.isNumber(n.headHeight)||$.isArray(n.headHeight)?n.headHeight:i.headerTrHeight_default,this.setGridTypeHeaderTrHeight(e)),u[t].trHeight===null&&(e=$.isNumber(n.bodyHeight)||$.isArray(n.bodyHeight)?n.bodyHeight:i.rowTrHeight_default,this.setGridTypeRowTrHeight(e)),u[d].trHeight===null&&(e=$.isNumber(n.footerHeight)||$.isArray(n.footerHeight)?n.footerHeight:i.footerTrHeight_default,this.setGridTypeFooterTrHeight(e)),i.removeEmptyLine===null&&(e=$.isEmpty(n.otherViewYn)?i.removeEmptyLine_default:ecount.common.isTrue(n.otherViewYn),this.setGridTypeRemoveEmptyLine(e)),i.borderRemoveVertical===null&&(e=$.isEmpty(n.verticalViewYn)?i.borderRemoveVertical_default:ecount.common.isTrue(n.verticalViewYn),this.setStyleBorderRemoveVertical(e)),i.borderRemoveHorizontal===null&&(e=$.isEmpty(n.horizontalViewYn)?i.borderRemoveHorizontal_default:ecount.common.isTrue(n.horizontalViewYn),this.setStyleBorderRemoveHorizontal(e)),i.borderRemoveAll===null&&(e=$.isEmpty(n.allViewYn)?i.borderRemoveAll_default:ecount.common.isTrue(n.allViewYn),this.setStyleBorderRemoveAll(e)),i.gridDuplicationCount===null&&(e=$.isEmpty(n.printNcnt)?$.isEmpty(n.isPrintTwice)?i.gridDuplicationCount_default:typeof n.isPrintTwice=="number"?n.isPrintTwice:typeof n.isPrintTwice=="boolean"?n.isPrintTwice===!0?2:1:i.gridDuplicationCount_default:typeof n.printNcnt=="number"?n.printNcnt:i.gridDuplicationCount_default,this.setGridTypeDuplicate(e)),f.prefixIdIdx==null&&(e=$.isNumber(n.tempColumnCount)?n.tempColumnCount:0,this.setCommonPrefixIdIndex(e,!0)),f.isIgnoreResponsiveApplyType||(ecount.grid.parent.ecount&&ecount.grid.parent.ecount.user&&ecount.grid.parent.ecount.user.RESPONSIVE_TYPE_TEMP=="W"?this.setCommonUseTableResponsive(!0):ecount.grid.parent.ecount&&ecount.grid.parent.ecount.user&&ecount.grid.parent.ecount.user.RESPONSIVE_TYPE_TEMP=="L"?this.setCommonUseTableResponsive(!1):(s=ecount.getConfig("RESPONSIVE_APPLY_TYPE"),s==="W"?this.setCommonUseTableResponsive(!0):s==="L"&&this.setCommonUseTableResponsive(!1))),$.isNumber(n.bdLMargin)&&this.setTableMarginLeft(n.bdLMargin),i.isShowPageNo=n.isShowPageNo!==!1,i.isShowPrintDate=n.isShowPrintDate!==!1,p.styleFontSize===null&&(e=$.isEmpty(n.headFontSize)?p.styleFontSize_default:n.headFontSize,this.setHeaderStyleFontSize(e)),p.styleFontBold===null&&(e=$.isEmpty(n.headFontBold)?p.styleFontBold_default:ecount.common.isTrue(n.headFontBold),this.setHeaderStyleFontBold(e)),p.styleFontItalic===null&&(e=$.isEmpty(n.headFontItalic)?p.styleFontItalic_default:ecount.common.isTrue(n.headFontItalic),this.setHeaderStyleFontItalic(e)),p.styleFontStrike===null&&(e=$.isEmpty(n.headFontStrike)?p.styleFontStrike_default:ecount.common.isTrue(n.headFontStrike),this.setHeaderStyleFontStrike(e)),p.styleFontUnderline===null&&(e=$.isEmpty(n.headFontUnderline)?p.styleFontUnderline_default:ecount.common.isTrue(n.headFontUnderline),this.setHeaderStyleFontUnderline(e)),p.styleFontAlign===null&&(e=$.isEmpty(n.headHAlign)?p.styleFontAlign_default:n.headHAlign,this.setHeaderStyleFontHorizontalAlign(e)),p.styleFontVAlign===null&&(e=$.isEmpty(n.headVAlign)?p.styleFontVAlign_default:n.headVAlign,this.setHeaderStyleFontVerticalAlign(e)),l.styleFontSize===null&&(e=$.isEmpty(n.totalFontSize)?l.styleFontSize_default:n.totalFontSize,this.setFootStyleFontSize(e)),l.styleFontBold===null&&(e=$.isEmpty(n.totalFontBold)?l.styleFontBold_default:ecount.common.isTrue(n.totalFontBold),this.setFootStyleFontBold(e)),l.styleFontItalic===null&&(e=$.isEmpty(n.totalFontItalic)?l.styleFontItalic_default:ecount.common.isTrue(n.totalFontItalic),this.setFootStyleFontItalic(e)),l.styleFontStrike===null&&(e=$.isEmpty(n.totalFontStrike)?l.styleFontStrike_default:ecount.common.isTrue(n.totalFontStrike),this.setFootStyleFontStrike(e)),l.styleFontUnderline===null&&(e=$.isEmpty(n.totalFontUnderline)?l.styleFontUnderline_default:ecount.common.isTrue(n.totalFontUnderline),this.setFootStyleFontUnderline(e)),l.styleFontAlign===null&&(e=$.isEmpty(n.totalHAlign)?l.styleFontAlign_default:n.totalHAlign,this.setFootStyleFontHorizontalAlign(e)),l.styleFontVAlign===null&&(e=$.isEmpty(n.totalVAlign)?l.styleFontVAlign_default:n.totalVAlign,this.setFootStyleFontVerticalAlign(e)),l.styleFont===null&&(e=$.isEmpty(n.totalFont)?l.styleFont_default:n.totalFont,this.setFootStyleFont(e)),l.styleFontColor===null&&(e=$.isEmpty(n.totalFontColor)?l.styleFontColor_default:n.totalFontColor,this.setFootStyleFontColor(e)),f.renderType==r.gridRenderType.typeStatusList&&(this.setFootToolbarIsShowPageNo(n.isShowPageNo!==!1),this.setFootToolbarIsShowPrintDate(n.isShowPrintDate!==!1)),n.borderColor&&this.setTableStyleBorderColor(n.borderColor),n.showHeaderWithDetail&&this.setGridTypeHeaderWithDetail(n.showHeaderWithDetail),this};this.setGridTypeMaxRowCountPerGrid=function(n){return i.bodyRowCount=$.isNumber(n)?n:null,this};this.setCommonMaxRowCountPerGrid=this.setGridTypeMaxRowCountPerGrid;this.getCommonMaxRowCountPerGrid=function(){return i.bodyRowCount};this.setGridTypeAppearTopAreaFirst=function(n,t){i.isAppearTopAreaOnlyFirst=$.isBoolean(n)?n:null;$.isNumber(t)&&(i.appearTopAreaOnlyFirstAddBodyRowCount=t)};this.setCommonAppearTopAreaFirst=this.setGridTypeAppearTopAreaFirst;this.setGridTypeTopOnly=function(n){return i.topOnly=n===!0?!0:n===!1?!1:null,this};this.setCommonTopOnly=this.setGridTypeTopOnly;this.getCommonTopOnly=function(){return i.topOnly};this.setGridTypeUseTop=function(n){return i.useTop=n===!0?!0:n===!1?!1:null,this};this.setGridTypeUseBody=function(n){return i.useBody=n===!0?!0:n===!1?!1:null,this};this.setGridTypeUseBottom=function(n){return i.useBottom=n===!0?!0:n===!1?!1:null,this};this.setGridTypeAppearBottomAreaLast=function(n,t){return i.isAppearBottomAreaLast=$.isBoolean(n)?n:null,$.isNumber(t)&&(i.appearBottomAreaLastAddBodyRowCount=t),this};this.setCommonAppearBottomAreaLast=this.setGridTypeAppearBottomAreaLast;this.getCommonIsAppearTopAreaFirst=function(){return i.isAppearTopAreaOnlyFirst};this.getCommonAppearTopAreaOnlyFirstAddBodyRowCount=function(){return i.appearTopAreaOnlyFirstAddBodyRowCount};this.setGridTypeMultipleGridPerPage=function(n){return i.gridCountPerPage=n===!0?2:n===!1?1:null,this};this.setCommonMultipleGridPerPage=this.setGridTypeMultipleGridPerPage;this.setGridTypeDetailGridSettings=function(n,t,r){var u,f;if(arguments.length===2&&$.isBoolean(arguments[1])&&(r=t,t=null),n){for($.isArray(n)||(n=[n]),i.detailGridSettings=[],u=0;u<n.length;u++)f=n[u],t=t||ecount.grid.constValue.gridRenderType.typeDetailList,f.setGridTypeShowDetailItems(!0),f.setGridTypeRenderType(t),i.detailGridSettings.push(f);i.useOuterDetailGrid=r===!0}return this};this.setGridTypeShowDetailItems=function(n){return i.showDetailItems=n===!0,this};this.setGridTypeHeaderHtmlCallback=function(n){return i.headerHtmlCallback=$.isFunction(n)?n:null,this};this.setGridTypeFooterHtmlCallback=function(n){return i.footerHtmlCallback=$.isFunction(n)?n:null,this};this.setGridTypeAdjustRowHeight=function(n){return i.rowTrHeightAdjust=n===!0?1:0,this};this.setGridTypeUsePaging=function(n){return i.usePaging=n===!0,this};this.setGridTypeShowPageNumber=function(n){return i.showPageNumber=n===!0,this};this.setGridTypeSkipSecondGridInPage=function(n){return i.skipSecondGridInPage=n===!0,this};this.setGridTypeTableCutLinePosition=function(n){return i.cutLinePosition=$.isNumber(n)?n:null,this};this.setGridTypeUseTableCutLine=function(n){return i.useCutLine=n===!0,this};this.setGridTypeSecondTablePosition=function(n){return i.secondTablePosition=$.isNumber(n)?n:null,this};this.setGridTypeDuplicate=function(n){return typeof n=="number"||(n=typeof n=="boolean"?n===!0?2:1:1),i.gridDuplicationCount=n,this};this.setGridTypeUseFormPrint=function(n){return i.useFormPrint=n===!0,i.rowTrHeightAdjust=n===!0?0:1,this};this.setStyleBorderRemoveVertical=function(n){return i.borderRemoveVertical=n,this};this.setTableStyleRemoveVertical=this.setStyleBorderRemoveVertical;this.setStyleBorderRemoveHorizontal=function(n){return i.borderRemoveHorizontal=n,this};this.setTableStyleRemoveBorderHorizontal=this.setStyleBorderRemoveHorizontal;this.setStyleBorderRemoveAll=function(n){return i.borderRemoveAll=n,n&&(i.borderRemoveHorizontal=!1,i.borderRemoveVertical=!1),this};this.setTableStyleRemoveBorderAll=this.setStyleBorderRemoveAll;this.setTableStyleBorderColor=function(n){return n!=undefined&&$.isString(n)&&(i.borderColor=n),this};this.setStyleDisableTableHover=function(n){return tt.disableHover=n===!0,this};this.setTableStyleDisableHover=this.setStyleDisableTableHover;this.getTableStyleDisableHover=function(){return tt.disableHover};this.setStylerestrictedTime=function(n){return tt.restrictedTime=n===!0,this};this.setTableStyleRestrictedTime=this.setStylerestrictedTime;this.getTableStyleRestrictedTime=function(){return tt.restrictedTime};this.setGridTypeRemoveEmptyLine=function(n){return i.removeEmptyLine=n,this};this.setTableRemoveEmptyLine=this.setGridTypeRemoveEmptyLine;this.setStyleBorderRemoveLeftRight=function(n){return tt.removeBorderLeftRight=n,this};this.setTableStyleRemoveBorderLeftRight=this.setStyleBorderRemoveLeftRight;this.setTableMarginLeft=function(n){return tt.maringLeft=n,this};this.setColumnGenerator=function(n){return e.generator=n,this};this.setColumnRepeatGenerator=function(n){return e.repeatGenerator=n,this};this.setColumnDetailSectionGenerator=function(n){return e.detailSectionGenerator=n,this};this.setColumns=function(n,t,i){return arguments.length==1?(t=arguments[0],i=!1,n=w):arguments.length==2&&(typeof arguments[0]=="string"?(t=arguments[1],n=arguments[0],i=!0):(i=arguments[1],t=arguments[0],n=w)),e[n].columns=t,this};this.getColumns=function(n){return e[n].columns};this.setColumnsByForm=function(n,t,i){return e[n].formColumns=t,e[n].isClone=i,this};this.setColumnsHeaderSettings=function(n,t){return(t==undefined||t==null)&&(t=!1),this.setColumns(w,n,t)};this.setColumnsBodySettings=function(n,i){return(i==undefined||i==null)&&(i=!1),this.setColumns(t,n,i)};this.setColumnsFooterSettings=function(n,t){return(t==undefined||t==null)&&(t=!1),this.setColumns(d,n,t)};this.setColumnPropertyColumnName=function(n,i){return arguments.length==1?(i=arguments[0],e[w].propertyColumnName=i,e[t].propertyColumnName=i,e[d].propertyColumnName=i):e[n].propertyColumnName=i,this};this.setColumnPropertyNormalize=function(n){var r=[w,t,d],i,u;for(typeof n=="boolean"?n=n?"LOWER":"UPPER":typeof n=="string"&&(n=n.toUpperCase()),i=0,u=r.length;i<u;i++)e[r[i]].propertyColumnNormalize=n;return this};this.setUseSortColumns=function(n){e.sortable=n};this.setColumnSortable=function(n){return e.useAllSortColumns=n,this.setUseSortColumns(!0),this.setColumnSortableReset(!0),this};this.getColumnSortableUse=function(){return e.sortable};this.setColumnSortableReset=function(n){return e.sortableReset=n,this};this.getColumnSortableReset=function(){return e.sortableReset};this.getColumnSortEnableList=function(){return e.sortEnableList};this.getColumnSortDisableList=function(){return e.sortDisableList};this.setColumnSortAscending=function(n){return e.sortOrder=n?"D":"A",this};this.getColumnSortAscending=function(){return e.sortOrder};this.setColumnSortDisableList=function(n){return n==null||n==undefined?e.sortDisableList=n:(typeof n=="string"&&(n=[n]),e.sortDisableList=n),this};this.setColumnSortlist=function(n){return n==null||n==undefined||n.length==0||n==""?(e.sortEnableList=n,this.setUseSortColumns(!1)):(typeof n=="string"&&(n=[n]),this.setUseSortColumns(!0),e.sortEnableList=n),this};this.setColumnSortEnableList=this.setColumnSortlist;this.setColumnSortExecuting=function(n){return e.sortExecute=n,this};this.setColumnFilterPosition=function(n,t){return e.sortDisplayPosition[n]=t,this};this.setResetAllColumnSortableState=function(n){return e.isAllSortableReset=n,this};this.setColumnVisible=function(n){return e.visible=n===!0,this};this.setResetMergedColumnCallback=function(n){return e.resetMergedColumnCallback=n,this};this.setCustomRowCell=function(n,i,r){return arguments.length==2&&(r=arguments[1],i=arguments[0],n=t),i=i&&i.toLowerCase(),e[n].customCell||(e[n].customCell={}),e[n].customCell[i]=r,this};this.setColumnCustomCell=this.setCustomRowCell;this.setColumnRowCustom=function(n,t,i){return arguments.length==2&&(i=arguments[1],t=arguments[0],n=w),e[n].duplicationPoint=$.isArray(t)?t.toArray():[],e[n].columnRowsObject=$.isArray(i)?i.toArray():[],this};this.setColumnCustomEvent=function(n,i,r){return arguments.length==2&&(r=arguments[1],i=arguments[0],n=t),i=i&&i.toLowerCase(),e[n].customEvent||(e[n].customEvent={}),e[n].customEvent[i]=r,this};this.setCustomColumnCell=function(n,t,i){return arguments.length==2&&(i=arguments[1],t=arguments[0],n=w),this.setColumnCustomCell(n,t,i)};this.setColumnOverrideDataTypeInCustomRowCell=function(n){return e.canOverrideDataTypeInCustomRowCell=n===!0,this};this.setColumnDefaultValue=function(n,i){var f=[w,t,d],r,u;for(arguments.length==1&&(i=arguments[0],n=f),r=0,u=n.length;r<u;r++)e[n[r]].defaultValue=i;return this};this.setColumnDetailSectionDefaultValue=function(n,i){var f=[w,t,d],r,u;for(arguments.length==1&&(i=arguments[0],n=f),r=0,u=n.length;r<u;r++)e[n[r]].detailSectionDefaultValue=i;return this};this.setColumnsAutoSetting=function(n,i){var r=t;return e[r].isAutoCalculate=n?!0:!1,e[r].autoCalculate=n,e[r].initAutoCalculcate=i,this};this.setColumnAutoSetting=this.setColumnsAutoSetting;this.setEditSpecialRowAutoSetting=function(n){var t=d;return e[t].isAutoCalculate=n?!0:!1,e[t].autoCalculate=n,this};this.setColumnSpecialrowAutoSetting=this.setEditSpecialRowAutoSetting;this.setColumnMoveCursorType=function(n,t){return e[n].moveCursorType=t,this};this.setCopyHeaderMergeInfo=function(n){return e.copyMergeInfo=n===!0,this};this.setHeaderCopyMergeInfo=this.setCopyHeaderMergeInfo;this.setGridFormWithStaticColumn=function(n){return e.isColumnFormWithStatic=n==!0,this};this.setColumnFilter=function(n){return e.filter=n,this};this.setColumnFilterDisableList=function(n){return e.filterDisableList=n,this};this.setColumnFilterEnableList=function(n){return e.filterEnableList=n,this};this.setColumnMoveCursorType=function(n,t){return e[n].moveCursorType=t,this};this.setColumnDataConversionColumns=function(n,i){return arguments.length==1&&(n=t),e[n].dataConversionColumns=i,this};this.setColumnRepeat=function(n,i){var r,u,f;for(arguments.length==1?(i=arguments[0],r=[w,t,d]):r=[n],u=0,f=r.length;u<f;u++)e[r[u]].resetRepeatCount=e[r[u]].repeatCount!=i,e[r[u]].repeatCount=$.isNumber(i)?parseInt(i,10):i;return this};this.setColumnOverflowThousandMessage=function(n){return e.overflowThousnadMessage=n,this};this.setMergeOverflowThousandMessage=function(){return this};this.setRowData=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].dataUseFirst=!0,u[n].datas=i!=null&&i!=undefined&&$.isArray(i)?i:[],this};this.setDataVisible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleData=i===!0,this};this.setDataSlipVisible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleSlipData=i===!0,this};this.setTopSubtotal1SlipVisible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleTopSubtotal1Slip=i===!0,this};this.setTopSubtotal2SlipVisible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleTopSubtotal2Slip=i===!0,this};this.setTopSubtotal3SlipVisible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleTopSubtotal3Slip=i===!0,this};this.setTopSubtotal4SlipVisible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleTopSubtotal4Slip=i===!0,this};this.setTopSubtotal5SlipVisible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleTopSubtotal5Slip=i===!0,this};this.setTopSubtotal1Visible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleTopSubtotal1=i===!0,this};this.setTopSubtotal2Visible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleTopSubtotal2=i===!0,this};this.setTopSubtotal3Visible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleTopSubtotal3=i===!0,this};this.setTopSubtotal4Visible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleTopSubtotal4=i===!0,this};this.setTopSubtotal5Visible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleTopSubtotal5=i===!0,this};this.setBottomSubtotal1SlipVisible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleBottomSubtotal1Slip=i===!0,this};this.setBottomSubtotal2SlipVisible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleBottomSubtotal2Slip=i===!0,this};this.setBottomSubtotal3SlipVisible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleBottomSubtotal3Slip=i===!0,this};this.setBottomSubtotal4SlipVisible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleBottomSubtotal4Slip=i===!0,this};this.setBottomSubtotal5SlipVisible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleBottomSubtotal5Slip=i===!0,this};this.setBottomSubtotal1Visible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleBottomSubtotal1=i===!0,this};this.setBottomSubtotal2Visible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleBottomSubtotal2=i===!0,this};this.setBottomSubtotal3Visible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleBottomSubtotal3=i===!0,this};this.setBottomSubtotal4Visible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleBottomSubtotal4=i===!0,this};this.setBottomSubtotal5Visible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisibleBottomSubtotal5=i===!0,this};this.setPageTotal1SlipVisible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisiblePageTotal1Slip=i===!0,this};this.setPageTotal1Visible=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isVisiblePageTotal1=i===!0,this};this.setRowApiData=function(n,i){return arguments.length==1&&(n=t),u[n].apiDatas=i,this};this.setRowDataUrl=function(n,i,r){return arguments.length==1&&(i=arguments[0],n=t),arguments.length==2&&(r=arguments[1],i=arguments[0],n=t),(r==null||r==undefined)&&(r=!1),u[n].url=i,u[n].isWithColumn=r,this};this.setRowDataParameter=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].param=i,this};this.setKeyColumn=function(n,i,r){return arguments.length==1?(i=arguments[0],r=null,n=t):arguments.length==2&&typeof arguments[0]=="object"&&arguments[0].constructor==Array&&typeof arguments[1]=="function"&&(r=arguments[1],i=arguments[0],n=t),typeof i=="string"&&(i=[i]),u[n].keyColumnIdList=i,u[n].makeKeyFn=r,ni.keyColumn=i,this};this.setRowKeyColumns=this.setKeyColumn;this.setRowDataSkipRowLine=function(n,i){var r,f,e;for(arguments.length==1?(r=[],i=arguments[0],n=t,r.push(t),r.push(d)):($.isString(n)&&(n=[n]),r=n),f=0,e=r.length;f<e;f++)u[r[f]].skipRowLineRule=i;return this};this.setEmptyGridMessage=function(n){var i=t;return u[i].emptyMessage=n,this};this.setRowDataEmptyMessage=this.setEmptyGridMessage;this.setRowTopSubtotal1MergeInfoRowTitle=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].topSubtotal1MergeInfoRowTitle=i,this};this.setRowTopSubtotal2MergeInfoRowTitle=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].topSubtotal2MergeInfoRowTitle=i,this};this.setRowTopSubtotal3MergeInfoRowTitle=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].topSubtotal3MergeInfoRowTitle=i,this};this.setRowTopSubtotal4MergeInfoRowTitle=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].topSubtotal4MergeInfoRowTitle=i,this};this.setRowTopSubtotal5MergeInfoRowTitle=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].topSubtotal5MergeInfoRowTitle=i,this};this.setRowBottomSubtotal1MergeInfoRowTitle=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].bottomSubtotal1MergeInfoRowTitle=i,this};this.setRowBottomSubtotal2MergeInfoRowTitle=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].bottomSubtotal2MergeInfoRowTitle=i,this};this.setRowBottomSubtotal3MergeInfoRowTitle=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].bottomSubtotal3MergeInfoRowTitle=i,this};this.setRowBottomSubtotal4MergeInfoRowTitle=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].bottomSubtotal4MergeInfoRowTitle=i,this};this.setRowBottomSubtotal5MergeInfoRowTitle=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].bottomSubtotal5MergeInfoRowTitle=i,this};this.setRowPageTotal1MergeInfoRowTitle=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].pageTotal1MergeInfoRowTitle=i,this};this.setRowDataMergeInfoRowTitle=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].dataMergeInfoRowTitle=i,this};this.setRowDefaultValue=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].defaultValue=i,this};this.setRowDataSample=function(n,i){return arguments.length==1?(i=arguments[0],n=t,u[t].additionalDatas=i,u[d].additionalDatas=Object.clone(i,!0),this):(u[n].additionalDatas=Object.clone(i,!0),this)};this.setEditRowDataSample=function(n,i,r){return arguments.length==1?(i=arguments[0],n=t,u[t].additionalDatas=i,u[d].additionalDatas=Object.clone(i,!0),u[t].notContainRowType=null,u[d].notContainRowType=null):arguments.length==2?(r=arguments[1],i=arguments[0],r=r==null||r==undefined?[]:r,u[t].additionalDatas=i,u[d].additionalDatas=Object.clone(i,!0),u[t].notContainRowType=r,u[d].notContainRowType=Object.clone(r,!0)):u[n].additionalDatas=i,this};this.setRowAdditionalDatas=this.setRowDataSample;this.setEditSpecialRowCount=function(n){var t=d;return u[t].specialRowCount=parseInt(n,10)||0,this};this.setRowSpecialRowCount=this.setEditSpecialRowCount;this.setStyleRowBackgroundColor=function(n,i,r){return arguments.length==2?(r=arguments[1],i=arguments[0],n=t):arguments.length==1&&(i=arguments[0],n=t),typeof i=="function"?(u[n].styleBackgroundColorDeterminer=i,u[n].styleBackgroundColor=r):(u[n].styleBackgroundColorDeterminer=null,u[n].styleBackgroundColor=""),this};this.setRowStyleBackgroundColor=this.setStyleRowBackgroundColor;this.setRowClassName=function(n,t){return this.setStyleRowBackgroundColor(n,t,"")};this.setStyleBoldOnMergeRow=function(n,i){var f,r,e;for(arguments.length==1&&(i=arguments[0],f=[w,t]),r=0,e=f.length;r<e;r++)u[f[r]].styleBoldOnMergeRow=i===!0;return this};this.setRowStyleBoldOnMergeRow=this.setStyleBoldOnMergeRow;this.setEditRowShowInputOutLine=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].showInputFakeOutLine=i===!0||i===!1||i==="activeRow"?i:!0,this};this.setRowEditShowInputOutLine=this.setEditRowShowInputOutLine;this.setRowShade=function(n,i,f,e){return arguments.length==1?(i=arguments[0],f=null,e=null,n=t):arguments.length==2?(f=arguments[1],i=arguments[0],e=null,n=t):arguments.length==3&&(e=arguments[2],f=arguments[1],i=arguments[0],n=t),u[n].isShade=i,i&&(u[n].shadeType=r.shadeType.multi),$.isNumber(f)&&(u[n].shadeMultiple=f),e!=undefined&&e!=null&&(u[n].shadeCss=e),this};this.setRowShadeByCustom=function(n,i,f){arguments.length==2&&(f=arguments[1],i=arguments[0],n=t);u[n].isShade=i;i&&(u[n].shadeType=r.shadeType.custom);typeof f=="function"&&(u[n].shadeCallback=f)};this.setRowTrHeight=function(n,t){return u[n].trHeight=$.isArray(t)?t:$.isNumber(t)?[t]:null,this};this.setGridTypeHeaderTrHeight=function(n){return this.setRowTrHeight(w,n)};this.setGridTypeRowTrHeight=function(n){return this.setRowTrHeight(t,n)};this.setGridTypeFooterTrHeight=function(n){return this.setRowTrHeight(d,n)};this.setRowInitRowIndex=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isInitRowIndex=i,this};this.setRowInitRowState=function(n,i){return arguments.length==1&&(i=arguments[0],n=t),u[n].isInitRowState=i,u[n].initRowState=ecount.grid.constValue.rowState.create,this};this.setRowEmptyRowMergeInfo=function(n){return u[t].emptyRowMergeInfo=n,this};this.setEventAutoAddRowOnLastRow=function(n,i,r){var f=t;return n?(u[f].autoAddRowOnLastRow=!0,u[f].autoAddRowCount=i||10,u[f].autoAddRowMargin=r||2):u[f].autoAddRowOnLastRow=!1,this};this.setRowAutoAddRowOnLastRow=this.setEventAutoAddRowOnLastRow;this.setColumnAutoAddColumnOnLastColumn=function(n,t,i){return n?(e.autoAddColumnOnLastColumn=!0,e.autoAddColumnCount=t||2,e.autoAddColumnMargin=i||2,e.addedColumnCount=0):e.autoAddColumnOnLastColumn=!1,this};this.setColumnHeaderAddInfo=function(n){return sectionType=w,$.isFunction(n)&&(e.autoAddColumnInfo||(e.autoAddColumnInfo={}),e.autoAddColumnInfo[sectionType]=n),this};this.setColumnBodyAddInfo=function(n){return sectionType=t,$.isFunction(n)&&(e.autoAddColumnInfo||(e.autoAddColumnInfo={}),e.autoAddColumnInfo[sectionType]=n),this};this.setColumnFooterAddInfo=function(n){return sectionType=d,$.isFunction(n)&&(e.autoAddColumnInfo||(e.autoAddColumnInfo={}),e.autoAddColumnInfo[sectionType]=n),this};this.setMatrixStateUse=function(n){return gt.use=n,this};this.setEditable=function(n,t,i){return n?(y.use=n,this.setCommonGridType(r.gridType.editable),y.initialRowCount=typeof t=="number"?t:10,y.initialRowCountMargin=typeof i=="number"?i:2):(this.setCommonGridType(r.gridType.list),y.initialRowCount=10,y.initialRowCountMargin=2),this};this.setEditSpecialRowKeepControlType=function(n){return y.specialRowKeepControlType=n===!0,this};this.setCommonGridStyle=function(n){var t=n==r.gridStyle.tree?!0:!1;return f.gridStyle=n||"",this.setCheckBoxOriginalStyle(t),this};this.getEditable=function(){return f.gridType==r.gridType.editable};this.setEditSpecialRowMerge=function(n){return y.specialRowMerge=$.isArray(n)?n.toArray():[],this};this.setEditLimitAddRow=function(n){return y.editLimitAddRow=$.isNumber(n)?n:null,this};this.setColumnEditLimitAddColumn=function(n){return y.editLimitAddColumn=$.isNumber(n)?n:null,this};this.setLimitAddRowCallback=function(n){return y.limitAddRowCallback=$.isFunction(n)?n:null,this};this.setEditClipboardMode=function(n,t){return y.isClipboardMode=n===!0,y.exceptColumnCounter=t,this};this.setClipboardLineKeyword=function(n){return y.clipboardKeyword=n,this};this.setEditableUseViewMode=function(n){return y.useViewMode=n===!0,this};this.setEditableHighlightHeader=function(n){return y.highlightHeader=n===!0,this};this.setStyleTreeGrid=function(n,t){return typeof t==null||typeof t==undefined?t=[]:typeof t=="string"&&(t=[t]),n===!0?(this.setCommonGridStyle(r.gridStyle.tree),b.treeColumns=t):b.treeColumns=null,this};this.setTreeGrid=this.setStyleTreeGrid;this.setStyleTreeEventDisable=function(n){return b.eventDisable=n===!0,this};this.setTreeEventDisable=this.setStyleTreeEventDisable;this.setStyleTreeEventOnLabel=function(n){return b.eventOnLabel=n,this};this.setTreeEventOnLabel=this.setStyleTreeEventOnLabel;this.setStyleTreeHideOnNoChild=function(n){return b.treeHideOnNoChild=n===!0,this};this.setTreeHideOnNoChild=this.setStyleTreeHideOnNoChild;this.setStyleTreeOpenOnInit=function(n){if(b.treeOpenOnInit=n===!1?0:typeof n=="number"?n>=0?n:0:n.constructor==Array?n:n=="upper"?n:!0,n===!0)b.treeOpenOnInitCallback=function(){return!0};else if(n===!1)b.treeOpenOnInitCallback=function(){return!1};else if(typeof n=="number"){var t=n+(b.treeHideOnNoChild==!0?-1:0);b.treeOpenOnInitCallback=function(n,i){return n[i]<=t}}else b.treeOpenOnInitCallback=$.isArray(n)?function(t,i){return n.contains(i)}:n=="upper"?function(){return!0}:function(){return!0};return this};this.setTreeOpenOnInit=this.setStyleTreeOpenOnInit;this.setStyleTreeColumnSort=function(n){return b.sort=n===!0,this};this.setTreeColumnSort=this.setStyleTreeColumnSort;this.setStyleTreeNoReOrder=function(n){return b.dataNoReOrder=n===!0,this};this.setTreeNoReOrder=this.setStyleTreeNoReOrder;this.setEventFocusOnInit=function(n){return rt.focusOnInit=n===!0,this};this.setEventUseAfterRowDataLoadForInitialData=function(n){return rt.triggerAfterRowDataLoadOnSetRowData=n===!0,this};this.setNotFocusableCallback=function(n){return rt.notFocusableCallback=n,this};this.setEventClipboardCallback=function(n){return rt.clipboardCallback=n,this};this.setEvnetRightClickMode=function(n){return rt.useRightClick=n,this};this.setEventWidgetTriggerObj=function(n){return ht.commonEventDelegator=n,this};this.setWidgetEventCommonDelegator=this.setEventWidgetTriggerObj;this.getWidgetEventCommonDelegator=function(){return ht.commonEventDelegator};this.setEventWidgetDelegatorObj=function(n){return ht.UIEventDelegator=n,this};this.setWidgetEventUIDelegator=this.setEventWidgetDelegatorObj;this.getWidgetEventUIDelegator=function(){return ht.UIEventDelegator};this.getEventWidgetDelegatorObj=this.getWidgetEventUIDelegator;this.setKeyboardCursorMove=function(n,t){return k.useMoveCursor=n===!0,k.continueMoveCursor=t&&typeof t=="function"?t:null,this};this.getKeyboardCursorMove=function(){return k.useMoveCursor};this.setKeyboardEnterForExecute=function(n,t){return n?(k.enterForExecute=!0,typeof t=="string"&&(t=[t]),k.executeColumnIdList=t):(k.enterForExecute=!1,k.executeColumnIdList=null),this};this.getKeyboardEnterForExecute=function(){return k.enterForExecute};this.setKeyboardSpacebarForSelectRow=function(n){return k.spacebarForSelect=n===!0,this};this.getKeyboardSpacebarForSelectRow=function(){return k.spacebarForSelect};this.setKeyboardUseSelectEach=function(n){return k.useSelectEach=n===!0,this};this.getKeyboardUseSelectEach=function(){return k.useSelectEach};this.setKeyboardSpacebarForCustomSelectCell=function(n){return typeof n=="string"&&(k.fireColumnIdList=[n]),k.fireColumnIdList=n,this};this.setKeyboardPageMove=function(n){return k.useMovePage=n===!0,this};this.setEditControlEnterHandler=function(n){return k.controlEnterHandler=$.isFunction(n)?n:null,this};this.setKeyboardEditControlEnterHandler=this.setEditControlEnterHandler;this.setKeyboardPrevMoveCallback=function(n){return k.prevMoveCallback=n,this};this.setKeyboardNextMoveCallback=function(n){return k.nextMoveCallback=n,this};c=function(n,t){o[n].items[t]||bt(n,t)};bt=function(n,t){o[n].items[t]={use:!1,ignore:!1,index:-1,sequenceIndex:1,customIndex:0,rememberChecked:!0,checkedMaxCount:-1,checkedList:[],checkedKeyList:{},disabledKeyList:{},checkedTotalCount:0,disabledPagingCount:0,checkedPagingCount:0,availablePagingCount:0,isMaxChecked:!1}};this.setCheckBoxUse=function(n,i){var f,u,e;for(arguments.length==1&&(i=arguments[0],n=r.checkBoxPropertyName),f=[w,t],u=0,e=f.length;u<e;u++)c(f[u],n),o[f[u]].items[n].use=i,i?((o[f[u]].items[n].index==undefined||o[f[u]].items[n].index==null)&&(o[f[u]].items[n].index=-1),n==r.checkBoxPropertyName&&this.setAfterRenderingUse(!0)):o[f[u]].items[n].index=-1;return this};this.setCheckBoxUseMultiCheck=function(n){return o.useMultiCheck=n===!0,this};this.setCheckBoxUseMultiCheckBulk=function(n){return o.useMultiCheckBulk=n===!0,this};this.setAfterRenderingUse=function(n){o.isAfterRenderingUse=n};this.getAfterRenderingUse=function(){return o.isAfterRenderingUse};this.setCheckBoxClearChecked=function(n,i){return arguments.length==0?(n=t,i=r.checkBoxPropertyName):arguments.length==1&&(i=arguments[0],n=t),o[n].items[i].checkedKeyList={},o[n].items[i].checkedList=[],o[n].items[i].checkedTotalCount=0,o[n].items[i].headerStyle&&(o[n].items[i].headerStyle.visible=o[n].items[i].headerStyle.visible===!1?!1:!0),this};this.getCheckBoxUse=function(n,i){return arguments.length==0&&(n=t,i=r.checkBoxPropertyName),o[n].items[i]&&o[n].items[i].use};this.setCheckBoxPosition=function(n,i){var f=[w,t],u,e;for(arguments.length==1&&(i=arguments[0],n=r.checkBoxPropertyName),u=0,e=f.length;u<e;u++)c(f[u],n),o[f[u]].items[n].index=i;return this};this.setCheckBoxIndex=this.setCheckBoxPosition;this.getCheckBoxIndex=function(n,i){return arguments.length==0&&(n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].index};this.setCheckBoxActiveRowStyle=function(n,i,u,f,e){return arguments.length==1?(u=arguments[0],n=t,i=r.checkBoxPropertyName):arguments.length<=3&&(e=arguments[2],f=arguments[1],u=arguments[0],n=t,i=r.checkBoxPropertyName),c(n,i),u?(o[n].items[i].activeRowStyle=f&&f.constructor==Array?f:typeof f=="string"?[f]:["active"],o[n].items[i].activeRowDeterminer=typeof e=="function"?e:null):(o[n].items[i].activeRowStyle=[],o[n].items[i].activeRowDeterminer=null),this};this.setCheckBoxActiveRowDeterminer=function(n,i,u){return arguments.length==1&&(u=arguments[0],n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].activeRowDeterminer=typeof u=="function"?u:null,this};this.getCheckBox=function(n,t){return(arguments.length==1&&(n=arguments[0],t=r.checkBoxPropertyName),c(n,t),o[n].items[t].ignore)?{}:arguments.length==1?o[n].items:o[n].items[t]};this.setCheckBoxHeaderStyle=function(n,i){var f=[w,t],u,e;for(arguments.length==1&&(i=arguments[0],n=r.checkBoxPropertyName),u=0,e=f.length;u<e;u++)c(f[u],n),o[f[u]].items[n].headerStyle=i;return this};this.getCheckBoxHeaderStyle=function(n,i){return arguments.length==0&&(n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].headerStyle||{}};this.setCheckboxOriginal=function(n,i,u){var f,e,s;for(arguments.length==1?(u=arguments[0],f=[w,t],i=r.checkBoxPropertyName):f=$.isString(n)?[n]:n,e=0,s=f.length;e<s;e++)c(f[e],i),o[f[e]].items[i].styleOriginal=u===!0;return this};this.setCheckBoxOriginalStyle=this.setCheckboxOriginal;this.getCheckBoxOriginalStyle=function(n,i){return arguments.length==0&&(n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].styleOriginal};this.setCheckboxDynamicCheckedList=function(n,i,u){return arguments.length==1&&(n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].isDynamicCheckedList=u,this};this.setCheckboxUseDisableCheck=function(n,i,u){return arguments.length==1?(u=arguments[0],n=t,i=r.checkBoxPropertyName):arguments.length==2&&(u=arguments[1],i=arguments[0],n=t),c(n,i),o[n].items[i].isUseDisableCheck=u,this};this.getCheckboxUseDisableCheck=function(n,t){return c(n,t),o[n].items[t].isUseDisableCheck||!1};this.setCheckboxCheckCountTypeOnlyChild=function(n,i,u){return arguments.length==1&&(u=arguments[0],n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].checkCountTypeOnlyChild=u,this};this.setCheckBoxDisplayMergeType=function(n){return o.displayMergeType=n,this};this.getCheckBoxDisplayMergeType=function(){return o.displayMergeType};this.setCheckBoxCustomIndex=function(n,i,u){return arguments.length==1&&(u=arguments[0],n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].customIndex=u,this};this.getCheckBoxCustomIndex=function(n,i){return arguments.length==0&&(n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].customIndex};this.setCheckBoxInitialCheckedItems=function(n,i,u,f){return arguments.length==1?(u=arguments[0],n=t,i=r.checkBoxPropertyName):arguments.length==2&&(f=arguments[1],u=arguments[0],n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].checkedList=u,o.removeAfterRedraw=f===!1?!1:!0,this};this.getCheckBoxremoveAfterRedraw=function(n,i){return arguments.length==0&&(n=t,i=r.checkBoxPropertyName),o.removeAfterRedraw};this.getCheckBoxInitialCheckedItems=function(n,i){return arguments.length==0&&(n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].checkedList};this.setCheckBoxCheckingDeterminer=function(n,i,u){return arguments.length==1&&(u=arguments[0],n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].checkingDeterminer=u,this};this.getCheckBoxCheckingDeterminer=function(n,t){return o[n].items[t].checkingDeterminer};this.setCheckBoxCountingDeterminer=function(n,i,u){return arguments.length==1&&(u=arguments[0],n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].countingDeterminer=u,this};this.getCheckBoxCountingDeterminer=function(n,t){return o[n].items[t].countingDeterminer};this.setCheckBoxCallback=function(n,i,u){return arguments.length==1&&(u=arguments[0],n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].callbackObject=u,this};this.setCheckBoxHeaderCallback=function(n,t,i){return arguments.length==1&&(i=arguments[0],n=w,t=r.checkBoxPropertyName),this.setCheckBoxCallback(n,t,i)};this.setCheckBoxMaxCount=function(n,i,u){if(arguments.length==1&&(u=arguments[0],n=t,i=r.checkBoxPropertyName),!o[n].items[i]){ecount.gridV2.util.notify("사용여부가 설정되지 않은 {0} 항목에 대해 setCheckBoxMaxCount 함수를 실행 했습니다.",i);return}return u=parseInt(u),c(n,i),o[n].items[i].checkedMaxCount=$.isNumber(u)?u:-1,this};this.setCheckBoxCustomMaxCount=function(n,i,r){return arguments.length==2&&(r=arguments[1],i=arguments[0],n=t),c(n,i),this.setCheckBoxMaxCount(n,i,r)};this.getCheckBoxMaxCount=function(n,i){return arguments.length==0&&(n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].checkedMaxCount};this.setCheckBoxMaxCountExceeded=function(n,i,u){if(arguments.length==1&&(u=arguments[0],n=t,i=r.checkBoxPropertyName),!o[n].items[i]){ecount.gridV2.util.notify("사용여부가 설정되지 않은 {0} 항목에 대해 setCheckBoxMaxCountExceeded 함수를 실행 했습니다.",i);return}return c(n,i),o[n].items[i].maxCountCallback=u,this};this.setCheckBoxCustomMaxCountExceeded=function(n,i){return arguments.length==2&&(i=arguments[1],sectionType=t,n=arguments[0]),this.setCheckBoxMaxCountExceeded(sectionType,n,i)};this.getCheckBoxMaxCountExceeded=function(n,i){return arguments.length==0&&(n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].maxCountCallback};this.setCheckBoxRememberChecked=function(n,i,u,f){return arguments.length==1?(u=arguments[0],n=t,i=r.checkBoxPropertyName):arguments.length==2&&(f=arguments[1],u=arguments[0],n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].rememberChecked=u===!0,o[n].items[i].allRememberChecked=f===!0,this};this.setCheckBoxCustomRememberChecked=function(n,i,u){return arguments.length==1?(u=arguments[0],n=t,i=r.checkBoxPropertyName):arguments.length==2&&(u=arguments[1],i=arguments[0],n=t),c(n,i),o[n].items[i].rememberCustomCheckbox=u===!0,this.setCheckBoxRememberChecked(n,i,u)};this.getRemeberCustomCheckbox=function(n,t){return c(n,t),o[n].items[t].rememberCustomCheckbox};this.setCheckBoxPagingRememberChecked=function(n,i,u){return arguments.length==1&&(u=arguments[0],n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].pagingRememberChecked=u===!0,this};this.getCheckBoxRememberChecked=function(n,i){return arguments.length==0&&(n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].rememberChecked};this.getCheckBoxAllRememberChecked=function(n,i){return arguments.length==0&&(n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].allRememberChecked};this.getCheckBoxPagingRememberChecked=function(n,i){return arguments.length==0&&(n=t,i=r.checkBoxPropertyName),c(n,i),o[n].items[i].pagingRememberChecked};this.setCheckboxIgnore=function(n,i,r){var u=[],f,e;for(arguments.length==2&&(r=arguments[1],i=arguments[0],u=[w,t,d]),n&&typeof n=="string"&&(u=[n]),typeof r=="string"&&(r=[r]),f=0;f<r.length;f++)for(e=0;e<u.length;e++)c(u[e],r[f]),o[u[e]].items[r[f]].ignore=i;return this};this.getCheckboxIgnore=function(n,i){return arguments.length==0?(n=t,i=r.checkBoxPropertyName):arguments.length==1&&(i=arguments[0],n=t),c(n,i),o[n].items[i].ignore};this.setCheckBoxCustomCheckAllDeterminer=function(){return this};this.setEventCustomCheckBoxCheckAllDeterminer=this.setCheckBoxCustomCheckAllDeterminer;this.setRowDataNumbering=function(n,t,i){return ct.use=n===!0,ct.accumulated=t!=="undefined"?t==!0:!0,ct.headerStyle=i?i:{},this};this.setNumberingUse=this.setRowDataNumbering;this.setNumberIndex=function(n){return ct.index=n,this};this.setEditRowMoveable=function(n,t){return t=typeof t=="boolean"?t:!0,st.use=n===!0,st.isEventTrigger=t,this};this.setRowMoveableUse=this.setEditRowMoveable;this.setRowmoveableIndex=function(n){return st.index=n,this};this.getRowmoveableUse=function(){return st.use};this.getRowmoveableIsEventTrigger=function(){return st.isEventTrigger};this.setRadioCheckingDeterminer=function(n){return ti.checkingDeterminer=n,this};this.setHeaderVeryTopHTML=function(n){dt.html=n};this.setTopHTML=this.setHeaderVeryTopHTML;this.setHeaderTopLeftHTML=function(n){return yt.leftHTML=n,this};this.setHeaderToolbarLeftHTML=this.setHeaderTopLeftHTML;this.setHeaderTopRightHTML=function(n){return yt.rightHTML=n,this};this.setHeaderToolbarRightHTML=this.setHeaderTopRightHTML;this.setEventShadedColumnId=function(n,t){return this.setShadedUse(!0).setShadedType("id").setShadedList(n),t===!0?this.setShadedRemember(!0):typeof t=="object"&&this.setShadedRemember(t.isAllRememberShaded===!0).setShadedType(t.useShadedCellData===!0?"data":"id").setShadedIntergration(t.useIntegration===!0).setShadedClassName(t.shadedClassName?t.shadedClassName:"text-primary-inverse "),this};this.setEventGroupShaded=function(n,t,i){var r=[];return(r=typeof i=="object"?typeof i.referenceColumnId=="string"?[i.referenceColumnId]:i.referenceColumnId:typeof t=="string"?[t]:t,ut.intergration)?this:(n===!0?this.setShadedUse(!0).setShadedType("dataGroup").setShadedGroupIdList(r):this.setShadedUse(!1).setShadedType(null).setShadedGroupIdList(r),this)};this.setShadedUse=function(n){return ut.use=n,this};this.setShadedType=function(n){return ut.type=n,this};this.setShadedIntergration=function(n){return ut.intergration=n,this};this.setShadedList=function(n){return typeof n=="string"&&(n=[n]),ut.list=n,this};this.setShadedRemember=function(n){return ut.remember=n,this};this.setShadedClassName=function(n){return ut.className=n,this};this.setShadedGroupIdList=function(n){return ut.shadedGroupIdList=n,this};this.setHeaderTopMargin=function(n){return p.topMargin=n,this};this.setHeaderClass=function(n){return p.headerCellClass=n,this};this.setTitleFontSize=function(n){return p.styleFontSize=n,this};this.setHeaderStyleFontSize=this.setTitleFontSize;this.setTitleFontBold=function(n){return p.styleFontBold=n===!0,this};this.setHeaderStyleFontBold=this.setTitleFontBold;this.setTitleFontItalic=function(n){return p.styleFontItalic=n===!0,this};this.setHeaderStyleFontItalic=this.setTitleFontItalic;this.setTitleFontUnderline=function(n){return p.styleFontUnderline=n===!0,this};this.setHeaderStyleFontUnderline=this.setTitleFontUnderline;this.setTitleFontStrike=function(n){return p.styleFontStrike=n===!0,this};this.setHeaderStyleFontStrike=this.setTitleFontStrike;this.setTitleHorizontalAlign=function(n){return p.styleFontAlign=n,this};this.setHeaderStyleFontHorizontalAlign=this.setTitleHorizontalAlign;this.setTitleVerticalAlign=function(n){return p.styleFontVAlign=n,this};this.setHeaderStyleFontVerticalAlign=this.setTitleVerticalAlign;this.setFootSize=function(n){return l.size=n,this};this.setTotalFontSize=function(n){return l.styleFontSize=n,this};this.setFootStyleFontSize=this.setTotalFontSize;this.setTotalFontBold=function(n){return l.styleFontBold=n===!0,this};this.setFootStyleFontBold=this.setTotalFontBold;this.setTotalFontItalic=function(n){return l.styleFontItalic=n===!0,this};this.setFootStyleFontItalic=this.setTotalFontItalic;this.setTotalFontUnderline=function(n){return l.styleFontUnderline=n===!0,this};this.setFootStyleFontUnderline=this.setTotalFontUnderline;this.setTotalFontStrike=function(n){return l.styleFontStrike=n===!0,this};this.setFootStyleFontStrike=this.setTotalFontStrike;this.setTotalHorizontalAlign=function(n){return l.styleFontAlign=n,this};this.setFootStyleFontHorizontalAlign=this.setTotalHorizontalAlign;this.setTotalVerticalAlign=function(n){return l.styleFontVAlign=n,this};this.setFootStyleFontVerticalAlign=this.setTotalVerticalAlign;this.setTotalFont=function(n){return l.styleFont=n,this};this.setFootStyleFont=this.setTotalFont;this.setTotalFontColor=function(n){return l.styleFontColor=n,this};this.setFootStyleFontColor=this.setTotalFontColor;this.setFooterBottomMargin=function(n){return l.bottomMargin=n,this};this.setFootToolbarIsShowPageNo=function(n){return lt.isShowPageNo=n,this};this.setFootToolbarIsShowPrintDate=function(n){return lt.isShowPrintDate=n,this};this.setFooterBottomLeftHTML=function(n){return lt.leftHTML=n,this};this.setFootToolbarLeftHTML=this.setFooterBottomLeftHTML;this.setFooterBottomRightHTML=function(n){return lt.rightHTML=n,this};this.setFootToolbarRightHTML=this.setFooterBottomRightHTML;this.setPagingUse=function(n){return a.use=n===!0,this};this.setPagingRowCountPerPage=function(n,t){return a.rowCountPerPage=n,a.rowCountPerPagePreferManualSetting=t,this};this.setPagingIndexChanging=function(n){return a.changeIndexCallback=typeof n=="function"?n:null,this};this.setPagingCurrentPage=function(n){return a.currentPage=parseInt(n,10),this};this.getPagingCurrentPage=function(){return a!=null?a.currentPage:null};this.setPagingTotalRowCount=function(n){return a.totalRowCount=n,this};this.getPagingTotalRowCount=function(){return a!=null&&a.totalRowCountSearchResult!=null?a.totalRowCountSearchResult:null};this.setPagingUseDefaultPageIndexChanging=function(n){return a.useDefaultPageIndexChanging=n===!0,this};this.setPagingPosition=function(n){return a.position=n,this};this.getPagingTotalPageCount=function(){return a!=null&&a.pagingHelper!=null?a.pagingHelper.totalPageCount:null};this.setPagingBackTrack=function(n,t){return a.backTrack=n==!0,a.backTrackCount=a.backTrack==!0?$.isNumber(t)?t:1:0,this};this.setPagingControlAreaPosition=function(n){return a.controlPosition=n,this};this.setPagingAddControl=function(n,t){return a.use||(a.use=!0),a.controlData[n]=t,this};this.setPagingDisplayTotalRowCount=function(n,t){return a.isDisplayRowCount=n,a.isDisplayRowCountWithPaging=t,this};this.setPagingCalendarStyle=function(n){return a.isUseCalendarStyle=n,this};this.setPagingDisplayMovePaging=function(){return a.isDisplayMovePaging=isUseCalendarStyle,this};this.setCheckBoxFocusAble=function(n){return o.isMoveToNative=n===!0,this};this.serialize=function(){return s};this.destroyAll=function(){};this.setCheckBoxOriginalStyle(w,r.checkBoxPropertyName,!1);this.setCheckBoxOriginalStyle(t,r.checkBoxPropertyName,!1);this.setFixGridRow=function(n){return ft.rowFixed=n,this};this.setFixGridColumn=function(n){return ft.columnFixed=n,this};this.setColumnFixHeader=function(n,t){return ft.headFixed=n,ft.isCopyHeaderArea=t===!1?!1:!0,this};this.setFixGridHeader=this.setColumnFixHeader;this.setFixTitleUse=function(n){return ft.useFixTitle=n,this};this.setCheckBoxFixColumn=function(n){return ft.checkBoxFixed=n,this};this.setFixCheckBoxColumn=this.setCheckBoxFixColumn;this.setHeaderFix=function(n){return ft.headerFix=n,this};this.setFixHeader=this.setHeaderFix;this.setFixOnInclude=function(n){return ft.isInclude=!!n,this};this.setDropdown=function(n,t){return pt.useDropdown=n,pt.dropdownList=t==undefined||t==null?null:t,this};this.setDropdownLayerList=function(n){return this.setDropdown(!0,n),this};this.setDragable=function(n,t,i){return v.use=n,v.type=t==undefined||t==null?"all":t,i!=undefined&&i!=null&&(v.isPartitionPage=i),this};this.setUseDragableModule=function(n,t){return n&&(v.dragableModule=new ecount.draggable),v.moveMode=t||!1,this};this.getDragable=function(){return v.use===!0};this.setDragMoveArea=function(n){return v.moveArea=n,this};this.setDragDirection=function(n){return v.direction=n,this};this.setDragDisableColumns=function(n){var i=null,t,r;if(n)for(i={},t=0,r=n.length;t<r;t++)i[n[t]]=!0;return v.disableColumns=n,v.disableColumnIds=i,this};this.setDragHeaderCalculation=function(n,t){return v.isHeaderCalculation=n===!0,v.headerCalculationOption=t,this};this.setDragMoveMethod=function(n){return v.moveMethod=n,this};this.setTitleSetupDragable=function(n,t,i){return v.isShowTitleSetupDragable=n===!0,t&&$.isArray(t)&&t.length>0&&(v.titleSetupMenu=t),i&&(v.titleSetupOption=i),this};this.setTitleSetupCallback=function(n){return $.isEmpty(n)||(v.titleSetupCallback=$.isEmpty(n)?null:n),this};this.setTotalSetupDragable=function(n,t,i){return v.isShowTotalSetupDragable=n===!0,t&&$.isArray(t)&&t.length>0&&(v.totalSetupMenu=t),i&&(v.totalSetupOption=i),this};this.setTotalSetupCallback=function(n){return v.totalSetupCallback=$.isEmpty(n)?null:n,this};this.setDragStartCallback=function(n){return v.dragCallback=n,this};this.setDragMoveCallback=function(n){return v.moveCallback=n,this};this.setDragStopCallback=function(n){return v.dropCallback=n,this};this.setDragTarget=function(){return v.dragTarget=callback,this};this.setCellResize=function(n,t,i,r,u,f){return et.use=n===!0,et.target=t,et.type=u,et.maxSize=f,this};this.setCellResizeHeightSections=function(n){return et.heightSections=n,this};this.setCellResizeEnableColumns=function(n){return et.enableColumns=n,this};this.setCellResizeGroupIdColumns=function(n){return et.groupColumns=n,this};this.setContextmenuInstance=function(){return nt.instance=new ecount.gridV2.modules.contextmenu,this};this.getContextmenuInstance=function(){return nt.instance};this.setContextmenuDownloadCallback=function(n){return nt.downloadMenuCallback=n,this};this.getContextmenuDownloadCallback=function(){return nt.downloadMenuCallback};this.setContextmenuBeforeCallback=function(n){return nt.contextmenuBeforeCallback=n,this};this.setContextmenuCallback=function(n){nt.callback=n};this.setContextmenu=function(n,t){return nt.itemList=n,nt.type=t?t:r.contextmenuType.section,this};this.setContextmenuKeys=function(n){return typeof n=="string"&&(n=[n]),nt.keys=n,this};this.getContextmenu=function(){return nt.items};this.setMergeUseMerge=function(){return this};this.setMergeHideTrForHideAllTd=function(){return this};this.setMergeContextmenu=function(n,t){return wt.useContextmenu=n,wt.contextmenu=t,this};this.setMergeContextmenuCallback=function(){};this.setMergeDragCellSelect=function(){return this};this.setCommonAutoGenerateTotalMergeUse=function(n){return f.useMergeAutoGenratorTotal=n,this};this.setMergeAutoGenerateTotalMerge=this.setCommonAutoGenerateTotalMergeUse;this.setSelectorUse=function(n){return at.use=n,this};this.setSelectorVersion=function(n){return at.version=n,this};this.setSelectorHandlerVersion=function(n){return at.handlerVersion=n,this};this.setOuterHorizontalUse=function(n){return ri.use=n,this};this.setOuterVerticalUse=function(n){return ii.use=n,this};this.setOverlayUse=function(n){return vt.use=n,this};this.setOverlayShowDelay=function(n){return vt.showDelay=n,this};this.setOverlayHideDelay=function(n){return vt.hideDelay=n,this};this.setOnloadCompleteAfterShowContextmenu=function(n){return typeof n!="boolean"&&(n=!0),nt.directShow=n,this};this.getOnloadCompleteAfterShowContextmenu=function(){return nt.directShow}}};ecount.gridV2.view=$.Class(null,{querySelector:function(n,t){var i,r;return n.querySelector?r=n.querySelector(t):(i=$(n).find(t),i.length>0&&(r=i[0])),r},init:function(){},initProperties:function(n,t){var o,f,i,r,u,e;if(this.initGlobalValue(n),$.extend(this.defaultDatas,t),this.defaultDatas.container=this.optLayout.container,this.defaultDatas.$container=this.optLayout.$container,this.optEvent.focusOnInit){o=this.optCommon.ecPageId+this.optCommon.ecGridId;for(f in ecount.gridV2.parent.gridRegistered)if(f!=o)try{ecount.gridV2.parent.gridRegistered[f].activeCellFocusout()}catch(s){try{delete ecount.gridV2.parent.gridRegistered[f]}catch(h){}}}if([this.constValue.gridRenderType.typeStatusList,this.constValue.gridRenderType.typeSpecTran].contains(this.optCommon.renderType)&&this.paging&&(this.paging.destroyAll&&this.paging.destroyAll(),this.paging=null),this.defaultDatas.$topToolbar=this.defaultDatas.$container.find("div.grid-top-html"),this.defaultDatas.topToolbar=this.defaultDatas.$topToolbar.length>0?this.defaultDatas.$topToolbar[0]:null,this.defaultDatas.$topLeftToolbar=this.defaultDatas.$topToolbar.find("div.pull-left"),this.defaultDatas.$topRightToolbar=this.defaultDatas.$topToolbar.find("div.pull-right"),i=this.optHeaderToolbar.leftHTML,r=this.optHeaderToolbar.rightHTML,this.optPaging.isUseCalendarStyle&&this.defaultDatas.topToolbar.classList.add("wrapper-schedule-date-search"),this.optPaging.use||i||r){this.optPaging.use&&(this.paging=new ecount.gridV2.view.paging,this.paging.init(n,this.defaultDatas),u=this.optPaging.controlPosition=="right"?this.defaultDatas.$topRightToolbar:this.defaultDatas.$topLeftToolbar);this.optPaging.isDisplayRowCount&&(i+=" <span>Total: "+this.defaultDatas.totalDataCount+"<\/span>");switch(this.optPaging.position){case ecount.grid.constValue.pagingPosition.topLeftMost:if(this.dataPaging&&Object.keys(this.dataPaging.serialize().controlData).length>0){i&&this.defaultDatas.$topLeftToolbar.append($("<div class='inline-group toolbar-text'>"+i+"<\/div>")[0]);this.paging&&this.paging.render(this.defaultDatas.$topLeftToolbar,u);r&&this.defaultDatas.$topRightToolbar.html("<div class='inline-group toolbar-text'>"+r+"<\/div>");break}else{this.paging&&this.paging.render(this.defaultDatas.$topLeftToolbar,u);i&&this.defaultDatas.$topLeftToolbar.append($("<div class='inline-group toolbar-text'>"+i+"<\/div>")[0]);r&&this.defaultDatas.$topRightToolbar.html("<div class='inline-group toolbar-text'>"+r+"<\/div>");break}case ecount.grid.constValue.pagingPosition.topLeft:i&&this.defaultDatas.$topLeftToolbar.html("<div class='inline-group toolbar-text'>"+i+"<\/div>");this.paging&&this.paging.render(this.defaultDatas.$topLeftToolbar,u);r&&this.defaultDatas.$topRightToolbar.html("<div class='inline-group toolbar-text'>"+r+"<\/div>");break;case ecount.grid.constValue.pagingPosition.topRightMost:i&&this.defaultDatas.$topLeftToolbar.html("<div class='inline-group toolbar-text'>"+i+"<\/div>");this.paging&&this.paging.render(this.defaultDatas.$topRightToolbar,u);r&&this.defaultDatas.$topRightToolbar.append($("<div class='inline-group toolbar-text'>"+r+"<\/div>")[0]);break;case ecount.grid.constValue.pagingPosition.topRight:i&&this.defaultDatas.$topLeftToolbar.html("<div class='inline-group toolbar-text'>"+i+"<\/div>");r&&this.defaultDatas.$topRightToolbar.html("<div class='inline-group toolbar-text'>"+r+"<\/div>");this.paging&&this.paging.render(this.defaultDatas.$topRightToolbar,u);break;default:this.paging&&this.paging.render(this.defaultDatas.$topLeftToolbar,u);i&&this.defaultDatas.$topLeftToolbar.append($("<div class='inline-group toolbar-text'>"+i+"<\/div>")[0]);r&&this.defaultDatas.$topRightToolbar.html("<div class='inline-group toolbar-text'>"+r+"<\/div>")}}this.setContentInfo();this.initDataValue();this.initFormLayout();this.initCreateInstances(n,t);(this.optForm.version==this.constValue.formVersion.second||this.optDropdown.useDropdown)&&(e=this.defaultDatas.$tables.find("th,td"),this.bindEventMouseenterDropdownmenu(e),this.bindEventMouseleaveDropdownmenu(e));n.mixinOption.viewUtil=ecount.gridV2.view.util;n.mixinOption.viewLayout=this.layout;n.mixinOption.viewContainer=this.container;n.mixinOption.viewTable=this.table;n.mixinOption.viewColumn=this.column;n.mixinOption.viewRow=this.row;n.mixinOption.viewCell=this.cell;n.mixinOption.view=this;this.editLayer&&(n.mixinOption.viewEditLayer=this.editLayer);this.paging&&(n.mixinOption.viewPaging=this.paging);this.filter&&(n.mixinOption.viewFilter=this.filter);this.selector&&(n.mixinOption.viewSelector=this.selector);this.tempSelector&&(n.mixinOption.viewTempSelector=this.tempSelector);this.overlay&&(n.mixinOption.viewOverlay=this.overlay);this.drag&&(n.mixinOption.viewDrag=this.drag);this.dragLine&&(n.mixinOption.viewDragLine=this.dragLine);this.dragCaret&&(n.mixinOption.viewDragCaret=this.dragCaret);this.resize&&(n.mixinOption.viewResize=this.resize);this.outerHorizontal&&(n.mixinOption.viewOuterHorizontal=this.outerHorizontal);this.outerVertical&&(n.mixinOption.viewOuterVertical=this.outerVertical);this.overlay&&this.__list.push("overlay");this.selector&&this.__list.push("selector");this.tempSelector&&this.__list.push("tempSelector");this.drag&&this.__list.push("drag");this.dragLine&&this.__list.push("dragLine");this.dragCaret&&this.__list.push("dragCaret");this.__list.push("col");this.__list.push("cell");this.__list.push("column");this.__list.push("row");this.__list.push("table");this.__list.push("container");this.__list.push("layout");this.fix&&this.__list.push("fix");this.keyboard&&this.__list.push("keyboard");this.editLayer&&this.__list.push("editLayer");this.paging&&this.__list.push("paging");this.filter&&this.__list.push("filter");this.resize&&this.__list.push("resize");this.outerHorizontal&&this.__list.push("outerHorizontal");this.outerVertical&&this.__list.push("outerVertical");this.col&&this.col.init(n,this.defaultDatas);this.row&&this.row.init(n,this.defaultDatas);this.column.init(n,this.defaultDatas);this.cell.init(n,this.defaultDatas);this.table.init(n,this.defaultDatas);this.container.init(n,this.defaultDatas);this.layout.init(n,this.defaultDatas);this.fix&&this.fix.init(n,this.defaultDatas);this.keyboard&&this.keyboard.init(n);this.editLayer&&this.editLayer.init(n)},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.constEvent=ecount.gridV2.constEvent;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.theadSlipType=this.constValue.sectionType.theadSlip;this.tbodySlipType=this.constValue.sectionType.tbodySlip;this.tfootSlipType=this.constValue.sectionType.tfootSlip;this.defaultOption=n;this.__core=n.core;this.__renderer=n.core.render;this.__setting=n.setting;this.__events=this.__setting.eventsGet();this.mixinOption=n.mixinOption;$.extend(this,n.mixinOption);this.datas=this.__core.setting.serialize();this.defaultDatas={containerId:null,container:null,$container:null,transaction:null,tableKeyList:{},tableSectionIndex:{},tooltip:{},popover:{}};this.__list=[];this.__globalEvents=["click"]},hasVerticalScrollbar:function(n){return n.scrollHeight!=n.clientHeight},hasHorizontalScrollbar:function(n){return n.scrollWidth!=n.clientWidth},ecClearInterval:function(n){n&&clearInterval(n)},moveScrollTop:function(n,t){if(n.scrollContainer){var i={x:t.clientX,y:t.clientY};n.scrollContainer.scrollTop+=i.y-n.rect.top}},moveScrollBottom:function(n,t){if(n.scrollContainer){var i={x:t.clientX,y:t.clientY};n.scrollContainer.scrollTop+=i.y-n.rect.bottom}},moveScrollLeft:function(n,t){if(n.scrollContainer){var i={x:t.clientX,y:t.clientY};n.scrollContainer.scrollLeft+=i.x-n.rect.left}},moveScrollRight:function(n,t){if(n.scrollContainer){var i={x:t.clientX,y:t.clientY};n.scrollContainer.scrollLeft+=i.x-n.rect.right}}});ecount.gridV2.viewTable=$.Class(ecount.gridV2.view,{initProperties:function(){ecount.gridV2.view.prototype.initProperties.apply(this,arguments)},initCreateInstances:function(n){var r=this.optCommon.ecPageId,c=this.optCommon.ecGridId,u=this.optLayout.containerSelector,f=n.setting.eventsGet(),i,o,s,h,l,t,e;if([this.constValue.formVersion.second,this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(this.optForm.version)){i=this;o=intervalVerticalID=null;$(document.body).on("mousemove.moveScroll_"+this.optCommon.ecPageId+"_"+this.optCommon.ecGridId,function(n){var y=n.target,p=$(y),e=p.closest("TD, TH").filter(".gridSelector-enable"),u;if(e.hasClass("cursor-pointer")||e.hasClass("gridCol-grip")||e.hasClass("row-grip")||e.hasClass("nw-grip")||e.addClass("cursor-pointer"),i.optForm.version==i.constValue.formVersion.third||i.optForm.version==i.constValue.formVersion.fourth){if(!i.optSelector.use)return;if(![i.constValue.selector.state.dragable,i.constValue.selector.state.mousemove].contains(i.selector.__datas.state))return}else if(i.optForm.version==i.constValue.formVersion.second){if(!i.optDrag.use)return;if(i.drag.getState()!==i.constValue.drag.state.moveable)return}var w=i.dataRow.getViewDataTableMapAll(i.theadType),b=Object.keys(w),l=i.table.getTableElement(i.theadType,b[0]),k=$(l),s=i.optLayout.scrollContainer,d=$(i.optLayout.scrollContainer),t=d.offset(),g=s.offsetWidth,nt=s.offsetHeight,r=k.offset(),tt=l.offsetWidth,it=l.offsetHeight,f={x:n.clientX,y:n.clientY};t.left+=2;r.left+=2;var h=r.top-t.top<=0?t.top:r.top,a=Math.min(h+it+(r.top-t.top>=0?0:r.top-t.top),t.top+nt),c=r.left>t.left?r.left:t.left,v=Math.min(c+tt+(r.left-t.left>=0?0:r.left-t.left),t.left+g),rt={top:h,right:v,bottom:a,left:c};f.x>=c&&v>=f.x&&f.y>=h&&a>=f.y?(ecount.gridV2.logger.log("lucky position"),intervalVerticalID=intervalVerticalID&&i.ecClearInterval(intervalVerticalID),o=o&&i.ecClearInterval(o)):(u={rect:rt,scrollContainer:s},i.hasVerticalScrollbar(s)&&(f.y<h?(intervalVerticalID||i.moveScrollTop(u,n),intervalVerticalID=intervalVerticalID&&i.ecClearInterval(intervalVerticalID),intervalVerticalID=setInterval(function(){i.moveScrollTop(u,n)},100)):f.y>a&&(intervalVerticalID||i.moveScrollBottom(u,n),intervalVerticalID=intervalVerticalID&&i.ecClearInterval(intervalVerticalID),intervalVerticalID=setInterval(function(){i.moveScrollBottom(u,n)},100))),i.hasHorizontalScrollbar(s)&&(f.x<c?(o||i.moveScrollLeft(u,n),o=o&&i.ecClearInterval(o),o=setInterval(function(){i.moveScrollLeft(u,n)},100)):f.x>v&&(o||i.moveScrollRight(u,n),o=o&&i.ecClearInterval(o),o=setInterval(function(){i.moveScrollRight(u,n)},100))))});$(document.body).on("mouseup.moveScroll_"+this.optCommon.ecPageId+"_"+this.optCommon.ecGridId,function(n){intervalVerticalID=intervalVerticalID&&i.ecClearInterval(intervalVerticalID);o=o&&i.ecClearInterval(o);var t=ec$.parseElement(n.target);i.optCommon.ecPageId==t.ecPageID||i.mixinOption.optSelector.use&&[i.constValue.selector.state.dragable,i.constValue.selector.state.mousemove].contains(i.selector.__datas.state)&&i.mixinOption.viewSelector.MOUSEUP_HANDLER(n)})}if(this.optColumn.filter&&(f.register(ecount.gridV2.constEvent.filter.getDataList,n,ecount.gridV2.handler.filter.getDataList),this.filter=new ecount.gridV2.modules.filter({},{layoutId:this.optLayout.containerSelector,dataCheckbox:this.dataCheckbox},f)),this.optOverlay.use&&(this.optForm.version==this.constValue.formVersion.third||this.optForm.version==this.constValue.formVersion.fourth)&&(this.constValue.columnType.single==this.optCommon.columnType&&this.dataColumn.hasTheadType()&&this.dataColumn.hasTheadSlipType()?(this.overlay=new ecount.gridV2.modules.overlayManager({},{ecPageID:r,layoutSelector:"div[data-gid="+this.optLayout.containerSelector+"]",layout:this.optLayout.container,containerSelector:".table-grid-input",showDelay:this.optOverlay.showDelay,hideDelay:this.optOverlay.hideDelay},f),this.overlay.render().bindLayoutEventMouseleave().bindConatinerEventMousemove(),this.__events&&(this.__events.remove(this.constEvent.overlayManager.getSize),this.__events.register(this.constEvent.overlayManager.getSize,n,ecount.gridV2.handler.overlayManagerSingle.getSize),this.__events.remove(this.constEvent.overlayManager.getSectionInfos),this.__events.register(this.constEvent.overlayManager.getSectionInfos,n,ecount.gridV2.handler.overlayManagerSingle.getSectionInfos))):this.constValue.columnType.multi==this.optCommon.columnType&&(this.overlay=new ecount.gridV2.modules.overlayManager({},{ecPageID:r,layoutSelector:"div[data-gid="+this.optLayout.containerSelector+"]",layout:this.optLayout.container,containerSelector:".table-grid-input",showDelay:this.optOverlay.showDelay,hideDelay:this.optOverlay.hideDelay},f),this.overlay.render().bindLayoutEventMouseleave().bindConatinerEventMousemove(),this.__events&&(this.__events.remove(this.constEvent.overlayManager.getSize),this.__events.register(this.constEvent.overlayManager.getSize,n,ecount.gridV2.handler.overlayManagerMulti.getSize),this.__events.remove(this.constEvent.overlayManager.getSectionInfos),this.__events.register(this.constEvent.overlayManager.getSectionInfos,n,ecount.gridV2.handler.overlayManagerMulti.getSectionInfos)))),this.optSelector.use&&(s=new ecount.events,h={window:this.optLayout.window==window?document.body:this.optLayout.window,layer:this.optLayout.layer,panel:this.optLayout.panelContainer,body:this.optLayout.scrollContainer,ecPageID:r,ecGridId:c,layoutId:this.optLayout.containerSelector,layoutSelector:"div[data-gid="+this.optLayout.containerSelector+"]",layout:this.optLayout.container,containerSelector:".gridSelector-group",className:"gridSelector-enable"},this.optForm.version==this.constValue.formVersion.fourth&&(h.isMakeContainer=!0,h.option={move:{index:0,use:!0},"ns-move":{index:1,use:!0},"ew-move":{index:2,use:!0}},h.datas=[{key:"top",css:"gridDrag-enable"},{key:"left",css:"gridDrag-enable"},{key:"bottom",css:"gridDrag-enable"},{key:"right",css:"gridDrag-enable"},{key:"option",children:[{key:"ns-move",css:"gridDrag-enable"},{key:"ew-move",css:"gridDrag-enable"},{key:"move",css:"gridDrag-enable"}]}]),this.optCommon.columnType==this.constValue.columnType.single?this.optForm.version==this.constValue.formVersion.third?(this.selector=new ecount.gridV2.modules.selectorTable.tableSingle({history:n.core.history},h,f),this.optForm.version==this.constValue.formVersion.third&&this.bindEventMouseupDropdownmenu(document.body)):this.optForm.version==this.constValue.formVersion.fourth&&(this.selector=new ecount.gridV2.modules.selectorTable.singleSection({history:n.core.history},h,f),this.selector.setType(this.optSelector.version),this.tempSelector=new ecount.gridV2.modules.selectorTable.singleSection({history:n.core.history},{window:this.optLayout.window==window?document.body:this.optLayout.window,layer:this.optLayout.layer,panel:this.optLayout.panelContainer,body:this.optLayout.scrollContainer,ecPageID:r,ecGridId:c,layoutId:this.optLayout.containerSelector,layoutSelector:"div[data-gid="+this.optLayout.containerSelector+"]",layout:this.optLayout.container,containerSelector:".gridSelector-group",className:"gridSelector-enable"},s),this.tempSelector.setType(this.optSelector.version)):this.optCommon.columnType==this.constValue.columnType.multi&&(this.optForm.version==this.constValue.formVersion.fourth?this.optSelector.version==this.constValue.selector.version.singleSection?(this.selector=new ecount.gridV2.modules.selectorTable.singleSection({history:n.core.history},h,f),this.selector.setType(this.optSelector.version),this.tempSelector=new ecount.gridV2.modules.selectorTable.singleSection({history:n.core.history},{window:this.optLayout.window==window?document.body:this.optLayout.window,layer:this.optLayout.layer,panel:this.optLayout.panelContainer,body:this.optLayout.scrollContainer,ecPageID:r,ecGridId:c,layoutId:this.optLayout.containerSelector,layoutSelector:"div[data-gid="+this.optLayout.containerSelector+"]",layout:this.optLayout.container,containerSelector:".gridSelector-group",className:"gridSelector-enable"},s),this.tempSelector.setType(this.optSelector.version)):this.optSelector.version==this.constValue.selector.version.multiSection&&(this.selector=new ecount.gridV2.modules.selectorTable.allSection({history:n.core.history},h,f),this.selector.setType(this.optSelector.version),this.tempSelector=new ecount.gridV2.modules.selectorTable.allSection({history:n.core.history},{window:this.optLayout.window==window?document.body:this.optLayout.window,layer:this.optLayout.layer,panel:this.optLayout.panelContainer,body:this.optLayout.scrollContainer,ecPageID:r,ecGridId:c,layoutId:this.optLayout.containerSelector,layoutSelector:"div[data-gid="+this.optLayout.containerSelector+"]",layout:this.optLayout.container,containerSelector:".gridSelector-group",className:"gridSelector-enable"},s),this.tempSelector.setType(this.optSelector.version)):this.optSelector.version==this.constValue.selector.version.singleSection?(this.selector=new ecount.gridV2.modules.selectorTable.tableMulti({history:n.core.history},h,f),this.bindEventMouseupDropdownmenu(document.body)):this.optSelector.version==this.constValue.selector.version.multiSection&&(this.selector=new ecount.gridV2.modules.selectorTable.allSection({history:n.core.history},h,f),this.selector.setType(this.optSelector.version),this.tempSelector=new ecount.gridV2.modules.selectorTable.allSection({history:n.core.history},{window:this.optLayout.window==window?document.body:this.optLayout.window,layer:this.optLayout.layer,panel:this.optLayout.panelContainer,body:this.optLayout.scrollContainer,ecPageID:r,ecGridId:c,layoutId:this.optLayout.containerSelector,layoutSelector:"div[data-gid="+this.optLayout.containerSelector+"]",layout:this.optLayout.container,containerSelector:".gridSelector-group",className:"gridSelector-enable"},s),this.tempSelector.setType(this.optSelector.version))),this.optCommon.columnType==this.constValue.columnType.multi&&this.optOuterHorizontal.use&&this.optCommon.renderType!=this.constValue.gridRenderType.salarySetting&&(this.outerHorizontal=new ecount.gridV2.modules.outerHorizontalManager({},{layoutId:this.optLayout.containerSelector,layout:this.optLayout.container,$layout:this.optLayout.$container,eventPrefixId:ecount.delimiter+r+ecount.delimiter+u},f),this.__events&&(this.__events.remove(this.constEvent.outerHorizontalManager.click),this.__events.register(this.constEvent.outerHorizontalManager.click,n,ecount.gridV2.handler.outerHorizontal.onClick),this.__events.remove(this.constEvent.outerHorizontalManager.deactive),this.__events.register(this.constEvent.outerHorizontalManager.deactive,n,ecount.gridV2.handler.outerHorizontal.onDeactive),this.__events.remove(this.constEvent.outerHorizontalManager.getList),this.__events.register(this.constEvent.outerHorizontalManager.getList,n,ecount.gridV2.handler.outerHorizontal.getList),this.__events.remove(this.constEvent.outerHorizontalManager.onBeforeMousedown),this.__events.register(this.constEvent.outerHorizontalManager.onBeforeMousedown,n,ecount.gridV2.handler.outerHorizontal.onBeforeMousedown))),this.optCommon.columnType==this.constValue.columnType.multi&&this.optOuterVertical.use&&this.optCommon.renderType!=this.constValue.gridRenderType.salarySetting&&(this.outerVertical=new ecount.gridV2.modules.outerVerticalManager({},{layoutId:this.optLayout.containerSelector,layout:this.optLayout.container,$layout:this.optLayout.$container,eventPrefixId:ecount.delimiter+r+ecount.delimiter+u},f),this.__events&&(this.__events.remove(this.constEvent.outerVerticalManager.click),this.__events.register(this.constEvent.outerVerticalManager.click,n,ecount.gridV2.handler.outerVertical.onClick),this.__events.remove(this.constEvent.outerVerticalManager.getList),this.__events.register(this.constEvent.outerVerticalManager.getList,n,ecount.gridV2.handler.outerVertical.getList),this.__events.remove(this.constEvent.outerVerticalManager.onBeforeMousedown),this.__events.register(this.constEvent.outerVerticalManager.onBeforeMousedown,n,ecount.gridV2.handler.outerVertical.onBeforeMousedown))),this.__events))if(this.optCommon.columnType==this.constValue.columnType.single){if(this.optForm.version==this.constValue.formVersion.third)for(t in this.constEvent.selector)this.constEvent.selector.hasOwnProperty(t)&&ecount.gridV2.handler.selector[t]&&(this.__events.remove(this.constEvent.selector[t]),this.__events.register(this.constEvent.selector[t],n,ecount.gridV2.handler.selector[t]));else if(this.optForm.version==this.constValue.formVersion.fourth){this.optCommon.columnType==this.constValue.columnType.single?l=ecount.gridV2.handler.selectorSingleSection:this.optCommon.columnType==this.constValue.columnType.multi&&(l=ecount.gridV2.handler.selectorAllSection);for(t in this.constEvent.selector)this.constEvent.selector.hasOwnProperty(t)&&l[t]&&(this.__events.remove(this.constEvent.selector[t]),this.__events.register(this.constEvent.selector[t],n,l[t]));for(t in this.constEvent.selector)this.constEvent.selector.hasOwnProperty(t)&&l[t]&&(this.__events.remove(this.constEvent.selector[t]),this.__events.register(this.constEvent.selector[t],n,l[t]),s.remove(this.constEvent.selector[t]),s.register(this.constEvent.selector[t],n,l[t]))}}else if(this.optCommon.columnType==this.constValue.columnType.multi)if(this.optForm.version==this.constValue.formVersion.fourth){if(this.optSelector.version==this.constValue.selector.version.singleSection)for(t in this.constEvent.selector)this.constEvent.selector.hasOwnProperty(t)&&ecount.gridV2.handler.selectorSingleSection[t]&&(this.__events.remove(this.constEvent.selector[t]),this.__events.register(this.constEvent.selector[t],n,ecount.gridV2.handler.selectorSingleSection[t]),s.remove(this.constEvent.selector[t]),s.register(this.constEvent.selector[t],n,ecount.gridV2.handler.selectorAllSection[t]));else if(this.optSelector.version==this.constValue.selector.version.multiSection)for(t in this.constEvent.selector)this.constEvent.selector.hasOwnProperty(t)&&ecount.gridV2.handler.selectorAllSection[t]&&(this.__events.remove(this.constEvent.selector[t]),this.__events.register(this.constEvent.selector[t],n,ecount.gridV2.handler.selectorAllSection[t]),s.remove(this.constEvent.selector[t]),s.register(this.constEvent.selector[t],n,ecount.gridV2.handler.selectorAllSection[t]))}else if(this.optSelector.version==this.constValue.selector.version.singleSection)for(t in this.constEvent.selector)this.constEvent.selector.hasOwnProperty(t)&&ecount.gridV2.handler.selector[t]&&(this.__events.remove(this.constEvent.selector[t]),this.__events.register(this.constEvent.selector[t],n,ecount.gridV2.handler.selector[t]));else if(this.optSelector.version==this.constValue.selector.version.multiSection)for(t in this.constEvent.selector)this.constEvent.selector.hasOwnProperty(t)&&ecount.gridV2.handler.selectorAllSection[t]&&(this.__events.remove(this.constEvent.selector[t]),this.__events.register(this.constEvent.selector[t],n,ecount.gridV2.handler.selectorAllSection[t]),s.remove(this.constEvent.selector[t]),s.register(this.constEvent.selector[t],n,ecount.gridV2.handler.selectorAllSection[t]));if(this.optContextmenu.itemList&&this.optContextmenu.keys&&this.optContextmenu.keys.contains(this.constValue.mouseButton.right)&&this.bindEventContextmenu(document.body),this.optDrag.use&&[this.constValue.formVersion.second,this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(this.optForm.version)){var b=new ecount.events,k=new ecount.events,w={history:n.core.history,selector:this.selector,outerHorizontal:this.outerHorizontal,outerVertical:this.outerVertical},y,p,a,v;if(this.optForm.version==this.constValue.formVersion.second?(a=ecount.delimiter+r+ecount.delimiter+u,this.drag=new ecount.gridV2.modules.dragGrid({history:n.core.history,selector:this.selector},{window:this.optLayout.window,layer:this.optLayout.layer,panel:this.optLayout.panelContainer,body:this.optLayout.scrollContainer,domEventPrefixId:ecount.delimiter+r+ecount.delimiter+u+ecount.delimiter+"0",eventPrefixId:ecount.delimiter+r+ecount.delimiter+u,moveArea:this.optDrag.moveArea,ecPageID:r,ecGridId:c,layoutSelector:"div[data-gid="+u+"]",className:"gridDrag-enable-v1",dragSelector:".gridDrag-enable",dragableContainerSelector:".gridDrag-group",dragableLayoutSelector:"div[data-gid="+u+"]",dropableContainerSelector:[".gridDrag-group"],dropSelector:".gridDrop-enable",dragType:"table",dragMethod:this.optDrag.direction,mouseIconElement:{use:!0},shadowBox:{use:!0},caretIcon:{use:!1}},f)):this.optForm.version==this.constValue.formVersion.third?(y="div[data-gid="+u+"]",p="div[data-gid="+u+"]",a=ecount.delimiter+r+ecount.delimiter+u,this.drag=new ecount.gridV2.modules.dragGridBySelector(w,{window:this.optLayout.window,layer:this.optLayout.layer,panel:this.optLayout.panelContainer,body:this.optLayout.scrollContainer,domEventPrefixId:ecount.delimiter+r+ecount.delimiter+u+ecount.delimiter+"1",eventPrefixId:a,moveArea:this.optDrag.moveArea,ecPageID:r,ecGridId:c,layoutSelector:y,className:"gridDrag-enable-v1",dragSelector:".gridDrag-enable",dragableContainerSelector:".gridDrag-group",dragableLayoutSelector:p,dropableContainerSelector:[".gridDrag-group"],dropSelector:".gridDrop-enable",dragType:"table",dragMethod:this.optDrag.direction,mouseIconElement:{use:!0},shadowBox:{use:!0},caretIcon:{use:!1}},f)):this.optForm.version==this.constValue.formVersion.fourth&&(y=".areaselect-content",p=".areaselect-content",v=ecount.delimiter+r+ecount.delimiter+u,this.dragCaret=new ecount.gridV2.modules.dragGridByCaret(w,{window:this.optLayout.window,layer:this.optLayout.layer,panel:this.optLayout.panelContainer,body:this.optLayout.scrollContainer,domEventPrefixId:v+ecount.delimiter+"3",eventPrefixId:v,moveArea:this.optDrag.moveArea,ecPageID:r,ecGridId:c,layoutSelector:y,className:"gridDrag-enable-v1",dragSelector:["grid-ns-move","grid-ew-move","grid-move"],dragableContainerSelector:".gridDrag-group",dragableLayoutSelector:p,dropableContainerSelector:[".gridDrag-group"],dropSelector:".gridDrop-enable",dragType:"table",dragMethod:this.optDrag.direction,mouseIconElement:{use:!0},shadowBox:{use:!1},caretIcon:{use:!0}},f)),[this.constValue.formVersion.second,this.constValue.formVersion.third].contains(this.optForm.version)){if(this.optCommon.columnType==this.constValue.columnType.single)for(e in this.constEvent.drag)this.constEvent.drag.hasOwnProperty(e)&&(f.remove(this.constEvent.drag[e]+a),f.register(this.constEvent.drag[e]+a,n,ecount.gridV2.handler.drag[e]));else if(this.optCommon.columnType==this.constValue.columnType.multi)for(e in this.constEvent.drag)this.constEvent.drag.hasOwnProperty(e)&&(f.remove(this.constEvent.drag[e]+a),f.register(this.constEvent.drag[e]+a,n,ecount.gridV2.handler.dragTableMulti[e]))}else if(this.constValue.formVersion.fourth==this.optForm.version){if(this.optCommon.columnType==this.constValue.columnType.single)for(e in this.constEvent.drag)this.constEvent.drag.hasOwnProperty(e)&&(f.remove(this.constEvent.drag[e]+v),f.register(this.constEvent.drag[e]+v,n,ecount.gridV2.handler.dragSingleSectionCaret[e]));else if(this.optCommon.columnType==this.constValue.columnType.multi)for(e in this.constEvent.drag)this.constEvent.drag.hasOwnProperty(e)&&(f.remove(this.constEvent.drag[e]+v),f.register(this.constEvent.drag[e]+v,n,ecount.gridV2.handler.dragMultiSectionCaret[e]))}else this.__events.remove(this.constEvent.drag.dragStartPrepare+ecount.delimiter+r+ecount.delimiter+u),this.__events.register(this.constEvent.drag.dragStartPrepare+ecount.delimiter+r+ecount.delimiter+u,n,ecount.gridV2.handler.dragTableTree.dragStartPrepare),this.__events.remove(this.constEvent.drag.dragStartFinish+ecount.delimiter+r+ecount.delimiter+u),this.__events.register(this.constEvent.drag.dragStartFinish+ecount.delimiter+r+ecount.delimiter+u,n,ecount.gridV2.handler.dragTableTree.dragStartFinish),this.__events.remove(this.constEvent.drag.dragMovePrepare+ecount.delimiter+r+ecount.delimiter+u),this.__events.register(this.constEvent.drag.dragMovePrepare+ecount.delimiter+r+ecount.delimiter+u,n,ecount.gridV2.handler.dragTableTree.dragMovePrepare),this.__events.remove(this.constEvent.drag.dragMoveFinish+ecount.delimiter+r+ecount.delimiter+u),this.__events.register(this.constEvent.drag.dragMoveFinish+ecount.delimiter+r+ecount.delimiter+u,n,ecount.gridV2.handler.dragTableTree.dragMoveFinish),this.__events.remove(this.constEvent.drag.dragEndPrepare+ecount.delimiter+r+ecount.delimiter+u),this.__events.register(this.constEvent.drag.dragEndPrepare+ecount.delimiter+r+ecount.delimiter+u,n,ecount.gridV2.handler.dragTableTree.dragEndPrepare),this.__events.remove(this.constEvent.drag.dragEndFinish+ecount.delimiter+r+ecount.delimiter+u),this.__events.register(this.constEvent.drag.dragEndFinish+ecount.delimiter+r+ecount.delimiter+u,n,ecount.gridV2.handler.dragTableTree.dragEndFinish),this.__events.remove(this.constEvent.drag.dragMovePossible+ecount.delimiter+r+ecount.delimiter+u),this.__events.register(this.constEvent.drag.dragMovePossible+ecount.delimiter+r+ecount.delimiter+u,n,ecount.gridV2.handler.dragTableTree.dragMovePossible),this.__events.remove(this.constEvent.drag.dragBeforeMovingStart+ecount.delimiter+r+ecount.delimiter+u),this.__events.register(this.constEvent.drag.dragBeforeMovingStart+ecount.delimiter+r+ecount.delimiter+u,n,ecount.gridV2.handler.dragTableTree.dragBeforeMovingStart),this.__events.remove(this.constEvent.drag.dragEndCompleted+ecount.delimiter+r+ecount.delimiter+u),this.__events.register(this.constEvent.drag.dragEndCompleted+ecount.delimiter+r+ecount.delimiter+u,n,ecount.gridV2.handler.dragTableTree.dragEndCompleted),this.__events.remove(this.constEvent.drag.getColumnSectionType+ecount.delimiter+r+ecount.delimiter+u),this.__events.register(this.constEvent.drag.getColumnSectionType+ecount.delimiter+r+ecount.delimiter+u,n,ecount.gridV2.handler.drag.getColumnSectionType)}this.optResize.use&&(this.resize=new ecount.gridV2.modules.resize({history:n.core.history,resizeType:this.optResize.resizeType,resizeTarget:this.optResize.target,heightSections:this.optResize.heightSections,enableColumns:this.optResize.enableColumns,groupColumns:this.optResize.groupColumns,formVersion:this.optForm.version,maxSize:this.optResize.maxSize},{container:this.optLayout.container,body:this.optLayout.scrollContainer,ecPageID:this.optCommon.ecPageId},f),this.__events&&(this.__events.remove(this.constEvent.resize.resizeStart),this.__events.register(this.constEvent.resize.resizeStart,n,ecount.gridV2.handler.resize.resizeStart),this.__events.remove(this.constEvent.resize.resizeEnable),this.__events.register(this.constEvent.resize.resizeEnable,n,ecount.gridV2.handler.resize.resizeEnable),this.__events.remove(this.constEvent.resize.resizeMove),this.__events.register(this.constEvent.resize.resizeMove,n,ecount.gridV2.handler.resize.resizeMove),this.__events.remove(this.constEvent.resize.resizeEnd),this.__events.register(this.constEvent.resize.resizeEnd,n,ecount.gridV2.handler.resize.resizeEnd)));this.optFix.columnFixed>0||this.optFix.rowFixed>0||this.optFix.headFixed||this.optFix.headerFix?this.fix?this.fix.reset&&this.fix.reset():this.fix=new ecount.gridV2.view.fix(n,this.defaultDatas):this.fix&&this.fix.destroyAll&&this.fix.destroyAll();this.optCommon.gridType==this.constValue.gridType.editable?(this.keyboard?this.keyboard.reset():this.keyboard=new ecount.gridV2.modules.keyboard.edit,this.editLayer?this.editLayer.reset():this.editLayer=new ecount.gridV2.modules.editLayer,ecount.common.isTrue(this.optEditable.isClipboardMode)&&(this.clipboard?this.clipboard.reset():this.clipboard=new ecount.gridV2.modules.clipboard)):this.optKeyboard.useMoveCursor?this.keyboard?this.keyboard.reset():this.keyboard=new ecount.gridV2.modules.keyboard.list:this.keyboard&&(this.keyboard.destroyAll&&this.keyboard.destroyAll(),this.keyboard=null)},initFormLayout:function(){var n=$(this.optLayout.container).scrollParent(),i=n.length>0?n[0]:null,t=$(this.optLayout.container).closest(".col-xs-8"),r=t.length>0?t[0]:null;this.optLayout.scrollContainer||(this.optLayout.scrollContainer=i);this.optLayout.panelContainer||(this.optLayout.panelContainer=r)},initCreateFormInstances:function(){},bindEventContextmenu:function(n){var t=typeof n!=jQuery?$(n):n;t.on("contextmenu.dropdownmenu_"+this.optCommon.ecPageId+"_"+this.optCommon.ecGridId,{scope:this},function(n){var r=n.target,u=$(r),t=u.closest("#"+n.data.scope.optLayout.containerSelector),i;return t&&t.length>0?!1:(i=ec$.parseElement(n.target),i.ecService?!1:void 0)})},bindEventMouseenterDropdownmenu:function(n){var t=typeof n!=jQuery?$(n):n;if(this.optForm.version==this.constValue.formVersion.second||this.optDropdown.useDropdown){t.filter(function(n,t){return t.tagName=="TH"||t.tagName=="TD"&&/special-row-\d+/.test(t.getAttribute("data-key"))}).attr("data-service","layer.dropdown");$(document.body).on("mousemove.dropdownmenu_"+this.optCommon.ecPageId+"_"+this.optCommon.ecGridId,function(n){var t=ec$.parseElement(n.target);this.optCommon.ecPageId==t.ecPageID&&t.gridID==this.optCommon.ecGridId&&ecount.gridV2.handler.txDropdownmenu.mousemove.call(this,null,n)}.bind(this))}else(this.optForm.version==this.constValue.formVersion.third||this.optForm.version==this.constValue.formVersion.fourth)&&this.selector&&this.selector.addElement(n)},unbindEventMouseenterDropdownmenu:function(n){var t=typeof n!=jQuery?$(n):n;this.optCommon&&t.off("mousemove.dropdownmenu_"+this.optCommon.ecPageId+"_"+this.optCommon.ecGridId)},bindEventMouseleaveDropdownmenu:function(n){var i=typeof n!=jQuery?$(n):n,t=this;$(document.body).on("mouseleave.dropdownmenu_"+this.optCommon.ecPageId+"_"+this.optCommon.ecGridId,function(n){ecount.gridV2.handler.txDropdownmenu.mouseleave.call(t.mixinOption,null,n)})},unbindEventMouseleaveDropdownmenu:function(n){var t=typeof n!=jQuery?$(n):n;this.optCommon&&t.off("mouseleave.dropdownmenu_"+this.optCommon.ecPageId+"_"+this.optCommon.ecGridId)},bindEventMouseupDropdownmenu:function(n){var i=typeof n!=jQuery?$(n):n,t=this;i.on("mouseup.dropdownmenu_"+this.optCommon.ecPageId+"_"+this.optCommon.ecGridId,{scope:this},function(n){var i=ec$.parseElement(n.target);i.ecService!="service.layer"&&[t.constValue.selector.state.mousedown,t.constValue.selector.state.mousemove,t.constValue.selector.state.dragable].find(function(n){return n==t.mixinOption.viewSelector.__datas.state})&&t.__core.state=="none"&&t.mixinOption.viewSelector.getStartBoundary().isValid()&&t.mixinOption.viewSelector.getEndBoundary().isValid()&&t.__core.fn.showLayerByEvent(n)})},unbindEventMouseupDropdownmenu:function(n){var t=typeof n!=jQuery?$(n):n;this.optCommon&&t.off("mouseup.dropdownmenu_"+this.optCommon.ecPageId+"_"+this.optCommon.ecGridId)},unbindEventMousemoveScroll:function(n){var t=typeof n!=jQuery?$(n):n;this.optCommon&&t.off("mousemove.moveScroll_"+this.optCommon.ecPageId+"_"+this.optCommon.ecGridId)},unbindEventMouseupScroll:function(n){var t=typeof n!=jQuery?$(n):n;this.optCommon&&t.off("mouseup.moveScroll_"+this.optCommon.ecPageId+"_"+this.optCommon.ecGridId)},bindWidgetElement:function(n){for(var i,o=this.dataRow.getUnmappingWidgetInstances(n),e=[],t,r,f,u;i=o.pop();)t=this.dataRow.getViewDataWidgetInstance(n,i),t&&this.constValue.nativeControlInWidget[t.controlType]&&(r=i.split(ecount.constValue.gridDelimiter),f="div.control",t&&this.constValue.combineControlWidget[t.controlType]&&(f="div.control-set"),u=this.cell.getCellElement(r[0],r[1],r[2]),u.cell&&u.map.cellInfo.adjustmentValue!=1?t.set$El($(u.cell).find(f)):e.push(i));this.dataRow.setUnmappingWidgetInstances(n,e)},bindPopover:function(n){var r,t;if(n)for(t in n){if(n.hasOwnProperty(t)&&n[t]){var i=t.split(ecount.constValue.gridDelimiter),u=this.cell.getCellElement(i[0],i[1],i[2]),f,o=100,e=300;if(u.map.cellInfo.adjustmentValue!=1){r=$(u.cell);this.defaultDatas.popover[t]&&this.defaultDatas.popover[t].created&&this.destroyPopover(i[0],i[1],i[2]);n[t].targetSelector&&(r=r.find(n[t].targetSelector));_.isEmpty(n[t].delay)&&(n[t].delay={show:ecount.common.mouseHoverInTime,hide:ecount.common.mouseHoverOutTime});ecount.popover.create(r,n[t]);n[t].created=!0;r.popover().one("show.bs.popover",function(){var n=$(this).data("bs.popover");f!==undefined?n.tip().css({width:f+"px",maxWidth:e+"px"}):n.tip().css({minWidth:o+"px",maxWidth:e+"px"})});this.defaultDatas.popover[t]=n[t]}}delete n[t]}},destroyPopover:function(n,t,i){var u=[n,t,i].join(ecount.constValue.gridDelimiter),r=this.cell.getCellElement(n,t,i),f,e;r&&r.map&&r.map.cellInfo&&r.map.cellInfo.adjustmentValue!=1&&(f=$(r.cell),ecount.popover.destroy(f),e=this.dataRow.getPopoverList(),delete e.popover[u],delete this.defaultDatas.popover[u])},bindTooltip:function(n){var i,t,r,u;if(n)for(t in n)n.hasOwnProperty(t)&&n[t]&&(r=t.split(ecount.constValue.gridDelimiter),u=this.cell.getCellElement(r[0],r[1],r[2]),u.map.cellInfo.adjustmentValue!=1&&(i=$(u.cell),this.defaultDatas.tooltip[t]&&this.defaultDatas.tooltip[t].created&&ecount.popover.destroy(i,"tooltip"),n[t].targetSelector&&(i=i.find(n[t].targetSelector)),n[t].delay=n[t].delay||{},n[t].delay.show=typeof n[t].delay.show=="number"?n[t].delay.show:ecount.common.mouseHoverInTime,n[t].delay.hide=typeof n[t].delay.hide=="number"?n[t].delay.hide:ecount.common.mouseHoverOutTime,ecount.popover.create(i,n[t]),n[t].created=!0,this.defaultDatas.tooltip[t]=n[t])),delete n[t]},destroyTooltip:function(n,t,i){var u=[n,t,i].join(ecount.constValue.gridDelimiter),r=this.cell.getCellElement(n,t,i),f,e;r&&r.map&&r.map.cellInfo&&r.map.cellInfo.adjustmentValue!=1&&(f=$(r.cell),ecount.popover.destroy(f,"tooltip"),e=this.dataRow.getPopoverList(),delete e.tooltip[u],delete this.defaultDatas.tooltip[u])},setTooltipVisible:function(n,t,i,r){var e=this.cell.getCellElement(n,t,i),f=e&&$(e.cell),u;f&&(u=f.tooltip&&f.tooltip().data("bs.tooltip"),u&&(r?u.enable():u.disable()))},beginPopoverTransaction:function(){var n=this.dataRow.getPopoverList();this.bindPopover(n.popover);this.bindTooltip(n.tooltip)},setTextareaHeight:function(n,t){t=t||{};var i=this.dataRow.getTextareaRows(n),r=Object.keys(i);r.forEach(function(r){var u=i[r],f=Object.keys(u);($.isEmpty(t.textareaRowId)||t.textareaRowId===r)&&f.forEach(function(i){var f=u[i]&&u[i].columnIds||[];f.forEach(function(f){t.lineHeight=u[i].height;t.isTargetTextarea=t.textareaColumnId===f&&t.textareaRowId===r;this.cell.setTextareaHeight(n,f,r,t)}.bind(this))}.bind(this))}.bind(this))}});ecount.gridV2.viewTableTable=$.Class(ecount.gridV2.viewTable,{initProperties:function(){ecount.gridV2.viewTable.prototype.initProperties.apply(this,arguments)},setContentInfo:function(){for(var n,t=this.defaultDatas.$container.find(this.optTable.tableTagName).filter(function(t,i){return n=i.getAttribute("data-gridid"),/grid-(.+)-\d+$/g.test(n)}),i=0,r=t.length;i<r;i++)n=t[i].getAttribute("data-gridid"),this.defaultDatas.tableKeyList[n]=t[i];this.defaultDatas.$tables=t},initDataValue:function(){var r=["COLGROUP","THEAD","TBODY","TFOOT"],t,i,n,u;for(t in this.defaultDatas.tableKeyList)for(this.defaultDatas.tableSectionIndex[t]={},i=this.defaultDatas.tableKeyList[t],n=0,u=i.children.length;n<u;n++)i.children[n].tagName&&i.children[n].tagName==r[n]&&(this.defaultDatas.tableSectionIndex[t][r[n].toLowerCase()+"Index"]=n)},initCreateInstances:function(n){ecount.gridV2.viewTable.prototype.initCreateInstances.apply(this,arguments);this.layout=new ecount.gridV2.view.layout(n);this.container=new ecount.gridV2.view.container(n);this.table=new ecount.gridV2.view.table(n,this.defaultDatas);this.row=new ecount.gridV2.view.row(n,this.defaultDatas);this.column=new ecount.gridV2.view.column(n,this.defaultDatas);this.cell=new ecount.gridV2.view.cellTable(n,this.defaultDatas);this.col=new ecount.gridV2.view.col(n,this.defaultDatas)},bindEventMouseenterDropdownmenu:function(n){ecount.gridV2.viewTable.prototype.bindEventMouseenterDropdownmenu.apply(this,arguments);var t=typeof n!=jQuery?$(n):n;(this.optForm.version==this.constValue.formVersion.second||this.optDropdown.useDropdown)&&t.filter(function(n,t){return t.tagName=="TH"||t.tagName=="TD"&&/special-row-\d+/.test(t.getAttribute("data-key"))}).attr("data-service","layer.dropdown")},bindEventMouseleaveDropdownmenu:function(){ecount.gridV2.viewTable.prototype.bindEventMouseleaveDropdownmenu.apply(this,arguments)},getSectionTypeByElement:function(n){var t={sectionType:null,columnSectionType:null,detailSectionType:null},r,s;if(n){if(r=$(n).closest("th, td"),r.length==0)return t;var u=r[0],i=u.getAttribute("data-rowtype"),h=u.getAttribute("data-key"),c=u.getAttribute("data-columnid");i=typeof i=="string"?i.trim():i;var f=r.closest("tr"),o=f.closest("thead, tbody, tfoot"),l=f.length==0?-1:f[0].rowIndex,e=o.length==0?null:o[0].tagName.toLowerCase();if(e==null||l==-1)return t;s=this.dataRow.getViewDataCellMap(e,c,h);t.sectionType=e;t.columnSectionType=s.cellInfo.columnSectionType;t.detailSectionType=this.constValue.sectionSeparateValue[i]}return t},rowAdd:function(){},rowInsert:function(){},rowRemove:function(){},changeToolbarHTML:function(n,t,i,r,u){var e=!0,f,o,s;t?(f=this.defaultDatas.$container.find("div.grid-top-html"),f.length==0&&(e=!1,f=$("<div id='grid-top-html'><div class='pull-left'><\/div><div class='pull-right text-right'><\/div><\/div>"))):(f=this.defaultDatas.$container.find("div.grid-bottom-html"),f.length==0&&(e=!1,f=$("<div id='wrapper-toolbar grid-bottom-html' style='width: "+this.dataColumn.getTotalWidth()+"px'><div class='pull-left'><\/div><div class='pull-right text-right'><\/div><\/div>")));o=r=="last"?f.last():r=="first"?f.fist():/\d+/g.test(r)?f.eq(r):f.eq(0);s=i?o.find(".pull-left"):o.find(".pull-right");u!==!0&&s.html("");s.append("<div inline-group toolbar-text>"+n+"<\/div>");e||(t?this.defaultDatas.$container.append(f):this.defaultDatas.$container.append(f))},rowAddClass:function(n,t,i){this.row.addClass(n,t,i)},rowRemoveClass:function(n,t,i){this.row.removeClass(n,t,i)},cellSetValue:function(){},render:function(){var n,s,l,h,c,u,v,r,o,i,t,f,a;if(this.table.render(),this.fix&&this.fix.render(),this.outerHorizontal&&this.outerHorizontal.bindEventMousedown(),this.outerVertical&&this.outerVertical.bindEventMousedown(),this.selector&&this.selector.render().bindEventMousedown(),this.drag&&(this.drag.render(),this.drag.bindEventMousedown()),this.dragLine&&(this.dragLine.render(),this.dragLine.bindEventMousedown()),this.dragCaret&&(this.dragCaret.render(),this.dragCaret.bindEventMousedown()),this.resize&&this.resize.render(),this.outerHorizontal&&this.outerHorizontal.render(),this.outerVertical&&this.outerVertical.render(),this.optCommon.gridType==this.constValue.gridType.editableForm)if(this.optForm.version==this.constValue.formVersion.third){var t=[this.theadType,this.tbodyType,this.tfootType],e={},i={},n;if(this.constValue.columnType.single==this.optCommon.columnType&&(t=[this.theadType]),this.optMerge.useContextmenu&&this.optMerge.contextmenu)for(r=0,o=t.length;r<o;r++){for(n=[],u=this.optMerge.contextmenu._DEPTH_1||[],s=0,l=u.length;s<l;s++)h=u[s],c=h.nodeIndex,n.push({use:!0,label:h.depthName,value:c}),i[c]=h.depthEventFunction;e[t[r]]=n}else{function f(t){var i=u.find(function(n){return n.value==t.value});i?n.push(i):n.push(t)}for(r=0,o=t.length;r<o;r++){if(u=this.optContextmenu.itemList&&this.optContextmenu.itemList[t[r]]||[],v=u.reduce(function(n,t){return t.use===!1&&n.push(t.value),n},[]),n=[],this.optSelector.version==this.constValue.selector.version.singleSection)f({index:0,use:!0,label:ecount.resource.LBL02792,value:"add"}),f({index:1,use:!0,label:ecount.resource.LBL01593,value:"setting"}),f({index:2,use:!0,label:ecount.resource.LBL10736,value:"allsetting"}),f({index:3,use:!0,label:ecount.resource.LBL19460,value:"leftFixed"}),f({index:4,use:!0,label:ecount.resource.LBL19461,value:"cancelLeftFixed"}),f({index:5,use:!0,label:ecount.resource.LBL10699,value:"merge"}),f({index:6,use:!0,label:ecount.resource.LBL13743,value:"divide"}),f({index:7,use:!0,label:ecount.resource.LBL13744,value:"insertColumn"}),f({index:8,use:!0,label:ecount.resource.LBL10388,value:"removeColumn"}),f({index:9,use:!0,label:ecount.resource.LBL13745,value:"insertRow"}),f({index:10,use:!0,label:ecount.resource.LBL10387,value:"removeRow"});else if(this.optSelector.version==this.constValue.selector.version.multiSection){function t(n){n.type=="section"&&(n.isChildDepth=!0,n.liCss="dropdown-menu-item-group",n.css="dropdown-menu-icon-list dropdown-menu-report",n.childItems&&n.childItems.forEach(function(n){t(n)}))}u.forEach(function(n){t(n)});n=u}e[t[r]]=n}this.constValue.columnType.single==this.optCommon.columnType&&(n=[],n.push({use:!0,label:ecount.resource.LBL12304,value:"totalSetting"}),e[this.tfootType]=n);this.optSelector.version==this.constValue.selector.version.singleSection?i=ecount.gridV2.handler.formV3Contextmenu:this.optSelector.version==this.constValue.selector.version.multiSection&&(i=ecount.gridV2.handler.formV4MultiSectionContextmenu)}this.__setting.setContextmenu(e);this.__setting.setContextmenuCallback(i)}else this.optForm.version==this.constValue.formVersion.fourth&&(i={},this.optSelector.handlerVersion==this.constValue.selector.handlerVersion.single?i=ecount.gridV2.handler.formV4SingleSectionContextmenu:this.optSelector.handlerVersion==this.constValue.selector.handlerVersion.multi?i=ecount.gridV2.handler.formV4MultiSectionContextmenu:this.optSelector.handlerVersion==this.constValue.selector.handlerVersion.custom&&(i=ecount.gridV2.handler.formV4CustomContextmenu),this.__setting.setContextmenuCallback(i));for(t=[this.theadType,this.tbodyType,this.tfootType],f=0,a=t.length;f<a;f++)this.bindWidgetElement(t[f]),this.setTextareaHeight(t[f]);this.beginPopoverTransaction();ecount.constValue.isIE&&this.optCommon.gridType==this.constValue.gridType.editable&&(this.defaultDatas.$container.hasClass("mb-10")||this.defaultDatas.$container.addClass("mb-10"))},destroyAll:function(){var i,n,t,r;if(this.defaultDatas){if(this.defaultDatas.popover)for(i in this.defaultDatas.popover)n=i.split(ecount.constValue.gridDelimiter),this.destroyPopover(n[0],n[1],n[2]);if(this.defaultDatas.tooltip)for(i in this.defaultDatas.tooltip)n=i.split(ecount.constValue.gridDelimiter),this.destroyTooltip(n[0],n[1],n[2])}if(this.__list)for(r=this.__list.length-1;r>-1;r--)t=this.__list[r],this[t]&&this[t].destroyAll&&this[t].destroyAll(),this[t]=null;this.unbindEventMouseenterDropdownmenu(document.body);this.unbindEventMouseleaveDropdownmenu(document.body);this.unbindEventMouseupDropdownmenu(document.body);this.unbindEventMouseupScroll(document.body);this.unbindEventMousemoveScroll(document.body)}});ecount.gridV2.data=function(){};ecount.gridV2.data.prototype={defaultOption:null,__list:null,column:null,row:null,paging:null,initGlobalValue:function(n){this.defaultOption=n;this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;$.extend(this,n.mixinOption);this.__setting=n.setting;this.__events=this.__setting.eventsGet();this.__list=null;this.__core=n.core;this.__api=this.__core.api;this.__option=n},initLazyGlobalValue:function(n){$.extend(this,n.mixinOption)},init:function(n){var o=this,f,e,i,t,u;this.initGlobalValue(n);this.column||(this.column=new ecount.gridV2.data.column,this.column.reset());this.row||(this.row=new ecount.gridV2.data.row,this.row.reset());this.optPaging.use?this.paging?this.paging.reset&&this.paging.reset():(this.paging=new ecount.gridV2.data.paging,this.paging.init(n)):this.paging&&(this.paging.destroyAll&&this.paging.destroyAll(),this.paging=null);this.defaultOption.dataColumn=n.mixinOption.dataColumn=this.column;this.defaultOption.dataRow=n.mixinOption.dataRow=this.row;var o=this,r=[this.theadType,this.tbodyType,this.tfootType],s=function(t){var i=o.__setting.getCheckBox(t);o.checkbox.init(t,$.extend(!0,{},i),n)};if(this.__core.drawCount>0&&this.__setting.getAfterRenderingUse()){for(t=0,u=r.length;t<u;t++)this.checkbox.addCheckBoxColumn(r[t],this.constValue.checkBoxPropertyName);this.__setting.setAfterRenderingUse(!1)}if(this.checkbox){for(f=this.checkbox.getCheckboxUseColumnList(this.tbodyType),e=!0,i=0;i<f.length;i++)if(f[i].use)if(!this.__setting.getCheckBoxAllRememberChecked(this.tbodyType,f[i].columnId)&&(this.__setting.getCheckBoxPagingRememberChecked(this.tbodyType,f[i].columnId)||this.__setting.getRemeberCustomCheckbox(this.tbodyType,f[i].columnId)))this.__setting.setCheckBoxPagingRememberChecked(this.tbodyType,f[i].columnId,!1),e=!1;else if(this.__setting.getCheckBoxremoveAfterRedraw())for(t=0,u=r.length;t<u;t++)this.checkbox.resetColumnId(r[t],f[i].columnId);if(e&&this.__setting.getCheckBoxremoveAfterRedraw())for(t=0,u=r.length;t<u;t++)s(r[t]);this.checkbox.initGlobalValue(n)}else{for(this.checkbox=new ecount.gridV2.data.checkbox,t=0,u=r.length;t<u;t++)s(r[t]);this.__setting.setAfterRenderingUse(!1)}this.optShaded.use?this.shaded?(this.optShaded.remember||this.shaded.reset(),this.shaded.initGlobalValue(n)):(this.shaded=new ecount.gridV2.data.shadedCollection,this.shaded.init(n)):this.shaded&&(this.shaded.destroyAll&&this.shaded.destroyAll(),this.shaded=null);this.tree||(this.tree=new ecount.gridV2.data.tree,this.tree.init(n),this.optCommon.gridStyle!=this.constValue.gridStyle.tree||this.optTree.treeOpenOnInit||this.__setting.setTreeOpenOnInit(0));this.constValue.gridType.editable==this.optCommon.gridType?this.validate||(this.validate=new ecount.gridV2.data.validation,this.validate.init(n)):this.validate&&(this.validate.destroyAll&&this.validate.destroyAll(),this.validate=null);[this.constValue.gridRenderType.typeSpecTran,this.constValue.gridRenderType.salaryPrint,this.constValue.gridRenderType.salaryPayrollBookList].contains(this.optCommon.renderType)&&(this.print?this.print.reset():(this.print=new ecount.gridV2.data.print,this.print.init(n)));this.__list=[];this.__list.push("column");this.__list.push("row");this.paging&&(n.mixinOption.dataPaging=this.paging,this.__list.push("paging"));this.checkbox&&(n.mixinOption.dataCheckbox=this.checkbox);this.sortable&&(n.mixinOption.dataSortable=this.sortable);this.shaded&&(n.mixinOption.dataShaded=this.shaded);this.tree&&(n.mixinOption.dataTree=this.tree,this.__list.push("tree"));this.validate&&(n.mixinOption.dataValidate=this.validate,this.__list.push("validate"));this.print&&(n.mixinOption.dataPrint=this.print,this.__list.push("print"));this.__events&&(this.__events.register(ecount.gridV2.columnEvent.initCompleted,null,this.row.init.bind(this.row)),this.__events.register(ecount.gridV2.rowEvent.initCompleted,null,this.column.render.bind(this.column)),this.__events.register(ecount.gridV2.columnEvent.renderCompleted,null,this.row.render.bind(this.row)),this.__events.register(ecount.gridV2.rowEvent.renderCompleted,null,this.renderCompleted.bind(this)));this.__setting.getCheckBoxUse()&&!this.__setting.getCheckBoxOriginalStyle()&&this.__setting.setCheckBoxCustomIndex(0);this.optSession&&this.optSession.createURL?this.createSessionKey(n):this.render()},createSessionKey:function(n){if(this.__api.add(this.__apiPrefixId+"$"+this.__apiPrefixIndex,{sectionType:this.theadType,option:n,url:this.optSession.createURL,data:Object.toJSON(this.optSession.param),progressbar:!1,resolve:this.callbackSuccess.bind(this),reject:this.callbackFail.bind(this),completed:this.callbackComplete.bind(this)}),this.__apiPrefixIndex+=1,this.__api.length()>0){this.__api.call();return}},callbackSuccess:function(n,t){if(this.optCommon&&this.optCommon.ecPageId&&!ecount.global.findPageInstance(this.optCommon.ecPageId)){this.__events&&this.__events.destroy();return}if(this.__core.drawCancel)return{result:!1};t&&t.Data&&(this.optSession.sid=t.Data.apiSessionKey)},callbackFail:function(){if(this.optCommon&&this.optCommon.ecPageId&&!ecount.global.findPageInstance(this.optCommon.ecPageId)){this.__events&&this.__events.destroy();return}if(this.__core.drawCancel)return{result:!1}},callbackComplete:function(n){if(this.optCommon&&this.optCommon.ecPageId&&!ecount.global.findPageInstance(this.optCommon.ecPageId)){this.__events&&this.__events.destroy();return}if(this.__core.drawCancel)return this.__events&&this.__events._triggerEvent(ecount.gridV2.renderEvent.cancelCompleted),{cancel:!0};n.state&&n.state=="success"&&this.render()},render:function(){this.column.init(this.defaultOption)},renderCompleted:function(){var u={},f={},e={},o={},s={},i={},h={},c={},et={},l={},a={},v={},y={},p={},r={},w={},b={},k={},d={},g={},nt={},tt={},it={},rt={},ut={},ft,t,n;this.optRow[this.tbodyType].isInitRowIndex=!1;for(n in this.optCommon)["settingPanel","templateType","widgetInitializer"].contains(n)||(u[n]=this.optCommon[n]);for(n in this.optLayout)["containerSelector"].contains(n)&&(f[n]=this.optLayout[n]);for(n in this.optTable)e[n]=this.optTable[n];for(n in this.optTree)o[n]=this.optTree[n];for(n in this.optPaging)s[n]=this.optPaging[n];for(n in this.optColumn)if(!["generator"].contains(n))if(["thead","tbody","tfoot"].contains(n)){i[n]={};for(t in this.optColumn[n])if(t=="customCell"){i[n][t]={};for(ft in this.optColumn[n][t])i[n][t][ft]=!0}else i[n][t]=this.optColumn[n][t]}else i[n]=this.optColumn[n];for(n in this.optForm)h[n]=this.optForm[n];for(n in this.optRow)c[n]=this.optRow[n];for(n in this.optEditable)et[n]=this.optEditable[n];for(n in this.optFormOption)l[n]=this.optFormOption[n];for(n in this.optHeader)a[n]=this.optHeader[n];for(n in this.optHeaderToolbar)v[n]=this.optHeaderToolbar[n];for(n in this.optFoot)y[n]=this.optFoot[n];for(n in this.optFootToolbar)p[n]=this.optFootToolbar[n];for(n in this.optCheckbox)if(["thead","tbody","tfoot"].contains(n)){r[n]={items:{}};for(t in this.optCheckbox[n].items)this.optCheckbox[n].items[t].use&&(r[n].items[t]=this.optCheckbox[n].items[t])}else r[n]=this.optCheckbox[n];if(this.optRowmoveable.use)for(n in this.optRowmoveable)w[n]=this.optRowmoveable[n];if(this.optNumbering.use)for(n in this.optNumbering)b[n]=this.optNumbering[n];for(n in this.optFix)k[n]=this.optFix[n];for(n in this.optKeyboard)d=this.optKeyboard[n];for(n in this.optContextmenu)g[n]=this.optContextmenu[n];for(n in this.optDrag)nt[n]=this.optDrag[n];for(n in this.optMatrixState)tt[n]=this.optMatrixState[n];for(n in this.optResize)it[n]=this.optResize[n];for(n in this.optSession)rt[n]=this.optSession[n];for(n in this.optShaded)ut[n]=this.optShaded[n];ecount.runtime.notify(ECountEvent.Type.INITIALIZED_WIDGET,null,{common:u,layout:f,table:e,tree:o,paging:s,column:i,form:h,row:c,formOption:l,header:a,headerToolbar:v,foot:y,footToolbar:p,checkbox:r,rowmoveable:w,numbering:b,fix:k,keyboard:d,contextmenu:g,drag:nt,matrixState:tt,resize:it,session:rt,shaded:ut});this.__events&&this.__events._triggerEvent(ecount.gridV2.event.init)},destroy:function(){var n,t;if(this.__list)for(t=this.__list.length-1;t>-1;t--)n=this.__list[t],this[n]&&this[n].destroyAll&&this[n].destroyAll(),this[n]=null;this.__events&&(this.__events.remove(ecount.gridV2.columnEvent.initCompleted),this.__events.remove(ecount.gridV2.rowEvent.initCompleted),this.__events.remove(ecount.gridV2.columnEvent.renderCompleted),this.__events.remove(ecount.gridV2.rowEvent.renderCompleted))},destroyAll:function(){this.destroy()}};ecount.gridV2.render=function(){};ecount.gridV2.render.prototype={initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__data=n.core.data;this.__setting=n.setting;this.__events=this.__setting.eventsGet();$.extend(this,n.mixinOption);this.__list=[];this.detailItemsGridObj={}},init:function(n){this.initGlobalValue(n);this.table=new ecount.gridV2.render.table(n);this.__list.push(this.table);this.__events.listeners[ecount.gridV2.renderEvent.renderCompleted]||this.__events.register(ecount.gridV2.renderEvent.renderCompleted,null,this.renderCompleted.bind(this));ecount.gridV2.config.initRenderPerformance&&(ecount.gridV2.config.initRenderPerformanceStart=(new Date).getTime());this.table.init(n);ecount.gridV2.config.initRenderPerformance&&ecount.gridV2.util.log(String.format("init render performance: {0}ms",(new Date).getTime()-ecount.gridV2.config.initRenderPerformanceStart))},render:function(){ecount.gridV2.config.renderRenderPerformance&&(ecount.gridV2.config.renderRenderPerformanceStart=(new Date).getTime());this.table.render()},attachDetailGrid:function(n){var r=this.__core.data.print&&this.__core.data.print.getDetailGridList()||[],t=this.detailItemsGridObj,e=n.detailGrid,u,i,f;if(($(e).children().each(function(n,i){var r=i.getAttribute("data-detailtableid");r?t[r]=(t[r]||"")+i.outerHTML:$(i).find("table").each(function(n,i){r=i.getAttribute("data-detailtableid");r&&(t[r]=(t[r]||"")+i.outerHTML)})}),u=this.__core.render.table.getDetailTableList(),!u||!(u.length>0))&&r.length>0)for(i=0;i<r.length;i++)f=t[r[i]]||"",n.resultHTML=n.resultHTML.replaceAll("<"+r[i]+">",f)},renderCompleted:function(n){var f,h,s;if(ecount.gridV2.config.renderRenderPerformance&&ecount.gridV2.util.log(String.format("render render performance: {0}ms",(new Date).getTime()-ecount.gridV2.config.renderRenderPerformanceStart)),this.optFormOption.detailGridSettings&&this.attachDetailGrid(n),f=this.__core.render.table.getDetailTableList(),f&&f.length>0){this.__core.render.table.renderDetailGrid(n);return}var t=$(n.resultHTML),r=this.__core.data.row.getAll(this.tbodyType),u=this.dataPaging?this.dataPaging.getTotalRowCount():r.length,i=$("<div><\/div>"),e=this.dataPrint&&this.dataPrint.getLimitPartitialRowEndIndex()||0,o="finish";this.optCommon.renderType&&!this.optLayout.printIframeArea&&(h=$('<div id="tempIframeForPrint" style="width:0px;height:0px;position:absolute;top:-10000px;left:-10000px;overflow:hidden;"><\/div>'),this.optLayout.printIframeArea=h[0]);this.optCommon.renderType==this.constValue.gridRenderType.salaryPayrollBookList?(s=this.dataPrint&&this.dataPrint.getIsSeperateRendering()||!1,u>e?(ecount.global.setTimeout(this.optCommon.ecPageId,function(){this.dataPrint.setLimitPartitialRowStartIndex(e);var n={};ecount.gridV2.util.log("call setTimeout");n.dataRowStartIndex=e;n.dataRowEndIndex=u;n.renderType=this.constValue.renderMode.partitialRenderingRow;this.dataRow.view.makeViewData(this.tbodyType,n)}.bind(this),0),s?this.__core.$container.append(t):(this.__core.$container&&this.__core.$container.children.length>0&&(this.__core.$container.html(""),this.__core.$container.append(i)),this.dataPrint&&this.dataPrint.setIsSeperateRendering(!0),i.replaceWith(t),this.__core.$container.removeClass("hide"),this.optCommon.gridAreaObj=t),o="ongoing"):s==!1?(this.__core.$container&&this.__core.$container.children.length>0&&(this.__core.$container.html(""),this.__core.$container.append(i)),i.replaceWith(t),this.__core.$container.removeClass("hide"),this.optCommon.gridAreaObj=t):this.__core.$container&&this.__core.$container.append(t),this.optLayout.printIframeArea&&this.__core.container.appendChild(this.optLayout.printIframeArea),this.prettifyPrintableHTML(t,{isInitailize:!0,isSetWidth:!0,isSetHeight:!0,isHideBack:!0}),this.optFormOption.usePaging&&this.__core.data.print.setInitPrintPage(t),this.__events&&this.__events._triggerEvent(ecount.gridV2.event.renderComplete,{widgetInstances:n.widgetInstances,tooltip:n.tooltip,popover:n.popover,gridWidth:null,totalDataCount:u,dataCount:r.length,dataRows:r,printPageCount:null,isPositionRelative:this.optDrag&&this.optDrag.isPartitionPage===!0,partitialRenderingStatus:o})):(this.__core.$container&&this.__core.$container.children.length>0&&(this.__core.$container.html(""),this.__core.$container.append(i)),i.replaceWith(t),this.__core.$container.removeClass("hide"),this.optCommon.gridAreaObj=t,this.optFormOption.usePaging&&this.__core.data.print.setInitPrintPage(t),this.optLayout.printIframeArea&&this.__core.container.appendChild(this.optLayout.printIframeArea),this.prettifyPrintableHTML(t,{isInitailize:!0,isSetWidth:!0,isSetHeight:!0,isHideBack:!0}),this.__events&&this.__events._triggerEvent(ecount.gridV2.event.renderComplete,{widgetInstances:n.widgetInstances,tooltip:n.tooltip,popover:n.popover,gridWidth:null,totalDataCount:u,dataCount:r.length,dataRows:r,printPageCount:null,isPositionRelative:this.optDrag&&this.optDrag.isPartitionPage===!0,partitialRenderingStatus:o}));this.optDrag.dragableModule&&this.__core.fn.resetGridDraggable()},destroyAll:function(){this.__list&&this.__list.forEach(function(n){n.destroyAll&&n.destroyAll()})},prettifyPrintableHTML:function(n,t){var i=this,r=t||{},w=r.isSetWidth===!0,b=r.isSetHeight===!0,k=r.isHideBack===!0,d=r.printableSize?!0:!1,h=r.isInitailize?!0:!1,v=$.isNumber(r.marginBottom)?parseInt(r.marginBottom):0,y=0,c=!1,e=null,o=n.filter("div.wrapper-print"),l,s,a;if(o.length==0&&(o=n.find("div.wrapper-print")),this.optCommon.renderType&&this.optCommon.renderType===this.constValue.gridRenderType.typeSpecTran&&this.optForm.data&&this.optForm.data.formType=="SF030")for(l=o.find("div.print-contents-page-number"),s=0;s<l.length;s++)a=$(l[s]),a.text()==""&&a.remove();var u=0,f=0,p=0;if(h&&this.optCommon.renderType==this.constValue.gridRenderType.salaryPayrollBookList&&(i.__core.pageInfo||(i.__core.pageInfo=[]),u=i.__core.pageInfo.length==0?0:i.__core.pageInfo[i.__core.pageInfo.length-1].bottomHeight,f=u,p=i.optLayout.contents.offsetHeight),o.each(function(n,t){var o=$(t),g={},nt=!1,it=o.attr("print-page"),a,tt,et,ut,s,ft,ot;if(c=o.hasClass("hide"),c&&o.removeClass("hide"),it&&d&&!$.isEmptyObject(r.printableSize[it]))a=r.printableSize[it],g.width=typeof a.width=="number"?a.width+"px":a.width,g.height=typeof a.height=="number"?a.height+"px":a.height,nt=!0;else{if(w){var st=o.find(".wrapper-print-content"),l=0,rt=0;st.filter(function(n,t){var i=$(t);rt=i.length>0?i.outerWidth():0;l=rt>l?rt:l});l>0&&(l=l<650?650:l,y===0&&(i.optFormOption.typeSpecTranMaxWidth=l),g.width=l+"px",nt=!0)}b&&(tt=o.find(".wrapper-print-content:last"),et=tt.position(),ut=o.find(".grid-print-cut-line").position()||{top:0},s=tt.outerHeight(),s=s+et.top,s=ut.top>s?Math.ceil(ut.top):s,ft=(f==0?10:0)+2,f=u+s+ft,n===0&&(e=tt.find("img")),h&&i.optCommon.renderType==i.constValue.gridRenderType.salaryPayrollBookList&&(ot=o.attr("print-page"),i.__core.pageInfo.push({key:ot,el:o[0],topHeight:u,bottomHeight:f,divHeight:s,contentsMargin:ft})),s>0&&(g.height=s+"px",nt=!0,v>0&&(g["margin-bottom"]=v+"px")))}nt===!0&&o.css(g);k===!0&&c&&o.addClass("hide");h&&i.optCommon.renderType==i.constValue.gridRenderType.salaryPayrollBookList&&u>p&&o.addClass("hide");y++;u=f}),e&&e.length>0)e.eq(0).on("load",function(){var n=this.__core.pageInfo,r,i,t;if(n&&n.length>1&&(r=n[0].el.scrollHeight-n[0].divHeight,i=0,r>0))for(t=0;t<n.length;t++)n[t].divHeight=n[t].divHeight+r,n[t].topHeight=i,n[t].bottomHeight=i+n[t].divHeight+n[t].contentsMargin,i=n[t].bottomHeight,n[t].el.style.height=n[t].divHeight+"px"}.bind(this));ecount.gridV2.logger.log("pageInfo");ecount.gridV2.logger.log(i.__core.pageInfo)}};ecount.gridV2.data.column=function(){};ecount.gridV2.data.column.prototype={add:function(n,t,i,r){var l=[this.theadType,this.tbodyType,this.tfootType],k,d,nt,o,v,u,h,c,y,s,g,f,b,a;if(this.optCommon.columnType==this.constValue.columnType.multi&&(l=[n]),k=this.optColumn.generator,d={},r.columns&&(r.columns[0]&&r.columns[0].constructor==Array||(nt=r.columns.slice(0),nt.splice(0,0,0,0),r.columns=[[]],r.columns[0].splice.apply(r.columns[0],nt))),t=="right")for(o=i.right+1,s=0,g=l.length;s<g;s++){y=l[s];this.setStructureInfo(y);var p=this._columnKeys,e=this._columnRows,w=this._columns;if(w.length!=0)if(this.constValue.columnType.single==this.optCommon.columnType&&y==this.theadType||this.constValue.columnType.multi==this.optCommon.columnType){for(v=[],f=0,b=e.length;f<b;f++)if(v[f]||(v[f]=[]),r.columns&&r.columns[f])for(a=r.columns[f].length-1;a>-1;a--)u=k.create(l[s],r.columns[f][a]),u.lineNo=f+1,u.GROUP_FLAG=e[f][0].GROUP_FLAG,u.POSITION=n==this.tfootType?this.constValue.sectionType.tfooter:n,u.fontColor=="000000"&&(u.fontColor=""),h=e[f][o]&&e[f][o].id,c=e[f][o-1]&&e[f][o-1].id,h&&(this._columnMap[h].prevColumnId=u.id),c&&(this._columnMap[c].nextColumnId=u.id),this._columnMap[u.id]={nextColumnId:h,prevColumnId:c},p[u.id]=u,e[f].splice(o,0,u),w.splice(e[0].length*f+o,0,u),v[f].push(u),this.makeColumnDataType(y,u),this.constValue.columnType.single==this.optCommon.columnType?(u.className=this.getColumnClassName(l[s],u),u.columnOption.className=this.getColumnClassName(l[s],u.columnOption),u.footerOption.className=this.getColumnClassName(l[s],u.footerOption),ecount.bitmask.bitmaskEncode(u),ecount.bitmask.bitmaskEncode(u.columnOption),ecount.bitmask.bitmaskEncode(u.footerOption)):this.constValue.columnType.multi==this.optCommon.columnType&&(u.className=this.getColumnClassName(l[s],u),u.columnOption=u.columnOption||{},u.footerOption=u.footerOption||{},ecount.bitmask.bitmaskEncode(u),ecount.bitmask.bitmaskEncode(u.columnOption),ecount.bitmask.bitmaskEncode(u.footerOption));else u=k.create(l[s]),this.constValue.columnType.single==this.optCommon.columnType?(u.className=this.getColumnClassName(l[s],u),u.columnOption.className=this.getColumnClassName(l[s],u.columnOption),u.footerOption.className=this.getColumnClassName(l[s],u.footerOption),ecount.bitmask.bitmaskEncode(u),ecount.bitmask.bitmaskEncode(u.columnOption),ecount.bitmask.bitmaskEncode(u.footerOption)):this.constValue.columnType.multi==this.optCommon.columnType&&(u.className=this.getColumnClassName(l[s],u),u.columnOption=u.columnOption||{},u.footerOption=u.footerOption||{},ecount.bitmask.bitmaskEncode(u),ecount.bitmask.bitmaskEncode(u.columnOption),ecount.bitmask.bitmaskEncode(u.footerOption)),h=e[f][o]&&e[f][o].id,c=e[f][o-1]&&e[f][o-1].id,u.lineNo=f+1,u.GROUP_FLAG=(p[h]||p[c]).GROUP_FLAG,u.POSITION=n==this.tfootType?this.constValue.sectionType.tfooter:n,u.fontColor=="000000"&&(u.fontColor=""),this.makeColumnDataType(y,u),h&&(this._columnMap[h].prevColumnId=u.id),c&&(this._columnMap[c].nextColumnId=u.id),this._columnMap[u.id]={nextColumnId:h,prevColumnId:c},p[u.id]=u,e[f].splice(o,0,u),w.splice(e[0].length*f+o,0,u),v[f].push(u);w.forEach(function(n,t){n.index=t});d[y]={columns:v}}else if(this.constValue.columnType.single==this.optCommon.columnType&&[this.tbodyType,this.tfootType].contains(y))for(f=0,b=v.length;f<b;f++)for(a=v[f].length-1;a>-1;a--)u=Object.clone(v[f][a]),u.lineNo=f+1,this.makeColumnDataType(y,u),h=e[f][o]&&e[f][o].id,c=e[f][o-1]&&e[f][o-1].id,h&&(this._columnMap[h].prevColumnId=u.id),c&&(this._columnMap[c].nextColumnId=u.id),this._columnMap[u.id]={nextColumnId:h,prevColumnId:c},p[v[f][a].id]=u,e[f].splice(o,0,u),w.splice(e[0].length*f+o,0,u)}else if(t=="left")for(o=i.left,s=0,g=l.length;s<g;s++){y=l[s];this.setStructureInfo(y);var p=this._columnKeys,e=this._columnRows,w=this._columns;if(w.length!=0)if(this.constValue.columnType.single==this.optCommon.columnType&&y==this.theadType||this.constValue.columnType.multi==this.optCommon.columnType){for(v=[],f=0,b=e.length;f<b;f++)if(v[f]||(v[f]=[]),r.columns&&r.columns[f])for(a=r.columns[f].length-1;a>-1;a--)u=k.create(l[s],r.columns[f][a]),u.lineNo=f+1,u.GROUP_FLAG=e[f][0].GROUP_FLAG,u.POSITION=n==this.tfootType?this.constValue.sectionType.tfooter:n,u.fontColor=="000000"&&(u.fontColor=""),h=e[f][o]&&e[f][o].id,c=e[f][o-1]&&e[f][o-1].id,h&&(this._columnMap[h].prevColumnId=u.id),c&&(this._columnMap[c].nextColumnId=u.id),this._columnMap[u.id]={nextColumnId:h,prevColumnId:c},a==0&&o==0&&f>0&&(u.linechange=!0,e[f][r.columns[f].length-1].linechange=!1),p[u.id]=u,e[f].splice(o,0,u),w.splice(e[0].length*f+o,0,u),v[f].push(u),this.constValue.columnType.single==this.optCommon.columnType?(u.className=this.getColumnClassName(l[s],u),u.columnOption.className=this.getColumnClassName(l[s],u.columnOption),u.footerOption.className=this.getColumnClassName(l[s],u.footerOption),ecount.bitmask.bitmaskEncode(u),ecount.bitmask.bitmaskEncode(u.columnOption),ecount.bitmask.bitmaskEncode(u.footerOption)):this.constValue.columnType.multi==this.optCommon.columnType&&(u.className=this.getColumnClassName(l[s],u),u.columnOption=u.columnOption||{},u.footerOption=u.footerOption||{},ecount.bitmask.bitmaskEncode(u),ecount.bitmask.bitmaskEncode(u.columnOption),ecount.bitmask.bitmaskEncode(u.footerOption));else u=k.create(l[s]),this.constValue.columnType.single==this.optCommon.columnType?(u.className=this.getColumnClassName(l[s],u),u.columnOption.className=this.getColumnClassName(l[s],u.columnOption),u.footerOption.className=this.getColumnClassName(l[s],u.footerOption),ecount.bitmask.bitmaskEncode(u),ecount.bitmask.bitmaskEncode(u.columnOption),ecount.bitmask.bitmaskEncode(u.footerOption)):this.constValue.columnType.multi==this.optCommon.columnType&&(u.className=this.getColumnClassName(l[s],u),u.columnOption=u.columnOption||{},u.footerOption=u.footerOption||{},ecount.bitmask.bitmaskEncode(u),ecount.bitmask.bitmaskEncode(u.columnOption),ecount.bitmask.bitmaskEncode(u.footerOption)),h=e[f][o]&&e[f][o].id,c=e[f][o-1]&&e[f][o-1].id,u.lineNo=f+1,u.GROUP_FLAG=(p[h]||p[c]).GROUP_FLAG,u.POSITION=n==this.tfootType?this.constValue.sectionType.tfooter:n,u.fontColor=="000000"&&(u.fontColor=""),h&&(this._columnMap[h].prevColumnId=u.id),c&&(this._columnMap[c].nextColumnId=u.id),this._columnMap[u.id]={nextColumnId:h,prevColumnId:c},a==0&&o==0&&f>0&&(u.linechange=!0,e[f][r.columns[f].length-1].linechange=!1),p[u.id]=u,e[f].splice(o,0,u),w.splice(e[0].length*f+o,0,u),v[f].push(u);w.forEach(function(n,t){n.index=t});d[y]={columns:v}}else if(this.constValue.columnType.single==this.optCommon.columnType&&[this.tbodyType,this.tfootType].contains(y))for(f=0,b=v.length;f<b;f++)for(a=v[f].length-1;a>-1;a--)u=Object.clone(v[f][a]),u.lineNo=f+1,h=e[f][o]&&e[f][o].id,c=e[f][o-1]&&e[f][o-1].id,h&&(this._columnMap[h].prevColumnId=u.id),c&&(this._columnMap[c].nextColumnId=u.id),this._columnMap[u.id]={nextColumnId:h,prevColumnId:c},a==0&&o==0&&f>0&&(u.linechange=!0,e[f][r.columns[f].length-1].linechange=!1),p[v[f][a].id]=u,e[f].splice(o,0,u),w.splice(e[0].length*f+o,0,u)}return d},cloneColumnFormat:function(n,t,i,r,u,f){var e=this.getById(t,i),o=this.getById(u,f);this.optCommon.columnType==this.constValue.columnType.single?n==this.theadType?(_.extend(o,{FONT_USE_HEAD_TF:e.FONT_USE_HEAD_TF,FONT_USE_BODY_TF:e.FONT_USE_BODY_TF,FONT_USE_FOOT_TF:e.FONT_USE_FOOT_TF,ALIGN_USE_HEAD_TF:e.ALIGN_USE_HEAD_TF,ALIGN_USE_BODY_TF:e.ALIGN_USE_BODY_TF,ALIGN_USE_FOOT_TF:e.ALIGN_USE_FOOT_TF}),_.extend(o.columnOption,{align:e.columnOption.align,valign:e.columnOption.valign,font:e.columnOption.font,fontBgColor:e.columnOption.fontBgColor,fontBold:e.columnOption.fontBold,fontCellBgColor:e.columnOption.fontCellBgColor,fontColor:e.columnOption.fontColor,fontItalic:e.columnOption.fontItalic,fontSize:e.columnOption.fontSize,fontStrike:e.columnOption.fontStrike,fontUnderline:e.columnOption.fontUnderline,isShadow:e.columnOption.isShadow,BTTM_BORD_COLOR_CD:e.columnOption.BTTM_BORD_COLOR_CD,BTTM_BORD_STYL_CD:e.columnOption.BTTM_BORD_STYL_CD,BTTM_BORD_THICK:e.columnOption.BTTM_BORD_THICK,BTTM_BORD_USE_TF:e.columnOption.BTTM_BORD_USE_TF,LEFT_BORD_COLOR_CD:e.columnOption.LEFT_BORD_COLOR_CD,LEFT_BORD_STYL_CD:e.columnOption.LEFT_BORD_STYL_CD,LEFT_BORD_THICK:e.columnOption.LEFT_BORD_THICK,LEFT_BORD_USE_TF:e.columnOption.LEFT_BORD_USE_TF,RGT_BORD_COLOR_CD:e.columnOption.RGT_BORD_COLOR_CD,RGT_BORD_STYL_CD:e.columnOption.RGT_BORD_STYL_CD,RGT_BORD_THICK:e.columnOption.RGT_BORD_THICK,RGT_BORD_USE_TF:e.columnOption.RGT_BORD_USE_TF,TOP_BORD_COLOR_CD:e.columnOption.TOP_BORD_COLOR_CD,TOP_BORD_STYL_CD:e.columnOption.TOP_BORD_STYL_CD,TOP_BORD_THICK:e.columnOption.TOP_BORD_THICK,TOP_BORD_USE_TF:e.columnOption.TOP_BORD_USE_TF})):n==this.tbodyType?_.extend(o,{FONT_USE_HEAD_TF:e.FONT_USE_HEAD_TF,FONT_USE_BODY_TF:e.FONT_USE_BODY_TF,FONT_USE_FOOT_TF:e.FONT_USE_FOOT_TF,ALIGN_USE_HEAD_TF:e.ALIGN_USE_HEAD_TF,ALIGN_USE_BODY_TF:e.ALIGN_USE_BODY_TF,ALIGN_USE_FOOT_TF:e.ALIGN_USE_FOOT_TF,align:e.align,valign:e.valign,font:e.font,fontBgColor:e.fontBgColor,fontBold:e.fontBold,fontCellBgColor:e.fontCellBgColor,fontColor:e.fontColor,fontItalic:e.fontItalic,fontSize:e.fontSize,fontStrike:e.fontStrike,fontUnderline:e.fontUnderline,isShadow:e.isShadow,BTTM_BORD_COLOR_CD:e.BTTM_BORD_COLOR_CD,BTTM_BORD_STYL_CD:e.BTTM_BORD_STYL_CD,BTTM_BORD_THICK:e.BTTM_BORD_THICK,BTTM_BORD_USE_TF:e.BTTM_BORD_USE_TF,LEFT_BORD_COLOR_CD:e.LEFT_BORD_COLOR_CD,LEFT_BORD_STYL_CD:e.LEFT_BORD_STYL_CD,LEFT_BORD_THICK:e.LEFT_BORD_THICK,LEFT_BORD_USE_TF:e.LEFT_BORD_USE_TF,RGT_BORD_COLOR_CD:e.RGT_BORD_COLOR_CD,RGT_BORD_STYL_CD:e.RGT_BORD_STYL_CD,RGT_BORD_THICK:e.RGT_BORD_THICK,RGT_BORD_USE_TF:e.RGT_BORD_USE_TF,TOP_BORD_COLOR_CD:e.TOP_BORD_COLOR_CD,TOP_BORD_STYL_CD:e.TOP_BORD_STYL_CD,TOP_BORD_THICK:e.TOP_BORD_THICK,TOP_BORD_USE_TF:e.TOP_BORD_USE_TF}):n==this.tfootType&&(_.extend(o,{FONT_USE_HEAD_TF:e.FONT_USE_HEAD_TF,FONT_USE_BODY_TF:e.FONT_USE_BODY_TF,FONT_USE_FOOT_TF:e.FONT_USE_FOOT_TF,ALIGN_USE_HEAD_TF:e.ALIGN_USE_HEAD_TF,ALIGN_USE_BODY_TF:e.ALIGN_USE_BODY_TF,ALIGN_USE_FOOT_TF:e.ALIGN_USE_FOOT_TF}),_.extend(o.footerOption,{align:e.footerOption.align,valign:e.footerOption.valign,font:e.footerOption.font,fontBgColor:e.footerOption.fontBgColor,fontBold:e.footerOption.fontBold,fontCellBgColor:e.footerOption.fontCellBgColor,fontColor:e.footerOption.fontColor,fontItalic:e.footerOption.fontItalic,fontSize:e.footerOption.fontSize,fontStrike:e.footerOption.fontStrike,fontUnderline:e.footerOption.fontUnderline,isShadow:e.footerOption.isShadow,BTTM_BORD_COLOR_CD:e.footerOption.BTTM_BORD_COLOR_CD,BTTM_BORD_STYL_CD:e.footerOption.BTTM_BORD_STYL_CD,BTTM_BORD_THICK:e.footerOption.BTTM_BORD_THICK,BTTM_BORD_USE_TF:e.footerOption.BTTM_BORD_USE_TF,LEFT_BORD_COLOR_CD:e.footerOption.LEFT_BORD_COLOR_CD,LEFT_BORD_STYL_CD:e.footerOption.LEFT_BORD_STYL_CD,LEFT_BORD_THICK:e.footerOption.LEFT_BORD_THICK,LEFT_BORD_USE_TF:e.footerOption.LEFT_BORD_USE_TF,RGT_BORD_COLOR_CD:e.footerOption.RGT_BORD_COLOR_CD,RGT_BORD_STYL_CD:e.footerOption.RGT_BORD_STYL_CD,RGT_BORD_THICK:e.footerOption.RGT_BORD_THICK,RGT_BORD_USE_TF:e.footerOption.RGT_BORD_USE_TF,TOP_BORD_COLOR_CD:e.footerOption.TOP_BORD_COLOR_CD,TOP_BORD_STYL_CD:e.footerOption.TOP_BORD_STYL_CD,TOP_BORD_THICK:e.footerOption.TOP_BORD_THICK,TOP_BORD_USE_TF:e.footerOption.TOP_BORD_USE_TF})):this.optCommon.columnType==this.constValue.columnType.multi&&_.extend(o,{FONT_USE_HEAD_TF:e.FONT_USE_HEAD_TF,FONT_USE_BODY_TF:e.FONT_USE_BODY_TF,FONT_USE_FOOT_TF:e.FONT_USE_FOOT_TF,ALIGN_USE_HEAD_TF:e.ALIGN_USE_HEAD_TF,ALIGN_USE_BODY_TF:e.ALIGN_USE_BODY_TF,ALIGN_USE_FOOT_TF:e.ALIGN_USE_FOOT_TF,align:e.align,valign:e.valign,font:e.font,fontBgColor:e.fontBgColor,fontBold:e.fontBold,fontCellBgColor:e.fontCellBgColor,fontColor:e.fontColor,fontItalic:e.fontItalic,fontSize:e.fontSize,fontStrike:e.fontStrike,fontUnderline:e.fontUnderline,isShadow:e.isShadow,BTTM_BORD_COLOR_CD:e.BTTM_BORD_COLOR_CD,BTTM_BORD_STYL_CD:e.BTTM_BORD_STYL_CD,BTTM_BORD_THICK:e.BTTM_BORD_THICK,BTTM_BORD_USE_TF:e.BTTM_BORD_USE_TF,LEFT_BORD_COLOR_CD:e.LEFT_BORD_COLOR_CD,LEFT_BORD_STYL_CD:e.LEFT_BORD_STYL_CD,LEFT_BORD_THICK:e.LEFT_BORD_THICK,LEFT_BORD_USE_TF:e.LEFT_BORD_USE_TF,RGT_BORD_COLOR_CD:e.RGT_BORD_COLOR_CD,RGT_BORD_STYL_CD:e.RGT_BORD_STYL_CD,RGT_BORD_THICK:e.RGT_BORD_THICK,RGT_BORD_USE_TF:e.RGT_BORD_USE_TF,TOP_BORD_COLOR_CD:e.TOP_BORD_COLOR_CD,TOP_BORD_STYL_CD:e.TOP_BORD_STYL_CD,TOP_BORD_THICK:e.TOP_BORD_THICK,TOP_BORD_USE_TF:e.TOP_BORD_USE_TF});ecount.bitmask.bitmaskEncode(o)},cloneColumnFormatByBoundary:function(n,t){var u=this.getAll(n.sectionType,this.constValue.returnType.multi,!1,"custom",{boundary:n.boundary}),i=null,f,r;n.filter&&u.some(function(t){return i=_.find(t,n.filter),i?!0:void 0});i=i||u[0][0];f=this.getById(n.sectionType,t.columnId);r=[this.theadType,this.tbodyType];this.optCommon.columnType==this.constValue.columnType.single?r.contains(n.sectionType)?r.forEach(function(t){this.getAll(t,this.constValue.returnType.multi,!1,"custom",{boundary:n.boundary}).forEach(function(n){n.some(function(n){if(i==n)return!1;_.extend(n,{FONT_USE_HEAD_TF:i.FONT_USE_HEAD_TF,FONT_USE_BODY_TF:i.FONT_USE_BODY_TF,FONT_USE_FOOT_TF:i.FONT_USE_FOOT_TF,ALIGN_USE_HEAD_TF:i.ALIGN_USE_HEAD_TF,ALIGN_USE_BODY_TF:i.ALIGN_USE_BODY_TF,ALIGN_USE_FOOT_TF:i.ALIGN_USE_FOOT_TF});_.extend(n.columnOption,{align:i.columnOption.align,valign:i.columnOption.valign,font:i.columnOption.font,fontBgColor:i.columnOption.fontBgColor,fontBold:i.columnOption.fontBold,fontCellBgColor:i.columnOption.fontCellBgColor,fontColor:i.columnOption.fontColor,fontItalic:i.columnOption.fontItalic,fontSize:i.columnOption.fontSize,fontStrike:i.columnOption.fontStrike,fontUnderline:i.columnOption.fontUnderline,isShadow:i.columnOption.isShadow,BTTM_BORD_COLOR_CD:i.columnOption.BTTM_BORD_COLOR_CD,BTTM_BORD_STYL_CD:i.columnOption.BTTM_BORD_STYL_CD,BTTM_BORD_THICK:i.columnOption.BTTM_BORD_THICK,BTTM_BORD_USE_TF:i.columnOption.BTTM_BORD_USE_TF,LEFT_BORD_COLOR_CD:i.columnOption.LEFT_BORD_COLOR_CD,LEFT_BORD_STYL_CD:i.columnOption.LEFT_BORD_STYL_CD,LEFT_BORD_THICK:i.columnOption.LEFT_BORD_THICK,LEFT_BORD_USE_TF:i.columnOption.LEFT_BORD_USE_TF,RGT_BORD_COLOR_CD:i.columnOption.RGT_BORD_COLOR_CD,RGT_BORD_STYL_CD:i.columnOption.RGT_BORD_STYL_CD,RGT_BORD_THICK:i.columnOption.RGT_BORD_THICK,RGT_BORD_USE_TF:i.columnOption.RGT_BORD_USE_TF,TOP_BORD_COLOR_CD:i.columnOption.TOP_BORD_COLOR_CD,TOP_BORD_STYL_CD:i.columnOption.TOP_BORD_STYL_CD,TOP_BORD_THICK:i.columnOption.TOP_BORD_THICK,TOP_BORD_USE_TF:i.columnOption.TOP_BORD_USE_TF});_.extend(n.footerOption,{align:i.footerOption.align,valign:i.footerOption.valign,font:i.footerOption.font,fontBgColor:i.footerOption.fontBgColor,fontBold:i.footerOption.fontBold,fontCellBgColor:i.footerOption.fontCellBgColor,fontColor:i.footerOption.fontColor,fontItalic:i.footerOption.fontItalic,fontSize:i.footerOption.fontSize,fontStrike:i.footerOption.fontStrike,fontUnderline:i.footerOption.fontUnderline,isShadow:i.footerOption.isShadow,BTTM_BORD_COLOR_CD:i.footerOption.BTTM_BORD_COLOR_CD,BTTM_BORD_STYL_CD:i.footerOption.BTTM_BORD_STYL_CD,BTTM_BORD_THICK:i.footerOption.BTTM_BORD_THICK,BTTM_BORD_USE_TF:i.footerOption.BTTM_BORD_USE_TF,LEFT_BORD_COLOR_CD:i.footerOption.LEFT_BORD_COLOR_CD,LEFT_BORD_STYL_CD:i.footerOption.LEFT_BORD_STYL_CD,LEFT_BORD_THICK:i.footerOption.LEFT_BORD_THICK,LEFT_BORD_USE_TF:i.footerOption.LEFT_BORD_USE_TF,RGT_BORD_COLOR_CD:i.footerOption.RGT_BORD_COLOR_CD,RGT_BORD_STYL_CD:i.footerOption.RGT_BORD_STYL_CD,RGT_BORD_THICK:i.footerOption.RGT_BORD_THICK,RGT_BORD_USE_TF:i.footerOption.RGT_BORD_USE_TF,TOP_BORD_COLOR_CD:i.footerOption.TOP_BORD_COLOR_CD,TOP_BORD_STYL_CD:i.footerOption.TOP_BORD_STYL_CD,TOP_BORD_THICK:i.footerOption.TOP_BORD_THICK,TOP_BORD_USE_TF:i.footerOption.TOP_BORD_USE_TF});_.extend(n,{align:i.align,valign:i.valign,font:i.font,fontBgColor:i.fontBgColor,fontBold:i.fontBold,fontCellBgColor:i.fontCellBgColor,fontColor:i.fontColor,fontItalic:i.fontItalic,fontSize:i.fontSize,fontStrike:i.fontStrike,fontUnderline:i.fontUnderline,isShadow:i.isShadow,BTTM_BORD_COLOR_CD:i.BTTM_BORD_COLOR_CD,BTTM_BORD_STYL_CD:i.BTTM_BORD_STYL_CD,BTTM_BORD_THICK:i.BTTM_BORD_THICK,BTTM_BORD_USE_TF:i.BTTM_BORD_USE_TF,LEFT_BORD_COLOR_CD:i.LEFT_BORD_COLOR_CD,LEFT_BORD_STYL_CD:i.LEFT_BORD_STYL_CD,LEFT_BORD_THICK:i.LEFT_BORD_THICK,LEFT_BORD_USE_TF:i.LEFT_BORD_USE_TF,RGT_BORD_COLOR_CD:i.RGT_BORD_COLOR_CD,RGT_BORD_STYL_CD:i.RGT_BORD_STYL_CD,RGT_BORD_THICK:i.RGT_BORD_THICK,RGT_BORD_USE_TF:i.RGT_BORD_USE_TF,TOP_BORD_COLOR_CD:i.TOP_BORD_COLOR_CD,TOP_BORD_STYL_CD:i.TOP_BORD_STYL_CD,TOP_BORD_THICK:i.TOP_BORD_THICK,TOP_BORD_USE_TF:i.TOP_BORD_USE_TF})}.bind(this))}.bind(this))}.bind(this)):n.sectionType==this.tfootType&&(u.forEach(function(n){n.forEach(function(n){if(i==n)return!1;_.extend(n,{FONT_USE_HEAD_TF:i.FONT_USE_HEAD_TF,FONT_USE_BODY_TF:i.FONT_USE_BODY_TF,FONT_USE_FOOT_TF:i.FONT_USE_FOOT_TF,ALIGN_USE_HEAD_TF:i.ALIGN_USE_HEAD_TF,ALIGN_USE_BODY_TF:i.ALIGN_USE_BODY_TF,ALIGN_USE_FOOT_TF:i.ALIGN_USE_FOOT_TF});_.extend(n.columnOption,{align:i.columnOption.align,valign:i.columnOption.valign,font:i.columnOption.font,fontBgColor:i.columnOption.fontBgColor,fontBold:i.columnOption.fontBold,fontCellBgColor:i.columnOption.fontCellBgColor,fontColor:i.columnOption.fontColor,fontItalic:i.columnOption.fontItalic,fontSize:i.columnOption.fontSize,fontStrike:i.columnOption.fontStrike,fontUnderline:i.columnOption.fontUnderline,isShadow:i.columnOption.isShadow,BTTM_BORD_COLOR_CD:i.columnOption.BTTM_BORD_COLOR_CD,BTTM_BORD_STYL_CD:i.columnOption.BTTM_BORD_STYL_CD,BTTM_BORD_THICK:i.columnOption.BTTM_BORD_THICK,BTTM_BORD_USE_TF:i.columnOption.BTTM_BORD_USE_TF,LEFT_BORD_COLOR_CD:i.columnOption.LEFT_BORD_COLOR_CD,LEFT_BORD_STYL_CD:i.columnOption.LEFT_BORD_STYL_CD,LEFT_BORD_THICK:i.columnOption.LEFT_BORD_THICK,LEFT_BORD_USE_TF:i.columnOption.LEFT_BORD_USE_TF,RGT_BORD_COLOR_CD:i.columnOption.RGT_BORD_COLOR_CD,RGT_BORD_STYL_CD:i.columnOption.RGT_BORD_STYL_CD,RGT_BORD_THICK:i.columnOption.RGT_BORD_THICK,RGT_BORD_USE_TF:i.columnOption.RGT_BORD_USE_TF,TOP_BORD_COLOR_CD:i.columnOption.TOP_BORD_COLOR_CD,TOP_BORD_STYL_CD:i.columnOption.TOP_BORD_STYL_CD,TOP_BORD_THICK:i.columnOption.TOP_BORD_THICK,TOP_BORD_USE_TF:i.columnOption.TOP_BORD_USE_TF});_.extend(n.footerOption,{align:i.footerOption.align,valign:i.footerOption.valign,font:i.footerOption.font,fontBgColor:i.footerOption.fontBgColor,fontBold:i.footerOption.fontBold,fontCellBgColor:i.footerOption.fontCellBgColor,fontColor:i.footerOption.fontColor,fontItalic:i.footerOption.fontItalic,fontSize:i.footerOption.fontSize,fontStrike:i.footerOption.fontStrike,fontUnderline:i.footerOption.fontUnderline,isShadow:i.footerOption.isShadow,BTTM_BORD_COLOR_CD:i.footerOption.BTTM_BORD_COLOR_CD,BTTM_BORD_STYL_CD:i.footerOption.BTTM_BORD_STYL_CD,BTTM_BORD_THICK:i.footerOption.BTTM_BORD_THICK,BTTM_BORD_USE_TF:i.footerOption.BTTM_BORD_USE_TF,LEFT_BORD_COLOR_CD:i.footerOption.LEFT_BORD_COLOR_CD,LEFT_BORD_STYL_CD:i.footerOption.LEFT_BORD_STYL_CD,LEFT_BORD_THICK:i.footerOption.LEFT_BORD_THICK,LEFT_BORD_USE_TF:i.footerOption.LEFT_BORD_USE_TF,RGT_BORD_COLOR_CD:i.footerOption.RGT_BORD_COLOR_CD,RGT_BORD_STYL_CD:i.footerOption.RGT_BORD_STYL_CD,RGT_BORD_THICK:i.footerOption.RGT_BORD_THICK,RGT_BORD_USE_TF:i.footerOption.RGT_BORD_USE_TF,TOP_BORD_COLOR_CD:i.footerOption.TOP_BORD_COLOR_CD,TOP_BORD_STYL_CD:i.footerOption.TOP_BORD_STYL_CD,TOP_BORD_THICK:i.footerOption.TOP_BORD_THICK,TOP_BORD_USE_TF:i.footerOption.TOP_BORD_USE_TF});_.extend(n,{align:i.align,valign:i.valign,font:i.font,fontBgColor:i.fontBgColor,fontBold:i.fontBold,fontCellBgColor:i.fontCellBgColor,fontColor:i.fontColor,fontItalic:i.fontItalic,fontSize:i.fontSize,fontStrike:i.fontStrike,fontUnderline:i.fontUnderline,isShadow:i.isShadow,BTTM_BORD_COLOR_CD:i.BTTM_BORD_COLOR_CD,BTTM_BORD_STYL_CD:i.BTTM_BORD_STYL_CD,BTTM_BORD_THICK:i.BTTM_BORD_THICK,BTTM_BORD_USE_TF:i.BTTM_BORD_USE_TF,LEFT_BORD_COLOR_CD:i.LEFT_BORD_COLOR_CD,LEFT_BORD_STYL_CD:i.LEFT_BORD_STYL_CD,LEFT_BORD_THICK:i.LEFT_BORD_THICK,LEFT_BORD_USE_TF:i.LEFT_BORD_USE_TF,RGT_BORD_COLOR_CD:i.RGT_BORD_COLOR_CD,RGT_BORD_STYL_CD:i.RGT_BORD_STYL_CD,RGT_BORD_THICK:i.RGT_BORD_THICK,RGT_BORD_USE_TF:i.RGT_BORD_USE_TF,TOP_BORD_COLOR_CD:i.TOP_BORD_COLOR_CD,TOP_BORD_STYL_CD:i.TOP_BORD_STYL_CD,TOP_BORD_THICK:i.TOP_BORD_THICK,TOP_BORD_USE_TF:i.TOP_BORD_USE_TF})}.bind(this))}.bind(this)),r.forEach(function(t){this.getAll(t,this.constValue.returnType.multi,!1,"custom",{boundary:n.boundary}).forEach(function(n){n.some(function(n){if(i==n)return!1;_.extend(n.footerOption,{align:i.footerOption.align,valign:i.footerOption.valign,font:i.footerOption.font,fontBgColor:i.footerOption.fontBgColor,fontBold:i.footerOption.fontBold,fontCellBgColor:i.footerOption.fontCellBgColor,fontColor:i.footerOption.fontColor,fontItalic:i.footerOption.fontItalic,fontSize:i.footerOption.fontSize,fontStrike:i.footerOption.fontStrike,fontUnderline:i.footerOption.fontUnderline,isShadow:i.footerOption.isShadow,BTTM_BORD_COLOR_CD:i.footerOption.BTTM_BORD_COLOR_CD,BTTM_BORD_STYL_CD:i.footerOption.BTTM_BORD_STYL_CD,BTTM_BORD_THICK:i.footerOption.BTTM_BORD_THICK,BTTM_BORD_USE_TF:i.footerOption.BTTM_BORD_USE_TF,LEFT_BORD_COLOR_CD:i.footerOption.LEFT_BORD_COLOR_CD,LEFT_BORD_STYL_CD:i.footerOption.LEFT_BORD_STYL_CD,LEFT_BORD_THICK:i.footerOption.LEFT_BORD_THICK,LEFT_BORD_USE_TF:i.footerOption.LEFT_BORD_USE_TF,RGT_BORD_COLOR_CD:i.footerOption.RGT_BORD_COLOR_CD,RGT_BORD_STYL_CD:i.footerOption.RGT_BORD_STYL_CD,RGT_BORD_THICK:i.footerOption.RGT_BORD_THICK,RGT_BORD_USE_TF:i.footerOption.RGT_BORD_USE_TF,TOP_BORD_COLOR_CD:i.footerOption.TOP_BORD_COLOR_CD,TOP_BORD_STYL_CD:i.footerOption.TOP_BORD_STYL_CD,TOP_BORD_THICK:i.footerOption.TOP_BORD_THICK,TOP_BORD_USE_TF:i.footerOption.TOP_BORD_USE_TF})}.bind(this))}.bind(this))}.bind(this))):this.optCommon.columnType==this.constValue.columnType.multi&&_.extend(f,{FONT_USE_HEAD_TF:i.FONT_USE_HEAD_TF,FONT_USE_BODY_TF:i.FONT_USE_BODY_TF,FONT_USE_FOOT_TF:i.FONT_USE_FOOT_TF,ALIGN_USE_HEAD_TF:i.ALIGN_USE_HEAD_TF,ALIGN_USE_BODY_TF:i.ALIGN_USE_BODY_TF,ALIGN_USE_FOOT_TF:i.ALIGN_USE_FOOT_TF,align:i.align,valign:i.valign,font:i.font,fontBgColor:i.fontBgColor,fontBold:i.fontBold,fontCellBgColor:i.fontCellBgColor,fontColor:i.fontColor,fontItalic:i.fontItalic,fontSize:i.fontSize,fontStrike:i.fontStrike,fontUnderline:i.fontUnderline,isShadow:i.isShadow,BTTM_BORD_COLOR_CD:i.BTTM_BORD_COLOR_CD,BTTM_BORD_STYL_CD:i.BTTM_BORD_STYL_CD,BTTM_BORD_THICK:i.BTTM_BORD_THICK,BTTM_BORD_USE_TF:i.BTTM_BORD_USE_TF,LEFT_BORD_COLOR_CD:i.LEFT_BORD_COLOR_CD,LEFT_BORD_STYL_CD:i.LEFT_BORD_STYL_CD,LEFT_BORD_THICK:i.LEFT_BORD_THICK,LEFT_BORD_USE_TF:i.LEFT_BORD_USE_TF,RGT_BORD_COLOR_CD:i.RGT_BORD_COLOR_CD,RGT_BORD_STYL_CD:i.RGT_BORD_STYL_CD,RGT_BORD_THICK:i.RGT_BORD_THICK,RGT_BORD_USE_TF:i.RGT_BORD_USE_TF,TOP_BORD_COLOR_CD:i.TOP_BORD_COLOR_CD,TOP_BORD_STYL_CD:i.TOP_BORD_STYL_CD,TOP_BORD_THICK:i.TOP_BORD_THICK,TOP_BORD_USE_TF:i.TOP_BORD_USE_TF});ecount.bitmask.bitmaskEncode(f)},__remove:function(n,t,i){var o={},a,r,c,u,h,f,s,v,l,e,y;if(this.setStructureInfo(n),this._columns.length!=0){for(a=this._columnRows[0].length,r=this._columnRows.length-1;r>-1;r--){for(c=this._columnRows[r],u=i.right;u>=i.left;u--)h=c[u],t.left<=u&&t.right>=u?(this.removeColumnDataType(n,this._columnKeys[h.id]),delete this._columnKeys[h.id],this._columns.splice(a*r+u,1),f=this._columnMap[h.id],f.prevColumnId&&(this._columnMap[f.prevColumnId].nextColumnId=f.nextColumnId),f.nextColumnId&&(this._columnMap[f.nextColumnId].prevColumnId=f.prevColumnId)):h.isMergeColumn="0";this.optCommon.columnType==this.constValue.columnType.single&&n==this.theadType||this.optCommon.columnType==this.constValue.columnType.multi?(o[n]||(o[n]={columns:[]}),o[n].columns[r]||(o[n].columns[r]=[]),o[n].columns[r]=c.splice(t.left,t.right-t.left+1)):c.splice(t.left,t.right-t.left+1)}for(s=0,v=this._columnRows.length;s<v;s++)for(l=this._columnRows[s],e=0,y=l.length;e<y;e++)l[e].linechange=s!=0&&e==0,l[e].index=e+a*s;return o}},remove:function(n,t){for(var o,i,f,r,s,e=[this.tfootType,this.tbodyType,this.theadType],u=0,h=e.length;u<h;u++)for(this.setStructureInfo(e[u]),o=this._columnRows[0].length,i=this._columnRows.length-1;i>-1;i--){for(f=this._columnRows[i],r=t.right;r>=t.left;r--)s=f[r],delete this._columnKeys[s.id],this._columns.splice(o*i+r,1);f.splice(t.left,t.right-t.left+1)}},getLeftFixed:function(n){var i,t,r;for(this.setStructureInfo(n),i=[],t=0,r=this._columns.length;t<r;t++)ecount.common.isTrue(this._columns[t].LEFT_FIXD_STND_TF)&&i.push(this._columns[t]);return i},getLeftFixedByBoundary:function(n,t){var u,i,f,r;for(this.setStructureInfo(n),u=[],i=0,f=this._columnRows.length;i<f;i++)for(r=t.left;r<=t.right;r++)ecount.common.isTrue(this._columnRows[i][r].LEFT_FIXD_STND_TF)&&u.push(this._columnRows[i][r]);return u},setLeftFixed:function(n,t,i){var f,o,e,r,u;for(this.setStructureInfo(this.theadType),f=0,o=this._columnRows.length;f<o;f++)for(e=this.dataRow.getViewDataRenderingTableMap(this.theadType,f),r=i.right;r>=i.left;r--){if(["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN"].contains(e[r].type)){u=this._columnRows[e[r].trIdx][e[r].columnIdx];u.LEFT_FIXD_STND_TF=!0;ecount.bitmask.bitmaskEncode(u);break}if(u=this._columnRows[f][r],!ecount.common.isTrue(u.isMergeColumn)){u.LEFT_FIXD_STND_TF=!0;ecount.bitmask.bitmaskEncode(u);break}}},setCancelLeftFixed:function(){for(var t=this.getLeftFixed(this.theadType),n=0,i=t.length;n<i;n++)t[n].LEFT_FIXD_STND_TF=!1,ecount.bitmask.bitmaskEncode(t[n])},setCancelLeftFixedByBoundary:function(n,t,i){for(var u=this.getLeftFixedByBoundary(this.theadType,i),r=0,f=u.length;r<f;r++)u[r].LEFT_FIXD_STND_TF=!1,ecount.bitmask.bitmaskEncode(u[r])},insertRow:function(n,t,i,r,u,f){var s,ot,a,ht,h,ct,wt,v,it,et,rt,vt,nt,p,st,d,o,tt,e,y;f=f||{thead:{columns:[]},tbody:{columns:[]},tfoot:{columns:[]}};s=[this.theadType,this.tbodyType,this.tfootType];ot={};this.constValue.columnType.multi==this.optCommon.columnType&&(s=[n]);var yt=this.optColumn.generator,pt=this.optColumn.repeatGenerator,bt=this.optColumn.detailSectionGenerator,w,l,b,ut,ft;switch(r){case"down":w=i+1;break;case"up":w=i}for(a=0,ht=u;a<ht;a++)for(h=0,ct=s.length;h<ct;h++){this.setStructureInfo(s[h]);var lt=this._columnKeys,c=this._columnRows,g=c[0],k=this._columns,at=this._columnMap;if(k.length!=0){if(wt=this.getSystemColumnCount(s[h]),this.optForm.version==this.constValue.formVersion.third?v=this.optCommon.columnType==this.constValue.columnType.single?f[this.theadType].columns:f[s[h]].columns:this.optForm.version==this.constValue.formVersion.fourth&&(this.optCommon.columnType==this.constValue.columnType.single?(v=f[this.theadType][t].columns,v=f[this.theadType][t].columns?f[this.theadType][t].columns:f[s[h]].columns):v=f[s[h]][t]?f[s[h]][t].columns:f[s[h]].columns),v||(v=[]),this.optForm.version==this.constValue.formVersion.fourth&&v){for(it=-1,et=-1,rt=0,vt=v.length;rt<vt;rt++)(v[rt][0].GROUP_FLAG||this.constValue.sectionSeparateValue.line==t)&&(it==-1&&(it=rt),et=a);v=it>-1&&et>-1?v.slice(it,et+1):[]}if(v[a]||(v[a]=[]),this.constValue.columnType.single==this.optCommon.columnType&&s[h]==this.theadType||this.constValue.columnType.multi==this.optCommon.columnType){for(b=[],e=0,y=g.length;e<y;e++)nt="",v[a][e]||(v[a][e]={}),p=v[a][e],g[e].id==this.constValue.checkBoxPropertyName?(st=this.optCheckbox[s[h]].items[this.constValue.checkBoxPropertyName],nt=this.constValue.checkBoxPropertyName+"-"+st.sequenceIndex.toString(),st.sequenceIndex+=1,p.id=nt,p.isTempColumn="1",p.isMergeColumn="1"):g[e].id==this.constValue.rowMoveablePropertyName?(nt=this.constValue.rowMoveablePropertyName+"-"+this.optRowmoveable[s[h]].sequenceIndex.toString(),this.optRowmoveable[s[h]].sequenceIndex+=1,p.id=nt,p.isTempColumn="1",p.isMergeColumn="1"):g[e].id==this.constValue.rowNumberingPropertyName&&(nt=this.constValue.rowNumberingPropertyName+"-"+this.optNumbering[s[h]].sequenceIndex.toString(),this.optNumbering[s[h]].sequenceIndex+=1,p.id=nt,p.isTempColumn="1",p.isMergeColumn="1"),p.width=g[e].width,l=this.optCommon.renderType==this.constValue.gridRenderType.salarySetting&&this.optColumn[s[h]].repeatCount>0&&e>=this.__datas[s[h]].columnCountOfRow?pt.create(s[h],p):yt.create(s[h],p),l.POSITION=n==this.tfootType?this.constValue.sectionType.tfooter:n,l.GROUP_FLAG=t,l.fontColor=="000000"&&(l.fontColor=""),this.makeColumnDataType(s[h],l),this.constValue.columnType.single==this.optCommon.columnType?(l.className=this.getColumnClassName(s[h],l),l.columnOption.className=this.getColumnClassName(s[h],l.columnOption),l.footerOption.className=this.getColumnClassName(s[h],l.footerOption)):this.constValue.columnType.multi==this.optCommon.columnType&&(l.className=this.getColumnClassName(s[h],l),l.columnOption={},l.footerOption={}),b.push(l),ecount.bitmask.bitmaskEncode(l),lt[l.id]=l;for(c.splice(w+a,0,b),b.splice(0,0,g.length*(w+a),0),k.splice.apply(k,b),b.splice(0,2),o=0,tt=c.length;o<tt;o++)for(e=0,y=c[o].length;e<y;e++)e==0&&(c[o][e].linechange=o!=0),c[o][e].lineNo=o+1,w+a==o&&(ut=e==0?null:c[o][e-1].id,ft=c[o][e+1]&&c[o][e+1].id,at[c[o][e].id]={nextColumnId:ft,prevColumnId:ut});for(e=0,y=k.length;e<y;e++)k[e].index=e;ot[s[h]]={columns:b}}else if(this.constValue.columnType.single==this.optCommon.columnType&&[this.tbodyType,this.tfootType].contains(s[h])){for(d=[],e=0,y=b.length;e<y;e++)d.push(Object.clone(b[e])),lt[d[e].id]=d[e],this.makeColumnDataType(s[h],d[e]);for(o=w+a+1,tt=c.length;o<tt;o++)for(e=0,y=c[o].length;e<y;e++)c[o][e].lineNo=o+1;for(c.splice(w+a,0,d),d.splice(0,0,g.length*(w+a),0),k.splice.apply(k,d),d.splice(0,2),o=0,tt=c.length;o<tt;o++)for(e=0,y=c[o].length;e<y;e++)e==0&&(c[o][e].linechange=o!=0),c[o][e].lineNo=o+1,w+a==o&&(ut=e==0?null:c[o][e-1].id,ft=c[o][e+1]&&c[o][e+1].id,at[c[o][e].id]={nextColumnId:ft,prevColumnId:ut});for(e=0,y=k.length;e<y;e++)k[e].index=e}}}return ot},removeRowAtBoundary:function(n,t){var s=[this.theadType,this.tbodyType,this.tfootType],l={},o,v,y,p,w,a,u,i,h,r,b,e,c,k,f;for(this.constValue.columnType.multi==this.optCommon.columnType&&(s=[n]),o=0,v=s.length;o<v;o++){for(this.setStructureInfo(s[o]),y=this._columnRows[0].length,p=this._systemColumnCount,r=t.bottom;r>=t.top;r--){for(e=this._columnRows[r],u=0,w=e.length;u<w;u++)f=e[u],[this.constValue.checkBoxPropertyName,this.constValue.rowMoveablePropertyName,this.constValue.rowNumberingPropertyName].contains(f.id)?(i=this._columnRows[r+(t.bottom-t.top+1)].splice(u,1),h=e.splice(u,1),this._columnRows[r+(t.bottom-t.top+1)].splice(u,0,h[0]),e.splice(u,0,i[0]),this._columnMap[h[0].id].nextColumnId=this.constValue.rowMoveablePropertyNameRex.test(this._columnMap[i[0].id].nextColumnId)?this._columnMap[i[0].id].nextColumnId.replace(/-\d+/,""):this.constValue.checkBoxPropertyNameRex.test(this._columnMap[i[0].id].nextColumnId)?this._columnMap[i[0].id].nextColumnId.replace(/-\d+/,""):this.constValue.rowNumberingPropertyNameRex.test(this._columnMap[i[0].id].nextColumnId)?this._columnMap[i[0].id].nextColumnId.replace(/-\d+/,""):this._columnMap[i[0].id].nextColumnId,this._columnMap[h[0].id].prevColumnId=this.constValue.rowMoveablePropertyNameRex.test(this._columnMap[i[0].id].prevColumnId)?this._columnMap[i[0].id].prevColumnId.replace(/-\d+/,""):this.constValue.checkBoxPropertyNameRex.test(this._columnMap[i[0].id].prevColumnId)?this._columnMap[i[0].id].prevColumnId.replace(/-\d+/,""):this.constValue.rowNumberingPropertyNameRex.test(this._columnMap[i[0].id].prevColumnId)?this._columnMap[i[0].id].prevColumnId.replace(/-\d+/,""):this._columnMap[i[0].id].prevColumnId,delete this._columnKeys[i[0].id],delete this._columnMap[i[0].id]):[this.constValue.checkBoxPropertyName,this.constValue.rowMoveablePropertyName,this.constValue.rowNumberingPropertyName].contains(this._columnMap[f.id].prevColumnId)?(i=this._columnRows[r+(t.bottom-t.top+1)][u],this._columnMap[i.id].prevColumnId=this.constValue.rowMoveablePropertyNameRex.test(this._columnMap[i.id].prevColumnId)?this._columnMap[i.id].prevColumnId.replace(/-\d+/,""):this.constValue.checkBoxPropertyNameRex.test(this._columnMap[i.id].prevColumnId)?this._columnMap[i.id].prevColumnId.replace(/-\d+/,""):this.constValue.rowNumberingPropertyNameRex.test(this._columnMap[i.id].prevColumnId)?this._columnMap[i.id].prevColumnId.replace(/-\d+/,""):this._columnMap[i.id].prevColumnId,delete this._columnKeys[f.id],delete this._columnMap[f.id]):(delete this._columnKeys[f.id],delete this._columnMap[f.id]);if(r==0)for(a=this._columns.splice(this._columnRows[0].length*r,this._columnRows[0].length),u=a.length-1;u>-1;u--)[this.constValue.checkBoxPropertyName,this.constValue.rowMoveablePropertyName,this.constValue.rowNumberingPropertyName].contains(a[u].id)&&(i=this._columns.splice(u,1),h=a.splice(u,1),this._columns.splice(u,0,h[0]));else this._columns.splice(this._columnRows[0].length*r,this._columnRows[0].length)}for(l[s[o]]||(l[s[o]]={columnRows:null}),l[s[o]].columnRows=this._columnRows.splice(t.top,t.bottom-t.top+1),r=0,b=this._columnRows.length;r<b;r++)for(e=this._columnRows[r],c=0,k=e.length;c<k;c++)f=e[c],f.linechange=r!=0&&c==0,f.lineNo=r+1,f.index=r*(y-p)+c}return l},merge:function(n,t,i,r,u){var e,o,l,a,s,h,c,f;for(u=_.extend({isResetValue:!0},u||{}),e=[this.theadType,this.tbodyType,this.tfootType],this.constValue.columnType.multi==this.optCommon.columnType&&(e=[n]),o=0,l=e.length;o<l;o++)if(this.setStructureInfo(t||e[o]),a=this.optColumn.generator,s=this._columnRows,s&&s.length!=0)for(h=i.bottom;h>=i.top;h--)for(c=i.right;c>=i.left;c--)f=s[h][c],h==i.top&&c==i.left?f.isMergeColumn="0":(u.isResetValue&&(f.title=""),u.isResetValue&&(f.TITLE_NM=""),f.isMergeColumn="1",f.isTempColumn="1",this.removeColumnDataType(t||e[o],f),f.realId=a.uniqueId(),_.extend(f,_.pick(s[i.top][i.left],["dataType","dataType1","dataType2","dateFormat","decCount","decimalSeparator","decimalType","isCheckZero","isDisplayZero","isShowIfZero"])),this.optColumn.resetMergedColumnCallback&&this.optColumn.resetMergedColumnCallback(f),this.cloneColumnFormat(e[o],t||e[o],s[i.top][i.left].id,e[o],t||e[o],f.id),ecount.bitmask.bitmaskEncode(f))},divide:function(n,t,i){var u=[this.theadType,this.tbodyType,this.tfootType],r,l,s,c,p,e,a,v,o,y,h,f;for(this.constValue.columnType.multi==this.optCommon.columnType&&(u=[n]),r=0,l=u.length;r<l;r++)if(s=this.optCommon.columnType==this.constValue.columnType.single?u[r]:t||u[r],this.setStructureInfo(s),c=this.optColumn.generator,this._columnRows&&this._columnRows.length!=0)for(p=this._columnRows[i.top][i.left],e=i.top,a=i.bottom;e<=a;e++)for(v=this._columnRows[e],o=i.right,y=i.left;o>=y;o--)h=v[o],h&&(ecount.common.isTrue(h.isMergeColumn)&&(this.optForm.version==this.constValue.formVersion.fourth?(this.constValue.columnType.single==this.optCommon.columnType&&u[r]==this.theadType||this.constValue.columnType.multi==this.optCommon.columnType)&&this.cloneColumnFormat(u[r],s,this._columnRows[i.top][i.left].id,u[r],s,this._columnRows[e][o].id):(this.constValue.columnType.single==this.optCommon.columnType&&u[r]==this.theadType||this.constValue.columnType.multi==this.optCommon.columnType)&&(c.setColumnType(this.optCommon.columnType),_.extend(this._columnRows[e][o],c.getDefaultColumnOption(t||u[r])),f=this._columnRows[e][o],f.POSITION=this.tfootType==s?this.constValue.sectionType.tfooter:s,this.constValue.columnType.single==this.optCommon.columnType?(f.className=this.getColumnClassName(t||u[r],f),f.columnOption.className=this.getColumnClassName(t||u[r],f.columnOption),f.footerOption.className=this.getColumnClassName(t||u[r],f.footerOption)):this.constValue.columnType.multi==this.optCommon.columnType&&(f.className=this.getColumnClassName(t||u[r],f),f.columnOption={},f.footerOption={}),ecount.bitmask.bitmaskEncode(this._columnRows[e][o]))),e==i.top&&o==i.left||_.extend(h,{dataType:"",dataType1:"TEXT",dataType2:"",dateFormat:null,decCount:0,decimalSeparator:null,decimalType:null,isCheckZero:"1",isDisplayZero:"0",isShowIfZero:"1",controlOption:{}}),this._columnRows[e][o].isMergeColumn="0")},setValue:function(){},canMoveableByBoundary:function(n,t){var u=!0,i,f,r,e;for(this.setStructureInfo(n),i=t.top,f=t.bottom;i<=f;i++){for(r=t.left,e=t.right;r<=e;r++)if(ecount.common.isTrue(this._columnRows[i][r].isMergeColumn)){u=!1;break}if(!u)break}return u},move:function(n,t){var b,i,f,h,s,v,y,p,e,k,a,nt,tt,o,r,c,u,g,wt,it,w,bt;switch(n){case this.constValue.crossDirection.up:var u=t[0],l=[],dt=this.getAll(u.fromColumnSectionType||u.fromSectionType,this.constValue.returnType.multi,!1,"custom",{byDetailSection:!0});if(this.setStructureInfo(u.fromColumnSectionType||u.fromSectionType),i={top:u.fromBoundary.top,bottom:u.fromBoundary.bottom,left:u.fromBoundary.left,right:u.fromBoundary.right},f={top:u.toBoundary.top,bottom:u.toBoundary.bottom,left:u.toBoundary.left,right:u.toBoundary.right},f.top==0&&(this.optCheckbox[u.fromSectionType==this.tfootType?this.theadType:u.fromSectionType].items[this.constValue.checkBoxPropertyName].use&&(index=this.optCheckbox[u.fromSectionType==this.tfootType?this.theadType:u.fromSectionType].items[this.constValue.checkBoxPropertyName].index,u.fromSectionType==this.tfootType?l.push({targetIndex:index}):l.push({targetIndex:index})),this.optRowmoveable.use&&(index=this.optRowmoveable.index,l.push({targetIndex:index})),this.optNumbering.use&&(index=this.optNumbering.index,l.push({targetIndex:index})),l.sort(function(n,t){var i=n.targetIndex,r=t.targetIndex;return i>r?1:i<r?-1:0})),h=this._columnRows[0].length,this.optForm.version==this.constValue.formVersion.fourth){if(s=[],i.top>f.top){for(r=i.top,c=i.bottom;r<=c;r++)o=this._columnRows[r].splice(i.left,i.right-i.left+1),o.splice(0,0,i.left,0),s.push(o);for(r=f.top,c=i.top;r<c;r++)o=this._columnRows[r].splice(f.left,f.right-f.left+1),o.splice(0,0,f.left,0),s.push(o)}else if(i.top<f.top){for(r=i.bottom+1,c=f.bottom;r<=c;r++)o=this._columnRows[r].splice(i.left,i.right-i.left+1),o.splice(0,0,i.left,0),s.push(o);for(r=i.top,c=i.bottom;r<=c;r++)o=this._columnRows[r].splice(i.left,i.right-i.left+1),o.splice(0,0,i.left,0),s.push(o)}}else s=this._columnRows.splice(i.top,i.bottom-i.top+1);for(v=l.length-1;v>-1;v--){for(y=s[0].splice(l[v].targetIndex,1),e=0,k=s[0].length;e<k;e++)if(!this.constValue.checkBoxPropertyNameRex.test(s[0][e].id)&&!this.constValue.rowMoveablePropertyNameRex.test(s[0][e].id)&&!this.constValue.rowNumberingPropertyNameRex.test(s[0][e].id)){s[0][e].linechange=!1;break}for(p=this._columnRows[0].splice(l[v].targetIndex,1),e=0,k=this._columnRows[0].length;e<k;e++)if(!this.constValue.checkBoxPropertyNameRex.test(this._columnRows[0][e].id)&&!this.constValue.rowMoveablePropertyNameRex.test(this._columnRows[0][e].id)&&!this.constValue.rowNumberingPropertyNameRex.test(this._columnRows[0][e].id)){this._columnRows[0][e].linechange=!0;break}var vt=this._columnMap[y[0].id].nextColumnId,ot=this._columnMap[y[0].id].prevColumnId,yt=this._columnMap[p[0].id].nextColumnId,st=this._columnMap[p[0].id].prevColumnId;this._columnMap[vt].prevColumnId=p[0].id;this._columnMap[ot]&&(this._columnMap[ot].nextColumnId=p[0].id);this._columnMap[y[0].id].nextColumnId=yt;this._columnMap[y[0].id].prevColumnId=st;this._columnMap[yt].prevColumnId=y[0].id;this._columnMap[st]&&(this._columnMap[st].nextColumnId=y[0].id);this._columnMap[p[0].id].nextColumnId=vt;this._columnMap[p[0].id].prevColumnId=ot;this._columnRows[0].splice(l[v].targetIndex,0,y[0]);s[0].splice(l[v].targetIndex,0,p[0]);y=this._columns.splice(h*i.top+l[v].targetIndex,1);p=this._columns.splice(l[v].targetIndex,1);this._columns.splice(l[v].targetIndex,0,y[0]);this._columns.splice(h*i.top+l[v].targetIndex,0,p[0])}if(this.optForm.version==this.constValue.formVersion.fourth){if(i.top>f.top)for(var r=f.top,c=i.bottom,rt=0;r<=c;r++,rt++)this._columnRows[r].splice.apply(this._columnRows[r],s[rt]);else if(i.top<f.top)for(var r=i.top,c=f.bottom,rt=0;r<=c;r++,rt++)this._columnRows[r].splice.apply(this._columnRows[r],s[rt])}else f.top<i.top?s.splice(0,0,f.top,0):f.top>i.top&&s.splice(0,0,f.top-(i.bottom-i.top+1),0),this._columnRows.splice.apply(this._columnRows,s);for(r=0,c=this._columnRows.length;r<c;r++)for(e=0,k=this._columnRows[r].length;e<k;e++)this._columnRows[r][e].linechange=r!=0&&e==0,this._columnRows[r][e].lineNo=r+1,this._columnRows[r][e].index=r*h+e;if(this.optForm.version==this.constValue.formVersion.fourth){if(a=[],nt=[],tt=[],i.top>f.top){for(r=i.bottom;r>=i.top;r--)o=this._columns.splice(h*r+i.left,i.right-i.left+1),nt.unshift(o);for(r=i.top-1;r>=f.top;r--)o=this._columns.splice(h*r+i.left,i.right-i.left+1),tt.unshift(o);a=nt.concat(tt);for(var r=f.top,c=i.bottom,d=0;r<=c;r++,d++)a[d].splice(0,0,h*r+i.left,0),this._columns.splice.apply(this._columns,a[d])}else if(i.top<f.top){for(r=f.bottom;r>i.bottom;r--)o=this._columns.splice(h*r+i.left,i.right-i.left+1),nt.unshift(o);for(r=i.bottom;r>=i.top;r--)o=this._columns.splice(h*r+i.left,i.right-i.left+1),tt.unshift(o);a=nt.concat(tt);for(var r=i.top,c=f.bottom,d=0;r<=c;r++,d++)a[d].splice(0,0,h*r+i.left,0),this._columns.splice.apply(this._columns,a[d])}}else a=this._columns.splice(i.top*h,(i.bottom-i.top+1)*h),f.top<i.top?a.splice(0,0,f.top*h,0):f.top>i.top&&a.splice(0,0,(f.top-(i.bottom-i.top+1))*h,0),this._columns.splice.apply(this._columns,a);if(dt[u.fromRowType].columnRows.length==u.fromBoundary.bottom-u.fromBoundary.top+1)switch(u.fromRowType){case this.constValue.sectionSeparateValue.slip:this.__datas[u.fromSectionType+"slip"].startRow-=f.bottom-f.top+1;this.__datas[u.fromSectionType+"slip"].endRow-=f.bottom-f.top+1;this.__datas[u.fromSectionType+"slip"].position="top";this.__datas[u.toSectionType].startRow+=i.bottom-i.top+1;this.__datas[u.toSectionType].endRow+=i.bottom-i.top+1;this.__datas[u.toSectionType].position="bottom";break;default:this.__datas[u.fromSectionType].startRow-=f.bottom-f.top+1;this.__datas[u.fromSectionType].endRow-=f.bottom-f.top+1;this.__datas[u.fromSectionType].position="top";this.__datas[u.toSectionType+"slip"].startRow+=i.bottom-i.top+1;this.__datas[u.toSectionType+"slip"].endRow+=i.bottom-i.top+1;this.__datas[u.toSectionType+"slip"].position="bottom"}break;case this.constValue.crossDirection.down:var u=t[0],l=[],dt=this.getAll(u.fromColumnSectionType||u.fromSectionType,this.constValue.returnType.multi,!1,"custom",{byDetailSection:!0});if(this.setStructureInfo(u.fromColumnSectionType||u.fromSectionType),i={top:u.fromBoundary.top,bottom:u.fromBoundary.bottom,left:u.fromBoundary.left,right:u.fromBoundary.right},f={top:u.toBoundary.top,bottom:u.toBoundary.bottom,left:u.toBoundary.left,right:u.toBoundary.right},i.top==0&&(this.optCheckbox[u.fromSectionType==this.tfootType?this.theadType:u.fromSectionType].items[this.constValue.checkBoxPropertyName].use&&(index=this.optCheckbox[u.fromSectionType==this.tfootType?this.theadType:u.fromSectionType].items[this.constValue.checkBoxPropertyName].index,u.fromSectionType==this.tfootType?l.push({targetIndex:index}):l.push({targetIndex:index})),this.optRowmoveable.use&&(index=this.optRowmoveable.index,l.push({targetIndex:index})),this.optNumbering.use&&(index=this.optNumbering.index,l.push({targetIndex:index})),l.sort(function(n,t){var i=n.targetIndex,r=t.targetIndex;return i>r?1:i<r?-1:0})),h=this._columnRows[0].length,this.optForm.version==this.constValue.formVersion.fourth){if(s=[],i.top>f.top){for(r=i.top,c=i.bottom;r<=c;r++)o=this._columnRows[r].splice(i.left,i.right-i.left+1),o.splice(0,0,i.left,0),s.push(o);for(r=f.top,c=i.top;r<c;r++)o=this._columnRows[r].splice(f.left,f.right-f.left+1),o.splice(0,0,i.left,0),s.push(o)}else if(i.top<f.top){for(r=i.bottom+1,c=f.bottom;r<=c;r++)o=this._columnRows[r].splice(f.left,f.right-f.left+1),o.splice(0,0,i.left,0),s.push(o);for(r=i.top,c=i.bottom;r<=c;r++)o=this._columnRows[r].splice(i.left,i.right-i.left+1),o.splice(0,0,i.left,0),s.push(o)}}else i.top<f.top?s=this._columnRows.splice(i.bottom+1,f.bottom-i.bottom):i.top>f.top&&(s=this._columnRows.splice(i.top,i.bottom-i.top+1));for(v=l.length-1;v>-1;v--){for(y=s[0].splice(l[v].targetIndex,1),e=0,k=s[0].length;e<k;e++)if(!this.constValue.checkBoxPropertyNameRex.test(s[0][e].id)&&!this.constValue.rowMoveablePropertyNameRex.test(s[0][e].id)&&!this.constValue.rowNumberingPropertyNameRex.test(s[0][e].id)){s[0][e].linechange=!1;break}for(p=this._columnRows[0].splice(l[v].targetIndex,1),e=0,k=this._columnRows[0].length;e<k;e++)if(!this.constValue.checkBoxPropertyNameRex.test(this._columnRows[0][e].id)&&!this.constValue.rowMoveablePropertyNameRex.test(this._columnRows[0][e].id)&&!this.constValue.rowNumberingPropertyNameRex.test(this._columnRows[0][e].id)){this._columnRows[0][e].linechange=!0;break}var vt=this._columnMap[y[0].id].nextColumnId,ot=this._columnMap[y[0].id].prevColumnId,yt=this._columnMap[p[0].id].nextColumnId,st=this._columnMap[p[0].id].prevColumnId;this._columnMap[vt].prevColumnId=p[0].id;this._columnMap[ot]&&(this._columnMap[ot].nextColumnId=p[0].id);this._columnMap[y[0].id].nextColumnId=yt;this._columnMap[y[0].id].prevColumnId=st;this._columnMap[yt].prevColumnId=y[0].id;this._columnMap[st]&&(this._columnMap[st].nextColumnId=y[0].id);this._columnMap[p[0].id].nextColumnId=vt;this._columnMap[p[0].id].prevColumnId=ot;this._columnRows[0].splice(l[v].targetIndex,0,y[0]);s[0].splice(l[v].targetIndex,0,p[0]);y=this._columns.splice(h*f.top+l[v].targetIndex,1);p=this._columns.splice(l[v].targetIndex,1);this._columns.splice(l[v].targetIndex,0,y[0]);this._columns.splice(h*f.top+l[v].targetIndex,0,p[0])}if(this.optForm.version==this.constValue.formVersion.fourth){if(i.top>f.top)for(var r=f.top,c=i.bottom,rt=0;r<=c;r++,rt++)this._columnRows[r].splice.apply(this._columnRows[r],s[rt]);else if(i.top<f.top)for(var r=i.top,c=f.bottom,rt=0;r<=c;r++,rt++)this._columnRows[r].splice.apply(this._columnRows[r],s[rt])}else i.top<f.top?s.splice(0,0,i.top,0):i.top>f.top&&s.splice(0,0,f.bottom+1,0),this._columnRows.splice.apply(this._columnRows,s);for(r=0,c=this._columnRows.length;r<c;r++)for(e=0,k=this._columnRows[r].length;e<k;e++)this._columnRows[r][e].linechange=r!=0&&e==0,this._columnRows[r][e].lineNo=r+1,this._columnRows[r][e].index=r*h+e;if(this.optForm.version==this.constValue.formVersion.fourth){if(a=[],nt=[],tt=[],i.top>f.top){for(r=i.bottom;r>=i.top;r--)o=this._columns.splice(h*r+i.left,i.right-i.left+1),nt.unshift(o);for(r=i.top-1;r>=f.top;r--)o=this._columns.splice(h*r+i.left,i.right-i.left+1),tt.unshift(o);a=nt.concat(tt);for(var r=f.top,c=i.bottom,d=0;r<=c;r++,d++)a[d].splice(0,0,h*r+i.left,0),this._columns.splice.apply(this._columns,a[d])}else if(i.top<f.top){for(r=f.bottom;r>i.bottom;r--)o=this._columns.splice(h*r+i.left,i.right-i.left+1),nt.unshift(o);for(r=i.bottom;r>=i.top;r--)o=this._columns.splice(h*r+i.left,i.right-i.left+1),tt.unshift(o);a=nt.concat(tt);for(var r=i.top,c=f.bottom,d=0;r<=c;r++,d++)a[d].splice(0,0,h*r+i.left,0),this._columns.splice.apply(this._columns,a[d])}}else i.top<f.top?(a=this._columns.splice((i.bottom+1)*h,(f.bottom-i.bottom)*h),a.splice(0,0,i.top*h,0)):i.top>f.top&&(a=this._columns.splice(i.top*h,(f.bottom-f.top+1)*h),a.splice(0,0,(f.bottom+1)*h,0)),this._columns.splice.apply(this._columns,a);if(dt[u.fromRowType].columnRows.length==u.fromBoundary.bottom-u.fromBoundary.top+1)switch(u.fromRowType){case this.constValue.sectionSeparateValue.slip:this.__datas[u.fromSectionType+"slip"].startRow+=f.bottom-f.top+1;this.__datas[u.fromSectionType+"slip"].endRow+=f.bottom-f.top+1;this.__datas[u.fromSectionType+"slip"].position="bottom";this.__datas[u.toSectionType].startRow-=i.bottom-i.top+1;this.__datas[u.toSectionType].endRow-=i.bottom-i.top+1;this.__datas[u.toSectionType].position="top";break;default:this.__datas[u.fromSectionType].startRow+=f.bottom-f.top+1;this.__datas[u.fromSectionType].endRow+=f.bottom-f.top+1;this.__datas[u.fromSectionType].position="bottom";this.__datas[u.toSectionType+"slip"].startRow-=i.bottom-i.top+1;this.__datas[u.toSectionType+"slip"].endRow-=i.bottom-i.top+1;this.__datas[u.toSectionType+"slip"].position="top"}break;case this.constValue.crossDirection.left:for(r=0,c=t.length;r<c;r++){u=t[r];this.setStructureInfo(u.fromColumnSectionType||u.fromSectionType);i={top:u.fromBoundary.top,bottom:u.fromBoundary.bottom,left:u.fromBoundary.left,right:u.fromBoundary.right};f={top:u.toBoundary.top,bottom:u.toBoundary.bottom,left:u.toBoundary.left,right:u.toBoundary.right};var h=this._columnRows[0].length,pt=i.right-i.left+1,ut=this._columnRows[u.fromRowIndex][i.left].id,ht=this._columnRows[u.fromRowIndex][i.right].id,ft=this._columnRows[u.fromRowIndex][f.left].id,lt=this._columnRows[u.fromRowIndex][f.right].id,et=this._columnMap[ut].prevColumnId,ct=this._columnMap[ht].nextColumnId,at=this._columnMap[ft].prevColumnId,kt=this._columnMap[lt].nextColumnId;for(et&&(this._columnMap[et].nextColumnId=ct),this._columnMap[ft].prevColumnId=ht,i.left-f.right==1&&(this._columnMap[lt].nextColumnId=ct),ct&&(this._columnMap[ct].prevColumnId=et),at&&(this._columnMap[at].nextColumnId=ut),this._columnMap[ut].prevColumnId=at,this._columnMap[ht].nextColumnId=ft,b=this._columns.splice(u.fromRowIndex*this._columnRows[0].length+i.left,pt),b.splice(0,0,u.toRowIndex*this._columnRows[0].length+f.left,0),this._columns.splice.apply(this._columns,b),b=this._columnRows[u.fromRowIndex].splice(i.left,pt),b.splice(0,0,f.left,0),this._columnRows[u.toRowIndex].splice.apply(this._columnRows[u.toRowIndex],b),g=0,wt=this._columnRows.length;g<wt;g++)for(it=this._columnRows[g],w=0,bt=it.length;w<bt;w++)it[w].linechange=g!=0&&w==0,it[w].index=w+h*g,u.isCancelLeftFixed&&(it[w].LEFT_FIXD_STND_TF=!1)}break;case this.constValue.crossDirection.right:for(r=0,c=t.length;r<c;r++){u=t[r];this.setStructureInfo(u.fromColumnSectionType||u.fromSectionType);i={top:u.fromBoundary.top,bottom:u.fromBoundary.bottom,left:u.fromBoundary.left,right:u.fromBoundary.right};f={top:u.toBoundary.top,bottom:u.toBoundary.bottom,left:u.toBoundary.left,right:u.toBoundary.right};var gt=this.getSystemColumnCount(u.fromColumnSectionType||u.fromSectionType),h=this._columnRows[0].length,ni=h-1,pt=f.right-i.right,ut=this._columnRows[u.fromRowIndex][i.left].id,ht=this._columnRows[u.fromRowIndex][i.right].id,ft=this._columnRows[u.fromRowIndex][i.right+1]&&this._columnRows[u.fromRowIndex][i.right+1].id,lt=this._columnRows[u.fromRowIndex][f.right].id,et=this._columnMap[ut].prevColumnId,ct=this._columnMap[ht].nextColumnId,at=ft&&this._columnMap[ft].prevColumnId,kt=this._columnMap[lt].nextColumnId;for(et&&(this._columnMap[et].nextColumnId=ft),ct&&(this._columnMap[ct].prevColumnId=et),kt&&(this._columnMap[kt].prevColumnId=ht),at&&(this._columnMap[at].nextColumnId=ut),this._columnMap[ut].prevColumnId=lt,this._columnMap[ht].nextColumnId=kt,this._columnMap[ft].prevColumnId=et,this._columnMap[lt].nextColumnId=ut,b=this._columns.splice(u.fromRowIndex*h+i.right+1,pt),b.splice(0,0,u.toRowIndex*h+i.left,0),this._columns.splice.apply(this._columns,b),b=this._columnRows[u.fromRowIndex].splice(i.right+1,pt),b.splice(0,0,i.left,0),this._columnRows[u.toRowIndex].splice.apply(this._columnRows[u.toRowIndex],b),g=0,wt=this._columnRows.length;g<wt;g++)for(it=this._columnRows[g],w=0,bt=it.length;w<bt;w++)it[w].linechange=g!=0&&w==0,it[w].index=w+h*g,u.isCancelLeftFixed&&(it[w].LEFT_FIXD_STND_TF=!1)}}},syncWidthByBoundary:function(n,t){var f=[this.theadType,this.tbodyType,this.tfootType],e,o,r,s,h,u,c,i,l;for(this.setStructureInfo(n),e=this.getSystemColumnCount(n),o=this._columnRows[0].length,r=e,s=o;r<s;r++)for(this.setStructureInfo(n),h=this._columnRows[t.top][r].width,u=0,c=f.length;u<c;u++)for(this.setStructureInfo(f[u]),i=0,l=this._columnRows.length;i<l;i++)(f[u]!=n||i!=t.top)&&this._columnRows[i].length!=0&&(this._columnRows[i][r].width=h)},changeToMove:function(){},increaseRowIndex:function(n,t,i){var f=[this.theadType,this.tbodyType,this.tfootType],u,e,r;for(this.optCommon.columnType==this.constValue.columnType.multi&&(f=[n]),u=0,e=f.length;u<e;u++)r=f[u],t==this.constValue.sectionSeparateValue.slip?r==this.theadType?(this.__datas.thead.startRow>this.__datas.theadslip.endRow&&(this.__datas.thead.startRow+=i,this.__datas.thead.endRow+=i),this.__datas.theadslip.endRow+=i):r==this.tbodyType?(this.__datas.tbody.startRow>this.__datas.tbodyslip.endRow&&(this.__datas.tbody.startRow+=i,this.__datas.tbody.endRow+=i),this.__datas.tbodyslip.endRow+=i):r==this.tfootType&&(this.__datas.tfoot.startRow>this.__datas.tfootslip.endRow&&(this.__datas.tfoot.startRow+=i,this.__datas.tfoot.endRow+=i),this.__datas.tfootslip.endRow+=i):r==this.theadType?(this.__datas.theadslip.startRow>this.__datas.thead.endRow&&(this.__datas.theadslip.startRow+=i,this.__datas.theadslip.endRow+=i),this.__datas.thead.endRow+=i):r==this.tbodyType?(this.__datas.tbodyslip.startRow>this.__datas.tbody.endRow&&(this.__datas.tbodyslip.startRow+=i,this.__datas.tbodyslip.endRow+=i),this.__datas.tbody.endRow+=i):r==this.tfootType&&(this.__datas.tfootslip.startRow>this.__datas.tfoot.endRow&&(this.__datas.tfootslip.startRow+=i,this.__datas.tfootslip.endRow+=i),this.__datas.tfoot.endRow+=i)},decreaseRowIndex:function(n,t,i){var f=[this.theadType,this.tbodyType,this.tfootType],u,e,r;for(this.optCommon.columnType==this.constValue.columnType.multi&&(f=[n]),u=0,e=f.length;u<e;u++)r=f[u],t==this.constValue.sectionSeparateValue.slip?r==this.theadType?(this.__datas.thead.startRow>this.__datas.theadslip.endRow&&(this.__datas.thead.startRow-=i,this.__datas.thead.endRow-=i),this.__datas.theadslip.endRow-=i):r==this.tbodyType?(this.__datas.tbody.startRow>this.__datas.tbodyslip.endRow&&(this.__datas.tbody.startRow-=i,this.__datas.tbody.endRow-=i),this.__datas.tbodyslip.endRow-=i):r==this.tfootType&&(this.__datas.tfoot.startRow>this.__datas.tfootslip.endRow&&(this.__datas.tfoot.startRow-=i,this.__datas.tfoot.endRow-=i),this.__datas.tfootslip.endRow-=i):r==this.theadType?(this.__datas.theadslip.startRow>this.__datas.thead.endRow&&(this.__datas.theadslip.startRow-=i,this.__datas.theadslip.endRow-=i),this.__datas.thead.endRow-=i):r==this.tbodyType?(this.__datas.tbodyslip.startRow>this.__datas.tbody.endRow&&(this.__datas.tbodyslip.startRow-=i,this.__datas.tbodyslip.endRow-=i),this.__datas.tbody.endRow-=i):r==this.tfootType&&(this.__datas.tfootslip.startRow>this.__datas.tfoot.endRow&&(this.__datas.tfootslip.startRow-=i,this.__datas.tfootslip.endRow-=i),this.__datas.tfoot.endRow-=i)},getGroupRowIndexInfo:function(n,t,i){var r={startRowIndex:-1,startRowCount:0,endRowIndex:-1,endRowCount:0};return i==this.constValue.sectionSeparateValue.slip?t==this.theadType?(r.startRowIndex=this.__datas.theadslip.startRow,r.startRowCount=this.__datas.theadslip.startRow+1,r.endRowIndex=this.__datas.theadslip.endRow,r.endRowCount=this.__datas.theadslip.endRow+1):t==this.tbodyType?(r.startRowIndex=this.__datas.tbodyslip.startRow,r.startRowCount=this.__datas.tbodyslip.startRow+1,r.endRowIndex=this.__datas.tbodyslip.endRow,r.endRowCount=this.__datas.tbodyslip.endRow+1):t==this.tfootType&&(r.startRowIndex=this.__datas.tfootslip.startRow,r.startRowCount=this.__datas.tfootslip.startRow+1,r.endRowIndex=this.__datas.tfootslip.endRow,r.endRowCount=this.__datas.tfootslip.endRow+1):t==this.theadType?(r.startRowIndex=this.__datas.thead.startRow,r.startRowCount=this.__datas.thead.startRow+1,r.endRowIndex=this.__datas.thead.endRow,r.endRowCount=this.__datas.thead.endRow+1):t==this.tbodyType?(r.startRowIndex=this.__datas.tbody.startRow,r.startRowCount=this.__datas.tbody.startRow+1,r.endRowIndex=this.__datas.tbody.endRow,r.endRowCount=this.__datas.tbody.endRow+1):t==this.tfootType&&(r.startRowIndex=this.__datas.tfoot.startRow,r.startRowCount=this.__datas.tfoot.startRow+1,r.endRowIndex=this.__datas.tfoot.endRow,r.endRowCount=this.__datas.tfoot.endRow+1),r},getDetailSections:function(n){var r,u,t,f,i;for(this.setStructureInfo(n),r=[],u={},t=0,f=this._columnRows.length;t<f;t++)i=this._columnRows[t][0].GROUP_FLAG,u[i]||(r.push(i),u[i]=!0);return r},hasTheadType:function(){return this.__datas[this.theadType].startRow>-1&&this.__datas[this.theadType].endRow>-1},hasTheadSlipType:function(){return this.__datas[this.theadSlipType].startRow>-1&&this.__datas[this.theadSlipType].endRow>-1},hasTbodyType:function(){return this.__datas[this.tbodyType].startRow>-1&&this.__datas[this.tbodyType].endRow>-1},hasTbodySlipType:function(){return this.__datas[this.tbodySlipType].startRow>-1&&this.__datas[this.tbodySlipType].endRow>-1},hasTfootType:function(){return this.__datas[this.tfootType].startRow>-1&&this.__datas[this.tfootType].endRow>-1},hasTfootSlipType:function(){return this.__datas[this.tfootSlipType].startRow>-1&&this.__datas[this.tfootSlipType].endRow>-1},setColumnOption:function(n,t,i,r){var c=this,h,f,o,s,e,u;if(this.optCommon.columnType==this.constValue.columnType.single?this.setStructureInfo(this.theadType):this.setStructureInfo(n),h=!1,f=this._columnKeys[t],f.className||(f.className=""),e=function(t,i,r){var f,e,s,o,c;if(["fontItalic","fontBold","isShadow","isTempColumn","IsSubTotal","IsPageTotal","IsTotal"].contains(i)&&ecount.common.isBoolean(r)){f=ecount.common.isTrue(r);switch(i){case"fontBold":t.className=t.className.replace(this.constValue.boldRex,"");f&&(t.className+="text-bold ");u&&(u[this.constValue.rowVariableNames.isBold]=f,this.__setting.setTotalFontBold(f));break;case"fontItalic":t.className=t.className.replace(this.constValue.italicRex,"");f&&(t.className+="text-italic ");u&&(u[this.constValue.rowVariableNames.isFontItalic]=f,this.__setting.setTotalFontItalic(f));break;case"isShadow":n==this.theadType?(t.className=t.className.replace(this.constValue.bgRex,""),t.fontCellBgColor||f||(t.className+="bg-white ")):(t.className=t.className.replace(this.constValue.bgRex,""),!t.fontCellBgColor&&f&&(t.className+="bg-muted "))}h=t[i]!=r;h&&(t[i]=r)}else if(["fontStrike","fontUnderline"].contains(i))f=ecount.common.isTrue(r),t.className=t.className.replace(this.constValue.strikeRex,"").replace(this.constValue.underlineRex,"").replace(this.constValue.strikeUnderlineRex,""),i=="fontStrike"?(f&&ecount.common.isTrue(t.fontUnderline)?t.className+=" grid-text-uline-through ":f?t.className+=" text-line-through ":ecount.common.isTrue(t.fontUnderline)&&(t.className+=" text-uline "),u&&(u[this.constValue.rowVariableNames.isFontStrike]=f,this.__setting.setTotalFontStrike(f))):i=="fontUnderline"&&(ecount.common.isTrue(t.fontStrike)&&f?t.className+=" grid-text-uline-through ":ecount.common.isTrue(t.fontStrike)?t.className+=" text-line-through ":f&&(t.className+=" text-uline "),u&&(u[this.constValue.rowVariableNames.isFontUnderline]=f,this.__setting.setFootStyleFontUnderline(f))),h=!0,t[i]!=r&&(t[i]=r);else if(i.indexOf(".")>-1){for(e=i.split("."),s=e.pop(),o=0,c=e.length;o<c;o++)t=t[e[o]];t[s]=r}else if(r!=undefined&&r!=null){switch(i){case"font":t.className.indexOf("font-"+ecount.convertor.convertFontClassName(t[i])+" ")>-1?t.className=t.className.replace("font-"+ecount.convertor.convertFontClassName(t[i])+" ","font-"+ecount.convertor.convertFontClassName(r)+" "):t.className+="font-"+ecount.convertor.convertFontClassName(r)+" ";u&&(u[this.constValue.rowVariableNames.isCenterAlign]=ecount.convertor.convertFontClassName(r),this.__setting.setTotalFont(ecount.convertor.convertFontClassName(r)));break;case"align":this.constValue.alignRex.test(t.className)&&(t.className=t.className.replace(this.constValue.alignRex,""));t.className+="text-"+r+" ";u&&(u[this.constValue.rowVariableNames.isCenterAlign]=r,this.__setting.setTotalHorizontalAlign(r));break;case"valign":this.constValue.valignRex.test(t.className)&&(t.className=t.className.replace(this.constValue.valignRex,""));t.className+="valign-"+r+" ";u&&this.__setting.setTotalVerticalAlign(r);break;case"fontSize":this.constValue.fontSizeRex.test(t.className)&&(t.className=t.className.replace(this.constValue.fontSizeRex,""));t.className+="font-"+r+"px ";u&&(u[this.constValue.rowVariableNames.fontSize]=r,this.__setting.setTotalFontSize(r));break;case"fontColor":t.isColorSettable=!0;r.trim()=="000000"?(r="",u&&(u[this.constValue.rowVariableNames.fontColor]=r,this.__setting.setFootStyleFontColor(r))):(u&&(u[this.constValue.rowVariableNames.fontColor]=r,this.__setting.setFootStyleFontColor(r)),r=r+" ")}h=t[i]!=r;t[i]!=r&&(t[i]=r)}}.bind(this),n===this.tfootType&&["fontItalic","fontBold","fontStrike","fontUnderline","font","align","valign","fontSize","fontColor"].contains(i)&&this.dataRow.getAll(n).some(function(n){var i=n[c.constValue.rowVariableNames.mergeSet];return i.some(function(n){if(n.columnId===t)return u=n,!0}),u?void 0:!0}),[this.constValue.columnType.single,this.constValue.columnType.each].contains(this.optCommon.columnType))switch(n){case this.theadType:o=this.__datas[this.tbodyType].columnKeys[t];s=this.__datas[this.tfootType].columnKeys[t];f&&f.columnOption&&e(f.columnOption,i,r);o&&o.columnOption&&e(o.columnOption,i,r);s&&s.columnOption&&e(s.columnOption,i,r);["ALIGN_USE_BODY_TF","ALIGN_USE_BODY_TF","ALIGN_USE_BODY_TF","FONT_USE_HEAD_TF","FONT_USE_BODY_TF","FONT_USE_FOOT_TF"].contains(i)&&e(f,i,r);break;case this.tbodyType:o=this.__datas[this.tbodyType].columnKeys[t];s=this.__datas[this.tfootType].columnKeys[t];f&&f&&e(f,i,r);o&&o&&e(o,i,r);s&&s&&e(s,i,r);["ALIGN_USE_BODY_TF","ALIGN_USE_BODY_TF","ALIGN_USE_BODY_TF","FONT_USE_HEAD_TF","FONT_USE_BODY_TF","FONT_USE_FOOT_TF"].contains(i)&&e(f,i,r);break;case this.tfootType:o=this.__datas[this.tbodyType].columnKeys[t];s=this.__datas[this.tfootType].columnKeys[t];f&&f.footerOption&&e(f.footerOption,i,r);o&&o.footerOption&&e(o.footerOption,i,r);s&&s.footerOption&&e(s.footerOption,i,r);["ALIGN_USE_BODY_TF","ALIGN_USE_BODY_TF","ALIGN_USE_BODY_TF","FONT_USE_HEAD_TF","FONT_USE_BODY_TF","FONT_USE_FOOT_TF"].contains(i)&&e(f,i,r)}else e(f,i,r);return h},setChangeHide:function(n,t,i){var u,f,o,e,s,r,h;for(i=ecount.common.isTrue(i),f=!1,[this.constValue.columnType.single].contains(this.optCommon.columnType)?u=[this.theadType,this.tbodyType,this.tfootType]:[this.constValue.columnType.multi,this.constValue.columnType.each].contains(this.optCommon.columnType)&&(u=[n]),o=this.getIndexById(n,this.constValue.returnColumnIndexType.multi,t),e=0,s=u.length;e<s;e++)for(this.setStructureInfo(u[e]),columnRows=this._columnRows,r=0,h=columnRows.length;r<h;r++)columnRows[r].length!=0&&(f||ecount.common.isTrue(columnRows[r][o].isHideColumn)==i||(f=!0),columnRows[r][o].isHideColumn=i);return f},setChangeWidth:function(n,t,i){var u,e=!1,o,f,s,r,h;for([this.constValue.columnType.single,this.constValue.columnType.multi].contains(this.optCommon.columnType)?u=[this.theadType,this.tbodyType,this.tfootType]:this.constValue.columnType.each==this.optCommon.columnType&&(u=[n]),o=this.getIndexById(n,this.constValue.returnColumnIndexType.multi,t),f=0,s=u.length;f<s;f++)for(this.setStructureInfo(u[f]),columnRows=this._columnRows,r=0,h=columnRows.length;r<h;r++)columnRows[r].length!=0&&(e||columnRows[r][o].width==i||(e=!0),columnRows[r][o].width=i);return e},setChangeDataType:function(n,t,i){var f,o,e,s,u,r;for(i=i||{},f=!1,[this.constValue.columnType.single].contains(this.optCommon.columnType)?sectionTypes=[this.theadType,this.tbodyType,this.tfootType]:this.constValue.columnType.multi==this.optCommon.columnType?sectionTypes=[n]:this.constValue.columnType.each==this.optCommon.columnType&&(sectionTypes=[n]),o=this.getIndexById(n,this.constValue.returnColumnIndexType.single,t),e=0,s=sectionTypes.length;e<s;e++)if((this.setStructureInfo(sectionTypes[e]),this._columns.length!=0)&&(u=this._columns[o],r=this._columnKeys[u.id],i.dataType1&&(i.dateFormat||ecount.common.isBoolean(i.isDisplayZero)||$.isNumber(i.decCount)))){switch(i.dataType1){case"NUM":i.isDisplayZero=i.isDisplayZero==null||i.isDisplayZero==undefined?i.isDisplayZero:i.isDisplayZero;i.decCount=i.decCount==null||i.decCount==undefined?i.decCount:i.decCount;i.isDisplayZero=i.isDisplayZero;i.decCount=i.decCount;delete i.dateFormat;break;case"DATETIME":i.dateFormat=i.dateFormat==null||i.dateFormat==undefined?i.dateFormat:i.dateFormat;delete i.isDisplayZero;delete i.decCount;break;case"TEXT":delete i.dateFormat;delete i.isDisplayZero;delete i.decCount}delete u.dataType;delete u.isCheckZero;delete u.isShowIfZero;delete u.amtCalc;delete u.thousandSeparator;delete u.decimalSeparator;r&&(delete r.dataType,delete r.isCheckZero,delete r.isShowIfZero,delete r.amtCalc,delete r.thousandSeparator,delete r.decimalSeparator);u.controlOption&&(delete u.controlOption.dataType,delete u.controlOption.decimalUnit,delete u.controlOption.isCheckZero,delete u.controlOption.numberType,r&&(delete r.controlOption.dataType,delete r.controlOption.decimalUnit,delete r.controlOption.isCheckZero,delete r.controlOption.numberType));this.optCommon.columnType==this.constValue.columnType.single?(this.removeColumnDataType(this.theadType,u),r&&this.removeColumnDataType(this.theadType,r)):(this.removeColumnDataType(n,u),r&&this.removeColumnDataType(n,r));u.dataType1=i.dataType1;u.dataType2=i.dataType2;u.isDisplayZero=i.isDisplayZero;u.decCount=i.decCount;u.dateFormat=i.dateFormat;u.isCheckZero=i.isCheckZero;u.isShowIfZero=i.isShowIfZero;u.amtCalc=i.amtCalc;u.thousandSeparator=i.thousandSeparator;u.decimalSeparator=i.decimalSeparator;r&&(r.dataType1=i.dataType1,r.dataType2=i.dataType2,r.isDisplayZero=i.isDisplayZero,r.decCount=i.decCount,r.dateFormat=i.dateFormat,r.isCheckZero=i.isCheckZero,r.isShowIfZero=i.isShowIfZero,r.amtCalc=i.amtCalc,r.thousandSeparator=i.thousandSeparator,r.decimalSeparator=i.decimalSeparator);this.optCommon.columnType==this.constValue.columnType.single?(this.makeColumnDataType(this.theadType,u),r&&this.makeColumnDataType(this.theadType,r)):(this.makeColumnDataType(n,u),r&&this.makeColumnDataType(this.theadType,r));f||(f=!0)}return f},setChangeColumnInfo:function(n,t,i,r){var u,e=!1,f,o;for([this.constValue.columnType.single,this.constValue.columnType.each==this.optCommon.columnType].contains(this.optCommon.columnType)?u=[this.theadType,this.tbodyType,this.tfootType]:this.constValue.columnType.multi&&(u=[n]),f=0,o=u.length;f<o;f++)this.setStructureInfo(u[f]),e?this.setColumnOption(u[f],t,i,r):e=this.setColumnOption(u[f],t,i,r);return e},setColumnInfo:function(n,t,i){var o;this.optCommon.columnType==this.constValue.columnType.single?this.setStructureInfo(this.theadType):this.setStructureInfo(n);var s=!1,h=!1,c=!1,l=!1,a=!1,v=!1,y=!1,p=!1,w=!1,b=!1,k=!1,d=!1,g=!1,nt=!1,tt=!1,it=!1,rt=!1,e=!1,ut=!1,ft=!1,ni=!1,et=!1,ot=!1,st=!1,ht=!1,ct=!1,lt=!1,at=!1,vt=!1,yt=!1,pt=!1,wt=!1,bt=!1,kt=!1,dt=!1,gt=!1,r=this._columnKeys[t],u,f=r,ii=this.getIndexById(n,this.constValue.returnColumnIndexType.multi,t),ti=[this.theadType,this.tbodyType,this.tfootType];if(this.constValue.columnType.multi==this.optCommon.columnType&&(ti=[n]),f.className||(f.className=""),[this.constValue.columnType.single,this.constValue.columnType.each].contains(this.optCommon.columnType))switch(n){case this.theadType:f=r.columnOption;break;case this.tbodyType:u=this.__datas[this.theadType].columnKeys[t];break;case this.tfootType:f=r.footerOption}return o=$.isBoolean(i.isHideColumn)?i.isHideColumn:null,o!=null&&(s=this.setChangeHide(n,t,o)),i.width!=null&&(h=this.setChangeWidth(n,t,i.width)),i.title!=null&&i.title!=undefined&&(r.title=i.title,c=!0),i.editableState!=undefined&&i.editableState!=null&&(r.editableState=i.editableState),i.dataType1&&(i.dateFormat||ecount.common.isBoolean(i.isDisplayZero)||$.isNumber(i.decCount))&&(l=this.setChangeDataType(n,t,i)),this.setColumnOption(n,t,"ALIGN_USE_BODY_TF",i.ALIGN_USE_BODY_TF),this.setColumnOption(n,t,"ALIGN_USE_FOOT_TF",i.ALIGN_USE_FOOT_TF),this.setColumnOption(n,t,"ALIGN_USE_HEAD_TF",i.ALIGN_USE_HEAD_TF),this.setColumnOption(n,t,"BARCD_IMAGE_TF",i.BARCD_IMAGE_TF),this.setColumnOption(n,t,"BARCD_TYPE",i.BARCD_TYPE),this.setColumnOption(n,t,"DISPLAY_COL_TF",i.DISPLAY_COL_TF),this.setColumnOption(n,t,"DISPLAY_PERIOD_TF",i.DISPLAY_PERIOD_TF),this.setColumnOption(n,t,"EXTEND_TF",i.EXTEND_TF),this.setColumnOption(n,t,"FONT_USE_BODY_TF",i.FONT_USE_BODY_TF),this.setColumnOption(n,t,"FONT_USE_FOOT_TF",i.FONT_USE_FOOT_TF),this.setColumnOption(n,t,"FONT_USE_HEAD_TF",i.FONT_USE_HEAD_TF),this.setColumnOption(n,t,"LAST_PAGE_TF",i.LAST_PAGE_TF),this.setColumnOption(n,t,"SHADOW_TF",i.SHADOW_TF),this.setColumnOption(n,t,"STANDARD_BY_TYPE",i.STANDARD_BY_TYPE),this.setColumnOption(n,t,"SUBTOT_TF",i.SUBTOT_TF),this.setColumnOption(n,t,"TOT_TF",i.TOT_TF),this.setColumnOption(n,t,"DEC_SEPARATOR",i.DEC_SEPARATOR),this.setColumnOption(n,t,"THOU_SEPARATOR",i.THOU_SEPARATOR),this.setColumnOption(n,t,"usertableCd",i.usertableCd),this.setColumnOption(n,t,"usertableNm",i.usertableNm),this.setColumnOption(n,t,"isMultiCol",i.isMultiCol),this.setColumnOption(n,t,"isMultiLineFeed",i.isMultiLineFeed),this.setColumnOption(n,t,"multiAscDesc",i.multiAscDesc),this.setColumnOption(n,t,"multiColCnt",i.multiColCnt),this.setColumnOption(n,t,"multiRowCnt",i.multiRowCnt),this.setColumnOption(n,t,"multiSortCd",i.multiSortCd),this.setColumnOption(n,t,"MULTI_OUT_TF",i.MULTI_OUT_TF),this.setColumnOption(n,t,"DEFINE_CD",i.DEFINE_CD),this.setColumnOption(n,t,"IMG_SZ_DSTN_CLAS",i.IMG_SZ_DSTN_CLAS),this.setColumnOption(n,t,"THUM_CD",i.THUM_CD),this.setColumnOption(n,t,"acctInType",i.acctInType),this.setColumnOption(n,t,"acctOutType",i.acctOutType),this.setColumnOption(n,t,"URL_LNK_TF",i.URL_LNK_TF),this.setColumnOption(n,t,"isMultiRow",i.isMultiRow),this.setColumnOption(n,t,"isItemFold",i.isItemFold),this.setColumnOption(n,t,"isShowDuplicateValue",i.isShowDuplicateValue),this.setColumnOption(n,t,"cursorIndex",i.cursorIndex),this.setColumnOption(n,t,"realId",i.realId),this.setColumnOption(n,t,"calculate",i.calculate),this.setColumnOption(n,t,"colEssentialYn",i.colEssentialYn),this.setColumnOption(n,t,"isRequisite2",i.isRequisite2),this.setColumnOption(n,t,"isEditable",i.isEditable),this.setColumnOption(n,t,"isInputable",i.isInputable),this.setColumnOption(n,t,"isUrlLink",i.isUrlLink),this.setColumnOption(n,t,"isTempColumn",i.isTempColumn),this.setColumnOption(n,t,"displayName",i.displayName),this.setColumnOption(n,t,"subTitle",i.subTitle),this.setColumnOption(n,t,"DTLS_INFO_USE_TF",i.DTLS_INFO_USE_TF),this.setColumnOption(n,t,"CNNT_FORM_TYPE",i.CNNT_FORM_TYPE),this.setColumnOption(n,t,"TITLE_NM",i.TITLE_NM),this.setColumnOption(n,t,"TODAY_TIME_TF",i.TODAY_TIME_TF),this.setColumnOption(n,t,"DATA_FORMAT1",i.DATA_FORMAT1),this.setColumnOption(n,t,"DATA_FORMAT2",i.DATA_FORMAT2),this.setColumnOption(n,t,"NUMBER_USE_TF",i.NUMBER_USE_TF),this.setColumnOption(n,t,"PAT_MARK_TYPCD",i.PAT_MARK_TYPCD),this.setColumnOption(n,t,"CALC_TERM_MM",i.CALC_TERM_MM),this.setColumnOption(n,t,"CNNT_COL_CD",i.CNNT_COL_CD),this.setColumnOption(n,t,"ASO_COL_CD",i.ASO_COL_CD),this.setColumnOption(n,t,"PROF_ATT_MARK_TF",i.PROF_ATT_MARK_TF),this.setColumnOption(n,t,"ELEC_SIGN_MARK_TF",i.ELEC_SIGN_MARK_TF),this.setColumnOption(n,t,"columnType",i.columnType),this.setColumnOption(n,t,"CD_ICLS_TF",i.CD_ICLS_TF),i.ref&&this.setColumnOption(n,t,"ref.rowIndex",i.ref.rowIndex),p=this.setColumnOption(n,t,"font",i.font),y=this.setColumnOption(n,t,"fontSize",i.fontSize),a=this.setColumnOption(n,t,"align",i.align),v=this.setColumnOption(n,t,"valign",i.valign),w=this.setColumnOption(n,t,"fontBold",i.fontBold),b=this.setColumnOption(n,t,"fontColor",i.fontColor),g=this.setColumnOption(n,t,"fontItalic",i.fontItalic),rt=this.setColumnOption(n,t,"fontCellBgColor",i.fontCellBgColor),it=this.setColumnOption(n,t,"isShadow",i.isShadow),$.isNull(i.fontStrike)||(nt=this.setColumnOption(n,t,"fontStrike",i.fontStrike)),$.isNull(i.fontUnderline)||(tt=this.setColumnOption(n,t,"fontUnderline",i.fontUnderline)),k=this.setColumnOption(n,t,"fontBgColor",i.fontBgColor),d=this.setColumnOption(n,t,"fontEcsTxtProcCd",i.fontEcsTxtProcCd),e=this.setColumnOption(n,t,"TOP_BORD_USE_TF",i.TOP_BORD_USE_TF),ut=this.setColumnOption(n,t,"TOP_BORD_COLOR_CD",i.TOP_BORD_COLOR_CD),ft=this.setColumnOption(n,t,"TOP_BORD_THICK",i.TOP_BORD_THICK),ni=this.setColumnOption(n,t,"TOP_BORD_STYL_CD",i.TOP_BORD_STYL_CD),et=this.setColumnOption(n,t,"BTTM_BORD_USE_TF",i.BTTM_BORD_USE_TF),ot=this.setColumnOption(n,t,"BTTM_BORD_COLOR_CD",i.BTTM_BORD_COLOR_CD),st=this.setColumnOption(n,t,"BTTM_BORD_THICK",i.BTTM_BORD_THICK),ht=this.setColumnOption(n,t,"BTTM_BORD_STYL_CD",i.BTTM_BORD_STYL_CD),ct=this.setColumnOption(n,t,"LEFT_BORD_USE_TF",i.LEFT_BORD_USE_TF),lt=this.setColumnOption(n,t,"LEFT_BORD_COLOR_CD",i.LEFT_BORD_COLOR_CD),at=this.setColumnOption(n,t,"LEFT_BORD_THICK",i.LEFT_BORD_THICK),vt=this.setColumnOption(n,t,"LEFT_BORD_STYL_CD",i.LEFT_BORD_STYL_CD),yt=this.setColumnOption(n,t,"RGT_BORD_USE_TF",i.RGT_BORD_USE_TF),pt=this.setColumnOption(n,t,"RGT_BORD_COLOR_CD",i.RGT_BORD_COLOR_CD),wt=this.setColumnOption(n,t,"RGT_BORD_THICK",i.RGT_BORD_THICK),bt=this.setColumnOption(n,t,"RGT_BORD_STYL_CD",i.RGT_BORD_STYL_CD),kt=this.setColumnOption(n,t,"IsSubTotal",i.IsSubTotal),dt=this.setColumnOption(n,t,"IsPageTotal",i.IsPageTotal),gt=this.setColumnOption(n,t,"IsTotal",i.IsTotal),ecount.bitmask&&ecount.bitmask.bitmaskEncode(r),r.columnOption&&ecount.bitmask&&ecount.bitmask.bitmaskEncode(r.columnOption),r.footerOption&&ecount.bitmask&&ecount.bitmask.bitmaskEncode(r.footerOption),u&&(ecount.bitmask&&ecount.bitmask.bitmaskEncode(u),u.columnOption&&ecount.bitmask&&ecount.bitmask.bitmaskEncode(u.columnOption),u.footerOption&&ecount.bitmask&&ecount.bitmask.bitmaskEncode(u.footerOption)),{isChangedHide:s,isChangedWidth:h,isChangedTitle:c,isChangedDataType:l,isChangedAlign:a,isChangedValign:v,isChangedFontSize:y,isChangedFont:p,isChangedFontBold:w,isChangedFontColor:b,isChangedFontItalic:g,isChangedFontStrike:nt,isChangedFontUnderline:tt,isChangedFontBgColor:k,isChangedLinebreak:d,isChangedBgShadow:it,isChangedBgColor:rt,isChangedUseBorderTop:e,isChangedBorderTopColor:ut,isChangedBorderTopWidth:ft,isChangedBorderTopStyle:e,isChangedUseBorderBottom:et,isChangedBorderBottomColor:ot,isChangedBorderBottomWidth:st,isChangedBorderBottomStyle:ht,isChangeduseBorderLeft:ct,isChangedBorderLeftColor:lt,isChangedBorderLeftWidth:at,isChangedBorderLeftStyle:vt,isChangedUseBorderRight:yt,isChangedBorderRightColor:pt,isChangedBorderRightWidth:wt,isChangedBorderRightStyle:bt,isChangedSubTotal:kt,isChangedPageTotal:dt,isChangedTotal:gt}},getById:function(n,t,i){this.setStructureInfo(n);var r=this._columnKeys[t]||this._dataConversionColumnKeys[t];return i?Object.clone(r):r},getColumnIndex:function(n,t){var r,i,u;for(this.setStructureInfo(n),r={rowIndex:-1,columnIndex:-1},i=0;i<this._columnRows.length;i++){for(u=this._columnRows[i],j=0;j<u.length;j++)if(u[j].id==t){r={rowIndex:i,columnIndex:j};break}if(r.columnIndex>-1)break}return r},getByBoundary:function(n,t,i){this.setStructureInfo(n);var r=this._columnRows[t.top][t.left];return i?Object.clone(r):r},getDuplicatedColumns:function(n,t,i){var f,u,r;for(this.setStructureInfo(n),f=[],u=0;u<this._columns.length;u++)r=this._columns[u],r.originalId&&r.originalId==t&&f.push(i?Object.clone(r):r);return f},getByIndex:function(n,t,i){var u=0,f=this.constValue.searchType.single,r;if(arguments.length==5&&(n=arguments[0],t=arguments[1],u=arguments[2],f=arguments[3],i=arguments[4]),this.setStructureInfo(n),f==this.constValue.searchType.single){if(this._columns.length==0)return null;r=this._columns[t]}else{if(this._columnRows.length==0)return null;r=this._columnRows[u][t]}if(!r)throw"ecount.gridV2.data.column 객체 getByIndex 함수에서 columnIndex: "+t+" 를 찾지 못했습니다.";return i?Object.clone(r):r},getIndexById:function(n,t,i){var s,e,u;this.setStructureInfo(n);var o=this._columnKeys[i],r=-1,f=0;if(!o)return r;for(s=this._columnRows.length;f<s;f++){for(e=this._columnRows[f],u=0;u<e.length;u++)if(e[u].id==o.id&&(r=u),r>-1)break;if(r>-1)break}return this.constValue.returnColumnIndexType.single==t?f*this._columnRows[0].length+r:this.constValue.returnColumnIndexType.multi==t?r:-1},getMatrixIndexById:function(n,t){var o,f,i;this.setStructureInfo(n);var e=this._columnKeys[t],r=-1,u=0;if(!e)return index;for(o=this._columnRows.length;u<o;u++){for(f=this._columnRows[u],i=0;i<f.length;i++)if(f[i].id==e.id&&(r=i),r>-1)break;if(r>-1)break}return{top:u,left:r}},getPrevColumn:function(n,t){return this.setStructureInfo(n),this._columnKeys[this._columnMap[t].prevColumnId]},getNextColumn:function(n,t){return this.setStructureInfo(n),this._columnKeys[this._columnMap[t].nextColumnId]},getNextColumnId:function(n,t,i){var r,f,e,u,o;if(this.optCommon.gridType==this.constValue.gridType.editable){if(r=this.getAllMoreThanCursorIndex(n,t),!r)return null;while(r){if(f=this.__core.view.cell.getCellElement(n,r.id,i),!f.cell){r=this.getAllMoreThanCursorIndex(n,r.id);continue}if(this.constValue.cellEditableRex.test(f.cell.className)){r=this.getAllMoreThanCursorIndex(n,r.id);continue}if(e=this.__core.data.row.getViewDataCellInfo(n,r.id,i),e.editableState)return r.id;r=this.getAllMoreThanCursorIndex(n,r.id)}}else for(this.setStructureInfo(n),u=0,o=this._columns.length;u<o;u++)if(this._columns[u].id==t)return this._columns[u+1]&&this._columns[u+1].id;return null},getPrevColumnId:function(n,t,i){var r,f,e,u,o;if(this.optCommon.gridType==this.constValue.gridType.editable){if(r=this.getAllLessThanCursorIndex(n,t),!r)return null;while(r){if(f=this.__core.view.cell.getCellElement(n,r.id,i),!f.cell){r=this.getAllLessThanCursorIndex(n,r.id);continue}if(this.constValue.cellEditableRex.test(f.cell.className)){r=this.getAllMoreThanCursorIndex(n,r.id);continue}if(e=this.__core.data.row.getViewDataCellInfo(n,r.id,i),e.editableState)return r.id;r=this.getAllLessThanCursorIndex(n,r.id)}}else for(this.setStructureInfo(n),u=0,o=this._columns.length;u<o;u++)if(this._columns[u].id==t)return this._columns[u-1]&&this._columns[u-1].id;return null},getNextRealColumn:function(n,t){var i,f,r,u,e,o;if(this.setStructureInfo(n),i=this.getNextColumn(n,t),f=0,!i)return{column:null,plusIndex:f};if(i.isMergeColumn==null||i.isMergeColumn==undefined||ecount.common.isFalse(i.isMergeColumn))return{column:i,plusIndex:f};for(r=this._columnRows[i.lineNo-1],u=r.indexOf(i)+1,i=null,e=!1,o=r.length;u<o;u++)if(f+=1,r[u].isMergeColumn==null||r[u].isMergeColumn==undefined||ecount.common.isFalse(r[u].isMergeColumn)){i=r[u];e=!0;break}return e?{column:i,plusIndex:f}:{column:i,plusIndex:0}},getPrevRealColumn:function(n,t,i){var o,r,f;i=i||{};o=i.firstSearchPosition||"previous";f=0;switch(o){case"previous":r=this.getPrevColumn(n,t);break;case"self":r=this.getById(n,t)}if(!r)return{minuseIndex:f,column:null};if(r.isMergeColumn==null||r.isMergeColumn==undefined||ecount.common.isFalse(r.isMergeColumn))return{minuseIndex:f,column:r};var e=this._columnRows[r.lineNo-1],u=e.indexOf(r)-1,s=!1;for(r=null;u>-1;u--)if(f-=1,e[u].isMergeColumn==null||e[u].isMergeColumn==undefined||ecount.common.isFalse(e[u].isMergeColumn)){r=e[u];s=!0;break}return s?{minuseIndex:f,column:r}:{minuseIndex:0,column:null}},getByMinCursorIndex:function(n){var i,r,u,t;for(this.setStructureInfo(n),r=0,u=this._columns.length;r<u;r++)if((t=this._columns[r],t.cursorIndex!=undefined&&t.cursorIndex!=null&&t.cursorIndex!=0&&!ecount.common.isTrue(t.isHideColumn))&&!this.constValue.checkBoxPropertyNameRex.test(t.id)&&!this.constValue.rowMoveablePropertyNameRex.test(t.id)&&!this.constValue.rowNumberingPropertyNameRex.test(t.id)){if(!i){i=t;continue}t.isHideColumn==!1&&i.cursorIndex>t.cursorIndex&&(i=t)}return i||this._columns[0]},getByMaxCursorIndex:function(n){var i,r,u,t;for(this.setStructureInfo(n),r=0,u=this._columns.length;r<u;r++)if((t=this._columns[r],t.cursorIndex!=undefined&&t.cursorIndex!=null&&t.cursorIndex!=0)&&!this.constValue.checkBoxPropertyNameRex.test(t.id)&&!this.constValue.rowMoveablePropertyNameRex.test(t.id)&&!this.constValue.rowNumberingPropertyNameRex.test(t.id)){if(!i){i=t;continue}i.cursorIndex<t.cursorIndex&&(i=t)}return i||this._columns[this._columns.length-1]},isPossibleMergeBoundary:function(n,t,i){var c=!1,a,l,p,w,e,v,y,u,s,o,r,h,f;if(this.optCommon.columnType==this.constValue.columnType.multi&&this.constValue.selector&&i==this.constValue.selector.selectionType.allHorizontal){for(a=[this.theadType,this.tbodyType,this.tfootType],l=0,p=a.length;l<p;l++)for(w=a[l],this.setStructureInfo(w),e=this._columnRows,u=0,s=e.length;u<s;u++)for(o=e[u],r=t.left,h=t.right;r<=h;r++)if((u!=t.top||r!=t.left)&&(f=o[r],f.isMergeColumn==undefined||f.isMergeColumn==null||ecount.common.isFalse(f.isMergeColumn)))return!0}else{if(t.top==t.bottom&&t.left==t.right)return c;if(e=this.getAll(n,this.constValue.returnType.multi),this.hasColumnRepeatByBoundary(n,t)){if(v=[],e.length==t.bottom-t.top+1){for(u=t.top,s=t.bottom;u<=s;u++)for(o=e[u],r=t.left,h=t.right;r<=h;r++)f=o[r],f.columnType&this.constValue.columnBitmask.normal&&!(f.columnType&this.constValue.columnBitmask.columnRepeat)&&v.push(f);y=0;v.some(function(n){return(n.isMergeColumn==undefined||n.isMergeColumn==null||ecount.common.isFalse(n.isMergeColumn))&&(y+=1),y==2?(c||(c=!0),!0):void 0})}}else for(u=t.top,s=t.bottom;u<=s;u++)for(o=e[u],r=t.left,h=t.right;r<=h;r++)if((u!=t.top||r!=t.left)&&(f=o[r],f.isMergeColumn==undefined||f.isMergeColumn==null||ecount.common.isFalse(o[r].isMergeColumn))){c=!0;break}}return c},hasColumnRepeatByBoundary:function(n,t){for(var i,o,f,r=!1,e=this.getAll(n,this.constValue.returnType.multi),u=0,s=e.length;u<s;u++){for(i=t.left,o=t.right;i<=o;i++)f=e[u][i],r=f.columnType&this.constValue.columnBitmask.columnRepeat||f.columnType&this.constValue.columnBitmask.columnRepeatValue;if(r)break}return r},isPossibleDivideBoundary:function(n,t,i){var c=!1,a,l,p,w,e,v,y,u,s,o,r,h,f;if(this.optCommon.columnType==this.constValue.columnType.multi&&this.constValue.selector&&i==this.constValue.selector.selectionType.allHorizontal){for(a=[this.theadType,this.tbodyType,this.tfootType],l=0,p=a.length;l<p;l++)for(w=a[l],this.setStructureInfo(w),e=this._columnRows,u=0,s=e.length;u<s;u++)for(o=e[u],r=t.left,h=t.right;r<=h;r++)if((u!=t.top||r!=t.left)&&(f=o[r],ecount.common.isTrue(f.isMergeColumn)))return!0}else{if(t.top==t.bottom&&t.left==t.right)return c;if(e=this.getAll(n,this.constValue.returnType.multi),this.hasColumnRepeatByBoundary(n,t)){if(v=[],e.length==t.bottom-t.top+1){for(u=t.top,s=t.bottom;u<=s;u++)for(o=e[u],r=t.left,h=t.right;r<=h;r++)f=o[r],f.columnType&this.constValue.columnBitmask.normal&&!(f.columnType&this.constValue.columnBitmask.columnRepeat)&&v.push(f);y=0;v.some(function(n){return ecount.common.isTrue(n.isMergeColumn)&&(y+=1),y==1?(c||(c=!0),!0):void 0})}}else for(u=t.top,s=t.bottom;u<=s;u++)for(o=e[u],r=t.left,h=t.right;r<=h;r++)if((u!=t.top||r!=t.left)&&(f=o[r],f.isMergeColumn!=undefined&&f.isMergeColumn!=null&&ecount.common.isTrue(o[r].isMergeColumn))){c=!0;break}}return c},isPossibleLeftFixed:function(){var t,n,i;for(this.setStructureInfo(this.theadType),t=!0,n=0,i=this._columns.length;n<i;n++)ecount.common.isTrue(this._columns[n].LEFT_FIXD_STND_TF)&&(t=!1);return t},getTotalMergeStartIndex:function(n){var t,r,f,i,e;this.setStructureInfo(n);var u={},o=this._columnRows[0].length;for(t=0;t<o;t++)for(r=0,f=this._columnRows.length;r<f;r++)if((i=this._columnRows[r],!i[t].id.test(this.constValue.checkBoxPropertyNameRex)&&!i[t].id.test(this.constValue.rowMoveablePropertyNameRex)&&!i[t].id.test(this.constValue.rowNumberingPropertyNameRex))&&(e=u[this.constValue.rowVariableNames.mergeStartIndex],(e==null||mergeStgartIndex==undefined)&&(u[this.constValue.rowVariableNames.mergeStartIndex]=t),this.isDecimalDataType(n,i[t].id)))break;return u},getSyncFooterOption:function(n,t){var r,i;if(this.optForm.version==this.constValue.formVersion.fourth&&this.optCommon.columnType==this.constValue.columnType.single)if(this.setStructureInfo(this.tfootType),n=Object.clone(n),r=_.isArray(n),t==this.constValue.returnType.single)if(r)n.forEach(function(n){this._columnKeys[n.id]&&(n.ALIGN_USE_FOOT_TF=this._columnKeys[n.id].ALIGN_USE_FOOT_TF,n.FONT_USE_FOOT_TF=this._columnKeys[n.id].FONT_USE_FOOT_TF,_.extend(n.footerOption,this._columnKeys[n.id].footerOption))}.bind(this));else for(i in n)n[i].columnRows.forEach(function(n){n.forEach(function(n){this._columnKeys[n.id]&&(n.ALIGN_USE_FOOT_TF=this._columnKeys[n.id].ALIGN_USE_FOOT_TF,n.FONT_USE_FOOT_TF=this._columnKeys[n.id].FONT_USE_FOOT_TF,_.extend(n.footerOption,this._columnKeys[n.id].footerOption))}.bind(this))}.bind(this));else if(t==this.constValue.returnType.multi)if(r)n.forEach(function(n){n.forEach(function(n){this._columnKeys[n.id]&&(n.ALIGN_USE_FOOT_TF=this._columnKeys[n.id].ALIGN_USE_FOOT_TF,n.FONT_USE_FOOT_TF=this._columnKeys[n.id].FONT_USE_FOOT_TF,_.extend(n.footerOption,this._columnKeys[n.id].footerOption))}.bind(this))}.bind(this));else for(i in n)n[i].columnRows.forEach(function(n){n.forEach(function(n){this._columnKeys[n.id]&&(n.ALIGN_USE_FOOT_TF=this._columnKeys[n.id].ALIGN_USE_FOOT_TF,n.FONT_USE_FOOT_TF=this._columnKeys[n.id].FONT_USE_FOOT_TF,_.extend(n.footerOption,this._columnKeys[n.id].footerOption))}.bind(this))}.bind(this));return n},getAll:function(n,t,i,r,u){var p,y,l,h,a;t=t||this.constValue.returnType.single;i=i===!0;r=r||"system";u=_.extend({byDetailSection:!1,isNotIncludeMergeColumn:!1,boundary:{top:-1,bottom:-1,left:-1,right:-1},filter:null},u);this.setStructureInfo(n);var o=[],v=[],e=0,c=0,f=0,s=0;switch(t){case this.constValue.returnType.single:s=this._columns.length;break;case this.constValue.returnType.multi:c=this._columnRows.length;s=this._columnRows[0].length}p=u.boundary.top!=-1&&u.boundary.bottom!=-1;y=u.boundary.left!=-1&&u.boundary.right!=-1;switch(t){case this.constValue.returnType.single:if(r=="custom"||r=="system"&&i&&!u.byDetailSection){for(y?(f=u.boundary.left,s=u.boundary.right+1):(f=0,s=this._columns.length);f<s;f++){if(r=="custom"){if(this.constValue.checkBoxPropertyNameRex.test(this._columns[f].id)||this.constValue.rowMoveablePropertyNameRex.test(this._columns[f].id)||this.constValue.rowNumberingPropertyNameRex.test(this._columns[f].id))continue;if(this._columns[f].originalId)continue}u.isNotIncludeMergeColumn&&ecount.common.isTrue(this._columns[f].isMergeColumn)||u.filter&&_.isFunction(u.filter)&&!u.filter(this._columns[f])||(ecount.common.isTrue(u.isVisibilityColumn)&&(ecount.common.isTrue(this._columns[f].isHideColumn)||o.push(i?Object.clone(this._columns[f]):this._columns[f])),ecount.common.isTrue(u.isVisibilityRow)&&(ecount.common.isTrue(this._columns[f].isHideRow)||v.push(i?Object.clone(this._columns[f]):this._columns[f])),ecount.common.isTrue(u.isVisibilityRow)||ecount.common.isTrue(u.isVisibilityColumn)||o.push(i?Object.clone(this._columns[f]):this._columns[f]))}r=="custom"&&u.isNotIndexSort!==!0&&o.sort(function(n,t){return n.index>t.index?1:n.index<t.index?-1:0})}else if(u.byDetailSection){for(o={},h=null,p?(e=u.boundary.top,c=u.boundary.bottom+1):(e=0,c=this._columnRows.length);e<c;e++)if(this._columnRows[e].length){if(h=this._columnRows[e][0].GROUP_FLAG||this.constValue.sectionSeparateValue.line,o[h]?o[h].indexer.rowIndexer.bottom=e:o[h]={columnRows:[],indexer:{rowIndexer:{top:e,bottom:e}}},a=[],f=0,s=this._columnRows[e].length,u.isNotIncludeMergeColumn)for(y&&(f=u.boundary.left,s=u.boundary.right+1);f<s;f++)ecount.common.isTrue(this._columnRows[e][f].isMergeColumn)||a.push(i?Object.clone(this._columnRows[e][f]):this._columnRows[e][f]);else a=i?Object.clone(this._columnRows[e]):this._columnRows[e];o[h].columnRows.push(a)}}else o=this._columns;break;case this.constValue.returnType.multi:if((r=="custom"||r=="system"&&i)&&!u.byDetailSection)for(p?(e=u.boundary.top,c=u.boundary.bottom+1):(e=0,c=this._columnRows.length),l=0;e<c;e++,l++)for(o[l]||(o[l]=[]),v[l]||(v[l]=[]),y?(f=u.boundary.left,s=u.boundary.right+1):(f=0,s=this._columnRows[e].length);f<s;f++){if(r=="custom"){if(this.constValue.checkBoxPropertyNameRex.test(this._columnRows[e][f].id)||this.constValue.rowMoveablePropertyNameRex.test(this._columnRows[e][f].id)||this.constValue.rowNumberingPropertyNameRex.test(this._columnRows[e][f].id))continue;if(this._columnRows[e][f].originalId)continue}u.filter&&_.isFunction(u.filter)&&!u.filter(this._columnRows[e][f])||u.isNotIncludeMergeColumn&&ecount.common.isTrue(this._columnRows[e][f].isMergeColumn)||(ecount.common.isTrue(u.isVisibilityColumn)&&(ecount.common.isTrue(this._columnRows[e][f].isHideColumn)||o[l].push(i?Object.clone(this._columnRows[e][f]):this._columnRows[e][f])),ecount.common.isTrue(u.isVisibilityRow)&&(ecount.common.isTrue(this._columnRows[e][f].isHideRow)||v[l].push(i?Object.clone(this._columnRows[e][f]):this._columnRows[e][f])),ecount.common.isTrue(u.isVisibilityRow)||ecount.common.isTrue(u.isVisibilityColumn)||o[l].push(i?Object.clone(this._columnRows[e][f]):this._columnRows[e][f]))}else if(u.byDetailSection){for(o={},h=null,p?(e=u.boundary.top,c=u.boundary.bottom+1):(e=0,c=this._columnRows.length);e<c;e++)if(this._columnRows[e].length){if(h=this._columnRows[e][0].GROUP_FLAG||this.constValue.sectionSeparateValue.line,o[h]?o[h].indexer.rowIndexer.bottom=e:o[h]={columnRows:[],indexer:{rowIndexer:{top:e,bottom:e}}},a=[],f=0,s=this._columnRows[e].length,u.isNotIncludeMergeColumn)for(y&&(f=u.boundary.left,s=u.boundary.right+1);f<s;f++)ecount.common.isTrue(this._columnRows[e][f].isMergeColumn)||a.push(i?Object.clone(this._columnRows[e][f]):this._columnRows[e][f]);else a=i?Object.clone(this._columnRows[e]):this._columnRows[e];o[h].columnRows.push(a)}}else o=this._columnRows;break;case this.constValue.returnType.keys:return this._columnKeys}return r!="system"&&(o=this.getSyncFooterOption(o,t)),ecount.common.isTrue(u.isVisibilityColumn)&&ecount.common.isTrue(u.isVisibilityRow)?o=_.uniq(o,v):ecount.common.isTrue(u.isVisibilityRow)&&(o=v),o},getDataConversionColumnKeys:function(n){return this.setStructureInfo(n),this._dataConversionColumnKeys},getValidationColumns:function(n){return this.setStructureInfo(n),this._validationColumns},getTrHeights:function(n){this.setStructureInfo(n);var i=this._columnRows,t=[];return i.forEach(function(n){var i=n.id,r=this.__core.data.row;t.push(n.height)}),t},findStartStringDataType:function(n,t,i,r,u){var e=!0,f;for(this.setStructureInfo(t),f=i;f<r;){if(/(8|9)\d+/g.test(this._columnRows[f][u].dataType)){e=!1;break}f+=1}return e},findEndNumberDataType:function(n,t,i,r,u){var e=!1,f;for(this.setStructureInfo(t),f=i;f<r;f++)if(/(8|9)\d+/g.test(this._columnRows[f][u].dataType)){e=!0;break}return e},getMergeInfoByDataType:function(n,t,i,r){var c,v,u;if(this.setStructureInfo(n),c={startColumnId:null,startRowIndex:-1,startColumnIndex:-1,endColumnId:null,endRowIndex:-1,endColumnIndex:-1},!this._columns||this._columns.length==0)return c;switch(r){case"number":case"deciaml":v=new RegExp("^(8|9)\\d+","g")}var y=this.getSystemColumnCount(t),e=y,a=this._columnRows[0].length,p=a-1,l=this._columnRows.length,s,o,f=null,h=l-1;if(i){for(u=0;u<l;u++)f!=null?i.contains(this._columnRows[u][0].GROUP_FLAG)&&(h=u):i.contains(this._columnRows[u][0].GROUP_FLAG)&&(f=u,h=u);l=h+1}else f=0;if(f==null)return c;for(;e<a;){if(u=f,s==undefined)this.findStartStringDataType(n,t,u,l,e)&&(s=e,o=e);else{if(this.findEndNumberDataType(n,t,u,l,e)){o=e-1;break}o=e}e+=1}return s!=undefined&&o!=undefined&&(c={startColumnId:this._columnRows[f][s].id,startRowIndex:f,startColumnIndex:s,endColumnId:this._columnRows[h][o].id,endRowIndex:h,endColumnIndex:o,top:f,bottom:h,left:s,right:o,start:{columnId:this._columnRows[f][s].id},end:{columnId:this._columnRows[h][o].id}}),c},getPropertyName:function(n,t){var i=this.getById(n,t);return i&&i.propertyName},getAllMoreThanCursorIndex:function(n,t){var r,e,i,u,f;if(this.setStructureInfo(n),r=this._columnKeys[t],r.cursorIndex==null||r.cursorIndex==undefined)return this.getNextColumnByIndex(n,t);if(r.cursorIndex==0){for(e=this.getIndexById(n,this.constValue.returnColumnIndexType.single,t),u=!0;u;)i=this._columns[e+1],i&&i.editableState&&!i.isHideColumn?u=!1:i?e++:u=!1;return i}return f=this._columns.filter(function(n){return n.cursorIndex==undefined||n.cursorIndex==null?!1:this.constValue.checkBoxPropertyNameRex.test(n.id)||this.constValue.rowMoveablePropertyNameRex.test(n.id)||this.constValue.rowNumberingPropertyNameRex.test(n.id)||ecount.common.isTrue(n.isHideColumn)||r.cursorIndex>=n.cursorIndex?!1:!0}.bind(this)),f.sort(function(n,t){return n.cursorIndex-t.cursorIndex}),f.length>0?f[0]:null},getAllMoreThanCursorIndexByKeyboard:function(n,t,i){var u,s,o,r,f,e;if(i=i||{},this.setStructureInfo(n),u=this._columnKeys[t],u.cursorIndex==null||u.cursorIndex==undefined)return s=this.getIndexById(n,this.constValue.returnColumnIndexType.single,t),this.getNextColumnByIndexForAllColumn(n,s+1,i);if(u.cursorIndex==0){for(o=this.getIndexById(n,this.constValue.returnColumnIndexType.single,t),f=!0;f;)r=this._columns[o+1],r&&r.editableState&&!r.isHideColumn?f=!1:r?o++:f=!1;return r}return e=this._columns.filter(function(n){return n.cursorIndex==undefined||n.cursorIndex==null?!1:this.constValue.checkBoxPropertyNameRex.test(n.id)||this.constValue.rowMoveablePropertyNameRex.test(n.id)||this.constValue.rowNumberingPropertyNameRex.test(n.id)||ecount.common.isTrue(n.isHideColumn)||ecount.common.isTrue(n.isTempColumn)||u.cursorIndex>=n.cursorIndex?!1:!0}.bind(this)),e.sort(function(n,t){return n.cursorIndex-t.cursorIndex}),e.length>0?e[0]:null},getAllLessThanCursorIndex:function(n,t){this.setStructureInfo(n);var r=this._columnKeys[t],i=this._columns.filter(function(n){return n.cursorIndex==undefined||n.cursorIndex==null?!1:this.constValue.checkBoxPropertyNameRex.test(n.id)||this.constValue.rowMoveablePropertyNameRex.test(n.id)||this.constValue.rowNumberingPropertyNameRex.test(n.id)||ecount.common.isTrue(n.isHideColumn)||r.cursorIndex<=n.cursorIndex?!1:!0}.bind(this));return i.sort(function(n,t){return t.cursorIndex-n.cursorIndex}),i.length>0?i[0]:null},getNextColumnByIndex:function(n,t){var i=!1;return this.setStructureInfo(n),this._columns.first(function(n){return this.constValue.checkBoxPropertyNameRex.test(n.id)||this.constValue.rowMoveablePropertyNameRex.test(n.id)||this.constValue.rowNumberingPropertyNameRex.test(n.id)||ecount.common.isTrue(n.isHideColumn)?!1:i?(i=!1,!0):n.id==t?(i=!0,!1):void 0}.bind(this))},getNextColumnByIndexForAllColumn:function(n,t,i){var f,u,e,r;for(i=i||{},isNotIncludeSystemColumn=i.isNotIncludeSystemColumn===!0,this.setStructureInfo(n),u=t,e=this._columns.length;u<e;u++)if((r=this._columns[u],!isNotIncludeSystemColumn||!this.constValue.checkBoxPropertyNameRex.test(r.id)&&!this.constValue.rowMoveablePropertyNameRex.test(r.id)&&!this.constValue.rowNumberingPropertyNameRex.test(r.id))&&(r.isHideColumn==undefined||r.isHideColumn==null||ecount.common.isFalse(r.isHideColumn)||r.isMergeColumn==undefined||r.isMergeColumn==null||ecount.common.isFalse(r.isMergeColumn))){f=r;break}return f},getMinCursorIndex:function(n){var t=null,i;return this.setStructureInfo(n),i=this._columns.filter(function(n,i){return this.constValue.checkBoxPropertyNameRex.test(n.id)||this.constValue.rowMoveablePropertyNameRex.test(n.id)||this.constValue.rowNumberingPropertyNameRex.test(n.id)?!1:ecount.common.isTrue(n.isHideColumn)?!1:n.cursorIndex==undefined||n.cursorIndex==null?(t=t===null?i:t,!1):!0}.bind(this)),i.sort(function(n,t){return n.cursorIndex-t.cursorIndex}),i.length>0?i[0].cursorIndex:t},getMaxCursorIndex:function(n){this.setStructureInfo(n);var t=this._columns.filter(function(n){return n.cursorIndex==undefined||n.cursorIndex==null?!1:this.constValue.checkBoxPropertyNameRex.test(n.id)||this.constValue.rowMoveablePropertyNameRex.test(n.id)||this.constValue.rowNumberingPropertyNameRex.test(n.id)||ecount.common.isTrue(n.isHideColumn)?!1:!0}.bind(this));return t.sort(function(n,t){return t.cursorIndex-n.cursorIndex}),t.length>0?t[0].cursorIndex:-1},getTotalWidth:function(n){var r=this,i=this.theadType,t=0;return this.setStructureInfo(i),this._columnRows[0].forEach(function(n){(n.isHideColumn==undefined||n.isHideColumn==null||ecount.common.isFalse(n.isHideColumn))&&(t+=n.width==undefined||n.width==null||n.width===""?r.constValue.defaultWidth:parseInt(n.width,10))}),n&&(t-=1),this.dataCheckbox.getCheckboxUse(i,this.constValue.checkBoxPropertyName)?t.toString():t},getColumnCount:function(n){return this.setStructureInfo(n),this._columnRows[0].length},isWidthFreeSize:function(){return this.__datas[this.theadType].isWidthFreeSize},convertNormalize:function(n,t){return this.setStructureInfo(n),this._propertyNormalizer(t)},generateUniqueId:function(){},removeRow:function(){},removeColumn:function(){},moveTo:function(){},clear:function(){},getValue:function(n,t,i){var r=get(n,t);return r&&r[i]},setColumnFilterControl:function(n,t){this.optColumn.filter&&(this.optColumn.filterDisableList&&(this.optColumn.filterDisableList.contains(t.id)||(t.columnOption.controlType="widget.columnfilter")),this.optColumn.filterEnableList&&this.optColumn.filterEnableList.contains(t.id)&&(t.columnOption.controlType="widget.columnfilter"))},getNumberingColumn:function(){var n=this.optNumbering.headerStyle||{},t="widget.label",i=$.isEmpty(n.align)?"center":n.align,r=$.isEmpty(n.width)?"25":n.width,u=$.isEmpty(n.title)?"":n.title;return{id:this.constValue.rowNumberingPropertyName,propertyName:this.constValue.rowNumberingPropertyName,originalId:this.constValue.rowNumberingPropertyName,width:r,title:u,className:"text-"+i,controlType:t,columnOption:{controlType:t},footerOption:{}}},getCheckBoxColumn:function(n){var t=this.__setting.getCheckBoxHeaderStyle(n,this.constValue.checkBoxPropertyName),i="widget.rowItemCheckbox",r=$.isEmpty(t.align)?"center":t.align,u=$.isEmpty(t.width)?"25":t.width,f=$.isEmpty(t.title)?"":t.title;return(n==this.tfootType||n==this.theadType&&t.visible==!1)&&(i="widget.label"),{id:this.constValue.checkBoxPropertyName,propertyName:this.constValue.checkBoxPropertyName,originalId:this.constValue.checkBoxPropertyName,width:u,title:f,className:"text-"+r,controlType:i,editableState:"1",columnOption:{controlType:i},footerOption:{}}},getRowmoveableColumn:function(n){var t=this.optRowmoveable.headerStyle||{},i=n!=this.tfootType?"widget.rowItemMoveable":"widget.label",r=$.isEmpty(t.align)?"center":t.align,u=$.isEmpty(t.width)?"25":t.width,f=$.isEmpty(t.title)?"":t.title;return{id:this.constValue.rowMoveablePropertyName,propertyName:this.constValue.rowMoveablePropertyName,originalId:this.constValue.rowMoveablePropertyName,width:u,title:f,className:"text-"+r,controlType:i,editableState:"1",columnOption:{controlType:i},footerOption:{}}},initSystemColumn:function(){this.optNumbering.use&&this.optRowmoveable.use&&this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].use?(this._systemColumnCount=3,this.optNumbering.index==-1&&this.optRowmoveable.index==-1&&this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index==-1?(this.optNumbering.index=0,this.optCheckbox[this.theadType].items[this.constValue.checkBoxPropertyName].index=1,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index=1,this.optRowmoveable.index=2):this.optNumbering.index==-1&&this.optRowmoveable.index==-1?this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index!=0?(this.optNumbering.index=0,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index!=1?this.optRowmoveable.index=1:(this.optCheckbox[this.theadType].items[this.constValue.checkBoxPropertyName].index=2,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index=2)):(this.optNumbering.index=1,this.optRowmoveable.index=2):this.optNumbering.index==-1&&this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index==-1?this.optRowmoveable.index!=0?(this.optNumbering.index=0,this.optRowmoveable.index!=1?(this.optCheckbox[this.theadType].items[this.constValue.checkBoxPropertyName].index=1,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index=1):(this.optCheckbox[this.theadType].items[this.constValue.checkBoxPropertyName].index=2,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index=2)):(this.optNumbering.index=1,this.optCheckbox[this.theadType].items[this.constValue.checkBoxPropertyName].index=2,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index=2):this.optRowmoveable.index==-1&&this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index==-1&&(this.optNumbering.index!=0?(this.optCheckbox[this.theadType].items[this.constValue.checkBoxPropertyName].index=0,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index=0,this.optRowmoveable.index=this.optNumbering.index!=1?1:2):(this.optCheckbox[this.theadType].items[this.constValue.checkBoxPropertyName].index=1,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index=1,this.optRowmoveable.index=2))):this.optNumbering.use&&this.optRowmoveable.use?(this._systemColumnCount=2,this.optNumbering.index==-1&&this.optRowmoveable.index==-1?(this.optNumbering.index=0,this.optRowmoveable.index=1):this.optNumbering.index==-1?this.optNumbering.index=this.optRowmoveable.index!=0?0:1:this.optRowmoveable.index==-1&&(this.optRowmoveable.index=this.optNumbering.index!=0?0:1)):this.optNumbering.use&&this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].use?(this._systemColumnCount=2,this.optNumbering.index==-1&&this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index==-1?(this.optNumbering.index=0,this.optCheckbox[this.theadType].items[this.constValue.checkBoxPropertyName].index=1,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index=1):this.optNumbering.index==-1?this.optNumbering.index=this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index!=0?0:1:this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index==-1&&(this.optNumbering.index!=0?(this.optCheckbox[this.theadType].items[this.constValue.checkBoxPropertyName].index=0,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index=0):(this.optCheckbox[this.theadType].items[this.constValue.checkBoxPropertyName].index=1,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index=1))):this.optRowmoveable.use&&this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].use?(this._systemColumnCount=2,this.optRowmoveable.index==-1&&this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index==-1?(this.optCheckbox[this.theadType].items[this.constValue.checkBoxPropertyName].index=0,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index=0,this.optRowmoveable.index=1):this.optRowmoveable.index==-1?this.optRowmoveable.index=this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index!=0?0:1:this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index==-1&&(this.optRowmoveable.index!=0?(this.optCheckbox[this.theadType].items[this.constValue.checkBoxPropertyName].index=0,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index=0):(this.optCheckbox[this.theadType].items[this.constValue.checkBoxPropertyName].index=1,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index=1))):this.optNumbering.use?(this._systemColumnCount=1,this.optNumbering.index==-1&&(this.optNumbering.index=0)):this.optRowmoveable.use?(this._systemColumnCount=1,this.optRowmoveable.index==-1&&(this.optRowmoveable.index=0)):this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].use&&(this._systemColumnCount=1,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index==-1&&(this.optCheckbox[this.theadType].items[this.constValue.checkBoxPropertyName].index=0,this.optCheckbox[this.tbodyType].items[this.constValue.checkBoxPropertyName].index=0))},getSystemColumnCount:function(n){return this.setStructureInfo(n),this._systemColumnCount},getSystemColumnInfo:function(){var n=[];return this.optNumbering.use&&n.push({index:this.optNumbering.index}),this.__setting.getCheckBoxUse()&&n.push({index:this.__setting.getCheckBoxIndex()}),this.optRowmoveable.use&&n.push({index:this.optRowmoveable.index}),n.length>0&&n.sort(function(n,t){return n.index>t.index?1:n.index<t.index?-1:0}),n},addSystemColumn:function(n,t,i,r,u,f){var l=this.optNumbering.use,b=this.optNumbering.index,a=this.__setting.getCheckBoxUse(),k=this.__setting.getCheckBoxIndex(),v=this.optRowmoveable.use,d=this.optRowmoveable.index,it=0,y,p,w,s,e,c,rt,o,tt,h;for(n!==this.theadType&&this.__setting.getCheckBoxDisplayMergeType()===this.constValue.displayCheckboxMegeType.mergeLine&&(it=this._lineStartRow),s=t.length-1;s>-1;s--){for(e=[],l&&(y=this.getNumberingColumn(n)),a&&(p=this.getCheckBoxColumn(n)),v&&(w=this.getRowmoveableColumn(n)),l&&a&&v?(e.push({index:d,item:w}),e.push({index:k,item:p}),e.push({index:b,item:y})):l&&a?(e.push({index:k,item:p}),e.push({index:b,item:y})):l&&v?(e.push({index:d,item:w}),e.push({index:b,item:y})):a&&v?(e.push({index:d,item:w}),e.push({index:k,item:p})):l?e.push({index:b,item:y}):a?e.push({index:k,item:p}):v&&e.push({index:d,item:w}),e.length>1&&(e=e.sort(function(n,t){return n.index-t.index})),c=0,rt=e.length;c<rt;c++)o=e[c].item,s==it||this.optColumn[n].duplicationPoint||(o.id==this.constValue.checkBoxPropertyName?this.__setting.getCheckBoxDisplayMergeType()!=this.constValue.displayCheckboxMegeType.onlyLine&&(tt=this.optCheckbox[n].items[this.constValue.checkBoxPropertyName],o.id+="-"+tt.sequenceIndex.toString(),tt.sequenceIndex+=1):o.id==this.constValue.rowMoveablePropertyName?(o.id+="-"+this.optRowmoveable[n].sequenceIndex.toString(),this.optRowmoveable[n].sequenceIndex+=1):o.id==this.constValue.rowNumberingPropertyName&&(o.id+="-"+this.optNumbering[n].sequenceIndex.toString(),this.optNumbering[n].sequenceIndex+=1)),o.lineNo=s+1,f&&(f[o.propertyName]=o.title),ecount.grid.constValue.checkBoxPropertyName!=o.id&&o.id.test(ecount.grid.constValue.checkBoxPropertyNameRex)&&(o.isTempColumn=!0),t[s].splice(e[c].index,0,o),i.splice(t[0].length*s+e[c].index,0,o),r[o.id]=o;for(h=e.length-1;h>-1;h--){var o=e[h].item,g=t[s][e[h].index+1].id,nt=e[h].index-1<0?null:t[s][e[h].index-1].id;u[o.id]={prevColumnId:nt,nextColumnId:g};g&&u[g]&&(u[g].prevColumnId=o.id);nt&&u[nt]&&(u[nt].nextColumnId=o.id)}}return t},convertDataType:function(n){var t=n.dataType||"";if(n.dataType1)switch(n.dataType1){case"DATETIME":/^(date)\d{2}$/gi.test(n.dateFormat)?t=n.dateFormat:n.dateFormat=="CustomDate"?(t="29",n.customizeDate==""&&(n.dateFormat="")):t="5";break;case"NUM":t=(ecount.common.isTrue(n.isDisplayZero)?"9":"8")+($.isNumber(n.decCount)?n.decCount:"0")}n.dataType=t},makeMergeSet:function(n,t,i,r){var f,u;this._tempColumnSet||(this.__datas[n].tempColumnSet=[],this._tempColumnSet=this.__datas[n].tempColumnSet);f=this.getRealColumnPosition(i,r);this.setTempColumnPosition(f.emptyPosition,r,t.mrowspan||1,t.mcolspan||1,t.isHideColumn);(t.mcolspan>1||t.mrowspan>1)&&(this.optRow[n].mergeSet||(this.optRow[n].mergeSet=[]),u={},this.__datas[n].isColumnMerge=!0,u[this.constValue.rowVariableNames.mergeStartIndex]=f.realIndex+this._systemColumnCount,u[this.constValue.rowVariableNames.mergeUseOwn]=!0,t.mcolspan>1&&(u[this.constValue.rowVariableNames.colspanCount]=t.mcolspan),t.mrowspan>1&&(u[this.constValue.rowVariableNames.rowspanCount]=t.mrowspan),this.optRow[n].mergeSet.push(u))},getRealColumnPosition:function(n,t){var i,u;this._tempColumnSet[t]||(this._tempColumnSet[t]=[]);var f=this._tempColumnSet[t],r=0,e=0;for(i=0;i<=f.length;i++)if(f[i]===undefined){r=i;break}if(t>0)for(u=0;u<t;u++)e+=this._tempColumnSet[u].length;return f[r]=n,{emptyPosition:r,realIndex:r+e}},getMergeStartTempIndex:function(n,t,i,r,u){var f,e,s,h,o;if(!this.__datas[n].isColumnMerge){if(f=t+r,i>0&&u[i].length+r<f&&(f=null),i==0&&t>=u[i].length)for(e=f;e>0;)e=e-u[i].length,e>=0&&(f+=this._systemColumnCount,e+=this._systemColumnCount);return f}for(s=this._tempColumnSet[i],h=-1,o=0;o<s.length;o++)if(s[o]!==!1&&s[o]!==!0&&++h==t)return o+r;return t+this._systemColumnCount+r},setTempColumnPosition:function(n,t,i,r,u){var e,f;for(u&&(this._tempColumnSet[t][n]=!1),f=1;f<i;f++)for(this._tempColumnSet[t+f]||(this._tempColumnSet[t+f]=[]),this._tempColumnSet[t+f][n]=!0,e=1;e<r;e++)this._tempColumnSet[t+f][n+e]=!0;for(f=1;f<r;f++)this._tempColumnSet[t][n+f]=!0},insertTempColumn:function(n,t,i,r,u){var l,a=0,v=0,y=0,h=0,o,c=null,f,e,s;if(!this.__datas[n].isColumnMerge)return{columnRows:t,columns:i};for(l=[],calcColumnRows=[],f=0;f<this._tempColumnSet.length;f++){for(calcColumnRows[f]=this._tempColumnSet[f].slice(),e=0;e<this._tempColumnSet[f].length;e++)calcColumnRows[f][e]===!0||this._tempColumnSet[f-1]&&this._tempColumnSet[f-1][e]===!1?(this._tempColumnSet[f-1]&&this._tempColumnSet[f-1][e]===!1&&this._tempColumnSet[f].splice(e,0,!1),calcColumnRows[f][e]={id:"tempColumn"+a++,isHideColumn:!0,columnOption:{}}):calcColumnRows[f][e]=i[y++];h=h<calcColumnRows[f].length?calcColumnRows[f].length:h}for(f=0;f<calcColumnRows.length;f++)for(e=0;e<h;e++){if(!calcColumnRows[f][e])for(this._tempColumnSet[f][e]=!1,calcColumnRows[f][e]={id:"tempColumn"+a++,isHideColumn:!0,columnOption:{}},s=0;s<this.optRow[n].mergeSet.length;s++)this.optRow[n].mergeSet[s][this.constValue.rowVariableNames.mergeStartIndex]>=e&&(this.optRow[n].mergeSet[s][this.constValue.rowVariableNames.mergeStartIndex]+=1);o=calcColumnRows[f][e];o.index=v++;l.push(o);r[o.id]=o;u[o.id]={prevColumnId:c};c&&(u[c].nextColumnId=o.id);c=o.id}return{columnRows:calcColumnRows,columns:l}},initDataType:function(n,t){var u=t.dataType||"",f,e,s=!1,r,h,i,o,c;u.length!==0&&(r=u.substring(0,1),h=u.substring(1),r=="1"||r=="2"||r=="5"?(t.dataType=u,i=t.controlOption||{},i.dataType=i.dataType||u,t.controlOption=i):(r=="8"||r=="9")&&(t.dataType=u,e=r=="8"?!1:r=="9"?!0:t.isShowIfZero!=undefined?t.isShowIfZero:!0,f=t.isCheckZero!=undefined?t.isCheckZero:!0,this.optCommon.gridType==this.constValue.gridType.editable&&(o=!$.isNull(t.controlType)&&t.controlType,this.optCommon.columnType==this.constValue.columnType.single&&n==this.tfootType&&(c=this.getById(this.tbodyType,t.id),o=c.controlType),o=="widget.input.number"&&(e=r=="8"?!1:r=="9"?!0:t.isShowIfZero!=undefined?t.isShowIfZero:!0,s=!0)),t.isCheckZero=f,t.isShowIfZero=e,i=t.controlOption||{},i.dataType=i.decimalUnit!=undefined?"9"+i.decimalUnit[1].toString():"9"+h,i.isCheckZero=s?!1:f,i.decimalUnit=i.decimalUnit||[ecount.common.number.defaultLength,ecount.common.number.defaultPointLength],i.numberType=i.numberType!=undefined?i.numberType:ecount.grid.constValue.numberType.decimal,t.controlOption=i))},makeDataConversionColumns:function(n){var r,u,i,f,t;for(this.setStructureInfo(n),r=this.optColumn[n].dataConversionColumns||[],u=this._dataConversionColumnKeys,i=0,f=r.length;i<f;i++)t=r[i],u[t.id]=t,t.columnOption=t.columnOption||{},t.footerOption=t.footerOption||{},t.controlOption=t.controlOption||{},this.makeColumnDataType(n,t)},makeColumnDataType:function(n,t){var i=this._convertorDataTypeView,r=this._convertorDataTypeControl;this.convertDataType(t);this.initDataType(n,t);i.set(n,t);r.set(n,t)},removeColumnDataType:function(n,t){this.setStructureInfo(n);this._convertorDataTypeView.removeConvertor(n,t.id);this._convertorDataTypeView.removeKey(n,t.propertyName);this._convertorDataTypeControl.removeConvertor(n,t.id);this._convertorDataTypeControl.removeKey(n,t.propertyName)},makeValidationSystem:function(){},createNormalColumnAutoCalculate:function(n){this.optCommon.gridType==this.constValue.gridType.editable&&this.optRow[this.tfootType].specialRowCount>0&&this.optColumn[this.tbodyType].isAutoCalculate&&(this.dataNormalColumnAutoCalculateSetting=new ecount.gridV2.data.autoCalculateSetting,this.dataNormalColumnAutoCalculateSetting.init(n).setSectionType(this.tbodyType));this.dataNormalColumnAutoCalculateSetting&&(n.mixinOption.dataNormalColumnAutoCalculateSetting=this.dataNormalColumnAutoCalculateSetting,this.__list.push("normalColumnAutoCalculateSetting"))},createSpecialRowColumnAutoCalculate:function(n){this.optCommon.gridType==this.constValue.gridType.editable&&this.optRow[this.tfootType].specialRowCount>0&&this.optColumn[this.tfootType].isAutoCalculate&&(this.dataSpecialrowColumnAutoCalculateSetting=new ecount.gridV2.data.autoCalculateSpecialrowSetting,this.dataSpecialrowColumnAutoCalculateSetting.init(n).setSectionType(this.tfootType));this.dataSpecialrowColumnAutoCalculateSetting&&(n.mixinOption.dataSpecialrowColumnAutoCalculateSetting=this.dataSpecialrowColumnAutoCalculateSetting,this.__list.push("specialrowColumnAutoCalculateSetting"))},getConvertor:function(n,t,i){return(this.setStructureInfo(n),this.constValue.dataType.modeView==t)?this._convertorDataTypeView.getConvertor(n,i):this.constValue.dataType.modeInput==t?this._convertorDataTypeControl.getConvertor(n,i):void 0},isDateDataType:function(n,t){this.setStructureInfo(n);var i=this._columnKeys[t]||this._dataConversionColumnKeys[t],r=i?i.propertyName:this._propertyNormalizer(t);return this._convertorDataTypeControl.isDateDataType(n,r)},isDecimalDataType:function(n,t){this.setStructureInfo(n);var i=this._columnKeys[t]||this._dataConversionColumnKeys[t],r=i?i.propertyName:this._propertyNormalizer(t);return this._convertorDataTypeControl.isDecimalDataType(n,r)},isStringDataType:function(n,t){this.setStructureInfo(n);var i=this._columnKeys[t]||this._dataConversionColumnKeys[t],r=i?i.propertyName:this._propertyNormalizer(t);return this._convertorDataTypeControl.isStringDataType(n,r)},getConvetorDecimalList:function(n){return this.setStructureInfo(n),this._convertorDataTypeControl.getConvetorDecimalList(n)},makeColumnSort:function(){},getColumnClassName:function(n,t){this.setStructureInfo(n);var r={},i="";switch(n){case this.theadType:r=this.optHeader;break;case this.tfootType:r=this.optFoot}return n!=this.tfootType?(ecount.common.isTrue(t.fontBold)||ecount.common.isTrue(r.styleFontBold))&&(i+="text-bold "):n==this.tfootType&&ecount.common.isTrue(t.fontBold)&&(i+="text-bold "),n!=this.tfootType?t.fontSize&&!isNaN(t.fontSize)?i+="font-"+t.fontSize+"px ":r.styleFontSize&&!isNaN(r.styleFontSize)&&(i+="font-"+r.styleFontSize+"px "):n==this.tfootType&&t.fontSize&&!isNaN(t.fontSize)&&(i+="font-"+t.fontSize+"px "),n!=this.tfootType?t.align?i+="text-"+t.align.toString().toLowerCase()+" ":r.styleFontAlign&&(i+="text-"+r.styleFontAlign.toString().toLowerCase()+" "):n==this.tfootType&&t.align&&(i+="text-"+t.align.toString().toLowerCase()+" "),ecount.common.isTrue(t.ellipsis)&&(i+="ellipsis "),n!=this.tfootType?(ecount.common.isTrue(t.fontItalic)||ecount.common.isTrue(r.styleFontItalic))&&(i+="text-italic "):n==this.tfootType&&ecount.common.isTrue(t.fontItalic)&&(i+="text-italic "),n!=this.tfootType?t.valign?i+="valign-"+t.valign.toString().toLowerCase()+" ":r.styleFontVAlign&&(i+="valign-"+r.styleFontVAlign.toString().toLowerCase()+" "):n==this.tfootType&&t.valign&&(i+="valign-"+t.valign.toString().toLowerCase()+" "),n!=this.tfootType?t.font?i+="font-"+ecount.convertor.convertFontClassName(t.font.toString())+" ":r.styleFont&&(i+="font-"+ecount.convertor.convertFontClassName(r.styleFont.toString())+" "):n==this.tfootType&&t.font&&(i+="font-"+ecount.convertor.convertFontClassName(t.font.toString())+" "),n!=this.tfootType?ecount.common.isTrue(t.fontStrike)&&ecount.common.isTrue(t.fontUnderline)||ecount.common.isTrue(r.styleFontStrike)&&ecount.common.isTrue(r.styleFontUnderline)?i+="grid-text-uline-through ":((ecount.common.isTrue(t.fontStrike)||ecount.common.isTrue(r.styleFontStrike))&&(i+="text-line-through "),(ecount.common.isTrue(t.fontUnderline)||ecount.common.isTrue(r.styleFontUnderline))&&(i+="text-uline ")):n==this.tfootType&&(ecount.common.isTrue(t.fontStrike)&&ecount.common.isTrue(t.fontUnderline)?i+="grid-text-uline-through ":(ecount.common.isTrue(t.fontStrike)&&(i+="text-line-through "),ecount.common.isTrue(t.fontUnderline)&&(i+="text-uline "))),ecount.common.isTrue(t.isEmptyCell)&&(i+="border-no-a "),this.optCommon.isDynamicWidth===!0&&ecount.common.isTrue(t.isDynamicWidth)&&(i+="text-nowrap "),n==this.theadType?t.columnOption&&(t.columnOption.fontCellBgColor||ecount.common.isFalse(t.columnOption.isShadow)&&(i+="bg-white ")):ecount.common.isTrue(t.isShadow)&&(i+="bg-muted "),this.optCommon.gridType==this.constValue.gridType.editableForm?i:this.optCommon.columnType===this.constValue.columnType.single&&n==this.tfootType?i:t.className?t.className+" "+i:i},getDefaultColumn:function(n){return $.extend({id:"",propertyName:"",width:"100",title:"",controlOption:{}},n||{})},createColumnGenerator:function(){this.optColumn.generator?this.optColumn.generator.setColumnType(this.optCommon.columnType):this.__setting.setColumnGenerator(ecount.gridV2.generatorColumn.column("tempColumnId",this.optCommon.prefixIdIdx,this.optCommon.columnType,this.optColumn[this.tbodyType].defaultValue))},createColumnDetailSectionGenerator:function(){this.optForm.version==this.constValue.formVersion.fourth&&(this.optColumn.detailSectionGenerator||this.__setting.setColumnDetailSectionGenerator(ecount.gridV2.generatorColumn.column("mappingColumnId",this.optCommon.detailSectionPrefixIdIdx,this.optCommon.columnType,this.optColumn[this.tbodyType].detailSectionDefaultValue)))},setStructureInfo:function(n){var t=this.__datas[n],f=this.__datas[n+this.constValue.sectionSeparateText["2"]],e=this.__datas[n+this.constValue.sectionSeparateText["41"]],o=this.__datas[n+this.constValue.sectionSeparateText["31"]],s=this.__datas[n+this.constValue.sectionSeparateText["42"]],h=this.__datas[n+this.constValue.sectionSeparateText["32"]],c=this.__datas[n+this.constValue.sectionSeparateText["43"]],i=this.__datas[n+this.constValue.sectionSeparateText["33"]],r=this.__datas[n+this.constValue.sectionSeparateText["44"]],u=this.__datas[n+this.constValue.sectionSeparateText["34"]],l=this.__datas[n+this.constValue.sectionSeparateText["45"]],a=this.__datas[n+this.constValue.sectionSeparateText["35"]],v=this.__datas[n+this.constValue.sectionSeparateText["61"]],y=this.__datas[n+this.constValue.sectionSeparateText["51"]];this._columns=t&&t.columns;this._columnKeys=t&&t.columnKeys;this._columnRows=t&&t.columnRows;this._columnMap=t&&t.columnMap;this._validationColumns=t&&t.validationColumns;this._propertyNormalizer=t&&t.propertyNormalizer;this._convertorDataTypeView=t&&t.convertorDataTypeView;this._convertorDataTypeControl=t&&t.convertorDataTypeControl;this._tempColumnSet=t&&t.tempColumnSet;this._dataConversionColumnKeys=t&&t.dataConversionColumnKeys;this._lineStartRow=t&&t.startRow;this._lineEndRow=t&&t.endRow;f&&(this._slipStartRow=f.startRow,this._slipEndRow=f.endRow);e&&(this._subtot1StartRow=e.startRow,this._subtot1EndRow=e.endRow);o&&(this._subtot1slipStartRow=o.startRow,this._subtot1slipEndRow=o.endRow);s&&(this._subtot2StartRow=s.startRow,this._subtot2EndRow=s.endRow);h&&(this._subtot2slipStartRow=h.startRow,this._subtot2slipEndRow=h.endRow);c&&(this._subtot3StartRow=c.startRow,this._subtot3EndRow=c.endRow);i&&(this._subtot3slipStartRow=i&&i.startRow,this._subtot3slipEndRow=i&&i.endRow);r&&(this._subtot4StartRow=r&&r.startRow,this._subtot4EndRow=r&&r.endRow);u&&(this._subtot4slipStartRow=u&&u.startRow,this._subtot4slipEndRow=u&&u.endRow);l&&(this._subtot5StartRow=l.startRow,this._subtot5EndRow=l.endRow);a&&(this._subtot5slipStartRow=a.startRow,this._subtot5slipEndRow=a.endRow);v&&(this._pagetotStartRow=v.startRow,this._pagetotEndRow=v.endRow);y&&(this._pagetotslipStartRow=y.startRow,this._pagetotslipEndRow=y.endRow)},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.theadSlipType=this.constValue.sectionType.theadSlip;this.tbodyType=this.constValue.sectionType.tbody;this.tbodySlipType=this.constValue.sectionType.tbodySlip;this.tfootType=this.constValue.sectionType.tfoot;this.tfootSlipType=this.constValue.sectionType.tfootSlip;this.__core=n.core;this.__fn=n.core.fn;this.__api=this.__core.api;this.__setting=n.setting;$.extend(this,n.mixinOption);this.optCommon.columnType==this.constValue.columnType.single?this.mergeSet=new ecount.gridV2.data.singleMergeSet(n):this.optCommon.columnType==this.constValue.columnType.multi&&(this.mergeSet=new ecount.gridV2.data.multiMergeSet(n));this.__events=this.__setting.eventsGet();this.__apiPrefixId="_REQUEST_COLUMNDATA_";this.__apiPrefixIndex=1;this.renderingCount=0},initLazyGlobalValue:function(n){$.extend(this,n.mixinOption)},reset:function(){this.__list=[];this.__datas={thead:{},theadslip:{},theadtsubtot1slip:{},theadtsubtot2slip:{},theadtsubtot3slip:{},theadtsubtot4slip:{},theadtsubtot5slip:{},theadtsubtot1:{},theadtsubtot2:{},theadtsubtot3:{},theadtsubtot4:{},theadtsubtot5:{},theadsubtot1slip:{},theadsubtot2slip:{},theadsubtot3slip:{},theadsubtot4slip:{},theadsubtot5slip:{},theadsubtot1:{},theadsubtot2:{},theadsubtot3:{},theadsubtot4:{},theadsubtot5:{},theadpagetotslip:{},theadpagetot:{},tbody:{},tbodyslip:{},tbodytsubtot1slip:{},tbodytsubtot2slip:{},tbodytsubtot3slip:{},tbodytsubtot4slip:{},tbodytsubtot5slip:{},tbodytsubtot1:{},tbodytsubtot2:{},tbodytsubtot3:{},tbodytsubtot4:{},tbodytsubtot5:{},tbodysubtot1slip:{},tbodysubtot2slip:{},tbodysubtot3slip:{},tbodysubtot4slip:{},tbodysubtot5slip:{},tbodysubtot1:{},tbodysubtot2:{},tbodysubtot3:{},tbodysubtot4:{},tbodysubtot5:{},tbodypagetotslip:{},tbodypagetot:{},tfoot:{},tfootslip:{},tfoottsubtot1slip:{},tfoottsubtot2slip:{},tfoottsubtot3slip:{},tfoottsubtot4slip:{},tfoottsubtot5slip:{},tfoottsubtot1:{},tfoottsubtot2:{},tfoottsubtot3:{},tfoottsubtot4:{},tfoottsubtot5:{},tfootsubtot1slip:{},tfootsubtot2slip:{},tfootsubtot3slip:{},tfootsubtot4slip:{},tfootsubtot5slip:{},tfootsubtot1:{},tfootsubtot2:{},tfootsubtot3:{},tfootsubtot4:{},tfootsubtot5:{},tfootpagetotslip:{},tfootpagetot:{}};this._columns=null;this._columnKeys=null;this._columnRows=null;this._convertorDataTypeView=null;this._convertorDataTypeControl=null;this._systemColumnCount=0},initPrepareDataValue:function(){this.data=this.__core.data},initDataValue:function(n){for(var r,i=[this.theadType,this.tbodyType,this.tfootType],t=0,u=i.length;t<u;t++)this.__datas[i[t]].columns=[],this.__datas[i[t]].columnKeys=[],this.__datas[i[t]].columnRows=[[]],this.__datas[i[t]].columnMap={},this.__datas[i[t]].validationColumns=[],this.__datas[i[t]].dataConversionColumnKeys={},this.__datas[i[t]].columnCountOfRow=0,this.__datas[i[t]].tempColumnCountOfRow=0,r=this.optColumn[i[t]].propertyColumnNormalize,this.__datas[i[t]].propertyNormalizer=r?r=="UPPER"?function(n){return typeof n=="string"?n.toUpperCase():n}:function(n){return typeof n=="string"?n.toLowerCase():n}:function(n){return n},this.__datas[i[t]].convertorDataTypeView?this.__datas[i[t]].convertorDataTypeView.reset():(this.__datas[i[t]].convertorDataTypeView=new ecount.gridV2.data.column.dataType,this.__datas[i[t]].convertorDataTypeView.init(n,this.constValue.dataType.modeView)),this.__datas[i[t]].convertorDataTypeControl?this.__datas[i[t]].convertorDataTypeControl.reset():(this.__datas[i[t]].convertorDataTypeControl=new ecount.gridV2.data.column.dataType,this.__datas[i[t]].convertorDataTypeControl.init(n,this.constValue.dataType.modeInput))},initMakeColumn:function(){if(this.optCommon.columnType==this.constValue.columnType.single&&this.optColumn[this.tbodyType].columns.length==0){var n=this.optColumn[this.theadType].columns;n&&n.length>0&&this.__setting.setColumns(this.tbodyType,Object.clone(n))}},initMakeRowData:function(n){var t=this.optRow[n].datas,r,u,i,f;if(t==null||t.length==0){for(t=[],r=this.optColumn[n].columns,u={},i=0,f=r.length;i<f;i++)u[r[i].propertyName]=r[i].title;t.push(u);this.__setting.setRowData(n,t)}},init:function(n){var i,t,e;if(this.renderingCount==undefined&&this.initGlobalValue(n),this.initPrepareDataValue(),this.initDataValue(n),this.initMakeColumn(),this.createColumnGenerator(),this.__core.drawCancel)return this.__events&&this.__events._triggerEvent(ecount.gridV2.renderEvent.cancelCompleted),{cancel:!0};if(this.__events&&this.__events._triggerEvent(ecount.gridV2.columnEvent.prepareInit,{}),i=[this.theadType,this.tbodyType,this.tfootType],!this.optRow[this.tbodyType].isWithColumn){var u=this.optForm.url,f=this.optForm.param,r=this.optForm.data;if(u&&f&&!r&&(this.__api.add(this.__apiPrefixId+"$"+this.__apiPrefixIndex,{sectionType:this.theadType,option:n,url:u,data:Object.toJSON(f),progressbar:!1,async:!0,resolve:this.callbackSuccess.bind(this),reject:this.callbackFail.bind(this),completed:this.callbackComplete.bind(this)}),this.__apiPrefixIndex+=1),this.__api.length()>0){this.__api.call();return}for(this.__events&&this.__events._triggerEvent(ecount.grid.event.list.afterFormLoad,{containerId:this.optLayout.containerSelector},{columnForm:this.optForm.data,rowDataParam:this.optRow[this.tbodyType].param}),this.initSystemColumn(),t=0,e=i.length;t<e;t++)if(r){if(this.optCommon.columnType==this.constValue.columnType.multi)switch(i[t]){case this.theadType:this.__setting.setColumnsByForm(i[t],r.headerColumns||[]);break;case this.tbodyType:this.__setting.setColumnsByForm(i[t],r.columns||[]);break;case this.tfootType:this.__setting.setColumnsByForm(i[t],r.footerColumns||[])}else this.__setting.setColumnsByForm(i[t],r.columns);t==0&&(this.__setting.setCommonFormOption(r.option||{}),this.dataPaging&&this.dataPaging.initFormProperties({pageSize:this.optForm.data&&this.optForm.data.option&&this.optForm.data.option.pageSize}),this.dataCheckbox&&this.dataCheckbox.formLoadInit());this.initPrimitiveFormColumns(i[t])}else t==0&&(this.__setting.setCommonFormOption({}),this.dataPaging&&this.dataPaging.initCustomProperties(),this.dataCheckbox&&this.dataCheckbox.formLoadInit()),this.initPrimitiveColumns(i[t]);this.createNormalColumnAutoCalculate(n);this.createSpecialRowColumnAutoCalculate(n)}this.__events&&this.__events._triggerEvent(ecount.gridV2.columnEvent.initCompleted,n)},getCloneCustomKeyColumns:function(n,t){var t,r,u,f,i,e;arguments.length==0&&n==this.tbodyType;t=t||[];f={};switch(n){case this.theadType:case this.tbodyType:case this.tfootType:t=this.optColumn[n].columns||[]}for(i=0,e=t.length;i<e;i++)r=t[i],u=r.id,u&&(f[u]=$.extend(!0,{},r));return f},initSortableColumns:function(n){var i,t,r;for(this.setStructureInfo(n),i=this._columns,t=0,r=i.length;t<r;t++)this.initSortableColumn(i[t])},initSortableColumn:function(n){var i=n.id,r=n.originalId||i,t=this.optRow[this.theadType].param||this.optRow[this.tbodyType].param||{},e=t.COLID||t.SORT_COLUMN||t.SORTCOL_ID||"",o=t.SORT_TYPE==undefined||t.SORT_TYPE==null?"A":t.SORT_TYPE=="A"?"A":"D",u=this.optColumn.useAllSortColumns,s=this.optColumn.sortOrder,h=this.optColumn.sortEnableList||[],c=this.optColumn.sortDisableList||[],f;n.columnOption||(n.columnOption={});f=(!u||n.columnOption.controlType)&&h.indexOf(r)!=-1||u&&!n.columnOption.controlType&&c.indexOf(r)==-1&&/tempColumnId\d+/g.test(r)===!1;f&&(n.columnOption.controlType="widget.link.caret",this.data.sortable.has(i)||this.data.sortable.add(i,{sortOrder:e==i?o:s}),n.editableState=1)},setDataCategoryLineInfo:function(n,t,i){if(t==this.constValue.columnType.multi)switch(n){case this.theadType:this.__datas.thead.startRow=i.startLineRowIdx;this.__datas.thead.endRow=i.endLineRowIdx;this.__datas.theadslip.startRow=i.startSlipRowIdx;this.__datas.theadslip.endRow=i.endSlipRowIdx;this.__datas.theadtsubtot1slip.startRow=i.startTSubtot1Slip;this.__datas.theadtsubtot1slip.endRow=i.endTSubtot1Slip;this.__datas.theadtsubtot2slip.startRow=i.startTSubtot2Slip;this.__datas.theadtsubtot2slip.endRow=i.endTSubtot2Slip;this.__datas.theadtsubtot3slip.startRow=i.startTSubtot3Slip;this.__datas.theadtsubtot3slip.endRow=i.endTSubtot3Slip;this.__datas.theadtsubtot4slip.startRow=i.startTSubtot4Slip;this.__datas.theadtsubtot4slip.endRow=i.endTSubtot4Slip;this.__datas.theadtsubtot5slip.startRow=i.startTSubtot5Slip;this.__datas.theadtsubtot5slip.endRow=i.endTSubtot5Slip;this.__datas.theadtsubtot1.startRow=i.startTSubtot1;this.__datas.theadtsubtot1.endRow=i.endTSubtot1;this.__datas.theadtsubtot2.startRow=i.startTSubtot2;this.__datas.theadtsubtot2.endRow=i.endTSubtot2;this.__datas.theadtsubtot3.startRow=i.startTSubtot3;this.__datas.theadtsubtot3.endRow=i.endTSubtot3;this.__datas.theadtsubtot4.startRow=i.startTSubtot4;this.__datas.theadtsubtot4.endRow=i.endTSubtot4;this.__datas.theadtsubtot5.startRow=i.startTSubtot5;this.__datas.theadtsubtot5.endRow=i.endTSubtot5;this.__datas.theadsubtot1slip.startRow=i.startSubtot1slip;this.__datas.theadsubtot1slip.endRow=i.endSubtot1slip;this.__datas.theadsubtot2slip.startRow=i.startSubtot2slip;this.__datas.theadsubtot2slip.endRow=i.endSubtot2slip;this.__datas.theadsubtot3slip.startRow=i.startSubtot3slip;this.__datas.theadsubtot3slip.endRow=i.endSubtot3slip;this.__datas.theadsubtot4slip.startRow=i.startSubtot4slip;this.__datas.theadsubtot4slip.endRow=i.endSubtot4slip;this.__datas.theadsubtot5slip.startRow=i.startTSubtot5Slip;this.__datas.theadsubtot5slip.endRow=i.endTSubtot5Slip;this.__datas.theadsubtot1.startRow=i.startSubtot1;this.__datas.theadsubtot1.endRow=i.endSubtot1;this.__datas.theadsubtot2.startRow=i.startSubtot2;this.__datas.theadsubtot2.endRow=i.endSubtot2;this.__datas.theadsubtot3.startRow=i.startSubtot3;this.__datas.theadsubtot3.endRow=i.endSubtot3;this.__datas.theadsubtot4.startRow=i.startSubtot4;this.__datas.theadsubtot4.endRow=i.endSubtot4;this.__datas.theadsubtot5.startRow=i.startSubtot5;this.__datas.theadsubtot5.endRow=i.endSubtot5;this.__datas.theadpagetotslip.startRow=i.startPagetotslip;this.__datas.theadpagetotslip.endRow=i.endPagetotslip;this.__datas.theadpagetot.startRow=i.startPagetot;this.__datas.theadpagetot.endRow=i.endPagetot;break;case this.tbodyType:this.__datas.tbody.startRow=i.startLineRowIdx;this.__datas.tbody.endRow=i.endLineRowIdx;this.__datas.tbodyslip.startRow=i.startSlipRowIdx;this.__datas.tbodyslip.endRow=i.endSlipRowIdx;this.__datas.tbodytsubtot1slip.startRow=i.startTSubtot1Slip;this.__datas.tbodytsubtot1slip.endRow=i.endTSubtot1Slip;this.__datas.tbodytsubtot2slip.startRow=i.startTSubtot2Slip;this.__datas.tbodytsubtot2slip.endRow=i.endTSubtot2Slip;this.__datas.tbodytsubtot3slip.startRow=i.startTSubtot3Slip;this.__datas.tbodytsubtot3slip.endRow=i.endTSubtot3Slip;this.__datas.tbodytsubtot4slip.startRow=i.startTSubtot4Slip;this.__datas.tbodytsubtot4slip.endRow=i.endTSubtot4Slip;this.__datas.tbodytsubtot5slip.startRow=i.startTSubtot5Slip;this.__datas.tbodytsubtot5slip.endRow=i.endTSubtot5Slip;this.__datas.tbodytsubtot1.startRow=i.startTSubtot1;this.__datas.tbodytsubtot1.endRow=i.endTSubtot1;this.__datas.tbodytsubtot2.startRow=i.startTSubtot2;this.__datas.tbodytsubtot2.endRow=i.endTSubtot2;this.__datas.tbodytsubtot3.startRow=i.startTSubtot3;this.__datas.tbodytsubtot3.endRow=i.endTSubtot3;this.__datas.tbodytsubtot4.startRow=i.startTSubtot4;this.__datas.tbodytsubtot4.endRow=i.endTSubtot4;this.__datas.tbodytsubtot5.startRow=i.startTSubtot5;this.__datas.tbodytsubtot5.endRow=i.endTSubtot5;this.__datas.tbodysubtot1slip.startRow=i.startSubtot1slip;this.__datas.tbodysubtot1slip.endRow=i.endSubtot1slip;this.__datas.tbodysubtot2slip.startRow=i.startSubtot2slip;this.__datas.tbodysubtot2slip.endRow=i.endSubtot2slip;this.__datas.tbodysubtot3slip.startRow=i.startSubtot3slip;this.__datas.tbodysubtot3slip.endRow=i.endSubtot3slip;this.__datas.tbodysubtot4slip.startRow=i.startSubtot4slip;this.__datas.tbodysubtot4slip.endRow=i.endSubtot4slip;this.__datas.tbodysubtot5slip.startRow=i.startTSubtot5Slip;this.__datas.tbodysubtot5slip.endRow=i.endTSubtot5Slip;this.__datas.tbodysubtot1.startRow=i.startSubtot1;this.__datas.tbodysubtot1.endRow=i.endSubtot1;this.__datas.tbodysubtot2.startRow=i.startSubtot2;this.__datas.tbodysubtot2.endRow=i.endSubtot2;this.__datas.tbodysubtot3.startRow=i.startSubtot3;this.__datas.tbodysubtot3.endRow=i.endSubtot3;this.__datas.tbodysubtot4.startRow=i.startSubtot4;this.__datas.tbodysubtot4.endRow=i.endSubtot4;this.__datas.tbodysubtot5.startRow=i.startSubtot5;this.__datas.tbodysubtot5.endRow=i.endSubtot5;this.__datas.tbodypagetotslip.startRow=i.startPagetotslip;this.__datas.tbodypagetotslip.endRow=i.endPagetotslip;this.__datas.tbodypagetot.startRow=i.startPagetot;this.__datas.tbodypagetot.endRow=i.endPagetot;break;case this.tfootType:this.__datas.tfoot.startRow=i.startLineRowIdx;this.__datas.tfoot.endRow=i.endLineRowIdx;this.__datas.tfootslip.startRow=i.startSlipRowIdx;this.__datas.tfootslip.endRow=i.endSlipRowIdx;this.__datas.tfoottsubtot1slip.startRow=i.startTSubtot1Slip;this.__datas.tfoottsubtot1slip.endRow=i.endTSubtot1Slip;this.__datas.tfoottsubtot2slip.startRow=i.startTSubtot2Slip;this.__datas.tfoottsubtot2slip.endRow=i.endTSubtot2Slip;this.__datas.tfoottsubtot3slip.startRow=i.startTSubtot3Slip;this.__datas.tfoottsubtot3slip.endRow=i.endTSubtot3Slip;this.__datas.tfoottsubtot4slip.startRow=i.startTSubtot4Slip;this.__datas.tfoottsubtot4slip.endRow=i.endTSubtot4Slip;this.__datas.tfoottsubtot5slip.startRow=i.startTSubtot5Slip;this.__datas.tfoottsubtot5slip.endRow=i.endTSubtot5Slip;this.__datas.tfoottsubtot1.startRow=i.startTSubtot1;this.__datas.tfoottsubtot1.endRow=i.endTSubtot1;this.__datas.tfoottsubtot2.startRow=i.startTSubtot2;this.__datas.tfoottsubtot2.endRow=i.endTSubtot2;this.__datas.tfoottsubtot3.startRow=i.startTSubtot3;this.__datas.tfoottsubtot3.endRow=i.endTSubtot3;this.__datas.tfoottsubtot4.startRow=i.startTSubtot4;this.__datas.tfoottsubtot4.endRow=i.endTSubtot4;this.__datas.tfoottsubtot5.startRow=i.startTSubtot5;this.__datas.tfoottsubtot5.endRow=i.endTSubtot5;this.__datas.tfootsubtot1slip.startRow=i.startSubtot1slip;this.__datas.tfootsubtot1slip.endRow=i.endSubtot1slip;this.__datas.tfootsubtot2slip.startRow=i.startSubtot2slip;this.__datas.tfootsubtot2slip.endRow=i.endSubtot2slip;this.__datas.tfootsubtot3slip.startRow=i.startSubtot3slip;this.__datas.tfootsubtot3slip.endRow=i.endSubtot3slip;this.__datas.tfootsubtot4slip.startRow=i.startSubtot4slip;this.__datas.tfootsubtot4slip.endRow=i.endSubtot4slip;this.__datas.tfootsubtot5slip.startRow=i.startTSubtot5Slip;this.__datas.tfootsubtot5slip.endRow=i.endTSubtot5Slip;this.__datas.tfootsubtot1.startRow=i.startSubtot1;this.__datas.tfootsubtot1.endRow=i.endSubtot1;this.__datas.tfootsubtot2.startRow=i.startSubtot2;this.__datas.tfootsubtot2.endRow=i.endSubtot2;this.__datas.tfootsubtot3.startRow=i.startSubtot3;this.__datas.tfootsubtot3.endRow=i.endSubtot3;this.__datas.tfootsubtot4.startRow=i.startSubtot4;this.__datas.tfootsubtot4.endRow=i.endSubtot4;this.__datas.tfootsubtot5.startRow=i.startSubtot5;this.__datas.tfootsubtot5.endRow=i.endSubtot5;this.__datas.tfootpagetotslip.startRow=i.startPagetotslip;this.__datas.tfootpagetotslip.endRow=i.endPagetotslip;this.__datas.tfootpagetot.startRow=i.startPagetot;this.__datas.tfootpagetot.endRow=i.endPagetot}else this.__datas.thead.startRow=i.startLineRowIdx,this.__datas.thead.endRow=i.endLineRowIdx,this.__datas.theadslip.startRow=i.startSlipRowIdx,this.__datas.theadslip.endRow=i.endSlipRowIdx,this.__datas.theadtsubtot1slip.startRow=i.startTSubtot1Slip,this.__datas.theadtsubtot1slip.endRow=i.endTSubtot1Slip,this.__datas.theadtsubtot2slip.startRow=i.startTSubtot2Slip,this.__datas.theadtsubtot2slip.endRow=i.endTSubtot2Slip,this.__datas.theadtsubtot3slip.startRow=i.startTSubtot3Slip,this.__datas.theadtsubtot3slip.endRow=i.endTSubtot3Slip,this.__datas.theadtsubtot4slip.startRow=i.startTSubtot4Slip,this.__datas.theadtsubtot4slip.endRow=i.endTSubtot4Slip,this.__datas.theadtsubtot5slip.startRow=i.startTSubtot5Slip,this.__datas.theadtsubtot5slip.endRow=i.endTSubtot5Slip,this.__datas.theadtsubtot1.startRow=i.startTSubtot1,this.__datas.theadtsubtot1.endRow=i.endTSubtot1,this.__datas.theadtsubtot2.startRow=i.startTSubtot2,this.__datas.theadtsubtot2.endRow=i.endTSubtot2,this.__datas.theadtsubtot3.startRow=i.startTSubtot3,this.__datas.theadtsubtot3.endRow=i.endTSubtot3,this.__datas.theadtsubtot4.startRow=i.startTSubtot4,this.__datas.theadtsubtot4.endRow=i.endTSubtot4,this.__datas.theadtsubtot5.startRow=i.startTSubtot5,this.__datas.theadtsubtot5.endRow=i.endTSubtot5,this.__datas.theadsubtot1slip.startRow=i.startSubtot1slip,this.__datas.theadsubtot1slip.endRow=i.endSubtot1slip,this.__datas.theadsubtot2slip.startRow=i.startSubtot2slip,this.__datas.theadsubtot2slip.endRow=i.endSubtot2slip,this.__datas.theadsubtot3slip.startRow=i.startSubtot3slip,this.__datas.theadsubtot3slip.endRow=i.endSubtot3slip,this.__datas.theadsubtot4slip.startRow=i.startSubtot4slip,this.__datas.theadsubtot4slip.endRow=i.endSubtot4slip,this.__datas.theadsubtot5slip.startRow=i.startTSubtot5Slip,this.__datas.theadsubtot5slip.endRow=i.endTSubtot5Slip,this.__datas.theadsubtot1.startRow=i.startSubtot1,this.__datas.theadsubtot1.endRow=i.endSubtot1,this.__datas.theadsubtot2.startRow=i.startSubtot2,this.__datas.theadsubtot2.endRow=i.endSubtot2,this.__datas.theadsubtot3.startRow=i.startSubtot3,this.__datas.theadsubtot3.endRow=i.endSubtot3,this.__datas.theadsubtot4.startRow=i.startSubtot4,this.__datas.theadsubtot4.endRow=i.endSubtot4,this.__datas.theadsubtot5.startRow=i.startSubtot5,this.__datas.theadsubtot5.endRow=i.endSubtot5,this.__datas.theadpagetotslip.startRow=i.startPagetotslip,this.__datas.theadpagetotslip.endRow=i.endPagetotslip,this.__datas.theadpagetot.startRow=i.startPagetot,this.__datas.theadpagetot.endRow=i.endPagetot,this.__datas.tbody.startRow=i.startLineRowIdx,this.__datas.tbody.endRow=i.endLineRowIdx,this.__datas.tbodyslip.startRow=i.startSlipRowIdx,this.__datas.tbodyslip.endRow=i.endSlipRowIdx,this.__datas.tbodytsubtot1slip.startRow=i.startTSubtot1Slip,this.__datas.tbodytsubtot1slip.endRow=i.endTSubtot1Slip,this.__datas.tbodytsubtot2slip.startRow=i.startTSubtot2Slip,this.__datas.tbodytsubtot2slip.endRow=i.endTSubtot2Slip,this.__datas.tbodytsubtot3slip.startRow=i.startTSubtot3Slip,this.__datas.tbodytsubtot3slip.endRow=i.endTSubtot3Slip,this.__datas.tbodytsubtot4slip.startRow=i.startTSubtot4Slip,this.__datas.tbodytsubtot4slip.endRow=i.endTSubtot4Slip,this.__datas.tbodytsubtot5slip.startRow=i.startTSubtot5Slip,this.__datas.tbodytsubtot5slip.endRow=i.endTSubtot5Slip,this.__datas.tbodytsubtot1.startRow=i.startTSubtot1,this.__datas.tbodytsubtot1.endRow=i.endTSubtot1,this.__datas.tbodytsubtot2.startRow=i.startTSubtot2,this.__datas.tbodytsubtot2.endRow=i.endTSubtot2,this.__datas.tbodytsubtot3.startRow=i.startTSubtot3,this.__datas.tbodytsubtot3.endRow=i.endTSubtot3,this.__datas.tbodytsubtot4.startRow=i.startTSubtot4,this.__datas.tbodytsubtot4.endRow=i.endTSubtot4,this.__datas.tbodytsubtot5.startRow=i.startTSubtot5,this.__datas.tbodytsubtot5.endRow=i.endTSubtot5,this.__datas.tbodysubtot1slip.startRow=i.startSubtot1slip,this.__datas.tbodysubtot1slip.endRow=i.endSubtot1slip,this.__datas.tbodysubtot2slip.startRow=i.startSubtot2slip,this.__datas.tbodysubtot2slip.endRow=i.endSubtot2slip,this.__datas.tbodysubtot3slip.startRow=i.startSubtot3slip,this.__datas.tbodysubtot3slip.endRow=i.endSubtot3slip,this.__datas.tbodysubtot4slip.startRow=i.startSubtot4slip,this.__datas.tbodysubtot4slip.endRow=i.endSubtot4slip,this.__datas.tbodysubtot5slip.startRow=i.startTSubtot5Slip,this.__datas.tbodysubtot5slip.endRow=i.endTSubtot5Slip,this.__datas.tbodysubtot1.startRow=i.startSubtot1,this.__datas.tbodysubtot1.endRow=i.endSubtot1,this.__datas.tbodysubtot2.startRow=i.startSubtot2,this.__datas.tbodysubtot2.endRow=i.endSubtot2,this.__datas.tbodysubtot3.startRow=i.startSubtot3,this.__datas.tbodysubtot3.endRow=i.endSubtot3,this.__datas.tbodysubtot4.startRow=i.startSubtot4,this.__datas.tbodysubtot4.endRow=i.endSubtot4,this.__datas.tbodysubtot5.startRow=i.startSubtot5,this.__datas.tbodysubtot5.endRow=i.endSubtot5,this.__datas.tbodypagetotslip.startRow=i.startPagetotslip,this.__datas.tbodypagetotslip.endRow=i.endPagetotslip,this.__datas.tbodypagetot.startRow=i.startPagetot,this.__datas.tbodypagetot.endRow=i.endPagetot,[this.constValue.gridType.editable,this.constValue.gridType.editableForm].contains(this.optCommon.gridType)&&n==this.tfootType&&(this.__datas.tfoot.startRow=i.startLineRowIdx,this.__datas.tfoot.endRow=i.endLineRowIdx,this.__datas.tfootslip.startRow=i.startSlipRowIdx,this.__datas.tfootslip.endRow=i.endSlipRowIdx,this.__datas.tfoottsubtot1slip.startRow=i.startTSubtot1Slip,this.__datas.tfoottsubtot1slip.endRow=i.endTSubtot1Slip,this.__datas.tfoottsubtot2slip.startRow=i.startTSubtot2Slip,this.__datas.tfoottsubtot2slip.endRow=i.endTSubtot2Slip,this.__datas.tfoottsubtot3slip.startRow=i.startTSubtot3Slip,this.__datas.tfoottsubtot3slip.endRow=i.endTSubtot3Slip,this.__datas.tfoottsubtot4slip.startRow=i.startTSubtot4Slip,this.__datas.tfoottsubtot4slip.endRow=i.endTSubtot4Slip,this.__datas.tfoottsubtot5slip.startRow=i.startTSubtot5Slip,this.__datas.tfoottsubtot5slip.endRow=i.endTSubtot5Slip,this.__datas.tfoottsubtot1.startRow=i.startTSubtot1,this.__datas.tfoottsubtot1.endRow=i.endTSubtot1,this.__datas.tfoottsubtot2.startRow=i.startTSubtot2,this.__datas.tfoottsubtot2.endRow=i.endTSubtot2,this.__datas.tfoottsubtot3.startRow=i.startTSubtot3,this.__datas.tfoottsubtot3.endRow=i.endTSubtot3,this.__datas.tfoottsubtot4.startRow=i.startTSubtot4,this.__datas.tfoottsubtot4.endRow=i.endTSubtot4,this.__datas.tfoottsubtot5.startRow=i.startTSubtot5,this.__datas.tfoottsubtot5.endRow=i.endTSubtot5,this.__datas.tfootsubtot1slip.startRow=i.startSubtot1slip,this.__datas.tfootsubtot1slip.endRow=i.endSubtot1slip,this.__datas.tfootsubtot2slip.startRow=i.startSubtot2slip,this.__datas.tfootsubtot2slip.endRow=i.endSubtot2slip,this.__datas.tfootsubtot3slip.startRow=i.startSubtot3slip,this.__datas.tfootsubtot3slip.endRow=i.endSubtot3slip,this.__datas.tfootsubtot4slip.startRow=i.startSubtot4slip,this.__datas.tfootsubtot4slip.endRow=i.endSubtot4slip,this.__datas.tfootsubtot5slip.startRow=i.startTSubtot5Slip,this.__datas.tfootsubtot5slip.endRow=i.endTSubtot5Slip,this.__datas.tfootsubtot1.startRow=i.startSubtot1,this.__datas.tfootsubtot1.endRow=i.endSubtot1,this.__datas.tfootsubtot2.startRow=i.startSubtot2,this.__datas.tfootsubtot2.endRow=i.endSubtot2,this.__datas.tfootsubtot3.startRow=i.startSubtot3,this.__datas.tfootsubtot3.endRow=i.endSubtot3,this.__datas.tfootsubtot4.startRow=i.startSubtot4,this.__datas.tfootsubtot4.endRow=i.endSubtot4,this.__datas.tfootsubtot5.startRow=i.startSubtot5,this.__datas.tfootsubtot5.endRow=i.endSubtot5,this.__datas.tfootpagetotslip.startRow=i.startPagetotslip,this.__datas.tfootpagetotslip.endRow=i.endPagetotslip,this.__datas.tfootpagetot.startRow=i.startPagetot,this.__datas.tfootpagetot.endRow=i.endPagetot)},initPrimitiveFormColumns:function(n){var i,l,p,h,nt,e=[[]],b=0,c={},ir=this.optColumn[n].propertyColumnName,ii,f,r=0,tt=-1,ri=-1,it=-1,ui=-1,rt=-1,fi=-1,ei=-1,ut=-1,ft=-1,et=-1,ot=-1,oi=-1,si=-1,hi=-1,ci=-1,li=-1,rr=-1,st=-1,ht=-1,ct=-1,lt=-1,at=-1,ai=-1,vt=-1,vi=-1,yi=-1,yt=-1,pi=-1,pt=-1,wi=-1,s=this.optCommon.columnType,wt=null,bi=null,k={},bt=0,ki=this.constValue.moveCursorType.next,di=0,kt=0,a,u,dt,gt,t,v,o,d,g,tr;if(this.setStructureInfo(n),[this.constValue.columnType.single,this.constValue.columnType.each].contains(s)?(i=Object.clone(this.optColumn[this.theadType].formColumns,!0),f=this.getCloneCustomKeyColumns(this.theadType,i)):[this.constValue.columnType.multi].contains(s)&&(i=Object.clone(this.optColumn[n].formColumns,!0),f=this.getCloneCustomKeyColumns(this.theadType,i)),i&&i.length!=0){for(a=0,t=0,v=i.length;t<v;t++)(n==this.theadType&&(p||(p=[]),h||(h={})),ii=this.optColumn.isColumnFormWithStatic==!0?i[t].propertyColumnName:i[t][ir],i[t].linechange===!0&&(b+=1),e[b]||e.push([]),u=i[t].id||"",i[t].realId=u,nt=i[t].index!=undefined?i[t].index:t,c[u])||(f[u]&&f[u].index!=undefined&&(nt=f[u].index),i[t].index=nt,i[t].propertyName=this._propertyNormalizer(ii||"A"+(i[t].index!=undefined?i[t].index:t)),_.isNumber(i[t].columnType)&&i[t].columnType!=0||(i[t].columnType=this.constValue.columnBitmask.normal),[this.constValue.columnType.single,this.constValue.columnType.each].contains(s)?this.optColumn[this.theadType].formColumns[t]&&(this.optColumn[this.theadType].formColumns[t].propertyName=i[t].propertyName):[this.constValue.columnType.multi].contains(s)&&this.optColumn[n].formColumns[t]&&(this.optColumn[n].formColumns[t].propertyName=i[t].propertyName),f[u]?f[u].propertyName=i[t].propertyName:f[u]={},i[t].isTree=this.optCommon.gridStyle==this.constValue.gridStyle.tree?this.optTree.treeColumns.contains(u):!1,i[t].editableState=this.optCommon.gridType==this.constValue.gridType.editable?1:-1,i[t]=$.extend(!0,{},i[t],f[u]),n==this.theadType?a==0&&ecount.common.isTrue(i[t].LEFT_FIXD_STND_TF)&&(a=t+1):i[t].LEFT_FIXD_STND_TF=!1,typeof i[t].controlOption=="string"&&(i[t].widgetOptions=i[t].controlOption,i[t].controlOption={}),f[u]=i[t],f[u].controlOption=f[u].controlOption||{},f[u].columnOption=f[u].columnOption||{},f[u].footerOption=f[u].footerOption||{},f[u].columnOption.controlType||(f[u].controlType=="widget.checkbox"?(f[u].columnOption.controlType=f[u].controlType,this.__setting.getCheckboxIgnore(u)||(this.__setting.setCheckBoxUse(u,!0),this.dataCheckbox.addCheckBoxColumn(n,u))):f[u].controlType=="widget.sortable"&&(f[u].columnOption.controlType=f[u].controlType)),this.setColumnFilterControl(n,i[t]),f[u].headerClass&&(f[u].columnOption.className=f[u].headerClass,delete f[u].headerClass),i[t].controlType=[this.constValue.columnType.single,this.constValue.columnType.each].contains(this.optCommon.columnType)&&n==this.tfootType?"widget.label":i[t].controlType&&i[t].controlType.toLowerCase()=="widget.label"?"widget.label":i[t].controlType||"widget.label",i[t].cursorIndex!=undefined&&i[t].cursorIndex!=null&&(ki=this.constValue.moveCursorType.index),n!=this.theadType||this.__datas[this.theadType].isWidthFreeSize||(this.__datas[this.theadType].isWidthFreeSize=i[t].width===""),ecount.common.isTrue(i[t].linechange)&&(wt=null,r+=1),/(-)?\d+/g.test(i[t].lineNo)||(i[t].lineNo=r+1),r==0&&(di+=1,/tempRepeat\d+/g.test(i[t].id)&&(kt+=1)),bi=i[t+1]?ecount.common.isTrue(i[t+1].linechange)?null:i[t+1].id:null,i[t].GROUP_FLAG&&typeof i[t].GROUP_FLAG=="number"&&(i[t].GROUP_FLAG=i[t].GROUP_FLAG.toString()),(i[t].GROUP_FLAG==null||i[t].GROUP_FLAG==undefined)&&(i[t].GROUP_FLAG=this.constValue.sectionSeparateValue.line),i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.slip?(it==-1&&(it=r),ui=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot1slip?(rt==-1&&(rt=r),endTSubTot1Slip=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot2slip?(startTSubTot2Slip==-1&&(startTSubTot2Slip=r),endTSubTot2Slip=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot3slip?(startTSubTot3Slip==-1&&(startTSubTot3Slip=r),endTSubTot3Slip=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot4slip?(startTSubTot4Slip==-1&&(startTSubTot4Slip=r),endTSubTot4Slip=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot5slip?(startTSubTot5Slip==-1&&(startTSubTot5Slip=r),endTSubTot5Slip=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot1?(startTsubtot1==-1&&(startTsubtot1=r),endTsubtot1=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot2?(startTsubtot2==-1&&(startTsubtot2=r),endTsubtot2=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot3?(startTsubtot3==-1&&(startTsubtot3=r),endTsubtot3=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot4?(startTsubtot4==-1&&(startTsubtot4=r),endTsubtot4=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot5?(startTsubtot5==-1&&(startTsubtot5=r),endTsubtot5=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot1slip?(ut==-1&&(ut=r),si=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot2slip?(ft==-1&&(ft=r),hi=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot3slip?(et==-1&&(et=r),ci=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot4slip?(ot==-1&&(ot=r),li=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot5slip?(oi==-1&&(oi=r),rr=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot1?(st==-1&&(st=r),ai=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot2?(ht==-1&&(ht=r),vt=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot3?(ct==-1&&(ct=r),vt=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot4?(lt==-1&&(lt=r),vi=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot5?(at==-1&&(at=r),yi=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.pagetotslip?(yt==-1&&(yt=r),pi=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.pagetot?(pt==-1&&(pt=r),wi=r):(tt==-1&&(tt=r),ri=r),i[t].POSITION=i[t].POSITION||n.toUpperCase(),i[t].fontColor&&i[t].fontColor.trim()=="000000"&&(i[t].fontColor=""),i[t].columnOption.fontColor&&i[t].columnOption.fontColor.trim()=="000000"&&(i[t].columnOption.fontColor=""),i[t].footerOption.fontColor&&i[t].footerOption.fontColor.trim()=="000000"&&(i[t].footerOption.fontColor=""),i[t].fontCellBgColor||(i[t].fontCellBgColor=""),i[t].columnOption.fontCellBgColor||(i[t].columnOption.fontCellBgColor=""),i[t].footerOption.fontCellBgColor||(i[t].footerOption.fontCellBgColor=""),i[t].fontBgColor||(i[t].fontBgColor=""),i[t].columnOption.fontBgColor||(i[t].columnOption.fontBgColor=""),i[t].footerOption.fontBgColor||(i[t].footerOption.fontBgColor=""),i[t].isMergeColumn="0",this.optEditable.use&&(i[t].width===0||i[t].width==="0"||i[t].width===undefined)&&(i[t].isHideColumn=!0),($.isNull(i[t].width)||i[t].width===""||i[t].width===0)&&n==this.theadType&&this.optColumn[this.tbodyType].formColumns&&this.optColumn[this.tbodyType].formColumns[t]&&this.optColumn[this.tbodyType].formColumns[t].width&&(i[t].width=this.optColumn[this.tbodyType].formColumns[t].width),(!this.__core.freeSizeWidth&&$.isNull(i[t].isHideColumn)||ecount.common.isFalse(i[t].isHideColumn))&&($.isNull(i[t].width)||i[t].width==="")&&(this.__core.freeSizeWidth=!0),this.makeMergeSet(n,i[t],t,b),this.makeColumnDataType(n,i[t]),(s==this.constValue.columnType.multi||n==this.tbodyType)&&this.makeColumnSort(n,i[t]),[this.constValue.columnType.single,this.constValue.columnType.each].contains(this.optCommon.columnType)?(i[t].columnOption.className=this.getColumnClassName(n,i[t].columnOption),i[t].className=this.getColumnClassName(n,i[t]),i[t].footerOption.className=this.getColumnClassName(n,i[t].footerOption)):this.constValue.columnType.multi==this.optCommon.columnType&&(i[t].className=this.getColumnClassName(n,i[t])),e[b].push(i[t]),c[u]=i[t],k[i[t].id]={prevColumnId:wt,nextColumnId:bi},wt=i[t].id,n==this.theadType&&(h[i[t].propertyName]=i[t].title),n==this.tfootType&&this.optEditable.specialRowKeepControlType==!0&&(dt=i[t].id&&i[t].id.toLowerCase(),this.__setting.setColumnCustomCell(this.tfootType,dt,this.optColumn[this.tbodyType].customCell[dt])));if([this.constValue.columnType.single,this.constValue.columnType.each].contains(s)&&n==this.tbodyType?this.makeDataConversionColumns(n):[this.constValue.columnType.multi].contains(s)&&this.makeDataConversionColumns(n),n==this.theadType)for(t=1,v=e.length;t<v;t++)e[bt].length<e[t].length&&(bt=t);if(gt=this.insertTempColumn(n,e,i,c,k),e=gt.columnRows,i=gt.columns,n==this.theadType){if(this.optColumn[n].duplicationPoint&&this.optColumn.copyMergeInfo===!1){var gi=0,ni,nr=!1,w=[],y,l,ti=0,ur=i.slice().sort(function(n,t){return(t.index||0)-(n.index||0)})[0].index;for(t=0,v=this.optColumn[n].duplicationPoint.length;t<v;t++)if(o=this.optColumn[n].duplicationPoint[t],o=="exist"&&e[ti])w.push(e[ti]),ti++;else if($.isNumber(o)&&e[o]||o=="function"){if(o=="function"&&(o=0),e.length>=o)d=this.optColumn[n].customCell,y=[],e[o].forEach(function(n){var r=_.merge({},n),u=r.id+"∬∬∬∬∬"+t;nr&&(r.originalId=r.id,d&&(d[u.toLowerCase()]=d[r.id.toLowerCase()]),r.id=u,c[u]=r,i.push(r));y.push(r)}),w.push(y);else{for(y=[],g=0,tr=e[o].length;g<tr;g++)l=Object.clone(e[o][g]),ni="tempColumn"+gi,l.id=ni,l.index=++ur,gi+=1,y.push(l),i.push(l),c[ni]=l;w.push(y)}nr=!0}e=w.length>0?w:e}this.__core.maxColumnCountInRow=bt;p&&h&&(p.push(h),this.__setting.setRowData(n,p))}a>0&&(a+=this.getSystemColumnCount(this.theadType),this.__setting.setFixGridColumn(a));this.setDataCategoryLineInfo(n,s,{startLineRowIdx:tt,endLineRowIdx:ri,startSlipRowIdx:it,endSlipRowIdx:ui,startTSubtot1Slip:rt,endTSubtot1Slip:-1,startTSubtot2Slip:-1,endTSubtot2Slip:-1,startTSubtot3Slip:-1,endTSubtot3Slip:-1,startTSubtot4Slip:-1,endTSubtot4Slip:-1,startTSubtot5Slip:fi,endTSubtot5Slip:ei,startTSubtot1:-1,endTSubtot1:-1,startTSubtot2:-1,endTSubtot2:-1,startTSubtot3:-1,endTSubtot3:-1,startTSubtot4:-1,endTSubtot4:-1,startTSubtot5:-1,endTSubtot5:-1,startSubtot1slip:ut,endSubtot1slip:si,startSubtot2slip:ft,endSubtot2slip:hi,startSubtot3slip:et,endSubtot3slip:ci,startSubtot4slip:ot,endSubtot4slip:li,startTSubtot5Slip:fi,endTSubtot5Slip:ei,startSubtot1:st,endSubtot1:ai,startSubtot2:ht,endSubtot2:-1,startSubtot3:ct,endSubtot3:vt,startSubtot4:lt,endSubtot4:vi,startSubtot5:at,endSubtot5:yi,startPagetotslip:yt,endPagetotslip:pi,startPagetot:pt,endPagetot:wi});this.__datas.theadslip.startRow==0?(this.__datas.theadslip.position="top",this.__datas.thead.position="bottom"):(this.__datas.theadslip.position="bottom",this.__datas.thead.position="top");this.__datas.tbodyslip.startRow==0?(this.__datas.tbodyslip.position="top",this.__datas.tbody.position="bottom"):(this.__datas.tbodyslip.position="bottom",this.__datas.tbody.position="top");this.__datas.tfootslip.startRow==0?(this.__datas.tfootslip.position="top",this.__datas.tfoot.position="bottom"):(this.__datas.tfootslip.position="bottom",this.__datas.tfoot.position="top");this.dataSortable&&this.dataSortable.isSorting()&&n==this.theadType&&this.__setting.setColumnSortableReset(!1);this.optColumn.visible&&i.length>0&&this.addSystemColumn(n,e,i,c,k,h);n==this.theadType&&this.makeColumnHeaderMergeInfo(n,e,h);this.__setting.setColumnMoveCursorType(n,ki);this.__datas[n].columns=i;this.__datas[n].columnRows=e;this.__datas[n].columnKeys=c;this.__datas[n].columnMap=k;this.__datas[n].columnCountOfRow=di-kt;this.__datas[n].tempColumnCountOfRow=kt}},initPrimitiveColumns:function(n){var i,h,f,v,o,u=[[]],c={},d=0,s=this.optCommon.columnType,tr=this.optColumn[n].propertyColumnName,ni,g,r=0,nt=-1,ti=-1,tt=-1,ii=-1,it=-1,ri=-1,ui=-1,rt=-1,ut=-1,ft=-1,et=-1,fi=-1,ei=-1,oi=-1,si=-1,hi=-1,ir=-1,ot=-1,st=-1,ht=-1,ct=-1,lt=-1,ci=-1,at=-1,li=-1,ai=-1,vt=-1,vi=-1,yt=-1,yi=-1,pt=null,pi=null,w={},wi=[],bi=this.constValue.moveCursorType.next,ki=0,wt=0,bt,kt,t,l,e,b,k,nr;if(this.setStructureInfo(n),[this.constValue.columnType.single,this.constValue.columnType.each].contains(s)?(i=$.extend(!0,[],this.optColumn[this.theadType].columns),g=this.getCloneCustomKeyColumns(this.theadType,i)):[this.constValue.columnType.multi].contains(s)&&(i=$.extend(!0,[],this.optColumn[n].columns),g=this.getCloneCustomKeyColumns(n,i)),i&&i.length!=0){var y=0,rr=new RegExp(this.constValue.prefixId.mappingColumn+".+",""),ur=new RegExp(this.constValue.prefixId.repeatColumn+".+","");for(t=0,l=i.length;t<l;t++)n==this.theadType&&(v||(v=[]),o||(o={})),n==this.theadType?y==0&&ecount.common.isTrue(i[t].LEFT_FIXD_STND_TF)&&(y=t+1):i[t].LEFT_FIXD_STND_TF=!1,f=i[t].id,/tempRepeat\d+/g.test(f)||(this.optCommon.renderType==this.constValue.gridRenderType.salarySetting?(i[t].realId==undefined||i[t].realId==null)&&(i[t].realId=f):rr.test(f)||ur.test(f)?(i[t].realId==undefined||i[t].realId==null)&&(i[t].realId=f):this.optCommon.isRefreshForm||(i[t].realId=f)),ni=i[t][tr],i[t].propertyName=this._propertyNormalizer(ni||i[t].propertyName||"A"+t.toString()),i[t].columnOption=i[t].columnOption||{},i[t].footerOption=i[t].footerOption||{},i[t].controlOption=i[t].controlOption||{},_.isNumber(i[t].columnType)&&i[t].columnType!=0||(i[t].columnType=this.constValue.columnBitmask.normal),[this.constValue.columnType.single,this.constValue.columnType.each].contains(s)?this.optColumn[this.theadType].columns[t]&&(this.optColumn[this.theadType].columns[t].propertyName=i[t].propertyName):[this.constValue.columnType.multi].contains(s)&&this.optColumn[n].columns[t]&&(this.optColumn[n].columns[t].propertyName=i[t].propertyName),i[t].headerClass&&(i[t].columnOption.className=i[t].headerClass,delete i[t].headerClass),i[t].columnOption.controlType||(i[t].controlType=="widget.checkbox"?(i[t].columnOption.controlType=i[t].controlType,this.__setting.getCheckboxIgnore(f)||(this.__setting.setCheckBoxUse(f,!0),this.dataCheckbox.addCheckBoxColumn(n,f))):i[t].controlType=="widget.sortable"&&(i[t].columnOption.controlType=i[t].controlType)),this.setColumnFilterControl(n,i[t]),f&&(i[t].editableState=typeof i[t].editableState=="undefined"?this.optCommon.gridType==this.constValue.gridType.editable?1:-1:i[t].editableState,g[f]=i[t]),this.optCommon.gridStyle==this.constValue.gridStyle.tree&&(i[t].isTree=this.optTree.treeColumns.contains(f)),i[t].fontColor&&i[t].fontColor.trim()=="000000"&&(i[t].fontColor=""),i[t].columnOption.fontColor&&i[t].columnOption.fontColor.trim()=="000000"&&(i[t].columnOption.fontColor=""),i[t].footerOption.fontColor&&i[t].footerOption.fontColor.trim()=="000000"&&(i[t].footerOption.fontColor=""),i[t].fontCellBgColor||(i[t].fontCellBgColor=""),i[t].columnOption.fontCellBgColor||(i[t].columnOption.fontCellBgColor=""),i[t].footerOption.fontCellBgColor||(i[t].footerOption.fontCellBgColor=""),i[t].fontBgColor||(i[t].fontBgColor=""),i[t].columnOption.fontBgColor||(i[t].columnOption.fontBgColor=""),i[t].footerOption.fontBgColor||(i[t].footerOption.fontBgColor=""),i[t].controlType=[this.constValue.columnType.single,this.constValue.columnType.each].contains(this.optCommon.columnType)&&n==this.tfootType?"widget.label":i[t].controlType||"widget.label",i[t].isMergeColumn="0",this.optEditable.use&&(i[t].width===0||i[t].width==="0"||i[t].width===undefined)&&(i[t].isHideColumn=!0),i[t].isHideRow=(this.optRow[n].isVisibleTopSubtotal1Slip||![this.constValue.sectionSeparateValue.tsubtot1slip].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleTopSubtotal2Slip||![this.constValue.sectionSeparateValue.tsubtot2slip].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleTopSubtotal3Slip||![this.constValue.sectionSeparateValue.tsubtot3slip].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleTopSubtotal4Slip||![this.constValue.sectionSeparateValue.tsubtot4slip].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleTopSubtotal5Slip||![this.constValue.sectionSeparateValue.tsubtot5slip].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleTopSubtotal1||![this.constValue.sectionSeparateValue.tsubtot1].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleTopSubtotal2||![this.constValue.sectionSeparateValue.tsubtot2].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleTopSubtotal3||![this.constValue.sectionSeparateValue.tsubtot3].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleTopSubtotal4||![this.constValue.sectionSeparateValue.tsubtot4].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleTopSubtotal5||![this.constValue.sectionSeparateValue.tsubtot5].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleSlipData||i[t].GROUP_FLAG!=this.constValue.sectionSeparateValue.slip)&&(this.optRow[n].isVisibleData||i[t].GROUP_FLAG!=this.constValue.sectionSeparateValue.line)&&(this.optRow[n].isVisibleBottomSubtotal1Slip||![this.constValue.sectionSeparateValue.subtot1slip].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleBottomSubtotal2Slip||![this.constValue.sectionSeparateValue.subtot2slip].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleBottomSubtotal3Slip||![this.constValue.sectionSeparateValue.subtot3slip].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleBottomSubtotal4Slip||![this.constValue.sectionSeparateValue.subtot4slip].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleBottomSubtotal5Slip||![this.constValue.sectionSeparateValue.subtot5slip].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleBottomSubtotal1||![this.constValue.sectionSeparateValue.subtot1].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleBottomSubtotal2||![this.constValue.sectionSeparateValue.subtot2].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleBottomSubtotal3||![this.constValue.sectionSeparateValue.subtot3].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleBottomSubtotal4||![this.constValue.sectionSeparateValue.subtot4].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisibleBottomSubtotal5||![this.constValue.sectionSeparateValue.subtot5].contains(i[t].GROUP_FLAG))&&(this.optRow[n].isVisiblePageTotal1Slip||i[t].GROUP_FLAG!=this.constValue.sectionSeparateValue.pagetotslip)&&(this.optRow[n].isVisiblePageTotal1||i[t].GROUP_FLAG!=this.constValue.sectionSeparateValue.pagetot)?!1:!0,ecount.common.isTrue(i[t].linechange)&&(pt=null,r+=1),/(-)?\d+/g.test(i[t].lineNo)||(i[t].lineNo=r+1),r==0&&(ki+=1,/tempRepeat\d+/g.test(i[t].id)&&(wt+=1)),this.makeMergeSet(n,i[t],t,r),i[t].cursorIndex!=undefined&&i[t].cursorIndex!=null&&(bi=this.constValue.moveCursorType.index),($.isNull(i[t].width)||i[t].width===""||i[t].width===0)&&n==this.theadType&&this.optColumn[this.tbodyType].columns&&this.optColumn[this.tbodyType].columns[t].width&&(i[t].width=this.optColumn[this.tbodyType].columns[t].width),(!this.__core.freeSizeWidth&&$.isNull(i[t].isHideColumn)||ecount.common.isFalse(i[t].isHideColumn))&&($.isNull(i[t].width)||i[t].width==="")&&(this.__core.freeSizeWidth=!0),pi=i[t+1]?ecount.common.isTrue(i[t+1].linechange)?null:i[t+1].id:null,u[r]||u.push([]),($.isNull(i[t].lineNo)||$.isEmpty(i[t].lineNo))&&(i[t].lineNo=r+1),i[t].GROUP_FLAG&&typeof i[t].GROUP_FLAG=="number"&&(i[t].GROUP_FLAG=i[t].GROUP_FLAG.toString()),(i[t].GROUP_FLAG==null||i[t].GROUP_FLAG==undefined)&&(i[t].GROUP_FLAG=this.constValue.sectionSeparateValue.line),i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.slip?(tt==-1&&(tt=r),ii=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot1slip?(it==-1&&(it=r),endTSubTot1Slip=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot2slip?(startTSubTot2Slip==-1&&(startTSubTot2Slip=r),endTSubTot2Slip=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot3slip?(startTSubTot3Slip==-1&&(startTSubTot3Slip=r),endTSubTot3Slip=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot4slip?(startTSubTot4Slip==-1&&(startTSubTot4Slip=r),endTSubTot4Slip=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot5slip?(startTSubTot5Slip==-1&&(startTSubTot5Slip=r),endTSubTot5Slip=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot1?(startTsubtot1==-1&&(startTsubtot1=r),endTsubtot1=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot2?(startTsubtot2==-1&&(startTsubtot2=r),endTsubtot2=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot3?(startTsubtot3==-1&&(startTsubtot3=r),endTsubtot3=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot4?(startTsubtot4==-1&&(startTsubtot4=r),endTsubtot4=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.tsubtot5?(startTsubtot5==-1&&(startTsubtot5=r),endTsubtot5=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot1slip?(rt==-1&&(rt=r),ei=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot2slip?(ut==-1&&(ut=r),oi=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot3slip?(ft==-1&&(ft=r),si=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot4slip?(et==-1&&(et=r),hi=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot5slip?(fi==-1&&(fi=r),ir=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot1?(ot==-1&&(ot=r),ci=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot2?(st==-1&&(st=r),at=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot3?(ht==-1&&(ht=r),at=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot4?(ct==-1&&(ct=r),li=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.subtot5?(lt==-1&&(lt=r),ai=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.pagetotslip?(vt==-1&&(vt=r),vi=r):i[t].GROUP_FLAG==this.constValue.sectionSeparateValue.pagetot?(yt==-1&&(yt=r),yi=r):(nt==-1&&(nt=r),ti=r),i[t].POSITION=i[t].POSITION||n.toUpperCase(),this.makeColumnDataType(n,i[t]),n==this.tbodyType&&i[t].validation&&typeof i[t].validation=="function"&&wi.push(i[t].id),[this.constValue.columnType.single,this.constValue.columnType.each].contains(this.optCommon.columnType)?(i[t].columnOption.className=this.getColumnClassName(n,i[t].columnOption),i[t].className=this.getColumnClassName(n,i[t]),i[t].footerOption.className=this.getColumnClassName(n,i[t].footerOption)):this.constValue.columnType.multi==this.optCommon.columnType&&(i[t].className=this.getColumnClassName(n,i[t])),u[r].push(i[t]),c[i[t].id]=i[t],w[i[t].id]={prevColumnId:pt,nextColumnId:pi},pt=i[t].id,n==this.theadType&&(o[i[t].propertyName]=i[t].title),n==this.tfootType&&this.optEditable.specialRowKeepControlType==!0&&(bt=i[t].id&&i[t].id.toLowerCase(),this.__setting.setColumnCustomCell(this.tfootType,bt,this.optColumn[this.tbodyType].customCell[bt]));if(y>0&&(y+=this.getSystemColumnCount(this.theadType),this.__setting.setFixGridColumn(y)),[this.constValue.columnType.single,this.constValue.columnType.each].contains(s)&&n==this.tbodyType?this.makeDataConversionColumns(n):[this.constValue.columnType.multi].contains(s)&&this.makeDataConversionColumns(n),n==this.theadType)for(t=1,l=u.length;t<l;t++)u[d].length<u[t].length&&(d=t);if(kt=this.insertTempColumn(n,u,i,c,w),u=kt.columnRows,i=kt.columns,n==this.theadType){if(this.optColumn[n].duplicationPoint&&this.optColumn.copyMergeInfo===!1){var di=0,dt,gi=!1,p=[],a,h,gt=0,fr=i.slice().sort(function(n,t){return(t.index||0)-(n.index||0)})[0].index;for(t=0,l=this.optColumn[n].duplicationPoint.length;t<l;t++)if(e=this.optColumn[n].duplicationPoint[t],e=="exist"&&u[gt])p.push(u[gt]),gt++;else if($.isNumber(e)&&u[e]||e=="function"){if(e=="function"&&(e=0),u.length>=e)b=this.optColumn[n].customCell,a=[],u[e].forEach(function(n){var r=_.merge({},n),u=r.id+"∬∬∬∬∬"+t;gi&&(r.originalId=r.id,b&&(b[u.toLowerCase()]=b[r.id.toLowerCase()]),r.id=u,c[u]=r,i.push(r));a.push(r)}),p.push(a);else{for(a=[],k=0,nr=u[e].length;k<nr;k++)h=Object.clone(u[e][k]),dt="tempColumn"+di,h.id=dt,h.index=++fr,di+=1,a.push(h),i.push(h),c[dt]=h;p.push(a)}gi=!0}u=p.length>0?p:u}this.__core.maxColumnCountInRow=d;this.optCommon.isRefreshForm||v&&o&&(v.push(o),this.__setting.setRowData(n,v))}this.setDataCategoryLineInfo(n,s,{startLineRowIdx:nt,endLineRowIdx:ti,startSlipRowIdx:tt,endSlipRowIdx:ii,startTSubtot1Slip:it,endTSubtot1Slip:-1,startTSubtot2Slip:-1,endTSubtot2Slip:-1,startTSubtot3Slip:-1,endTSubtot3Slip:-1,startTSubtot4Slip:-1,endTSubtot4Slip:-1,startTSubtot5Slip:ri,endTSubtot5Slip:ui,startTSubtot1:-1,endTSubtot1:-1,startTSubtot2:-1,endTSubtot2:-1,startTSubtot3:-1,endTSubtot3:-1,startTSubtot4:-1,endTSubtot4:-1,startTSubtot5:-1,endTSubtot5:-1,startSubtot1slip:rt,endSubtot1slip:ei,startSubtot2slip:ut,endSubtot2slip:oi,startSubtot3slip:ft,endSubtot3slip:si,startSubtot4slip:et,endSubtot4slip:hi,startTSubtot5Slip:ri,endTSubtot5Slip:ui,startSubtot1:ot,endSubtot1:ci,startSubtot2:st,endSubtot2:-1,startSubtot3:ht,endSubtot3:at,startSubtot4:ct,endSubtot4:li,startSubtot5:lt,endSubtot5:ai,startPagetotslip:vt,endPagetotslip:vi,startPagetot:yt,endPagetot:yi});this.__datas.theadslip.startRow==0?(this.__datas.theadslip.position="top",this.__datas.thead.position="bottom"):(this.__datas.theadslip.position="bottom",this.__datas.thead.position="top");this.__datas.tbodyslip.startRow==0?(this.__datas.tbodyslip.position="top",this.__datas.tbody.position="bottom"):(this.__datas.tbodyslip.position="bottom",this.__datas.tbody.position="top");this.__datas.tfootslip.startRow==0?(this.__datas.tfootslip.position="top",this.__datas.tfoot.position="bottom"):(this.__datas.tfootslip.position="bottom",this.__datas.tfoot.position="top");this.dataSortable&&this.dataSortable.isSorting()&&n==this.theadType&&this.__setting.setColumnSortableReset(!1);n==this.theadType&&this.initMakeRowData(n);this.optColumn.visible&&i.length>0&&this.addSystemColumn(n,u,i,c,w,o);n==this.theadType&&this.makeColumnHeaderMergeInfo(n,u,o);this.__setting.setColumnMoveCursorType(n,bi);this.__datas[n].columns=i;this.__datas[n].columnRows=u;this.__datas[n].columnKeys=c;this.__datas[n].columnMap=w;this.__datas[n].validationColumns=wi;this.__datas[n].columnCountOfRow=ki-wt;this.__datas[n].tempColumnCountOfRow=wt}},render:function(){if(this.__core.drawCancel)return this.__events&&this.__events._triggerEvent(ecount.gridV2.renderEvent.cancelCompleted),{cancel:!0};this.renderingCount+=1;this.makeColgroup();this.__events&&this.__events._triggerEvent(ecount.gridV2.columnEvent.renderCompleted)},getColGroup:function(){return this._colGroup},addCol:function(n,t,i){var r,u,f;for(this.setStructureInfo(n),r=[],u=t;u<i;u++)f=this.makeColByIndex(n,u),r.push(f);return r.splice(0,0,t,0),this._colGroup.splice.apply(this._colGroup,r),r.splice(0,2),{resultHTML:$.template(ecount.gridV2.render.template.cols,{cols:r})}},removeCol:function(n,t,i){this.setStructureInfo(n);this._colGroup.splice(t,i)},makeColgroup:function(n){for(var i=[],n=this.theadType,r=this.getAll(n,this.constValue.returnType.multi),t=0,u=r[this.__core.maxColumnCountInRow].length;t<u;t++)i.push(this.makeColByIndex(n,t));this._colGroup=i},makeColByIndex:function(n,t){var i={attr:{},style:{},className:["colgroup-col"]},r=this.getAll(n,this.constValue.returnType.multi);return i.attr["data-columnid"]=r[this.__core.maxColumnCountInRow][t].id,ecount.common.isTrue(r[this.__core.maxColumnCountInRow][t].isHideColumn)&&(i.className.contains("hide")||i.className.push("hide")),r[this.__core.maxColumnCountInRow][t].width&&(i.style.width=(t==0?r[this.__core.maxColumnCountInRow][t].width-1:r[this.__core.maxColumnCountInRow][t].width)+"px"),ecount.common.isTrue(r[this.__core.maxColumnCountInRow][t].isHide)&&(i.attr.className.contains(this.constValue.className.hide)||i.attr.className.push(this.constValue.className.hide)),i},makeColumnHeaderMergeInfo:function(n,t,i){var u,c,l,e,r,a,f,h,v,s,o;if((this.optColumn.copyMergeInfo!==!1||this.optColumn[n].duplicationPoint)&&n==this.theadType){if(l=0,e=[],this.optColumn[n].columnRowsObject)for(r=0,a=this.optColumn[n].columnRowsObject.length;r<a;r++){for(u=Object.clone(this._propertyNormalizer(this.optColumn[n].columnRowsObject[r])),f=0;f<t[r].length;f++)u[t[r][f].propertyName]&&(t[r][f].title=u[t[r][f].propertyName]);if(u&&u[this.constValue.rowVariableNames.mergeSet])for(c=u[this.constValue.rowVariableNames.mergeSet]||[],h=0,v=c.length;h<v;h++)s=_.merge({},c[h]),o=s[this.constValue.rowVariableNames.mergeStartIndex],s[this.constValue.rowVariableNames.mergeStartIndex]=o=this.getMergeStartTempIndex(n,o,r,l,t),o!==null&&e.push(s);l+=t[r].length}e.length>0&&(i[this.constValue.rowVariableNames.mergeSet]=e)}},initMergedColumnInfo:function(n){var t=this.optColumn.thead,u=[],f=[],i,r;n&&(i=t.duplicationPoint&&t.duplicationPoint.length>0,r=t.columnRowsObject&&t.columnRowsObject.length>0,i||n&&n.duplicatePoint&&$.isArray(n.duplicatePoint)&&(u=n.duplicatePoint),r||n&&n.mergedColumnData&&$.isArray(n.mergedColumnData)&&(f=n.mergedColumnData),i||r||this.__setting.setColumnRowCustom(u,f))},getStartEndInfo:function(n){this.setStructureInfo(n);var t={slip:{start:this._slipStartRow,end:this._slipEndRow},line:{start:this._lineStartRow,end:this._lineEndRow},subtot1:{start:this._subtot1StartRow,end:this._subtot1EndRow},subtot1slip:{start:this._subtot1slipStartRow,end:this._subtot1slipEndRow},subtot2:{start:this._subtot2StartRow,end:this._subtot2EndRow},subtot2slip:{start:this._subtot2slipStartRow,end:this._subtot2slipEndRow},subtot3:{start:this._subtot3StartRow,end:this._subtot3EndRow},subtot3slip:{start:this._subtot3slipStartRow,end:this._subtot3slipEndRow},subtot4:{start:this._subtot4StartRow,end:this._subtot4EndRow},subtot4slip:{start:this._subtot4slipStartRow,end:this._subtot4slipEndRow},subtot5:{start:this._subtot5StartRow,end:this._subtot5EndRow},subtot5slip:{start:this._subtot5slipStartRow,end:this._subtot5slipEndRow},pagetot:{start:this._pagetotStartRow,end:this._pagetotEndRow},pagetotslip:{start:this._pagetotslipStartRow,end:this._pagetotslipEndRow}};switch(this.optCommon.columnType){case this.constValue.columnType.multi:t.totalRowCountPerPattern=this.data.column.__datas[n].columnRows.length}return t},callbackSuccess:function(n,t){if(this.optCommon&&this.optCommon.ecPageId&&!ecount.global.findPageInstance(this.optCommon.ecPageId)){this.__events&&this.__events.destroy();return}if(this.__core.drawCancel)return{result:!1};if(!this.optRow[this.tbodyType].isWithColumn){this.__events&&this.__events._triggerEvent(ecount.grid.event.list.afterFormLoad,{containerId:this.optLayout.containerSelector},{columnForm:t.Data,rowDataParam:this.optRow[this.tbodyType].param});t.Data&&this.initMergedColumnInfo(t.Data.mergedColumnInfo||{});this.dataPaging&&this.dataPaging.initFormProperties(t.Data.option);this.dataCheckbox&&this.dataCheckbox.formLoadInit();switch(this.optCommon.columnType){case this.constValue.columnType.single:case this.constValue.columnType.each:this.__setting.setColumnsByForm(this.theadType,t.Data.columns);this.__setting.setColumnsByForm(this.tbodyType,t.Data.columns);this.optRow[this.tfootType].setRowSpecialRowCount>0&&this.__setting.setColumnsByForm(this.tfootType,t.Data.columns);break;case this.constValue.columnType.multi:this.__setting.setColumnsByForm(this.theadType,t.Data.headerColumns);this.__setting.setColumnsByForm(this.tbodyType,t.Data.columns||[]);this.__setting.setColumnsByForm(this.tfootType,t.Data.footerColumns||[]);break;default:this.__setting.setColumnsByForm(this.theadType,t.Data);this.__setting.setColumnsByForm(this.tbodyType,t.Data);this.optRow[this.tfootType].setRowSpecialRowCount>0&&this.__setting.setColumnsByForm(this.tfootType,t.Data.columns)}this.__setting.setCommonFormOption(t.Data.option||{})}},callbackFail:function(){if(this.optCommon&&this.optCommon.ecPageId&&!ecount.global.findPageInstance(this.optCommon.ecPageId)){this.__events&&this.__events.destroy();return}if(this.__core.drawCancel)return{result:!1}},callbackComplete:function(n,t){var r,i,u;if(this.optCommon&&this.optCommon.ecPageId&&!ecount.global.findPageInstance(this.optCommon.ecPageId)){this.__events&&this.__events.destroy();return}if(this.__core.drawCancel)return this.__events&&this.__events._triggerEvent(ecount.gridV2.renderEvent.cancelCompleted),{cancel:!0};if(this.initSystemColumn(),!this.optRow[this.tbodyType].isWithColumn)for(r=[this.theadType,this.tbodyType,this.tfootType],i=0,u=r.length;i<u;i++)this.initPrimitiveFormColumns(r[i],t);this.createNormalColumnAutoCalculate(t);this.createSpecialRowColumnAutoCalculate(t);this.__events&&this.__events._triggerEvent(ecount.gridV2.columnEvent.initCompleted,t)},destroyAll:function(){var n,t,i;for(n in this.__datas){if(this.__datas.hasOwnProperty(n))for(t in this.__datas[n])this.__datas[n].hasOwnProperty(t)&&this.__datas[n][t]instanceof ecount.gridV2.data.column.dataType&&this.__datas[n][t].destroyAll&&this.__datas[n][t].destroyAll();delete this.__datas[n]}while(i=this.__list.pop())i&&i.destroyAll&&i.destroyAll()}};ecount.gridV2.widget=$.Class(null,{addClass:function(n){return $.isString(n)&&(n=[n]),$.extend(this.__datas.className,n),this},removeClassName:function(n){if($.isString(n))this.__datas.className.remove(n);else if($.isArray(n))for(var t=0,i=n.length;t<i;t++)this.__datas.className.remove(n[t]);return this},addStyle:function(n){return $.isNull(n)||$.extend(this.__datas.style,n),this},removeStyle:function(n){if($.isString(n))delete this.__datas.style[n];else if($.isArray(n))for(var t=0,i=n.length;t<i;t++)delete this.__datas.style[n[t]];return this},addAttr:function(n){return $.isNull(n)||$.extend(this.__datas.attr,n),this},removeAttr:function(n){if($.isString(n))delete this.__datas.style[n];else if($.isArray(n))for(var t=0,i=n.length;t<i;t++)delete this.__datas.style[n[t]];return this},setOptions:function(){},reset:function(){},initGlobalValue:function(n){n=n||{};_.extend(this,n)},init:function(){},render:function(){},renderHTML:function(){},end:function(){return this.__datas},destroyAll:function(){}});ecount.gridV2.widget.cell=$.Class(ecount.gridV2.widget,{addControl:function(n){this.__datas.controls.push(n)},getControlByIndex:function(n){return this.__datas.controls[n]},getControl:function(){},useTooltip:function(){},usePopover:function(){},serialize:function(){for(var t="",n=0,i=this.__datas.controls.length;n<i;n++)t+=this.__datas.controls[n].renderHTML&&this.__datas.controls[n].renderHTML()||"";return this.__datas.cell.data=t,this.__datas},reset:function(){this.__datas={attr:{},style:{},className:[],tag:"",cell:{},controls:[]}},init:function(n){return n?(n.attr&&$.extend(this.__datas.attr,n.attr),n.style&&$.extend(this.__datas.style,n.style),n.className!=undefined&&n.className!=null&&($.isString(n.className)&&(n.className=[n.className]),$.extend(this.__datas.className,n.className)),n.tag!=undefined&&n.tag!=null&&(this.__datas.tag=n.tag),n.cell&&$.extend(this.__datas.cell,n.cell),this):this}});ecount.gridV2.widget.checkbox=$.Class(ecount.gridV2.widget,{__template:"<span class='form-checkbox {{textNo}}'><input type='checkbox' {{className}} {{attr}} {{style}} /><label  {{className}} {{attr}} > {{label}}<\/label><\/span>",__squareTemplate:"<div {{containerAttrs}} ><input type='radio' {{attr}} /><label {{attr}} ><\/label><\/div>",reset:function(){this.__datas={attr:{},className:[],style:{},containerAttrs:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},setValue:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},renderHTML:function(){var n="";return ecount.common.isTrue(this.__datas.isSquare)?(this.__datas.containerAttrs["class"]?this.__datas.containerAttrs["class"].push("checkbox-squared-fill"):this.__datas.containerAttrs["class"]=["checkbox-squared-fill"],n=this.__squareTemplate):n=this.__template,this.__datas.value==!0||["y","true","checked"].contains(this.__datas.value.toString().toLowerCase())?(this.__datas.attr.checked="checked",this.__datas.value=""):(this.__datas.value==!1||["n","false"].contains(this.__datas.value.toString().toLowerCase()))&&(this.__datas.value=""),n=n.replaceAll("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replaceAll("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n=n.replace("{{textNo}}",this.__datas.value?"":"form-checkbox-text-no"),n=n.replace("{{containerAttrs}}",ecount.gridV2.util.convertToAttribute(this.__datas.containerAttrs)),n.replace("{{label}}",this.__datas.label||"")}});ecount.gridV2.widget.checkbox.multi=$.Class(ecount.gridV2.widget,{__template:"<span class='form-checkbox {{textNo}}'><input type='checkbox' {{className}} {{attr}} {{style}} /><label  {{className}} {{attr}} > {{label}}<\/label><\/span>",reset:function(){this.__datas={attr:{},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},setValue:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},renderHTML:function(){var t="",n=this.__datas;return $.isArray(n.value)?(n.value.forEach(function(i,r){var f=i.id,s=i.label,u=Object.clone(n.attr||{}),e=n.className.slice(),o;u.childElementId=f;u["data-index"]=r.toString();u.disabled&&u.disabled[f]?(u.disabled=u.disabled[f],u.checked[f]&&delete u.checked[f]):delete u.disabled;u.checked&&u.checked[f]?u.checked=u.checked[f]:delete u.checked;o=ecount.gridV2.util.convertToAttribute(u);e.push("form-checkbox");r!=0&&u.type=="vertical"&&e.push("form-checkbox-block");t+="<span "+ecount.gridV2.util.convertToClassName(e)+'><input type="checkbox" '+o+" /><label "+o+">"+s+"<\/label><\/span>"}),t):t}});ecount.gridV2.widget.checkbox.number=$.Class(ecount.gridV2.widget,{__templateLayout:"<div class='form-checkbox-numbered'>{0}<\/div>",__templateOriginal:"<input type='checkbox' {{className}} {{attr}} {{style}} />",__templateCustomNumbering:"<div {{className}} {{attr}} {{style}}>{{number}}<\/div>",reset:function(){this.__datas={attr:{id:"",name:"chkItem"},className:[],style:{},option:{},checked:"",number:"",value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(f=arguments[4],u=arguments[3],r=arguments[2],i=arguments[1],t=arguments[0],n=0),$.isNull(t)&&(this.__datas[n].attr.id=t),$.isNull(i)&&(this.__datas[n].attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},renderHTML:function(){var t="",n,i=ecount.gridV2.util.getCheckedValue(this.__datas.value);return i=="checked"&&(this.__datas.attr.checked="checked"),n=this.__templateOriginal,n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),t=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n=this.__templateCustomNumbering,this.__datas.className.push("checkbox-numbered"),n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr,["checked"])),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),t+=n.replace("{{number}}",this.__datas.number),String.format(this.__templateLayout,t)}});ecount.gridV2.widget.faCheckLink=$.Class(ecount.gridV2.widget,{__template:"<a href='javascript:;' {{className}} {{attr}} {{style}}><span class='fa fa-check'><\/span>{{value}}<\/a>",reset:function(){this.__datas={attr:{},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},setValue:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},renderHTML:function(){var n=this.__template;return n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n.replace("{{value}}",this.__datas.value)},end:function(){return null}});ecount.gridV2.widget.label=$.Class(ecount.gridV2.widget,{__template:"<span {{className}} {{attr}} {{style}}>{{nationalFlag}}{{value}}<\/span>",__fixedTemplate:"<div class='grid-fixed-column-set'><\/div>",reset:function(){this.__datas={attr:{id:"",name:""},className:[],style:{},option:{isFixed:!1},tagOption:{},value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},fixed:function(n){this.__datas.option.isFixed=n},setOption:function(n){return $.extend(this.__datas.option,n),this},renderHTML:function(){var t="",n=this.__template,i,r;return n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n=n.replace("{{nationalFlag}}",ecount.gridV2.util.convertToNationalFlag(_.get(this.__datas,"option.nationalFlagOptions",null),!0)),i=this.__datas.value||"&nbsp;",i=i.replace(/\n/g,"<br/>"),r=_.get(this.__datas,"option.__prettyFilter"),r&&(i=ecount.convertor.executePrettyFilter(r,i).value),t=n.replace("{{value}}",ecount.gridV2.util.replaceRegexpString(i)),this.__datas.option.addNbspWhenEmptyData&&this.__datas.value==""&&(t+="&nbsp;"),this.__datas.option.isFixed&&(t+=this.__fixedTemplate),this.__datas.tagOption&&(t=ecount.gridV2.util.setProcessTag(t,this.__datas.tagOption)),t}});ecount.gridV2.widget.label.fa=$.Class(ecount.gridV2.widget,{__template:"<span {{className}} {{attr}} {{style}}><span class='fa fa-check'><\/span>{{value}}<\/span>",reset:function(){this.__datas={attr:{},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},label:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},renderHTML:function(){var n=this.__template;return n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n.replace("{{value}}",ecount.gridV2.util.replaceRegexpString(this.__datas.value))}});ecount.gridV2.widget.link=$.Class(ecount.gridV2.widget,{__template:"<a href='javascript:;' {{className}} {{attr}} {{style}}>{{value}}<\/a>",__depthTemplate:"<span style='margin-left:{{indent}}px' >{{isIE}}<\/span>",define:function(){},reset:function(){this.__datas={attr:{},className:[],style:{},option:{},tagOption:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},label:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},renderHTML:function(){var f="",t=this.__template,o=this.__datas.value||"",i,n;this.__datas.tagOption&&(o=ecount.gridV2.util.setProcessTag(o,this.__datas.tagOption));t=t.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className));t=t.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr));t=t.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style));f=t.replace("{{value}}",ecount.gridV2.util.replaceRegexpString(o));var r="",n=this.__depthTemplate,e=this.__datas.tagOption&&this.__datas.tagOption.replyDepth||0,a=this.__datas.tagOption&&this.__datas.tagOption.searchType||1;if(this.__datas.tagOption&&$.isNumber(e)&&e>0){var s=parseInt(this.__datas.width/15),h=s-1,c=parseInt(e/h),l=e%h,u="";if(a==2&&(c=0,l=1),ecount.constValue.isIE&&(u="&nbsp;"),l==0){for(i=0;i<c-1;i++)n=this.__depthTemplate,n=n.replace("{{indent}}",s*15),n=n.replace("{{isIE}}",u),r+=n;n=this.__depthTemplate;n=n.replace("{{indent}}",h*15);n=n.replace("{{isIE}}",u);r+=n}else{for(i=0;i<c;i++)n=this.__depthTemplate,n=n.replace("{{indent}}",s*15),n=n.replace("{{isIE}}",u),r+=n;n=this.__depthTemplate;n=n.replace("{{indent}}",l*15);n=n.replace("{{isIE}}",u);r+=n}f=r+f}return f}});ecount.gridV2.widget.link.caret=$.Class(ecount.gridV2.widget,{__template:"<a href='javascript:;' {{className}} {{attr}} {{style}}>{{value}} <span class='fa fa-caret-{{position}}'><\/span><\/a>",label:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},sortOrder:function(n){switch(n&&n.toUpperCase()){case"D":case"DESC":case"DESCENDING":this.__datas.option.position="up";break;default:this.__datas.option.position="down"}return this},setOption:function(n){return $.extend(this.__datas.option,n),this},reset:function(){this.__datas={attr:{},className:[],style:{},option:{},value:""}},init:function(){},render:function(){},destroy:function(){},renderHTML:function(){var n=this.__template;return n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n=n.replace("{{position}}",this.__datas.option.position||"down"),n.replace("{{value}}",ecount.gridV2.util.replaceRegexpString(this.__datas.value))}});ecount.gridV2.widget.link.multi=$.Class(ecount.gridV2.widget,{__template:" {{linkLabel}}<a href='javascript:;' {{className}} {{attr}} {{style}}>{{value}}<\/a>",__verticalTemplate:"<div>{{linkLabel}}<a href='javascript:;' {{className}} {{attr}} >{{value}}<\/a><\/div>",reset:function(){this.__datas={attr:{},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},label:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},renderHTML:function(){if(!this.__datas.value)return"";var n=this.__datas.value;return $.isArray(n)&&n.length>0&&$.isString(n[0])?this.renderLinkFromString():this.renderLinkFromObject()},renderLinkFromString:function(){var u="",o=this.__template,s=this.__verticalTemplate,t=this.__datas.className[0],h=this.__datas.option.type,c=this.__datas.attr,l=this.__datas.style,r=[],f,i,e,n;if($.isArray(t))r=_.reduce(t,function(n,t,i){var r=Number(i.replace("class_",""));return!isNaN(r)&&$.isString(t)&&(n[r]=t.split(" ")),n},{});else if(typeof t=="object")for(f=this.__datas.value&&this.__datas.value.length||0,i=0;i<f;i++)e=this.__datas.value[i],n=t[e.id]||[],typeof n=="string"&&(n=n.split(" ")),r.push(n);return _.forEach(this.__datas.value,function(n,t){var i=t!=0&&h=="vertical"?s:o,e=(n||"").toString().replace(/\n/g,"<br/>"),f=_.merge({},c);f.linkId=f.linkId+"_"+t.toString();i=i.replace("{{className}}",ecount.gridV2.util.convertToClassName(r[t]));i=i.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(f));i=i.replace("{{style}}",ecount.gridV2.util.convertToStyle(l));i=i.replace("{{linkLabel}}","");u+=i.replace("{{value}}",ecount.gridV2.util.replaceRegexpString(e))}),u},renderLinkFromObject:function(){var u="",o=this.__template,s=this.__verticalTemplate,t=this.__datas.className[0],h=this.__datas.option.type,c=this.__datas.attr,l=this.__datas.style,r=[],f,i,e,n;if($.isArray(t))r=_.reduce(t,function(n,t,i){var r=Number(i.replace("class_",""));return!isNaN(r)&&$.isString(t)&&(n[r]=t.split(" ")),n},{});else if(typeof t=="object")for(f=this.__datas.value&&this.__datas.value.length||0,i=0;i<f;i++)e=this.__datas.value[i],n=t[e.id]||[],typeof n=="string"&&(n=n.split(" ")),r.push(n);return _.forEach(this.__datas.value,function(n,t){var f=h=="vertical"?s:o,e=n.id,a=n.label,v=n.linkLabel||"",i=_.merge({},c);i.childElementId=e;u+=f.replace("{{className}}",ecount.gridV2.util.convertToClassName(r[t])).replace("{{attr}}",ecount.gridV2.util.convertToAttribute(i)).replace("{{style}}",ecount.gridV2.util.convertToStyle(l)).replace("{{linkLabel}}",v).replace("{{value}}",ecount.gridV2.util.replaceRegexpString(a))}),u}});ecount.gridV2.widget.link.fa=$.Class(ecount.gridV2.widget,{__template:"<a href='javascript:;' {{className}} {{attr}} {{style}}><span class='fa fa-check'><\/span>{{value}}<\/a>",reset:function(){this.__datas={attr:{},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},label:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},renderHTML:function(){var n=this.__template;return n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n.replace("{{value}}",ecount.gridV2.util.replaceRegexpString(this.__datas.value))}});ecount.gridV2.widget.link.faPlus=$.Class(ecount.gridV2.widget,{__template:"<a href='javascript:;' {{className}} {{attr}} {{style}}><span class='fa fa-plus-square'><\/span>{{value}}<\/a>",reset:function(){this.__datas={attr:{},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},label:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},renderHTML:function(){var n=this.__template;return n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n.replace("{{value}}",ecount.gridV2.util.replaceRegexpString(this.__datas.value))}});ecount.gridV2.widget.link.faLabel=$.Class(ecount.gridV2.widget,{__template:"<a href='javascript:;' {{className}} {{attr}} {{style}}>{{value}}<\/a>",__spanTemplate:"<SPAN {{faClassName}}><\/SPAN>",reset:function(){this.__datas={attr:{},className:[],faClassName:[],style:{},faPositionCss:!1,option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},label:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},renderHTML:function(){var n=this.__template,t;return n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n=n.replace("{{value}}",ecount.gridV2.util.replaceRegexpString(this.__datas.value)),t=this.__spanTemplate,this.__datas.faClassName.push("fa","fa-check"),t=t.replace("{{faClassName}}",ecount.gridV2.util.convertToClassName(this.__datas.faClassName)),this.__datas.faPosition!==!0?t+n:n+t}});ecount.gridV2.widget.link.downloadMenubox=$.Class(ecount.gridV2.widget,{__template:"<a href='javascript:;' {{className}} {{attr}} {{style}}>{{value}}<\/a>",define:function(){},reset:function(){this.__datas={attr:{},isOnlySpan:!1,className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},renderHTML:function(){var n=this.__template;return n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n.replace("{{value}}",this.__datas.value)}});ecount.gridV2.widget.link.downloadFileAndSlip=$.Class(ecount.gridV2.widget,{__template:"<a href='javascript:;' {{className}} {{attr}} {{style}}>[{{value}}]<\/a>",define:function(){},reset:function(){this.__datas={attr:{},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},renderHTML:function(){var n=this.__template;return this.__datas.value!=undefined&&this.__datas.value!=null&&this.__datas.value!=""?(n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n.replace("{{value}}",this.__datas.value)):"&nbsp;"}});ecount.gridV2.widget.link.download=$.Class(ecount.gridV2.widget,{__template:"<a href='javascript:;' {{className}} {{attr}} {{style}}>[{{value}}]<\/a>",define:function(){},reset:function(){this.__datas={attr:{},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},renderHTML:function(){var n=this.__template;return this.__datas.value!=undefined&&this.__datas.value!=null&&this.__datas.value!=""?(n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n.replace("{{value}}",this.__datas.value)):"&nbsp;"}});ecount.gridV2.widget.link.email=$.Class(ecount.gridV2.widget,{__template:"<a href='{{emailAddress}}' target ={{target}} {{className}} {{attr}} {{style}}>{{value}}<\/a>",define:function(){},reset:function(){this.__datas={attr:{},isOnlySpan:!1,className:[],style:{},emailAddress:"",target:"",option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},renderHTML:function(){var n=this.__template;return this.__datas.className.push("list_link"),n=n.replace("{{emailAddress}}",this.__datas.emailAddress),n=n.replace("{{target}}",this.__datas.target),n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n.replace("{{value}}",ecount.gridV2.util.replaceRegexpString(this.__datas.value))}});ecount.gridV2.widget.link.scheduleMore=$.Class(ecount.gridV2.widget,{__template:"<A href='javascript:;' {{attr}}>{{value}}<\/A>",__divTemplate:"<div {{className}} data-count={{dataCount}}>{0}<\/div>",reset:function(){this.__datas={attr:{id:"",name:""},className:[],style:{},option:{},label:"",tagOption:{},dataCount:"",value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},renderHTML:function(){var n=this.__divTemplate,t=this.__template;return t=t.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),t=t.replace("{{value}}",ecount.gridV2.util.replaceRegexpString(this.__datas.value)),n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{dataCount}}",this.__datas.dataCount),String.format(n,t)}});ecount.gridV2.widget.link||(ecount.gridV2.widget.link={});ecount.gridV2.widget.link.url=$.Class(ecount.gridV2.widget.link,{__template:"<span {{className}} {{attr}} {{style}}>{{value}}<\/span>",reset:function(){this.__datas={attr:{id:"",name:""},className:[],style:{},option:{},tagOption:{},value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},setOption:function(n){return $.extend(this.__datas.option,n),this},renderHTML:function(){var n=this.__template,t;return n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),t=this.__datas.value||"&nbsp;",t=t.replace(/\n/g,"<br/>"),t=t.replace(ecount.grid.constValue.urlRex,function(n){return"<a href="+n+" target = '_blank'>"+n+"<\/a>"}),n.replace("{{value}}",ecount.gridV2.util.replaceRegexpString(t))}});ecount.gridV2.widget.icon=$.Class(ecount.gridV2.widget,{__template:"<a href='javascript:;' {{className}} {{attr}} {{style}}>{{value}}<\/a>",__spanTemplate:"<span {{typeClassName}}><\/span>",define:function(){},reset:function(){this.__datas={attr:{},isOnlySpan:!1,className:[],typeClassName:[],style:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},renderHTML:function(){var t="",i=this.__spanTemplate,n;return t=i.replace("{{typeClassName}}",ecount.gridV2.util.convertToClassName(this.__datas.typeClassName)),this.__datas.isOnlySpan||(n=this.__template,n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),t=n=n.replace("{{value}}",t)),t}});ecount.gridV2.widget.icon.multi=$.Class(ecount.gridV2.widget,{__template:"<a href='javascript:;' {{className}} {{style}}>{{value}}<\/a>",__spanTemplate:"<span {{typeClassName}} {{attr}}><\/span>",define:function(){},reset:function(){this.__datas=[]},init:function(n,t,i,r,u,f){return arguments.length==0?this:($.isNull(t)&&(this.__datas[n].attr.id=t),$.isNull(i)&&(this.__datas[n].attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},renderHTML:function(){var u=[],f=this.__datas,t,n,r,i;if($.isArray(f))for(r=0;r<f.length;r++)i=f[r],t=this.__template,n=this.__spanTemplate,n=n.replace("{{typeClassName}}",ecount.gridV2.util.convertToClassName(i.typeClassName)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(i.attr)),i.isOnlySpan?u.push(n):(t=t.replace("{{className}}",ecount.gridV2.util.convertToClassName(i.className)),t=t.replace("{{style}}",ecount.gridV2.util.convertToStyle(i.style)),u.push(t.replace("{{value}}",n)));return u.join("\n")}});ecount.gridV2.widget.thumbnailLink=$.Class(ecount.gridV2.widget,{__template:"<A href='javascript:;' {{style}}{{attr}}>{{value}}<\/A>",__noDataTemplate:"<SPAN {{attr}}>{{value}}<\/SPAN>",reset:function(){this.__datas={attr:{id:"",name:""},className:[],style:{},value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},renderHTML:function(){var n=this.__datas.value,t,i={};return/\d+/g.test(this.__datas.attr.width)&&(i.width=this.__datas.attr.width+"px",delete this.__datas.attr.width),/\d+/g.test(this.__datas.attr.height)&&(i.height=this.__datas.attr.height+"px",delete this.__datas.attr.height),n!=null&&n!=undefined&&n!=""?(this.__datas.attr["class"]?this.__datas.attr["class"]+="thumbnail thumbnail-inline":this.__datas.attr["class"]="thumbnail thumbnail-inline",n='<IMG src="'+n+'" '+ecount.gridV2.util.convertToStyle(i)+"/>",t=this.__template):(n="",t=this.__noDataTemplate),t=t.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),t=t.replace("{{style}}",ecount.gridV2.util.convertToStyle(i)),t.replace("{{value}}",n)}});ecount.gridV2.widget.thumbnail=$.Class(ecount.gridV2.widget,{__template:"<SPAN {{attr}}>{{value}}<\/SPAN>",reset:function(){this.__datas={attr:{id:"",name:""},className:[],style:{},value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},renderHTML:function(){var n=this.__datas.value,i={},t;return/\d+/g.test(this.__datas.attr.width)&&(i=this.__datas.attr.width+"px",delete this.__datas.attr.width),/\d+/g.test(this.__datas.attr.height)&&(i=this.__datas.attr.height+"px",delete this.__datas.attr.height),n!=null&&n!=undefined&&n!=""?(this.__datas.attr["class"]?this.__datas.attr["class"]+="thumbnail thumbnail-inline":this.__datas.attr["class"]="thumbnail thumbnail-inline",n='<IMG src="'+n+'" '+ecount.gridV2.util.convertToStyle(i)+"/>"):n="",t=this.__template,t=t.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),t.replace("{{value}}",n)}});ecount.gridV2.widget.radio=$.Class(ecount.gridV2.widget,{__labelTemplate:"<span class='form-radio radio-inline '><INPUT type='radio' {{attr}} /><label {{attr}} >{{label}}<\/label><\/span>",__squareTemplate:"<div {{containerAttrs}} {{containerClass}} ><input type='radio' {{attr}} /><label {{attr}} ><\/label><\/div>",__basicTemplate:"<span class='form-radio form-radio-text-no '><INPUT type='radio' {{attr}} /><label {{attr}} ><\/label><\/span>",reset:function(){this.__datas={attr:{},className:[],style:{},containerAttrs:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},label:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},renderHTML:function(){var n="",t=[];return ecount.common.isTrue(this.__datas.isSquare)?(this.__datas.containerAttrs["class"]&&typeof this.__datas.containerAttrs["class"]=="string"&&(this.__datas.containerAttrs["class"]=[this.__datas.containerAttrs["class"]]),this.__datas.containerAttrs["class"]?this.__datas.containerAttrs["class"].push("checkbox-squared-fill"):this.__datas.containerAttrs["class"]=["checkbox-squared-fill"],this.__datas.containerAttrs["class"]&&(t=this.__datas.containerAttrs["class"],delete this.__datas.containerAttrs["class"]),n=this.__squareTemplate):n=this.__datas.label?this.__labelTemplate:this.__basicTemplate,ecount.common.isTrue(this.__datas.value)&&(this.__datas.attr.checked="checked"),n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n=n.replace("{{containerAttrs}}",ecount.gridV2.util.convertToAttribute(this.__datas.containerAttrs)),n=n.replace("{{containerClass}}",ecount.gridV2.util.convertToClassName(t)),n.replace("{{label}}",this.__datas.label)}});ecount.gridV2.widget.radio.multi=$.Class(ecount.gridV2.widget,{});ecount.gridV2.widget.radio.number=$.Class(ecount.gridV2.widget,{__templateLayout:"<div class='form-checkbox-numbered'>{0}<\/div>",__templateOriginal:"<input type='radio' {{className}} {{attr}} {{style}} />",__templateCustomNumbering:"<div {{className}} {{attr}} {{style}}>{{value}}<\/div>",reset:function(){this.__datas={attr:{},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},label:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},renderHTML:function(){var t="",n,i=ecount.gridV2.util.getCheckedValue(this.__datas.attr.checked);return i=="checked"&&(this.__datas.attr.checked="checked"),n=this.__templateOriginal,n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),t=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n=this.__templateCustomNumbering,this.__datas.className.push("checkbox-numbered"),n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr,["checked"])),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),t+=n.replace("{{value}}",this.__datas.value),String.format(this.__templateLayout,t)}});ecount.gridV2.widget.rowItemCheckbox=$.Class(ecount.gridV2.widget,{__templateLayout:"<div class='form-checkbox-numbered'>{0}<\/div>",__templateOriginal:"<input type='checkbox' {{className}} {{attr}} {{style}} />",__templateCustomNumbering:"<div {{className}} {{attr}} {{style}}>{{value}}<\/div>",__templateNoNumber:"<span class='form-checkbox form-checkbox-text-no' >{0}<label {{attr}} ><\/label><\/span>",reset:function(){this.__datas=[{attr:{id:"",name:"chkItem"},className:[],style:{},option:{},checked:"",value:""}]},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(f=arguments[4],u=arguments[3],r=arguments[2],i=arguments[1],t=arguments[0],n=0),$.isNull(t)&&(this.__datas[n].attr.id=t),$.isNull(i)&&(this.__datas[n].attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},setChecked:function(n,t){arguments.length==1&&(t=arguments[0],n=0);(t==undefined||t==null)&&(t="");this.__datas[n].checked=t},label:function(n,t){arguments.length==1&&(t=arguments[0],n=0);(t==undefined||t==null)&&(t="");typeof t=="number"&&(t=t.toString());this.__datas[n].value=t},setOption:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),typeof t.isOriginal=="boolean"&&this.setStlyeOriginal(t.isOriginal),this},setStlyeOriginal:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),this.__datas[n].option.isOriginal=t===!0,this},renderHTML:function(){for(var f,r="",u=0,e=this.__datas.length;u<e;u++){var i="",t=this.__datas[u],n,o=ecount.gridV2.util.getCheckedValue(t.attr.checked);o=="checked"&&(t.attr.checked="checked");n=this.__templateOriginal;n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(t.className));n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(t.attr));t.option.isOriginal===!1?(i=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(t.style)),n=this.__templateCustomNumbering,t.className.push("checkbox-numbered"),n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(t.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(t.attr,["checked"])),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(t.style)),i+=n.replace("{{value}}",t.value),r+=String.format(this.__templateLayout,i)):(f=this.__templateNoNumber.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(t.attr)),i=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(t.style)),r+=String.format(f,i))}return r}});ecount.gridV2.widget.rowItemMoveable=$.Class(ecount.gridV2.widget,{__template:"<a href='javascript:;' {{className}} {{attr}} {{style}}><span class='fa fa-arrow-circle-down'><\/span><\/a>",reset:function(){this.__datas=[{attr:{id:""},className:[],style:{},option:{},value:""}]},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(f=arguments[4],u=arguments[3],r=arguments[2],i=arguments[1],t=arguments[0],n=0),$.isNull(t)&&(this.__datas[n].attr.id=t),$.isNull(i)&&(this.__datas[n].attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){arguments.length==1&&(t=arguments[0],n=0);(t==undefined||t==null)&&(t="");typeof t=="number"&&(t=t.toString());this.__datas[n].value=t},setOption:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),typeof t.isOriginal=="boolean"&&this.setStlyeOriginal(t.isOriginal),this},renderHTML:function(){for(var r,t,n,u="",i=0,f=this.__datas.length;i<f;i++)r="",t=this.__datas[i],n=this.__template,n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(t.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(t.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(t.style)),r+=n.replace("{{value}}",t.value),u+=r;return u}});ecount.gridV2.widget.label.arrow=$.Class(ecount.gridV2.widget,{__template:"<span {{arrowClassName}} {{attr}} {{style}}><\/span><span {{className}} >{{value}}<\/span>",reset:function(){this.__datas={attr:{id:"",name:""},className:[],arrowClassName:[],style:{},option:{},value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},renderHTML:function(){var n=this.__template;return this.__datas.arrowClassName.push("text-uline-no","text-default","text-uline-no","tree-arrow"),n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{arrowClassName}}",ecount.gridV2.util.convertToClassName(this.__datas.arrowClassName)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n.replace("{{value}}",ecount.gridV2.util.replaceRegexpString(this.__datas.value))}});ecount.gridV2.widget.link.arrow=$.Class(ecount.gridV2.widget,{__template:"<span {{arrowClassName}} {{attr}} {{style}}><\/span><a href='javascript:;' {{className}} {{attr}} {{style}}>{{value}}<\/a>",reset:function(){this.__datas={attr:{id:"",name:""},className:[],arrowClassName:[],style:{},option:{},value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},renderHTML:function(){var n=this.__template;return this.__datas.arrowClassName.push("text-uline-no","text-default","text-uline-no","tree-arrow"),n=n.replace("{{arrowClassName}}",ecount.gridV2.util.convertToClassName(this.__datas.arrowClassName)),n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n.replace("{{value}}",ecount.gridV2.util.replaceRegexpString(this.__datas.value))}});ecount.gridV2.widget.empty=$.Class(ecount.gridV2.widget,{__template:"&nbsp;",reset:function(){this.__datas={}},init:function(){return this},renderHTML:function(){return this.__template}});ecount.gridV2.widget.flow||(ecount.gridV2.widget.flow={});ecount.gridV2.widget.flow.order=$.Class(ecount.gridV2.widget,{fullTagTemplate:'<DIV class="label-group label-group-order-mgmt label-group-proceed-step" data-seq="{4}">{0}<UL><LI>{1}{2}{3}<\/LI><\/UL><\/DIV>',halfTagTemplate:'<DIV class="label-group label-group-order-mgmt label-group-proceed-step" data-seq="{1}">{0}<\/DIV>',reset:function(){this.__datas={attr:{id:"",name:""},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},renderHTML:function(){function u(i,u){var f=r[n][i]||{};return $.isNull(f.attrs)&&(f.attrs={}),f.attrs=$.extend(!0,f.attrs,it||{}),f.attrs.childElementLabel=t[n],f.attrs.childElementIndex=n+1-tt,f.attrs.childElementId=ecount.grid.constValue.multiControlId["link"+u],f}function rt(){var i,u,r=document.createElement("canvas"),f;return r.id="myCanvas",r.style="display:none",$("body").append(r),i=r.getContext("2d"),i.font="12px Arial",u=t[n],i.measureText(t[n]).width>75&&(f=parseInt(75/(i.measureText(t[n]).width/t[n].length)),u=t[n].slice(0,f)+".."),$("#myCanvas").remove(),u}var v="",y,f,h,e,c,p,w,b,d,g,l,a,i,o,k,nt,s=searchTag=connectTag=completeTag=completeAttrsString="",r=this.__datas.option.orderOption,t=this.__datas.option.orderLabel,it=this.__datas.attr,tt=0,n;if(!$.isArray(r))return"";for(n=0;n<t.length;n++){if(h=u("normal",1),e=u("write",2),c=u("search",3),p=u("connect",4),w=u("complete",5),b=u("completeCancel",6),d=r[n].isShade&&r[n].isShade===!0?!0:!1,g=e.visible===!0?!0:!1,l=c.visible===!0?!0:!1,a=p.visible===!0?!0:!1,i=w.visible===!0?!0:!1,o=b.visible===!0?!0:!1,k=h.hide,nt=h.keepIndex,y=s=searchTag=connectTag=completeTag=completeAttrsString="",k&&!nt){tt++;continue}(f=rt(),g?(e.attrs["class"]="fa fa-pencil ",s=d?'<SPAN class="label label-muted ">'+f+'<A href="javascript:;" '+ecount.gridV2.util.convertToAttribute(e.attrs)+"><\/A><\/span>":'<SPAN class="label label-primary ">'+f+'<A href="javascript:;" '+ecount.gridV2.util.convertToAttribute(e.attrs)+"><\/A><\/span>"):s=l||a||i||o?'<SPAN class="label label-muted ">'+f+"<\/span>":'<SPAN class="label label-muted "><A href="javascript:;" '+ecount.gridV2.util.convertToAttribute(h.attrs)+">"+f+"<\/A><\/SPAN>",c.attrs["class"]&&(searchTag='<A href="javascript:;" '+(l?"":"class='invisible ' ")+ecount.gridV2.util.convertToAttribute(c.attrs)+'><SPAN class="fa fa-search"><\/SPAN><\/A>'),connectTag='<A href="javascript:;" '+(a?"":"class='invisible ' ")+ecount.gridV2.util.convertToAttribute(p.attrs)+'><SPAN class="fa fa-chain"><\/SPAN><\/A>',completeAttrsString=i?ecount.gridV2.util.convertToAttribute(w.attrs):ecount.gridV2.util.convertToAttribute(b.attrs),completeTag='<A href="javascript:;" '+(i||o?"":"class='invisible ' ")+completeAttrsString+'><SPAN class="'+(i?"fa fa-check ":o?"fa fa-times ":"")+'"><\/SPAN><\/A>',k)||(y=l||a||i||o?String.format(this.fullTagTemplate,s,searchTag,connectTag,completeTag,r[n].menuSeq):String.format(this.halfTagTemplate,s,r[n].menuSeq),v=v+" "+y)}return v}});ecount.gridV2.widget.flow||(ecount.gridV2.widget.flow={});ecount.gridV2.widget.flow.slide=$.Class(ecount.gridV2.widget,{__template:"<div class='label-group label-group-block label-group-hover {{noEllipsis}}'>{0}{1}<\/div>",reset:function(){this.__datas={attr:{id:"",name:"","class":{}},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},renderHTML:function(){var e="",i;if($.isEmpty(this.__datas.value))return e;var c=this.__template,r="",n="label ",u=this.__datas.attr["class"].label,o=this.__datas.attr["class"].text,l=ecount.common.isTrue(this.__datas.option.noEllipsisCss)?"":"label-group-no-ellipsis";u||o||delete this.__datas.attr["class"];o&&(this.__datas.attr["class"]=o);switch(this.__datas.option.buttonType){case ecount.grid.constValue.buttonType.lightGray:n+="label-muted ";break;case ecount.grid.constValue.buttonType.gray:n+="label-default ";break;case ecount.grid.constValue.buttonType.warning:n+="label-warning ";break;case ecount.grid.constValue.buttonType.light:n+="label-primary label-light ";break;case ecount.grid.constValue.buttonType.inverse:n+="label-primary label-inverse ";break;case"noBackground":break;default:n+="label-primary "}var a=String.format('<span class="{0}"><a herf="javascript:;" {1}>{2}<\/span>',n,ecount.gridV2.util.convertToAttribute(this.__datas.attr),this.__datas.value),s=this.__datas.option.slideData,t,f={},h=[];if(this.__datas.option.isSlide!==!1&&s){for(r="<ul>",u&&(h=Object.keys(u)),i=0;i<s.length;i++)t=s[i],f.className+=h.length>0&&h.contains(t.id)?u[t.id]:"",f.className=" text-default ",f.childElementId=t.id||"link"+(i+1).toString(),r+="<LI><A "+ecount.gridV2.util.convertToAttribute(f)+">"+t.label+"<\/A><\/LI>";r+="<\/ul>"}return e=c.replace("{{noEllipsis}}",l),String.format(e,a,r)}});ecount.gridV2.widget.flow||(ecount.gridV2.widget.flow={});ecount.gridV2.widget.flow.slideGroup=$.Class(ecount.gridV2.widget,{__template:"<div class='label-group label-group-hover label-group-proceed-step label-group-collapse label-group-inv-adj' {2}>{0}{1}<\/div>",__labelTemplate:"<span class='label event-target {0}' {1}>{2}<\/span>",reset:function(){this.__datas={attr:{id:"",name:"","class":{}},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},renderHTML:function(){var t="";if($.isEmpty(this.__datas.value))return t;var r=this.__template,u=this.__labelTemplate,f=this.__datas.value,n=this.__datas.attr,i=this.__datas.option.labelOption||{};return n&&(n.childElementId=ecount.grid.constValue.multiControlId.span1),_.forEach(f,function(f){var c=f.id,y=f.label,e="label-primary ",l,a=_.merge({},n),s=i&&i[c]||[],h="",o;for(f.buttonType==ecount.grid.constValue.buttonType.gray?e="label-default ":f.buttonType==ecount.grid.constValue.buttonType.lightGray?e="label-muted ":f.buttonType==ecount.grid.constValue.buttonType.warning?e="label-warning ":f.buttonType==ecount.grid.constValue.buttonType.light?e="label-primary label-light ":f.buttonType==ecount.grid.constValue.buttonType.inverse&&(e="label-primary label-inverse "),a.childElementId=c,l=String.format(u,e,ecount.gridV2.util.convertToAttribute(a),y),o=0;o<s.length;o++){var p=s[o].id,w=s[o].label,v=_.merge({},n);v.childElementId=p;h+="<li><a href='javascript:;' "+ecount.gridV2.util.convertToAttribute(v)+">"+w+"<\/a><\/li>"}s.length>0&&(h=String.format("<ul>{0}<\/ul>",h));t+=String.format(r,l,h,ecount.gridV2.util.convertToAttribute(n))+" "}),t}});ecount.gridV2.widget.flow||(ecount.gridV2.widget.flow={});ecount.gridV2.widget.flow.slideGroupDynamic=$.Class(ecount.gridV2.widget,{__template:"<div class='label-group label-group-hover label-group-proceed-step ' {2}>{0}{1}<\/div>",__labelTemplate:"<span class='label event-target {0}' {1}>{2}<\/span>",reset:function(){this.__datas={attr:{id:"",name:"","class":{}},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},renderHTML:function(){var t="";if($.isEmpty(this.__datas.value))return t;var r=this.__template,u=this.__labelTemplate,f=this.__datas.value,n=this.__datas.attr,i=this.__datas.option.labelOption||{};return n&&(n.childElementId=ecount.grid.constValue.multiControlId.span1),_.forEach(f,function(f){var c=f.id,y=f.label,e="label-primary ",l,a=_.merge({},n),s=i&&i[c]||[],h="",o;for(f.buttonType==ecount.grid.constValue.buttonType.gray?e="label-default ":f.buttonType==ecount.grid.constValue.buttonType.lightGray?e="label-muted ":f.buttonType==ecount.grid.constValue.buttonType.warning?e="label-warning ":f.buttonType==ecount.grid.constValue.buttonType.light?e="label-primary label-light ":f.buttonType==ecount.grid.constValue.buttonType.inverse&&(e="label-primary label-inverse "),a.childElementId=c,l=String.format(u,e,ecount.gridV2.util.convertToAttribute(a),y),o=0;o<s.length;o++){var p=s[o].id,w=s[o].label,v=_.merge({},n);v.childElementId=p;h+="<li><a href='javascript:;' "+ecount.gridV2.util.convertToAttribute(v)+">"+w+"<\/a><\/li>"}s.length>0&&(h=String.format("<ul>{0}<\/ul>",h));t+=String.format(r,l,h,ecount.gridV2.util.convertToAttribute(n))+" "}),t}});ecount.gridV2.widget.flow||(ecount.gridV2.widget.flow={});ecount.gridV2.widget.flow.signalLamp=$.Class(ecount.gridV2.widget,{__textTemplate:"<SPAN {{labelAttrs}}>{{value}}<\/SPAN>",__ULTemplate:"<UL {{ULClass}}>{0}<\/UL>",__LITemplate:"<LI {{attr}} {{class}}><\/LI>",reset:function(){this.__datas={attr:{id:"",name:""},className:[],style:{},option:{},optionData:{},lampCount:6,value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},renderHTML:function(){for(var f,l,t,e=this.__datas.value,u,n,o="",s="",h="",i=this.__datas.optionData,c=["wrapper-circle-progress"],r=0,a=e.length;r<a;r++)u={},this.__datas.attr["class"+r]&&(u["class"]=this.__datas.attr["class"+r]),textHTML=this.__textTemplate,textHTML=textHTML.replace("{{labelAttrs}}",ecount.gridV2.util.convertToAttribute(u)),textHTML=textHTML.replace("{{value}}",e[r]),o+=textHTML;if(i)for(f=parseInt(i.index,10),l=i.isCursor?!0:!1,l&&c.push("cursor-pointer"),s=this.__ULTemplate.replace("{{ULClass}}",ecount.gridV2.util.convertToClassName(c)),t=1;t<this.__datas.lampCount;t++)n=this.__datas.attr?Object.clone(this.__datas.attr):{},n.childElementId="link"+(t+1),f==t&&i.isActive?n["class"]=n["class"]?n["class"]+" active":" active":f==t&&i.isDanger&&(n["class"]=n["class"]?n["class"]+" active danger":" active danger"),h+=this.__LITemplate.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(n));return String.format(s,h)+o}});ecount.gridV2.widget.mergeAddRow=$.Class(ecount.gridV2.widget,{__template:'<A href="javascript:;"><SPAN class="fa fa-plus-square"><\/SPAN><\/A>',define:function(){},reset:function(){this.__datas={attr:{},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},label:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},renderHTML:function(){var n=this.__template;return n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style))}});ecount.gridV2.widget.userHelpMark=$.Class(ecount.gridV2.widget,{__template:"{{value}} <span class='user-help-mark ' {{attr}}/>",reset:function(){this.__datas={attr:{id:"",name:""},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},renderHTML:function(){var n=this.__template,t=(this.__datas.value||"").toString().replace(/\n/g,"<br/>");return n=n.replace("{{value}}",t),n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr))}});ecount.gridV2.widget.imageFileBox=$.Class(ecount.gridV2.widget,{__template:'<div><div class="thumbnail {{checked}}"><div class="checkbox-rounded-check"><input type="checkbox" id="{{imageCheckboxId}}" {{checked}}><label for="{{imageCheckboxId}}"><\/label><\/div><a href="javascript:;"><img src="{{0}}"><\/a><div class="caption">{{1}}<div class="text-remark">{{2}}<\/div><div class="text-remark">{{3}}<\/div><div class="text-remark">{{4}}<\/div><\/div><\/div><\/div>',reset:function(){this.__datas={attr:{id:"",name:""},className:[],style:{},value:"",option:{}}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},renderHTML:function(){var n=this.__template;if(this.__datas.value)return n.replace("{{checked}}",this.__datas.option.isChecked?"active":"").replace("{{checked}}",this.__datas.option.isChecked?"checked":"").replace("{{imageCheckboxId}}",this.__datas.option.imageCheckboxId).replace("{{imageCheckboxId}}",this.__datas.option.imageCheckboxId).replace("{{0}}",this.__datas.value[0]).replace("{{1}}",this.getTemplateLabel()).replace("{{2}}",this.__datas.value[1]).replace("{{3}}",this.__datas.value[2]).replace("{{4}}",this.__datas.value[3])},getTemplateLabel:function(){var t="",i=this.__datas.label_info,n;return i&&(n='<span class="label mr-5" style="background-color:{{2}};">{{3}}<\/span>',i.forEach(function(i,r){r==0&&(n='<span class="text-remark"><\/span>'+n);i.color>"#dddddd"&&(n=n.replace("label","label label-light"));t+=n.replace("{{2}}",i.color).replace("{{3}}",i.label);n='<span class="label  mr-5" style="background-color:{{2}};">{{3}}<\/span>'})),t}});ecount.gridV2.widget.text||(ecount.gridV2.widget.text={});ecount.gridV2.widget.text.multi=$.Class(ecount.gridV2.widget,{__horizontaltemplate:"<span {{attr}} {{style}}>{{value}}<\/span>",__verticalTemplate:"<div {{attr}} {{style}}>{{value}}<\/div>",reset:function(){this.__datas={attr:{},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},label:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},renderHTML:function(){if(!this.__datas.value)return"";var n="",t=this.__horizontaltemplate,i=this.__verticalTemplate,r=this.__datas.className[0],u=this.__datas.option.type,f=this.__datas.attr,e=this.__datas.style,o=_.reduce(r,function(n,t,i){var r=Number(i.replace("class_",""));return!isNaN(r)&&$.isString(t)&&(n[r]=t.split(" ")),n},{});return _.forEach(this.__datas.value,function(r,s){var h=s!=0&&u=="vertical"?i:t,c=(r||"").toString().replace(/\n/g,"<br/>"),l=_.merge({"margin-top":"2px","margin-bottom":"3px"},f);h=h.replace("{{className}}",ecount.gridV2.util.convertToClassName(o[s]));h=h.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(l));h=h.replace("{{style}}",ecount.gridV2.util.convertToStyle(e));n+=h.replace("{{value}}",c)}),n}});ecount.gridV2.widget.button||(ecount.gridV2.widget.button={});ecount.gridV2.widget.button.time=$.Class(ecount.gridV2.widget,{__template:"<a href='javascript:;' {{className}} {{attr}} {{style}}>{{value}}<\/a>",__spanTemplate:"<span {{typeClassName}}><\/span>",reset:function(){this.__datas={option:{},value:""}},init:function(){return this},renderHTML:function(){var n=this.__datas.value,t;return t=n===!0?"X":n===!1||n===""||$.isNull(n)?"&nbsp":n,"<div>{{data}}<\/div>".replace("{{data}}",t)}});ecount.gridV2.widget.barcodeImageTag=$.Class(ecount.gridV2.widget,{__template:"<SPAN {{attr}}>{{imgData}}<\/SPAN>",__imgTemplate:'<div><img width="{{width}}px;" height="{{height}}px;" src="{{url}}"><\/div>{{br}}',__brTemplate:'<br style="display: block;"/>',__CONST_VALUE:{isBarcodeData:"IsImgConvert",textData:"BarCodeText",barcodeData:"BarCodeData",url:"BarCodeSrc",width:"BarCodeWidth",height:"BarCodeHeight"},define:function(){},reset:function(){this.__datas={attr:{},className:[],style:{},option:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},label:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},getBarcodeImageData:function(n){try{var t;return(t=/({|})/g.test(n)?JSON.parse(n):n,$.isEmpty(t))?!1:_.isNumber(t)||_.isString(t)?t:this.setBarcodeImage(t)}catch(i){return n}},setBarcodeImage:function(n){return _.map(n,function(n){return n[this.__CONST_VALUE.isBarcodeData]?this.convertToUrlObj(n[this.__CONST_VALUE.barcodeData]):n[this.__CONST_VALUE.textData]}.bind(this))},convertToUrlObj:function(n){return _.isEmpty(n)||_.isEmpty(n[this.__CONST_VALUE.url])?{}:{url:n[this.__CONST_VALUE.url]||"",width:n[this.__CONST_VALUE.width]||"0",height:n[this.__CONST_VALUE.height]||"0"}},getImageTemplate:function(n,t){var i=this.__brTemplate,r=this.__imgTemplate.replace("{{width}}",n.width).replace("{{height}}",n.height).replace("{{url}}",n.url);return t&&(i=""),r.replace("{{br}}",i)},getAttrTemplate:function(n){return n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr))},getTemplate:function(n,t){return n.replace("{{imgData}}",t)},renderHTML:function(){var i="",t=this.__template,n=[],f=this.__datas.value,r=!1,u;return n=this.getBarcodeImageData(f),u=n.length,n&&$.isArray(n)&&u?(n.forEach(function(n,t){u===t+1&&(r=!0);i+=_.isObject(n)?this.getImageTemplate(n,r):r?n:n+"<br/>"}.bind(this)),t=this.getAttrTemplate(t),this.getTemplate(t,i)):n&&!$.isEmpty(n)?(t=this.getAttrTemplate(t),this.getTemplate(t,f)):"&nbsp;"}});ecount.gridV2.widget.label.colLabel=$.Class(ecount.gridV2.widget,{__template:'<div class="table-virtual table-virtual-padding-no-a" {{attr}}><div class="virtual-td text-right" style="width:38%;">{{label}}<\/div><div class="virtual-td text-right">{{value}}<\/div><\/div>',reset:function(){this.__datas={attr:{id:"",name:""},className:[],style:{},option:{},label:"",tagOption:{},value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},setOption:function(n){return $.extend(this.__datas.option,n),this},renderHTML:function(){var n=this.__template;return n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{label}}",this.__datas.label),n.replace("{{value}}",this.__datas.value)}});ecount.gridV2.widget.label.inputColLabel=$.Class(ecount.gridV2.widget,{__template:'<div class="row grid-cell-has-divider"><div class="col-xs-3"><div class="wrapper-toolbar toolbar-text">{{label}}<\/div><\/div><div class="col-xs-9"><div class="input-group"><span class="input-group-addon"> <span class="inline-divider"><\/span><\/span><input type="text" value="{{value}}" readOnly="true" {{attr}} {{className}}><\/div><\/div><\/div>',reset:function(){this.__datas={attr:{id:"",name:""},className:[],style:{},option:{},label:"",tagOption:{},value:""}},init:function(n,t,i,r,u,f){return arguments.length==0?this:(arguments.length==5&&(t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],n=0),$.isNull(t)&&(this.__datas.attr.id=t),$.isNull(i)&&(this.__datas.attr.name=i),this.setAttr(n,r),this.setClassName(n,u),this.setStyle(n,f),this)},label:function(n,t){return arguments.length==1&&(t=arguments[0],n=0),(t==undefined||t==null)&&(t=""),this.__datas.value=t,this},setOption:function(n){return $.extend(this.__datas.option,n),this},renderHTML:function(){var n=this.__template;return n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{label}}",this.__datas.label),n.replace("{{value}}",this.__datas.value)}});ecount.gridV2.widget.columnfilter=$.Class(ecount.gridV2.widget,{__template:"{{value}}<div class='btn-group btn-group-filter {{className}}' {{attr}} {{style}}>{0}<\/div>",__buttonTemplate:"<button class='btn btn-default dropdown-toggle' data-toggle='custom-dromdown'><\/button>",define:function(){},reset:function(){this.__datas={attr:{},className:[],style:{},option:{},tagOption:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},renderHTML:function(){var n=this.__template;return n=n.replace("{{className}}",this.__datas.className&&this.__datas.className.join(" ")),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n=n.replace("{{value}}",this.__datas.value),String.format(n,this.__buttonTemplate)}});ecount.gridV2.widget.defaultType=$.Class(ecount.gridV2.widget,{__template:"<span {{className}} {{attr}} {{style}}>{{value}}<\/span>",__depthTemplate:"<span style='margin-left:{{indent}}px' >{{isIE}}<\/span>",define:function(){},reset:function(){this.__datas={attr:{},className:[],style:{},option:{},tagOption:{},value:""}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},label:function(n){return(n==undefined||n==null)&&(n=""),typeof n=="number"&&(n=n.toString()),this.__datas.value=n,this},renderHTML:function(){var f="",t=this.__template,s=this.__datas.value||"",i,n;this.__datas.tagOption&&(s=ecount.gridV2.util.setProcessTag(s,this.__datas.tagOption));t=t.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className));t=t.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr));t=t.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style));f=t.replace("{{value}}",ecount.gridV2.util.replaceRegexpString(s));var r="",n=this.__depthTemplate,e=this.__datas.tagOption&&this.__datas.tagOption.replyDepth||0,a=this.__datas.tagOption&&this.__datas.tagOption.searchType||1;if(this.__datas.tagOption&&$.isNumber(e)&&e>0){var h=parseInt(this.__datas.width/15),l=h-1,c=parseInt(e/l),o=e%l,u="";if(a==2&&(c=0,o=1),ecount.constValue.isIE&&(u="&nbsp;"),o==0){for(i=0;i<c-1;i++)n=this.__depthTemplate,n=n.replace("{{indent}}",h*15),n=n.replace("{{isIE}}",u),r+=n;n=this.__depthTemplate;n=n.replace("{{indent}}",o*15);n=n.replace("{{isIE}}",u);r+=n}else{for(i=0;i<c;i++)n=this.__depthTemplate,n=n.replace("{{indent}}",h*15),n=n.replace("{{isIE}}",u),r+=n;n=this.__depthTemplate;n=n.replace("{{indent}}",o*15);n=n.replace("{{isIE}}",u);r+=n}f=r+f}return f}});ecount.gridV2.widget.form||(ecount.gridV2.widget.form={});ecount.gridV2.widget.form.dropdownmenu=$.Class(ecount.gridV2.widget,{_template:"<span {{className}} {{attr}} {{style}}>{{value}}<\/span>",reset:function(){this.__datas={attr:{},className:[],style:{},option:{},items:[]}},init:function(n,t,i,r,u){return arguments.length==0?this:($.isNull(n)&&(this.__datas[index].attr.id=n),$.isNull(t)&&(this.__datas[index].attr.name=t),this.setAttr(index,i),this.setClassName(index,r),this.setStyle(index,u),this)},renderHTML:function(){var n=this._template;return n=n.replace("{{className}}",ecount.gridV2.util.convertToClassName(this.__datas.className)),n=n.replace("{{attr}}",ecount.gridV2.util.convertToAttribute(this.__datas.attr)),n=n.replace("{{style}}",ecount.gridV2.util.convertToStyle(this.__datas.style)),n.replace("{{value}}",this.__datas.value)}});ecount.gridV2.view.util={querySelector:function(n,t){var i=document,r;return arguments.length==1?t=n||document:i=n||document,i.querySelector?i.querySelector(t):(r=$(i).find(t),r[0])},querySelectorAll:function(n,t){var i=document;return arguments.length==1?t=n||document:i=n||document,i.querySelectorAll?i.querySelectorAll(t):$(i).find(t)},createPopover:function(){},createPopoverAll:function(n,t){for(var i,r={},f=t.filter(function(n,t){return t.attributes["data-toggle"]=="popover"}),u=0,e=f.length;u<e;u++)i=f[u],r.placement=i.attributes["data-placement"]&&i.attributes["data-placement"].value,r.content=i.attributes["data-content"]&&i.attributes["data-content"].value,r.title=i.attributes["data-title"]&&i.attributes["data-title"].value,r.html=i.attributes["data-html"]&&i.attributes["data-html"].value,r.show=i.attributes["data-hoverTime"]&&i.attributes["data-hoverTime"].value,r.hide=i.attributes["data-houtTime"]&&i.attributes["data-houtTime"].value,r.trigger=r.trigger||i.attributes["data-trigger"]&&i.attributes["data-trigger"].value,r.template=i.attributes["data-template"]&&i.attributes["data-template"].value,r.multiPopover=i.attributes["data-multiPopover"]&&i.attributes["data-multiPopover"].value,r.container=n,i.attributes["data-content"]&&i.removeAttribute("data-content"),i.attributes["data-title"]&&i.removeAttribute("data-title"),i.attributes["data-template"]&&i.removeAttribute("data-template"),i.attributes["data-multiPopover"]&&i.removeAttribute("data-multiTemplate"),ecount.popover.create(i,r)},destroyPopover:function(){},destroyPopoverAll:function(){},getCalcRatio:function(n){return ecount.common.getCalcRatio(n)},getScreenPosition:function(n,t,i){return ecount.common.getScreenPosition(n,t,i)},getOffset:function(n,t){return ecount.common.getOffset(n,t)},getScreenBoundingClientRect:function(n,t,i){return ecount.common.getScreenBoundingClientRect(n,t,i)},getNodeRect:function(n){var t={left:0,top:0,width:0,height:0};do t.left+=this.getCalcWidthRatio(n.offsetLeft),t.top+=this.getCalcHeightRatio(n.offsetTop),t.width==0&&(t.width=this.getCalcWidthRatio(n.offsetWidth)),t.height==0&&(t.height=this.getCalcHeightRatio(n.offsetHeight)),n=n.offsetParent;while(n);return t.right=t.left+t.width,t.bottom=t.top+t.height,t},getCalcWidthRatio:function(n){return n*(2-ecount.common.getZoomRatio())},getCalcHeightRatio:function(n){return n*(2-ecount.common.getZoomRatio())},parents:function(n,t){for(var i=n.parentNode;i;){if(i.tagName&&i.tagName.test(t))break;i=i.parentNode}return i==document||i==document.body?null:i},closest:function(n,t){for(var i=n;i;){if(i.tagName&&i.tagName.test(t))break;i=i.parentNode}return i==document||i==document.body?null:i},getElementRectangleInnerPointByTable:function(n,t){for(var s,u,i,h,f,c,r=!1,e,o=0,l=n.children.length;o<l;o++)if(s=n.children[o],s.tagName!="COLGROUP"){for(u=this.querySelectorAll(s,"tr"),i=0,h=u.length;i<h;i++){for(f=0,c=u[i].children.length;f<c;f++)if(e=u[i].children[f],this.isRectangleInnerPointByElement(e,t)){r=!0;break}if(r)break}if(r)break}return r?e:null},isRectangleInnerPointByElement:function(n,t){var i=this.getScreenBoundingClientRect(n,!0);return i.x<=t.screenPositionX&&t.screenPositionX<=i.right&&i.y<=t.screenPositionY&&t.screenPositionY<=i.bottom?!0:!1},getScrollbarWidth:function(){var n=document.createElement("div"),i,t,r;return n.style.visibility="hidden",n.style.width="100px",document.body.appendChild(n),i=n.offsetWidth,n.style.overflow="scroll",t=document.createElement("div"),t.style.width="100%",n.appendChild(t),r=t.offsetWidth,n.parentNode.removeChild(n),i-r},getScrollbarHeight:function(){var n=document.createElement("div"),i,t,r;return n.style.visibility="hidden",n.style.height="100px",document.body.appendChild(n),i=n.offsetHeight,n.style.overflow="scroll",t=document.createElement("div"),t.style.height="100%",n.appendChild(t),r=t.offsetHeight,n.parentNode.removeChild(n),i-r},getTextareaHeight:function(n){return n=n-1,25+17*Math.min(n,9)}};ecount.gridV2.view.layout=function(){};ecount.gridV2.view.layout.prototype={getSizeByScreen:function(){},reset:function(){this.__datas={offsetSizeByScreen:null}},init:function(){this.reset()},render:function(){},destroyAll:function(){}};ecount.gridV2.view.container=function(){};ecount.gridV2.view.container.prototype={getSizeByScreen:function(){if(!this.__datas.offsetSizeByScreen){this.__datas.offsetSizeByScreen={};var t=this.optLayout.$container,n=t.offset();n.height=t.height();n.bottom=n.top+n.height;this.__datas.offsetSizeByScreen=n}return this.__datas.offsetSizeByScreen},getSize:function(){if(!this.__datas.offsetSize){this.__datas.offsetSize={};var n=this.optLayout.container;this.__datas.offsetSize.top=n.offsetTop;this.__datas.offsetSize.left=n.offsetLeft}return this.__datas.offsetSize},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__setting=n.setting;this.__renderer=this.__core.render;$.extend(this,n.mixinOption)},reset:function(){this.__datas={offsetSize:null,offsetSizeByScreen:null}},init:function(n,t){this.initGlobalValue(n,t);this.reset()},render:function(){},destroyAll:function(){}};ecount.gridV2.view.table=function(){};ecount.gridV2.view.table.prototype={querySelector:function(n,t){var i,r;return n.querySelector?r=n.querySelector(t):(i=$(n).find(t),i.length>0&&(r=i[0])),r},getTableElement:function(n,t){var i=this.dataRow.getViewDataTableMap(n,t),t;return i==undefined||i==null?null:(t=[this.constValue.tableIdPrefix+i.tableId,i.tableIndex].join("-"),this.defaultDatas.tableKeyList[t])},setTableElementWidth:function(n,t,i){var r=this.getTableElement(n,t);r.style.width=i},getColgroupElement:function(n,t){var i=this.getTableElement(n,t);return i&&i.children[0]},setColgroupElementWidth:function(n,t,i,r){var u=this.getColgroupElement(n,t);u.children[i].style.width=r},getAllTableElement:function(n){var t=this.dataRow.getViewDataTableMapAll(n),r,i,u=[];for(var f in t)r=[this.constValue.tableIdPrefix+t[f].tableId,t[f].tableIndex].join("-"),i=this.defaultDatas.tableKeyList[r],i&&u.push(i);return u},addClass:function(n,t){var i,r,u;if(n=n||this.tbodyType,i=this.getAllTableElement(n),i)for(r=0,u=i.length;r<u;r++)t.forEach(function(n,t){new RegExp(n,"g").test(i[t].className)||(i[t].className!=""&&(i[t].className+=" "),i[t].className+=n)})},removeClass:function(n,t){var i,r,u;if(n=n||this.tbodyType,i=this.getAllTableElement(n),trs)for(r=0,u=i.length;r<u;r++)t.forEach(function(n,t){i[t].className=i[t].className.replace(new RegExp("(\\s)"+n+"(?!(w|-))|^"+n+"(?!(w|-))"),"")})},changeStyle:function(n,t){var u=this.getAllTableElement(n),r,i,f;for(r in t)for(i=0,f=u.length;i<f;i++)u[i].style[r]=t[r]},focus:function(n){arguments.length==0&&(n=0)},initGlobalValue:function(n,t){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.defaultDatas=t;this.__core=n.core;this.__customEvents=this.__core.customEvents;this.__setting=n.setting;this.__renderer=this.__core.render;$.extend(this,n.mixinOption)},init:function(n,t){this.initGlobalValue(n,t)},render:function(){},destroyAll:function(){}};ecount.gridV2.view.row=function(){};ecount.gridV2.view.row.prototype={querySelector:function(n,t){var i,r;return n.querySelector?r=n.querySelector(t):(i=$(n).find(t),i.length>0&&(r=i[0])),r},getRowElement:function(n,t,i){var f=this.dataRow.getViewDataTrMap(n,t),r=[this.constValue.tableIdPrefix+f.tableId,f.tableIndex].join("-"),e,u,s,o,h;if(e=[this.constValue.formVersion.second,this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(this.optForm.version)?this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tfootType?this.defaultDatas.tableSectionIndex[r]&&this.defaultDatas.tableSectionIndex[r].tbodyIndex:this.defaultDatas.tableSectionIndex[r]&&this.defaultDatas.tableSectionIndex[r][n+"Index"]:this.defaultDatas.tableSectionIndex[r]&&this.defaultDatas.tableSectionIndex[r][n+"Index"],u=this.defaultDatas.tableKeyList[r],s=[],typeof i!="number"||!u)for(o=0,h=f.rowInfo.trIdx.length;o<h;o++)s.push(u.children[e]&&u.children[e].children[f.rowInfo.trIdx[o]]);else return u.children[e]&&u.children[e].children[f.rowInfo.trIdx[i]];return s},getRowElementAll:function(n,t,i){for(var e=this,r=[],s=this.dataRow.getViewDataTrMapAll(n),o=Object.keys(s),u,f=0;f<o.length;f++)u=o[f],i?r=r.concat(e.getRowElement(n,u)):r.push(e.getRowElement(n,u,t));return r},setRowElementHeight:function(n,t,i,r){var u=this.getRowElement(n,t,i);u.style.height=r;u.classList.remove("height-auto")},setRowElementHeightAll:function(n,t,i,r){for(var f=this.getRowElementAll(n,t,r),u=0;u<f.length;u++)f[u].style.height=i,f[u].classList.remove("height-auto")},getSectionElement:function(n,t){var r,i,u,f;return r=t?this.dataRow.getViewDataTrMap(n,t):{tableId:this.constValue.defaultTableId,tableIndex:this.constValue.defaultTableIndex},i=[this.constValue.tableIdPrefix+r.tableId,r.tableIndex].join("-"),u=this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tfootType?this.defaultDatas.tableSectionIndex[i]&&this.defaultDatas.tableSectionIndex[i].tbodyIndex:this.defaultDatas.tableSectionIndex[i]&&this.defaultDatas.tableSectionIndex[i][n+"Index"],f=this.defaultDatas.tableKeyList[i],f.children[u]},add:function(n,t,i,r){var w,h,o,b,k,l;r=r||{};var a=r.addDirection||"down",g=r.moveScroll==undefined||r.moveScroll==null?!0:r.moveScroll,s,c,nt=this.dataRow.getAll(n),tt=this.dataColumn.getAll(n,this.constValue.returnType.single,!1,"system",{isNotIndexSort:!0}),d=this.dataColumn.getAll(n,this.constValue.returnType.multi),v=this.dataRow.getByIndex(n,i),y=this.getSectionElement(n,v&&v[this.constValue.keyColumnPropertyName]),u=r.targetRows,f,it=this.dataRow.getViewDataRenderingTableMapAll(n),e,p=!0;switch(a){case"down":s=i+1;c=i+1+t;f=u&&u[0];break;case"up":s=i;c=i+t;f=u&&u[0];break;case"last":s=i;c=i+t;f=u&&u[0]}for(w=this.__renderer.table.renderAddRows(n,s,c),h=$(w.resultHTML),o=0,b=h.length;o<b;o++)f?y.insertBefore(h[o],f):y.appendChild(h[o]),this.viewSelector&&this.viewSelector.attachElements(h[o]);p&&this.__setting.getCheckBoxUse()&&!this.__setting.getCheckBoxOriginalStyle()&&(r.lastRowId?(k=this.viewCell.getCellElement(n,this.constValue.checkBoxPropertyName,r.lastRowId).cell,l=this.querySelector(k,"div"),e=l&&l.innerText,e&&(e=parseInt(e,10)+(["last"].contains(a)||!f?1:0))):e=1);p&&this.__setting.getCheckBoxUse()&&!this.__setting.getCheckBoxOriginalStyle()&&this.remakeCheckboxRowItemIndex(n,s*d.length,null,{checkboxStartNumber:e});this.__core.view.bindWidgetElement(n);this.__core.view.beginPopoverTransaction();this.__core.moveScroll=!0},remakeCheckboxRowItemIndex:function(n,t,i,r){var s,c,f,e,u,l,a,o,v,h;if(r=r||{},s=typeof r.checkboxStartNumber=="number"?r.checkboxStartNumber:1,c=this.dataColumn.getAll(n,this.constValue.returnType.multi),this.__setting.getCheckBoxUse()&&!this.__setting.getCheckBoxOriginalStyle()){f=this.dataRow.getViewDataTableMapAll(n);for(e in f)if(f.hasOwnProperty(e))for(u=[this.constValue.tableIdPrefix+f[e].tableId,f[e].tableIndex].join("-"),l=this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tfootType?this.defaultDatas.tableSectionIndex[u]&&this.defaultDatas.tableSectionIndex[u].tbodyIndex:this.defaultDatas.tableSectionIndex[u]&&this.defaultDatas.tableSectionIndex[u][n+"Index"],a=this.defaultDatas.tableKeyList[u],trs=a.children[l].children,i=typeof i=="number"?i:trs.length,o=t,v=i;o<v;o+=c.length)h=this.querySelector(trs[o],"div.checkbox-numbered"),h&&(h.innerText=s),s+=1}},move:function(n,t,i,r){var f=this.getRowElement(n,i),e=this.getRowElement(n,r),u;t=="down"?(u=e[f.length-1],$(u).after($(f))):(u=e[0],$(u).before($(f)));var o=this.dataRow.getById(n,i),u=this.dataRow.getById(n,r),s=o[this.constValue.rowCountColumnPropertyName]-1,h=u[this.constValue.rowCountColumnPropertyName]-1;this.__core.data.row.moveTableMap(n,s,h)},moveBulkRows:function(n,t,i,r){var e=this.getRowElement(n,r),c=t=="down"?e[e.length-1]:e[0],l=this.dataRow.getById(n,i),u=[],o,s,f,h;if(l)for(o=this.getRowElement(n,i),o&&(u=u.concat(o)),s=this.dataTree.getChildRowList(i,{isRetrieveKey:!0}),f=0;f<s.length;f++)h=this.getRowElement(n,s[f]),h&&(u=u.concat(h));t=="down"?$(c).after($(u)):$(c).before($(u))},insert:function(n,t,i,r,u,f){var o=[this.theadType,this.tbodyType,this.tfootType],a,tt,it=0,k={},e,st,p,d,at,ot,g,pt,wt,bt,s,y,l,kt,h,dt,gt,b;this.constValue.columnType.multi==this.optCommon.columnType&&(o=[n]);switch(u){case"down":a=r+1;tt=a+f;break;case"up":a=r;tt=a+f}for(e=0,st=o.length;e<st;e++)if(p=this.dataRow.getAll(o[e]),p.length!=0){var c=0,ht=0,ct=p.length,lt=0;for(this.optCommon.columnType==this.constValue.columnType.multi&&(d=this.dataRow.getSectionRowIndex(o[e],t),at=this.dataColumn.getAll(this.tbodyType,this.constValue.returnType.multi),c=d.startRowIndex,ct=d.endRowCount,it=d.startRowIndex,lt=it*at.length);c<ct;c++,ht++){var rt=p[c],ut=this.dataColumn.getAll(t||o[e],this.constValue.returnType.multi),ni=ut.length;k[o[e]]||(k[o[e]]={$trs:null});var vt=rt[this.constValue.keyColumnPropertyName],ft=this.getSectionElement(o[e],p[0][this.constValue.keyColumnPropertyName]),v=this.dataRow.getViewDataTrMap(o[e],vt),yt=ft.children,et=lt+ht*ni+a;if(o[e]==this.tfootType&&this.__setting.getFormIsAutoMergeSpecialrow()&&(this.optEditable.specialRowMerge&&this.optEditable.specialRowMerge.length>0&&this.dataRow.addTotalMergeSet(this.theadType,t,[i],this.optEditable.specialRowMerge[c][this.constValue.rowVariableNames.mergeSet]),this.optEditable.specialRowMerge&&c<this.optEditable.specialRowMerge.length)){for(ot=this.optEditable.specialRowMerge[c][this.constValue.rowVariableNames.mergeSet],g=0,pt=ot.length;g<pt;g++)rt[this.constValue.rowVariableNames.mergeSet].push(ot[g]);ecount.gridV2.data.util.singleArraySort(rt[this.constValue.rowVariableNames.mergeSet])}if(this.optCommon.columnType==this.constValue.columnType.multi)if(t===this.tfootType)for(wt=this.dataColumn.getAll(this.tbodyType,this.constValue.returnType.multi),bt=wt.length,s=0,y=v.rowInfo.trIdx.length;s<y;s++)v.rowInfo.trIdx[s]=bt+s;else for(s=0,y=v.rowInfo.trIdx.length;s<y;s++)v.rowInfo.trIdx[s]=s;else for(s=0,y=v.rowInfo.trIdx.length;s<y;s++)v.rowInfo.trIdx[s]+=c;var ti=this.dataRow.view.renderAddGroupRows(o[e],vt,a,tt,this.constValue.renderMode.insertRow,{etcInfo:{madeTbodyRowCount:it,madeTfootRowCount:0}}),nt=$(ti.resultHTML),w=this.dataRow.getViewDataRenderingTableMap(o[e],et);for(l=0,kt=nt.length;l<kt;l++)for(yt[et+l]?ft.insertBefore(nt[l],yt[et+l]):ft.appendChild(nt[l]),h=0,dt=w.length;h<dt;)["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN"].contains(w[h].type)?(gt=w[h].trIdx%ut.length,b=this.viewCell.getCellOriginalElement(o[e],ut[gt][w[h].columnIdx].id,w[h].rowId),b&&b.cell?(b.cell.rowSpan+=f,h+=b.cell.colSpan||1):h+=1):h+=1;k[o[e]].$trs=nt}}return this.__core.view.beginPopoverTransaction(),k},remove:function(n,t){var a=this.dataRow.getById(n,t),i,e,o,s,h,u,v,y,c,r,f,p,l;if(this.__setting.getCheckBoxUse()&&!this.__setting.getCheckBoxOriginalStyle()&&(i=this.getRowElement(n,a[this.constValue.keyColumnPropertyName]),s=this.querySelector(i[0],"div.checkbox-numbered"),s))for(e=parseInt(s.innerText,10),h=this.dataRow.getAll(n),r=a[this.constValue.rowCountColumnPropertyName],f=h.length;r<f;r++)i=this.getRowElement(n,h[r][this.constValue.keyColumnPropertyName]),o=this.querySelector(i[0],"div.checkbox-numbered"),o&&(o.innerText=e),e+=1;for(i=this.getRowElement(n,t),u=0,v=i.length;u<v;u++){for(y=i[u],c=y.children,r=0,f=c.length;r<f;r++)p=c[r],l=p.getAttribute("data-columnid"),this.__core.view.destroyTooltip(n,l,t),this.__core.view.destroyPopover(n,l,t);i[u].parentNode.removeChild(i[u])}},removeAt:function(n,t,i,r){var e=[this.tfootType,this.tbodyType,this.theadType],g,f,ht,tt,p,k,it,rt,c,et,u,s,nt,at,a,l,ot,st;for(this.constValue.columnType.multi==this.optCommon.columnType&&(e=[n]),g=[],f=0,ht=e.length;f<ht;f++){tt=this.dataRow.getAll(e[f]);p=this.optCommon.columnType==this.constValue.columnType.multi?t==this.tfootType?this.dataColumn.getAll(t,this.constValue.returnType.multi):this.dataColumn.getAll(e[f],this.constValue.returnType.multi):this.dataColumn.getAll(e[f],this.constValue.returnType.multi);k=tt.length-1;it=-1;this.optCommon.columnType==this.constValue.columnType.multi&&(rt=this.dataRow.getSectionRowIndex(n,t),k=rt.endRowIndex,it=rt.startRowIndex-1);for(var ut=p[0].length,bt=ut-1,v=[],ft=[];k>it;k--){var vt=tt[k],h=vt[this.constValue.keyColumnPropertyName],yt=this.getSectionElement(e[f],h),pt=this.dataRow.getViewDataTrMap(e[f],h),ct=this.dataRow.getViewDataRenderingTableMapAll(e[f]),wt=this.getRowElement(e[f],h);for(c=r.bottom;c>=r.top;c--){for(et=ct[pt.rowInfo.trIdx[c]],l=et.length-1;l>-1;l--)if(u=et[l],u.type=="MERGE"){var lt=u[this.constValue.rowVariableNames.mergeStartIndex],o=Math.floor(lt/ut),w=u[this.constValue.rowVariableNames.rowspanCount]||1,y=w-1;if(i.top<=c&&i.bottom>=c){if(i.top==c&&i.bottom<c+y){v[u.trIdx]||(v[u.trIdx]=[]);var b=this.dataColumn.getNextRealColumn(t||e[f],p[o+(i.bottom-i.top+1)][l].id),s=this.viewCell.getCellElement(e[f],u.columnId,h),d=b&&b.column&&this.viewCell.getCellOriginalElement(e[f],b.column.id,h)||{cell:null,map:{}},a=this.getRowElement(e[f],h,o+(i.bottom-i.top+1));v[u.trIdx][u.columnIdx]||(s.cell.rowSpan-=i.bottom-o+1);s.cell!=d.cell&&(d.cell?a.insertBefore(s.cell,d.cell):a.appendChild(s.cell),this.__core.view.destroyTooltip(e[f],u.columnId,h),this.__core.view.destroyPopover(e[f],u.columnId,h),g.push({sectionType:e[f],columnId:p[i.bottom+1][l].id,rowId:h}))}else if(i.bottom<c+y){var b=this.dataColumn.getNextRealColumn(t||e[f],p[o+(i.bottom-i.top)][l].id),s=this.viewCell.getCellElement(e[f],u.columnId,h),d=b&&b.column&&this.viewCell.getCellOriginalElement(e[f],b.column.id,h)||{cell:null,map:{}},a=this.getRowElement(e[f],h,o+(i.bottom-i.top));s.cell.rowSpan-=i.bottom-o+1;d.cell?a.insertBefore(s.cell,d.cell):a.appendChild(s.cell);this.__core.view.destroyTooltip(e[f],u.columnId,h);this.__core.view.destroyPopover(e[f],u.columnId,h);g.push({sectionType:e[f],columnId:p[i.bottom+1][l].id,rowId:h})}}else i.top>o&&i.bottom<o+y&&(v[u.trIdx][u.columnIdx]||(s=this.viewCell.getCellElement(e[f],u.columnId,h),s.cell.rowSpan-(i.bottom-i.top+1)>0&&(s.cell.rowSpan-=i.bottom-i.top+1)))}else if(["ROWSPAN","ROWSPAN_AND_COLSPAN"].contains(u.type)&&i.top<=c&&i.bottom>=c){if(u=ct[u.trIdx][u.columnIdx],v[u.trIdx]||(v[u.trIdx]=[]),v[u.trIdx][u.columnIdx])continue;v[u.trIdx][u.columnIdx]=1;var lt=u[this.constValue.rowVariableNames.mergeStartIndex],o=Math.floor(lt/ut),w=u[this.constValue.rowVariableNames.rowspanCount]||1,y=w-1,s=this.viewCell.getCellElement(e[f],u.columnId,h);i.top>o&&i.top<o+y&&i.bottom>=o+y?s.cell.rowSpan-o+w-i.top>0&&(s.cell.rowSpan-=o+w-i.top):i.top>o&&i.bottom==o+y?s.cell.rowSpan-(i.bottom-i.top+1)>0&&(s.cell.rowSpan-=i.bottom-i.top+1):i.top>o&&i.bottom<o+y?s.cell.rowSpan-(i.bottom-i.top+1)>0&&(s.cell.rowSpan-=i.bottom-i.top+1):i.top>o&&i.bottom>o+y&&s.cell.rowSpan-(o+w-i.top)>0&&(s.cell.rowSpan-=o+w-i.top)}i.top<=c&&i.bottom>=c&&ft.push(wt[c])}}for(nt=0,at=ft.length;nt<at;nt++){for(a=ft[nt],l=a.children.length-1;l>-1;l--)ot=a.children[l].getAttribute("data-columnid"),st=a.children[l].getAttribute("data-key"),this.__core.view.destroyTooltip(e[f],ot,st),this.__core.view.destroyPopover(e[f],ot,st);yt.removeChild(a)}}return g},refresh:function(n,t,i,r){var f,s,e,u,h;r=r||{};r.etcInfo||(r.etcInfo={});var o=0,c=0;for(this.optCommon.columnType==this.constValue.columnType.multi&&(f=this.dataRow.getSectionRowIndex(n,t),s=this.dataColumn.getAll(this.tbodyType,this.constValue.returnType.multi),rowIdx=f.startRowIndex,rowLen=f.endRowCount,o=f.startRowIndex,c=o*s.length),r.etcInfo.madeTbodyRowCount=o,r.etcInfo.madeTfootRowCount=0,e=this.dataRow.view.refreshRow(n,i,r),u=0,h=e.length;u<h;u++)this.optCommon.columnType==this.constValue.columnType.multi?(this.removeAllClassByGroupRowIndex(n,i,u),this.addClassByGroupRowIndex(n,i,u,e[u].className)):this.optCommon.columnType==this.constValue.columnType.single&&(this.removeAllClassByGroupRowIndex(n,i,u),this.addClassByGroupRowIndex(n,i,u,e[u].className))},setValue:function(){},getSize:function(){},getHeights:function(n,t,i){var u={},f=[],v={},e,y,a,h,p,c,k;for(n?f=typeof n=="object"&&n.constructor==Array?n:[n]:this.optCommon.columnType==this.constValue.columnType.multi?f=[this.theadType,this.tbodyType,this.tfootType]:this.optCommon.columnType==this.constValue.columnType.single&&this.optResize.use&&this.optResize.type==this.constValue.resizeType.separate&&(f=[this.theadType,this.tbodyType,this.tfootType]),e=0,y=f.length;e<y;e++)for(a=this.dataRow.getAll(f[e]),h=0,p=a.length;h<p;h++){var w=a[h],r=w[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate?this.tfootType:f[e],b=w[this.constValue.keyColumnPropertyName],d=this.dataRow.getViewDataTrMap(f[e],b);if(!v[r]){for(t?u[r]||(u[r]={}):u[r]||(u[r]=[]),c=0,k=d.rowInfo.trIdx.length;c<k;c++){var o=this.getRowElement(f[e],b,c),g=$(o),nt=o&&o.getAttribute("data-rowtype")||this.constValue.sectionSeparateText["1"],l=this.constValue.sectionSeparateValue[nt],s=o&&o.style&&o.style.height||0;i&&g.hasClass("hide")||(s||(s=$(o).height()),s=parseInt(s,10),t?t==l&&(u[r][l]||(u[r][l]=[]),u[r][l].push(s)):u[r].push(s))}v[r]=!0}}return u},getTrHeightsBySection:function(n,t,i,r){var s,w,y,l,b,a,g;r=r||{offsetHeight:!1};var f={},e=[],p={};for(t?e=typeof t=="object"&&t.constructor==Array?t:[t]:this.optCommon.columnType==this.constValue.columnType.multi?e=[this.theadType,this.tbodyType,this.tfootType]:this.optCommon.columnType==this.constValue.columnType.single&&this.optResize.use&&this.optResize.type==this.constValue.resizeType.separate&&(e=[this.theadType,this.tbodyType,this.tfootType]),s=0,w=e.length;s<w;s++)for(y=this.dataRow.getAll(e[s]),l=0,b=y.length;l<b;l++){var k=y[l],u=k[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate?this.tfootType:e[s],d=k[this.constValue.keyColumnPropertyName],nt=this.dataRow.getViewDataTrMap(e[s],d);if(!p[u]){for(f[u]||(f[u]={}),a=0,g=nt.rowInfo.trIdx.length;a<g;a++){var c=this.getRowElement(e[s],d,a),v=$(c),tt=c&&c.getAttribute("data-rowtype")||this.constValue.sectionSeparateText["1"],h=this.constValue.sectionSeparateValue[tt],o=0;switch(n){case"visible":if(!v.is(":visible"))continue;break;case"invisible":if(v.is(":visible"))continue}r.offsetHeight?o=v.height():(o=c.style&&c.style.height,o||(o=v.height()));o=parseInt(o,10);i?i==h&&(f[u][h]||(f[u][h]=[]),f[u][h].push(o)):(f[u][h]||(f[u][h]=[]),f[u][h].push(o))}p[u]=!0}}return f},getTrOffsetHeightBySection:function(n,t,i,r){return r=_.extend({offsetHeight:!0},r||{}),this.getTrHeightsBySection(n,t,i,r)},getSizeByContainer:function(n,t,i){var r={top:0,left:0,width:0,height:0,bottom:0},f=this.getRowElement(n,t),u=f[i];return u&&(r.top=u.offsetTop,r.left=u.offsetLeft,r.width=u.offsetWidth,r.height=u.offsetHeight,r.bottom=r.top+r.height),r},getSizeByScreen:function(n,t,i,r){r=r||{};var u=typeof r.isCalcZoomRatio=="boolean"?r.isCalcZoomRatio:!1,f=this.getRowElement(n,t,i);return ecount.gridV2.view.util.getScreenBoundingClientRect(f,u)},changeTextareaHeight:function(n,t,i,r){r=r||{};var h=178,c=this.viewCell.getCellElement(n,t,i),e=this.dataColumn.getById(n,t),f=this.getRowElement(n,i,e.lineNo-1),a=this.dataRow.getTextareaRow(n,i),o={columnIds:[]},s=0,u=0,l=function(n,t){f&&(f.style.height=t+7+"px",this.view.editLayer&&this.view.editLayer.setContainerHeight(t,!0));n.forEach(function(n){var r=$(f).children('[data-columnid="'+n+'"]'),i=r.children("span").not(".hide").get(0);i&&(i.style.height=Math.min(t,h)+"px")})}.bind(this);e&&(o=a[e.lineNo-1]||[],s=this.optRow[n].trHeight[e.lineNo-1]||0);u=Math.max(ecount.gridV2.view.util.getTextareaHeight(r.rows),s-7);o.columnIds.every(function(f){var h=this.viewCell.getCellElement(n,f,i),e,o;return h.cell&&(e=$(h.cell).children("span").get(0),o=Math.min(e&&e.children.length||0,9),t!==f&&r.rows<o+1)?(u=Math.max(ecount.gridV2.view.util.getTextareaHeight(o+1),s-7),!1):!0}.bind(this));u=Math.max(u,ecount.gridV2.view.util.getTextareaHeight(2));l(o.columnIds,u);f.offsetHeight>u+7&&(u=f.offsetHeight-7,l(o.columnIds,u));this.view.editLayer.getInstance()&&(u=Math.min(u,h),this.view.editLayer.setContainerHeight(u),$(c.cell).find("#edit textarea").css("height",u),$(c.cell).find("#view span").css("height",u))},addClass:function(n,t,i){var u=this.getRowElement(n,t),r,f;if(u)for(r=0,f=u.length;r<f;r++)i.forEach(function(n){new RegExp(n,"g").test(u[r].className)||(u[r].className!=""&&(u[r].className+=" "),u[r].className+=n)})},addClassByGroupRowIndex:function(n,t,i,r){var u=this.getRowElement(n,t,i);u&&r.forEach(function(n){new RegExp(n,"g").test(u.className)||(u.className!=""&&(u.className+=" "),u.className+=n)})},removeClass:function(n,t,i){var u=this.getRowElement(n,t),r,f;if(u)for(r=0,f=u.length;r<f;r++)i.forEach(function(n){u[r].className=u[r].className.replace(new RegExp("(\\s)"+n+"(?!(w|-))|^"+n+"(?!(w|-))"),"")})},removeAllClass:function(n,t){var r=this.getRowElement(n,t),i,u;if(r)for(i=0,u=r.length;i<u;i++)r[i].className=""},removeAllClassByGroupRowIndex:function(n,t,i){var r=this.getRowElement(n,t,i);r&&(r.className="")},hasClass:function(n,t,i){var r=this.getRowElement(n,t);return r?r[0].className.test(new RegExp("(\\s)"+i+"(?!(w|-))|^"+i+"(?!(w|-))")):!1},focus:function(n,t){var i=this.getRowElement(n,t);i&&i[0].focus()},initGlobalValue:function(n,t){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.defaultDatas=t;this.__datas={offsetSizeByScreen:{},offsetSizeByContainer:{}};this.__core=n.core;this.__setting=n.setting;this.__renderer=n.core.render;this.__events=this.__setting.events;$.extend(this,n.mixinOption)},init:function(n,t){this.initGlobalValue(n,t)},render:function(){},destroyAll:function(){}};ecount.gridV2.view.column=function(){};ecount.gridV2.view.column.prototype={add:function(){},addAt:function(){},remove:function(){},removeAt:function(){},initGlobalValue:function(n,t){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.defaultDatas=t;this.__datas={};this.__core=n.core;this.__setting=n.setting;this.__renderer=n.core.render;this.__events=this.__setting.events;$.extend(this,n.mixinOption)},init:function(n,t){this.initGlobalValue(n,t)},render:function(){},destroyAll:function(){}};ecount.gridV2.view.cell=$.Class(null,{querySelector:function(n,t){var i,r;return n.querySelector?r=n.querySelector(t):(i=$(n).find(t),i.length>0&&(r=i[0])),r},getCellElementImage:function(n,t,i){var r=this.dataRow.getViewDataCellMap(n,t,i),u;return r.cellInfo&&r.cellInfo.adjustmentValue!=1&&(u=[this.constValue.tableIdPrefix+r.tableId,r.tableIndex].join("-"),table=this.defaultDatas.tableKeyList[u],li=table.children[r.rowInfo.trIdx[r.cellInfo.columnRowIdx]],cell=li&&li.children[r.cellInfo.columnIdx+r.cellInfo.adjustmentValue]),{map:r,cell:cell}},setHeaderCheckedByMultiTable:function(n,t,i,r,u){var o=this.dataRow.getViewDataCellMap(n,t,i),h=Object.keys(this.defaultDatas.tableKeyList),v=this.dataCheckbox.isDisabledCheckbox(n,t,i),e=u&&u.copyTheadInfo||null,f,c,l;if(o.cellInfo&&o.cellInfo.adjustmentValue!=1)for(f=0;f<h.length;f++){if(c=this.defaultDatas.tableSectionIndex[h[f]]&&this.defaultDatas.tableSectionIndex[h[f]][n+"Index"],l=this.defaultDatas.tableKeyList[h[f]],e&&_.isPlainObject(e.checkedInfo))r=e.checkedInfo[f+1];else if(e&&e.currentPage-1===f)r=e.checked;else if(e&&e.currentPage-1!==f)continue;var a=l.children[c]&&l.children[c].children[o.rowInfo.trIdx[o.cellInfo.columnRowIdx]],y=a&&a.children[o.cellInfo.columnIdx+o.cellInfo.adjustmentValue],s=this.querySelector(y,this.constValue.controlTag[o.cellInfo.controlType]);s.setAttribute("checked",r);s.checked=r;v?(s.disabled="disabled",s.setAttribute("disabled","disabled")):(s.getAttribute("disabled")=="disabled"||s.getAttribute("disabled")=="true")&&s.removeAttribute("disabled")}},getCellOriginalElement:function(n,t,i){var a=this.dataRow.getById(n,i),u,s,f,h=0,c,r,e,l,o;return a[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate?(u=this.dataColumn.getAll(this.tfootType,this.constValue.returnType.multi),s=this.dataColumn.getAll(n,this.constValue.returnType.multi),f=this.dataRow.getSectionRowIndex(n),h=(f.endRowCount-f.startRowIndex)*s.length):u=this.dataColumn.getAll(n,this.constValue.returnType.multi),c=u.length,r=this.dataRow.getViewDataCellMap(n,t,i),r.cellInfo.adjustmentValue==1?(l=this.dataRow.getViewDataRenderingTableMap(n,r.rowInfo.trIdx[r.cellInfo.columnRowIdx]),o=l[r.cellInfo.columnIdx],e=this.getCellElement(n,u[(o.trIdx-h)%c][o.columnIdx].id,i)):e=this.getCellElement(n,t,i),e},getNextCellElement:function(n,t,i){var o=this.dataRow.getById(n,i),f,r,u,e;f=o[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate?this.dataColumn.getAll(this.tfootType,this.constValue.returnType.multi):this.dataColumn.getAll(n,this.constValue.returnType.multi);var u=this.dataRow.getViewDataCellMap(n,t,i),s=f[0].length,h=this.dataRow.getViewDataTrMap(n,i),c=this.dataRow.getViewDataRenderingTableMapAll(n);for(r=u.cellInfo.columnIdx;r<s;){if(u=this.dataRow.getViewDataCellMap(n,t,i),e=c[h.rowInfo.trIdx[u.cellInfo.columnRowIdx]],["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(e[r].type)){r+=1;continue}return this.getCellElement(n,f[u.cellInfo.columnRowIdx][r].id,i)}return null},getPrevCellElement:function(){},getCellWidgetInstance:function(n,t,i){var r=this.__renderer.table.getTableMapCell(n,t,i);return this.constValue.nativeControlInWidget[r.cellInfo.editControlType]?this.__core.view.defaultDatas.widgetInstances[r.cellInfo.editControlId]:null},getWidgetInstance:function(n,t){return this.__core.view.defaultDatas.widgetInstances[t]},add:function(n,t,i,r){var v={},nt=[this.theadType,this.tbodyType,this.tfootType],u,y,b,it,c,ft,o,st,e;t=="right"?u=i.left+r.addCount:t=="left"&&(u=i.left);var tt=this.dataColumn.addCol(this.theadType,u,u+1),ht=$(tt.resultHTML),g=ht[0].children,w=this.viewTable.getColgroupElement(this.theadType);for(y=g.length-1;y>-1;y--)w.children[u]?w.insertBefore(g[y],w.children[u]):w.appendChild(g[y]);for(b=0,it=nt.length;b<it;b++){var f=nt[b],rt=0,ut=0,p=this.dataRow.getAll(f);for(v[f]||(v[f]={cells:[]}),c=0,ft=p.length;c<ft;c++){var et=p[c],k=et[this.constValue.keyColumnPropertyName],ot=et[this.constValue.rowVariableNames.rowType],ct=ot==this.constValue.rowType.separate?this.tfootType:null,lt=this.viewRow.getSectionElement(f,p[c][this.constValue.keyColumnPropertyName]),at=this.dataRow.getViewDataTrMap(f,p[c][this.constValue.keyColumnPropertyName]),yt=lt.children,a=this.dataColumn.getAll(ct||f,this.constValue.returnType.multi),tt=this.dataRow.renderAddColumns(f,p[c][this.constValue.keyColumnPropertyName],0,a.length,u,u+1,{etcInfo:{madeTbodyRowCount:rt,madeTfootRowCount:ut},direction:t}),vt=$(tt.resultHTML);for(o=0,st=at.rowInfo.trIdx.length;o<st;){var d=this.viewRow.getRowElement(f,k,o),l=this.dataRow.getViewDataRenderingTableMap(f,o),h=null,s=vt[o];if(s.children.length==0&&["ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","COLSPAN"].contains(l[u]&&l[u].type))h=this.getCellElement(f,a[l[u].trIdx%a.length][l[u].columnIdx].id,k).cell,h.colSpan+=i.right-i.left+1,o+=h.rowSpan;else if(["ROWSPAN"].contains(l[u]&&l[u].type)){for(cellInfo=this.getNextCellElement(f,a[o][l[i.right].columnIdx].id,k),h=cellInfo&&cellInfo.cell,e=s.children.length-1;e>-1;e--)this.__core.view.bindEventMouseenterDropdownmenu(s.children[e]),v[f].cells.push(s.children[e]),h?d.insertBefore(s.children[e],h):d.appendChild(s.children[e]);o+=1}else{for(cellInfo=a[o][u+1]&&this.getNextCellElement(f,a[o][u+1].id,k),h=cellInfo&&cellInfo.cell,e=s.children.length-1;e>-1;e--)this.__core.view.bindEventMouseenterDropdownmenu(s.children[e]),v[f].cells.push(s.children[e]),h?d.insertBefore(s.children[e],h):d.appendChild(s.children[e]);o+=1}}this.optCommon.columnType==this.constValue.columnType.multi&&f==this.tbodyType&&(ot==this.constValue.rowType.separate?ut+=1:rt+=1)}}return v},addCell:function(n,t,i,r){var u;if(r=r||{},u=r.map||{},u.cellInfo){var s=this.dataRow.getIndexById(n,i),o=this.viewRow.getSectionElement(n,i),f=o&&o.children[s],h=f&&f.children[u.cellInfo.columnIdx],c=this.dataColumn.getAll(n,this.constValue.returnType.multi),e=this.__renderer.table.renderCell(n,t,i,{rowCurrentRowIndex:u.rowInfo.dataIdx*c.length+u.cellInfo.columnRowIdx,columnCurrentColumnIndex:u.cellInfo.columnIdx,groupRowIndex:u.cellInfo.columnRowIdx,modeView:this.constValue.dataType.modeView,isSetCell:!0}),l=$.template(ecount.gridV2.render.template.cell,{cell:e.cellData}),a=$(l);f&&f.insertBefore(a[0],h);this.__core.view.bindWidgetElement(n);this.__core.view.beginPopoverTransaction();this.__core.moveScroll=!0;e&&e.cellData&&this.__renderer.table.renderCellCompleted()}},remove:function(n,t,i){for(var r,tt,b,y,e,f,ft,a,h,d,p,v,et,g=[],u=[this.tfootType,this.tbodyType,this.theadType],c=[],nt=this.viewTable.getColgroupElement(this.theadType,0),w=t.right;w>=t.left;w--)nt.removeChild(nt.children[w]);for(r=0,tt=u.length;r<tt;r++)for(b=this.dataRow.getAll(u[r]),y=b.length-1;y>-1;y--){var it=b[y],ot=it[this.constValue.rowVariableNames.rowType],rt=null;this.optCommon.columnType==this.constValue.columnType.multi&&(rt=ot==this.constValue.rowType.separate?this.tfootType:null);var o=it[this.constValue.keyColumnPropertyName],st=this.dataRow.getViewDataRenderingTableMapAll(u[r]),ut=this.dataRow.getViewDataTrMap(u[r],o),s=this.dataColumn.getAll(rt||u[r],this.constValue.returnType.multi),ht=s[0].length;for(e=ut.rowInfo.trIdx.length-1;e>-1;e--)for(f=i.right;f>=i.left;)if(ft=st[ut.rowInfo.trIdx[e]],a=ft[f],"NORMAL"==a.type&&t.left<=f&&t.right>=f)this.__core.view.destroyTooltip(u[r],s[e][f].id,o),this.__core.view.destroyPopover(u[r],s[e][f].id,o),h=this.getCellElement(u[r],s[e][f].id,o),c.contains(h.cell)||c.push(h.cell),f-=1;else if("MERGE"==a.type){var ct=a[this.constValue.rowVariableNames.mergeStartIndex],l=ct%ht,at=a[this.constValue.rowVariableNames.rowspanCount]||1,k=a[this.constValue.rowVariableNames.colspanCount]||1,lt=k-1,h=this.getCellElement(u[r],s[e][f].id,o);i.left<=l&&i.right>=l&&(d=Math.min(t.right,l+lt)-Math.max(t.left,l)+1,t.left<=l&&t.right>=l&&t.right<l+k&&(p=s[e][t.right+1],this.__core.view.destroyTooltip(u[r],s[e][t.right].id,o),this.__core.view.destroyPopover(u[r],s[e][t.right].id,o),p&&h.cell.setAttribute("data-columnid",p.id),g.push({sectionType:u[r],columnId:p.id,rowId:o})),h.cell.colSpan-d==0?(this.__core.view.destroyTooltip(u[r],s[e][f].id,o),this.__core.view.destroyPopover(u[r],s[e][f].id,o),c.contains(h.cell)||c.push(h.cell)):h.cell.colSpan-=d);f-=k}else f-=1}for(v=0,et=c.length;v<et;v++)c[v].parentNode.removeChild(c[v]);return g},merge:function(n,t,i,r){var s=_.cloneDeep(r),c={},w=[this.tfootType,this.tbodyType,this.theadType],l,g,h,k,d,f,o,e,y,p;for(this.optCommon.columnType==this.constValue.columnType.multi&&(w=[n]),l=0,g=w.length;l<g;l++){var u=w[l],b=this.dataColumn.getAll(t||u,this.constValue.returnType.multi),nt=this.dataRow.getAll(u);for((this.optCommon.columnType==this.constValue.columnType.single&&this.theadType==u||this.optCommon.columnType==this.constValue.columnType.multi)&&(c[u]||(c[u]={cells:[]})),h=0,k=nt.length,this.optCommon.columnType==this.constValue.columnType.multi&&(d=this.dataRow.getSectionRowIndex(u,t),h=d.startRowIndex,k=d.endRowCount),_.extend(s,this.dataRow.getHorizontalExpansionOfSelectionBasedOnMergeInformation(n,t,r));h<k;h++){var tt=nt[h],a=tt[this.constValue.keyColumnPropertyName],v=this.viewRow.getRowElement(u,a);for(f=i.bottom;f>=i.top;f--)for(o=s.right;o>=s.left;o--)e=this.getCellElement(u,b[f][o].id,a),e.map&&e.map.cellInfo&&e.map.cellInfo.adjustmentValue!=1&&(f==i.top&&o===s.left?(e.cell.colSpan=s.right-s.left+1,e.cell.rowSpan=i.bottom-i.top+1,y=e.cell.parentNode,p=y.offsetHeight,y.style.height=p+"px",y.classList.remove("height-auto"),(this.optCommon.columnType==this.constValue.columnType.single&&this.theadType==u||this.optCommon.columnType==this.constValue.columnType.multi)&&c[u].cells.push(e.cell)):(this.constValue.columnType.multi==this.optCommon.columnType&&this.tfootType==u||(this.__core.view.destroyTooltip(u,b[f][o].id,a),this.__core.view.destroyPopover(u,b[f][o].id,a)),p=v[f].offsetHeight,v[f].style.height=p+"px",v[f].classList.remove("height-auto"),v[f].removeChild(e.cell)))}}return c},divide:function(n,t,i){var u=[this.tfootType,this.tbodyType,this.theadType],r,g,b,vt,e,ft,et,f,ot,v,y,p,ht,s,w;for(this.optCommon.columnType==this.constValue.columnType.multi&&(u=[n]),r=0,g=u.length;r<g;r++){var nt=this.dataColumn.getAll(t||u[r],this.constValue.returnType.multi),l=this.dataRow.getAll(u[r]),o=0,tt=l.length,it=0;for(this.optCommon.columnType==this.constValue.columnType.multi&&(b=this.dataRow.getSectionRowIndex(u[r],t),vt=this.dataColumn.getAll(u[r],this.constValue.returnType.multi),o=b.startRowIndex,tt=b.endRowCount,it=o);o<tt;o++){var rt=l[o],a=rt[this.constValue.keyColumnPropertyName],yt=rt[this.constValue.rowVariableNames.rowType];t=yt==this.constValue.rowType.separate?this.tfootType:u[r];var pt=this.viewRow.getSectionElement(u[r],l[o][this.constValue.keyColumnPropertyName]),ut=this.dataRow.getViewDataTrMap(u[r],l[o][this.constValue.keyColumnPropertyName]),wt=pt.children;for(e=i.bottom,ft=i.top;e>=ft;e--)for(et=nt[e],f=i.right,ot=i.left;f>=ot;f--)if(v=et[f],v&&(y=this.dataRow.getViewDataRenderingTableMap(u[r],ut.rowInfo.trIdx[e]),p=this.getCellElement(u[r],v.id,a).cell,["MERGE"].contains(y[f].type))){var st=e+(y[f][this.constValue.rowVariableNames.rowspanCount]||1),k=f+(y[f][this.constValue.rowVariableNames.colspanCount]||1),p=this.getCellElement(u[r],v.id,a).cell;if(!p)continue;ht=this.dataRow.renderDivideColumns(u[r],a,e,st,f,k,{etcInfo:{madeTbodyRowCount:it,madeTfootRowCount:0}});s=$(ht.resultHTML);for(var h=e,c=0,bt=st;h<bt;h++,c++){var ct=this.dataColumn.getNextRealColumn(t||u[r],nt[h][k-1].id),lt=wt[ut.rowInfo.trIdx[h]],at=ct.column&&this.getCellElement(u[r],ct.column.id,a).cell,kt=s[c];this.__core.view.selector&&this.__core.view.selector.attachElements(kt);for(var d=f,dt=0,gt=k;d<gt;d++,dt++)h==e&&d==f?(p.removeAttribute("colspan"),p.removeAttribute("rowspan"),s[c].removeChild(s[c].children[0])):(w=s[c].children[0],at?lt.insertBefore(w,at):lt.appendChild(w),this.__core.view.selector&&this.__core.view.selector.addElement(w))}}this.dataRow.divideViewDataTrMap(u[r],t,i)}this.view.beginPopoverTransaction()}},getSize:function(n,t,i){var r=[n,t,i].join(ecount.constValue.gridDelimiter);if(!this.__datas.clientSize[r]){var f=this.dataColumn.getById(n,t,i),e=this.getCellElement(n,t,i).cell,u={top:0,left:0,width:0,height:0};u.width=f.width;u.height=e.clientHeight;this.__datas.clientSize[r]=u}return this.__datas.clientSize[r]},setValue:function(n,t,i,r,u){var it=this.dataColumn.getAll(n,this.constValue.returnType.multi),u=u||{},f=this.dataRow.getViewDataCellMap(n,t,i),w,nt,c,r,rt,tt,ut,ft,et,v,e,ot,y,l,k,p,st,d,a,h,b;if((f.cellInfo||f.rowInfo||f.tableIndex)&&(!u.orginalColumnId||u.orginalColumnId==t)){var o=this.getCellElement(n,t,i).cell,ht=this.viewRow.getRowElement(n,i),lt=ht[f.cellInfo&&f.cellInfo.columnRowIdx],s,g,ct=u.callByType==undefined||u.callByType==null?"user":u.callByType;if(o)if(w=this.dataRow.getViewDataCellInfo(n,t,i),u.isRefresh==undefined&&(nt=f.cellInfo.editControlType||f.cellInfo.controlType,u.isRefresh=w.controlType!=(nt&&nt.replace(/^ecount.gridV2./g,""))),["ecount.gridV2.widget.checkbox","ecount.gridV2.widget.rowItemCheckbox"].contains(f.cellInfo.controlType)&&this.dataCheckbox.getCheckboxUse(n,t)&&!u.isRefresh)c=this.querySelector(o,this.constValue.controlTag[f.cellInfo.controlType]),r=ecount.gridV2.util.getCheckedValue(r)?"checked":"",rt=this.dataCheckbox.isDisabledCheckbox(n,t,i)||f.cellInfo.disabled=="disabled",activeRowStyle=this.dataCheckbox.getActiveRowStyle(n,t),n==this.theadType&&this.defaultDatas.$tables&&this.defaultDatas.$tables.length>1?this.setHeaderCheckedByMultiTable(n,t,i,r,u):c&&(c.setAttribute("checked",r),c.checked=r,r=="checked"?activeRowStyle&&(tt=this.dataCheckbox.getActiveRowDeterminer(n,t),ut=this.dataRow.getById(n,i),isChangeActiveColor=tt?tt(ut):!0,isChangeActiveColor&&this.viewRow.addClass(n,i,activeRowStyle)):activeRowStyle&&this.viewRow.removeClass(n,i,activeRowStyle),rt?(c.disabled="disabled",c.setAttribute("disabled","disabled")):(c.getAttribute("disabled")=="disabled"||c.getAttribute("disabled")=="true")&&c.removeAttribute("disabled"));else if(this.constValue.nativeControlInWidget[f.cellInfo.editControlType]&&!u.isRefresh)this.dataRow.getViewDataCellInfo(n,t,i),s=this.dataRow.getViewDataWidgetInstance(n,f.cellInfo.editControlId),g=w&&w.controlOption,s&&(/^widget.calc.*/.test(f.cellInfo.controlType)?u.isBlur||(_.isArray(r)&&(s.setCalcMode(g.isCalc,g.isRequired),s.insertItem(r)),_.isPlainObject(r)&&s.insertItem([r])):f.cellInfo.controlType=="widget.multiDate"?(ft=r.from,et=r.to,s.setGridDelegatorOption({calledSetCell:!0}),s.setStandardValue([ft,et]),s.removeGridDelegatorOption()):f.cellInfo.controlType=="widget.date"?r==""?s.setSyncedEmtpyData(0,""):s.setStandardValue(r):f.cellInfo.controlType=="widget.select.fromToDouble.disbursementPeriod"?s.setStandardValue(u.cindex,r,!1):f.cellInfo.controlType=="widget.select.fromToDouble.fromToDoubleInOutTime"?s.setStandardValue(u.cindex,r,!1):(s.setStandardValue(r),/^widget.combine.*/.test(s.controlType)&&this.dataRow.setValue(n,t,i,r,{isRunChange:!1})));else{if(v=["widget","custom"],this.__core.view.destroyTooltip(n,t,i),this.__core.view.destroyPopover(n,t,i),this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tfootType?(ot=this.dataColumn.getAll(this.tbodyType,this.constValue.returnType.multi),e=this.__renderer.table.renderCell(n,t,i,{rowCurrentRowIndex:ot.length+(f.rowInfo.dataIdx-1)*it.length+f.cellInfo.columnRowIdx,groupRowIdx:f.cellInfo.columnRowIdx,columnCurrentColumnIndex:f.cellInfo.columnIdx,groupRowIndex:f.cellInfo.columnRowIdx,modeView:this.constValue.dataType.modeView,isSetCell:!0})):e=this.__renderer.table.renderCell(n,t,i,{rowCurrentRowIndex:f.rowInfo.dataIdx*it.length+f.cellInfo.columnRowIdx,groupRowIdx:f.cellInfo.columnRowIdx,columnCurrentColumnIndex:f.cellInfo.columnIdx,groupRowIndex:f.cellInfo.columnRowIdx,modeView:this.constValue.dataType.modeView,isSetCell:!0}),v.forEach(function(r){this.removeError(r,n,t,i)}.bind(this)),this.optEditable.use&&this.viewEditLayer&&["ecount.gridV2.widget.label"].contains(f.cellInfo.controlType)){if(this.__core.onFocusin||$(o).find("span.temp-cell").remove(),o.children&&o.children.length>0)for(h=0,b=o.children.length;h<b;h++)if(y=o.children[h],y.classList.contains("edit_container")||y.classList.contains("edit_container_spare")){if(k=this.viewEditLayer.getActiveCell(),k.activeSectionType==n&&k.activeColumnId==t&&k.activeRowId==i&&(l=this.querySelector(y,".grid-input-data-view"),l))for(p=0,st=l.children.length;p<st;p++)l.children[p].classList.contains("hide")||l.children[p].classList.add("hide")}else y.classList.add("hide"),y.classList.add("temp-cell");l?l.appendChild($(e.cellData.cell.data)[0]):o.appendChild($(e.cellData.cell.data)[0])}else o.innerHTML=e.cellData.cell.data;if(e.cellData.attr){o.removeAttribute("disabled");for(a in e.cellData.attr)d=e.cellData.attr[a],["data-key","data-content","content"].contains(a)&&(d=ecount.gridV2.util.replaceEscape(d)),o.setAttribute(a,d)}if(o.style.color="",e.cellData.style)for(a in e.cellData.style)o.style[a]=e.cellData.style[a].replace(/;/,"");if(this.optEditable.use&&this.viewEditLayer&&this.viewEditLayer.getInstance()&&this.viewEditLayer.getInstance().gridColumnID===t&&e.cellData.className.push("grid-input-selected-cell"),o.className="",e.cellData.className&&e.cellData.className.length>0&&this.addClass(n,t,i,e.cellData.className),this.constValue.gridType.editable==this.optCommon.gridType){if(ct=="system")for(h=0,b=v.length;h<b;h++)this.dataValidate.get(v[h],n,t,i)&&(this.showError(v[h],n,t,i),this.showPopover(v[h],n,t,i));e.editControlType==="widget.textarea"&&this.viewRow.changeTextareaHeight(n,t,i,{rows:r.split("\n").length})}this.constValue.nativeControlInWidget[e.controlType]&&this.__core.view.bindWidgetElement(n);this.__core.view.beginPopoverTransaction();e&&e.cellData&&this.__renderer.table.renderCellCompleted()}}},refresh:function(n,t,i){var r=this.__core.data.column.getById(n,t),u=this.__core.data.row.getById(n,i);this.setValue(n,t,i,u[r.propertyName]||"",{isRefresh:!0})},setChecked:function(n,t,i,r){var e=this.getCellElement(n,t,i).cell,u=this.querySelector(e,"input"),f=$(u);u.getAttribute("disabled")&&(r=!1);f.prop("checked")!=r&&f.prop("checked",ecount.common.isTrue(r))},getChecked:function(n,t,i){var r=this.getCellElement(n,t,i).cell,u=this.querySelector(r,"input"),f=$(u);return f.prop("checked")},addClass:function(n,t,i,r){r.constructor!=Array&&(r=[r]);var u=this.getCellElement(n,t,i).cell;u&&r.forEach(function(n){new RegExp(n,"g").test(u.className)||(u.className!=""&&(u.className+=" "),u.className+=n)});this.__core.view.fix&&this.__core.view.fix.addClass(n,t,i,r)},removeClass:function(n,t,i,r){r.constructor!=Array&&(r=[r]);var u=this.getCellElement(n,t,i).cell;u&&r.forEach(function(n){u.className=u.className.replace(new RegExp("(\\s)"+n+"(?!(w|-))|^"+n+"(?!(w|-))"),"")});this.__core.view.fix&&this.__core.view.fix.removeClass(n,t,i,r)},setStyle:function(n,t,i,r){var f=this.getCellElement(n,t,i).cell,e,u;if(f){e=f.style;for(u in r)r.hasOwnProperty(u)&&(e[u]=this.constValue.borderColorRex.test(u)?this.constValue.nativeColorname[u]?"":"#"+r[u]:r[u])}},removeStyle:function(n,t,i,r){var f=this.getCellElement(n,t,i).cell,e,u;if(f){e=f.style;for(u in r)oValue.hasOwnProperty(u)&&e.removeProperty(u)}},showError:function(n,t,i,r){var o=this.dataValidate.get(n,t,i,r),e,s;if(o&&!o.isValidate){var h=this.getCellElement(t,i,r),f=h.cell,u=h.map.cellInfo.controlType;f&&(this.removeError(n,t,i,r),e=document.createElement("div"),s=this.__core.setting.getWidgetEventUIDelegator(),e.className="validation",u=="ecount.gridV2.widget.link"||u=="ecount.gridV2.widget.link.multi"?($(f).find("a").css({"z-index":"3",position:"relative"}),e.style.zIndex=2):/^widget.select*/.test(u)?($(f).find("button").css({"z-index":"3"}),e.style.zIndex=2):u=="widget.date"||u=="widget.multiDate"||u=="widget.select"||/^widget.calc.*/.test(u)||u=="widget.code.serialCodeItemNative"||u=="widget.code.serialCodeItemNew"||u=="ecount.gridV2.widget.radio"||u=="widget.radio.multi"||this.constValue.combineControlWidget[u]||(e.style.zIndex=2),(ecount.constValue.isIE||ecount.constValue.isFireFox)&&(e.style.width=f.clientWidth+"px",e.style.height=f.clientHeight+"px"),f.children.length>0?f.insertBefore(e,f.children[0]):f.appendChild(e),o.error.css.visible&&this.addClass(t,i,r,["has-error"]),s&&s.triggerEvent("control.showError",{instance:{},cid:t+"|"+i+"|"+r}))}},removeError:function(n,t,i,r){var e=this.dataValidate&&this.dataValidate.get(n,t,i,r),f,u,o;!e||e.isValidate||e.error.widget.needValidate||(f=this.getCellElement(t,i,r).cell,f&&(u=this.querySelector(f,"div.validation"),o=this.__core.setting.getWidgetEventUIDelegator(),u&&(u.parentNode?u.parentNode.removeChild(u):u&&f.removeChild(u)),this.__core.view.destroyPopover(t,i,r),this.__core.view.setTooltipVisible(t,i,r,!0),this.removeClass(t,i,r,["has-error"]),o&&o.triggerEvent("control.hideError",{instance:{},cid:t+"|"+i+"|"+r})))},showPopover:function(n,t,i,r,u){var l,f;u=u||{};var s=u.hideTimeout,y=u.hideAll,h=u.popOverVisible!==!1,p=u.showDirect,e=this,c=this.getCellElement(t,i,r);if(c.cell&&(l=c.cell,f=this.dataValidate.get(n,t,i,r),f.error.popover.visible||h)){f.error.popover.visible=h;var a={},w=this.__core.activeSectionType==t&&this.__core.activeColumnId==i&&this.__core.activeRowId==r,o="hover",v=!1;u.trigger?o=u.trigger:(w||p||f.error.popover.isShow)&&(o="manual",v=!0);a[[t,i,r].join(ecount.constValue.gridDelimiter)]={type:"popover",container:this.optLayout.$bootstrapContainer?this.optLayout.$bootstrapContainer:"body",trigger:o,placement:f.error.popover.placement,html:!0,template:undefined,multiPopover:undefined,title:undefined,content:f.error.popover.message.cr2br()};this.__core.view.bindPopover(a);v&&($(l).popover("show"),s>0&&ecount.global.setTimeout(this.optCommon.ecPageId,function(){var n=e.dataValidate.get("custom",t,i,r);n.isValidate=!1;n.error.popover.visible=!1;n.error.popover.isShow=!1;n.error.css.visible=!1;y===!0&&(e.removeError("custom",t,i,r),e.dataValidate.remove("custom",t,i,r))},s))}},hidePopover:function(n,t,i){var r=this.getCellElement(n,t,i).cell;r&&$(r).popover("hide")},destroyPopover:function(n,t,i){this.__core.view.destroyPopover(n,t,i)},setEditable:function(n,t,i,r){var l=this.__core.data.column.getAll(n,this.constValue.returnType.multi),a=this.__core.data.column.getById(n,t),c=this.getCellElement(n,t,i),u=c.cell,v=$(u),f=c.map,e=f.cellInfo.editControlType||f.cellInfo.controlType,o,s,h;u&&(r?(u.className=u.className.replace(this.constValue.cellEditableRex,""),f.cellInfo.editableState=!0,this.constValue.nativeControlInWidget[e]?(o=this.dataRow.getViewDataWidgetInstances(n),s=o&&o[f.cellInfo.editControlId],s&&s.setReadOnly(!1)):this.constValue.nativeControlInGrid[e]&&(h=this.querySelector(u,this.constValue.controlSelector[e]),h.removeAttribute("disabled"))):(u.className.test(this.constValue.cellEditableRex)||(u.className+=" disabled"),f.cellInfo.editableState=!1,this.constValue.nativeControlInWidget[e]?(o=this.dataRow.getViewDataWidgetInstances(n),s=o&&o[f.cellInfo.editControlId],s&&s.setReadOnly(!0)):this.constValue.nativeControlInGrid[e]&&(h=this.querySelector(u,this.constValue.controlSelector[e]),h.setAttribute("disabled","disabled"))))},getEditable:function(){},getChildElement:function(n,t,i,r,u){var f=this.getCellElement(n,t,i).cell;return $(f).find(r+"[childelementid='"+u+"']")},focus:function(n,t,i,r){var v,o,g,s,nt,f,tt,b,a,it;r=r||{};var k=r.cindex||0,l=this.__core.data.column.getAll(n,this.constValue.returnType.multi),e=this.__core.data.column.getById(n,t),d=this.getCellElement(n,t,i),c=d.cell,rt=$(c),ut=d.map;if(c){for(v=this.dataRow.getAll(n),o=0,g=v.length;o<g;o++)if(i==v[o][this.constValue.keyColumnPropertyName]){this.__core.activeRowIndex=o;this.__core.lastFocusedActiveRowIndex=o;break}for(s=0,nt=l.length;s<nt;s++)for(f=0,tt=l[s].length;f<tt;f++)if(!ecount.common.isTrue(l[s][f].isHideColumn)&&l[s][f].id==this.__core.activeColumnId){this.__core.activeColumnIndex=f;this.__core.lastFocusedActiveColumnIndex=f;break}var h=this.dataRow.getViewDataCellInfo(n,t,i),y=!1,p=!1,w=!1,u;this.constValue.controlInWidget[h.controlType]?(p=!0,u=h.controlType):this.constValue.controlInWidget[e.controlType]?(p=!0,u=e.controlType):this.constValue.nativeControlInGrid[h.controlType]?(w=!0,u=h.controlType):this.constValue.nativeControlInGrid[e.controlType]?(w=!0,u=e.controlType):this.constValue.nativeControlInWidget[h.controlType]?(y=!0,u=h.controlType):this.constValue.nativeControlInWidget[e.controlType]&&(y=!0,u=e.controlType);p?this.constValue.controlInWidget[u]&&(this.__customEvents.fire("click",c,{shiftKey:!1,altKey:!1,ctrlKey:!1,ignoreDetail:!0}),ecview.util.select(rt.find("input[type='text']"),this.optCommon.ecPageId),this.scrollRightMove(c)):w?(b=c.querySelectorAll(this.constValue.controlSelector[u]),b.length>0&&b[0].focus()):y&&(a=this.__core.fn.getWidgetInstance(n,[n,t,i].join(ecount.constValue.gridDelimiter),{}),it=a&&a.getComponent(k),it&&a.setFocus(k))}},blur:function(n,t,i,r){var a=this.__core.data.column.getAll(n,this.constValue.returnType.multi),h=this.__core.data.column.getById(n,t),c=this.getCellElement(n,t,i),s=c.cell,v=$(s),l=c.map,r=r||{},f,e,o,u;this.__core.deactiveSectionType=n;this.__core.deactiveColumnId=t;this.__core.deactiveRowId=i;this.__core.deactiveColumnIndex=this.__core.activeColumnIndex;this.__core.deactiveRowIndex=this.__core.activeRowIndex;this.__core.activeSectionType=null;this.__core.activeColumnId=null;this.__core.activeRowId=null;this.__core.activeColumnIndex=-1;this.__core.activeRowIndex=-1;s?(u=this.viewEditLayer&&this.viewEditLayer.serialize()||{},u.isShowing?(this.optRow[n].showInputFakeOutLine==="activeRow"&&this.viewRow.removeClass(n,i,[this.constValue.rowEditableClassName]),this.viewEditLayer.blur(n,t,i,r),this.viewEditLayer.commit()):(f=!1,this.constValue.controlInGrid[l.cellInfo.controlType]?(f=!0,e=l.cellInfo.controlType):this.constValue.controlInGrid[h.controlType]&&(f=!0,e=h.controlType),o=[],f&&(this.constValue.nativeControlInGrid[e]&&(o=s.querySelectorAll(this.constValue.controlSelector[e])),o.length>0&&o[0].blur()))):this.viewEditLayer&&(u=this.viewEditLayer.serialize(),u.isShowing&&(this.optRow[n].showInputFakeOutLine==="activeRow"&&this.viewRow.removeClass(n,i,[this.constValue.rowEditableClassName]),this.viewEditLayer.blur(n,t,i,r),this.viewEditLayer.commit()))},removeSizeByScreen:function(n,t,i){var r=[n,t,i].join(ecount.constValue.gridDelimiter);this.__datas.offsetSizeByScreen[r]&&delete this.__datas.offsetSizeByScreen[r]},containSizeByScreen:function(n,t,i){var r=[n,t,i].join(ecount.constValue.gridDelimiter);return this.__datas.offsetSizeByScreen[r]!=undefined||this.__datas.offsetSizeByScreen[r]!=null},getSizeByScreen:function(n,t,i,r){r=r||{};var u=typeof r.isCalcZoomRatio=="boolean"?r.isCalcZoomRatio:!1,f=this.getCellOriginalElement(n,t,i);return ecount.gridV2.view.util.getScreenBoundingClientRect(f.cell,u)},getSizeByContainer:function(n,t,i){var r={top:0,left:0,width:0,height:0,bottom:0},u=this.getCellOriginalElement(n,t,i);return u.cell?(r.top=u.cell.offsetTop,r.left=u.cell.offsetLeft,r.width=u.cell.offsetWidth,r.height=u.cell.offsetHeight,r.bottom=r.top+r.height,r.right=r.left+r.width,r.left-=this.optLayout.scrollContainer&&this.optLayout.scrollContainer.scrollLeft||0,r.top-=this.optLayout.scrollContainer&&this.optLayout.scrollContainer.scrollTop||0,r):r},getScrollData:function(n){var t={},i=0;return this.optRow[this.tbodyType].showInputFakeOutLine===!0&&(i=n.parentElement.parentElement.offsetTop+n.parentElement.parentElement.parentElement.offsetTop),t.topMargin=this.optHeader.topMargin||0,t.tdElement=$(n),t.currentTop=n.offsetTop+i,t.currentHeight=t.tdElement.height(),t.scrollTop=this.optLayout.$contents?this.optLayout.$contents.scrollTop():$(document).scrollTop(),t.viewportHeight=this.optLayout.contents?this.optLayout.contents.offsetHeight:$(window).height(),t.bottomMargin=this.optFoot.bottomMargin||0,t.currentBottom=t.topMargin+t.currentTop+t.tdElement.height(),t.bottomLimit=t.scrollTop+t.viewportHeight,t.ratioMargin=t.viewportHeight-t.topMargin>=300?100:10,t.currentLeft=n.offsetLeft,t.currentRight=t.currentLeft+t.tdElement.width(),t.viewportWidth=this.optLayout.$contents?this.optLayout.$contents.width():$(window).width(),t.scrollLeft=this.optLayout.contents?this.optLayout.contents.scrollLeft:$(document).scrollLeft(),t.rightLimit=t.scrollLeft+t.viewportWidth,t.ratioMargin2=10,t},scrollRightMove:function(n){var t=this.getScrollData(n);t.currentRight>t.scrollLeft&&t.currentRight<=t.rightLimit-t.ratioMargin2-t.bottomMargin||(this.optLayout.$contents?this.optLayout.$contents.scrollLeft(t.scrollLeft+(t.currentRight-t.rightLimit)+t.ratioMargin2+t.bottomMargin+2):$(document).scrollLeft(t.scrollLeft+(t.currentRight-t.rightLimit)+t.ratioMargin2+t.bottomMargin+2))},scrollLeftMove:function(n){var t=this.getScrollData(n);t.currentLeft>t.scrollLeft+t.ratioMargin2&&t.currentLeft<=t.rightLimit||(this.optLayout.$contents?this.optLayout.$contents.scrollLeft(t.currentLeft-t.ratioMargin2+1):$(document).scrollLeft(t.currentLeft-t.ratioMargin2+1))},scrollUpMove:function(n){var t=this.getScrollData(n);(t.currentTop<=t.scrollTop+t.topMargin+t.ratioMargin||t.currentTop>t.bottomLimit)&&(this.optLayout.$contents?this.optLayout.$contents.scrollTop(t.currentTop-(t.topMargin+t.ratioMargin)+1):$(document).scrollTop(t.currentTop-(t.topMargin+t.ratioMargin)+1))},scrollDownMove:function(n){var t=this.getScrollData(n);(t.currentBottom<=t.scrollTop+t.topMargin||t.currentBottom>t.bottomLimit-t.ratioMargin-t.bottomMargin)&&(this.optLayout.$contents?this.optLayout.$contents.scrollTop(t.scrollTop+(t.currentBottom-t.bottomLimit)+t.ratioMargin+t.bottomMargin+2-t.currentHeight):$(document).scrollTop(t.scrollTop+(t.currentBottom-t.bottomLimit)+t.ratioMargin+t.bottomMargin+2))},scrollIntoView:function(n,t,i){var r,u,f;this.optLayout.$contents?(r=this.optLayout.$contents[0].clientHeight,u=n.getBoundingClientRect().top-this.optLayout.$contents[0].getBoundingClientRect().top,f=n.clientHeight*i,t==="down"&&u>r-r/5&&this.optLayout.$contents.scrollTop(this.optLayout.$contents.scrollTop()+f),t==="up"&&u<r/5&&this.optLayout.$contents.scrollTop(this.optLayout.$contents.scrollTop()-f)):(r=document.documentElement.clientHeight,u=n.getBoundingClientRect().top,f=n.clientHeight*i,t==="down"&&u>r-r/5&&$(document.documentElement).scrollTop($(document.documentElement).scrollTop()+f),t==="up"&&u<r/5&&$(document.documentElement).scrollTop($(document.documentElement).scrollTop()-f))},setNumberRadioCount:function(n,t,i,r){var f=this.getCellElement(n,t,i),e=f&&f.cell,u,o;e&&(u=$(e).find("div"),u.length>1&&(o=u[1],o.innerHTML=r))},initGlobalValue:function(n,t){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.defaultDatas=t;this.__core=n.core;this.__customEvents=this.__core.customEvents;this.__setting=n.setting;this.__renderer=this.__core.render;$.extend(this,n.mixinOption);this.__datas={offsetSizeByScreen:{},offsetSizeByContainer:{}}},setTextareaHeight:function(n,t,i,r){var o,u,e,s,f,h,c;if(r=r||{},o=178,u=this.view.cell.getCellElement(n,t,i),u.cell){if(h=$(u.cell).closest("tr").get(0),c=u.cell.classList.contains("hide"),c)return null;r.isTargetTextarea?(e=$(u.cell).find("#edit textarea").get(0),s=$(u.cell).find("#view span").get(0)):e=$(u.cell).children("span").not(".hide").get(0);e&&(f=r.rows>0?ecount.gridV2.view.util.getTextareaHeight(r.rows):r.lineHeight||42,u.cell.offsetHeight>f+7&&!$.isEmpty(e.innerText)&&(f=u.cell.offsetHeight-7),f<h.offsetHeight&&(h.style.height=f+7+"px"),e.style.height=Math.min(f,o)+"px",s&&(s.style.height=f+"px"))}return Math.min(f,o)},init:function(n,t){this.initGlobalValue(n,t)},render:function(){},destroyAll:function(){},clearTempCell:function(n){var r=[],u=n.children,f,t,i;if(u.length>1){for(t=0;t<u.length;t++)f=u[t],f.classList.contains("temp-cell")&&r.push(f);for(i=0;i<r.length;i++)n.removeChild(r[i])}}});ecount.gridV2.view.cellTable=$.Class(ecount.gridV2.view.cell,{getCellElement:function(n,t,i){var u,o;if(this.optCommon.useImageListTypeGrid===!0)return this.getCellElementImage(n,t,i);var r=this.dataRow.getViewDataCellMap(n,t,i),f=null,e=null,s=null;return r.cellInfo&&r.cellInfo.adjustmentValue!=1&&(u=[this.constValue.tableIdPrefix+r.tableId,r.tableIndex].join("-"),o=[this.constValue.formVersion.second,this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(this.optForm.version)?this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tfootType?this.defaultDatas.tableSectionIndex[u]&&this.defaultDatas.tableSectionIndex[u].tbodyIndex:this.defaultDatas.tableSectionIndex[u]&&this.defaultDatas.tableSectionIndex[u][n+"Index"]:this.defaultDatas.tableSectionIndex[u]&&this.defaultDatas.tableSectionIndex[u][n+"Index"],f=this.defaultDatas.tableKeyList[u],e=f.children[o]&&f.children[o].children[r.rowInfo.trIdx[r.cellInfo.columnRowIdx]],s=e&&e.children[r.cellInfo.columnIdx+(r.cellInfo.adjustmentValue||0)]),{map:r,cell:s}},add:function(n,t,i,r){var w={},f=[this.theadType,this.tbodyType,this.tfootType],e,u,ft,b,d,o,at,vt,c,y,tt;for(this.optCommon.columnType==this.constValue.columnType.multi&&(f=n==this.tfootType&&this.constValue.gridType.editableForm==this.optCommon.gridType?[this.tbodyType]:[n]),t=="right"?e=i.left+r.addCount:t=="left"&&(e=i.left),u=0,ft=f.length;u<ft;u++){if(f[u]==this.theadType){var et=this.dataColumn.addCol(f[u],e,e+(i.right-i.left+1)),yt=$(et.resultHTML),it=yt[0].children,pt=this.dataRow.getViewDataTableMapAll(f[u]),wt=Object.keys(pt),g=this.viewTable.getColgroupElement(f[u],wt[0]);for(b=it.length-1;b>-1;b--)g.children[e]?g.insertBefore(it[b],g.children[e]):g.appendChild(it[b])}var rt=0,ot=0,k=this.dataRow.getAll(f[u]),p=0,st=k.length;for(this.optCommon.columnType==this.constValue.columnType.multi&&this.constValue.gridType.editableForm==this.optCommon.gridType&&(this.theadType!=n&&(d=this.dataRow.getSectionRowIndex(this.tbodyType,n),p=d.startRowIndex,st=d.endRowCount),this.tfootType==n&&(rt=d.endRowCount-d.startRowIndex)),w[f[u]]||(w[f[u]]={cells:[]});p<st;p++){var ht=k[p],v=ht[this.constValue.keyColumnPropertyName],ct=ht[this.constValue.rowVariableNames.rowType],bt=ct==this.constValue.rowType.separate?this.tfootType:null,kt=this.viewRow.getSectionElement(f[u],k[p][this.constValue.keyColumnPropertyName]),lt=this.dataRow.getViewDataTrMap(f[u],k[p][this.constValue.keyColumnPropertyName]),gt=kt.children,h=this.dataColumn.getAll(bt||f[u],this.constValue.returnType.multi),et=this.dataRow.view.renderAddColumns(f[u],k[p][this.constValue.keyColumnPropertyName],0,h.length,e,e+(i.right-i.left+1),{etcInfo:{madeTbodyRowCount:rt,madeTfootRowCount:ot},direction:t}),dt=$(et.resultHTML),ut=0;for(o=0,at=lt.rowInfo.trIdx.length;o<at;){var nt=this.viewRow.getRowElement(f[u],v,o),s=this.dataRow.getViewDataRenderingTableMap(f[u],lt.rowInfo.trIdx[o]),l=null,a=dt[o];if(a.children.length==0&&["ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","COLSPAN"].contains(s[e]&&s[e].type))this.optCommon.columnType==this.constValue.columnType.multi&&this.tfootType==n?(vt=this.dataColumn.getAll(this.tbodyType,this.constValue.returnType.multi),l=this.getCellElement(f[u],h[(s[e].trIdx-vt.length)%h.length][s[e].columnIdx].id,v).cell):l=this.getCellElement(f[u],h[s[e].trIdx%h.length][s[e].columnIdx].id,v).cell,l.colSpan+=i.right-i.left+1,o+=l.rowSpan;else if(["ROWSPAN"].contains(s[e]&&s[e].type)){for(cellInfo=this.getNextCellElement(f[u],h[o][s[i.right].columnIdx].id,v),l=cellInfo&&cellInfo.cell,y=0,tt=a.children.length;y<tt;y++)w[f[u]].cells.push(a.children[y]),l?nt.insertBefore(a.children[0],l):nt.appendChild(a.children[0]);o+=1}else{for(t=="left"?(c=e+(i.right-i.left+1),s[c]&&["MERGE"].contains(s[c].type)?(cellInfo=h[o][c]&&this.getCellElement(f[u],h[o][c].id,v,i),s[c][this.constValue.rowVariableNames.colspanCount]>1&&s[c][this.constValue.rowVariableNames.rowspanCount]>1&&(ut=s[c][this.constValue.rowVariableNames.colspanCount])):cellInfo=["ROWSPAN"].contains(s[c].type)?h[o][c+1]&&this.getCellElement(f[u],h[o][c+1].id,v,i):h[o][c+ut]&&this.getCellElement(f[u],h[o][c+ut].id,v,i),l=cellInfo&&cellInfo.cell):t=="right"&&(cellInfo=h[o][e]&&this.getNextCellElement(f[u],h[o][e].id,v,i),l=cellInfo&&cellInfo.cell),y=0,tt=a.children.length;y<tt;y++)w[f[u]].cells.push(a.children[y]),l?nt.insertBefore(a.children[0],l):nt.appendChild(a.children[0]);o+=1}}this.optCommon.columnType==this.constValue.columnType.multi&&f[u]==this.tbodyType&&(ct==this.constValue.rowType.separate?ot+=1:rt+=1)}}return this.__core.view.beginPopoverTransaction(),w},remove:function(n,t,i){var nt=[],u,b,r,it,g,k,e,f,et,a,c,y,d,p,ot,w,st;u=this.optCommon.columnType==this.constValue.columnType.single?[this.tfootType,this.tbodyType,this.theadType]:[this.tbodyType,this.theadType];var l=[],ht=this.dataRow.getViewDataTableMapAll(this.theadType),ct=Object.keys(ht),tt=this.viewTable.getColgroupElement(this.theadType,ct[0]);for(b=t.right;b>=t.left;b--)tt.removeChild(tt.children[b]);for(r=0,it=u.length;r<it;r++)for(g=this.dataRow.getAll(u[r]),k=g.length-1;k>-1;k--){var rt=g[k],lt=rt[this.constValue.rowVariableNames.rowType],ut=null;this.optCommon.columnType==this.constValue.columnType.multi&&(ut=lt==this.constValue.rowType.separate?this.tfootType:null);var s=rt[this.constValue.keyColumnPropertyName],at=this.dataRow.getViewDataRenderingTableMapAll(u[r]),ft=this.dataRow.getViewDataTrMap(u[r],s),h=this.dataColumn.getAll(ut||u[r],this.constValue.returnType.multi),vt=h[0].length;for(e=ft.rowInfo.trIdx.length-1;e>-1;e--)for(f=i.right;f>=i.left;)if(et=at[ft.rowInfo.trIdx[e]],a=et[f],"NORMAL"==a.type&&t.left<=f&&t.right>=f)this.__core.view.destroyTooltip(u[r],h[e][f].id,s),this.__core.view.destroyPopover(u[r],h[e][f].id,s),c=this.getCellElement(u[r],h[e][f].id,s),l.contains(c.cell)||l.push(c.cell),f-=1;else if("MERGE"==a.type){var yt=a[this.constValue.rowVariableNames.mergeStartIndex],o=yt%vt,wt=a[this.constValue.rowVariableNames.rowspanCount]||1,pt=a[this.constValue.rowVariableNames.colspanCount]||1,v=pt-1,c=this.getCellElement(u[r],h[e][f].id,s);if(i.left<=o&&i.right>=o)if(y=Math.min(t.right,o+v)-Math.max(t.left,o)+1,t.left<=o&&t.right>=o&&t.right<o+v){for(d=h[e][t.right+1],p=t.right,ot=o;p>=ot;p--)this.__core.view.destroyTooltip(u[r],h[e][p].id,s),this.__core.view.destroyPopover(u[r],h[e][p].id,s);d&&(c.cell.setAttribute("data-columnid",d.id),nt.push({sectionType:u[r],columnId:d.id,rowId:s}),c.cell.colSpan-=y)}else t.left<=o&&t.right>=o+v?(this.__core.view.destroyTooltip(u[r],h[e][f].id,s),this.__core.view.destroyPopover(u[r],h[e][f].id,s),l.contains(c.cell)||l.push(c.cell)):o<t.left&&o+v>=t.left&&o+v<=t.right?c.cell.colSpan-=y:o<=t.left&&o+v>=t.right&&(c.cell.colSpan-y==0?(this.__core.view.destroyTooltip(u[r],h[e][f].id,s),this.__core.view.destroyPopover(u[r],h[e][f].id,s),l.contains(c.cell)||l.push(c.cell)):c.cell.colSpan-=y);f-=1}else f-=1}for(w=0,st=l.length;w<st;w++)l[w].parentNode.removeChild(l[w]);return nt}});ecount.gridV2.view.col=function(){};ecount.gridV2.view.col.prototype={getColElement:function(n,t){var e=this.dataRow.getByIndex(this.theadType,0),i=this.dataRow.getViewDataCellMap(this.theadType,t,e[this.constValue.keyColumnPropertyName]),r=null,u=[this.constValue.tableIdPrefix+i.tableId,i.tableIndex].join("-"),f=this.defaultDatas.tableSectionIndex[u]&&this.defaultDatas.tableSectionIndex[u].colgroupIndex;return r=this.defaultDatas.tableKeyList[u],r.children[f]&&r.children[f].children[i.cellInfo.columnIdx]},getColElementByIndex:function(n,t){var e=this.dataRow.getByIndex(this.theadType,0),o=this.dataColumn.getAll(this.theadType,this.constValue.returnType.multi),i=this.dataRow.getViewDataCellMap(this.theadType,o[0][t].id,e[this.constValue.keyColumnPropertyName]),r=null,u=[this.constValue.tableIdPrefix+i.tableId,i.tableIndex].join("-"),f=this.defaultDatas.tableSectionIndex[u]&&this.defaultDatas.tableSectionIndex[u].colgroupIndex;return r=this.defaultDatas.tableKeyList[u],r.children[f]&&r.children[f].children[i.cellInfo.columnIdx]},setWidth:function(n,t,i){var r=this.getColElement(n,t);r.style.width=i+"px"},initGlobalValue:function(n,t){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.defaultDatas=t;this.__core=n.core;this.__customEvents=this.__core.customEvents;this.__setting=n.setting;this.__renderer=this.__core.render;$.extend(this,n.mixinOption)},init:function(n,t){this.initGlobalValue(n,t)},render:function(){},destroyAll:function(){}};ecount.gridV2.view.fix=function(){};ecount.gridV2.view.fix.prototype={drawCount:{},init:function(n,t){if(!$.isNull(this.optLayout)&&$.isNull(this.optLayout.layer))return!1;this.initGlobalValue(n,t);this.reset();this.initData();this.addDrawCount()},initGlobalValue:function(n,t){this.defaultDatas=t;this.__core=n.core;$.extend(this,n.mixinOption)},reset:function(){this.focus={};this.copyElement={};this.copyElement.cloneTopToolbar={};this.copyElement.cloneTop={};this.copyElement.cloneTopTable={};this.copyElement.cloneLeft={};this.copyElement.cloneLeftTable={};this.copyElement.cloneCorner={};this.copyElement.cloneCornerTable={}},initData:function(){this.fixOptions={};this.fixOptions.$title=this.optFix.isInclude?this.optLayout.layer.querySelector("[data-ecpageid='"+this.optCommon.ecPageId+"']").querySelector("div.header"):this.optLayout.layer===window?document.querySelector(".header .wrapper-title"):this.optLayout.layer.querySelector(".header .wrapper-title");this.fixOptions.titleTop=null;this.fixOptions.titleHeight=null;this.fixOptions.titleWidth=null;this.fixOptions.$topToolbar=this.defaultDatas.$topToolbar?this.defaultDatas.$topToolbar[0]:undefined;this.fixOptions.topToolbarWidth=this.fixOptions.$topToolbar?this.fixOptions.$topToolbar.style.width:0;this.fixOptions.$contents=this.optLayout.contents;this.fixOptions.container=this.defaultDatas.container;this.fixOptions.layer=this.optLayout.layer;this.fixOptions.tableIndexList=this.defaultDatas.tableKeyList;this.fixOptions.firstGridIndex=_.first(_.keys(this.fixOptions.tableIndexList));this.fixOptions.tab=this.fixOptions.$contents.querySelector(".nav.nav-tabs");this.fixOptions.isTab=this._isTab();this.fixOptions.isGridTop=_.includes(this.defaultDatas.containerId,"gridTop");this.fixOptions.currentTabId=this._currentTabId();this.moveTop={};this.moveLeft={};this.moveTopChanged={};this.moveBottomChanged={};this.moveLeftChanged={};this.moveRightChanged={};this.hasTopToolbar=!1;this.isPopup=this.optLayout.layer===window?!1:this.optLayout.layer.classList.contains("ui-dialog");this.cloneTopBoundary={};this.focus={}},addDrawCount:function(){if(this.fixOptions.isGridTop)return!1;this.fixOptions.isTab?(ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId]||(ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId]={}),ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId][this.fixOptions.currentTabId]?ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId][this.fixOptions.currentTabId]+=1:ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId][this.fixOptions.currentTabId]=1):ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId]?ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId]+=1:ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId]=1},getDrawCount:function(){return this.fixOptions.isTab&&this.drawCount[this.optCommon.ecPageId]?this.drawCount[this.optCommon.ecPageId][this.fixOptions.currentTabId]:this.drawCount[this.optCommon.ecPageId]},resetDrawCount:function(){this.fixOptions.isTab&&ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId]?(ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId][this.fixOptions.currentTabId]=null,delete ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId][this.fixOptions.currentTabId],_.isEmpty(ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId])&&delete ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId]):(ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId]=null,delete ecount.gridV2.view.fix.prototype.drawCount[this.optCommon.ecPageId])},render:function(){if(!$.isNull(this.optLayout)&&$.isNull(this.optLayout.layer))return!1;this.setCloneTopToolbar();this.setCloneTop()},setTitleBoundary:function(){this.fixOptions.$title&&(this.fixOptions.titleBoundary=this.fixOptions.$title.getBoundingClientRect(),this.fixOptions.titleTop=this.fixOptions.titleBoundary.top,this.fixOptions.titleRight=this.fixOptions.titleBoundary.right,this.fixOptions.titleHeight=this.fixOptions.$title.offsetHeight,this.fixOptions.titleWidth=this.fixOptions.$title.offsetWidth)},getLayerBoundary:function(){var t={},n={};return t=this.cloneTopBoundary,n.fixTopToolbar=this.hasTopToolbar?!0:!1,n.height=this.fixOptions.$topToolbar?this.fixOptions.$topToolbar.getBoundingClientRect().height:0,{topBoundary:t,toolbarHeight:n}},setCloneColumnWidth:function(n,t,i){var f=this.getCloneTableElements(n.sectionType,n.columnId,n.rowId),r,u,e;f.length>0?f.forEach(function(n){r=n.children[0];r&&(r.children[t].style.width=i)}):(e=this._getTableKey(n.sectionType,n.columnId,n.rowId),u=this.copyElement.cloneTopTable[e],r=u&&u.children[0],r&&(r.children[t].style.width=i))},setCloneTableWidth:function(n,t){var r=this.getCloneTableElements(n.sectionType,n.columnId,n.rowId),u,i;if(r.length>0)r.forEach(function(n){n.style.width=t;n.parentElement.style.width=parseInt(t)+5+"px"});else if(u=this._getTableKey(n.sectionType,n.columnId,n.rowId),i=this.copyElement.cloneTopTable[u],i)if(_.get(this,"__core.$container")&&this.__core.$container.hasClass("variable-reset-full-size")){var o=this.__core.$container.children("table"),f=o.get(0).getBoundingClientRect().width,e=parseInt(getComputedStyle(i.parentElement).paddingLeft);i.style.width=f-e+"px";i.parentElement.style.width=f+e+"px"}else i.style.width=t,i.parentElement.style.width=parseInt(t)+5+"px"},update:function(){var n,t,i,r,u;for(n in this.fixOptions.tableIndexList)this.fixOptions.tableIndexList.hasOwnProperty(n)&&(t=this.fixOptions.tableIndexList[n],i=t.getBoundingClientRect(),this.moveTop[n]&&(r=$(t).scrollParent().get(0),u=r&&r.scrollLeft||0,this._removeCloneTop(n),this._removeCloneTopToolbar(n),this.moveTopChanged[n]=!1,this.cloneTopFixArea(t,n,i,!0,{scrollLeft:u})),this.moveLeft[n]&&(this._removeCloneLeft(n),this.moveTop[n]&&this._removeCloneCorner(n),this.moveLeftChanged[n]=!1,this.cloneLeftFixArea(t,n,i,!0)));this.loseFocus()},setCloneCellValue:function(n,t,i,r){var u=this.getCloneCellElement(n,t,i),f;u&&u.cell&&(spans=u.cell.querySelectorAll(":scope > span"),spans&&spans.forEach(function(n){n.remove()}),f=document.createElement("span"),f.textContent=r,u.cell.appendChild(f));this.loseFocus()},getFocusedCloneCell:function(){return this.getCloneCellElement(this.focus.sectionType,this.focus.columnId,this.focus.rowDataKey)},isFocused:function(){return this.focus&&this.focus.status===!0},loseFocus:function(){this.focus={}},isCloneTarget:function(n){var t,i;if(!n)return!1;t=$(n).closest("table");i=t.length>0&&t[0].parentElement.getAttribute("id");switch(i){case ecount.grid.constValue.fix.gridTopDiv:case ecount.grid.constValue.fix.gridLeftDiv:case ecount.grid.constValue.fix.gridCornerDiv:return!0;default:return!1}},setCloneTablePositionSync:function(){if(this.focus.status===!0){var i=this.focus.cloneTableKey,r=this.fixOptions.tableIndexList[i],u=this.fixOptions.$topToolbar,f=this.copyElement.cloneTopTable[i],n,t;r&&(n=$(r).scrollParent().get(0),t=n&&n.scrollLeft||0,u&&(u.style.left=-t+"px"),f&&(f.style.left=-t+"px"))}},avoidCloneTable:function(n,t,i){if(n&&t&&i){var e=this.getCloneTableElements(n,t,i),o=this.viewCell.getCellElement(n,t,i),r=$(o.cell).scrollParent().get(0),u,f,s;e.length<1||!o.cell||!r||(u=e[0].getBoundingClientRect(),f=o.cell.getBoundingClientRect(),s=e[0].parentElement.getAttribute("id"),ecount.grid.constValue.fix.gridTopDiv===s&&f.top<u.bottom&&(r.scrollTop=r.scrollTop+(f.top-u.bottom)),ecount.grid.constValue.fix.gridLeftDiv==s&&f.left<u.right&&(r.scrollLeft=r.scrollLeft+(f.left-u.right)))}},onClickMenuToggle:function(){for(var n in this.fixOptions.tableIndexList)if(this.fixOptions.tableIndexList.hasOwnProperty(n)){var r=this.fixOptions.tableIndexList[n],i=this.fixOptions.$topToolbar,o=this.copyElement.cloneTopToolbar[n],u=this.copyElement.cloneTop[n],f=this.copyElement.cloneLeft[n],e=this.copyElement.cloneCorner[n],s=this.moveTop[n],t=function(n,t,i,r){n&&(t&&(n.style.left=t),n.style.paddingLeft=i?i:null,s===!0&&r&&(n.style.width=r))};i&&i.classList.contains("grid-toolbar-clone")&&t(i,"auto","0px",o.offsetWidth+"px");t(u,"auto","0px","auto");t(f,"auto","0px");t(e,"auto","0px");ecount.global.setTimeout(this.optCommon.ecPageId,function(){var c=this.moveLeft[n]?u:r,l=r.getBoundingClientRect(),o=c&&c.getBoundingClientRect().left,h=5,s;isNaN(o)||(o=o-h);i&&i.classList.contains("grid-toolbar-clone")&&(s=l.right-i.getBoundingClientRect().left+h,t(i,o+"px",null,s+"px"));s=r.offsetWidth+h;t(u,o+"px",null,s+"px");t(f,o+"px");t(e,o+"px")}.bind(this),250)}},changeDisplay:function(){_.each(this.copyElement.cloneTop,function(){});_.each(this.copyElement.cloneLeft,function(){});_.each(this.copyElement.cloneCorner,function(){})},hide:function(){},show:function(){},hideLayer:function(n){n&&this.focus.state&&(n.classList.remove("view-state"),n.classList.remove("edit-state"),n.className.test(this.view.constValue.hideRex)||n.classList.add("hide"))},removeDOM:function(){for(var i=this.fixOptions.tableIndexList,r=Object.keys(i),u,n,t=0,f=r.length;t<f;t++)n=r[t],u=i[n],this.copyElement.cloneTopToolbar[n]&&(this.copyElement.cloneTopToolbar[n]=null),this.copyElement.cloneTop[n]&&(this.copyElement.cloneTopTable[n]=null,this.copyElement.cloneTop[n]=null),this.copyElement.cloneLeft[n]&&(this.copyElement.cloneLeftTable[n]=null,this.copyElement.cloneLeft[n]=null),this.copyElement.cloneCorner[n]&&(this.copyElement.cloneCorner[n]=null,this.copyElement.cloneCornerTable[n]=null)},destroyAll:function(){this.resetDrawCount();this.removeDOM();this.clearCopyOptions();this.clearFixOptions();this.loseFocus();this.hasTopToolbar=null;this.moveTop=null;this.moveLeft=null;this.moveTopChanged=null;this.moveBottomChanged=null;this.moveLeftChanged=null;this.moveRightChanged=null},clearCopyOptions:function(){var n=this;_.each(this.copyElement,function(t,i){t=null;delete n.copyElement[i]});this.copyElement=null},clearFixOptions:function(){var n=this;_.each(this.fixOptions,function(t,i){t=null;delete n.fixOptions[i]});this.fixOptions=null},setCloneTopToolbar:function(){var u,i,n,r,t,f;if(this.fixOptions.isGridTop)return!1;var e=this.optFix.headerFix,o=this.optFix.isCopyHeaderArea,s=this.optFix.rowFixed;if(!e&&!o&&s<=0){this.hasTopToolbar=!1;return}if(!this.fixOptions.$topToolbar||this.fixOptions.$topToolbar.classList.contains("hidden")){this.hasTopToolbar=!1;return}for(this.hasTopToolbar=!0,u=this.fixOptions.tableIndexList,i=Object.keys(u),t=0,f=i.length;t<f;t++)(r=i[t],this.fixOptions.firstGridIndex===r)&&(n=this.fixOptions.$topToolbar.cloneNode(!0),n.setAttribute("data-gid",this.defaultDatas.containerId+ecount.delimiter+ecount.grid.constValue.fix.gridTopToolbar),n.classList.add("hidden"),this.copyElement.cloneTopToolbar[r]=n,$(this.fixOptions.$topToolbar).after(n))},setCloneTop:function(n){var c=this.optFix.headFixed,s=this.optFix.rowFixed||0,l=this.optFix.useFixTitle,e,o,u,t,i,r,f,h;if(c||!(s<=0)||l){for(e=this.fixOptions.tableIndexList,o=Object.keys(e),f=0,h=o.length;f<h;f++)(t=o[f],this.fixOptions.firstGridIndex===t)&&(n&&t!==n||(this.copyElement.cloneTop[t]&&this._removeCloneTop(t),u=e[t],r=u.cloneNode(!0),this.cloneTable(r,u,s,!1,t),i=document.createElement("div"),i.setAttribute("id",ecount.grid.constValue.fix.gridTopDiv),i.setAttribute("data-gid",this.defaultDatas.containerId+ecount.delimiter+ecount.grid.constValue.fix.gridTopDiv),i.setAttribute("data-layouttype","grid"),r.setAttribute("id",ecount.grid.constValue.fix.gridTop),r.setAttribute("data-gridid",r.getAttribute("data-gridid")+ecount.delimiter+ecount.grid.constValue.fix.gridTop),i.classList.add("grid-clone-top"),i.classList.add("hidden"),i.appendChild(r),$(u).after(i),this.copyElement.cloneTop[t]=i,this.copyElement.cloneTopTable[t]=r));return!0}},setCloneLeft:function(n){var f=this.optFix.columnFixed,s,h,e,u,i,t,c,o,l,r,a;if(f&&!(f<=0))for(s=this.fixOptions.tableIndexList,h=Object.keys(s),o=0,l=h.length;o<l;o++)if(u=h[o],u===n){for(e=s[u],i=document.createElement("div"),t=e.cloneNode(!0),r=0,a=t.children.length;r<a;r++)switch(t.children[r].tagName){case"COLGROUP":c=this.removeCloneTableCellInCol(t.children[r],f);break;default:this.removeCloneTableCellInRow(t.children[r],e.children[r],f)}i.classList.add("grid-clone-left");i.classList.add("hidden");i.setAttribute("id",ecount.grid.constValue.fix.gridLeftDiv);i.setAttribute("data-gid",this.defaultDatas.containerId+ecount.delimiter+ecount.grid.constValue.fix.gridLeftDiv);i.setAttribute("data-layouttype","grid");t.removeAttribute("style");t.style.setProperty("width",c+"px","important");t.setAttribute("id",ecount.grid.constValue.fix.gridLeft);t.setAttribute("data-gridid",t.getAttribute("data-gridid")+ecount.delimiter+ecount.grid.constValue.fix.gridLeft);i.appendChild(t);$(e).after(i);this.copyElement.cloneLeft[u]=i;this.copyElement.cloneLeftTable[u]=t}},setCloneCorner:function(n){var o=this.optFix.columnFixed,s=this.optFix.rowFixed,h,c,f,r,i,t,l,a,e,v,u,y;if(!(s<=0)||!(o<=0))for(h=this.fixOptions.tableIndexList,c=Object.keys(h),e=0,v=c.length;e<v;e++)if((r=c[e],this.fixOptions.firstGridIndex===r)&&this.moveTop[r]&&this.moveLeft[r]&&r===n){for(this.copyElement.cloneCorner[r]&&this._removeCloneCorner(r),f=h[r],i=document.createElement("div"),i.setAttribute("data-gid",this.defaultDatas.containerId),i.setAttribute("data-layouttype","grid"),t=f.cloneNode(!0),this.cloneTable(t,f,s,!0),u=0,y=t.children.length;u<y;u++)switch(t.children[u].tagName){case"COLGROUP":a=this.removeCloneTableCellInCol(t.children[u],o);break;default:this.removeCloneTableCellInRow(t.children[u],f.children[u],o);s-=t.children.length}l=this.fixOptions.layer!==window?this.fixOptions.layer.getBoundingClientRect().left:0;i.style.left=(this.isPopup?l+1:l)+"px";i.setAttribute("id",ecount.grid.constValue.fix.gridCornerDiv);i.setAttribute("data-gid",i.getAttribute("data-gid")+ecount.delimiter+ecount.grid.constValue.fix.gridCornerDiv);t.removeAttribute("style");t.style.setProperty("width",a+"px","important");t.setAttribute("id",ecount.grid.constValue.fix.gridCorner);t.setAttribute("data-gridid",t.getAttribute("data-gridid")+ecount.delimiter+ecount.grid.constValue.fix.gridCorner);i.classList.add("grid-clone-corner");i.classList.add("hidden");i.appendChild(t);this.copyElement.cloneCorner[r]=i;this.copyElement.cloneCornerTable[r]=t;$(f).after(i);$(i).offset({top:f.getBoundingClientRect().top})}},removeCloneTableCellInCol:function(n,t){for(var e=this.optFix.checkBoxFixed,r=n.children,f=0,u,i=r.length-1;i>=0;i--)i>=t?n.removeChild(r[i]):(u=parseInt(r[i].style.width),f+=isNaN(u)?0:u,e&&r[i].getAttribute("data-columnid")==="CHK_H"&&n.removeChild(r[i]));return f},removeCloneTableCellInRow:function(n,t,i){var s=n.children,a=t.children,v=this.optFix.checkBoxFixed,c=0,l,u,o,f,h,e,r;for($(s[0]).children().each(function(n,t){c+=+t.getAttribute("colspan")||1}),e=0;e<s.length;e++)for(h=0,f=s[e],u=f.children,o=a[e],l=o.children,f.style.height=o.getBoundingClientRect().height+"px",o.style.height=f.style.height,r=u.length-1;r>=0;r--)h+=+u[r].getAttribute("colspan")||1,c-h>=i?f.removeChild(u[r]):v&&u[r].getAttribute("data-columnid")==="CHK_H"&&(this.checkBoxColumnWidth=this.checkBoxColumnWidth||l[r].offsetWidth,f.removeChild(u[r]))},cloneTable:function(n,t,i,r,u){function l(n){for(var i=n.children,t=i.length-1;t>=0;t--)if(h&&i[t].getAttribute("data-columnid")==="CHK_H"){n.removeChild(i[t]);break}}for(var f,s={},h=this.optFix.checkBoxFixed,a=this.optFix.useFixTitle,v,y,c,e,o=0,p=n.children.length;o<p;o++){switch(n.children[o].tagName){case"COLGROUP":h&&!r&&l(n.children[o]);break;case"THEAD":for(y=n.children[o],e=y.children,s.thead=0,f=e.length-1;f>=0;f--)v=e[f].getAttribute("data-fixtitle"),a&&v?(e[f].remove(),s.thead+=_.parseInt(e[f].style.height)):a||(s.thead+=_.parseInt(e[f].style.height)),h&&!r&&l(e);break;case"TBODY":for(c=n.children[o],e=c.children,f=e.length-1;f>=0;f--)f>=i?c.removeChild(e[f]):(s.tbody=_.parseInt(e[f].style.height),h&&!r&&l(e));break;default:n.removeChild(n.children[o])}this.cloneTopBoundary[u]=s}},setCloneTablePosition:function(){var s,t,h,r,n,u,a,f,e,i,c,v,o,y,p,l;if(this.fixOptions.isGridTop)return!1;for(s=Object.keys(this.fixOptions.tableIndexList),this.setTitleBoundary(),o=0,y=s.length;o<y;o++)t=s[o],h=this.fixOptions.tableIndexList[t],r=h.getBoundingClientRect(),n=this.copyElement.cloneTop[t],u=this.copyElement.cloneLeft[t],a=this.copyElement.cloneLeftTable[t],f=this.copyElement.cloneCorner[t],i=this.optFix.isInclude?this.fixOptions.$contents.getBoundingClientRect().left:this.fixOptions.layer!==window?this.fixOptions.layer.getBoundingClientRect().left:0,c=this.copyElement.cloneTopToolbar[t],v=this.copyElement.cloneTopTable[t],n&&this.hasTopToolbar&&this.moveTop[t]&&this.fixOptions.$topToolbar&&(this.fixOptions.$topToolbar.style.top=this.fixOptions.titleTop+this.fixOptions.titleHeight+"px",this.fixOptions.$topToolbar.style.left=(this.isPopup?i+1:i)+"px",this.fixOptions.$topToolbar.style.width=this.isPopup||this.fixOptions.$topToolbar.style.width!==""?this.fixOptions.titleRight-ecount.gridV2.view.util.getScrollbarWidth()>r.right?r.right-this.fixOptions.$topToolbar.getBoundingClientRect().left+"px":this.fixOptions.$title.offsetWidth-ecount.gridV2.view.util.getScrollbarWidth()+"px":c.offsetWidth+"px",ecount.isResponsiveMode()&&(this.fixOptions.$topToolbar.style.cssText="width:"+this.fixOptions.$topToolbar.style.width+" !important;"+_.join(_.remove(_.split(this.fixOptions.$topToolbar.style.cssText,";"),function(n){return!n.test(/width/)}),";"))),n&&(this.hasTopToolbar?this.fixOptions.$topToolbar&&(e=this.fixOptions.$topToolbar.getBoundingClientRect().top+this.fixOptions.$topToolbar.getBoundingClientRect().height+"px"):e=this.fixOptions.titleTop+this.fixOptions.titleHeight+"px",n.style.top!==e&&(n.style.top=e),n.style.left=(this.isPopup?i+1:i)+"px",n.style.width=this.fixOptions.titleRight-ecount.gridV2.view.util.getScrollbarWidth()>r.right?r.right-n.getBoundingClientRect().left+"px":this.fixOptions.titleWidth-ecount.gridV2.view.util.getScrollbarWidth()+"px",this.__core.freeSizeWidth&&(v.style.width=h.offsetWidth+"px"),this.hasTopToolbar&&this.fixOptions.$topToolbar&&this.fixOptions.$topToolbar.children.length>0&&(p=this.fixOptions.$topToolbar,l=this.fixOptions.$contents.scrollLeft,_.each(this.fixOptions.$topToolbar.children,function(n){var t;n.classList.contains("pull-right")?(t=_.parseInt(c.style.width)-_.parseInt(p.style.width)-l,t&&(n.style.left=t+"px")):n.style.left=-l+"px"}))),u&&(u.style.left=(this.isPopup?i+1:i)+"px",this.moveTop[t]&&n?(u.style.top=n.style.top,$(a).offset({top:r.top})):u.style.top=r.top+"px"),f&&(f.style.left=(this.isPopup?i+1:i)+"px",f.style.top=this.moveTop[t]&&n?n.style.top:r.top+"px")},executeCloneCheckbox:function(n,t,i,r){for(var o=Object.keys(this.fixOptions.tableIndexList),s,u,h,f,e=0;e<o.length;e++)s=o[e],u=this.copyElement.cloneTopTable[s],u&&(h=u.querySelector("[data-columnid='"+t+"'][data-key='"+i+"']"),f=h.querySelector("input[type='checkbox']"),f&&(f.checked=r))},addClass:function(n,t,i,r){var u=this.getCloneCellElement(n,t,i);u=_.isObject(u)&&u.cell;u&&r.forEach(function(n){new RegExp(n,"g").test(u.className)||(u.className!=""&&(u.className+=" "),u.className+=n)})},removeClass:function(n,t,i,r){r.constructor!=Array&&(r=[r]);var u=this.getCloneCellElement(n,t,i);u=_.isObject(u)&&u.cell;u&&(this.hideLayer(u.children[0]),r.forEach(function(n){u.className=u.className.replace(new RegExp("(\\s)"+n+"(?!(w|-))|^"+n+"(?!(w|-))"),"")}))},_getTableKey:function(n,t,i){var r=this.dataRow.getViewDataCellMap(n,t,i)||{};return[ecount.grid.constValue.tableIdPrefix+r.tableId,r.tableIndex].join("-")},getCloneElement:function(n,t,i){var u=this.dataRow.getViewDataCellMap(n,t,i)||{},r=this._getTableKey(n,t,i),o,f,h,s,c,l,e;for([ecount.grid.constValue.formVersion.second,ecount.grid.constValue.formVersion.third,ecount.grid.constValue.formVersion.fourth].contains(this.optForm.version)?this.optCommon.columnType==ecount.grid.constValue.columnType.multi&&n==ecount.grid.constValue.sectionType.tfoot&&(o=this.defaultDatas.tableSectionIndex[r]&&this.defaultDatas.tableSectionIndex[r].tbodyIndex):o=this.defaultDatas.tableSectionIndex[r]&&this.defaultDatas.tableSectionIndex[r][n+"Index"],f=[],h=[],u.rowInfo&&u.cellInfo&&(c=u.rowInfo.trIdx[u.cellInfo.columnRowIdx]),this.copyElement.cloneTopTable[r]&&f.push(this.copyElement.cloneTopTable[r]),this.copyElement.cloneLeftTable[r]&&f.push(this.copyElement.cloneLeftTable[r]),this.copyElement.cloneCornerTable[r]&&f.push(this.copyElement.cloneCornerTable[r]),e=0;e<f.length;e++)s=f[e].children[o]&&f[e].children[o].children[c],s&&s.children[u.cellInfo.columnIdx+u.cellInfo.adjustmentValue]&&(l=s.children[u.cellInfo.columnIdx+u.cellInfo.adjustmentValue],h.push(f[e]));return{map:u,cell:l,tables:h}},getCloneCellElement:function(n,t,i){if(n&&t&&i){var r=this.getCloneElement(n,t,i);return{map:r.map,cell:r.cell}}},getCloneTableElements:function(n,t,i){if(n&&t&&i){var r=this.getCloneElement(n,t,i);return r.tables}},scrollCloneTable:function(n,t){var e,c,o,i,u,l,a,s,v,h,y,f,p,r;if(this.fixOptions.isGridTop||!n||this.fixOptions.$contents!==n.target)return!1;for(t=t||{},this.setTitleBoundary(),e=Object.keys(this.fixOptions.tableIndexList),c=n.target.scrollLeft,f=0,p=e.length;f<p;f++)this.fixOptions.firstGridIndex===e[f]&&(o=e[f],i=this.fixOptions.tableIndexList[o],u=i.getBoundingClientRect(),i.offsetHeight>0&&(l=this.fixOptions.titleTop,a=this.fixOptions.titleHeight,s=this.hasTopToolbar?this.fixOptions.$topToolbar.clientHeight:0,v=this.optFormOption.headerHtmlCallback?10:0,r=$(this.fixOptions.$topToolbar),r&&r.length&&r.hasClass("grid-toolbar-clone")&&(s=s-(r.innerHeight()-r.height())),h=l+a>=u.top-s+v,h&&(t.scrollLeft=c),this.cloneTopFixArea(i,o,u,h,t)),i.offsetWidth>0&&(y=this.fixOptions.layer.offsetLeft>=u.left,this.cloneLeftFixArea(i,o,u,y,t)))},cloneTopFixArea:function(n,t,i,r,u){u=u||{};var f,o,e;this.moveTop[t]=r;this.toggleTopArea(n,t,i,u);f=this.copyElement.cloneTop[t];o=this.copyElement.cloneTopTable[t];e=this.copyElement.cloneLeft[t];f&&(o.style.left=-u.scrollLeft+"px",f.style.width=this.fixOptions.titleRight-ecount.gridV2.view.util.getScrollbarWidth()>i.right?i.right-f.getBoundingClientRect().left+"px":this.optFix.isInclude?this.fixOptions.$contents.offsetWidth-ecount.gridV2.view.util.getScrollbarWidth()+"px":this.fixOptions.$title.offsetWidth-ecount.gridV2.view.util.getScrollbarWidth()+"px",f.style.setProperty("width",f.style.width,"important"));e&&(e.style.height=this._getCloneLeftHeight(r?f:n,t))},_getCloneLeftHeight:function(n,t){var f=ecount.gridV2.view.util.getScrollbarHeight(),i,r;if(this.isPopup&&this.fixOptions.layer!==window&&this.fixOptions.$contents)return i=this.fixOptions.$contents.getBoundingClientRect(),r=i.bottom-n.getBoundingClientRect().top-f,r+"px";var e=this.fixOptions.$contents.getBoundingClientRect(),o=this.fixOptions.tableIndexList[t].getBoundingClientRect(),u=o.top-e.top;return u>0?this.fixOptions.$contents.clientHeight-u+"px":this.fixOptions.$contents.clientHeight+"px"},cloneLeftFixArea:function(n,t,i,r,u){u=u||{};var f,e;this.moveLeft[t]=r;this.toggleLeftArea(n,t,u);r&&(f=this.copyElement.cloneLeft[t],f&&(e=this.copyElement.cloneLeftTable[t],this.moveTop[t]?$(e).offset({top:i.top}):(f.style.top=i.top+"px",e.style.top="0px")))},toggleLeftArea:function(n,t,i){i=i||{};var o=ecount.grid.constValue.fix.gridLeftDiv,s=ecount.grid.constValue.fix.gridCornerDiv,u,r,f,e;this.moveLeft[t]?this.moveLeftChanged[t]||(this.setCloneLeft(t),this.setCloneCorner(t),u=this.copyElement.cloneTop[t],r=this.copyElement.cloneLeft[t],f=this.copyElement.cloneCorner[t],r&&(e=this.fixOptions.layer!==window?this.fixOptions.layer.getBoundingClientRect().left:0,r.style.left=(this.isPopup?e+1:e)+"px",r.style.height=this._getCloneLeftHeight(this.moveTop[t]?u:n,t),this.moveTop[t]&&u&&(r.style.top=u.style.top),r.classList.remove("hidden")),f&&(f.classList.remove("hidden"),f.style.top=this.moveTop[t]&&u?u.style.top:n.getBoundingClientRect().top+"px"),this.moveLeftChanged[t]=!0,this.moveRightChanged[t]=!1):this.moveRightChanged[t]||(_.isFunction(i.beforeRemoveClone)&&(this.focus.cloneTableId===o||this.focus.cloneTableId===s)&&i.beforeRemoveClone(),r=this.copyElement.cloneLeft[t],r&&this._removeCloneLeft(t),f=this.copyElement.cloneCorner[t],f&&this._removeCloneCorner(t),this.moveLeftChanged[t]=!1,this.moveRightChanged[t]=!0)},toggleTopArea:function(n,t,i,r){var e,o,f,u,s;r=r||{};e=ecount.grid.constValue.fix.gridTopDiv;o=ecount.grid.constValue.fix.gridCornerDiv;this.moveTop[t]?this.moveTopChanged[t]||(s=this.setCloneTop(t),this.setCloneCorner(t),this.hasTopToolbar&&s?u=this._setMoveTopToolbarStyle(n,t,i,r.scrollLeft):(u=this.fixOptions.$title,u.style.top=this.fixOptions.titleTop+"px"),this.copyElement.cloneTop[t]&&this._setMoveCloneTopStyle(t,u),_.isFunction(r.afterCreateClone)&&r.afterCreateClone(),this.moveTopChanged[t]=!0,this.moveBottomChanged[t]=!1):this.moveBottomChanged[t]||(_.isFunction(r.beforeRemoveClone)&&(this.focus.cloneTableId===e||this.focus.cloneTableId===o)&&r.beforeRemoveClone(),this.hasTopToolbar&&(this.toggleTopToolbar(this.moveTop[t],n,i),f=this.copyElement.cloneTopToolbar[t],f&&f.classList.add("hidden")),this.copyElement.cloneTop[t]&&this._removeCloneTop(t),this.copyElement.cloneCorner[t]&&this._removeCloneCorner(t),this.moveTopChanged[t]=!1,this.moveBottomChanged[t]=!0)},_setMoveCloneTopStyle:function(n,t){var u=this.optFix.isInclude?this.fixOptions.$contents.getBoundingClientRect().left:this.fixOptions.layer!==window?this.fixOptions.layer.getBoundingClientRect().left:0,i=this.copyElement.cloneTop[n],f=this.copyElement.cloneLeft[n],r=this.copyElement.cloneCorner[n],e=t.getBoundingClientRect();i.style.left=(this.isPopup?u+1:u)+"px";i.style.top=e.top+e.height+"px";i.classList.remove("hidden");r&&(r.style.top=i.style.top,r.classList.remove("hidden"));f&&(f.style.top=i.style.top)},_setMoveTopToolbarStyle:function(n,t,i,r){var u,f,o,e,s;return u=this.toggleTopToolbar(this.moveTop[t],n,i),f=this.copyElement.cloneTopToolbar[t],f&&f.classList.remove("hidden"),u.style.top=this.fixOptions.titleTop+this.fixOptions.titleHeight+"px",this.isPopup||u.style.width!==""||this.optFix.isInclude?(o=ecount.gridV2.view.util.getScrollbarWidth(),e=this.fixOptions.titleRight-o>i.right?i.right-u.getBoundingClientRect().left:this.optFix.isInclude?this.fixOptions.$contents.offsetWidth-o-10:this.fixOptions.$title.offsetWidth-o-5):e=f.offsetWidth,s=$(this.fixOptions.$contents),e=ecount.isResponsiveMode()?e+s.innerWidth()-s.width():e+_.parseInt($(this.fixOptions.$contents).css("padding-right")||"0"),u.style.setProperty("width",e+"px","important"),u.style.setProperty("padding-right","0"),f&&u.children.length>0&&_.each(u.children,function(n){var t=_.parseInt(f.clientWidth)-_.parseInt(u.style.width)-r;n.classList.contains("pull-right")?t&&(n.style.left=t+"px"):n.style.left=-r+"px"}),u},toggleTopToolbar:function(n){var t=this.fixOptions.$topToolbar,i=this.optFix.isInclude?this.fixOptions.$contents.getBoundingClientRect().left+5:this.fixOptions.layer!==window?this.fixOptions.layer.getBoundingClientRect().left:0;return n?(t.style.orgCssText=t.style.cssText,t.style.cssText="",t.style.left=(this.isPopup?i+1:i)+"px",t.classList.add("grid-toolbar-clone"),t.children.length>0&&_.each(t.children,function(n){n.style.position="relative"})):(t.style.cssText=t.style.orgCssText,t.style.width=this.fixOptions.topToolbarWidth,t.classList.remove("grid-toolbar-clone"),t.children.length>0&&_.each(t.children,function(n){n.style.position=""})),t},_removeCloneTop:function(n){$(this.copyElement.cloneTop[n]).remove();delete this.copyElement.cloneTop[n];delete this.copyElement.cloneTopTable[n]},_removeCloneLeft:function(n){$(this.copyElement.cloneLeft[n]).remove();delete this.copyElement.cloneLeft[n];delete this.copyElement.cloneLeftTable[n]},_removeCloneCorner:function(n){$(this.copyElement.cloneCorner[n]).remove();delete this.copyElement.cloneCorner[n];delete this.copyElement.cloneCornerTable[n]},_removeCloneTopToolbar:function(n){$(this.copyElement.cloneTopToolbar[n]).remove();delete this.copyElement.cloneTopToolbar[n]},_isTab:function(){return _.isElement(this.fixOptions.tab)&&this.fixOptions.tab.querySelector(".active")},_currentTabId:function(){var n="";return this.fixOptions.isTab&&(n=this.fixOptions.tab.querySelector(".active").getAttribute("id")),n}};ecount.gridV2.view.paging=function(){};ecount.gridV2.view.paging.prototype={movePage:function(n,t){var r,i;for(ecount.gridV2.logger.log("clicked page Index:"+n.index),r=this.dataCheckbox.getCheckboxUseColumnList(this.tbodyType),i=0;i<r.length;i++)r[i].use&&this.__setting.getCheckBoxRememberChecked(this.tbodyType,r[i].columnId)&&this.__setting.setCheckBoxPagingRememberChecked(this.tbodyType,r[i].columnId,!0);this.optPaging.changeIndexCallback&&(t?t.type={type:ecount.grid.event.list.pageIndexChanging}:t={type:ecount.grid.event.list.pageIndexChanging},this.optPaging.changeIndexCallback(t,{pageIndex:n.index}));this.optPaging.useDefaultPageIndexChanging&&(this.optPaging.currentPage=n.index,this.__core.drawing||this.__fn.render())},moveFirstPage:function(n){this.__datas.instance&&this.__datas.instance.moveFirstPage(n)},moveNextPage:function(n){this.__datas.instance&&this.__datas.instance.moveNextPage(n)},movePrevPage:function(n){this.__datas.instance&&this.__datas.instance.movePrevPage(n)},moveLastPage:function(n){this.__datas.instance&&this.__datas.instance.moveLastPage(n)},initGlobalValue:function(n,t){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.defaultDatas=t;this.__core=n.core;this.__setting=n.setting;this.__renderer=this.__core.render;this.__fn=this.__core.fn;$.extend(this,n.mixinOption);this.generator=new ecount.gridV2.generator},reset:function(){this.__datas={instance:null,pagingControl:{}}},init:function(n,t){this.initGlobalValue(n,t);this.reset()},render:function(n,t){this.renderPagingControl(n);this.renderPagingAreaControls(t)},renderPagingControl:function(n){var i=this.dataPaging.serialize(),t,r;i.totalRowCount<=0||(r=this.generator.get("widget.generator.control"),r.define("widget.paging","paging","paging","paging").setOptions({ecPageID:this.optCommon.ecPageId,containerName:this.optCommon.ecContainerName,tabId:this.optCommon.ecTabId,gridID:this.optCommon.ecGridId}).setGridPagingInfo(i.currentPageIndex,i.rowCountPerPage,i.totalRowCount).setPagingMoveHandler(this.movePage.bind(this)),t=this.generator.get("widget.paging",r.end()),t.render(n),this.dataPaging&&this.dataPaging.setTotalPageCount(t.getState(t._IT_SELF,"opt.totalPage")||0),this.__datas.instance=t,n.parent(".wrapper-toolbar").removeClass("hidden"))},renderPagingAreaControls:function(n){var f=this.dataPaging,e=this.dataPaging.serialize().controlData,r=this.optWidget.commonEventDelegator,i=this.__core.events,u,t={ecPageID:this.optCommon.ecPageId,containerName:this.optCommon.ecContainerName,tabId:this.optCommon.ecTabId,gridID:this.optLayout.containerSelector,gridControlArea:"paging"},o=function(e,o){if(e.controlType){u=!0;var h,c,s=widget.generator.control(),l=function(n,t){s[t]&&s[t](n);t=="decimalUnit"&&n.length==2&&s.numericOnly(n[0],n[1],null,!1,e.controlOption.isPositiveInteger===!0)},a=function(n,t){var r=[t,"paging",o,e.controlType,"custom"].join(ecount.constValue.gridDelimiter);i.exist(r)&&i.off(r);i.on(r,n,null)};e.controlOption&&e.controlOption.datePeriod&&(t.datePeriod=e.controlOption&&e.controlOption.datePeriod);e.controlType=="widget.button"&&(t.css="btn btn-default btn-sm");s.define(e.controlType,o,o);s.setOptions(t);/^(widget.input.*|widget.(select).*)/g.test(e.controlType)&&s.inline();r&&s.delegator(r);_.forEach(e.controlOption,l);_.forEach(e.event,a);c=s.end();h=ecount.common.createNamespace(c.controlType);h=new h(c);h.render(n);f.addPagingControl(o,h);e.controlType=="widget.button"&&delete t.css}};_.forEach(e,o);u&&n.parent(".wrapper-toolbar").removeClass("hidden")},destroyAll:function(){this.__datas.instance&&(this.__datas.instance.destroy&&this.__datas.instance.destroy(),this.__datas.instance=null)}};ecount.gridV2.modules.util={sequenceIndexGenerator:function(n){var t=n||0;return{next:function(){var n=t;return t+=1,n}}}(),parents:function(n,t){for(var i=n.parentNode;i;){if(i.tagName&&i.tagName.test(t))break;i=i.parentNode}return i==document||i==document.body?null:i},closest:function(n,t){for(var i=n;i;){if(i.tagName&&i.tagName.test(t))break;i=i.parentNode}return i==document||i==document.body?null:i},findParentElementByTagName:function(n,t){do if(n&&n.nodeName&&n.nodeName.search(t)!=-1)return n;while(n=n.parentNode);return null}};ecount.gridV2.modules.editLayer=function(){};ecount.gridV2.modules.editLayer.prototype={instance:null,edit_control_cellInfo:null,__datas:null,validateTypes:null,dataQueue:null,setValue:function(n){var t=this.getInstance();t&&(/^widget.(code|multiCode)/g.test(t.controlType)?t.addCode({label:n,value:n}):t.setValue(n))},getContainer:function(){var n=this.__datas.items.length-1;return n==-1?null:this.__datas.items[n]},getInstance:function(n){return(n=typeof n=="number"?n:this.__datas.activeItemIndex,this.__datas.activeItemIndex==-1)?null:this.__datas.items[n]&&this.__datas.items[n].instance},setInstance:function(n){this.__datas.items[this.__datas.items.length-1].instance=n},setEditControlCellInfo:function(n){this.edit_control_cellInfo=n?n:null},destroyWidgetInstance:function(){var n=this.edit_control_cellInfo?this.edit_control_cellInfo.map:null;n&&n.cellInfo.editControlId&&!this.constValue.nativeControlInWidget[n.cellInfo.editControlType]&&this.__events._triggerEvent(ecount.grid.event.list.destroyWidgetInstance,null,{id:n.cellInfo.editControlId});this.edit_control_cellInfo=null},refreshViewLayer:function(n,t,i){for(var f,r=this.getContainer(),u=0,e=r.containerView.children.length;u<e;u++)f=r.containerView.children[u],f.classList.contains("hide")||f.classList.add("hide");r.containerView.appendChild($(this.dataRow.view.makeViewDataCell(n,t,i).cellData.cell.data)[0]);this.focusAndSelect()},isViewMode:function(){var n=this.getContainer(),t=this.getInstance();return t&&n.container.className.test(this.constValue.viewStateRex)&&!n.container.className.test(this.constValue.hideRex)},isInputMode:function(){var n=this.getContainer(),t=this.getInstance();return t&&n.container.className.test(this.constValue.editStateRex)&&!n.container.className.test(this.constValue.hideRex)},show:function(n){var t=this.getContainer();switch(n){case this.constValue.dataType.modeView:this.__datas.isShowing||(this.__datas.isShowing=!0);t.container.classList.remove("edit-state");t.container.className.test(this.constValue.viewStateRex)===!1&&t.container.classList.add("view-state");break;case this.constValue.dataType.modeInput:this.__datas.isShowing||(this.__datas.isShowing=!0);t.container.classList.remove("view-state");t.container.className.test(this.constValue.editStateRex)===!1&&t.container.classList.add("edit-state")}},showLayer:function(){var t=this.getContainer(),n=t.container;this.__datas.isShowing||(this.__datas.isShowing=!0);n.classList.remove("hide");n.classList.remove("hidden")},hideLayer:function(){for(var r,n,t=0,i=this.__datas.items.length;t<i;t++)r=this.__datas.items[t],n=r.container,n.classList.remove("view-state"),n.classList.remove("edit-state"),n.className.test(this.constValue.hideRex)||n.classList.add("hide")},setStateOpenPopup:function(n){this.__datas.isOpenPopup=n},clearItems:function(){for(var n,r,t,i=0,u=this.__datas.items.length;i<u;i++)n=this.__datas.items.shift(),r=n.container,n.instance&&(n.instance.onFocusOut&&n.instance.onFocusOut(),this.__events._triggerEvent(ecount.grid.event.list.destroyWidgetInstance,null,{id:n.instance.id})),t=r.parentNode,t&&(t.removeChild(r),n.instance&&(t.children.length==0&&this.__core.fn.refreshCell(n.instance.gridSectionType,n.instance.gridColumnID,n.instance.gridDataKey),t.children.length==1&&t.children[0].className.test(/validation/)&&this.__core.fn.refreshCell(n.instance.gridSectionType,n.instance.gridColumnID,n.instance.gridDataKey)));this.__datas.activeItemIndex=-1},blur:function(n,t,i,r){var u=this,l,o,f,p,a,v,w,b,k;ecount.gridV2.logger.log(String.format("grid edit layer blur: {0} : {1} : {2}",n,t,i));r=r||{};n==null&&t==null&&i==null&&(n=this.__datas.activeSectionType,t=this.__datas.activeColumnId,i=this.__datas.activeRowId);var d=this.viewCell.getCellElement(n,t,i),y=d.map,c=!1,s,h,e=this.getInstance();if(y&&y.cellInfo&&y.cellInfo.adjustmentValue!=1){if(!e)return;l=e.controlType;o=this.dataRow.getValue(n,t,i);this.constValue.controlInWidget[e.controlType]&&(f=e.getValue());(f==undefined||f==null)&&(f="");(o==undefined||o==null)&&(o="");this.__core.oldValue=o;p=this.dataValidate.get("widget",n,t,i)||{};/^(widget.input.*|widget.(code|multiCode).*)/g.test(l)&&e.isFromFavoriteCode&&e.hideLazyLayer();/^widget.(code|multiCode).*/g.test(l)&&p.isValidate!==!1?(a="",v=!1,ecount.common.isTrue(r.forceOpenPopup)?(a=r.event||"",c=!0):o!=f&&f!=""&&(a="change",c=!0),c==!0&&(w={name:e.labelColumn,code:e.valueColumn,gridDataKey:i,gridColumnID:t,gridSectionType:n},r.data=="F9"?f!=o&&u.__fn.setCell(n,t,i,f,{isRunChange:!1,isRunComplete:!1,callByType:"system"}):r.event!="mousedown"&&(this.__datas.isOpenPopup=!0),b=this.dataRow.getById(n,i,!0),this.__core.editLastActiveSectionType=n,this.__core.editLastActiveColumnId=t,this.__core.editLastActiveRowId=i,k=[i,t,n].join(ecount.constValue.gridDelimiter),ecount.runtime.observingOnce("code.beforeChange",k,function(e){var l,a,y,c;if(e.isSearchMultiItem||e.isPopupOpened?(r.data=="F9"&&o==f?u.__fn.refreshCell(n,t,i,{isRunChange:!1,isRunComplete:!1}):(u.__datas.activeItemIndex=-1,u.__fn.setCell(n,t,i,"",{isRunChange:s===!1?!1:!0,isRunComplete:h===!1?!1:!0,callByType:"system"})),r.event!="mousedown"&&(u.__datas.isOpenPopup=e.isPopupOpened?!1:!0),u.clearViewQueue()):(u.__datas.isOpenPopup=!1,v=!0),u.__core.transaction.push("cell","removeError",["custom",n,t,i]),u.optRow[n].showInputFakeOutLine!==!0&&(u.viewCell.removeClass(n,t,i,["grid-input-selected-cell"]),u.viewRow.removeClass(n,i,[u.constValue.rowEditableClassName])),u.optEditable.highlightHeader){for(l=u.dataRow.getAll(u.theadType),a=u.dataColumn.getById(n,t).propertyName,c=0;c<l.length;c++)if(l[c][a]!=undefined||l[c][a]!=null){y=l[c][u.constValue.keyColumnPropertyName];break}y&&u.viewCell.removeClass(u.theadType,t,y,"muted")}u.__core.data.validate.remove("custom",n,t,i);u.__core.editLastActiveSectionType=null;u.__core.editLastActiveColumnId=null;u.__core.editLastActiveRowId=null}),e.openPopup(null,"",{gridInfo:{event:a,data:r.data,rowItem:b},cellInfo:w})),(c==!1||r.data=="F9"||v==!0)&&(ecount.gridV2.logger.log("destroy widget before"),ecount.gridV2.logger.log("destroy widget after"),ecount.gridV2.logger.log("destroy layer child before"),e.__will_destroy=!0,r.editDoneOption&&(s=r.editDoneOption.isRunChange,h=r.editDoneOption.isRunComplete),this.dataQueue.push({callback:function(){var c,l,a,e;if(o!=f&&v==!1?(ecount.gridV2.logger.log("edit layer set cell - %s %s %s",n,t,i),r.data=="F9"&&(f=""),u.__fn.setCell(n,t,i,f,{isRunChange:s===!1?!1:!0,isRunComplete:h===!1?!1:!0,callByType:"system"})):(ecount.gridV2.logger.log("edit layer refresh cell - %s %s %s",n,t,i),u.__fn.refreshCell(n,t,i,{isRunChange:s===!0?!0:!1,isRunComplete:h===!1?!1:!0})),u.__core.transaction.push("cell","removeError",["custom",n,t,i]),u.view.fix&&u.view.fix.isFocused()&&u.view.fix.setCloneCellValue.call(u.view.fix,n,t,i,f),u.optRow[n].showInputFakeOutLine!==!0&&(u.viewCell.removeClass(n,t,i,["grid-input-selected-cell"]),u.viewRow.removeClass(n,i,[u.constValue.rowEditableClassName])),u.optEditable.highlightHeader){for(c=u.dataRow.getAll(u.theadType),l=u.dataColumn.getById(n,t).propertyName,e=0;e<c.length;e++)if(c[e][l]!=undefined||c[e][l]!=null){a=c[e][u.constValue.keyColumnPropertyName];break}a&&u.viewCell.removeClass(u.theadType,t,a,"muted")}u.__core.data.validate.remove("custom",n,t,i)}}))):(ecount.gridV2.logger.log("destroy widget before"),ecount.gridV2.logger.log("destroy widget after"),ecount.gridV2.logger.log("destroy layer child before"),e.__will_destroy=!0,ecount.gridV2.logger.log("destroy layer child after"),r.editDoneOption&&(s=r.editDoneOption.isRunChange,h=r.editDoneOption.isRunComplete),this.dataQueue.push({callback:function(){var e,o,c,r;if(u.__fn.setCell(n,t,i,f,{isRunChange:s===!1?!1:!0,isRunComplete:h===!1?!1:!0,callByType:"system"}),u.__core.transaction.push("cell","removeError",["custom",n,t,i]),u.view.fix&&u.view.fix.isFocused()&&u.view.fix.setCloneCellValue.call(u.view.fix,n,t,i,f),u.optRow[n].showInputFakeOutLine!==!0&&u.viewCell.removeClass(n,t,i,["grid-input-selected-cell"]),u.optEditable.highlightHeader){for(e=u.dataRow.getAll(u.theadType),o=u.dataColumn.getById(n,t).propertyName,r=0;r<e.length;r++)if(e[r][o]!=undefined||e[r][o]!=null){c=e[r][u.constValue.keyColumnPropertyName];break}c&&u.viewCell.removeClass(u.theadType,t,c,"muted")}l==="widget.textarea"&&u.viewCell.setTextareaHeight(n,t,i);u.__core.data.validate.remove("custom",n,t,i)}}))}this.hideLayer();this.__datas.activeSectionType=null;this.__datas.activeColumnId=null;this.__datas.activeRowId=null;this.__datas.activeItemIndex=-1},destoryLayersChild:function(){var n=this.getContainer()},commit:function(){var n;for(ecount.gridV2.logger.log("edit layer commit %d",this.dataQueue.length);n=this.dataQueue.pop();)n.callback&&n.callback()},clearViewQueue:function(){this.viewQueue=[]},executeViewQueue:function(){if(this.viewQueue.length>0){var n=this.viewQueue.pop();n.fn&&n.fn.apply(n.scope,n.params);this.viewQueue=[]}},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__data=this.__core.data;this.__view=this.__core.view;this.__fn=this.__core.fn;this.__setting=n.setting;this.__renderer=this.__core.render;this.__events=this.__setting.eventsGet();$.extend(this,n.mixinOption)},reset:function(){this.__datas={isShowing:!1,isOpenPopup:!1,activeSectionType:null,activeColumnId:null,activeRowId:null,activeItemIndex:-1,prevActiveItemIndex:-1,items:[]}},createContainer:function(){for(var s,n=$("<div class='hide grid-input-holder edit_container '><div id='view' class='grid-input-data-view'><\/div><div id='edit' class='grid-input-data-edit'><\/div><\/div>"),u=n[0],i=n.find("#edit"),f=i[0],r=n.find("#view"),e=r[0],t=0,o=this.__datas.items.length;t<o;t++)s=this.__datas.items[t];this.__datas.items.push({$container:n,container:u,$containerEdit:i,containerEdit:f,$containerView:r,containerView:e})},initDataValue:function(){this.dataQueue=[];this.viewQueue=[];this.validateTypes=["custom","widget"]},init:function(n){this.initGlobalValue(n);this.initDataValue();this.reset()},render:function(n,t,i,r){var f=this.getInstance(),r=r||{},u;this.__datas.activeSectionType==n&&this.__datas.activeColumnId==t&&this.__datas.activeRowId==i&&f||(u=function(){var f,o,e,u;this.changeActiveCell(n,t,i);this.dataColumn.setStructureInfo(n);var s=this.viewCell.getCellElement(n,t,i),l=this.dataRow.getById(n,i),a=this.dataColumn.getById(n,t),v=s.cell,h=s.map,c=r.modeInput||!ecount.config.user.IS_SLIP_INPUTTYPE_MOVE;if(h.cellInfo.adjustmentValue!=1){if(this.clearItems(),this.__datas.activeItemIndex=this.__datas.items.length,this.createContainer(),this.optRow[n].showInputFakeOutLine==="activeRow"&&(this.viewRow.addClass(n,i,[this.constValue.rowEditableClassName]),this.__core.deactiveRowId&&this.__core.deactiveRowId!=i&&this.viewRow.removeClass(this.__core.deactiveSectionType,this.__core.deactiveRowId,[this.constValue.rowEditableClassName])),this.optEditable.highlightHeader){for(f=this.dataRow.getAll(this.theadType),o=this.dataColumn.getById(n,t).propertyName,u=0;u<f.length;u++)if(f[u][o]!=undefined||f[u][o]!=null){e=f[u][this.constValue.keyColumnPropertyName];break}this.__core.deactiveColumnId&&this.viewCell.removeClass(this.theadType,this.__core.deactiveColumnId,e,"muted");e&&this.viewCell.addClass(this.theadType,t,e,"muted")}this.lazyRender(n,t,i,c)}}.bind(this),u())},lazyRender:function(n,t,i,r){var g=this,k,d,f,e;this.dataColumn.setStructureInfo(n);var c=this.dataColumn.getById(n,t),l=this.viewCell.getCellElement(n,t,i),u=l.cell,o=l.map,a,s,v,y,h,w,b,p;ecount.gridV2.logger.log("edit layer lazyRender - active element");ecount.gridV2.logger.log(document.activeElement);this.view.fix&&this.view.fix.isFocused()&&(p=this.view.fix.getFocusedCloneCell(),p.cell&&(u=p.cell));(ecount.constValue.isIE||ecount.constValue.isFireFox)&&(w=u.clientHeight,b=u.clientWidth);this.renderEditLayer(n,t,i,o);["widget"].forEach(function(r){var u=this.dataValidate.get(r,n,t,i);u&&!u.isValidate&&(u.error.widget.needValidate?this.__core.view.destroyPopover(n,t,i):this.viewCell.removeError(r,n,t,i))}.bind(this));ecount.gridV2.logger.log("edit layer cell");ecount.gridV2.logger.log(u);v=this.getContainer();y=v.$container;h=this.getInstance();(ecount.constValue.isIE||ecount.constValue.isFireFox)&&(u.clientHeight>0&&(u.style.height=u.clientHeight+"px"),y.css("width",b+"px").css("height",w+"px"),this.constValue.isFireFox&&y.css("left","'-1px'").css("top","-1px"));u.appendChild(v.container);u.classList.contains(this.constValue.cellEditableActiveRex)||u.classList.add("grid-input-selected-cell");this.showLayer();this.show(r?this.constValue.dataType.modeInput:this.constValue.dataType.modeView);this.setTextareaHeight(n,t,i);this.focusAndSelect();c&&c.pairId&&h&&h.hasFn&&(a=this.__core.view.cell.getCellElement(n,c.pairId,i),s=a.map,f=l.cell.getBoundingClientRect(),e=a.cell.getBoundingClientRect(),k=o.cellInfo.columnRowIdx<s.cellInfo.columnRowIdx?e.top+e.height-(f.top+f.height):o.cellInfo.columnRowIdx>s.cellInfo.columnRowIdx?e.top+e.height-(f.top+f.height):Math.abs(f.top+f.height-(e.top+e.height))/-2,d=o.cellInfo.columnIdx<s.cellInfo.columnIdx?f.left+f.width-(e.left+e.width):f.left-e.left+(f.width-e.width),h.setState("fn","style.inline","position:absolute; top:"+k+"px; right:"+d+"px;"));this.renderViewLayer(u)},changeActiveCell:function(n,t,i){this.__datas.activeSectionType=n;this.__datas.activeColumnId=t;this.__datas.activeRowId=i},renderEditLayer:function(n,t,i,r){var u=this.dataColumn.getAll(n,this.constValue.returnType.multi),f=this.getContainer(),e=f.$containerEdit,o=this.__renderer.table.renderWidgetControl(n,t,i,{$el:e,modeView:this.constValue.dataType.modeInput,rowCurrentRowIndex:r.rowInfo.dataIdx*u.length+(r.cellInfo.rowIdx||0),columnCurrentColumnIndex:r.cellInfo.columnIdx,groupRowIndex:r.cellInfo.columnRowIdx});this.setInstance(o)},renderViewLayer:function(n){for(var o,r,s=this.getContainer(),e=s.containerView,t,u=[],f=[],i=n.children.length-1;i>-1;i--)t=n.children[i],/(validation)/g.test(t.className)?u.push(t):t.getAttribute("class")&&t.getAttribute("class").indexOf("tree-arrow")>-1||t.getAttribute("class")&&t.getAttribute("class").indexOf("edit_container")>-1||f.push(t);for(i=0,o=u.length;i<o;i++)n.children[0]?n.insertBefore(u[i],n.children[0]):n.appendChild(u[i]);for(r=0;r<f.length;r++)e.hasChildNodes(f[r])||e.appendChild(f[r])},focusAndSelect:function(){var t=this.getContainer(),n=t.$container.find("input[type='text'], textarea");ecount.common.focusinStartTime=(new Date).getTime();n.length>0&&(this.view.fix&&(this.view.fix.isFocused()?this.view.fix.setCloneTablePositionSync():this.view.fix.avoidCloneTable(this.__datas.activeSectionType,this.__datas.activeColumnId,this.__datas.activeRowId)),n[0].focus());this.constValue.isIE?ecview.util.select(n,this.optCommon.ecPageId,{useTimer:!1}):ecview.util.select(n,this.optCommon.ecPageId)},getActiveCell:function(){var n=this.getInstance();return{activeSectionType:n?this.__datas.activeSectionType:null,activeColumnId:n?this.__datas.activeColumnId:null,activeRowId:n?this.__datas.activeRowId:null}},destroyAll:function(){},serialize:function(){return this.__datas},setTextareaHeight:function(n,t,i){var r=this.getInstance(),u;r&&r.controlType==="widget.textarea"&&(u=this.view.cell.setTextareaHeight(n,t,i,{textareaColumnId:t,textareaRowId:i,isTargetTextarea:!0,rows:r.getRows()}),this.setContainerHeight(u))},setContainerHeight:function(n,t){var i=this.getContainer(),u=-(n/2),f,r;i&&((ecount.constValue.isIE||ecount.constValue.isFireFox)&&(f=i.$container.closest("tr").get(0),r=t?n+7:f.offsetHeight,i.$container.css("height",r+"px"),i.$container.parent().css("height",r+"px")),i.containerEdit.style.marginTop=u+"px",i.containerView.style.marginTop=u+"px",i.containerView.style.height=n+"px")}};ecount.gridV2.modules.boundary=$.Class(null,{top:-1,left:-1,bottom:-1,right:-1,mergeBoundary:function(n){var t=!1,i=!1;return t=this.setTopLeftBoundary(n.top,n.left),i=this.setBottomRightBoundary(n.bottom,n.right),t||i},addBoundary:function(n){var t=!1,i=!1;return t=this.setTopLeftBoundary(n.top,n.left),i=this.setBottomRightBoundary(n.bottom,n.right),t||i},addBoundaryByIndex:function(n,t){var i=!1,r=!1;return i=this.setTopLeftBoundary(n,t),r=this.setBottomRightBoundary(n,t),i||r},setTopLeftBoundary:function(n,t){var i=!1;return(this.top==-1||this.top>n)&&(this.top=n,i=!0),(this.left==-1||this.left>t)&&(this.left=t,i=!0),i},setBottomRightBoundary:function(n,t){var i=!1;return(this.bottom==-1||this.bottom<n)&&(this.bottom=n,i=!0),(this.right==-1||this.right<t)&&(this.right=t,i=!0),i},compareBoundary:function(n){return this.top!=n.top?!1:this.left!=n.left?!1:this.bottom!=n.bottom?!1:this.right!=n.right?!1:!0},compareInboundBoundary:function(n){return this.isValid()?this.top<=n.top&&this.bottom>=n.bottom&&this.left<=n.left&&this.right>=n.right?!0:!1:!1},compareOutboundBoundary:function(){},isValid:function(){return this.top==-1?!1:this.left==-1?!1:this.bottom==-1?!1:this.right==-1?!1:!0},clone:function(){return{top:this.top,left:this.left,bottom:this.bottom,right:this.right}},reset:function(){this.top=-1;this.left=-1;this.bottom=-1;this.right=-1},get:function(){return{top:this.top,left:this.left,bottom:this.bottom,right:this.right}},set:function(n){this.top=n.top;this.left=n.left;this.bottom=n.bottom;this.right=n.right},init:function(){this.reset()},render:function(){},destroyAll:function(){}});ecount.gridV2.modules.boundary.inbound=function(n,t){return ecount.gridV2.modules.boundary.inboundRow(n,t)&&ecount.gridV2.modules.boundary.inboundColumn(n,t)};ecount.gridV2.modules.boundary.outbound=function(n,t){return!ecount.gridV2.modules.boundary.inbound(n,t)};ecount.gridV2.modules.boundary.inboundRow=function(n,t){return n.top<=t.top&&n.bottom>=t.bottom};ecount.gridV2.modules.boundary.outboundRow=function(n,t){return!ecount.gridV2.modules.boundary.inboundRow(n,t)};ecount.gridV2.modules.boundary.inboundColumn=function(n,t){return n.left<=t.left&&n.right>=t.right};ecount.gridV2.modules.boundary.outboundColumn=function(n,t){return!ecount.gridV2.modules.boundary.inboundColumn(n,t)};ecount.gridV2.modules.keyboard=function(){};ecount.gridV2.modules.keyboard.list=function(){};ecount.gridV2.modules.keyboard.list.prototype={isActive:function(){return this.__datas.prevRowIndex==-1&&this.__datas.curRowIndex!=-1||this.__datas.prevRowIndex!=-1&&this.__datas.curRowIndex==-1},onKeydown:function(n,t){var i=t.which;switch(i){case 37:this.optKeyboard.useMovePage&&this.onLeft(n,t);break;case 38:this.onUp(n,t);break;case 39:this.optKeyboard.useMovePage&&this.onRight(n,t);break;case 40:this.onDown(n,t);break;case 13:return this.onEnter(n,t);case 32:this.onSpacebar(n,t)}},onKeyup:function(n,t){if(n&&!_.isNull(n.cindex)){var i=event.which;switch(i){case 37:this.optKeyboard.useMovePage&&this.viewPaging&&this.viewPaging.movePage&&this.viewPaging.movePage({index:n.cindex},t);break;case 39:this.optKeyboard.useMovePage&&this.viewPaging&&this.viewPaging.movePage&&this.viewPaging.movePage({index:n.cindex},t)}}},onInput:function(){},removePrevRowClass:function(){if(this.__datas.prevRowIndex!=-1){var t=this.viewRow.getSectionElement(this.tbodyType),n=t.children[this.__datas.prevRowIndex];n.className.test(this.__datas.activeClass)&&(n.className=n.className.replace(new RegExp("(\\s)"+this.__datas.activeClass+"(?!(\\w|-))|^"+this.__datas.activeClass+"(?!(\\w|-))"),""))}},removeCurRowClass:function(){if(this.__datas.curRowIndex!=-1){var t=this.viewRow.getSectionElement(this.tbodyType),n=t.children[this.__datas.curRowIndex];n.className.test(this.__datas.activeClass)&&(n.className=n.className.replace(new RegExp("(\\s)"+this.__datas.activeClass+"(?!(\\w|-))|^"+this.__datas.activeClass+"(?!(\\w|-))"),""))}},addCurRowClass:function(n,t,i){var u=this.dataRow.getByIndex(n,t),r=u&&u[this.constValue.keyColumnPropertyName];typeof i=="string"&&(i=[i]);r&&(this.viewRow.addClass(n,r,i),this.viewRow.focus(n,r))},onUp:function(n){var y=this.__datas.prevRowIndex,p=this.__datas.curRowIndex,w=this.dataRow.getAll(this.tbodyType),i,a,v,r,f,t,e,u,o;if(w){var s=this.dataRow.getAll(this.tbodyType).length,b=this.dataColumn.getAll(this.tbodyType,this.constValue.returnType.multi),h=n.shiftKey?5:1,c=!0;if(this.optCommon.gridStyle==this.constValue.gridStyle.tree&&this.__datas.curRowIndex-1>-1){var it=this.dataTree.serialize(),k=this.dataRow.getByIndex(this.tbodyType,this.__datas.curRowIndex),d=k[this.constValue.tree.set],l=this.dataRow.getByIndex(this.tbodyType,this.__datas.curRowIndex-1),g=l[this.constValue.tree.set],nt=parseInt(d[this.constValue.tree.depth],10),tt=parseInt(g[this.constValue.tree.depth],10);nt<tt&&(i=this.dataTree.getParentKey(this.tbodyType,l[this.constValue.keyColumnPropertyName]),this.dataTree.isTreeExpand(this.tbodyType,i)||(a=this.dataTree.getChildAll([],i),a&&(h=this.dataTree.getChildAll([],i).length+1)))}if(this.__datas.curRowIndex!=-1&&(this.__datas.prevRowIndex=this.__datas.curRowIndex),this.__datas.prevRowIndex!=-1&&(this.__datas.curRowIndex=this.__datas.prevRowIndex-h),this.__datas.prevRowIndex>-1&&this.removePrevRowClass(),this.__datas.curRowIndex<0)if(this.optKeyboard.continueMoveCursor&&!n.changeGrid&&(this.__datas.curRowIndex=p,this.__datas.prevRowIndex=y,c=this.optKeyboard.continueMoveCursor("up")),c)s==0?(this.__datas.prevRowIndex=-1,this.__datas.curRowIndex=0):this.__datas.curRowIndex=s*b.length-1;else{this.reset();this.__datas.lastCursor="up";return}this.__datas.curRowIndex!=-1&&(v=this.viewRow.getSectionElement(this.tbodyType),r=v.children[this.__datas.curRowIndex],r.className.test(this.__datas.activeClass)||(r.className+=" "+this.__datas.activeClass+" "),f=$(r).find("td:not(.hide) input[type='checkbox'], a, span.tree-arrow"),t=f.length>0?f[0]:null,t&&(e=$(t)),t&&t.focus(),u=e&&e.closest("td"),o=u&&u.length>0?u[0]:null,o&&this.viewCell.scrollDownMove(o))}},onLeft:function(n,t){this.optKeyboard.useMovePage&&(t.shiftKey?this.viewPaging&&this.viewPaging.moveFirstPage(!0):this.viewPaging&&this.viewPaging.movePrevPage(!0))},onRight:function(n,t){this.optKeyboard&&this.optKeyboard.useMovePage&&(t.shiftKey?this.viewPaging&&this.viewPaging.moveLastPage(!0):this.viewPaging&&this.viewPaging.moveNextPage(!0))},onDown:function(n){var y=this.__datas.prevRowIndex,p=this.__datas.curRowIndex,r,v,u,e,t,o,f,s;this.__datas.lastCursor&&this.__datas.lastCursor=="up"&&(this.__datas.lastCursor=null);var w=this.dataColumn.getAll(this.tbodyType,this.constValue.returnType.multi),h,i,c=n.shiftKey?5:1,l=this.dataRow.getAll(this.tbodyType).length*w.length,a=!0;if(this.optCommon.gridStyle==this.constValue.gridStyle.tree&&this.__datas.curRowIndex>-1&&(r=this.dataTree.serialize(),h=this.dataRow.getByIndex(this.tbodyType,this.__datas.curRowIndex),i=h[this.constValue.keyColumnPropertyName],r&&r.listParentToChild[i]&&!r.listParentToChild[i][this.constValue.tree.expand]&&(c=this.dataTree.getChildAll([],i).length+1)),this.__datas.curRowIndex>-1&&(this.__datas.prevRowIndex=this.__datas.curRowIndex),this.__datas.prevRowIndex<0?l==0?(this.__datas.prevRowIndex=-1,this.__datas.curRowIndex=0):this.__datas.curRowIndex=0:this.__datas.curRowIndex=this.__datas.prevRowIndex+c,this.__datas.prevRowIndex>-1&&this.removePrevRowClass(),this.__datas.curRowIndex>=l)if(this.optKeyboard.continueMoveCursor&&!n.changeGrid&&(this.__datas.curRowIndex=p,this.__datas.prevRowIndex=y,a=this.optKeyboard.continueMoveCursor("down")),a)this.__datas.curRowIndex=0;else{this.reset();this.__datas.lastCursor="down";return}this.__datas.curRowIndex!=-1&&(v=this.viewRow.getSectionElement(this.tbodyType),u=v.children[this.__datas.curRowIndex],u.className.test(this.__datas.activeClass)||(u.className+=" "+this.__datas.activeClass+" "),e=$(u).find("td:not(.hide) input[type='checkbox'], a, span.tree-arrow"),t=e.length>0?e[0]:null,t&&(o=$(t)),t&&t.focus(),f=o&&o.closest("td"),s=f&&f.length>0?f[0]:null,s&&this.viewCell.scrollDownMove(s))},onEnter:function(){var n,r,i,t,u;if(this.__datas.curRowIndex!=-1&&this.optKeyboard.enterForExecute){if(r=this.viewRow.getSectionElement(this.tbodyType),i=r.children[this.__datas.curRowIndex],this.optKeyboard.executeColumnIdList){for(t=0,u=this.optKeyboard.executeColumnIdList.length;t<u;t++)if(n=i.querySelectorAll("td[data-columnid='"+this.optKeyboard.executeColumnIdList[t]+"'] > a"),n.length>0)break}else n=i.querySelectorAll("a");return n&&n.length>0&&n[0].click(),!1}},onSpacebar:function(){var n,f;if(this.__datas.curRowIndex!=-1&&this.optKeyboard.spacebarForSelect){var r=[],t,i,u,o=this.viewRow.getSectionElement(this.tbodyType),s=o.children[this.__datas.curRowIndex],e=s.getAttribute("data-key");if(!e)return;if(this.optKeyboard.useSelectEach&&this.optKeyboard.fireColumnIdList&&this.optKeyboard.fireColumnIdList.length>0)for(n=0,f=this.optKeyboard.fireColumnIdList.length;n<f;n++)u=this.viewCell.getCellElement(this.tbodyType,this.optKeyboard.fireColumnIdList[n],e),i=u.cell,i&&(t=i.querySelector("input[type=checkbox]"),t&&r.push(t));else u=this.viewCell.getCellElement(this.tbodyType,this.constValue.checkBoxPropertyName,e),i=u.cell,i&&(t=i.querySelector("input[type=checkbox]"),t&&r.push(t));for(n=0,f=r.length;n<f;n++)r[n].click()}},onClear:function(){this.removeCurRowClass();this.__datas.curRowIndex=-1;this.__datas.prevRowIndex=-1},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__fn=this.__core.fn;this.__api=this.__core.api;this.__setting=n.setting;$.extend(this,n.mixinOption)},reset:function(){this.__transactionState=0;this.__datas={defaultTopMargin:60,defaultBottomMargin:60,activeClass:"active-kbd",prevRowIndex:-1,curRowIndex:-1,lastCursor:null}},init:function(n){this.initGlobalValue(n);this.reset()},render:function(){},destroyAll:function(){}};ecount.gridV2.modules.keyboard.edit=function(){};ecount.gridV2.modules.keyboard.edit.prototype={setElementFocus:function(n,t,i,r,u){if([this.constValue.checkBoxPropertyName,this.constValue.rowMoveablePropertyName].contains(i.id)||ecount.common.isTrue(this.constValue.nativeControlInGrid[r||u])||ecount.common.isTrue(this.constValue.nativeControlInWidget[r||u]))t.focus();else{var f=document.createEvent("MouseEvents");f.initEvent("click",!0,!0);f.shiftKey=n.shiftKey;f.altKey=n.altKey;f.ctrlKey=n.ctrlKey;f.ignoreDetail=!0;t.dispatchEvent(f)}},setActiveArea:function(n){this.__core.activeSectionType=n.sectionType;this.__core.activeColumnId=n.columnId;this.__core.activeRowId=n.rowId;this.__core.activeColumnIndex=n.colIdx;this.__core.activeRowIndex=n.rowIdx;this.__core.lastFocusedActiveSectionType=n.sectionType;this.__core.lastFocusedActiveColumnId=n.columnId;this.__core.lastFocusedActiveRowId=n.rowId;this.__core.lastFocusedActiveColumnIndex=n.colIdx;this.__core.lastFocusedActiveRowIndex=n.rowIdx},onLeft:function(n,t){var u={isPreventDefault:!1,isMoved:!1,isFocusInWidget:!1},w,h,b;if(this.__core.isActive){var g=this.dataRow.getAll(n.gridSectionType),a=this.dataColumn.getAll(n.gridSectionType,this.constValue.returnType.single,!1,"system",{isNotIndexSort:!0}),v=n.gridDataIndex,e,p,y,o=[],c,f,l,k=n.gridColumnID,r=parseInt(n.cindex==undefined||n.cindex==null?0:n.cindex)-1,d=t.which,i,s;if(f=this.dataRow.getViewDataCellInfo(n.gridSectionType,n.gridColumnID,n.gridDataKey),this.constValue.combineControlWidget[f.controlType]){if(h=this.dataRow.getViewDataCellMap(n.gridSectionType,n.gridColumnID,n.gridDataKey),!h.cellInfo&&!h.rowInfo&&!h.tableIndex)return;c=this.viewCell.getCellElement(n.gridSectionType,n.gridColumnID,n.gridDataKey);l=c.cell;i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,h.cellInfo.editControlId);w=l.querySelectorAll(this.constValue.controlSelector[f.controlType]);w.length>0&&(o=w);r=i&&i.getReversedFocusableIndex();s=i&&$.isArray(r)&&r.length>1&&i.get(r[0]).getComponent(r[1])}else i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,n.gridColumnID,n.gridDataKey),s=i&&i.getComponent(r);if(s)return u.isFocusInWidget=!0,u.isMoved=!0,u.isPreventDefault=!0,this.constValue.combineControlWidget[f.controlType]?i.get(r[0]).setFocus(r[1]):i.setFocus(r),this.optRow[n.gridSectionType].showInputFakeOutLine==="activeRow"&&this.viewRow.removeClass(n.gridSectionType,n.gridDataKey,[this.constValue.rowEditableClassName]),u;for(;v>-1;v--){if(n.gridDataIndex!=v)if(d==37)break;else y=g[v][this.constValue.keyColumnPropertyName],p=this.dataColumn.getByMaxCursorIndex(n.gridSectionType);else y=n.gridDataKey,p=this.dataColumn.getPrevColumn(n.gridSectionType,k);for(e=v==n.gridDataIndex?n.gridColumnIndex-1:a.length-1;e>-1;e--)if(!ecount.common.isTrue(a[e].isHideColumn)&&(c=this.viewCell.getCellElement(n.gridSectionType,a[e].id,y),!c.map||!c.map.cellInfo||c.map.cellInfo.disabled!="disabled")){if(l=c.cell,l){if(f=this.dataRow.getViewDataCellInfo(n.gridSectionType,a[e].id,y),!f.editableState){k=p.id;continue}if(this.constValue.systemControlInGrid[f.controlType]&&d==37)return u;if(this.constValue.controlInWidget[f.controlType])o.push(l);else if(this.constValue.nativeControlInGrid[f.controlType])o=l.querySelectorAll(this.constValue.controlSelector[f.controlType]);else if(this.constValue.combineControlWidget[f.controlType]){if(h=this.dataRow.getViewDataCellMap(n.gridSectionType,a[e].id,y),!h.cellInfo&&!h.rowInfo&&!h.tableIndex)return;if(i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,h.cellInfo.editControlId),!i.isVisible())continue;o=l.querySelectorAll(this.constValue.controlSelector[f.controlType]);r=i&&i.getReversedFocusableIndex();s=i&&$.isArray(r)&&r.length>1&&i.get(r[0]).getComponent(r[1]);s&&(i.get(r[0]).setFocus(r[1]),u.isPreventDefault=!0,u.isMoved=!0,u.isFocusInWidget=!0)}else if(this.constValue.nativeControlInWidget[f.controlType]){if(i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,a[e].id,y),!i.isVisible())continue;o=l.querySelectorAll(this.constValue.controlSelector[f.controlType]);r=i&&i.getReversedFocusableIndex();s=i&&r>-1&&i.getComponent(r);s&&(i.setFocus(r),u.isPreventDefault=!0,u.isMoved=!0,u.isFocusInWidget=!0)}}if(o.length>0||s){p=a[e];break}}if(o.length>0||s)break}o.length>0?(this.optRow[n.gridSectionType].showInputFakeOutLine==="activeRow"&&(n.gridDataKey!=y||s)&&this.viewRow.removeClass(n.gridSectionType,n.gridDataKey,[this.constValue.rowEditableClassName]),this.viewCell.scrollLeftMove(l),this.setElementFocus(n,o[o.length-1],p,c.map.cellInfo.editControlType,c.map.cellInfo.controlType),u.isPreventDefault=!0,u.isMoved=!0):this.optKeyboard.prevMoveCallback&&(b=this.optKeyboard.prevMoveCallback(),b!==undefined&&(u.isPreventDefault=!b));v==0&&e==0;v==-1&&e==-1&&this.optRow[n.gridSectionType].showInputFakeOutLine==="activeRow"&&this.__core.deactiveRowId&&this.viewRow.removeClass(n.gridSectionType,this.__core.deactiveRowId,[this.constValue.rowEditableClassName])}return u},onUp:function(n){var t={isPreventDefault:!1,isMoved:!1,isFocusInWidget:!1},c,a;if(this.__core.isActive){var v=this.dataColumn.getById(n.gridSectionType,n.gridColumnID,n.gridDataKey),y=this.dataRow.getAll(n.gridSectionType),l=n.gridDataIndex-1,e,u,f,o=[],s,i,h,r;if(u=this.viewCell.getCellElement(n.gridSectionType,n.gridColumnID,n.gridDataKey),this.constValue.nativeControlInWidget[u.map.cellInfo.editControlType])return t.isPreventDefault=!0,t.isMoved=!0,t;for(;l>-1;l--){if(e=n.gridDataIndex!=l?y[l][this.constValue.keyColumnPropertyName]:n.gridDataKey,u=this.viewCell.getCellElement(n.gridSectionType,n.gridColumnID,e),s=u.cell,u.map.cellInfo.editableState&&s)if(f=this.dataRow.getViewDataCellInfo(n.gridSectionType,n.gridColumnID,e),this.constValue.controlInWidget[f.controlType])o.push(s);else if(this.constValue.nativeControlInGrid[f.controlType])o=s.querySelectorAll(this.constValue.controlSelector[f.controlType]);else if(this.constValue.combineControlWidget[f.controlType]){if(c=this.dataRow.getViewDataCellMap(n.gridSectionType,n.gridColumnID,e),!c.cellInfo&&!c.rowInfo&&!c.tableIndex)return;if(i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,c.cellInfo.editControlId),!i.isVisible())continue;o=s.querySelectorAll(this.constValue.controlSelector[f.controlType]);r=i&&i.getFocusableIndex();h=i&&$.isArray(r)&&r.length>1&&i.get(r[0]).getComponent(r[1]);h&&(i.get(r[0]).setFocus(r[1]),t.isPreventDefault=!0,t.isMoved=!0,t.isFocusInWidget=!0)}else if(this.constValue.nativeControlInWidget[f.controlType]){if(i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,n.gridColumnID,e),!i.isVisible())continue;r=i&&i.getFocusableIndex();h=i&&r>-1&&i.getComponent(r);h&&(i.setFocus(r),t.isPreventDefault=!0,t.isMoved=!0,t.isFocusInWidget=!0)}if(o.length>0||h)break}o.length>0&&!t.isPreventDefault?(this.optRow[n.gridSectionType].showInputFakeOutLine==="activeRow"&&n.gridDataKey!=e&&this.viewRow.removeClass(n.gridSectionType,n.gridDataKey,[this.constValue.rowEditableClassName]),this.setElementFocus(n,o[0],v,u.map.cellInfo.editControlType,u.map.cellInfo.controlType),this.viewCell.scrollIntoView(s,"up",u.map.rowInfo.trIdx.length),t.isPreventDefault=!0,t.isMoved=!0):h?(t.isPreventDefault=!0,t.isMoved=!0,this.optRow[n.gridSectionType].showInputFakeOutLine==="activeRow"&&this.viewRow.removeClass(n.gridSectionType,n.gridDataKey,[this.constValue.rowEditableClassName])):this.optKeyboard.prevMoveCallback&&(a=this.optKeyboard.prevMoveCallback(),a!==undefined&&(t.isPreventDefault=!a))}return t},onRight:function(n,t){var f={isPreventDefault:!1,isFocusInWidget:!1,isMoved:!1},k,b,p,ut,e,nt;if(this.__core.isActive){var d=t.which,tt=d==13,et=d==9,g=this.dataRow.getAll(n.gridSectionType),v=n.gridDataIndex,it=g.length,y,s,l,c=[],a,u,h,w=n.gridColumnID,rt=this.dataColumn.getById(n.gridSectionType,w),ft=rt&&rt.cursorIndex,i,o,r;if(tt&&this.optColumn[n.gridSectionType].moveCursorType==this.constValue.moveCursorType.index&&ft!=undefined){if(u=this.dataRow.getViewDataCellInfo(n.gridSectionType,n.gridColumnID,n.gridDataKey),this.constValue.combineControlWidget[u.controlType]){if(e=this.dataRow.getViewDataCellMap(n.gridSectionType,n.gridColumnID,n.gridDataKey),!e.cellInfo&&!e.rowInfo&&!e.tableIndex)return;a=this.viewCell.getCellElement(n.gridSectionType,n.gridColumnID,n.gridDataKey);h=a.cell;i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,e.cellInfo.editControlId);b=h.querySelectorAll(this.constValue.controlSelector[u.controlType]);b.length>0&&(c=b);r=i&&i.getFocusableIndex();o=i&&$.isArray(r)&&r.length>1&&i.get(r[0]).getComponent(r[1])}else i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,n.gridColumnID,n.gridDataKey),r=i&&i.getFocusableIndex(),o=i&&i.getComponent(r);if(o)this.constValue.combineControlWidget[u.controlType]?i.get(r[0]).setFocus(r[1]):i.setFocus(r),f.isPreventDefault=!0,f.isMoved=!0;else for(p=this.dataColumn.getAll(n.gridSectionType,this.constValue.returnType.single,!1,"system",{isNotIndexSort:!0}),k=this.dataColumn.getMaxCursorIndex(n.gridSectionType);v<it;){if(n.gridDataIndex!=v?(l=g[v][this.constValue.keyColumnPropertyName],s=w&&this.dataColumn.getAllMoreThanCursorIndexByKeyboard(n.gridSectionType,w,{isNotIncludeSystemColumn:!0})||this.dataColumn.getByMinCursorIndex(n.gridSectionType)):(l=n.gridDataKey,s=this.dataColumn.getAllMoreThanCursorIndexByKeyboard(n.gridSectionType,w,{isNotIncludeSystemColumn:!0})),s){if(a=this.viewCell.getCellElement(n.gridSectionType,s.id,l),h=a.cell,h){if(u=this.dataRow.getViewDataCellInfo(n.gridSectionType,s.id,l),!u.editableState){w=s.id;k==s.cursorIndex&&(v+=1);continue}if(this.constValue.cellEditableRex.test(h.className)){w=s.id;k==s.cursorIndex&&(v+=1);continue}if(this.constValue.controlInWidget[u.controlType])c.push(h);else if(this.constValue.nativeControlInGrid[u.controlType])c=h.querySelectorAll(this.constValue.controlSelector[u.controlType]);else if(this.constValue.combineControlWidget[u.controlType]){if(e=this.dataRow.getViewDataCellMap(n.gridSectionType,s.id,l),!e.cellInfo&&!e.rowInfo&&!e.tableIndex)return;if(i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,e.cellInfo.editControlId),!i.isVisible())continue;c=h.querySelectorAll(this.constValue.controlSelector[u.controlType]);r=i&&i.getFocusableIndex();o=i&&$.isArray(r)&&r.length>1&&i.get(r[0]).getComponent(r[1]);o&&(i.get(r[0]).setFocus(r[1]),f.isPreventDefault=!0,f.isMoved=!0,f.isFocusInWidget=!0)}else if(this.constValue.nativeControlInWidget[u.controlType]){if(i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,s.id,l),!i.isVisible())continue;r=i&&i.getFocusableIndex();o=i&&r>-1&&i.getComponent(r);o&&(i.setFocus(r),f.isPreventDefault=!0,f.isMoved=!0,f.isFocusInWidget=!0)}}if(c.length>0||o){y=p.indexOf(s);break}}if(c.length>0||o)break;else s?(k==s.cursorIndex&&(v+=1),w=s.id):(v+=1,s=this.dataColumn.getByMinCursorIndex(n.gridSectionType),w=null)}}else{if(u=this.dataRow.getViewDataCellInfo(n.gridSectionType,n.gridColumnID,n.gridDataKey),this.constValue.combineControlWidget[u.controlType]){if(e=this.dataRow.getViewDataCellMap(n.gridSectionType,n.gridColumnID,n.gridDataKey),!e.cellInfo&&!e.rowInfo&&!e.tableIndex)return;a=this.viewCell.getCellElement(n.gridSectionType,n.gridColumnID,n.gridDataKey);h=a.cell;i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,e.cellInfo.editControlId);b=h.querySelectorAll(this.constValue.controlSelector[u.controlType]);b.length>0&&(c=b);r=i&&i.getFocusableIndex();o=i&&$.isArray(r)&&r.length>1&&i.get(r[0]).getComponent(r[1])}else i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,n.gridColumnID,n.gridDataKey),r=i&&i.getFocusableIndex(),o=i&&i.getComponent(r);if(o)this.constValue.combineControlWidget[u.controlType]?i.get(r[0]).setFocus(r[1]):i.setFocus(r),f.isPreventDefault=!0,f.isMoved=!0;else for(p=this.dataColumn.getAll(n.gridSectionType,this.constValue.returnType.single,!1,"system",{isNotIndexSort:!0});v<it;v++){if(n.gridDataIndex!=v)if(d==39)break;else l=g[v][this.constValue.keyColumnPropertyName];else l=n.gridDataKey;for(y=v==n.gridDataIndex?n.gridColumnIndex+1:0,ut=p.length;y<ut;y++)if(!ecount.common.isTrue(p[y].isHideColumn)&&(!tt||![this.constValue.checkBoxPropertyName,this.constValue.rowMoveablePropertyName,this.constValue.rowNumberingPropertyName].contains(p[y].id))&&(a=this.viewCell.getCellElement(n.gridSectionType,p[y].id,l),!a.map||!a.map.cellInfo||a.map.cellInfo.disabled!="disabled")){if(h=a.cell,h){if(u=this.dataRow.getViewDataCellInfo(n.gridSectionType,p[y].id,l),!u.editableState)continue;if(this.constValue.systemControlInGrid[u.controlType])continue;else if(this.constValue.controlInWidget[u.controlType])c.push(h);else if(this.constValue.nativeControlInGrid[u.controlType])c=h.querySelectorAll(this.constValue.controlSelector[u.controlType]);else if(this.constValue.combineControlWidget[u.controlType]){if(e=this.dataRow.getViewDataCellMap(n.gridSectionType,p[y].id,l),!e.cellInfo&&!e.rowInfo&&!e.tableIndex)return;if(i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,e.cellInfo.editControlId),!i.isVisible())continue;c=h.querySelectorAll(this.constValue.controlSelector[u.controlType]);r=i&&i.getFocusableIndex();o=i&&$.isArray(r)&&r.length>1&&i.get(r[0]).getComponent(r[1]);o&&(i.get(r[0]).setFocus(r[1]),f.isPreventDefault=!0,f.isMoved=!0,f.isFocusInWidget=!0)}else if(this.constValue.nativeControlInWidget[u.controlType]){if(i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,p[y].id,l),!i.isVisible())continue;r=i&&i.getFocusableIndex();o=i&&r>-1&&i.getComponent(r);o&&(i.setFocus(r),f.isPreventDefault=!0,f.isMoved=!0,f.isFocusInWidget=!0)}}if(c.length>0||o){s=p[y];break}}if(c.length>0||o)break}}c.length>0?(this.optRow[n.gridSectionType].showInputFakeOutLine==="activeRow"&&n.gridDataKey!=l&&this.viewRow.removeClass(n.gridSectionType,n.gridDataKey,[this.constValue.rowEditableClassName]),this.viewCell.scrollRightMove(h),this.setElementFocus(n,c[0],s,a.map.cellInfo.editControlType,a.map.cellInfo.controlType),f.isPreventDefault=!0,f.isMoved=!0):o?(f.isPreventDefault=!0,f.isMoved=!0,this.optRow[n.gridSectionType].showInputFakeOutLine==="activeRow"&&this.viewRow.removeClass(n.gridSectionType,n.gridDataKey,[this.constValue.rowEditableClassName])):this.optKeyboard.nextMoveCallback&&(nt=this.optKeyboard.nextMoveCallback(),nt!==undefined&&(f.isPreventDefault=!nt))}return f},onDown:function(n){var t={isPreventDefault:!1,isMoved:!1,isFocusInWidget:!1},p,c,a;if(this.__core.isActive){var v=this.dataColumn.getById(n.gridSectionType,n.gridColumnID,n.gridDataKey),y=this.dataRow.getAll(n.gridSectionType),l=n.gridDataIndex+1,e,o=[],u,f,s,i,h,r;if(u=this.viewCell.getCellElement(n.gridSectionType,n.gridColumnID,n.gridDataKey),this.constValue.nativeControlInWidget[u.map.cellInfo.editControlType])return t.isPreventDefault=!0,t.isMoved=!0,t;for(p=y.length;l<p;l++){if(e=n.gridDataIndex!=l?y[l][this.constValue.keyColumnPropertyName]:n.gridDataKey,u=this.viewCell.getCellElement(n.gridSectionType,n.gridColumnID,e),s=u.cell,u.map.cellInfo.editableState&&s)if(f=this.dataRow.getViewDataCellInfo(n.gridSectionType,n.gridColumnID,e),this.constValue.controlInWidget[f.controlType])o.push(s);else if(this.constValue.nativeControlInGrid[f.controlType])o=s.querySelectorAll(this.constValue.controlSelector[f.controlType]);else if(this.constValue.combineControlWidget[f.controlType]){if(c=this.dataRow.getViewDataCellMap(n.gridSectionType,n.gridColumnID,e),!c.cellInfo&&!c.rowInfo&&!c.tableIndex)return;if(i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,c.cellInfo.editControlId),!i.isVisible())continue;o=s.querySelectorAll(this.constValue.controlSelector[f.controlType]);r=i&&i.getFocusableIndex();h=i&&$.isArray(r)&&r.length>1&&i.get(r[0]).getComponent(r[1]);h&&(i.get(r[0]).setFocus(r[1]),t.isPreventDefault=!0,t.isMoved=!0,t.isFocusInWidget=!0)}else if(this.constValue.nativeControlInWidget[f.controlType]){if(i=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,v.id,e),!i.isVisible())continue;r=i&&i.getFocusableIndex();h=i&&r>-1&&i.getComponent(r);h&&(i.setFocus(r),t.isPreventDefault=!0,t.isMoved=!0,t.isFocusInWidget=!0)}if(o.length>0)break}o.length>0&&!t.isPreventDefault?(this.optRow[n.gridSectionType].showInputFakeOutLine==="activeRow"&&n.gridDataKey!=e&&this.viewRow.removeClass(n.gridSectionType,n.gridDataKey,[this.constValue.rowEditableClassName]),this.setElementFocus(n,o[0],v,u.map.cellInfo.editControlType,u.map.cellInfo.controlType),this.viewCell.scrollIntoView(s,"down",u.map.rowInfo.trIdx.length),t.isPreventDefault=!0,t.isMoved=!0):h?(t.isPreventDefault=!0,t.isMoved=!0,this.optRow[n.gridSectionType].showInputFakeOutLine==="activeRow"&&this.viewRow.removeClass(n.gridSectionType,n.gridDataKey,[this.constValue.rowEditableClassName])):this.optKeyboard.nextMoveCallback&&(a=this.optKeyboard.nextMoveCallback(),a!==undefined&&(t.isPreventDefault=!a))}return t},onCancel:function(){},onClear:function(){},onKeydown:function(n,t){var e=t.which,f=!1,l=!0,a=this.__core.activeSectionType,v=this.__core.activeColumnId,y=this.__core.activeRowId,i={isPreventDefault:!1,isMoved:!1,isFocusInWidget:!1},o=this.dataRow.getViewDataCellMap(n.gridSectionType,n.gridColumnID,n.gridDataKey),r=o&&o.cellInfo&&o.cellInfo.editControlType||"",u,s;r=="widget.textarea"&&[38,40].contains(e)||e!=13&&(this.viewEditLayer.blur(a,v,y,{isRunChange:!0,isRunComplete:!0,callByType:"system"}),this.viewEditLayer.commit());switch(e){case 37:return this.onLeft(n,t);case 38:return r=="widget.textarea"?i:this.onUp(n,t);case 39:return this.onRight(n,t);case 40:return r=="widget.textarea"?i:this.onDown(n,t);case 13:if((r=="widget.code.serialCodeItem"||r=="widget.code.serialCodeItemNew")&&(u=this.dataRow.getViewDataWidgetInstance(n.gridSectionType,n.gridColumnID,n.gridDataKey),u&&(this.__core.nativeCodeCloser=function(t){var i={name:u.labelColumn,code:u.valueColumn,gridDataKey:n.gridDataKey,gridColumnID:n.gridColumnID,gridSectionType:n.gridSectionType},r=this.dataRow.getById(i.gridSectionType,i.gridDataKey,!0);u.openPopup(null,"",{eventTarget:{event:t.event,data:t.data,rowItem:r},beforeCodeChangeHandler:function(){u.setValue("")},gridInfoGetter:function(){return i}})}.bind(this))),s=this.__core.fn.emitEvent(n,t,"setNextFocus"),f=!(s[s.length-1]===!1),r=="widget.code.serialCodeItem"||r=="widget.code.serialCodeItemNew")f=!1;else{if(t.ctrlKey&&this.optKeyboard.controlEnterHandler){var h=this.dataRow.getById(n.gridSectionType,n.gridDataKey,!0),p=this.dataRow.getByIndex(n.gridSectionType,h[this.constValue.rowCountColumnPropertyName]),c=this.dataColumn.getById(n.gridSectionType,n.gridColumnID,!0),w={rowItem:h,columnId:c.id,columnProperty:c.proertyName,columnInfo:c,rowKey:n.gridDataKey,rowIdx:h[this.constValue.rowCountColumnPropertyName],nextRowKey:p[this.constValue.keyColumnPropertyName]};l=this.optKeyboard.controlEnterHandler(w)}f===!1&&(i.isPreventDefault=!0)}break;case 9:if(this.__core.fn.emitEvent(n,t,"setNextFocus"),f=!0,t.shiftKey)return this.onLeft(n,t);break;case 27:return this.onCancel(n,t)}return f&&l!==!1&&(this.viewEditLayer.blur(a,v,y,{isRunChange:!0,isRunComplete:!0,callByType:"system"}),this.viewEditLayer.commit(),i=this.onRight(n,t),e==13)?(i.isPreventDefault=!0,i):i},initGlobalValue:function(n,t){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.defaultDatas=t;this.__core=n.core;this.__setting=n.setting;this.__renderer=this.__core.render;this.__customEvents=this.__core.customEvents;$.extend(this,n.mixinOption)},reset:function(){this.__datas={}},init:function(n){this.initGlobalValue(n);this.reset()},render:function(){},destroyAll:function(){}};ecount.gridV2.modules.drag=$.Class(null,{__target:null,__defaultOptions:null,__datas:null,__isValidArea:!1,__lineElement:null,__dragMethod:null,querySelector:function(n,t){var r=document,i;return arguments.length==1?t=n||document:r=n||document,document.querySelector?document.querySelector(t):(i=$(t),i[0])},querySelectorAll:function(n,t){var i=document;return arguments.length==1?t=n||document:i=n||document,i.querySelectorAll?i.querySelectorAll(t):$(i).find(t)},init:function(n,t,i){this.initGlobalValue(n);this.reset();$.extend(this.__defaultOptions,t);this.__defaultOptions.dragMethod!="all"&&(this.__datas.dragMethod=this.__defaultOptions.dragMethod);this.__events=i},render:function(){var f=this,t,r,i,u,n;if(this.__defaultOptions.layoutSelector&&(this.__defaultOptions.layout=this.querySelectorAll(this.__defaultOptions.layer,"#"+this.__defaultOptions.ecGridId+">"+this.__defaultOptions.layoutSelector)),this.__defaultOptions.layout&&this.__defaultOptions.layout.length>0&&(this.__defaultOptions.$layout=$(this.__defaultOptions.layout)),this.__defaultOptions.guideline.use)for(t=0,r=this.__defaultOptions.layout.length;t<r;t++)i=this.__defaultOptions.layout[t],u=i.getAttribute("id")||i.getAttribute("data-gid")||"",this.__defaultOptions.guideline.use&&(n=document.createElement("div"),n.style.display="none",n.style.border="1px solid red",n.style.position="absolute",n.style.backgroundColor="red",i.appendChild(n),this.__lineElements[u]=n);this.__datas.dropableContainers=this.getDropableContainerElements(this.__defaultOptions.layer,this.__defaultOptions.dropableContainerSelector)},destroy:function(){},destroyAll:function(){var t,n,i;if(this.__defaultOptions.guideline.use)for(t in this.__lineElements)if(this.__lineElements.hasOwnProperty(t))for(n=0,i=this.__defaultOptions.layout.length;n<i;n++)this.__defaultOptions.layout[n].hasChildNodes(this.__lineElements[t])&&this.__defaultOptions.layout[n].removeChild(this.__lineElements[t]);this.unbindEventMousedown()},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.constEvent=ecount.gridV2.constEvent.drag;this.history=n.history;this.selector=n.selector;this.outerHorizontal=n.outerHorizontal;this.outerVertical=n.outerVertical;this.viewUtil=ecount.gridV2.view.util},setState:function(n){return this.__datas.state=n,this},getState:function(){return this.__datas.state},isDragable:function(n){var t=this.getDragableElement(n);return t?!0:!1},getDragableElement:function(n){var i=n.target,t=$(i).closest(this.__defaultOptions.dragSelector);return t.length==0?this.__events&&this.__events.listeners[this.constEvent.getDragableElement+this.__defaultOptions.eventPrefixId]?this.__events._triggerEvent(this.constEvent.getDragableElement+this.__defaultOptions.eventPrefixId,{},n)||null:null:t[0]},getDragableTargetInfo:function(n){if(!this.isDragable(n))return null;var t=this.getDragableElement(n);return this.ecGetDragableElementInfoByElement(t)},ecGetDragableElementInfoByElement:function(n){return{id:n.getAttribute("id")}},getDragableContainerByElement:function(n){var i=$(n),t=i.closest(this.__defaultOptions.dragableContainerSelector);return t.length==0?null:t[0]},getDragableContainerInfoByElement:function(n){return{id:n.getAttribute("id")}},getDragableLayoutByElement:function(n){var i=$(n),t=i.closest(this.__defaultOptions.dragableLayoutSelector);return t.length==0?null:t[0]},isDropableElement:function(n){var t=this.getDropableElement(n);return t?!0:!1},getDropableContainerElements:function(n,t){return t=t||this.__datas.dropableContainerSelector,this.querySelectorAll(n,t)||[]},getDropableContainerElementByEvent:function(n){for(var t,r=n.clientX,u=n.clientY,f=this.__defaultOptions.body&&this.__defaultOptions.body.scrollTop||0,e=this.__defaultOptions.body&&this.__defaultOptions.body.scrollLeft||0,o,i=0,s=this.__datas.dropableContainers.length;i<s;i++)if(t=this.viewUtil.getScreenBoundingClientRect(this.__datas.dropableContainers[i],!0),t.left-e<=r&&r<=t.left-e+t.width&&t.top-f<=u&&u<=t.top-f+t.height){o=this.__datas.dropableContainers[i];break}return o},getDropableElement:function(n){for(var i=n.target,r=$(i),t=0,u=this.__defaultOptions.dropableContainerSelector.length;t<u;t++)if($els=r.closest(this.__defaultOptions.dropableContainerSelector[t]),$els.length>0)break;return $els.length==0?null:$els[0]},getDropableElementInfo:function(n){if(!this.isDropableElement(n))return null;var t=this.getDropableElement(n);return this.getDropableElementInfoByElement(t)},getDropableElementInfoByElement:function(n){return{id:n.getAttribute("id")}},getDropableLayout:function(n){var t=n.target;return this.getDropableLayoutByElement(t)},getDropableLayoutByElement:function(n){var i=$(n),t=i.closest(this.__defaultOptions.layoutSelector);return t.length==0?null:t[0]},ecIsDragableState:function(){return!0},ecIsChooseTheInside:function(){return!0},ecSetMoveableDirection:function(){this.__defaultOptions.dragMethod!="all"&&(this.__datas.dragMethod=this.__defaultOptions.dragMethod)},ecNoDirectionToMove:function(){document.onselectstart=new Function("return true")},isMoveable:function(n){return this.ecIsMoveable(n)},ecIsMoveable:function(n){var t=n.clientX,i=n.clientY;return Math.abs(t-this.__datas.mousedownPosition.x)<20&&Math.abs(i-this.__datas.mousedownPosition.y)<20},isMoveHorizontalDirection:function(n){var i=this.getDropableContainerElementByEvent(n),t=i&&this.ecGetDropableElement(n,i);if(t){var u=t.getAttribute("sectiontype"),f=t.getAttribute("data-columnid"),e=t.getAttribute("data-key"),r=this.__events&&this.__events._triggerEvent(this.constEvent.isMoveHorizontalDirection+this.__defaultOptions.eventPrefixId,{gridStartSectionType:this.__datas.startSectionType,gridStartColumnID:this.__datas.startColumnId,gridStartDataKey:this.__datas.startRowId,gridStartBoundary:this.__datas.startBoundary,gridMoveSectionType:u,gridMoveColumnID:f,gridMoveDataKey:e},n);return typeof r=="boolean"?r:!0}return!1},isMoveVerticalDirection:function(n){var i=this.getDropableContainerElementByEvent(n),t=i&&this.ecGetDropableElement(n,i);if(t){var u=t.getAttribute("sectiontype"),f=t.getAttribute("data-columnid"),e=t.getAttribute("data-key"),r=this.__events&&this.__events._triggerEvent(this.constEvent.isMoveVerticalDirection+this.__defaultOptions.eventPrefixId,{gridStartSectionType:this.__datas.startSectionType,gridStartColumnID:this.__datas.startColumnId,gridStartDataKey:this.__datas.startRowId,gridStartBoundary:this.__datas.startBoundary,gridMoveSectionType:u,gridMoveColumnID:f,gridMoveDataKey:e},n);return typeof r=="boolean"?r:!0}return!1},isMoveAllDirection:function(n){var t=this.isMoveHorizontalDirection(n),i=this.isMoveVerticalDirection(n);return{isMoveHorizontalDirection:t,isMoveVerticalDirection:i}},getMoveDirection:function(n,t,i,r,u,f){return this.ecGetMoveDirection(n,t,i,r,u,f)},ecGetMoveDirection:function(n,t,i,r){var u=this.constValue.crossDirection.none;return this.__datas.dragMethod==this.constValue.drag.directionMovement.horizontal?i.x<r.x?u=this.constValue.crossDirection.right:i.x>r.x&&(u=this.constValue.crossDirection.left):this.__datas.dragMethod==this.constValue.drag.directionMovement.vertical?i.top<r.top?u=this.constValue.crossDirection.down:i.top>r.top&&(u=this.constValue.crossDirection.up):this.__datas.dragMethod==this.constValue.drag.directionMovement.allHorizontal&&(i.x<r.x?u=this.constValue.crossDirection.right:i.x>r.x&&(u=this.constValue.crossDirection.left)),u},showGuideline:function(n,t,i){this.__dragMethod==this.constValue.drag.directionMovement.horizontal?(t-=this.__defaultOptions.guideline.horizontalHeight,i=i-this.__defaultOptions.guideline.horizontalWidth/2):this.__dragMethod==this.constValue.drag.directionMovement.vertical&&(t=t-this.__defaultOptions.guideline.verticalHeight/2,i=i-this.__defaultOptions.guideline.verticalWidth-1);this.__lineElements[n].style.top=t+"px";this.__lineElements[n].style.left=i+"px";this.__lineElements[n].style.display=""},hideGuideline:function(n){this.__lineElements[n].style.top="";this.__lineElements[n].style.left="";this.__lineElements[n].style.display="none"},showSelectedElement:function(){},hideSelectedElement:function(){},moveSelectedElement:function(){},showShadowBox:function(){},hideShadowBox:function(){},ecIsMovePossible:function(){return!0},ecShowGuide:function(n,t,i,r,u,f,e,o,s){if(this.__defaultOptions.guideline.use)if(n==this.constValue.drag.directionMovement.horizontal?(this.__lineElements[r].style.width=this.__defaultOptions.guideline.horizontalWidth+"px",this.__lineElements[r].style.height=this.__defaultOptions.guideline.horizontalHeight+"px"):n==this.constValue.drag.directionMovement.vertical&&(this.__lineElements[r].style.width=this.__defaultOptions.guideline.verticalWidth+"px",this.__lineElements[r].style.height=this.__defaultOptions.guideline.verticalHeight+"px"),n==this.constValue.drag.directionMovement.horizontal){if(e.left+e.width/2>=u.x){if(t==i&&f.right==e.x){this.hideGuideline(r);return}this.showGuideline(r,s.top-o.top,e.left-o.left)}else if(e.left+e.width/2<u.x){if(t==i&&f.x==e.right){this.hideGuideline(r);return}this.showGuideline(r,s.top-o.top,e.right-o.left)}}else if(n==this.constValue.drag.directionMovement.vertical)if(e.top+e.height/2>=u.y){if(t==i&&f.bottom==e.top){this.hideGuideline(r);return}this.showGuideline(r,e.top-o.top,o.left)}else{if(t==i&&f.top==e.bottom){this.hideGuideline(r);return}this.showGuideline(r,e.bottom-o.top,o.left)}},ecShowOrignalBox:function(){},ecIsPossibleMoveable:function(){return(this.__defaultOptions.shadowBox.use||this.__defaultOptions.caretIcon.use)&&this.__datas.dragMethod!="none"&&this.__datas.crossDirection!=this.constValue.crossDirection.none},ecSetPositionShadowBox:function(){},ecSetPositionCaretIcon:function(){},removeShadowBox:function(){this.__defaultOptions.shadowBox.use&&this.__datas.moveLayoutElement&&this.__datas.shadowIconElement&&(this.__datas.moveLayoutElement.removeChild(this.__datas.shadowIconElement),this.__datas.shadowIconElement=null,this.__datas.moveLayoutElement=null);this.ecRemoveShadowBox()},ecRemoveShadowBox:function(){},visibleCaretIcon:function(){this.__defaultOptions.caretIcon.use&&this.__datas.moveLayoutElement&&this.__datas.caretIconElement&&this.__datas.caretIconElement.classList.remove("hide")},invisibleCaretIcon:function(){this.__defaultOptions.caretIcon.use&&this.__datas.moveLayoutElement&&this.__datas.caretIconElement&&this.__datas.caretIconElement.classList.add("hide")},appendCaretIcon:function(n,t){this.__defaultOptions.caretIcon.use&&n&&n.appendChild(t)},removeCaretIcon:function(){this.__defaultOptions.caretIcon.use&&this.__datas.moveLayoutElement&&this.__datas.caretIconElement&&(this.__datas.moveLayoutElement.removeChild(this.__datas.caretIconElement),this.__datas.caretIconElement=null,this.__datas.moveLayoutElement=null)},removeOriginalElement:function(){this.__defaultOptions.mouseIconElement.use&&(this.__datas.startLayout&&this.__datas.mouseIconElement&&this.__datas.startLayout.removeChild(this.__datas.mouseIconElement),this.__datas.mouseIconElement=null);this.ecRemoveOriginalElement()},ecRemoveOriginalElement:function(){},bindEventMousedown:function(){$(document.body).off("mousedown.dragMousedown"+this.__defaultOptions.domEventPrefixId).on("mousedown.dragMousedown"+this.__defaultOptions.domEventPrefixId,function(n){var t=ec$.parseElement(n.target);this.__defaultOptions.ecPageID==t.ecPageID&&this.__defaultOptions.ecGridId==t.gridID&&this.MOUSEDOWN_HANDLER(n)}.bind(this))},unbindEventMousedown:function(){$(document.body).off("mousedown.dragMousedown"+this.__defaultOptions.domEventPrefixId)},bindEventMousemove:function(){$(document.body).off("mousemove.dragMousemove"+this.__defaultOptions.domEventPrefixId).on("mousemove.dragMousemove"+this.__defaultOptions.domEventPrefixId,this.MOUSEMOVE_HANDLER.bind(this))},unbindEventMousemove:function(){$(document.body).off("mousemove.dragMousemove"+this.__defaultOptions.domEventPrefixId)},bindEventMouseup:function(){$(document.body).off("mouseup.dragMouseup"+this.__defaultOptions.domEventPrefixId).on("mouseup.dragMouseup"+this.__defaultOptions.domEventPrefixId,this.MOUSEUP_HANDLER.bind(this));var n=$._data(document.body,"events").mouseup,t=n.pop();n.splice(0,0,t)},unbindEventMouseup:function(){$(document.body).off("mouseup.dragMouseup"+this.__defaultOptions.domEventPrefixId)},ecIsPossibleDirectionMovement:function(){var n={isPossibleVertical:!1,isPossibleHorizontal:!1};return this.__defaultOptions.dragBehavior==this.constValue.drag.directionMovement.all?(n.isPossibleVertical=!0,n.isPossibleHorizontal=!0):(this.__defaultOptions.dragBehavior==this.constValue.drag.directionMovement.vertical&&(n.isPossibleVertical=!0),this.__defaultOptions.dragBehavior==this.constValue.drag.directionMovement.horizontal&&(n.isPossibleHorizontal=!0)),n},ecIsMoveableDirection:function(){return!0},ecMoveMouseIconElement:function(){},ecShowMouseIconElement:function(n){n.style.display!=""&&(n.style.display="")},ecMousedownHandler:function(){},MOUSEDOWN_HANDLER:function(n){var i,u,e;if(ecount.gridV2.util.log("drag mousedown start"),document.onselectstart=new Function("return false"),this.isDragable(n)&&this.ecIsDragableState(n)){if(i=this.getDragableElement(n),i){var t=this.ecGetDragableElementInfoByElement(i),r=this.getDragableContainerByElement(i),o=r&&this.getDragableContainerInfoByElement(r),f=this.getDragableLayoutByElement(i);this.__datas.dragableElement=i;this.__datas.dragableContainer=r;this.__datas.dragableLayout=f;this.ecMousedownHandler(n);this.ecIsMoveableDirection(n)&&(this.__events&&this.__events._triggerEvent(ecount.grid.event.list.dragEndPreInit,n,{type:"grid",columnId:t.columnId,rowKey:t.rowId}),this.__datas.mousedownPosition.x=n.clientX,this.__datas.mousedownPosition.y=n.clientY,this.__datas.startEvent=n,u=this.__events&&this.__events._triggerEvent(this.constEvent.getColumnSectionType+this.__defaultOptions.eventPrefixId,{gridSectionType:t.sectionType,gridColumnID:t.columnId,gridDataKey:t.rowId,gridSectionDetailType:t.rowType},n),this.__datas.startSectionType=t.sectionType,this.__datas.startColumnId=t.columnId,this.__datas.startRowId=t.rowId,this.__datas.startDetailSectionType=t.rowType,this.__datas.startColumnSectionType=u,this.__datas.startElement=i,this.__datas.startPosition=this.viewUtil.getScreenBoundingClientRect(i,!1,!0),this.__datas.startTargetScreenPosition=this.viewUtil.getScreenBoundingClientRect(i,!0),this.__datas.startLayout=f,this.__datas.startContainerElement=r,this.__datas.startContainerSize=r&&this.viewUtil.getScreenBoundingClientRect(r,!0)||{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0},this.__datas.startLayoutPosition=this.__datas.startLayout&&this.viewUtil.getScreenBoundingClientRect(this.__datas.startLayout,!1,!0)||{x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0},this.ecMousedownHandler(n),this.ecIsMoveableDirection(n)?(this.__events&&this.__events._triggerEvent(ecount.grid.event.list.dragEndPreInit,n,{type:"grid",columnId:t.columnId,rowKey:t.rowId}),this.__datas.mousedownPosition.x=n.clientX,this.__datas.mousedownPosition.y=n.clientY,this.__datas.startEvent=n,u=this.__events&&this.__events._triggerEvent(this.constEvent.getColumnSectionType+this.__defaultOptions.eventPrefixId,{gridSectionType:t.sectionType,gridColumnID:t.columnId,gridDataKey:t.rowId,gridSectionDetailType:t.rowType},n),this.__datas.startSectionType=t.sectionType,this.__datas.startColumnId=t.columnId,this.__datas.startRowId=t.rowId,this.__datas.startRowType=t.rowType,this.__datas.startColumnSectionType=u,this.__datas.startElement=i,this.__datas.startPosition=this.viewUtil.getScreenBoundingClientRect(i,!1,!0),this.__datas.startTargetScreenPosition=this.viewUtil.getScreenBoundingClientRect(i,!0),this.__datas.startLayout=f,this.__datas.startContainerElement=r,this.__datas.moveSectionType=t.sectionType,this.__datas.moveColumnId=t.columnId,this.__datas.moveRowId=t.rowId,this.__datas.moveRowType=t.rowType,this.__datas.startContainerSize=this.viewUtil.getScreenBoundingClientRect(r,!0)||{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0},this.__datas.startLayoutPosition=this.__datas.startLayout&&this.viewUtil.getScreenBoundingClientRect(this.__datas.startLayout,!1,!0)||{x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0},e=this.__datas.startLayout&&this.viewUtil.getScreenBoundingClientRect(this.__datas.startLayout,!0)||{x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0},this.__datas.startPosition.xNotIncludeScrollLeft=this.__datas.startPosition.x-this.__defaultOptions.body.scrollLeft,this.__datas.startPosition.yNotIncludeScrollLeft=this.__datas.startContainerSize.y-e.y-this.__defaultOptions.body.scrollTop,this.__events&&this.__events.triggerEvent(this.constEvent.dragStartFinish+this.__defaultOptions.eventPrefixId,{}),this.__datas.state=this.constValue.drag.state.start,this.bindEventMousemove(),this.bindEventMouseup()):(this.__datas.dragableElement=null,this.__datas.dragableContainer=null,this.__datas.dragableLayout=null))}}else(!this.selector||[this.constValue.selector.state.none,this.constValue.selector.state.mouseup].contains(this.selector.__datas.state))&&(document.onselectstart=new Function("return true"));ecount.gridV2.util.log("drag mousedown end")},initMousemove:function(n){this.ecInitMousemove(n)},ecInitMousemove:function(){},MOUSEMOVE_HANDLER:function(n){var t,i,s,h,e;if(this.__datas.mousemovePosition.x=n.clientX,this.__datas.mousemovePosition.y=n.clientY,this.__datas.mousemoveEvent=n,this.__datas.state==this.constValue.drag.state.start&&this.isMoveable(n)&&(this.ecSetMoveableDirection(n),this.__datas.mouseIconElement||(t=this.__events&&this.__events._triggerEvent(this.constEvent.dragStartPrepare+this.__defaultOptions.eventPrefixId,{gridStartSectionType:this.__datas.startSectionType,gridStartColumnSectionType:this.__datas.startColumnSectionType,gridStartColumnID:this.__datas.startColumnId,gridStartDataKey:this.__datas.startRowId,gridMoveType:this.__datas.dragMethod},n)||{result:!0,element:null},t.result?(this.__datas.startColumnSectionType=t.gridColumnSectionType||this.__datas.startColumnSectionType,this.__datas.startStartElementPosition=t.startElementPosition||this.__datas.startStartElementPosition,this.__datas.startBoundary=t.startBoundary||this.__datas.startBoundary,this.__datas.moveBoundary={top:this.__datas.startBoundary.top,bottom:this.__datas.startBoundary.bottom,left:this.__datas.startBoundary.left,right:this.__datas.startBoundary.right},this.__defaultOptions.mouseIconElement.use&&t.mouseIconElement&&t.mouseIconElement&&(this.ecInitMouseIconElement(t.mouseIconElement),this.__datas.startLayout&&this.__datas.startLayout.appendChild(t.mouseIconElement),this.__datas.mouseIconElement=t.mouseIconElement)):this.__datas.dragMethod=this.__defaultOptions.dragMethod),this.__datas.dragMethod==this.constValue.drag.directionMovement.horizontal?this.isMoveHorizontalDirection(n)&&(this.__datas.state=this.constValue.drag.state.moveable):this.__datas.dragMethod==this.constValue.drag.directionMovement.vertical?this.isMoveVerticalDirection(n)&&(this.__datas.state=this.constValue.drag.state.moveable):this.__datas.dragMethod==this.constValue.drag.directionMovement.allHorizontal?this.__datas.state=this.constValue.drag.state.moveable:[this.constValue.drag.directionMovement.all].contains(this.__datas.dragMethod)&&(t=this.isMoveAllDirection(n),(t.isMoveHorizontalDirection||t.isMoveVerticalDirection)&&(t.isMoveHorizontalDirection?this.__datas.dragMethod=this.constValue.drag.directionMovement.horizontal:t.isMoveVerticalDirection&&(this.__datas.dragMethod=this.constValue.drag.directionMovement.vertical),this.__datas.state=this.constValue.drag.state.moveable))),this.__datas.state==this.constValue.drag.state.moveable){var f=this.getDropableContainerElementByEvent(n),r=f&&this.ecGetDropableElement(n,f),u=r&&this.getDropableLayoutByElement(r);if(f&&r&&u)if(i=this.ecGetDropableElementInfoByElement(r),!this.selector||this.selector&&this.selector.getSelectedSectionTypes().contains(i.sectionType)){s=this.viewUtil.getScreenBoundingClientRect(f,!0);h=this.viewUtil.getScreenBoundingClientRect(r,!0);this.initMousemove();var v=this.__defaultOptions.panel&&this.viewUtil.getScreenBoundingClientRect(this.__defaultOptions.panel,!0),y=this.viewUtil.getScreenBoundingClientRect(this.__defaultOptions.layer,!0),l=u&&this.viewUtil.getScreenBoundingClientRect(u,!0)||{x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0},a=u&&this.viewUtil.getScreenBoundingClientRect(u)||{x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0},t={result:!0},o=this.constValue.crossDirection.none,c;r&&(o=this.getMoveDirection(this.__datas.startElement,r,this.__datas.startTargetScreenPosition,h,v,y),n.target=r,c=this.__events&&this.__events._triggerEvent(this.constEvent.getColumnSectionType+this.__defaultOptions.eventPrefixId,{gridSectionType:i.sectionType,gridColumnID:i.columnId,gridDataKey:i.rowId,gridSectionDetailType:i.rowType},n),t=this.__events&&this.__events._triggerEvent(this.constEvent.dragMovePrepare+this.__defaultOptions.eventPrefixId,{gridStartSectionType:this.__datas.startSectionType,gridStartColumnSectionType:this.__datas.startColumnSectionType,gridStartColumnID:this.__datas.startColumnId,gridStartDataKey:this.__datas.startRowId,gridStartBoundary:this.__datas.startBoundary,gridStartDetailSectionType:this.__datas.startDetailSectionType,gridMoveSectionType:i.sectionType,gridMoveColumnID:i.columnId,gridMoveDataKey:i.rowId,gridMoveColumnSectionType:c,gridMoveDirection:o,gridMoveMethod:this.__datas.verticalMethod,gridMoveType:this.__datas.dragMethod,gridMoveDetailSectionType:i.rowType},n)||{result:!0});this.selector&&t.boundary?(this.__datas.moveStartElementPosition=t.startElementPosition,t.cellElement&&(r=t.cellElement,moveTargetPosition=r.getBoundingClientRect(),e=this.selector.getBoundary(),e.top==t.boundary.top&&e.bottom==t.boundary.bottom&&e.left==t.boundary.left&&e.right==t.boundary.right&&(o="none"))):this.__datas.dragMethod==this.constValue.drag.directionMovement.vertical?this.__datas.moveStartElementPosition=t.startElementPosition:this.__datas.dragMethod==this.constValue.drag.directionMovement.horizontal&&t.cellElement&&(r=t.cellElement,moveTargetPosition=r.getBoundingClientRect());this.__datas.crossDirection=o;this.removeShadowBox();this.invisibleCaretIcon();this.ecIsPossibleMoveable(i.sectionType,i.columnId,i.rowId,i.rowType)&&(t.shadowIconElement?(this.ecSetPositionShadowBox(t.shadowIconElement,f,u,s,l,a,r.getBoundingClientRect(),this.__datas.moveStartElementPosition,this.__datas.startStartElementPosition),this.__datas.moveLayoutElement=u,this.__datas.shadowIconElement=t.shadowIconElement,u&&t.shadowIconElement&&u.appendChild(t.shadowIconElement)):(t.caretIconElement||t.showCaretHorizontal||t.showCaretVertical)&&(this.__datas.caretIconElement||(this.appendCaretIcon(u,t.caretIconElement),this.__datas.caretIconElement=t.caretIconElement,this.__datas.moveLayoutElement=u),this.visibleCaretIcon(),this.ecSetPositionCaretIcon(this.__datas.caretIconElement,f,u,s,l,a,r.getBoundingClientRect(),this.__datas.moveStartElementPosition,this.__datas.startStartElementPosition,r)));this.__datas.moveSectionType=i.sectionType;this.__datas.moveColumnSectionType=c;this.__datas.moveRowType=i.rowType;this.__datas.moveColumnId=i.columnId;this.__datas.moveRowId=i.rowId;this.__datas.moveBoundary=t.boundary||this.__datas.startBoundary;this.__datas.moveLayoutElement=u;this.__datas.moveTargetElement=r;this.__datas.moveTargetScreenPosition=h;this.__datas.state=this.constValue.drag.state.moveable}else this.removeShadowBox();else this.removeShadowBox()}this.__defaultOptions.mouseIconElement.use&&this.__datas.mouseIconElement&&(this.setIntervalId||this.ecMoveMouseIconElement(this.__datas.startPosition,this.__datas.startLayoutPosition,this.__datas.startLayout),this.ecShowMouseIconElement(this.__datas.mouseIconElement))},isCanMouseup:function(n){return this.ecIsCanMouseup(n)},MOUSEUP_HANDLER:function(n){function h(){t.__datas.state=t.constValue.drag.state.none;t.__datas.crossDirection=t.constValue.crossDirection.none;t.__datas.verticalMethod=null;u.startSectionType&&u.endSectionType&&t.__events&&t.__events._triggerEvent(ecount.grid.event.list.dragEndCompleted,n,u);t.__events&&t.__events._triggerEvent(t.constEvent.dragEndCompleted+t.__defaultOptions.eventPrefixId,t.__datas.dragEndResult||{});t.__datas.dragEndResult=null}function c(){s=!0;var i={result:dragEndPrepareResult.result,sectionType:t.__datas.startSectionType,boundary:{top:-1,left:-1,bottom:-1,right:-1},cells:dragEndPrepareResult.cells},i=t.__events&&t.__events._triggerEvent(t.constEvent.dragEndFinish+t.__defaultOptions.eventPrefixId,{gridMoveType:t.__datas.dragMethod,gridMoveMethod:t.__datas.verticalMethod,gridStartSectionType:t.__datas.startSectionType,gridStartColumnSectionType:t.__datas.startColumnSectionType,gridStartColumnID:t.__datas.startColumnId,gridStartDataKey:t.__datas.startRowId,gridStartRowType:t.__datas.startDetailSectionType,gridStartBoundary:{top:t.__datas.startBoundary.top,bottom:t.__datas.startBoundary.bottom,left:t.__datas.startBoundary.left,right:t.__datas.startBoundary.right},gridMoveSectionType:t.__datas.moveSectionType,gridMoveColumnID:t.__datas.moveColumnId,gridMoveDataKey:t.__datas.moveRowId,gridMoveRowType:t.__datas.moveRowType,gridMoveBoundary:{top:t.__datas.moveBoundary.top,bottom:t.__datas.moveBoundary.bottom,left:t.__datas.moveBoundary.left,right:t.__datas.moveBoundary.right},gridMoveDirection:t.__datas.crossDirection,isCancelLeftFixed:dragEndPrepareResult.isCancelLeftFixed},n)||{result:!0};i.gridMoveType=t.__datas.dragMethod;i.dragMethod=t.__datas.dragMethod;t.__datas.dragEndResult=i;t.ecMouseupCompleted(i)}function a(){c();h()}var e,i,r;ecount.gridV2.util.log("drag mouseup start");document.onselectstart=new Function("return true");var t=this,u={},s=!1;if(this.__datas.state!=this.constValue.drag.state.none&&(dragEndPrepareResult=this.__events&&this.__events._triggerEvent(this.constEvent.dragEndPrepare+this.__defaultOptions.eventPrefixId,{gridMoveType:this.__datas.dragMethod,gridMoveMethod:this.__datas.verticalMethod,gridStartSectionType:this.__datas.startSectionType,gridStartColumnSectionType:this.__datas.startColumnSectionType,gridStartColumnID:this.__datas.startColumnId,gridStartDataKey:this.__datas.startRowId,gridStartRowType:this.__datas.startDetailSectionType,gridStartBoundary:{top:this.__datas.startBoundary.top,bottom:this.__datas.startBoundary.bottom,left:this.__datas.startBoundary.left,right:this.__datas.startBoundary.right},gridMoveSectionType:this.__datas.moveSectionType,gridMoveColumnID:this.__datas.moveColumnId,gridMoveDataKey:this.__datas.moveRowId,gridMoveRowType:this.__datas.moveRowType,gridMoveBoundary:{top:this.__datas.moveBoundary.top,bottom:this.__datas.moveBoundary.bottom,left:this.__datas.moveBoundary.left,right:this.__datas.moveBoundary.right},gridMoveDirection:this.__datas.crossDirection,fn:a},n)||{result:!0},this.unbindEventMousemove(),this.unbindEventMouseup()),[this.constValue.drag.state.start,this.constValue.drag.state.moveable].contains(this.__datas.state)&&(this.removeShadowBox(),this.removeCaretIcon(),this.removeOriginalElement()),this.__datas.state==this.constValue.drag.state.moveable){var o=this.getDropableContainerElementByEvent(n),l=o&&this.ecGetDropableElement(n,o),f=this.ecGetDropableElementInfoByElement(l);o&&l?this.isCanMouseup(n)&&this.ecIsPossibleMoveable(f.sectionType,f.columnId,f.rowId,f.rowType)?(this.__dragMethod=null,this.__datas.mouseupPosition.x=n.clientX,this.__datas.mouseupPosition.y=n.clientY,dragEndPrepareResult.result?c():(e={result:dragEndPrepareResult.result,sectionType:this.__datas.startSectionType,boundary:{top:-1,left:-1,bottom:-1,right:-1},cells:dragEndPrepareResult.cells},e.gridMoveType=this.__datas.dragMethod,e.dragMethod=this.__datas.dragMethod,this.ecMouseupCompleted(e))):this.selector&&this.selector.show().visibleOption():this.selector&&this.selector.show().visibleOption();i={top:-1,bottom:-1,left:-1,right:-1};r={top:-1,bottom:-1,left:-1,right:-1};switch(this.__datas.crossDirection){case"_RIGHT_OF_RIGHT":case"_LEFT_OF_RIGHT":i.top=this.__datas.startBoundary.top;i.bottom=this.__datas.startBoundary.bottom;i.left=this.__datas.moveBoundary.left-(this.__datas.startBoundary.right-this.__datas.startBoundary.left);i.right=this.__datas.moveBoundary.right;r.top=this.__datas.moveBoundary.top;r.bottom=this.__datas.moveBoundary.bottom;r.left=this.__datas.startBoundary.left;r.right=this.__datas.startBoundary.left+(this.__datas.moveBoundary.right-this.__datas.moveBoundary.left);break;case"_RIGHT_OF_LEFT":i.top=this.__datas.startBoundary.top;i.bottom=this.__datas.startBoundary.bottom;i.left=this.__datas.moveBoundary.left;i.right=this.__datas.moveBoundary.left+(this.__datas.moveBoundary.right-this.__datas.moveBoundary.left);r.top=this.__datas.moveBoundary.top;r.bottom=this.__datas.moveBoundary.bottom;r.left=this.__datas.startBoundary.left;r.right=this.__datas.startBoundary.left+(this.__datas.moveBoundary.right-this.__datas.moveBoundary.left);break;case"_LEFT_OF_LEFT":i.top=this.__datas.startBoundary.top;i.bottom=this.__datas.startBoundary.bottom;i.left=this.__datas.moveBoundary.left;i.right=this.__datas.moveBoundary.right+(this.__datas.startBoundary.right-this.__datas.startBoundary.left);r.top=this.__datas.moveBoundary.top;r.bottom=this.__datas.moveBoundary.bottom;r.left=this.__datas.startBoundary.left;r.right=this.__datas.startBoundary.right+(this.__datas.moveBoundary.right-this.__datas.moveBoundary.left);break;case"_TOP_OF_TOP":i.top=this.__datas.startBoundary.top-(this.__datas.startBoundary.top-this.__datas.moveBoundary.top);i.bottom=i.top+(this.__datas.startBoundary.bottom-this.__datas.startBoundary.top);i.left=this.__datas.startBoundary.left;i.right=this.__datas.startBoundary.right;r.top=this.__datas.moveBoundary.top+(this.__datas.startBoundary.top-this.__datas.moveBoundary.top);r.bottom=r.top+(this.__datas.moveBoundary.bottom-this.__datas.moveBoundary.top);r.left=this.__datas.moveBoundary.left;r.right=this.__datas.moveBoundary.right;break;case"_BOTTOM_OF_TOP":i.top=this.__datas.startBoundary.top-(this.__datas.startBoundary.top-this.__datas.moveBoundary.top);i.bottom=i.top+(this.__datas.startBoundary.bottom-this.__datas.startBoundary.top);i.left=this.__datas.startBoundary.left;i.right=this.__datas.startBoundary.right;r.top=this.__datas.moveBoundary.top+(this.__datas.startBoundary.bottom-this.__datas.startBoundary.top+1);r.bottom=this.__datas.moveBoundary.bottom+(this.__datas.startBoundary.bottom-this.__datas.startBoundary.top+1);r.left=this.__datas.moveBoundary.left;r.right=this.__datas.moveBoundary.right;break;case"_TOP_OF_BOTTOM":i.top=this.__datas.startBoundary.top+(this.__datas.moveBoundary.bottom-this.__datas.startBoundary.bottom);i.bottom=this.__datas.startBoundary.bottom+(this.__datas.moveBoundary.bottom-this.__datas.startBoundary.bottom);i.left=this.__datas.startBoundary.left;i.right=this.__datas.startBoundary.right;r.top=this.__datas.moveBoundary.top-(this.__datas.startBoundary.bottom-this.__datas.startBoundary.top+1);r.bottom=this.__datas.moveBoundary.bottom-(this.__datas.startBoundary.bottom-this.__datas.startBoundary.top+1);r.left=this.__datas.moveBoundary.left;r.right=this.__datas.moveBoundary.right;break;case"_BOTTOM_OF_BOTTOM":i.top=this.__datas.startBoundary.top+(this.__datas.moveBoundary.bottom-this.__datas.startBoundary.bottom);i.bottom=this.__datas.startBoundary.bottom+(this.__datas.moveBoundary.bottom-this.__datas.startBoundary.bottom);i.left=this.__datas.startBoundary.left;i.right=this.__datas.startBoundary.right;r.top=this.__datas.moveBoundary.top-(this.__datas.startBoundary.bottom-this.__datas.startBoundary.top+1);r.bottom=this.__datas.moveBoundary.bottom-(this.__datas.startBoundary.bottom-this.__datas.startBoundary.top+1);r.left=this.__datas.moveBoundary.left;r.right=this.__datas.moveBoundary.right}u={type:"move",isMoveable:s,crossDirection:this.__datas.crossDirection,startSectionType:this.__datas.startSectionType,startColumnSectionType:this.__datas.startColumnSectionType,startRowId:this.__datas.startRowId,startColumnId:this.__datas.startColumnId,startBoundary:this.__datas.startBoundary,movedStartBoundary:i,endSectionType:this.__datas.moveSectionType,endColumnSectionType:this.__datas.moveColumnSectionType,endRowId:this.__datas.moveRowId,endColumnId:this.__datas.moveColumnId,endBoundary:this.__datas.moveBoundary,movedEndBoundary:r,moveType:this.__datas.dragMethod}}h();ecount.gridV2.util.log("drag mouseup end")},ecMouseupCompleted:function(){},setSelector:function(n){this.selector=n},setHistroy:function(n){this.history=n},reset:function(){this.__defaultOptions={layoutSelector:"",layout:null,$layout:null,dropableContainerSelector:["gridDrag-group"],guideline:{use:!0,horizontalWidth:2,horizontalHeight:20,verticalWidth:20,verticalHeight:2},shadowBox:{use:!0},mouseIconElement:{use:!0},dragType:"table",dragMethod:"all",dragSelector:".drag-able"};this.__datas={dropableContainers:[],state:"none",crossDirection:this.constValue.crossDirection.none,target:null,startSectionType:null,startContainerId:"",startEvent:null,startPosition:{x:0,y:0},mouseIconElement:null,mousedownPosition:{x:0,y:0},mouseupPosition:{x:0,y:0},mousemovePosition:{x:0,y:0},dragMethod:"none"};this.__lineElements={};this.__dragMethod=null}});ecount.gridV2.modules.dragGrid=$.Class(ecount.gridV2.modules.drag,{init:function(){ecount.gridV2.modules.drag.prototype.init.apply(this,arguments)},ecIsDragableState:function(n){var u=n.target,i=$(u),r,t;return this.__defaultOptions.dragType=="table"&&(r=i.closest("thead, tbody, tfoot"),r.length==0)?!1:(t=this.getDragableTargetInfo(n),this.constValue.checkBoxPropertyNameRex.test(t.columnId)||this.constValue.rowMoveablePropertyNameRex.test(t.columnId)||this.constValue.rowNumberingPropertyNameRex.test(t.columnId))?!1:i.css("cursor")=="col-resize"?!1:!0},ecNoDirectionToMove:function(){ecount.gridV2.modules.drag.prototype.ecNoDirectionToMove.apply(this,arguments)},ecIsMoveable:function(){return ecount.gridV2.modules.drag.prototype.ecIsMoveable.apply(this,arguments)},ecGetDragableElementInfoByElement:function(n){var u=$(n),t=u.closest("thead, tbody, tfoot"),i,r;return t.length==0?null:(i=t[0],r=n.getAttribute("data-rowtype")=="slip"?"2":"1",{sectionType:i.tagName.toLowerCase(),columnId:n.getAttribute("data-columnid"),rowId:n.getAttribute("data-key"),rowType:r})},ecGetDropableElementInfoByElement:function(n){var i=ecount.grid.constValue,r=$(n),t=r.closest("thead, tbody, tfoot");if(t.length==0)return null;var u=t[0],f=n.getAttribute("data-rowtype"),e=i.sectionSeparateValue[f];return{sectionType:u.tagName.toLowerCase(),columnId:n.getAttribute("data-columnid"),rowId:n.getAttribute("data-key"),rowType:e}},ecSetMoveableDirection:function(){this.__defaultOptions.dragMethod!="all"&&(this.__datas.dragMethod=this.__defaultOptions.dragMethod)},ecInitMouseIconElement:function(n){var t=this;this.__defaultOptions.dropableContainerSelector.forEach(function(t){n.className=n.className.replace(new RegExp("(\\s)"+t.replace(/[#.]/,"")+"(?!(\\w|-))|^"+t.replace(/[#.]/,"")+"(?!(\\w|-))","g"),"")});n.style.position="absolute";n.style.top="0px";n.style.left="0px";n.style.display="none";n.style.zIndex="20";n.className+=" table-clone-sortable "},ecMoveMouseIconElement:function(){var i=0,r=0,n,t;this.__defaultOptions.body&&(i=this.__defaultOptions.body.scrollLeft,r=this.__defaultOptions.body.scrollTop);this.__datas.mouseIconElement&&(n=this.__datas.startStartElementPosition.top,t=this.__datas.startStartElementPosition.left,n+=(this.__datas.mousemovePosition.y-this.__datas.mousedownPosition.y)/(2-ecount.common.getZoomRatio()),t+=(this.__datas.mousemovePosition.x-this.__datas.mousedownPosition.x)/(2-ecount.common.getZoomRatio()),n+=this.__datas.startContainerElement.offsetLeft,t+=this.__datas.startContainerElement.offsetLeft,this.__datas.mouseIconElement.style.top=n+r+"px",this.__datas.mouseIconElement.style.left=t+i+"px")},ecIsPossibleMoveable:function(){return ecount.gridV2.modules.drag.prototype.ecIsPossibleMoveable.apply(this,arguments)},ecSetPositionShadowBox:function(n,t,i,r,u,f,e,o,s){var c=this.__defaultOptions.body&&this.__defaultOptions.body.scrollTop||0,w=this.__defaultOptions.body&&this.__defaultOptions.body.scrollLeft||0,b;this.__defaultOptions.dropableContainerSelector.forEach(function(t){n.className=n.className.replace(new RegExp("(\\s)"+t.replace(/[#.]/,"")+"(?!(\\w|-))|^"+t.replace(/[#.]/,"")+"(?!(\\w|-))","g"),"")});b=t.offsetTop;n.style.position="absolute";n.style.display="";n.style.zIndex="1";n.className+=" table-clone-placeholder ";n.className=n.className.replace(this.__defaultOptions.dropableContainerSelector,"");try{var l=t.getBoundingClientRect(),a=i.getBoundingClientRect(),k=i.offsetTop;this.__datas.dragMethod=="vertical"?n.style.top=l.top-a.top+o.top+c+"px":this.__datas.dragMethod==this.constValue.drag.directionMovement.horizontal&&(n.style.top=l.top-a.top+s.top+c+"px");n.style.left=e.left-f.left+w+"px"}catch(v){var y={},h={},p="";h.errorLog=v&&v.message;h.errorType="discover error cause: ecount.gridV2.modules.dragGrid > ecDrawShadowBox";h.date="2021-02-08";p=JSON.stringify(h);y.message=p;ecount.page.error(y)}},ecGetDropableElement:function(n,t){for(var u,f,a,h,e,v,o,i,c=n.clientX,l=n.clientY,y=this.__defaultOptions.body&&this.__defaultOptions.body.scrollTop||0,p=this.__defaultOptions.body&&this.__defaultOptions.body.scrollLeft||0,r=null,s=0,w=t.children.length;s<w;s++)if(u=t.children[s],u.tagName!="COLGROUP"){for(f=0,a=u.children.length;f<a;f++){for(h=u.children[f],e=0,v=h.children.length;e<v;e++)if((o=h.children[e],o.classList.contains(this.__defaultOptions.dropSelector.replace(/[#.]/,"")))&&(i=ecount.gridV2.view.util.getScreenBoundingClientRect(o,!1),i.left-=p,i.top-=y,i.left=i.left*(2-ecount.common.getZoomRatio()),i.top=i.top*(2-ecount.common.getZoomRatio()),i.width=i.width*(2-ecount.common.getZoomRatio()),i.height=i.height*(2-ecount.common.getZoomRatio()),i.left<=c&&c<=i.left+i.width&&i.top<=l&&l<=i.top+i.height)){r=o;break}if(r)break}if(r)break}return r},ecIsCanMouseup:function(){return!this.__datas.startBoundary||!this.__datas.moveBoundary?!1:ecount.gridV2.modules.boundary.prototype.compareBoundary.call(this.__datas.startBoundary,this.__datas.moveBoundary)?!1:!0},ecMouseupCompleted:function(n){var t;this.outerHorizontal&&(t=this.outerHorizontal.__datas.activeId,this.outerHorizontal.clearAllChildElement().clearContainerElement().resetData().render(),n.gridMoveType==this.constValue.drag.directionMovement.allHorizontal&&this.outerHorizontal.setActiveId(t).addClassName(t,["active"]));this.outerVertical&&(t=this.outerVertical.__datas.activeId,this.outerVertical.clearAllChildElement().clearContainerElement().resetData().render(),n.gridMoveType==this.constValue.drag.directionMovement.vertical&&this.outerVertical.setActiveId(t).addClassName(t,["active"]))}});ecount.gridV2.modules.dragGridBySelector=$.Class(ecount.gridV2.modules.dragGrid,{init:function(){ecount.gridV2.modules.dragGrid.prototype.init.apply(this,arguments);this.selector instanceof ecount.gridV2.modules.selectorTable.tableSingle?this.__selector=new ecount.gridV2.modules.selectorTable.tableSingle({history:this.__history},this.selector.__defaultOptions,this.__events):this.selector instanceof ecount.gridV2.modules.selectorTable.tableMulti&&(this.__selector=new ecount.gridV2.modules.selectorTable.tableMulti({history:this.__history},this.selector.__defaultOptions,this.__events))},ecIsDragableState:function(){var t=ecount.gridV2.modules.dragGrid.prototype.ecIsDragableState.apply(this,arguments),n;return t?(n=this.selector.getSelectionType(),this.constValue.selector.selectionType.allHorizontal==n)?!0:this.constValue.selector.selectionType.normal==n&&this.selector.__datas.state!=this.constValue.selector.state.dragable?!1:!0:t},ecIsChooseTheInside:function(n){if(!this.__boundary.isValid())return!1;var t=this.ecGetSelectedElementInfoByEvent(n);return t.boundary.isValid()?this.__datas.startSectionType!=t.sectionType?!1:this.__boundary.compareInboundBoundary(t.boundary):!1},ecSetMoveableDirection:function(n){var t=ecount.grid.constValue,r=this.selector.getSelectionType(),i;this.__defaultOptions.dragMethod=="all"?r==t.selector.selectionType.allHorizontal?(this.__datas.dragMethod=r,this.__datas.verticalMethod=t.selector.selectionType.allHorizontal):(i=this.ecGetMoveableDirection(n),i.isPossibleHorizontal?this.__datas.dragMethod=t.drag.directionMovement.horizontal:i.isPossibleVertical?(this.__datas.dragMethod=t.drag.directionMovement.vertical,this.__datas.verticalMethod=i.verticalMethod):this.__datas.dragMethod=t.drag.directionMovement.none):this.__datas.dragMethod=this.__defaultOptions.dragMethod},ecNoDirectionToMove:function(n){ecount.gridV2.modules.dragGrid.prototype.ecNoDirectionToMove.apply(this,arguments);this.selector.ecMousedown(n)},ecGetMoveableDirection:function(){var n=this.selector.getStartSectionType(),t=this.selector.getStartColumnSectionType(),i=this.selector.getBoundary().clone();return this.__events&&this.__events.triggerEvent(this.constEvent.dragMovePossible+this.__defaultOptions.eventPrefixId,{gridSectionType:n,gridColumnSectionType:t,gridBoundary:i})||{isPossibleHorizontal:!0,isPossibleVertical:!0}},ecIsMoveableDirection:function(n){var i=ecount.grid.constValue,r=this.selector.getSelectionType(),t;return this.__defaultOptions.dragMethod=="all"?r==i.selector.selectionType.allHorizontal?!0:(t=this.ecGetMoveableDirection(n),t.isPossibleHorizontal||t.isPossibleVertical):!0},ecIsPossibleDirectionMovement:function(n,t,i){var r=ecount.grid.constValue,u=this.selector.getSelectionType(),n=this.selector.getStartSectionType(),t=this.selector.getStartColumnSectionType(),i=this.selector.getBoundary().clone();return u==r.selector.selectionType.allHorizontal?{isPossibleHorizontal:!0,isPossibleVertical:!1}:this.__events&&this.__events.triggerEvent(this.constEvent.dragMovePossible+this.__defaultOptions.eventPrefixId,{gridSectionType:n,gridColumnSectionType:t,gridBoundary:i})||{isPossibleHorizontal:!1,isPossibleVertical:!1}},ecInitMousemove:function(){this.selector.hide()},ecMoveMouseIconElement:function(){var i=0,r=0,n,t;this.__defaultOptions.body&&(i=this.__defaultOptions.body.scrollLeft,r=this.__defaultOptions.body.scrollTop);this.__datas.mouseIconElement&&(n=this.__datas.startStartElementPosition.top,t=this.__datas.startStartElementPosition.left,n+=(this.__datas.mousemovePosition.y-this.__datas.mousedownPosition.y)/(2-ecount.common.getZoomRatio()),t+=(this.__datas.mousemovePosition.x-this.__datas.mousedownPosition.x)/(2-ecount.common.getZoomRatio()),n+=this.__datas.startContainerElement.offsetLeft,t+=this.__datas.startContainerElement.offsetLeft,this.__datas.mouseIconElement.style.top=n+r+"px",this.__datas.mouseIconElement.style.left=t+i+"px")},ecIsPossibleMoveable:function(n,t,i,r){var u=ecount.gridV2.modules.dragGrid.prototype.ecIsPossibleMoveable.apply(this,arguments);if(!u)return u;switch(this.__datas.verticalMethod){case"NONE":return!1;case"MOVE_TO_SAME_ROWTYPE":return this.__datas.startDetailSectionType==r;case"MOVE_TO_DIFFERENT_ROWTYPE":return!0;case"MOVE_TO_SAME_COLUMNTYPE":return this.__datas.startDetailSectionType==r;case"MOVE_TO_DIFFERENT_COLUMNTYPE":return!0;default:return!0}},ecSetPositionShadowBox:function(n,t,i,r,u,f,e,o,s){var a=this.__defaultOptions.body&&this.__defaultOptions.body.scrollTop||0,v=this.__defaultOptions.body&&this.__defaultOptions.body.scrollLeft||0,b,c,l;this.__defaultOptions.dropableContainerSelector.forEach(function(t){n.className=n.className.replace(new RegExp("(\\s)"+t.replace(/[#.]/,"")+"(?!(\\w|-))|^"+t.replace(/[#.]/,"")+"(?!(\\w|-))","g"),"")});b=t.offsetTop;n.style.position="absolute";n.style.display="";n.style.zIndex="1";n.className+=" table-clone-placeholder ";n.className=n.className.replace(this.__defaultOptions.dropableContainerSelector,"");try{c=t.getBoundingClientRect();l=i.getBoundingClientRect();this.__datas.dragMethod==this.constValue.drag.directionMovement.vertical?n.style.top=c.top-l.top+o.top+a+"px":this.__datas.dragMethod=="horizontal"&&(n.style.top=c.top-l.top+s.top+a+"px");n.style.left=e.left-f.left+v+"px"}catch(y){var p={},h={},w="";h.errorLog=y&&y.message;h.errorType="discover error cause: ecount.gridV2.modules.dragGridBySelector > ecDrawShadowBox";h.date="2021-02-08";w=JSON.stringify(h);p.message=w;ecount.page.error(p)}n.style.left=e.left-f.left+v+"px"},ecIsCanMouseup:function(){var n=ecount.grid.constValue,t=this.selector.getSelectionType();if(t==n.selector.selectionType.allHorizontal){if(this.__datas.startBoundary.left==this.__datas.moveBoundary.left&&this.__datas.startBoundary.right==this.__datas.moveBoundary.right)return!1}else if(!this.__datas.startBoundary||!this.__datas.moveBoundary||this.__datas.startBoundary.top<=this.__datas.moveBoundary.top&&this.__datas.moveBoundary.bottom<=this.__datas.startBoundary.bottom&&this.__datas.startBoundary.left<=this.__datas.moveBoundary.left&&this.__datas.moveBoundary.right<=this.__datas.startBoundary.right)return!1;return!0},ecMouseupCompleted:function(n){var i,t,r;ecount.gridV2.modules.dragGrid.prototype.ecMouseupCompleted.apply(this,arguments);i=ecount.grid.constValue;t=this.selector.getSelectionType();t==i.selector.selectionType.allHorizontal?(this.outerHorizontal&&this.outerHorizontal.active(t),this.selector.ecSelectHorizontal(n.boundary).ecDrawHorizontal()):(r=this.selector.getState(),this.selector.getBoundary().reset(),this.selector.getStartBoundary().reset(),this.selector.getEndBoundary().reset(),this.selector.resetEndData().setState(r).ecSelectStart(n.cells[0]).ecSelectEnd(n.cells[n.cells.length-1]).ecSelectExtend().hide().ecDraw().show())}});ecount.gridV2.modules.dragGridByCaret=$.Class(ecount.gridV2.modules.dragGrid,{init:function(){ecount.gridV2.modules.dragGrid.prototype.init.apply(this,arguments);this.selector instanceof ecount.gridV2.modules.selectorTable.tableSingle?this.__selector=new ecount.gridV2.modules.selectorTable.tableSingle({history:this.__history},this.selector.__defaultOptions,this.__events):this.selector instanceof ecount.gridV2.modules.selectorTable.tableMulti&&(this.__selector=new ecount.gridV2.modules.selectorTable.tableMulti({history:this.__history},this.selector.__defaultOptions,this.__events))},ecIsDragableState:function(n){return"mouseup"==this.selector.getState()&&/grid(-(ns|ew))?-move/.test(n.target.className)?!0:!1},ecIsChooseTheInside:function(n){if(!this.__boundary.isValid())return!1;var t=this.ecGetSelectedElementInfoByEvent(n);return t.boundary.isValid()?this.__datas.startSectionType!=t.sectionType?!1:this.__boundary.compareInboundBoundary(t.boundary):!1},ecSetMoveableDirection:function(n){var t=ecount.grid.constValue,r=this.selector.getSelectionType(),i;this.__defaultOptions.dragMethod=="all"?r==t.selector.selectionType.allHorizontal?(this.__datas.dragMethod=r,this.__datas.verticalMethod=t.selector.selectionType.allHorizontal):(i=this.ecGetMoveableDirection(n),i.isPossibleHorizontal&&i.isPossibleVertical?this.__datas.dragMethod=t.drag.directionMovement.all:i.isPossibleHorizontal?this.__datas.dragMethod=t.drag.directionMovement.horizontal:i.isPossibleVertical?(this.__datas.dragMethod=t.drag.directionMovement.vertical,this.__datas.verticalMethod=i.verticalMethod):this.__datas.dragMethod=t.drag.directionMovement.none):this.__defaultOptions.dragMethod=this.__defaultOptions.dragMethod},ecNoDirectionToMove:function(n){ecount.gridV2.modules.dragGrid.prototype.ecNoDirectionToMove.apply(this,arguments);this.selector.ecMousedown(n)},ecIsMoveable:function(n){var t=n.target,i=ecount.gridV2.modules.dragGrid.prototype.ecIsMoveable.apply(this,arguments);return i&&/grid(-(ns|ew))?-move/.test(t.className)?!1:!0},ecGetDragableElementInfoByElement:function(){return this.__events&&this.__events.triggerEvent(this.constEvent.getSelectedBoundaryInfos+this.__defaultOptions.eventPrefixId,{})||{sectionType:"",columnId:"",rowId:"",rowType:""}},ecGetMoveableDirection:function(){var n=this.selector.getStartSectionType(),t=this.selector.getStartColumnSectionType(),n=this.selector.getStartSectionType(),t=this.selector.getStartColumnSectionType(),i=this.selector.getStartBoundary().clone(),r=this.selector.getEndSectionType(),u=this.selector.getEndColumnSectionType(),f=this.selector.getEndBoundary().clone(),e=this.selector.getBoundary().clone();return this.__events&&this.__events.triggerEvent(this.constEvent.dragMovePossible+this.__defaultOptions.eventPrefixId,{gridStartSectionType:n,gridStartColumnSectionType:t,gridStartSectionType:n,gridStartColumnSectionType:t,gridStartBoundary:i,gridEndSectionType:r,gridEndColumnSectionType:u,gridEndBoundary:f,gridBoundary:e})||{isPossibleHorizontal:!1,isPossibleVertical:!1}},ecGetMoveDirection:function(n,t,i,r){var u=this.constValue.crossDirection.none,f=t.getBoundingClientRect();return this.__events&&this.__events._triggerEvent(this.constEvent.getMoveDirection+this.__defaultOptions.eventPrefixId,{startTargetScreenPosition:i,moveTargetScreenPosition:r,mousemovePosition:this.__datas.mousemovePosition,mousemoveEvent:this.__datas.mousemoveEvent,mousemoveElement:t,dragBehavior:this.__datas.dragMethod,gridMoveMethod:this.__datas.verticalMethod},{})||this.constValue.crossDirection.none},ecIsMoveableDirection:function(n){var i=ecount.grid.constValue,r=this.selector.getSelectionType(),t;return this.__defaultOptions.dragMethod=="all"?r==i.selector.selectionType.allHorizontal?!0:(t=this.ecGetMoveableDirection(n),t.isPossibleHorizontal||t.isPossibleVertical):!0},ecIsPossibleDirectionMovement:function(n,t,i){var r=ecount.grid.constValue,u=this.selector.getSelectionType(),n=this.selector.getStartSectionType(),t=this.selector.getStartColumnSectionType(),f=this.selector.getEndSectionType(),e=this.selector.getEndColumnSectionType(),i=this.selector.getBoundary().clone();return u==r.selector.selectionType.allHorizontal?{isPossibleHorizontal:!0,isPossibleVertical:!1}:this.__events&&this.__events.triggerEvent(this.constEvent.dragMovePossible+this.__defaultOptions.eventPrefixId,{gridSectionType:n,gridColumnSectionType:t,gridBoundary:i})||{isPossibleHorizontal:!1,isPossibleVertical:!1}},ecInitMousemove:function(){this.selector.hide()},ecInitMouseIconElement:function(n){var t=this;this.__defaultOptions.dropableContainerSelector.forEach(function(t){n.className=n.className.replace(new RegExp("(\\s)"+t.replace(/[#.]/,"")+"(?!(\\w|-))|^"+t.replace(/[#.]/,"")+"(?!(\\w|-))","g"),"")});n.style.top="0px";n.style.left="0px";n.style.display="none";n.style.zIndex="20"},ecMoveMouseIconElement:function(){var i=0,r=0;if(this.__defaultOptions.body&&(i=this.__defaultOptions.body.scrollLeft,r=this.__defaultOptions.body.scrollTop),this.__datas.mouseIconElement){var u=this.__datas.mouseIconElement.offsetWidth,f=this.__datas.mouseIconElement.offsetHeight,n=this.__datas.mousedownPosition.y-this.__datas.startContainerSize.top-f,t=this.__datas.mousedownPosition.x-this.__datas.startContainerSize.left-u;n+=(this.__datas.mousemovePosition.y-this.__datas.mousedownPosition.y)/(2-ecount.common.getZoomRatio());t+=(this.__datas.mousemovePosition.x-this.__datas.mousedownPosition.x)/(2-ecount.common.getZoomRatio());n+=this.__datas.startContainerElement.offsetLeft;t+=this.__datas.startContainerElement.offsetLeft;this.__datas.mouseIconElement.style.top=n+r+"px";this.__datas.mouseIconElement.style.left=t+i+"px"}},ecIsPossibleMoveable:function(n,t,i,r){var u=ecount.grid.constValue,f=ecount.gridV2.modules.dragGrid.prototype.ecIsPossibleMoveable.apply(this,arguments);if(!f)return f;switch(this.__datas.verticalMethod){case"NONE":return!1;case"MOVE_TO_SAME_ROWTYPE":return this.__datas.startDetailSectionType==r;case"MOVE_TO_DIFFERENT_ROWTYPE":if(this.__datas.startSectionType==n){if(this.__datas.startDetailSectionType==u.sectionSeparateValue.line)return r==u.sectionSeparateValue.slip;if(this.__datas.startDetailSectionType==u.sectionSeparateValue.slip)return r==u.sectionSeparateValue.line}return!1;case"MOVE_TO_SAME_COLUMNTYPE":return this.__datas.startDetailSectionType==r;case"MOVE_TO_DIFFERENT_COLUMNTYPE":return!0;default:if(this.__datas.startSectionType==n)return this.__datas.startDetailSectionType==r}return!0},ecSetPositionCaretIcon:function(n,t,i,r,u,f,e,o,s,h){var p=this.__defaultOptions.body&&this.__defaultOptions.body.scrollTop||0,w=this.__defaultOptions.body&&this.__defaultOptions.body.scrollLeft||0;if(n){this.__defaultOptions.dropableContainerSelector.forEach(function(t){n.className=n.className.replace(new RegExp("(\\s)"+t.replace(/[#.]/,"")+"(?!(\\w|-))|^"+t.replace(/[#.]/,"")+"(?!(\\w|-))","g"),"")})||{top:0,left:0,bottom:0,right:0,width:0,height:0};var c=n.querySelector(".holder-top"),l=n.querySelector(".holder-left"),v=0,y=0,b=i.getBoundingClientRect(),a=this.__events&&this.__events._triggerEvent(this.constEvent.getMoveBoundingClientRect+this.__defaultOptions.eventPrefixId,{mousemoveElement:h,dragBehavior:this.__datas.dragMethod},{top:0,left:0,bottom:0,right:0,width:0,height:0});switch(this.__datas.crossDirection){case this.constValue.crossDirection.leftOfRight:v=c.offsetWidth;y=c.offsetHeight;c.style.top=a.top+y/-2+"px";c.style.left=a.left-v/2+"px";l.classList.add("hide");break;case this.constValue.crossDirection.rightOfRight:v=c.offsetWidth;y=c.offsetHeight;c.style.top=a.top+y/-2+"px";c.style.left=a.left+a.width-v/2+"px";l.classList.add("hide");break;case this.constValue.crossDirection.leftOfLeft:v=c.offsetWidth;y=c.offsetHeight;c.style.top=a.top+y/-2+"px";c.style.left=a.left-v/2+"px";l.classList.add("hide");break;case this.constValue.crossDirection.rightOfLeft:v=c.offsetWidth;y=c.offsetHeight;c.style.top=a.top+y/-2+"px";c.style.left=a.left+a.width-v/2+"px";l.classList.add("hide");break;case this.constValue.crossDirection.topOfTop:v=l.offsetWidth;y=l.offsetHeight;l.style.top=a.top-y/2+"px";l.style.left=a.left-v+"px";c.classList.add("hide");break;case this.constValue.crossDirection.bottomOfTop:v=l.offsetWidth;y=l.offsetHeight;l.style.top=a.top+a.height-y/2+"px";l.style.left=a.left-v+"px";c.classList.add("hide");break;case this.constValue.crossDirection.topOfBottom:v=l.offsetWidth;y=l.offsetHeight;l.style.top=a.top-y/2+"px";l.style.left=a.left-v+"px";c.classList.add("hide");break;case this.constValue.crossDirection.bottomOfBottom:v=l.offsetWidth;y=l.offsetHeight;l.style.top=a.top+a.height-y/2+"px";l.style.left=a.left-v+"px";c.classList.add("hide")}}},ecIsCanMouseup:function(){var n=ecount.grid.constValue,t=this.selector.getSelectionType();if(t==n.selector.selectionType.allHorizontal){if(this.__datas.startBoundary.left==this.__datas.moveBoundary.left&&this.__datas.startBoundary.right==this.__datas.moveBoundary.right)return!1}else if(!this.__datas.startBoundary||!this.__datas.moveBoundary||this.__datas.startBoundary.top<=this.__datas.moveBoundary.top&&this.__datas.moveBoundary.bottom<=this.__datas.startBoundary.bottom&&this.__datas.startBoundary.left<=this.__datas.moveBoundary.left&&this.__datas.moveBoundary.right<=this.__datas.startBoundary.right)return!1;return!0},ecMouseupCompleted:function(){ecount.gridV2.modules.dragGrid.prototype.ecMouseupCompleted.apply(this,arguments)},MOUSEDOWN_HANDLER:function(n){var f;if(ecount.gridV2.util.log("ecount.gridV2.modules.dragGridByCaret - drag mousedown start"),document.onselectstart=new Function("return false"),this.isDragable(n)&&this.ecIsDragableState(n)){var r=this.getDragableElement(n),t=this.ecGetDragableElementInfoByElement(r),i=this.getDragableContainerByElement(r),e=this.getDragableContainerInfoByElement(i),u=this.getDragableLayoutByElement(r);this.__datas.dragableElement=r;this.__datas.dragableContainer=i;this.__datas.dragableLayout=u;this.ecMousedownHandler(n);this.ecIsMoveableDirection(n)?(this.__events&&this.__events._triggerEvent(ecount.grid.event.list.dragEndPreInit,n,{type:"grid",moveType:"line",columnId:t[0].columnId,rowKey:t[0].rowId,selectedBoundaryInfos:t}),this.__datas.mousedownPosition.x=n.clientX,this.__datas.mousedownPosition.y=n.clientY,this.__datas.startEvent=n,this.__datas.startSectionType=t[0].sectionType,this.__datas.startColumnId=t[0].columnId,this.__datas.startRowId=t[0].rowId,this.__datas.startDetailSectionType=t[0].detailSectionType,this.__datas.startColumnSectionType=t[0].columnSectionType,this.__datas.startElement=t[0].element,this.__datas.startStartElementPosition=t[0].elementPosition,this.__datas.startBoundary=t[0].columnBoundary,this.__datas.startTargetScreenPosition=this.viewUtil.getScreenBoundingClientRect(t[0].element,!0),this.__datas.startLayout=u,this.__datas.startContainerElement=i,this.__datas.moveSectionType=t[0].sectionType,this.__datas.moveColumnId=t[0].columnId,this.__datas.moveRowId=t[0].rowId,this.__datas.moveRowType=t[0].rowType,this.__datas.startContainerSize=i&&this.viewUtil.getScreenBoundingClientRect(i,!0)||{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0},this.__datas.startLayoutPosition=this.__datas.startLayout&&this.viewUtil.getScreenBoundingClientRect(this.__datas.startLayout,!1,!0)||{x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0},f=this.__datas.startLayout&&this.viewUtil.getScreenBoundingClientRect(this.__datas.startLayout,!0)||{x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0},this.__events&&this.__events.triggerEvent(this.constEvent.dragStartFinish+this.__defaultOptions.eventPrefixId,{}),this.__datas.state=this.constValue.drag.state.start,this.bindEventMousemove(),this.bindEventMouseup()):(this.__datas.dragableElement=null,this.__datas.dragableContainer=null,this.__datas.dragableLayout=null)}else(!this.selector||[this.constValue.selector.state.none,this.constValue.selector.state.mouseup].contains(this.selector.__datas.state))&&(document.onselectstart=new Function("return true"));ecount.gridV2.util.log("drag mousedown end")}});ecount.gridV2.modules.dragTableTree=$.Class(ecount.gridV2.modules.drag,{ecInitMouseIconElement:function(n){var t=this;this.__defaultOptions.groupSelectors.forEach(function(n){t.__data.mouseIconElement.className=t.__data.mouseIconElement.className.replace(new RegExp("(\\s)"+n.replace(/[#.]/,"")+"(?!(\\w|-))|^"+n.replace(/[#.]/,"")+"(?!(\\w|-))","g"),"")});n.style.position="absolute";n.style.top="0px";n.style.left="0px";n.style.display="none";n.style.zIndex="6000"},ecShowShadowBox:function(){}});ecount.gridV2.modules.resize=$.Class(null,{init:function(n,t,i){this.reset();this.initGlobalValue(n,t,i);this.initResizeData(n,t)},render:function(){this.renderGoGoGoGoGoGoGo();this._bindMouseDownEvent(!0);this._bindMouseMoveEvent(!0)},reset:function(){this.clearResizeOptions();this.clearPrevElement()},destroy:function(){},destroyAll:function(){this.removeResizeCell(this.ths);this.removeResizeCell(this.tds);this.removeResizeCell(this.tfs);this.clearResizeOptions();this.clearPrevElement();this.pauseResize();this.grid=null;this.ths=null;this.tds=null;this.constEvent=null;this.history=null;this.__events=null;this.resizeType=null;this.resizeTarget=null;this.heightSections=null;this.enableColumns=null;this.groupColumns=null;this.gripSize=null},initResizeData:function(n,t){this.__defaultOptions={};_.extend(this.__defaultOptions,t);this.grid=this.__defaultOptions.container;this.table=this.grid.querySelector("table");this.$table=$(this.table);this.ths=this.grid.querySelectorAll("table thead th");this.tds=this.grid.querySelectorAll("table tbody td");this.tfs=this.grid.querySelectorAll("table tfoot td");this.resizeOptions=null;this.$prevCell=null;this.gripSize=n.gripSize||6;this.resizeType=n.resizeType||this.constValue.resizeType.all;this.resizeTarget=n.resizeTarget||this.constValue.resizeTarget.all;this.heightSections=n.heightSections||[];this.enableColumns=n.enableColumns||[];this.groupColumns=n.groupColumns||{};this.maxSize=n.maxSize||""},initGlobalValue:function(n,t,i){this.constValue=ecount.grid.constValue;this.constEvent=ecount.gridV2.constEvent.resize;this.history=n.history;this.__events=i;this.formVersion=n.formVersion},renderGoGoGoGoGoGoGo:function(){this.createResizeCell(this.ths,this.constValue.sectionType.thead);this.createResizeCell(this.tds,this.constValue.sectionType.tbody);this.createResizeCell(this.tfs,this.constValue.sectionType.tfoot)},createResizeCell:function(n,t){var f=this,u=this.hasSection(t),i=this.hasResizeTarget(),r;this._isNodeList(n)||(n=[n]);_.each(n,function(n){r=f.hasColumnId(n.getAttribute("data-columnid"));i.enableWidthGrip&&r&&(n.classList.add("resize-enable"),n.classList.add("resize-width"),n.setAttribute("sectionType",t));i.enableHeightGrip&&u&&r&&(n.classList.add("resize-enable"),n.classList.add("resize-height"),n.setAttribute("sectionType",t));i.enableWidthGrip&&i.enableHeightGrip&&u&&r&&(n.classList.add("resize-enable"),n.classList.add("resize-both"),n.setAttribute("sectionType",t))})},removeResizeCell:function(n){_.each(n,function(n){n.classList.remove("resize-enable");n.classList.remove("resize-width");n.classList.remove("resize-enable");n.classList.remove("resize-height");n.classList.remove("resize-enable");n.classList.remove("resize-both")})},MOUSEDOWN_HANDLER:function(n){var r,t;if(n.button==0&&(r=this.$table.find(n.target),r&&r.length!=0)&&(t=n.target,t=ecount.gridV2.modules.util.closest(t,/T[DH]/),t)&&([this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(this.formVersion)&&(document.onselectstart=new Function("return false")),t.classList.contains("resize-enable"))){var u=t.getAttribute("sectionType"),f=t.getAttribute("data-columnid"),e=t.getAttribute("data-key"),i=this.__events&&this.__events._triggerEvent(this.constEvent.resizeStart,{sectionType:u,columnId:f,rowId:e,changeAllColRow:this.setChangeAllColRow(this.formVersion),changeAllRow:this.setChangeAllRow(this.resizeType),isTop:t.classList.contains("row-grip-top"),isLeft:t.classList.contains("col-grip-left")},n);this.resizeOptions=i;t.classList.contains("gridCol-grip")&&(this.resizeOptions.moveWidth=!0,this.resizeOptions.startOffsetX=n.pageX-i.cellElem.offsetWidth,this.resizeOptions.startOffsetWidth=i.cellElem.offsetWidth);t.classList.contains("row-grip")&&(this.resizeOptions.moveHeight=!0,this.resizeOptions.startOffsetY=n.pageY-i.rowElem.offsetHeight);t.classList.contains("nw-grip")&&(this.resizeOptions.moveWidth=!0,this.resizeOptions.moveHeight=!0,this.resizeOptions.startOffsetX=n.pageX-i.cellElem.offsetWidth,this.resizeOptions.startOffsetWidth=i.cellElem.offsetWidth,this.resizeOptions.startOffsetY=n.pageY-i.rowElem.offsetHeight);(this.resizeOptions.moveWidth||this.resizeOptions.moveHeight)&&this.__events&&this.__events._triggerEvent(this.constEvent.resizeEnable,{sectionType:u,columnId:f,rowId:e,moveWidth:this.resizeOptions.moveWidth,moveHeight:this.resizeOptions.moveHeight},n);this.resizeOptions.startX=n.pageX-this.table.offsetWidth;this.mousedownEvent=n;this._bindMouseUpEvent(!0)}},MOUSEMOVE_HANDLER:function(n){var t=n.target,h=this.$table.find(t),i,u,f,e,a,v,r,y,s;if(t=ecount.gridV2.modules.util.closest(t,/T[HD]/g),f=!1,e=!1,t&&h&&h.length>0)if(t.classList.contains("resize-enable")){this.clearPrevElement();var o=t.getAttribute("sectionType"),c=t.getAttribute("data-columnid"),l=t.getAttribute("data-key");o===this.constValue.sectionType.thead&&(u=this.__events&&this.__events._triggerEvent(this.constEvent.resizeMove,{isTopCheck:!0,sectionType:o,columnId:c,rowId:l},n),f=u);u=this.__events&&this.__events._triggerEvent(this.constEvent.resizeMove,{isLeftCheck:!0,sectionType:o,columnId:c,rowId:l},n);($.isNull(u)||!this.hasColumnId(u.columnId))&&(e=!0);a=this.__defaultOptions.body&&this.__defaultOptions.body.scrollTop||0;v=this.__defaultOptions.body&&this.__defaultOptions.body.scrollLeft||0;i=ecount.gridV2.view.util.getScreenBoundingClientRect(t,!1,!1,{});i.left-=v;i.top-=a;i.left=i.left*(2-ecount.common.getZoomRatio());i.top=i.top*(2-ecount.common.getZoomRatio());i.width=i.width*(2-ecount.common.getZoomRatio());i.height=i.height*(2-ecount.common.getZoomRatio());t.classList.contains("resize-width")&&(n.pageX+this.gripSize>=_.parseInt(i.left+i.width)||n.pageX-this.gripSize<=_.parseInt(i.left))?n.pageX+this.gripSize>=_.parseInt(i.left+i.width)?(t.style.cursor="col-resize",t.classList.add("gridCol-grip"),t.classList.remove("cursor-pointer")):n.pageX-this.gripSize<=_.parseInt(i.left)&&!e?(t.style.cursor="col-resize",t.classList.add("gridCol-grip"),t.classList.add("col-grip-left"),t.classList.remove("cursor-pointer")):t.style.cursor="":t.classList.contains("resize-height")&&(n.pageY+this.gripSize>=_.parseInt(i.top+i.height)||n.pageY-this.gripSize<=_.parseInt(i.top))?n.pageY+this.gripSize>=_.parseInt(i.top+i.height)?(t.style.cursor="row-resize",t.classList.add("row-grip"),t.classList.remove("cursor-pointer")):n.pageY-this.gripSize<=_.parseInt(i.top)&&!f?(t.style.cursor="row-resize",t.classList.add("row-grip"),t.classList.add("row-grip-top"),t.classList.remove("cursor-pointer")):t.style.cursor="":t.style.cursor="";t.classList.contains("resize-both")&&n.pageY+this.gripSize>=_.parseInt(i.top+i.height)&&n.pageX+this.gripSize>=_.parseInt(i.left+i.width)&&(t.classList.add("nw-grip"),t.classList.remove("cursor-pointer"),t.style.cursor="nw-resize");this.$prevCell=t}else this._isCell(t)&&this.createResizeCell(t,this.getSectionType(t));this.resizeOptions&&(this.resizeOptions.moveWidth||this.resizeOptions.moveHeight)&&(r=n.pageX,y=n.pageY,_.isEmpty(this.maxSize)?r-this.resizeOptions.startOffsetX<10?r=this.resizeOptions.startOffsetX+10:r-this.resizeOptions.startOffsetX>999&&(r=this.resizeOptions.startOffsetX+999):(s=parseInt(this.maxSize),r-this.resizeOptions.startOffsetX<10?r=this.resizeOptions.startOffsetX+10:r-this.resizeOptions.startOffsetX>s&&(r=this.resizeOptions.startOffsetX+s)),this.resizeOptions.width=r-this.resizeOptions.startOffsetX+"px",this.resizeOptions.widthGap=r-this.mousedownEvent.pageX+"px",this.resizeOptions.height=y-this.resizeOptions.startOffsetY+"px",this.resizeOptions.gap=r-this.resizeOptions.startX+"px",this.__events&&this.__events._triggerEvent(this.constEvent.resizeMove,this.resizeOptions,n))},MOUSEUP_HANDLER:function(n){return[this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(this.formVersion)&&(document.onselectstart=new Function("return true")),this.resizeOptions&&(this.resizeOptions.moveWidth||this.resizeOptions.moveHeight)&&this.__events&&this.__events._triggerEvent(this.constEvent.resizeEnd,this.resizeOptions,n),this.clearResizeOptions(),this.clearPrevElement(),this._bindMouseUpEvent(!1),!0},_bindMouseDownEvent:function(n){var t=this.getGridId();if(_.isBoolean(n)&&!n)$(document).off("mousedown.grip"+t);else $(document).off("mousedown.grip"+t).on("mousedown.grip"+t,this.MOUSEDOWN_HANDLER.bind(this))},_bindMouseUpEvent:function(n){var t=this.getGridId();if(_.isBoolean(n)&&!n)$(document).off("mouseup.grip"+t);else $(document).off("mouseup.grip"+t).on("mouseup.grip"+t,this.MOUSEUP_HANDLER.bind(this))},_bindMouseMoveEvent:function(n){var t=this.getGridId();if(_.isBoolean(n)&&!n)$(document).off("mousemove.grip"+t);else $(document).off("mousemove.grip"+t).on("mousemove.grip"+t,this.MOUSEMOVE_HANDLER.bind(this))},clearResizeOptions:function(){var n=this;_.each(this.resizeOptions,function(t,i){t=null;delete n.resizeOptions[i]});this.resizeOptions=null},getGridId:function(){return $(this.grid).attr("id")},clearPrevElement:function(){this.$prevCell instanceof Element&&(this.$prevCell.classList.remove("gridCol-grip"),this.$prevCell.classList.remove("row-grip"),this.$prevCell.classList.remove("nw-grip"),this.$prevCell.classList.remove("row-grip-top"),this.$prevCell.classList.remove("col-grip-left"));this.$prevCell=null},hasSection:function(n){var t=!1;return this.heightSections.length>0&&(t=this.heightSections.contains(n)),this.heightSections.length==0&&(t=!0),t},hasColumnId:function(n){if($.isNull(n))return!1;var t=!1;return(this.enableColumns.length>0&&(t=this.enableColumns.contains(n)),this.enableColumns.length==0&&(t=!0),this.groupColumns&&this.groupColumns[n])?!0:(n.contains(new RegExp(this.constValue.checkBoxPropertyName))&&(t=!1),n.contains(new RegExp(this.constValue.rowMoveablePropertyName))&&(t=!1),n.contains(new RegExp(this.constValue.rowNumberingPropertyName))&&(t=!1),t)},hasResizeTarget:function(){var n={enableWidthGrip:!1,enableHeightGrip:!1};switch(this.resizeTarget){case this.constValue.resizeTarget.all:n.enableWidthGrip=!0;n.enableHeightGrip=!0;break;case this.constValue.resizeTarget.width:n.enableWidthGrip=!0;break;case this.constValue.resizeTarget.height:n.enableHeightGrip=!0}return n},setChangeAllColRow:function(n){return[this.constValue.formVersion.second,this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(n)},setChangeAllRow:function(n){var t=!1;return n&&(n===this.constValue.resizeType.all&&(t=!1),n===this.constValue.resizeType.each&&(t=!1),n===this.constValue.resizeType.separate&&(t=!1)),t},pauseResize:function(){this._bindMouseDownEvent(!1);this._bindMouseMoveEvent(!1);this.clearPrevElement()},resumeResize:function(){this._bindMouseDownEvent(!0);this._bindMouseMoveEvent(!0)},getSectionType:function(n){return this.constValue.sectionType[n.parentNode.parentNode.tagName.toLowerCase()]},_isNodeList:function(n){return n instanceof NodeList},_isCell:function(n){return n.getAttribute("data-columnid")&&n.getAttribute("data-key")}});ecount.gridV2.modules.selector=$.Class(null,{__defaultOptions:null,__events:null,__containerTemplate:"<div class='areaselect-content-select-table-cell'><\/div>",__template:null,__optionTemplate:null,__defaultWidth:2,__defaultHeight:2,__defaultOptionWidth:20,__defaultOptionHeight:20,__intervalHorizontalId:-1,__intervalVerticalId:-1,__optionTopRatio:.98,__optionLeftRatio:.95,__datas:null,__errorBoundary:null,__selector:null,querySelector:function(n){if(document.querySelector)return document.querySelector(n);var t=$(n);return t[0]},querySelectorAll:function(n,t){var i=document;return arguments.length==2&&(i=n),i.querySelectorAll?i.querySelectorAll(t):$(i).find(t)},findParentElementByTagName:function(n,t){do if(n&&n.nodeName&&n.nodeName.search(t)!=-1)return n;while(n=n.parentNode);return null},setState:function(n){return this.__datas.state=n,this},getState:function(){return this.__datas.state},setType:function(n){return this.__datas.type=n,this},getType:function(){return this.__datas.type},getTarget:function(n){var t=n.target,i=$(t);return i.closest("."+this.__defaultOptions.className)},ecGetTargetInfo:function(){return{}},getSelector:function(){return this.__selector||(this.constructor===ecount.gridV2.modules.selectorTable.tableSingle?this.__selector=new ecount.gridV2.modules.selectorTable.tableSingle({history:this.__history},this.__defaultOptions,this.__events):this.constructor==ecount.gridV2.modules.selectorTable.tableMulti?this.__selector=new ecount.gridV2.modules.selectorTable.tableMulti({history:this.__history},this.__defaultOptions,this.__events):this.constructor===ecount.gridV2.modules.selectorTable.div?this.__selector=new ecount.gridV2.modules.selectorTable.div({history:this.__history},this.__defaultOptions,this.__events):this.constructor===ecount.gridV2.modules.selectorTable.singleSection?this.__selector=new ecount.gridV2.modules.selectorTable.singleSection({history:this.__history},this.__defaultOptions,this.__events):this.constructor===ecount.gridV2.modules.selectorTable.allSection&&(this.__selector=new ecount.gridV2.modules.selectorTable.allSection({history:this.__history},this.__defaultOptions,this.__events))),this.__selector},setSelectionType:function(n){return this.__datas.selectionType=n,this},getSelectionType:function(){return this.__datas.selectionType},getStartInfos:function(){return{sectionType:this.__datas.startSectionType,columnId:this.__datas.startColumnId,rowId:this.__datas.startRowId,rowType:this.__datas.startRowType,columnSectionType:this.__datas.startColumnSectionType,element:this.__datas.startElement}},getEndInfos:function(){return{sectionType:this.__datas.endSectionType,columnId:this.__datas.endColumnId,rowId:this.__datas.endRowId,rowType:this.__datas.endRowType,columnSectionType:this.__datas.endColumnSectionType,element:this.__datas.endElement}},makeLine:function(n){function u(n){return i=n.find(function(n){return n.key==t})}var i,t,r;for(t in this.__template)t=="option"&&this.__defaultOptions&&this.__defaultOptions.option?(this["$"+t]=$(this.__template[t]),this["$"+t].attr("id",this.__defaultOptions.ecPageID+"-"+this.__defaultOptions.layoutId+"-"+t),r=this["$"+t],this.makeOption(r),n.appendChild(r[0])):(this["$"+t]=$(this.__template[t]),this["$"+t].attr("id",this.__defaultOptions.ecPageID+"-"+this.__defaultOptions.layoutId+"-"+t),n.appendChild(this["$"+t][0])),this.__defaultOptions.datas&&(i=u(this.__defaultOptions.datas,t),i&&i.css&&this["$"+t].addClass(i.css))},makeOption:function(n){function r(n,t){return n.find(function(n){return n.key==t})}var t,i;for(t in this.__optionTemplate)this.__defaultOptions.option&&this.__defaultOptions.option[t].use&&(this["$"+t]=$(this.__optionTemplate[t]),this["$"+t].attr("id",this.__defaultOptions.ecPageID+"-"+this.__defaultOptions.layoutId+"-option-"+t),n.append(this["$"+t]),this.__defaultOptions.datas&&(i=r(this.__defaultOptions.datas,"option"),i&&i.children&&(i=r(i.children,t),i&&i.css&&this["$"+t].addClass(i.css))))},removeLine:function(){for(var n in this.__template)this["$"+n]&&this["$"+n].length>0&&this.__defaultOptions.layout.removeChild(this["$"+n][0])},getSelectedSectionTypes:function(){var i=this.constValue.sectionType.thead,t=this.constValue.sectionType.tbody,r=this.constValue.sectionType.tfoot,n=[];return this.__datas.selectionType==this.constValue.selector.selectionType.allHorizontal?(n.push(i),n.push(t),n.push(r)):this.__datas.startSectionType===i&&this.__datas.endSectionType===i?n.push(i):this.__datas.startSectionType===i&&this.__datas.endSectionType===t?(n.push(i),n.push(t)):this.__datas.startSectionType===i&&this.__datas.endSectionType===r?(n.push(i),n.push(t),n.push(r)):this.__datas.startSectionType===t&&this.__datas.endSectionType===i?(n.push(i),n.push(t)):this.__datas.startSectionType===t&&this.__datas.endSectionType===t?n.push(t):this.__datas.startSectionType===t&&this.__datas.endSectionType===r?(n.push(t),n.push(r)):this.__datas.startSectionType===r&&this.__datas.endSectionType===i?(n.push(i),n.push(t),n.push(r)):this.__datas.startSectionType===r&&this.__datas.endSectionType===t?(n.push(t),n.push(r)):this.__datas.startSectionType===r&&this.__datas.endSectionType===r&&n.push(r),n},getSelectedColumnSectionTypes:function(){var i=this.constValue.sectionType.thead,t=this.constValue.sectionType.tbody,r=this.constValue.sectionType.tfoot,n=[];return this.__datas.selectionType==this.constValue.selector.selectionType.allHorizontal?(n.push(i),n.push(t),n.push(r)):this.__datas.startColumnSectionType===i&&this.__datas.endColumnSectionType===i?n.push(i):this.__datas.startColumnSectionType===i&&this.__datas.endColumnSectionType===t?(n.push(i),n.push(t)):this.__datas.startColumnSectionType===i&&this.__datas.endColumnSectionType===r?(n.push(i),n.push(t),n.push(r)):this.__datas.startColumnSectionType===t&&this.__datas.endColumnSectionType===i?(n.push(i),n.push(t)):this.__datas.startColumnSectionType===t&&this.__datas.endColumnSectionType===t?n.push(t):this.__datas.startColumnSectionType===t&&this.__datas.endColumnSectionType===r?(n.push(t),n.push(r)):this.__datas.startColumnSectionType===r&&this.__datas.endColumnSectionType===i?(n.push(i),n.push(t),n.push(r)):this.__datas.startColumnSectionType===r&&this.__datas.endColumnSectionType===t?(n.push(t),n.push(r)):this.__datas.startColumnSectionType===r&&this.__datas.endColumnSectionType===r&&n.push(r),n},getBoundary:function(){return this.__boundary.top=this.__startBoundary.top,this.__boundary.left=this.__startBoundary.left,this.__boundary.bottom=this.__endBoundary.bottom,this.__boundary.right=this.__endBoundary.right,this.__boundary},getStartBoundary:function(){return this.__startBoundary},getEndBoundary:function(){return this.__endBoundary},show:function(){for(var n in this.__template)n=="option"&&this.__defaultOptions.option||this["$"+n]&&this["$"+n].show();return this},showOption:function(n){return this.ecShowOption(n),this},ecShowOption:function(){return this},visibleOption:function(){return this.__defaultOptions.option&&this.$option&&this.$option.show(),this},hide:function(){for(var n in this.__template)n=="option"&&this.__defaultOptions.option||this["$"+n]&&this["$"+n].hide();return this},hideOption:function(){return this.ecHideOption(),this},ecHideOption:function(){return this},invisibleOption:function(){return this.__defaultOptions.option&&this.$option&&this.$option.hide(),this},selectStart:function(n){var t=this.getTarget(n),i;return t.length==0?this:(i=t[0],this.selectStartByElement(i),this)},selectStartByElement:function(n){return this.ecSelectStart(n),this},selectEnd:function(n){var t=this.getTarget(n),i;return t.length==0?this:(i=t[0],this.selectEndByElement(i),this)},selectEndByElement:function(n){return this.ecSelectEnd(n),this},selectExtend:function(){return this.ecSelectExtend(),this},ecSelectStart:function(){return this},ecSelectEnd:function(){return this},ecSelectExtend:function(){return this},ecSelect:function(){},ecSelectHistory:function(){return this},ecSelectByElement:function(){return this},ecSelectHorizontal:function(){return this},draw:function(){return this.ecDraw(),this},ecDraw:function(){return this},ecDrawHorizontal:function(){return this},moveScrollUp:function(n,t){this.__defaultOptions.body.scrollTop+=n.y-t.top},moveScrollDown:function(n,t){this.__defaultOptions.body.scrollTop+=n.y-t.bottom},moveScrollRight:function(n,t){this.__defaultOptions.body.scrollLeft+=n.x-t.right},moveScrollLeft:function(n,t){this.__defaultOptions.body.scrollLeft+=n.x-t.left},ecGetSelectedElementInfoByEvent:function(){return{boundary:this.__errorBoundary}},ecValidateInputByEvent:function(){},ecIsChooseTheInside:function(n){if(!this.__boundary.isValid())return!1;var t=this.ecGetSelectedElementInfoByEvent(n);return t.boundary.isValid()?this.__boundary.compareInboundBoundary(t.boundary):!1},ecIsMoveableState:function(){return!0},ecIsSelectableTarget:function(){return!0},ecUnselectable:function(){},MOUSEDOWN_HANDLER:function(n){console.log("selector mousedown start");var t,i=this.getStartSectionType(),r=this.getStartColumnSectionType(),u=this.__boundary.clone();[0,2].contains(n.button)&&(["col-resize","row-resize","nw-resize"].contains(n.target.style.cursor)||(this.__datas.selectionType==this.constValue.selector.selectionType.allHorizontal?this.ecIsChooseTheInside(n)?this.setState(this.constValue.selector.state.dragable):(this.hide().resetData(),this.setState(this.constValue.selector.state.none)):this.__datas.selectionType==this.constValue.selector.selectionType.allVertical?this.ecIsChooseTheInside(n)?(t=this.__events&&this.__events._triggerEvent(this.constEvent.movePossible,{gridSectionType:i,gridColumnSectionType:r,gridBoundary:u},n)||{isPossibleHorizontal:!1,isPossibleVertical:!1},t.isPossibleVertical||t.isPossibleHorizontal?this.setState(this.constValue.selector.state.dragable):this.setState(this.constValue.selector.state.none)):(this.hide().resetData(),this.setState(this.constValue.selector.state.none)):[this.constValue.selector.state.mousedown,this.constValue.selector.state.mousemove,this.constValue.selector.state.mouseup,this.constValue.selector.state.dragable].contains(this.__datas.state)&&(this.ecIsChooseTheInside(n)?(this.setState(this.constValue.selector.state.dragable),t=this.__events&&this.__events._triggerEvent(this.constEvent.movePossible,{gridSectionType:i,gridColumnSectionType:r,gridBoundary:u},n)||{isPossibleHorizontal:!1,isPossibleVertical:!1},t.isPossibleVertical||t.isPossibleHorizontal?this.setState(this.constValue.selector.state.dragable):this.setState(this.constValue.selector.state.none)):this.setState(this.constValue.selector.state.none)),this.__datas.state==this.constValue.selector.state.none&&(this.hide().resetData(),this.ecIsSelectableTarget(n)?(this.ecInitMousedown(n),this.ecMousedown(n),this.selectStart(n),this.__startBoundary.isValid()&&this.__endBoundary.isValid()?(document.onselectstart=new Function("return false"),this.selectExtend().draw().show().completedMousedown(n)):this.ecUnselectable(n)):this.ecUnselectable(n)),ecount.gridV2.util.log("selector mousedown end")))},ecInitMousedown:function(n){var t=this.getTarget(n);this.__datas.startElement=t[0];this.__datas.$startElement=t},ecMousedown:function(){},completedMousedown:function(n){this.__datas.startEvent=n;this.setState(this.constValue.selector.state.mousedown);n.button==0&&this.bindEventMouseenter();this.bindEventMouseup()},MOUSEENTER_HANDLER:function(n){ecount.gridV2.util.log("selector mouseenter start");this.__datas.state==this.constValue.selector.state.mousemove?(this.resetEndData(),this.ecIsSelectableTarget(n)&&(this.ecInitMouseenter(n),this.ecMouseenter(n),this.ecIsMoveableState(n)&&this.selectStart(this.__datas.startEvent).selectEnd(n).selectExtend().hide().draw().show())):this.__datas.state==this.constValue.selector.state.mousedown&&(this.resetEndData(),this.ecIsSelectableTarget(n)&&(this.ecInitMouseenter(n),this.ecMouseenter(n),this.ecIsMoveableState(n)?(this.selectEnd(n),this.__startBoundary.isValid()&&this.__endBoundary.isValid()&&this.selectExtend().hide().draw().show().completedMouseenter(n)):this.selectStart(this.__datas.startEvent).selectExtend().hide().draw().show()));ecount.gridV2.util.log("selector mouseenter end")},ecInitMousemove:function(){var n=this.getTarget(oEvent);this.__datas.endElement=n[0];this.__datas.$endElement=n},ecInitMouseenter:function(n){var t=this.getTarget(n);this.__datas.endElement=t[0];this.__datas.$endElement=t},ecMouseenter:function(){},completedMouseenter:function(n){this.__datas.endEvent=n;this.setState(this.constValue.selector.state.mousemove)},MOUSEUP_HANDLER:function(n){this.initMouseup(n)&&this.ecMouseup(n);this.completedMouseup(n)},initMouseup:function(){return this.__datas.state==this.constValue.selector.state.mousemove&&this.__boundary.isValid()&&this.__history&&this.__history.add(this,"ecSelectHistory",[]),this.__intervalHorizontalId=this.__intervalHorizontalId&&clearInterval(this.__intervalHorizontalId),this.__intervalVerticalId=this.__intervalVerticalId&&clearInterval(this.__intervalVerticalId),this.scrollContainerPosition=null,this.containerScreenPosition=null,document.onselectstart=new Function("return true"),!0},ecMouseup:function(){},completedMouseup:function(n){this.setState(this.constValue.selector.state.mouseup);this.__events&&this.__events._triggerEvent(this.constEvent.completedMouseUp,{gridSelectionType:this.__datas.selectionType,gridStartSectionType:this.__datas.startSectionType,gridStartColumnSectionType:this.__datas.startColumnSectionType,gridStartColumnId:this.__datas.startColumnId,gridStartRowId:this.__datas.startRowId,gridStartBoundary:this.__datas.startBoundary,gridStartDetailSectionType:this.__datas.startRowType,gridEndSectionType:this.__datas.endSectionType,gridEndColumnSectionType:this.__datas.endColumnSectionType,gridEndColumnId:this.__datas.endColumnId,gridEndRowId:this.__datas.endRowId,gridEndBoundary:this.__datas.endBoundary,gridEndDetailSectionType:this.__datas.endRowType},n);this.unbindEventMouseenter();this.unbindEventMouseup()},__mousemove:function(n){var t;if(this.__isValid&&this.__defaultOptions.window!=window){t=this;this.scrollContainerPosition||(this.scrollContainerPosition=this.__defaultOptions.body&&this.__defaultOptions.body.getBoundingClientRect()||{x:0,y:0,top:0,left:0,width:0,height:0,bottom:0,right:0});this.containerScreenPosition||(this.containerScreenPosition=ecount.gridV2.view.util.getScreenBoundingClientRect(this.__defaultOptions.container[0]));var e={x:n.clientX,y:n.clientY},i=Math.max(this.scrollContainerPosition.top,this.containerScreenPosition.top),r=Math.max(this.scrollContainerPosition.left,this.containerScreenPosition.left),u=Math.min(this.scrollContainerPosition.bottom,this.containerScreenPosition.bottom),f=Math.min(this.scrollContainerPosition.right,this.containerScreenPosition.right),o={top:i,left:r,bottom:u,right:f}}},bindEventMousedown:function(){$(this.__defaultOptions.window).off("mousedown.modules_selector_"+this.eventSequenceIndex).on("mousedown.modules_selector_"+this.eventSequenceIndex,function(n){var t=ec$.parseElement(n.target),i;(this.__defaultOptions.window!=document.body||t.ecService!="service.layer")&&this.__defaultOptions.ecPageID==t.ecPageID&&(i=$(n.target).closest(".wrapper-report-toolbar"),this.__defaultOptions.ecGridId==t.gridID?this.MOUSEDOWN_HANDLER(n):i&&i.length||this.hide().hideOption().resetData())}.bind(this));return this},unbindEventMousedown:function(){return $(this.__defaultOptions.window).off("mousedown.modules_selector_"+this.eventSequenceIndex),this},bindEventMouseenter:function(){return this.__defaultOptions.$elements&&this.__defaultOptions.$elements.off("mouseenter.modules_selector_"+this.eventSequenceIndex).on("mouseenter.modules_selector_"+this.eventSequenceIndex,this.MOUSEENTER_HANDLER.bind(this)),this},unbindEventMouseenter:function(){return this.__defaultOptions.$elements&&this.__defaultOptions.$elements.off("mouseenter.modules_selector_"+this.eventSequenceIndex),$(document.body).off("mouseup.modules_selector_"+this.eventSequenceIndex),this},bindEventMousemove:function(){$(document.body).on("mousemove.modules_selector_"+this.eventSequenceIndex,this.__mousemove.bind(this));return this},bindEventMouseup:function(){$(document.body).off("mouseup.modules_selector_"+this.eventSequenceIndex).on("mouseup.modules_selector_"+this.eventSequenceIndex,this.MOUSEUP_HANDLER.bind(this))},unbindEventMouseup:function(){$(document.body).off("mouseup.modules_selector_"+this.eventSequenceIndex)},attachElements:function(n,t){t=t||this.__defaultOptions.className;var i=this.querySelectorAll(n,"."+t);i&&i.length>0&&(this.__defaultOptions.$elements?Array.prototype.push.apply(this.__defaultOptions.$elements,i):this.__defaultOptions.$elements=$(i))},addElement:function(n){this.__defaultOptions.$elements?this.__defaultOptions.$elements.push(n):this.__defaultOptions.$elements=$(n)},resetData:function(){return this.__datas={type:this.constValue.selector.version.singleSection,state:this.constValue.selector.state.none,selectionType:this.constValue.selector.selectionType.normal},this.resetStartData(),this.resetEndData(),this.__boundary&&this.__boundary.reset(),this},resetStartData:function(){return this.__datas.startElement=null,this.__datas.$startElement=null,this.__datas.startSectionType=null,this.__datas.startColumnId=null,this.__datas.startRowId=null,this.__datas.startRowType=null,this.__datas.startColumnSectionType=null,this.__startBoundary&&this.__startBoundary.reset(),this},resetEndData:function(){return this.__datas.endElement=null,this.__datas.$endElement=null,this.__datas.endSectionType=null,this.__datas.endColumnId=null,this.__datas.endRowId=null,this.__datas.endRowType=null,this.__datas.endColumnSectionType=null,this.__endBoundary&&this.__endBoundary.reset(),this},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.constEvent=ecount.gridV2.constEvent.selector;this.util=ecount.gridV2.modules.util;this.eventSequenceIndex=ecount.gridV2.modules.util.sequenceIndexGenerator.next();this.__history=n.history},init:function(n,t,i){t=t||{};this.uniqueId=Date.now();this.__defaultOptions={};$.extend(!0,this.__defaultOptions,t);this.initGlobalValue(n);this.resetData();this.__events=i;this.__boundary=new ecount.gridV2.modules.boundary;this.__startBoundary=new ecount.gridV2.modules.boundary;this.__endBoundary=new ecount.gridV2.modules.boundary;this.__errorBoundary=new ecount.gridV2.modules.boundary;this.__defaultOptions.container=this.querySelectorAll(this.__defaultOptions.layout,this.__defaultOptions.containerSelector);this.__defaultOptions.elements=this.querySelectorAll(this.__defaultOptions.layout,"."+this.__defaultOptions.className);this.__defaultOptions.elements&&(this.__defaultOptions.$elements=$(this.__defaultOptions.elements));this.__template={top:"<div id='top' class='grid-selector-area-line top' style='position:absolute; width: 0px; height: 0px; top: 0px; left: 0px; bottom: 0px; right: 0px;'><\/div>",left:"<div id='left' class='grid-selector-area-line left' style='position:absolute; width: 0px; height: 0px; top: 0px; left: 0px; bottom: 0px; right: 0px;'><\/div>",bottom:"<div id='bottom' class='grid-selector-area-line bottom' style='position:absolute; width: 0px; height: 0px; top: 0px; left: 0px; bottom: 0px; right: 0px;'><\/div>",right:"<div id='right' class='grid-selector-area-line right' style='position:absolute; width: 0px; height: 0px; top: 0px; left: 0px; bottom: 0px; right: 0px;'><\/div>",option:"<div id='option' class='grid-selector-area-option option' style='position:absolute; width: 0px; height: 0px; top: 0px; left: 0px; bottom: 0px; right: 0px; display:none;'><\/div>"};this.__optionTemplate={move:"<div class='move grid-move'><\/div>","ns-move":"<div class='move ns grid-ns-move'><\/div>","ew-move":"<div class='move ew grid-ew-move'><\/div>"}},render:function(){var t,n=this.__defaultOptions.layout;return this.__defaultOptions.isMakeContainer&&(t=$(this.__containerTemplate),n=t[0],this.__defaultOptions.layout.appendChild(n)),this.makeLine(n),this},destroyAll:function(){this.__boundary&&this.__boundary.destroyAll();this.__selector&&this.__selector.destroyAll();this.__errorBoundary&&this.__errorBoundary.destroyAll();this.unbindEventMousedown();$(document.body).off("mousemove.modules_selector_"+this.eventSequenceIndex)},serialize:function(){return this.__datas}});ecount.gridV2.modules.selectorTable=$.Class(ecount.gridV2.modules.selector,{init:function(){ecount.gridV2.modules.selector.prototype.init.apply(this,arguments)},getStartSectionType:function(){return this.__datas.startSectionType},getEndSectionType:function(){return this.__datas.endSectionType},setStartColumnSectionType:function(n){return this.__datas.startColumnSectionType=n,this},getStartColumnSectionType:function(){return this.__datas.startColumnSectionType||this.__datas.startSectionType},setEndColumnSectionType:function(n){return this.__datas.endColumnSectionType=n,this},getEndColumnSectionType:function(){return this.__datas.endColumnSectionType||this.__datas.endSectionType},setDetailSectionType:function(n){return this.__datas.sectionDetailType=n,this},getStartRowType:function(){return this.__datas.startRowType},getEndRowType:function(){return this.__datas.startRowType},ecIsChooseTheInside:function(n){if(!this.__startBoundary.isValid()||!this.__endBoundary.isValid())return!1;var t=this.ecGetSelectedElementInfoByEvent(n);return[this.constValue.selector.selectionType.normal,this.constValue.selector.selectionType.allVertical].contains(this.__datas.selectionType)&&t.sectionType!=this.__datas.startSectionType?!1:!t.startBoundary.isValid()||!t.endBoundary.isValid()?!1:this.__datas.selectionType==this.constValue.selector.selectionType.allHorizontal?this.__startBoundary.left<=t.startBoundary.left&&t.endBoundary.right<=this.__endBoundary.right:this.__startBoundary.top<=t.startBoundary.top&&this.__endBoundary.bottom>=t.endBoundary.bottom&&this.__startBoundary.left<=t.startBoundary.left&&this.__endBoundary.right>=t.endBoundary.right},ecIsMoveableState:function(n){var t=this.ecGetTargetInfo(this.__datas.endElement),i=this.__events&&this.__events._triggerEvent(this.constEvent.getColumnSectionType,{gridSectionType:t.sectionType,gridColumnID:t.columnId,gridDataKey:t.rowId,gridSectionDetailType:t.rowType,gridIsAutoMerge:t.isAutoMerge},n),r=this.__events&&this.__events._triggerEvent(this.constEvent.isIncludeAutoMerge,{gridStartSectionType:this.__datas.startSectionType,gridStartColumnSectionType:this.__datas.startColumnSectionType,gridStartColumnID:this.__datas.startColumnId,gridStartDataKey:this.__datas.startRowId,gridStartSectionDetailType:this.__datas.startRowType,gridStartBoundary:this.__datas.startBoundary,gridStartIsAutoMerge:this.__datas.startIsAutoMerge,gridEndSectionType:t.sectionType,gridEndColumnID:t.columnId,gridEndDataKey:t.rowId,gridEndSectionDetailType:t.rowType,gridEndIsAutoMerge:t.isAutoMerge},n);return this.__datas.startIsAutoMerge||r?!1:this.__datas.startSectionType!=t.sectionType||this.__datas.startRowType!=t.rowType||this.__datas.startColumnSectionType!=i?!1:(this.__datas.endSectionType=t.sectionType,this.__datas.endColumnSectionType=i,this.__datas.endColumnId=t.columnId,this.__datas.endRowId=t.rowId,this.__datas.endRowType=t.rowType,!0)},ecIsSelectableTarget:function(n){var i=this.getTarget(n),r;if(i.length==0)return!1;r=i[0];var t=this.ecGetTargetInfo(r),f=t.sectionType,u=t.columnId,e=t.rowId,o=t.rowType;return[this.constValue.checkBoxPropertyName,this.constValue.rowMoveablePropertyName,this.constValue.rowNumberingPropertyName].contains(u)?!1:!0},ecUnselectable:function(n){this.__events&&this.__events._triggerEvent(this.constEvent.unselectable,{},n)||{}},ecGetSelectedElementInfoByEvent:function(n){var r=this.getTarget(n),u,t,i={sectionType:null,element:null,$element:[],startBoundary:this.__errorBoundary,endBoundary:this.__errorBoundary},f,e;return r.length==0?i:(u=r[0],targetInfo=this.ecGetTargetInfo(u),t=this.getSelector(),t.getBoundary().reset(),t.getStartBoundary().reset(),t.getEndBoundary().reset(),t.selectStart(n).selectExtend(),f=t.getStartBoundary(),e=t.getEndBoundary(),i.sectionType=targetInfo.sectionType,i.element=u,i.$element=r,i.startBoundary=f,i.endBoundary=e,i)},ecGetTargetInfo:function(n){var r=this.findParentElementByTagName(n,/T(HEAD|BODY|FOOT)/g),t=this.constValue.sectionSeparateValue.line,i;switch(n.getAttribute("data-rowtype")){case"tsubtot1":t=this.constValue.sectionSeparateValue.tsubtot1;break;case"tsubtot2":t=this.constValue.sectionSeparateValue.tsubtot2;break;case"tsubtot3":t=this.constValue.sectionSeparateValue.tsubtot3;break;case"tsubtot4":t=this.constValue.sectionSeparateValue.tsubtot4;break;case"tsubtot5":t=this.constValue.sectionSeparateValue.tsubtot5;break;case"subtot1":t=this.constValue.sectionSeparateValue.subtot1;break;case"subtot2":t=this.constValue.sectionSeparateValue.subtot2;break;case"subtot3":t=this.constValue.sectionSeparateValue.subtot3;break;case"subtot4":t=this.constValue.sectionSeparateValue.subtot4;break;case"subtot5":t=this.constValue.sectionSeparateValue.subtot5;break;case"pagetot":t=this.constValue.sectionSeparateValue.pagetot;break;case"slip":t=this.constValue.sectionSeparateValue.slip;break;default:t=this.constValue.sectionSeparateValue.line}i={sectionType:r.tagName.toLowerCase(),rowId:n.getAttribute("data-key"),columnId:n.getAttribute("data-columnid"),rowType:t};const u=this.__events._triggerEvent(this.constEvent.getColumnSectionType,{gridSectionType:i.sectionType,gridColumnID:i.columnId,gridDataKey:i.rowId,gridSectionDetailType:i.rowType}),f=this.__events._triggerEvent(this.constEvent.isAutoMerge,{gridSectionType:i.sectionType,gridColumnID:i.columnId,gridDataKey:i.rowId,gridSectionDetailType:i.rowType});return i.columnSectionType=u,i.isAutoMerge=f,i},ecSelect:function(n,t){var i=this.getTarget(n),r=this.getTarget(t);return this.ecSelectByElement(i,r),this},ecSelectStart:function(n){var t=this.ecGetTargetInfo(n),i=this.__events&&this.__events._triggerEvent(this.constEvent.selectStart,{gridSectionType:t.sectionType,gridColumnID:t.columnId,gridDataKey:t.rowId,element:n,startBoundary:this.__startBoundary,endBoundary:this.__endBoundary,gridIsAutoMerge:t.isAutoMerge})||{startBoundary:this.__errorBoundary,endBoundary:this.__errorBoundary,element:null};return i.startBoundary.isValid()&&i.endBoundary.isValid()&&(this.__datas.startElement=i.element,this.__datas.startBoundary=i.startBoundary,this.__datas.startSectionType=t.sectionType,this.__datas.startRowId=t.rowId,this.__datas.startColumnId=t.columnId,this.__datas.startRowType=t.rowType,this.__datas.endElement=i.element,this.__datas.endBoundary=i.endBoundary,this.__datas.endSectionType=t.sectionType,this.__datas.endRowId=t.rowId,this.__datas.endColumnId=t.columnId,this.__datas.endRowType=t.rowType,this.__startBoundary=i.startBoundary,this.__endBoundary=i.endBoundary,i=this.__events&&this.__events._triggerEvent(this.constEvent.getColumnSectionType,{gridSectionType:t.sectionType,gridColumnID:t.columnId,gridDataKey:t.rowId,gridSectionDetailType:t.rowType},{}),this.__datas.startColumnSectionType=i,this.__datas.endColumnSectionType=i),this},ecSelectStartByInfo:function(n,t,i){var r=this.__defaultOptions.layout.querySelector("[sectiontype='"+n+"'][data-key='"+i+"'][data-columnid='"+t+"']");return r&&this.ecSelectStart(r),this},ecSelectEnd:function(n){var t=this.ecGetTargetInfo(n),i=this.__events&&this.__events._triggerEvent(this.constEvent.selectEnd,{gridStartSectionType:this.__datas.startSectionType,gridStartRowId:this.__datas.startRowId,gridStartColumnId:this.__datas.startColumnId,gridSectionType:t.sectionType,gridColumnID:t.columnId,gridDataKey:t.rowId,element:n,endBoundary:this.__endBoundary,gridIsAutoMerge:t.isAutoMerge})||{endBoundary:this.__errorBoundary,element:null};return i.endBoundary.isValid()&&(this.__datas.endElement=i.element,this.__datas.endBoundary=i.endBoundary,this.__datas.endSectionType=t.sectionType,this.__datas.endRowId=t.rowId,this.__datas.endColumnId=t.columnId,this.__datas.endRowType=t.rowType,this.__endBoundary=i.endBoundary),this},ecSelectEndByInfo:function(n,t,i){var r=this.__events&&this.__events._triggerEvent(this.constEvent.selectEnd,{gridStartSectionType:"",gridSectionType:n,gridColumnID:t,gridDataKey:i,startBoundary:this.__startBoundary,endBoundary:this.__endBoundary})||{boundary:{top:-1,left:-1,bottom:-1,right:-1}};return r.element&&this.ecSelectEnd(r.element),this},ecSelectByElement:function(n,t){return this.__boundary.reset(),this.ecSelectStart(n).ecSelectEnd(t),this},ecSelectHorizontal:function(n){return this.__boundary.reset(),this.__boundary.addBoundary(n),this.__startBoundary.reset(),this.__startBoundary.addBoundary(n),this.__endBoundary.reset(),this.__endBoundary.addBoundary(n),this},ecSelectHistory:function(n,t){return this.__boundary.reset(),this.__start.boundary=t,this.__end.boundary=t,this.__boundary.addBoundary(this.__start.boundary),this.ecSelectExtend(n,this.__boundary).draw(),this},ecSelectExtend:function(){var n=this.__events&&this.__events.triggerEvent(this.constEvent.selectExtend,{gridSelectionType:this.__datas.selectionType,gridStartElement:this.__datas.startElement,gridStartSectionType:this.__datas.startSectionType,gridStartColumnSectionType:this.__datas.startColumnSectionType,gridStartColumnId:this.__datas.startColumnId,gridStartRowId:this.__datas.startRowId,gridStartBoundary:this.__datas.startBoundary,gridEndElement:this.__datas.endElement,gridEndSectionType:this.__datas.endSectionType,gridEndColumnSectionType:this.__datas.endColumnSectionType,gridEndColumnId:this.__datas.endColumnId,gridEndRowId:this.__datas.endRowId,gridEndBoundary:this.__datas.endBoundary,boundary:this.__boundary})||{};return this.__datas.startSectionType=n.startSectionType,this.__datas.endSectionType=n.endSectionType,this.__boundary.top=this.__startBoundary.top,this.__boundary.left=this.__startBoundary.left,this.__boundary.bottom=this.__endBoundary.bottom,this.__boundary.right=this.__endBoundary.right,this},ecDrawHorizontal:function(){var n=this.__events&&this.__events.triggerEvent(this.constEvent.drawHorizontal,{boundary:this.__boundary.get()})||{top:0,left:0,bottom:0,right:0,x:0,y:0,width:0,height:0};return this.$top.css({top:n.top+"px",left:n.left+"px",width:n.width+"px",height:this.__defaultHeight+"px"}),this.$left.css({top:n.top+"px",left:n.left+"px",width:this.__defaultWidth+"px",height:n.height+"px"}),this.$bottom.css({top:n.top+n.height+"px",left:n.left+"px",width:n.width+this.__defaultWidth+"px",height:this.__defaultHeight+"px"}),this.$right.css({top:n.top+"px",left:n.left+n.width+"px",width:this.__defaultWidth+"px",height:n.height+this.__defaultHeight+"px"}),this},ecInitMousedown:function(n){ecount.gridV2.modules.selector.prototype.ecInitMousedown.apply(this,arguments);var t=this.ecGetTargetInfo(this.__datas.startElement);return this.__datas.startSectionType=t.sectionType,this.__datas.startColumnId=t.columnId,this.__datas.startRowId=t.rowId,this.__datas.startRowType=t.rowType,this.__events&&this.__events._triggerEvent(this.constEvent.initMousedown,{gridSectionType:t.sectionType,gridColumnSectionType:t.columnSectionType,gridColumnID:t.columnId,gridDataKey:t.rowId,gridSectionDetailType:t.rowType,gridIsAutoMerge:t.isAutoMerge},n)},ecMousedown:function(){},ecMouseenter:function(){ecount.gridV2.modules.selector.prototype.ecMouseenter.apply(this,arguments)},ecMouseup:function(){ecount.gridV2.modules.selector.prototype.ecMouseup.apply(this,arguments);!this.__isValid},getScreenBoundingClientRect:function(){return this.__events&&this.__events.triggerEvent(this.constEvent.getScreenBoundingClientRect,{gridSelectionType:this.__datas.selectionType,gridStartSectionType:this.__datas.startSectionType,gridStartBoundary:this.__datas.startBoundary,gridEndSectionType:this.__datas.endSectionType,gridEndBoundary:this.__datas.endBoundary,boundary:this.__boundary.get()})||{top:0,left:0,bottom:0,right:0,x:0,y:0,width:0,height:0}},ecDraw:function(){var n=this.__events&&this.__events.triggerEvent(this.constEvent.draw,{gridSelectionType:this.__datas.selectionType,gridStartSectionType:this.__datas.startSectionType,gridStartBoundary:this.__datas.startBoundary,gridEndSectionType:this.__datas.endSectionType,gridEndBoundary:this.__datas.endBoundary,boundary:this.__boundary.get()})||{top:0,left:0,bottom:0,right:0,x:0,y:0,width:0,height:0};return this.$top.css({top:n.top+"px",left:n.left+"px",width:n.width+"px",height:this.__defaultHeight+"px"}),this.$left.css({top:n.top+"px",left:n.left+"px",width:this.__defaultWidth+"px",height:n.height+"px"}),this.$bottom.css({top:n.top+n.height+"px",left:n.left+"px",width:n.width+this.__defaultWidth+"px",height:this.__defaultHeight+"px"}),this.$right.css({top:n.top+"px",left:n.left+n.width+"px",width:this.__defaultWidth+"px",height:n.height+this.__defaultHeight+"px"}),this.__defaultOptions.option&&this.$option.css({top:n.top+n.height-12+"px",left:n.left+n.width-12+"px",width:this.__defaultOptionWidth+"px",height:this.__defaultOptionHeight+"px"}),this}});ecount.gridV2.modules.selectorTable.table=$.Class(ecount.gridV2.modules.selectorTable,{init:function(){ecount.gridV2.modules.selectorTable.prototype.init.apply(this,arguments)},ecSelectHistory:function(n,t){return this.__boundary.reset(),this.__start.boundary=t,this.__end.boundary=t,this.__boundary.addBoundary(this.__start.boundary),this.ecSelectExtend(n,this.__boundary).draw(),this},ecSelect:function(n,t){var i=this.getTarget(n),r=this.getTarget(t);return this.ecSelectByElement(i,r),this},ecSelectByElement:function(n,t){return this.__boundary.reset(),this.ecSelectStart(n).ecSelectEnd(t),this},ecSelectHorizontal:function(n){return this.__boundary.reset(),this.__boundary.addBoundary(n),this},ecDrawHorizontal:function(){var n=this.__events&&this.__events.triggerEvent(this.constEvent.drawHorizontal,{boundary:this.__boundary.get()})||{top:0,left:0,bottom:0,right:0,x:0,y:0,width:0,height:0};return this.$top.css({top:n.top+"px",left:n.left+"px",width:n.width+"px",height:this.__defaultHeight+"px"}),this.$left.css({top:n.top+"px",left:n.left+"px",width:this.__defaultWidth+"px",height:n.height+"px"}),this.$bottom.css({top:n.top+n.height+"px",left:n.left+"px",width:n.width+this.__defaultWidth+"px",height:this.__defaultHeight+"px"}),this.$right.css({top:n.top+"px",left:n.left+n.width+"px",width:this.__defaultWidth+"px",height:n.height+this.__defaultHeight+"px"}),this},ecInitMousedown:function(n){var i=ecount.gridV2.modules.selectorTable.prototype.ecInitMousedown.apply(this,arguments),t;return i.result&&(t=this.ecGetTargetInfo(this.__datas.startElement),this.__datas.startSectionType=t.sectionType,this.__datas.startColumnId=t.columnId,this.__datas.startRowId=t.rowId,this.__datas.startRowType=t.rowType,this.__datas.startIsAutoMerge=t.isAutoMerge,i=this.__events&&this.__events._triggerEvent(this.constEvent.getColumnSectionType,{gridSectionType:t.sectionType,gridColumnID:t.columnId,gridDataKey:t.rowId,gridSectionDetailType:t.rowType,gridIsAutoMerge:t.isAutoMerge},n)),i},ecMousedown:function(){},ecMouseenter:function(){},ecMouseup:function(){ecount.gridV2.logger.log("selector ecMouseup");ecount.gridV2.logger.log(this.__boundary);ecount.gridV2.modules.selectorTable.prototype.ecMouseup.apply(this,arguments);!this.__isValid}});ecount.gridV2.modules.selectorTable.tableSingle=$.Class(ecount.gridV2.modules.selectorTable,{init:function(){ecount.gridV2.modules.selectorTable.prototype.init.apply(this,arguments)},ecIsSelectableTarget:function(n){var i=this.getTarget(n),r;if(i.length==0)return!1;r=i[0];var t=this.ecGetTargetInfo(r),u=t.sectionType,f=t.columnId,e=t.rowId,o=t.rowType;return[this.constValue.checkBoxPropertyName,this.constValue.rowMoveablePropertyName,this.constValue.rowNumberingPropertyName].contains(f)?!1:u==this.constValue.sectionType.tbody?!1:!0}});ecount.gridV2.modules.selectorTable.tableMulti=$.Class(ecount.gridV2.modules.selectorTable,{init:function(){ecount.gridV2.modules.selectorTable.prototype.init.apply(this,arguments)}});ecount.gridV2.modules.selectorTable.singleSection=$.Class(ecount.gridV2.modules.selectorTable,{init:function(){ecount.gridV2.modules.selectorTable.prototype.init.apply(this,arguments)},render:function(){return ecount.gridV2.modules.selectorTable.prototype.render.apply(this,arguments),this},ecIsChooseTheInside:function(n){if(ecount.gridV2.modules.selectorTable.prototype.ecIsChooseTheInside.apply(this,arguments)&&n.button==2){var t=this.__events&&this.__events._triggerEvent(this.constEvent.hasReselectItem,{startBoundary:this.__datas.startBoundary,endBoundary:this.__datas.endBoundary,startSectionType:this.__datas.startSectionType,endSectionType:this.__datas.endSectionType,startColumnSectionType:this.__datas.startColumnSectionType,endColumnSectionType:this.__datas.endColumnSectionType,startColumnId:this.__datas.startColumnId,endColumnId:this.__datas.endColumnId,startRowId:this.__datas.startRowId,endRowId:this.__datas.endRowId,startRowType:this.__datas.startRowType,endRowType:this.__datas.endRowType},n);return!t.result}return!1},ecShowOption:function(n){return this.__defaultOptions.option&&(n=_.extend({isShowMove:!1,isShowNSMove:!1,isShowEWMove:!1},n||{}),this.$option&&(this.$option.show(),n.isShowCross&&this.$option.find(".grid-move").show(),n.isShowVertical&&this.$option.find(".grid-ns-move").show(),n.isShowHorizontal&&this.$option.find(".grid-ew-move").show())),this},ecHideOption:function(){return this.__defaultOptions.option&&this.$option&&(this.$option.hide(),this.$option.find(".grid-move").hide(),this.$option.find(".grid-ns-move").hide(),this.$option.find(".grid-ew-move").hide()),this},MOUSEDOWN_HANDLER:function(n){(console.log("single selector mousedown start"),[0,2].contains(n.button))&&(/grid(-(ns|ew))?-move/.test(n.target.className)||n.target.style.cursor==""&&([this.constValue.selector.state.mousedown,this.constValue.selector.state.mousemove,this.constValue.selector.state.mouseup,this.constValue.selector.state.dragable].contains(this.__datas.state)&&(this.ecIsChooseTheInside(n)||(this.__datas.state=this.constValue.selector.state.none)),this.__datas.state==this.constValue.selector.state.none&&(this.hide().hideOption().resetData(),this.ecIsSelectableTarget(n)?(this.ecInitMousedown(n),this.ecMousedown(n),this.selectStart(n),this.__startBoundary.isValid()&&this.__endBoundary.isValid()?(document.onselectstart=new Function("return false"),this.selectExtend().draw().show().showOption().completedMousedown(n)):this.ecUnselectable(n)):this.ecUnselectable(n))))},MOUSEENTER_HANDLER:function(n){ecount.gridV2.util.log("selector mouseenter start");this.__datas.state==this.constValue.selector.state.mousemove?this.ecIsSelectableTarget(n)&&(this.ecInitMouseenter(n),this.ecMouseenter(n),this.ecIsMoveableState(n)&&this.selectStart(this.__datas.startEvent).selectEnd(n).selectExtend().hide().draw().show()):this.__datas.state==this.constValue.selector.state.mousedown&&this.ecIsSelectableTarget(n)&&(this.ecInitMouseenter(n),this.ecMouseenter(n),this.ecIsMoveableState(n)?(this.selectEnd(n),this.__startBoundary.isValid()&&this.__endBoundary.isValid()&&this.selectExtend().hide().draw().show().completedMouseenter(n)):this.selectStart(this.__datas.startEvent).selectExtend().hide().draw().show());ecount.gridV2.util.log("selector mouseenter end")},ecSelectStart:function(n){var t=this.ecGetTargetInfo(n),i=this.__events&&this.__events._triggerEvent(this.constEvent.selectStart,{gridSectionType:t.sectionType,gridColumnID:t.columnId,gridDataKey:t.rowId,element:n,startBoundary:this.__startBoundary,endBoundary:this.__endBoundary,gridIsAutoMerge:t.isAutoMerge})||{startBoundary:this.__errorBoundary,endBoundary:this.__errorBoundary,element:null};return i.startBoundary.isValid()&&i.endBoundary.isValid()&&(this.__datas.startElement=i.element,this.__datas.startBoundary=i.startBoundary,this.__datas.startSectionType=t.sectionType,this.__datas.startRowId=t.rowId,this.__datas.startColumnId=t.columnId,this.__datas.startRowType=t.rowType,this.__datas.startIsAutoMerge=t.isAutoMerge,this.__datas.endElement=i.element,this.__datas.endBoundary=i.endBoundary,this.__datas.endSectionType=t.sectionType,this.__datas.endRowId=t.rowId,this.__datas.endColumnId=t.columnId,this.__datas.endRowType=t.rowType,this.__datas.endIsAutoMerge=t.isAutoMerge,this.__startBoundary=i.startBoundary,this.__endBoundary=i.endBoundary,i=this.__events&&this.__events._triggerEvent(this.constEvent.getColumnSectionType,{gridSectionType:t.sectionType,gridColumnID:t.columnId,gridDataKey:t.rowId,gridSectionDetailType:t.rowType,gridIsAutoMerge:t.isAutoMerge},{}),this.__datas.startColumnSectionType=i,this.__datas.endColumnSectionType=i),this},ecSelectEnd:function(n){var t=this.ecGetTargetInfo(n),i=this.__events&&this.__events._triggerEvent(this.constEvent.selectEnd,{gridStartSectionType:this.__datas.startSectionType,gridStartRowId:this.__datas.startRowId,gridStartColumnId:this.__datas.startColumnId,gridSectionType:t.sectionType,gridColumnID:t.columnId,gridDataKey:t.rowId,element:n,endBoundary:this.__endBoundary,gridIsAutoMerge:t.isAutoMerge})||{endBoundary:this.__errorBoundary,element:null};return i.endBoundary.isValid()&&(this.__datas.endElement=i.element,this.__datas.endBoundary=i.endBoundary,this.__datas.endSectionType=t.sectionType,this.__datas.endRowId=t.rowId,this.__datas.endColumnId=t.columnId,this.__datas.endRowType=t.rowType,this.__datas.endIsAutoMerge=t.isAutoMerge,this.__endBoundary=i.endBoundary),this},ecSelectExtend:function(){var n=this.__events&&this.__events.triggerEvent(this.constEvent.selectExtend,{gridSelectionType:this.__datas.selectionType,gridStartElement:this.__datas.startElement,gridStartSectionType:this.__datas.startSectionType,gridStartColumnSectionType:this.__datas.startColumnSectionType,gridStartColumnId:this.__datas.startColumnId,gridStartRowId:this.__datas.startRowId,gridStartBoundary:this.__datas.startBoundary,gridEndElement:this.__datas.endElement,gridEndSectionType:this.__datas.endSectionType,gridEndColumnSectionType:this.__datas.endColumnSectionType,gridEndColumnId:this.__datas.endColumnId,gridEndRowId:this.__datas.endRowId,gridEndBoundary:this.__datas.endBoundary,boundary:this.__boundary})||{};return this.__datas.startSectionType=n.startSectionType,this.__datas.endSectionType=n.endSectionType,this},ecMouseup:function(){ecount.gridV2.modules.selectorTable.prototype.ecMouseup.apply(this,arguments)},ecIsSelectableTarget:function(n){var i=this.getTarget(n),r,u;if(i.length==0)return!1;r=i[0];var t=this.ecGetTargetInfo(r),e=t.sectionType,f=t.columnId,o=t.rowId,s=t.rowType;return[this.constValue.checkBoxPropertyName,this.constValue.rowMoveablePropertyName,this.constValue.rowNumberingPropertyName].contains(f)?!1:(u=this.__events&&this.__events._triggerEvent(this.constEvent.isSelectableTarget,{sectionType:t.sectionType,columnSectionType:t.columnSectionType,columnId:t.columnId,rowId:t.rowId,sectionDetailType:t.rowType,isAutoMerge:t.isAutoMerge},n),u.result)}});ecount.gridV2.modules.selectorTable.allSection=$.Class(ecount.gridV2.modules.selectorTable,{init:function(){ecount.gridV2.modules.selectorTable.prototype.init.apply(this,arguments)},render:function(){return ecount.gridV2.modules.selectorTable.prototype.render.apply(this,arguments),this},ecIsMoveableState:function(){return!0},ecShowOption:function(n){return this.__defaultOptions.option&&(n=_.extend({isShowMove:!1,isShowNSMove:!1,isShowEWMove:!1},n||{}),this.$option&&(this.$option.show(),n.isShowCross&&this.$option.find(".grid-move").show(),n.isShowVertical&&this.$option.find(".grid-ns-move").show(),n.isShowHorizontal&&this.$option.find(".grid-ew-move").show())),this},ecHideOption:function(){return this.__defaultOptions.option&&this.$option&&(this.$option.hide(),this.$option.find(".grid-move").hide(),this.$option.find(".grid-ns-move").hide(),this.$option.find(".grid-ew-move").hide()),this},ecIsChooseTheInside:function(n){if(!this.__startBoundary.isValid()||!this.__endBoundary.isValid())return!1;var t=this.ecGetSelectedElementInfoByEvent(n);return[this.constValue.selector.selectionType.normal,this.constValue.selector.selectionType.allVertical].contains(this.__datas.selectionType)&&![this.__datas.startSectionType,this.__datas.endSectionType].contains(t.sectionType)?!1:!t.startBoundary.isValid()||!t.endBoundary.isValid()?!1:this.__datas.selectionType==this.constValue.selector.selectionType.allHorizontal?this.__startBoundary.left<=t.startBoundary.left&&t.endBoundary.right<=this.__endBoundary.right:this.__startBoundary.top<=t.startBoundary.top&&this.__endBoundary.bottom>=t.endBoundary.bottom&&this.__startBoundary.left<=t.startBoundary.left&&this.__endBoundary.right>=t.endBoundary.right&&n.button==2?!0:!1},MOUSEDOWN_HANDLER:function(n){(console.log("selector mousedown start"),[0,2].contains(n.button))&&(/grid(-(ns|ew))?-move/.test(n.target.className)||n.target.style.cursor==""&&([this.constValue.selector.state.mousedown,this.constValue.selector.state.mousemove,this.constValue.selector.state.mouseup,this.constValue.selector.state.dragable].contains(this.__datas.state)&&(this.ecIsChooseTheInside(n)||(this.__datas.state=this.constValue.selector.state.none)),this.__datas.state==this.constValue.selector.state.none&&(this.hide().hideOption().resetData(),this.ecIsSelectableTarget(n)?(this.ecInitMousedown(n),this.ecMousedown(n),this.selectStart(n),this.__startBoundary.isValid()&&this.__endBoundary.isValid()?(document.onselectstart=new Function("return false"),this.selectExtend().draw().show().showOption().completedMousedown(n)):this.ecUnselectable(n)):this.ecUnselectable(n))))},MOUSEENTER_HANDLER:function(n){ecount.gridV2.util.log("selector mouseenter start");this.__datas.state==this.constValue.selector.state.mousemove?this.ecIsSelectableTarget(n)&&(this.ecInitMouseenter(n),this.ecMouseenter(n),this.ecIsMoveableState(n)&&this.selectStart(this.__datas.startEvent).selectEnd(n).selectExtend().hide().draw().show()):this.__datas.state==this.constValue.selector.state.mousedown&&this.ecIsSelectableTarget(n)&&(this.ecInitMouseenter(n),this.ecMouseenter(n),this.ecIsMoveableState(n)?(this.selectEnd(n),this.__startBoundary.isValid()&&this.__endBoundary.isValid()&&this.selectExtend().hide().draw().show().completedMouseenter(n)):this.selectStart(this.__datas.startEvent).selectExtend().hide().draw().show());ecount.gridV2.util.log("selector mouseenter end")},ecSelectStart:function(n){var t=this.ecGetTargetInfo(n),i=this.__events&&this.__events._triggerEvent(this.constEvent.selectStart,{gridSectionType:t.sectionType,gridColumnID:t.columnId,gridDataKey:t.rowId,element:n,startBoundary:this.__startBoundary,endBoundary:this.__endBoundary})||{startBoundary:this.__errorBoundary,endBoundary:this.__errorBoundary,element:null};return i.startBoundary.isValid()&&i.endBoundary.isValid()&&(this.__datas.startElement=i.element,this.__datas.startBoundary=i.startBoundary,this.__datas.startSectionType=t.sectionType,this.__datas.startRowId=t.rowId,this.__datas.startColumnId=t.columnId,this.__datas.startRowType=t.rowType,this.__datas.endElement=i.element,this.__datas.endBoundary=i.endBoundary,this.__datas.endSectionType=t.sectionType,this.__datas.endRowId=t.rowId,this.__datas.endColumnId=t.columnId,this.__datas.endRowType=t.rowType,this.__startBoundary=i.startBoundary,this.__endBoundary=i.endBoundary,i=this.__events&&this.__events._triggerEvent(this.constEvent.getColumnSectionType,{gridSectionType:t.sectionType,gridColumnID:t.columnId,gridDataKey:t.rowId,gridSectionDetailType:t.rowType},{}),this.__datas.startColumnSectionType=i,this.__datas.endColumnSectionType=i),this},ecSelectEnd:function(n){var t=this.ecGetTargetInfo(n),i=this.__events&&this.__events._triggerEvent(this.constEvent.selectEnd,{gridStartSectionType:this.__datas.startSectionType,gridStartRowId:this.__datas.startRowId,gridStartColumnId:this.__datas.startColumnId,gridSectionType:t.sectionType,gridColumnID:t.columnId,gridDataKey:t.rowId,element:n,endBoundary:this.__endBoundary})||{endBoundary:this.__errorBoundary,element:null};return i.endBoundary.isValid()&&(this.__datas.endElement=i.element,this.__datas.endBoundary=i.endBoundary,this.__datas.endSectionType=t.sectionType,this.__datas.endRowId=t.rowId,this.__datas.endColumnId=t.columnId,this.__datas.endRowType=t.rowType,this.__endBoundary=i.endBoundary),this},ecSelectExtend:function(){var n=this.__events&&this.__events.triggerEvent(this.constEvent.selectExtend,{gridSelectionType:this.__datas.selectionType,gridStartElement:this.__datas.startElement,gridStartSectionType:this.__datas.startSectionType,gridStartColumnSectionType:this.__datas.startColumnSectionType,gridStartColumnId:this.__datas.startColumnId,gridStartRowId:this.__datas.startRowId,gridStartBoundary:this.__datas.startBoundary,gridEndElement:this.__datas.endElement,gridEndSectionType:this.__datas.endSectionType,gridEndColumnSectionType:this.__datas.endColumnSectionType,gridEndColumnId:this.__datas.endColumnId,gridEndRowId:this.__datas.endRowId,gridEndBoundary:this.__datas.endBoundary,boundary:this.__boundary})||{};return this.__datas.startSectionType=n.startSectionType,this.__datas.endSectionType=n.endSectionType,this},ecMouseup:function(){ecount.gridV2.modules.selectorTable.prototype.ecMouseup.apply(this,arguments)}});ecount.gridV2.modules.outerHorizontalManager=$.Class(null,{$el:null,template:"<div id='{{id}}' class='selector-horizontal ' style='{{style}}'>",childTemplate:"<div id='{{id}}' style='{{style}}'><\/div>",prefixId:"outer-horizontal-manager-",prefixIndex:0,prefixChildId:"outer-horizontal-custom-",getActiveId:function(){return this.__datas.activeId},setActiveId:function(n){return this.__datas.activeId=n,this},bindEventMousedown:function(){$(document.body).off("mousedown.outerHorizontalManager"+this.__defaultOptions.eventPrefixId).on("mousedown.outerHorizontalManager"+this.__defaultOptions.eventPrefixId,this.MOUSEDOWN_HANDLER.bind(this))},unbindEventMousedown:function(){$(document.body).off("mousedown.outerHorizontalManager"+this.__defaultOptions.eventPrefixId)},MOUSEDOWN_HANDLER:function(n){if(this.__datas.activeId){var t=ec$.parseElement(n.target),i=this.__events&&this.__events._triggerEvent(this.constEvent.onBeforeMousedown,t,n);i.isRemoveActiveClass&&(this.removeClassName(this.__datas.activeId,["active"]),this.__datas.deactiveId=this.__datas.activeId,this.__datas.activeId=null)}},CLICK_HANDLER:function(n){this.__datas.activeId&&this.removeClassName(this.__datas.activeId,["active"]);n.id.indexOf(this.prefixChildId)>-1?this.active("allHorizontal",n.id):this.deactive()},active:function(n,t){return t=t||this.__datas.activeId,this.addClassName(t,["active"]),this.setActiveId(t),this.__events&&this.__events._triggerEvent(this.constEvent.click,{id:t,gridSelectionType:n}),this},deactive:function(){this.__datas.activeId&&(this.removeClassName(this.__datas.activeId,["active"]),this.__datas.activeId=null,this.__events&&this.__events._triggerEvent(this.constEvent.deactive))},removeClassName:function(n,t){if(typeof t=="string"&&(t=[t]),this.__datas.childElementKeys[n]){var r=this.__datas.childElementKeys[n],i=r[0];t.forEach(function(n){i.className=i.className.replace(new RegExp("(\\s)"+n+"(?!(w|-))|^"+n+"(?!(w|-))"),"")})}return this},addClassName:function(n,t){if(this.__datas.childElementKeys[n]){var r=this.__datas.childElementKeys[n],i=r[0];t.forEach(function(n){new RegExp(n,"g").test(i.className)||(i.className!=""&&(i.className+=" "),i.className+=n)})}return this},visible:function(n){return n?this.$el.removeClass("hide"):this.$el.addClass("hide"),this},clearContainerElement:function(){return this.$el&&this.$el.parent().remove(),this.$el=null,this},clearAllChildElement:function(){return this.$el&&this.$el.remove(),this},resetData:function(){return this.__datas={activeId:null,deactiveId:null,childElementKeys:{}},this},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.constEvent=ecount.gridV2.constEvent.outerHorizontalManager;this.util=ecount.gridV2.modules.util;this.__history=n.history;this.resetData()},init:function(n,t,i){this.__defaultOptions={layoutId:null,eventPrefixId:null};this.initGlobalValue(n);$.extend(this.__defaultOptions,t);this.__events=i},render:function(){var n=this.__events&&this.__events.triggerEvent(this.constEvent.getList,{})||[],t=this.template.replace("{{id}}",this.prefixId+this.__defaultOptions.layoutId+"#"+this.prefixIndex).replace("{{style}}","width:"+n.sum(function(n){return parseInt(n.width,10)})+"px;");return this.$el=$(t),this.renderChild(n),this.__defaultOptions.$layout.append(this.$el),this.prefixIndex+=1,this},renderChild:function(n){for(var e=this.$el.attr("id")||"",t=0,u=n.length;t<u;t++){var i=n[t],f=this.childTemplate.replace("{{id}}",this.prefixChildId+i.id).replace("{{style}}","width:"+i.width+"px;"),r=$(f);this.__datas.childElementKeys[this.prefixChildId+i.id]=r;this.$el.append(r)}return this},destroyAll:function(){this.unbindEventMousedown()}});ecount.gridV2.modules.outerVerticalManager=$.Class(null,{template:"<div id='{{id}}' class='selector-vertical '>",childTemplate:"<div id='{{id}}' style='{{style}}'><\/div>",prefixId:"outer-vertical-manager-",prefixIndex:0,prefixChildId:"outer-vertical-custom-",getActiveId:function(){return this.__datas.activeId},setActiveId:function(n){return this.__datas.activeId=n,this},bindEventMousedown:function(){$(document.body).off("mousedown.outerVerticalManager"+this.__defaultOptions.eventPrefixId).on("mousedown.outerVerticalManager"+this.__defaultOptions.eventPrefixId,function(n){this.MOUSEDOWN_HANDLER({},n)}.bind(this))},unbindEventMousedown:function(){$(document.body).off("mousedown.outerVerticalManager"+this.__defaultOptions.eventPrefixId)},MOUSEDOWN_HANDLER:function(n,t){n=n||{};n=$.extend(n,ec$.parseElement(t.target));var i=this.__events&&this.__events._triggerEvent(this.constEvent.onBeforeMousedown,n,t);i.isRemoveActiveClass&&this.deactive()},CLICK_HANDLER:function(n){this.__datas.activeId&&this.removeClassName(this.__datas.activeId,["active"]);n.id.indexOf(this.prefixChildId)>-1?this.active("allVertical",n.id):this.deactive()},active:function(n,t){this.addClassName(t,["active"]);this.setActiveId(t);var i=t&&t.replace(this.prefixChildId,"");return this.__events&&this.__events._triggerEvent(this.constEvent.click,{id:t,gridSelectionType:n,gridColumnID:i},{target:null}),this},deactive:function(){this.__datas.activeId&&(this.removeClassName(this.__datas.activeId,["active"]),this.__datas.deactiveId=this.__datas.activeId,this.__datas.activeId=null)},removeClassName:function(n,t){if(typeof t=="string"&&(t=[t]),this.__datas.childElementKeys[n]){var r=this.__datas.childElementKeys[n],i=r[0];t.forEach(function(n){i.className=i.className.replace(new RegExp("(\\s)"+n+"(?!(w|-))|^"+n+"(?!(w|-))"),"")})}return this},addClassName:function(n,t){if(this.__datas.childElementKeys[n]){var r=this.__datas.childElementKeys[n],i=r[0];t.forEach(function(n){new RegExp(n,"g").test(i.className)||(i.className!=""&&(i.className+=" "),i.className+=n)})}return this},visible:function(n){return n?this.$el.removeClass("hide"):this.$el.addClass("hide"),this},clearContainerElement:function(){return this.$el&&this.$el.parent().remove(),this.$el=null,this},clearAllChildElement:function(){return this.$el&&this.$el.remove(),this},resetData:function(){return this.__datas={activeId:null,deactiveId:null,childElementKeys:{}},this},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.constEvent=ecount.gridV2.constEvent.outerVerticalManager;this.util=ecount.gridV2.modules.util;this.eventSequenceIndex=ecount.gridV2.modules.util.sequenceIndexGenerator.next();this.__history=n.history;this.resetData()},init:function(n,t,i){this.__defaultOptions={layoutId:null,eventPrefixId:null};this.initGlobalValue(n);$.extend(this.__defaultOptions,t);this.__events=i},render:function(){var n=this.__events&&this.__events.triggerEvent(this.constEvent.getList,{})||[],t=this.template.replace("{{id}}",this.prefixId+this.__defaultOptions.layoutId+"#"+this.prefixIndex);return this.$el=$(t),this.renderChild(n),this.__defaultOptions.$layout.append(this.$el),this.prefixIndex+=1,this},renderChild:function(n){for(var t=0,r=n.length;t<r;t++){var i=n[t],f=this.childTemplate.replace("{{id}}",this.prefixChildId+i.id).replace("{{style}}","height:"+i.height+"px;"),u=$(f);this.__datas.childElementKeys[this.prefixChildId+i.id]=u;this.$el.append(u)}return this},destroyAll:function(){}});ecount.gridV2.modules.overlay=$.Class(null,{template:"<div class='selector-overlay'><\/div>",init:function(n,t){this.resetData();$.extend(this.__defaultDatas,t);this.initGlobalValue(n);this.__defaultDatas.containerSelector&&(this.__datas.$containerElement=$(this.__defaultDatas.containerSelector),this.__datas.containerElement=this.__datas.$containerElement[0])},render:function(){return this.__datas.$el||this.createElement(),this.__datas.$el&&this.__datas.$el.length>0&&this.__datas.containerElement&&this.__datas.$containerElement.append(this.__datas.$el),this},destroyAll:function(){},resetData:function(){return this.__defaultDatas={id:null,containerSelector:null},this.__datas={containerElement:null,$containerElement:null,$el:null},this},initGlobalValue:function(){},createElement:function(){return this.__datas.$el=$(this.template),this.__defaultDatas.id&&this.__datas.$el.attr("id",this.__defaultDatas.id),this},isVisible:function(){return this.__datas.$el[0].style.display!="none"},isInvisible:function(){return this.__datas.$el[0].style.display=="none"},hide:function(){this.__datas.$el.hide()},fadeOut:function(n,t){return n=_.isNumber(n)?n:0,this.__datas.$el.fadeOut(n,t),this},fadeIn:function(n,t){return n=_.isNumber(n)?n:0,this.__datas.$el.fadeIn(n,t),this},setPosition:function(n){return this.__datas.$el.css({top:n.y,left:n.x,width:n.width,height:n.height}),this}});ecount.gridV2.modules.overlayManager=$.Class(null,{__defaultDatas:null,__datas:null,__events:null,init:function(n,t,i){this.resetData();$.extend(this.__defaultDatas,t);this.initGlobalValue(n);this.__events=i;this.__defaultDatas.layout&&(this.__datas.$layoutElement=$(this.__defaultDatas.layout));this.__defaultDatas.layout&&this.__defaultDatas.containerSelector&&(this.__datas.$containerElement=this.__datas.$layoutElement.find(this.__defaultDatas.containerSelector),this.__datas.containerElement=this.__datas.$containerElement[0])},render:function(){for(var i,t,n=1;n<3;n++)i=this.__defaultDatas.prefixId+this.__defaultDatas.prefixIdx,t=new ecount.gridV2.modules.overlay({},{id:i,containerSelector:this.__defaultDatas.layoutSelector}),t.render(),this.__datas.items.push(t),this.__defaultDatas.prefixIdx++;return this},destroyAll:function(){this.__datas.items.forEach(function(n){n.destroyAll()});this.unbindConatinerEventMousemove();this.unbindLayoutEventMouseleave()},resetData:function(){this.__defaultDatas={prefixId:"grid-selector-overlay-",prefixIdx:0,layoutSelector:"",containerSelector:"",showDelay:0,hideDelay:0};this.__datas={$layoutElement:null,$containerElement:null,containerElement:null,items:[],sectionType:null,columnSectionType:null,detailSectionType:null,intervalID:null}},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.constEvent=ecount.gridV2.constEvent.overlayManager;this.theadType=this.constValue.sectionType.thead;this.theadSlipType=this.constValue.sectionType.theadSlip;this.tbodyType=this.constValue.sectionType.tbody;this.tbodySlipType=this.constValue.sectionType.tbodySlip;this.tfootType=this.constValue.sectionType.tfoot;this.tfootSlipType=this.constValue.sectionType.tfootSlip;this.history=n.history;this.viewUtil=ecount.gridV2.view.util},LAYOUT_MOUSELEAVE_HANDLER:function(n){var t=$(n.target),t=t.closest("th, td");t.length!=1&&(this.hideAll({},n),this.__datas.sectionType=null,this.__datas.columnSectionType=null,this.__datas.detailSectionType=null)},CONTAINER_MOUSEMOVE_HANDLER:function(n){var r=this.getTargetElementByPosition({x:n.pageX,y:n.pageY}),u,i,f;if(r){var e=r.getAttribute("data-rowtype"),t=this.__events&&this.__events._triggerEvent(this.constEvent.getSectionInfos,{},{target:r}),o=t.sectionType;if(t.sectionType&&t.columnSectionType&&t.detailSectionType&&(this.__datas.sectionType!=t.sectionType||this.__datas.columnSectionType!=t.columnSectionType||this.__datas.detailSectionType!=t.detailSectionType))this.__datas.sectionType=t.sectionType,this.__datas.columnSectionType=t.columnSectionType,this.__datas.detailSectionType=t.detailSectionType,this.draw({},n);else{for(u=0,i=0,f=this.__datas.items.length;i<f;i++)this.__datas.items[i].isVisible()&&(u+=1);u==0&&this.draw({},n)}}else this.hideAll({},n)},bindLayoutEventMouseleave:function(){if(this.__datas.containerElement)this.__datas.$containerElement.off("mouseleave.gridOverlayManagerLayout_"+this.__defaultDatas.ecPageID).on("mouseleave.gridOverlayManagerLayout_"+this.__defaultDatas.ecPageID,this.LAYOUT_MOUSELEAVE_HANDLER.bind(this));return this},unbindLayoutEventMouseleave:function(){return this.__datas.containerElement&&this.__datas.$containerElement.off("mouseleave.gridOverlayManagerLayout_"+this.__defaultDatas.ecPageID),this},bindConatinerEventMousemove:function(){$(document.body).off("mousemove.gridOverlayManagerContainer_"+this.__defaultDatas.ecPageID).on("mousemove.gridOverlayManagerContainer_"+this.__defaultDatas.ecPageID,this.CONTAINER_MOUSEMOVE_HANDLER.bind(this));return this},unbindConatinerEventMousemove:function(){return $(document.body).off("mousemove.gridOverlayManagerContainer_"+this.__defaultDatas.ecPageID),this},draw:function(n,t){function c(){s+=1;e==s&&(f.__datas.intervalID=null,f.__datas.displayLastState=="hide"&&f.hideAll({},t),f.__datas.displayLastState=null)}var i,f=this,o=0,u,h;_.isNumber(n.delay)?o=n.delay:_.isNumber(this.__defaultDatas.showDelay)&&(o=this.__defaultDatas.showDelay);var e=0,s=0,r=[];if(i=this.__events&&this.__events._triggerEvent(this.constEvent.getSize,{sectionType:this.__datas.sectionType,columnSectionType:this.__datas.columnSectionType,detailSectionType:this.__datas.detailSectionType,position:"top"},t)||{x:0,y:0,width:0,height:0},i.width>0&&i.height>0&&(e+=1,r.push(0),this.__datas.items[0].setPosition(i)),i=this.__events&&this.__events._triggerEvent(this.constEvent.getSize,{sectionType:this.__datas.sectionType,columnSectionType:this.__datas.columnSectionType,detailSectionType:this.__datas.detailSectionType,position:"bottom"},t)||{x:0,y:0,width:0,height:0},i.width>0&&i.height>0&&(e+=1,r.push(1),this.__datas.items[1].setPosition(i)),e>0)if(this.hideAll(n,t),this.__datas.intervalID)this.__datas.displayLastState="draw";else for(u=0,h=r.length;u<h;u++)this.__datas.items[r[u]].isVisible()||(this.__datas.intervalID||(this.__datas.intervalID="show"),this.__datas.items[r[u]].fadeIn(o,c))},hideAll:function(n){function e(){f+=1;u==f&&(i.__datas.intervalID=null,i.__datas.displayLastState=="draw"&&i.draw({},{}),i.__datas.displayLastState=null)}var i,r,u,f,t;if(n=n||{},i=this,r=0,_.isNumber(n.delay)?r=n.delay:_.isNumber(this.__defaultDatas.hideDelay)&&(r=this.__defaultDatas.hideDelay),u=0,f=0,this.__datas.intervalID)this.__datas.displayLastState="hide";else{for(t=this.__datas.items.length-1;t>-1;t--)this.__datas.items[t]&&this.__datas.items[t].isVisible()&&(u+=1);for(t=this.__datas.items.length-1;t>-1;t--)this.__datas.items[t]&&this.__datas.items[t].isVisible()&&(this.__datas.intervalID||(this.__datas.intervalID="hide"),this.__datas.items[t].fadeOut(r,e))}},getTargetElementByPosition:function(n){var i,o,r,c,u,f,l,s,e,a,h,t;if(this.__datas.containerElement)for(o=this.__datas.containerElement.children,r=0,c=o.length;r<c;r++)if(u=o[r],u.tagName!="COLGROUP"){for(f=0,l=u.children.length;f<l;f++){for(s=u.children[f],e=0,a=s.children.length;e<a;e++)if(h=s.children[e],t=h.getBoundingClientRect(),t.left<=n.x&&t.left+t.width>=n.x&&Math.floor(t.top)<=n.y&&Math.floor(t.top)+t.height>=n.y){i=h;break}if(i)break}if(i)break}return i}});ecount.gridV2.data.row=function(){};ecount.gridV2.data.row.prototype={getValue:function(n,t,i){if(!this.__datas[n])return null;this.setStructureInfo(n);var f=this.dataColumn.getById(n,t),r=this.getById(n,i),u;return r?f?r[f.propertyName]:(u=r[this.dataColumn.convertNormalize(n,t)],u==undefined?null:u):null},add:function(n,t,i,r){var yt=this,wt,k,h,o,c,b,bt,g,kt,f,l,ui,at,y,p,nt,e,fi,et,ot,gt,u,d,v,vt,ni;this.setStructureInfo(n);var tt={standardIndex:-1,refreshCell:[]},s={},rt=this.dataColumn.getAll(n),it=this.dataColumn.getAll(n,this.constValue.returnType.multi),st=it.length,ti=it[0].length,p=[],ht=r.addDirection,ut=this.getAdditionalDatas(n),pt=this.dataCheckbox.getCheckboxUseColumnList(n),a=[],ct=[];for(f=0,wt=rt.length;f<wt;f++)s[rt[f].propertyName]="";if([this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(this.optForm.version)&&this.optCommon.columnType==this.constValue.columnType.single?this.tfootType==n?s=$.extend(!0,s,this.optRow[n].additionalDatasInForm):this.tbodyType==n&&(s=$.extend(!0,s,this.optRow[n].additionalDatasInForm)):ut&&(s=$.extend(!0,s,ut)),this.optRow[n]&&this.optRow[n].defaultValue)for(h in this.optRow[n].defaultValue)this.optRow[n].defaultValue.hasOwnProperty(h)&&(o=this.optRow[n].defaultValue[h],o!=null&&o!=undefined&&(c=rt.find(function(n){return n.propertyName==h}),c&&this.data.column.isDecimalDataType(n,c.id)&&(b=this.data.column.getConvertor(n,this.constValue.dataType.modeView,c.id),o=b&&b(o,c)||o)),s[h]=o);for(this._normalizeProperties(s),f=0;f<t;f++)if(r.addRowData&&r.addRowData[f]){if(k=r.addRowData[f],ut&&(k=$.extend(!0,k,ut)),this.optRow[n]&&this.optRow[n].defaultValue)for(h in this.optRow[n].defaultValue)this.optRow[n].defaultValue.hasOwnProperty(h)&&(o=this.optRow[n].defaultValue[h],o!=null&&o!=undefined&&(c=rt.find(function(n){return n.propertyName==h}),c&&this.data.column.isDecimalDataType(n,c.id)&&(b=this.data.column.getConvertor(n,this.constValue.dataType.modeView,c.id),o=b&&b(o,c)||o)),k[h]=o);this._normalizeProperties(k);ct.push(k)}else ct.push(Object.clone(s));this.setStructureInfo(n);for(var ii=ht=="down"?1:0,lt=i+ii,ri=this._datas.length;lt<ri;lt++){var u=this._datas[lt],d=u[this.constValue.keyColumnPropertyName],v=this._trMap[d];for(u[this.constValue.rowCountColumnPropertyName]+=t,y=0,bt=v.trIdx.length;y<bt;y++)for(p=this._renderingTableMap[v.trIdx[y]],v.trIdx[y]+=st*t,g=0,kt=ti;g<kt;g++)p[g].dataIdx+=t,["MERGE","NORMAL"].contains(p[g].type)&&(p[g].trIdx+=t);v.dataIdx+=t}var w=[],ei=this.dataColumn.getSystemColumnInfo(),ft=99999,dt={};for(f=0;f<t;f++){for(u=ct[f],l=u[this.constValue.rowVariableNames.mergeSet],this.makeKey(n,u),dt[u[this.constValue.keyColumnPropertyName]]=!0,this.addSystemMergeInfo(n,u),this.makeState(n,u,this.constValue.rowState.create),n==this.tfootType&&(l&&this.removeTotalMergeSet(n,n,null,l),this.optEditable.specialRowMerge[f]&&this.optEditable.specialRowMerge[f][this.constValue.rowVariableNames.mergeSet]&&(l||(l=[]),l=l.concat(this.optEditable.specialRowMerge[f][this.constValue.rowVariableNames.mergeSet]),l.sort(function(n,t){var i=n[yt.constValue.rowVariableNames.mergeStartIndex],r=t[yt.constValue.rowVariableNames.mergeStartIndex];return i>r?1:i<r?-1:0}))),l?u[this.constValue.rowVariableNames.mergeSet]=l:r.isMergeAddRow||(u[this.constValue.rowVariableNames.mergeSet]=Object.clone(this.optRow[this.tbodyType].emptyRowMergeInfo,!0)),ui=[],at=0;at<st;at++)w.push([]);switch(ht){case"down":if(this._datas[i])for(d=this._datas[i][this.constValue.keyColumnPropertyName],v=this._trMap[d],y=v.trIdx.length-1;y>-1;y--)for(p=this._renderingTableMap[v.trIdx[y]],nt=p.length-1;nt>-1;)e=p[nt],["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN"].contains(e.type)||e.type=="MERGE"&&this._renderingTableMap[e.trIdx][e.columnIdx][this.constValue.rowVariableNames.rowspanCount]?(e=this._renderingTableMap[e.trIdx][e.columnIdx],fi=e[this.constValue.rowVariableNames.rowspanCount]||1,et=e[this.constValue.rowVariableNames.colspanCount]||1,e[this.constValue.rowVariableNames.rowspanCount]+=1,nt-=et,tt.refreshCell||(tt.refreshCell=[]),tt.refreshCell.push({sectionType:n,columnId:e.columnId,rowId:e.rowId,option:{isRunChange:!1,isRunComplete:!1}}),ft=ft>e.dataIdx?e.dataIdx:ft):e.type=="COLSPAN"?(e=this._renderingTableMap[e.trIdx][e.columnIdx],et=e[this.constValue.rowVariableNames.colspanCount]||1,nt-=et):nt-=1;u[this.constValue.rowCountColumnPropertyName]=i+1+(f+1);this._keys[u[this.constValue.keyColumnPropertyName]]=u;a.push(u);break;case"up":u[this.constValue.rowCountColumnPropertyName]=i+1+f;this._keys[u[this.constValue.keyColumnPropertyName]]=u;a.push(u);break;case"last":u[this.constValue.rowCountColumnPropertyName]=i+1+f;u[this.constValue.rowNumberingPropertyName]=i+1+f;this._keys[u[this.constValue.keyColumnPropertyName]]=u;a.push(u)}}switch(ht){case"down":a.splice(0,0,i+1,0);this._datas.splice.apply(this._datas,a);w.splice(0,0,(i+1)*it.length,0);this._renderingTableMap.splice.apply(this._renderingTableMap,w);break;case"up":a.splice(0,0,i,0);this._datas.splice.apply(this._datas,a);w.splice(0,0,i*it.length,0);this._renderingTableMap.splice.apply(this._renderingTableMap,w);break;case"last":a.splice(0,0,i,0);this._datas.splice.apply(this._datas,a);w.splice(0,0,i*it.length,0);this._renderingTableMap.splice.apply(this._renderingTableMap,w)}for(this.view.setRenderMode(this.constValue.renderMode.refreshMergeSet),ot=ft,gt=this._datas.length;ot<gt;ot++)(u=this._datas[ot],d=u[this.constValue.keyColumnPropertyName],dt[d])||(v=this._trMap[d],vt=n,u[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate&&(vt=this.tfootType),this.view.makeViewDataRenderingTableMap(n,u[this.constValue.rowVariableNames.mergeSet],{rowIndex:u[this.constValue.rowCountColumnPropertyName]-1,rowCurrentRowIndex:(u[this.constValue.rowCountColumnPropertyName]-1)*st,tableIndex:v.tableIndex,tempSectionType:vt}));return this.view.setRenderMode(this.constValue.renderMode.none),tt.standardIndex=i,pt.length>0&&(ni=function(i){var f=this.getAll(this.theadType),r=i.columnId,s=this.dataCheckbox.getMaxCount(n,r),o=this.dataColumn.getAll(n,this.constValue.returnType.multi).length,u,e;for(this.dataCheckbox.setAvailablePageCount(n,r,t*o),u=0,e=f.length;u<e;u++)this.dataCheckbox.getCheckboxUse(this.theadType,r)&&this.dataCheckbox.executeCheckbox(this.theadType,r,f[u][this.constValue.keyColumnPropertyName],!1)}.bind(this),_.forEach(pt,ni)),tt},insert:function(n,t,i,r,u){var f=this,a=[this.theadType,this.tbodyType,this.tfootType],it,c,ot,rt,et,ht,s,y,nt,p,e,h,tt;for(this.constValue.columnType.multi==this.optCommon.columnType&&(a=[n]),it={},c=0,ot=a.length;c<ot;c++){rt=this.optCommon.columnType==this.constValue.columnType.multi?t==this.tfootType?this.dataColumn.getAll(t,this.constValue.returnType.multi):this.dataColumn.getAll(a[c],this.constValue.returnType.multi):this.dataColumn.getAll(a[c],this.constValue.returnType.multi);var w=rt[0].length,at=w-1,b=rt.length,k=this.getAll(a[c]),vt=this.dataCheckbox.getCheckboxUseColumnList(a[c]),l;switch(r){case"down":l=i+1;break;case"up":l=i}it.type=l==b?"add":"insert";var v=0,d=0,st=k.length,ut,ft=0;for(this.optCommon.columnType==this.constValue.columnType.multi&&(et=this.getSectionRowIndex(a[c],t),v=et.startRowIndex,st=et.endRowCount,t==this.tfootType&&(ut=this.getSectionRowIndex(this.tbodyType),ht=this.dataColumn.getAll(this.tbodyType,this.constValue.returnType.multi),ft=(ut.endRowCount-ut.startRowIndex)*ht.length));v<st;v++,d++){var ct=k[v],lt=ct[this.constValue.keyColumnPropertyName],o=k[v][this.constValue.rowVariableNames.mergeSet],g=this._trMap[lt];this.addSystemMergeInfo(a[c],ct,v);switch(r){case"down":if(s=this.dataColumn.getSystemColumnInfo(),o)o.forEach(function(n){var r=n[f.constValue.rowVariableNames.mergeStartIndex],o=r%w,t=Math.floor(r/w),h=n[f.constValue.rowVariableNames.rowspanCount]||1,e=h-1,c=s.find(function(n){return n.index==o});t>=l&&(n[f.constValue.rowVariableNames.mergeStartIndex]+=w*u);c?n[f.constValue.rowVariableNames.rowspanCount]+=1:t<=i&&t+e>=i&&t+e>i&&(n[f.constValue.rowVariableNames.rowspanCount]+=1)});else for(s.length>0&&(o=k[v][this.constValue.rowVariableNames.mergeSet]=[]),y=0,nt=s.length;y<nt;y++)p={},p[this.constValue.rowVariableNames.mergeStartIndex]=s[y].index,p[this.constValue.rowVariableNames.rowspanCount]=2,o.push(p);for(h=0,tt=u;h<tt;h++)e=[[]],e.splice(0,0,d*b+ft+l+h,0),this._renderingTableMap.splice.apply(this._renderingTableMap,e),e=[-1],e.splice(0,0,d*b+l+h,0),g.trIdx.splice.apply(g.trIdx,e);break;case"up":if(s=this.dataColumn.getSystemColumnInfo(),o)o.forEach(function(n){var r=n[f.constValue.rowVariableNames.mergeStartIndex],o=r%w,t=Math.floor(r/w),h=n[f.constValue.rowVariableNames.rowspanCount]||1,e=h-1,c=s.find(function(n){return n.index==o});t>=l&&(n[f.constValue.rowVariableNames.mergeStartIndex]+=w*u);c?n[f.constValue.rowVariableNames.rowspanCount]+=u:t<i&&t+e>=i&&t+e>=i&&(n[f.constValue.rowVariableNames.rowspanCount]+=u)});else for(s.length>0&&(o=k[v][this.constValue.rowVariableNames.mergeSet]=[]),y=0,nt=s.length;y<nt;y++)p={},p[this.constValue.rowVariableNames.mergeStartIndex]=s[y].index,p[this.constValue.rowVariableNames.rowspanCount]=2,o.push(p);for(h=0,tt=u;h<tt;h++)e=[[]],e.splice(0,0,d*b+ft+l+h,0),this._renderingTableMap.splice.apply(this._renderingTableMap,e),e=[-1],e.splice(0,0,d*b+l+h,0),g.trIdx.splice.apply(g.trIdx,e)}f=this;o&&o.sort(function(n,t){var i=n[f.constValue.rowVariableNames.mergeStartIndex],r=t[f.constValue.rowVariableNames.mergeStartIndex];return i>r?1:i<r?-1:0})}ecount.gridV2.logger.log("data row insert rendering table map");ecount.gridV2.logger.log(this._renderingTableMap)}return it},insertColumn:function(n,t,i,r,u,f){var l,ut,ft,d,yt,e,et,g,o,a,st,v,ht,y,wt,tt,bt,p,it,w,kt,b,at,vt,h,k,dt,c,rt;for(f=f||{},l=[this.theadType,this.tbodyType,this.tfootType],this.optCommon.columnType==this.constValue.columnType.multi&&(this.tfootType==n?(l=[this.tbodyType],ut=n):l=[n]),u.columns&&(u.columns[0]&&u.columns[0].constructor==Array||(ft=u.columns.slice(0),ft.splice(0,0,0,0),u.columns=[[]],u.columns[0].splice.apply(u.columns[0],ft))),d=0,yt=l.length;d<yt;d++)if(e=l[d],this.optCommon.columnType==this.constValue.columnType.multi&&this.tfootType==e&&(e=this.tbodyType),this.setStructureInfo(e),et=this._renderingTableMap,g=this._datas,g.length!=0){var gt=this.dataColumn.getAll(ut||e,this.constValue.returnType.multi),ot=gt[0].length,nt=ot-1,pt=[];for(o=i.top,a=i.bottom;o<=a;o++)t=="right"?o==0?pt.push({min:o*nt+i.right+1,max:(o+1)*nt-1}):pt.push({min:o*nt+i.left,max:(o+1)*nt-1}):t=="left";for(o=0,a=g.length,this.optCommon.columnType==this.constValue.columnType.multi&&(st=this.getSectionRowIndex(e,ut),o=st.startRowIndex,a=st.endRowCount);o<a;o++){v=g[o];ht=v[this.constValue.keyColumnPropertyName];v[this.constValue.rowVariableNames.mergeSet]||(v[this.constValue.rowVariableNames.mergeSet]=[]);var s=v[this.constValue.rowVariableNames.mergeSet],ct=this.getViewDataTrMap(e,ht),lt=[];if(u.columns)for(y=0,wt=u.columns.length;y<wt;y++)if(e==this.theadType&&this.optCommon.columnType==this.constValue.columnType.single||this.optCommon.columnType==this.constValue.columnType.multi)for(tt=0,bt=u.columns[y].length;tt<bt;tt++)p=u.columns[y][tt],p.mergeTo&&lt.push(p.mergeTo),this.setValue(e,p.id,ht,p.title||"",{isRunChange:!1,isRunComplete:!1});if(this.insertColumnMergeSetByBoundary(e,t,s,i,f),lt.length>0&&s.forEach(function(n){lt.contains(n.columnId)&&(n[this.constValue.rowVariableNames.colspanCount]+=1)}.bind(this)),["left","right"].contains(t)){if(it=!1,u.columns.find(function(n){return n.find(function(n){return ecount.common.isTrue(n.isMergeColumn)})}))switch(t){case"left":it=i.left!=r.left;break;case"right":it=i.right!=r.right}if(!it)for(w=0,kt=f.addCount;w<kt;w++){b=-1;switch(t){case"left":b=i.top*ot+i.left+w;break;case"right":b=i.top*ot+i.right+w+1}s.find(function(n){return n[this.constValue.rowVariableNames.mergeStartIndex]==b}.bind(this))||(at=ecount.gridV2.util.getColspanCount(u.columns),vt=ecount.gridV2.util.getRowspanCount(u.columns),(at>1||vt>1)&&(h={},h[this.constValue.rowVariableNames.mergeUseOwn]=!0,h[this.constValue.rowVariableNames.mergeStartIndex]=b,h[this.constValue.rowVariableNames.rowspanCount]=vt,h[this.constValue.rowVariableNames.colspanCount]=at,s.push(h),this.dataUtil.singleArraySort(s)))}}for(k=0,dt=ct.rowInfo.trIdx.length;k<dt;k++)if(t=="right")for(c=i.left,rt=i.left+f.addCount;c<rt;c++)et[ct.rowInfo.trIdx[k]].splice(i.right+1,0,null);else if(t=="left")for(c=i.left,rt=i.left+f.addCount;c<rt;c++)et[ct.rowInfo.trIdx[k]].splice(i.left,0,null)}s=this.optRow[e].additionalDatas&&this.optRow[e].additionalDatas[this.constValue.rowVariableNames.mergeSet];s&&this.insertColumnMergeSetByBoundary(e,t,s,i,f)}},removes:function(n,t){var b,ht,a,ct,l,k,d,it,v,r,ut,s,f,ft,y,g,nt,lt,i,et;this.setStructureInfo(n);var p=this.dataColumn.getAll(n),at=this.dataColumn.getAll(n,this.constValue.returnType.multi),ot=at.length,e=this._renderingTableMap,vt=this._removeDatas,tt=this._keys,o=this._datas,st=tt[t[t.length-1]],u=[],w=this.dataCheckbox.getCheckboxUseColumnList(n),h=[],c=[];for(i=0,l=t.length;i<l;i++)u.push(parseInt(tt[t[i]][this.constValue.rowCountColumnPropertyName],10)-1);for(u=u.sort(this.AscendingOrder),i=st[this.constValue.rowCountColumnPropertyName],l=o.length;i<l;i++)o[i][this.constValue.rowCountColumnPropertyName]-=t.length;if(this.optCommon.gridType==this.constValue.gridType.editable&&this.optRow[this.tfootType].specialRowCount>0&&this.optColumn[this.tbodyType].isAutoCalculate)for(b=0,ht=u.length;b<ht;b++)for(a=o[u[b]][this.constValue.keyColumnPropertyName],i=0,l=p.length;i<l;i++)ct=this.__core.data.row.getViewDataCellInfo(n,p[i].id,a),ct.controlType=="widget.input.number"&&this.dataNormalColumnAutoCalculateSetting.trigger(n,p[i].id,new Decimal(parseInt(st[p[i].propertyName]||0,10)*-1).toString());for(i=0,l=u.length;i<l;i++){for(a=o[u[i]][this.constValue.keyColumnPropertyName],s=0;s<w.length;s++)w[s].use&&this.dataCheckbox.isChecked(n,w[s].columnId,a)&&this.dataCheckbox.executeCheckbox(n,w[s].columnId,a,!1);for(k=this._trMap[a],d=k.trIdx.length-1;d>-1;d--)for(it=this._renderingTableMap[k.trIdx[d]],v=0;v<it.length-1;)if(r=it[v],["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN"].contains(r.type))r=e[r.trIdx][r.columnIdx],y=r[this.constValue.rowVariableNames.colspanCount]||1,r[this.constValue.rowVariableNames.rowspanCount]-=1,v+=y,h.push({sectionType:n,columnId:r.columnId,rowId:r.rowId,option:{isRunChange:!1,isRunComplete:!1},map:this.getViewDataCellMap(n,r.columnId,f),cell:this.__core.view.cell.getCellElement(n,r.columnId,f).cell});else if(r.type=="MERGE"&&e[r.trIdx][r.columnIdx][this.constValue.rowVariableNames.rowspanCount]){if(currRenderingTableMapItem=e[r.trIdx][r.columnIdx],y=currRenderingTableMapItem[this.constValue.rowVariableNames.colspanCount]||1,e[r.trIdx+1]&&(nextRenderingTableMapItem=Object.clone(currRenderingTableMapItem,!0),nextRenderingTableMapItem[this.constValue.rowVariableNames.rowspanCount]>1)){nextRenderingTableMapItem[this.constValue.rowVariableNames.rowspanCount]-=1;var yt=nextRenderingTableMapItem[this.constValue.rowVariableNames.rowspanCount],rt=nextRenderingTableMapItem[this.constValue.rowVariableNames.colspanCount],f=this.getIdByIndex(n,r.trIdx+1);for(nextRenderingTableMapItem.rowId=f,ut=0;ut<yt;ut++)if(rt&&rt>0)for(s=0;s<rt;s++)e[r.trIdx+1][r.columnIdx+s].rowId=f;else e[r.trIdx+1][r.columnIdx].rowId=f;o[u[i]+1]&&(o[u[i]+1][this.constValue.rowVariableNames.mergeSet]||(o[u[i]+1][this.constValue.rowVariableNames.mergeSet]=[]),_.merge(e[r.trIdx+1][r.columnIdx],nextRenderingTableMapItem),o[u[i]+1][this.constValue.rowVariableNames.mergeSet].push(e[r.trIdx+1][r.columnIdx]));h.push({sectionType:n,columnId:currRenderingTableMapItem.columnId,rowId:currRenderingTableMapItem.rowId,option:{isRunChange:!1,isRunComplete:!1},map:this.getViewDataCellMap(n,currRenderingTableMapItem.columnId,f),cell:this.__core.view.cell.getCellElement(n,currRenderingTableMapItem.columnId,f).cell});f=this.getIdByIndex(n,k.dataIdx+1);ft=this._trMap[f]&&this._trMap[f][nextRenderingTableMapItem.columnId];ft&&(ft.adjustmentValue=0);c.push({sectionType:n,columnId:nextRenderingTableMapItem.columnId,rowId:f,option:{isRunChange:!1,isRunComplete:!1},map:this.getViewDataCellMap(n,nextRenderingTableMapItem.columnId,f),cell:this.__core.view.cell.getCellElement(n,nextRenderingTableMapItem.columnId,f).cell})}v+=y}else r.type=="COLSPAN"?(r=e[r.trIdx][r.columnIdx],y=r[this.constValue.rowVariableNames.colspanCount]||1,v+=y):v+=1;for(this.removeTrMap(n,a),g=o[u[i]],g[this.constValue.rowStatePropertyName]=g[this.constValue.rowStatePropertyName]==this.constValue.rowState.create?this.constValue.rowState.deletedNew:this.constValue.rowState.deleted,vt.push(g),delete tt[a],o.splice(u[i],1),e.splice(u[i]*ot,ot),nt=u[i];nt<e.length;nt++)lt=e[nt],lt.forEach(function(n){n.dataIdx--;n.trIdx--})}for(i=0;i<h.length;i++)et=this.getValue(h[i].sectionType,h[i].columnId,h[i].rowId),this.__core.fn.refreshCell(h[i].sectionType,h[i].columnId,h[i].rowId,et);for(i=0;i<c.length;i++)et=this.getValue(c[i].sectionType,c[i].columnId,c[i].rowId),this.__core.view.cell.addCell(c[i].sectionType,c[i].columnId,c[i].rowId,{map:c[i].map})},remove:function(n,t){var r,u,i,f;for(this.setStructureInfo(n),r=this._keys[t],u=this.dataColumn.getAll(n),i=r[this.constValue.rowCountColumnPropertyName],f=this._datas.length;i<f;i++)this._datas[this.constValue.rowCountColumnPropertyName]-=1;if(delete this._keys[t],this._datas.split(r[this.constValue.rowCountColumnPropertyName]-1,1),this.optCommon.gridType==this.constValue.gridType.editable&&this.optRow[this.tfootType].specialRowCount>0&&this.optColumn[this.tbodyType].isAutoCalculate)for(i=0,f=u.length;i<f;i++)this.dataNormalColumnAutoCalculateSetting.trigger(n,u[i].id,new Decimal(parseInt(r[u[i].propertyName]||0,10)*-1).toString())},insertColumnMergeSetByBoundary:function(n,t,i,r,u){for(var p=this.dataColumn.getAll(n,this.constValue.returnType.multi),s=p[0].length-u.addCount,k=s-1,h=0,w=i.length;h<w;h++){var f=i[h],a=f[this.constValue.rowVariableNames.mergeStartIndex],e=Math.floor(a/s),o=a%s,c=f[this.constValue.rowVariableNames.colspanCount]||1,b=c-1,v=f[this.constValue.rowVariableNames.rowspanCount]||1,d=v-1,l=o,y=o+c-1;if(t=="right"){if(e==0?r.right<l&&(f[this.constValue.rowVariableNames.mergeStartIndex]+=u.addCount):f[this.constValue.rowVariableNames.mergeStartIndex]+=r.right>=l?e*u.addCount:e*u.addCount+u.addCount,c==1&&v==1)continue;if(r.right==y)continue;if(r.right<l)continue;if(y<r.right)continue;f[this.constValue.rowVariableNames.colspanCount]+=u.addCount}else t=="left"&&(e==0?o>=r.left&&(f[this.constValue.rowVariableNames.mergeStartIndex]+=u.addCount):f[this.constValue.rowVariableNames.mergeStartIndex]+=o>=r.left?e*u.addCount+u.addCount:e*u.addCount,o<r.left&&o+b>=r.left&&(f[this.constValue.rowVariableNames.colspanCount]+=u.addCount))}},recreateColumnMergeInformation:function(n,t,i,r,u){for(var a=this.dataColumn.getAll(t||n,this.constValue.returnType.multi),p=a.length+(r.bottom-r.top+1),l=a[0].length,w=l-1,h=i.length-1;h>-1;h--){var e=i[h],v=e[this.constValue.rowVariableNames.mergeStartIndex],s=Math.floor(v/l),f=v%l,y=e[this.constValue.rowVariableNames.colspanCount]||1,c=y-1,o=Math.min(r.right,f+c)-Math.max(r.left,f)+1;u.left<=f&&u.right>=f?r.left<f&&f>r.right?(o=r.right-r.left+1,e[this.constValue.rowVariableNames.mergeStartIndex]-=(s+1)*o):r.left>f&&f+c<r.right?(o=r.right-r.left+1,e[this.constValue.rowVariableNames.mergeStartIndex]-=s*o,e[this.constValue.rowVariableNames.colspanCount]-=f+y-r.left):r.left==f&&f+c>r.right?(e[this.constValue.rowVariableNames.colspanCount]-=r.right-r.left+1,e[this.constValue.rowVariableNames.mergeStartIndex]-=s*(r.right-r.left+1)):r.left<=f&&r.right>=f+c?i.splice(h,1):(e[this.constValue.rowVariableNames.mergeStartIndex]-=Math.abs(s*o),e[this.constValue.rowVariableNames.colspanCount]-=o>-1?o:0):u.left<=f&&u.right>=f&&u.right<f+c?(o=r.right-r.left+1,e[this.constValue.rowVariableNames.mergeStartIndex]-=(s+1)*o):u.left<f&&u.right<f?(o=r.right-r.left+1,e[this.constValue.rowVariableNames.mergeStartIndex]-=(s+1)*o):u.left>f&&u.right>f&&(e[this.constValue.rowVariableNames.mergeStartIndex]-=s*(r.right-r.left+1));(e[this.constValue.rowVariableNames.colspanCount]<=1&&e[this.constValue.rowVariableNames.rowspanCount]<=1||e[this.constValue.rowVariableNames.colspanCount]==0||e[this.constValue.rowVariableNames.rowspanCount]==0)&&i.splice(h,1)}},recreateRowMergeInformation:function(n,t,i,r){for(var l=this.dataColumn.getAll(n,this.constValue.returnType.multi),y=l.length+(i.bottom-i.top+1),o=l[0].length,p=o-1,h=t.length-1;h>-1;h--){var e=t[h],a=e[this.constValue.rowVariableNames.mergeStartIndex],u=Math.floor(a/o),w=a%o,c=e[this.constValue.rowVariableNames.rowspanCount]||1,s=c-1,v=e[this.constValue.rowVariableNames.colspanCount]||1,b=v-1,f;r.top<=u&&r.bottom>=u?i.top<=u&&i.bottom>=u?i.bottom<u+s?(f=i.bottom-u+1,e[this.constValue.rowVariableNames.rowspanCount]-=f,e[this.constValue.rowVariableNames.mergeStartIndex]-=(u-i.top)*o,e[this.constValue.rowVariableNames.rowspanCount]==1&&v==1&&t.splice(h,1)):t.splice(h,1):i.top>u&&i.top<u+s&&i.bottom>=u+s?(f=u+c-i.top,e[this.constValue.rowVariableNames.rowspanCount]-=f):i.top>u&&i.top<=u+s&&i.bottom<u+s?(f=i.bottom-i.top+1,e[this.constValue.rowVariableNames.rowspanCount]-=f):i.top>u&&i.bottom>u+s?(f=u+c-i.top,e[this.constValue.rowVariableNames.rowspanCount]-=f):i.bottom<u&&(f=i.bottom-i.top+1,e[this.constValue.rowVariableNames.mergeStartIndex]-=f*o):i.bottom<u&&(f=i.bottom-i.top+1,e[this.constValue.rowVariableNames.mergeStartIndex]-=f*o)}},recreateMergeInfomation:function(n,t,i,r){for(var u=this.dataColumn.getAll(t,this.constValue.returnType.multi),o=u.length+(r.bottom-r.top+1),e=u[0].length,s=e-1,f=i.length-1;f>-1;f--);},removeAtBoundary:function(n,t,i,r,u){var ct,a,v,ni,g,wt,et,ti,ut,ri,f,c,ui,at,vt,ei,st,oi,ft,e,l,d,yt,si,gt,pt,hi,ht;for(u=u||{},ct=u.removedColumnInfo,a=[this.theadType,this.tbodyType,this.tfootType],this.optCommon.columnType==this.constValue.columnType.multi&&(a=[n]),v=0,ni=a.length;v<ni;v++){this.setStructureInfo(a[v]);g=this._datas;wt=ct&&ct[a[v]]&&ct[a[v]].columnRows||[[]];et=this.optCommon.columnType==this.constValue.columnType.multi?t==this.tfootType?this.dataColumn.getAll(t,this.constValue.returnType.multi):this.dataColumn.getAll(a[v],this.constValue.returnType.multi):this.dataColumn.getAll(a[v],this.constValue.returnType.multi);var bt=et.length+(i.bottom-i.top+1),nt=et[0].length,vi=nt-1;if(g.length!=0){var h=g.length-1,ot=-1,k,kt=0;for(this.optCommon.columnType==this.constValue.columnType.multi&&(k=this.getSectionRowIndex(n,t),h=k.endRowIndex,ot=k.startRowIndex-1,t==this.tfootType&&(k=this.getSectionRowIndex(a[v]),ti=this.dataColumn.getAll(a[v],this.constValue.returnType.multi),kt=k.endRowCount-k.startRowIndex,madeTbodyTrCount=kt*ti.length));h>ot;h--){var lt=g[h],dt=lt[this.constValue.keyColumnPropertyName],s=this._trMap[dt],it=lt[this.constValue.rowVariableNames.mergeSet]||[];for(ut=it.length-1;ut>-1;ut--){var w=it[ut],ii=w[this.constValue.rowVariableNames.mergeStartIndex],o=Math.floor(ii/nt),y=ii%nt,b=w[this.constValue.rowVariableNames.rowspanCount]||1,rt=b-1,tt=w[this.constValue.rowVariableNames.colspanCount]||1,yi=tt-1,p;if(r.top<=o&&r.bottom>=o){if(i.top<=o&&i.bottom>=o)if(i.bottom<o+rt){for(p=i.bottom-o+1,w[this.constValue.rowVariableNames.rowspanCount]-=p,w[this.constValue.rowVariableNames.mergeStartIndex]-=(o-i.top)*nt,f=o,c=o+b;f<c;f++)for(e=y,l=y+tt;e<l;e++){if(e==y&&i.bottom+1==f){if(this._renderingTableMap[s.trIdx[f]][e].columnId.test(this.constValue.checkBoxPropertyNameRex)||this._renderingTableMap[s.trIdx[f]][e].columnId.test(this.constValue.rowMoveablePropertyNameRex)||this._renderingTableMap[s.trIdx[f]][e].columnId.test(this.constValue.rowNumberingPropertyNameRex)){this._renderingTableMap[s.trIdx[f]][e]=null;continue}ri=this.dataColumn.getById(t||a[v],this._renderingTableMap[s.trIdx[f]][e].columnId);ri.isMergeColumn="0"}this._renderingTableMap[s.trIdx[f]][e]=null}w[this.constValue.rowVariableNames.rowspanCount]==1&&tt==1&&(it.splice(ut,1),this._renderingTableMap[s.trIdx[o+b-1]][y]=null)}else it.splice(ut,1);else if(i.top>o&&i.top<o+rt&&i.bottom>=o+rt)for(p=o+b-i.top,w[this.constValue.rowVariableNames.rowspanCount]-=p,f=o,c=o+b;f<c;f++)for(e=y,l=y+tt;e<l;e++)this._renderingTableMap[s.trIdx[f]][e]=null;else if(i.top>o&&i.bottom<=o+rt)for(p=i.bottom-i.top+1,w[this.constValue.rowVariableNames.rowspanCount]-=p,f=o,c=o+b;f<c;f++)for(e=y,l=y+tt;e<l;e++)this._renderingTableMap[s.trIdx[f]][e]=null;else if(i.top>o&&i.top<=o+rt&&i.bottom>o+rt)for(p=o+b-i.top,w[this.constValue.rowVariableNames.rowspanCount]-=p,f=o,c=o+b;f<c;f++)for(e=y,l=y+tt;e<l;e++)this._renderingTableMap[s.trIdx[f]][e]=null;else if(i.bottom<o)for(p=i.bottom-i.top+1,w[this.constValue.rowVariableNames.mergeStartIndex]-=p*nt,f=o,c=o+b;f<c;f++)for(e=y,l=y+tt;e<l;e++)this._renderingTableMap[s.trIdx[f]][e]=null}else for(i.top>o&&i.bottom<=o+rt?(p=i.bottom-i.top+1,w[this.constValue.rowVariableNames.rowspanCount]-=p):i.bottom<o&&(p=i.bottom-i.top+1,w[this.constValue.rowVariableNames.mergeStartIndex]-=p*nt),f=o,c=o+b;f<c;f++)for(e=y,l=y+tt;e<l;e++)this._renderingTableMap[s.trIdx[f]][e]=null}if(it=this.optRow[a[v]].additionalDatas&&this.optRow[a[v]].additionalDatas[this.constValue.rowVariableNames.mergeSet],it&&this.recreateRowMergeInformation(a[v],it,i,r),this.optCommon.columnType==this.constValue.columnType.multi&&t==this.tfootType)ui=this.dataColumn.getAll(this.tbodyType,this.constValue.returnType.multi),this._renderingTableMap.splice(ui.length+i.top,i.bottom-i.top+1);else{for(var f=h*bt+i.top,c=f+(i.bottom-i.top+1),fi=i.bottom-i.top+1;f<c;f++)for(ft=this._renderingTableMap[f],e=0,l=ft.length;e<l;e++)if(d=ft[e],d&&d.type=="MERGE")for(at=this.dataUtil.getMergeInfo(d,{columnRowsCountPerOneline:nt}),vt=0,ei=at.rowspanCount;vt<ei;vt++)for(st=at.colIdx,oi=st+at.colspanCount;st<oi;st++)this._renderingTableMap[f+vt][st]=null;for(f=c,c=this._renderingTableMap.length;f<c;f++)for(ft=this._renderingTableMap[f],e=0,l=ft.length;e<l;e++)d=ft[e],d&&(d.type=="NORMAL"||d.trIdx==0||(d.trIdx-=fi));this._renderingTableMap.splice(h*bt+i.top,fi)}for(s.trIdx.splice(i.top,i.bottom-i.top+1),yt=0,si=wt.length;yt<si;yt++)for(gt=wt[yt],pt=0,hi=gt.length;pt<hi;pt++)delete s[gt[pt].id];for(ht=et.length-1;ht>-1;ht--)s.trIdx[ht]=h*et.length+ht}var li=i.top,ai=bt-(i.bottom-i.top+1),h=g.length-1,ot=-1;for(this.optCommon.columnType==this.constValue.columnType.multi&&(k=this.getSectionRowIndex(n,t),h=k.endRowIndex,ot=k.startRowIndex-1);h>ot;h--){var lt=g[h],dt=lt[this.constValue.keyColumnPropertyName],s=this._trMap[dt],ci=n;lt[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate&&(ci=this.tfootType);this.view.setRenderMode(this.constValue.renderMode.removeRowAt);this.view.makeViewDataGroupRows(a[v],dt,{groupRowIdx:li,groupRowLen:ai,columnStartIdx:0,columnEndLen:nt,dataRowIndex:h,prevRowId:h==0?null:g[h-1],nextRowId:h==ot-1?null:g[h+1],trIdx:s.trIdx,tableIndex:s.tableIndex,tempSectionType:ci,etcInfo:{madeTbodyRowCount:kt,madeTfootRowCount:0}});this.view.setRenderMode(this.constValue.renderMode.none)}}}},removeAutoMergeInfo:function(){for(var f,e,o,r,i=[this.theadType,this.tbodyType,this.tfootType],u,n,t=0,s=i.length;t<s;t++)if(u=this.getAll(i[t]),u&&u.length)for(n=this.dataColumn.getDetailSections(i[t]),f=0,e=u.length;f<e;f++)o=u[f],r=o[this.constValue.rowVariableNames.mergeSet],r&&r.length&&((n.contains(this.constValue.sectionSeparateValue.subtot1slip)||n.contains(this.constValue.sectionSeparateValue.subtot1)||n.contains(this.constValue.sectionSeparateValue.subtot2slip)||n.contains(this.constValue.sectionSeparateValue.subtot2)||n.contains(this.constValue.sectionSeparateValue.subtot3slip)||n.contains(this.constValue.sectionSeparateValue.subtot3)||n.contains(this.constValue.sectionSeparateValue.subtot4slip)||n.contains(this.constValue.sectionSeparateValue.subtot4)||n.contains(this.constValue.sectionSeparateValue.subtot5slip)||n.contains(this.constValue.sectionSeparateValue.subtot5))&&this.removeDuplicationMergeSet(i[t],i[t],[this.constValue.sectionSeparateValue.subtot1slip,this.constValue.sectionSeparateValue.subtot1,this.constValue.sectionSeparateValue.subtot2slip,this.constValue.sectionSeparateValue.subtot2,this.constValue.sectionSeparateValue.subtot3slip,this.constValue.sectionSeparateValue.subtot3,this.constValue.sectionSeparateValue.subtot4slip,this.constValue.sectionSeparateValue.subtot4,this.constValue.sectionSeparateValue.subtot5slip,this.constValue.sectionSeparateValue.subtot5],r),(n.contains(this.constValue.sectionSeparateValue.pagetotslip)||n.contains(this.constValue.sectionSeparateValue.pagetot))&&this.removeDuplicationMergeSet(i[t],i[t],[this.constValue.sectionSeparateValue.pagetotslip,this.constValue.sectionSeparateValue.pagetot],r),i[t]==this.tfootType&&(n.contains(this.constValue.sectionSeparateValue.slip)||n.contains(this.constValue.sectionSeparateValue.line))&&this.removeDuplicationMergeSet(i[t],i[t],[this.constValue.sectionSeparateValue.slip,this.constValue.sectionSeparateValue.line],r))},moveColumn:function(n,t){var d=this.__setting.getFormIsAutoMergeSpecialrow(),b,k,h,a,i,v,f,w,c,y;switch(n){case this.constValue.crossDirection.left:for(h=0,a=t.length;h<a;h++){i=t[h];this.setStructureInfo(i.fromSectionType);var p=this._keys[i.fromRowId],s=this.dataColumn.getSystemColumnCount(i.fromColumnSectionType||i.fromSectionType),o=null;if(o||(o=p[this.constValue.rowVariableNames.mergeSet]),v=this.optCommon.columnType==this.constValue.columnType.multi?i.fromColumnSectionType==this.tfootType?this.dataColumn.getAll(i.fromColumnSectionType||i.fromSectionType,this.constValue.returnType.multi):this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi):this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi),f=v[0].length,w=f-1,o){for(b=i.fromBoundary.top,k=i.fromBoundary.bottom,c=0,y=o.length;c<y;c++){var e=o[c],l=e[this.constValue.rowVariableNames.mergeStartIndex],r=Math.floor(l/f),u=l%f;i.fromSectionType==this.tbodyType&&r>0&&(u+=s);this.constValue.selector&&i.moveMethod==this.constValue.selector.selectionType.allHorizontal?i.fromBoundary.left<=u&&i.fromBoundary.right>=u?e[this.constValue.rowVariableNames.mergeStartIndex]-=i.fromBoundary.left-i.toBoundary.left:i.toBoundary.left<=u&&i.fromBoundary.right>=u&&(e[this.constValue.rowVariableNames.mergeStartIndex]+=i.fromBoundary.right-i.fromBoundary.left+1):b<=r&&k>=r&&(i.fromBoundary.left<=u&&i.fromBoundary.right>=u?e[this.constValue.rowVariableNames.mergeStartIndex]-=i.fromBoundary.left-i.toBoundary.left:i.toBoundary.left<=u&&i.fromBoundary.right>=u&&(e[this.constValue.rowVariableNames.mergeStartIndex]+=i.fromBoundary.right-i.fromBoundary.left+1))}this.dataUtil.singleArraySort(o)}}break;case this.constValue.crossDirection.right:for(h=0,a=t.length;h<a;h++){i=t[h];this.setStructureInfo(i.fromSectionType);var p=this._keys[i.fromRowId],s=this.dataColumn.getSystemColumnCount(i.fromColumnSectionType||i.fromSectionType),o=null;if(o||(o=p[this.constValue.rowVariableNames.mergeSet]),v=this.optCommon.columnType==this.constValue.columnType.multi?i.fromColumnSectionType==this.tfootType?this.dataColumn.getAll(i.fromColumnSectionType||i.fromSectionType,this.constValue.returnType.multi):this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi):this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi),f=v[0].length,w=f-1,o){for(b=i.fromBoundary.top,k=i.fromBoundary.bottom,c=0,y=o.length;c<y;c++){var e=o[c],l=e[this.constValue.rowVariableNames.mergeStartIndex],r=Math.floor(l/f),u=l%f;i.fromSectionType==this.tbodyType&&r>0&&(u+=s);this.constValue.selector&&i.moveMethod==this.constValue.selector.selectionType.allHorizontal?i.fromBoundary.left<=u&&i.fromBoundary.right>=u?e[this.constValue.rowVariableNames.mergeStartIndex]+=i.toBoundary.right-i.fromBoundary.right:i.fromBoundary.left<=u&&i.toBoundary.right>=u&&(e[this.constValue.rowVariableNames.mergeStartIndex]-=i.fromBoundary.right-i.fromBoundary.left+1):b<=r&&k>=r&&(i.fromBoundary.left<=u&&i.fromBoundary.right>=u?e[this.constValue.rowVariableNames.mergeStartIndex]+=i.toBoundary.right-i.fromBoundary.right:i.fromBoundary.left<=u&&i.toBoundary.right>=u&&(e[this.constValue.rowVariableNames.mergeStartIndex]-=i.fromBoundary.right-i.fromBoundary.left+1))}this.dataUtil.singleArraySort(o)}}break;case this.constValue.crossDirection.up:for(h=0,a=t.length;h<a;h++){i=t[h];this.setStructureInfo(i.fromSectionType);var p=this._keys[i.fromRowId],s=this.dataColumn.getSystemColumnCount(i.fromSectionType),o=null;if(o||(o=p[this.constValue.rowVariableNames.mergeSet]),v=this.optCommon.columnType==this.constValue.columnType.multi?i.fromColumnSectionType==this.tfootType?this.dataColumn.getAll(i.fromColumnSectionType||i.fromSectionType,this.constValue.returnType.multi):this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi):this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi),f=v[0].length,w=f-1,o)for(c=0,y=o.length;c<y;c++){var e=o[c],l=e[this.constValue.rowVariableNames.mergeStartIndex],r=Math.floor(l/f),u=l%f;s>0&&s>l||(this.optForm.version==this.constValue.formVersion.fourth?(i.fromBoundary.top>i.toBoundary.top&&(i.fromSectionType==this.theadType?i.fromBoundary.top<=r&&i.fromBoundary.bottom>=r&&i.fromBoundary.left<=u&&i.fromBoundary.right>=u?e[this.constValue.rowVariableNames.mergeStartIndex]-=(i.fromBoundary.top-i.toBoundary.top)*f:i.toBoundary.top<=r&&i.fromBoundary.top>r&&i.fromBoundary.left<=u&&i.fromBoundary.right>=u&&(e[this.constValue.rowVariableNames.mergeStartIndex]+=(i.fromBoundary.bottom-i.fromBoundary.top+1)*f):i.fromBoundary.top<=r&&i.fromBoundary.bottom>=r&&i.fromBoundary.left<=u&&i.fromBoundary.right>=u?e[this.constValue.rowVariableNames.mergeStartIndex]-=(i.fromBoundary.top-i.toBoundary.top)*(f-s):i.toBoundary.top<=r&&i.fromBoundary.top>r&&i.fromBoundary.left<=u&&i.fromBoundary.right>=u&&(e[this.constValue.rowVariableNames.mergeStartIndex]+=(i.fromBoundary.bottom-i.fromBoundary.top+1)*(f-s))),i.fromBoundary.top<i.toBoundary.top&&(i.fromSectionType==this.theadType?i.fromBoundary.top<=r&&i.fromBoundary.bottom>=r&&i.fromBoundary.left<=u&&i.fromBoundary.right>=u?e[this.constValue.rowVariableNames.mergeStartIndex]-=(i.fromBoundary.bottom-i.toBoundary.top)*f:i.fromBoundary.bottom<r&&i.toBoundary.bottom>=r&&i.toBoundary.left<=u&&i.toBoundary.right>=u&&(e[this.constValue.rowVariableNames.mergeStartIndex]-=(i.fromBoundary.bottom-i.fromBoundary.top+1)*f):i.fromBoundary.top<=r&&i.fromBoundary.bottom>=r&&i.fromBoundary.left<=u&&i.fromBoundary.right>=u?e[this.constValue.rowVariableNames.mergeStartIndex]-=(i.fromBoundary.bottom-i.toBoundary.top)*(f-s):i.fromBoundary.bottom<r&&i.toBoundary.bottom>=r&&i.toBoundary.left<=u&&i.toBoundary.right>=u&&(e[this.constValue.rowVariableNames.mergeStartIndex]-=(i.fromBoundary.bottom-i.fromBoundary.top+1)*(f-s)))):i.fromSectionType==this.theadType?i.fromBoundary.top<=r&&i.fromBoundary.bottom>=r?e[this.constValue.rowVariableNames.mergeStartIndex]-=(i.fromBoundary.top-i.toBoundary.top)*f:i.toBoundary.top<=r&&i.toBoundary.bottom>=r&&i.toBoundary.left<=u&&i.toBoundary.right>=u&&(e[this.constValue.rowVariableNames.mergeStartIndex]+=(i.fromBoundary.bottom-i.fromBoundary.top+1)*f):i.fromBoundary.top<=r&&i.fromBoundary.bottom>=r?e[this.constValue.rowVariableNames.mergeStartIndex]-=(i.fromBoundary.top-i.toBoundary.top)*(f-s):i.toBoundary.top<=r&&i.toBoundary.bottom>=r&&(e[this.constValue.rowVariableNames.mergeStartIndex]+=(i.fromBoundary.bottom-i.fromBoundary.top+1)*(f-s)))}}break;case this.constValue.crossDirection.down:for(h=0,a=t.length;h<a;h++){i=t[h];this.setStructureInfo(i.fromSectionType);var p=this._keys[i.fromRowId],s=this.dataColumn.getSystemColumnCount(i.fromSectionType),o=null;if(o||(o=p[this.constValue.rowVariableNames.mergeSet]),v=this.optCommon.columnType==this.constValue.columnType.multi?i.fromColumnSectionType==this.tfootType?this.dataColumn.getAll(i.fromColumnSectionType||i.fromSectionType,this.constValue.returnType.multi):this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi):this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi),f=v[0].length,w=f-1,o)for(c=0,y=o.length;c<y;c++){var e=o[c],l=e[this.constValue.rowVariableNames.mergeStartIndex],r=Math.floor(l/f),u=l%f;s>0&&s>l||(this.optForm.version==this.constValue.formVersion.fourth?i.fromBoundary.top<i.toBoundary.top?i.fromSectionType==this.theadType?i.fromBoundary.top<=r&&i.fromBoundary.bottom>=r&&i.fromBoundary.left<=u&&i.fromBoundary.right>=u?e[this.constValue.rowVariableNames.mergeStartIndex]+=(i.toBoundary.bottom-i.fromBoundary.bottom)*f:i.fromBoundary.bottom<r&&i.toBoundary.bottom>=r&&i.toBoundary.left<=u&&i.toBoundary.right>=u&&(e[this.constValue.rowVariableNames.mergeStartIndex]-=(i.fromBoundary.bottom-i.fromBoundary.top+1)*f):i.fromBoundary.top<=r&&i.fromBoundary.bottom>=r&&i.fromBoundary.left<=u&&i.fromBoundary.right>=u?e[this.constValue.rowVariableNames.mergeStartIndex]+=(i.toBoundary.bottom-i.fromBoundary.bottom)*(f-s):i.fromBoundary.bottom<r&&i.toBoundary.bottom>=r&&i.toBoundary.left<=u&&i.toBoundary.right>=u&&(e[this.constValue.rowVariableNames.mergeStartIndex]-=(i.fromBoundary.bottom-i.fromBoundary.top+1)*(f-s)):i.fromBoundary.top>i.toBoundary.top&&(i.fromSectionType==this.theadType?i.fromBoundary.top<=r&&i.fromBoundary.bottom>=r&&i.fromBoundary.left<=u&&i.fromBoundary.right>=u?e[this.constValue.rowVariableNames.mergeStartIndex]+=(i.toBoundary.bottom-i.fromBoundary.top)*f:i.toBoundary.top<=r&&i.toBoundary.bottom>=r&&i.toBoundary.left<=u&&i.toBoundary.right>=u&&(e[this.constValue.rowVariableNames.mergeStartIndex]+=(i.fromBoundary.bottom-i.fromBoundary.top+1)*f):i.fromBoundary.top<=r&&i.fromBoundary.bottom>=r&&i.fromBoundary.left<=u&&i.fromBoundary.right>=u?e[this.constValue.rowVariableNames.mergeStartIndex]+=(i.toBoundary.bottom-i.fromBoundary.top)*(f-s):i.toBoundary.top<=r&&i.toBoundary.bottom>=r&&i.toBoundary.left<=u&&i.toBoundary.right>=u&&(e[this.constValue.rowVariableNames.mergeStartIndex]+=(i.fromBoundary.bottom-i.fromBoundary.top+1)*(f-s))):i.fromSectionType==this.theadType?i.fromBoundary.top<=r&&i.fromBoundary.bottom>=r?e[this.constValue.rowVariableNames.mergeStartIndex]+=(i.toBoundary.bottom-i.fromBoundary.bottom)*f:i.toBoundary.top<=r&&i.toBoundary.bottom>=r&&(e[this.constValue.rowVariableNames.mergeStartIndex]-=(i.fromBoundary.bottom-i.fromBoundary.top+1)*f):i.fromBoundary.top<=r&&i.fromBoundary.bottom>=r?e[this.constValue.rowVariableNames.mergeStartIndex]+=(i.toBoundary.bottom-i.fromBoundary.bottom)*(f-s):i.toBoundary.top<=r&&i.toBoundary.bottom>=r&&(e[this.constValue.rowVariableNames.mergeStartIndex]-=(i.fromBoundary.bottom-i.fromBoundary.top+1)*(f-s)))}}}},merge:function(n,t,i,r,u){var e,ot,o,tt,b,k,ut,f,d,p,g,nt,c,ft,l,et,a,ht;for(u=_.extend({isResetValue:!0},u||{}),e=[this.theadType,this.tbodyType,this.tfootType],this.constValue.columnType.multi==this.optCommon.columnType&&(e=[n]),ot=this,o=0,tt=e.length;o<tt;o++){this.setStructureInfo(e[o]);var s=this.dataColumn.getAll(t||e[o],this.constValue.returnType.multi),w=s[0].length,ct=w-1,st=this.getViewDataRenderingTableMapAll(e[o]),h,it=this._datas,lt=this.dataColumn.getSystemColumnCount(e[o]),v=_.extend({},r,this.getHorizontalExpansionOfSelectionBasedOnMergeInformation(n,t,r)),y=0,rt=it.length;for(this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tbodyType&&(b=this.getSectionRowIndex(n,t),y=b.startRowIndex,rt=b.endRowCount),k=_.isBoolean(u[this.constValue.rowVariableNames.isAutoMerge]);y<rt;y++)for(h=it[y],h[this.constValue.rowVariableNames.mergeSet]||(h[this.constValue.rowVariableNames.mergeSet]=[]),ut=h[this.constValue.keyColumnPropertyName],mergeSet=h[this.constValue.rowVariableNames.mergeSet],f={},k&&(f=mergeSet.find(function(n){return n[this.constValue.rowVariableNames.isAutoMerge]}.bind(this)),f?(f[this.constValue.rowVariableNames.isAutoMerge]=!1,f=_.cloneDeep(f)):f={}),d=r,this.constValue.columnType.multi==this.optCommon.columnType&&t==this.constValue.sectionType.tfoot&&(d=i),this.extendMergeInfoOverlayIndex(n,t,d,mergeSet),f[this.constValue.rowVariableNames.mergeUseOwn]=_.isBoolean(u[this.constValue.rowVariableNames.mergeUseOwn])?u[this.constValue.rowVariableNames.mergeUseOwn]:!0,f[this.constValue.rowVariableNames.styleUseOwn]=_.isBoolean(u[this.constValue.rowVariableNames.styleUseOwn])?u[this.constValue.rowVariableNames.styleUseOwn]:!0,f[this.constValue.rowVariableNames.mergeStartIndex]=i.top*w+v.left,f[this.constValue.rowVariableNames.colspanCount]=v.right-v.left+1,f[this.constValue.rowVariableNames.rowspanCount]=i.bottom-i.top+1,k&&(f[this.constValue.rowVariableNames.isAutoMerge]=u[this.constValue.rowVariableNames.isAutoMerge]),f.columnIdx=i.top*w+v.left,f.columnId=s[i.top][i.left].id,f.rowId=ut,f.detailSectionType=s[i.top][i.left].GROUP_FLAG,this.optCommon.columnType==this.constValue.columnType.single?(f.columnSectionType=e[o],f[this.constValue.rowVariableNames.rowType]=this.makeRowType(e[o],e[o],s[i.top][i.left].GROUP_FLAG)):this.optCommon.columnType==this.constValue.columnType.multi&&(f.columnSectionType=t||e[o],f[this.constValue.rowVariableNames.rowType]=this.makeRowType(e[o],t,s[i.top][i.left].GROUP_FLAG)),f[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.pagetotal?f[this.constValue.rowVariableNames.rowTitle]=this.optRow[t||n].pageTotal1MergeInfoRowTitle:f[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.total&&(f[this.constValue.rowVariableNames.rowTitle]=this.optRow[t||n].dataMergeInfoRowTitle),(f[this.constValue.rowVariableNames.colspanCount]>1||f[this.constValue.rowVariableNames.rowspanCount]>1||f[this.constValue.rowVariableNames.isAutoMerge])&&(this.hasDuplicateMergeInformation(mergeSet,f)||mergeSet.push(f)),this.dataUtil.singleArraySort(mergeSet),p=i.top,g=i.bottom,this.optCommon.columnType==this.constValue.columnType.multi&&t==this.tfootType&&(nt=this.dataColumn.getAll(this.tbodyType,this.constValue.returnType.multi),p+=nt.length,g+=nt.length),c=p,ft=g;c<=ft;c++)for(l=i.left,et=i.right;l<=et;l++)(c!=p||l!=i.left)&&(a=st[c][l],ht=this.dataColumn.getById(a.columnSectionType,a.columnId),u.isResetValue&&this.setValue(e[o],a.columnId,a.rowId,"",{isRunChange:!1,isRunComplete:!1}))}},divide:function(n,t,i){var f=[this.theadType,this.tbodyType,this.tfootType],c,u,v,r,l,a,h;for(this.constValue.columnType.multi==this.optCommon.columnType&&(f=[n]),c=this,u=0,v=f.length;u<v;u++){this.setStructureInfo(f[u]);var y=this._datas,p=this.dataColumn.getAll(t||f[u],this.constValue.returnType.multi),e=p[0].length,o=[],s=this.dataColumn.getSystemColumnCount(f[u]);for(r=i.top,l=i.bottom;r<=l;r++)f[u]==this.theadType?o.push({startIndex:r*e+i.left,endIndex:r*e+i.left+(i.right-i.left)}):s>0?r==0?o.push({startIndex:i.left,endIndex:i.left+(i.right-i.left)}):o.push({startIndex:e+(r-1)*(e-s)+(i.left-s),endIndex:e+(r-1)*(e-s)+(i.left-s)+(i.right-i.left)}):o.push({startIndex:r*e+i.left,endIndex:r*e+i.left+(i.right-i.left)});for(r=0,l=y.length,this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tbodyType&&(a=this.getSectionRowIndex(n,t),r=a.startRowIndex,l=a.endRowCount);r<l;r++)row=y[r],h=null,f[u]==this.tfootType&&this.optCommon.columnType==this.constValue.columnType.single&&this.optCommon.gridType==this.constValue.gridType.editableForm&&this.optRow[f[u]].specialRowCount>0&&(this.optRow[f[u]].additionalDatas||(this.optRow[f[u]].additionalDatas={}),this.optRow[f[u]].additionalDatas[this.constValue.rowVariableNames.mergeSet]||(this.optRow[f[u]].additionalDatas[this.constValue.rowVariableNames.mergeSet]=[]),h=this.optRow[f[u]].additionalDatas[this.constValue.rowVariableNames.mergeSet],h&&h.remove(function(n){var t=n[c.constValue.rowVariableNames.mergeStartIndex];return o.contains(t)})),h=row[this.constValue.rowVariableNames.mergeSet],h&&h.remove(function(n){var u=[],t=parseInt(n[c.constValue.rowVariableNames.mergeStartIndex],10),h=parseInt(n[c.constValue.rowVariableNames.rowspanCount]||1,10),v=parseInt(n[c.constValue.rowVariableNames.colspanCount]||1,10),w=h-1,y=v-1,f=t<e?0:1+Math.floor((t-e)/(e-s)),p=f+h,i,l,r,a;if(t<s)return!1;for(;f<p;f++)u.push({startIndex:t,endIndex:t+y});for(i=0,l=o.length;i<l;i++)for(r=0,a=u.length;r<a;r++)if(o[i].startIndex<=u[r].startIndex&&o[i].endIndex>=u[r].endIndex)return!0;return!1})}},removeColumn:function(n,t,i,r){for(var u,f,w,nt,v,it,rt,b,tt,ut,s,o,k={},d=[this.theadType,this.tbodyType,this.tfootType],y=0,et=d.length;y<et;y++){u=d[y];f=d[y];this.optCommon.columnType==this.constValue.columnType.multi&&this.tfootType==f&&(u=this.tbodyType);this.setStructureInfo(u);var h=this._datas,e=0,c=h.length;for(this.optCommon.columnType==this.constValue.columnType.multi&&(s=this.getSectionRowIndex(u,f),e=s.startRowIndex,c=s.endRowCount);e<c;e++){var p=h[e],g=p[this.constValue.keyColumnPropertyName],l=this._trMap[g],a=p[this.constValue.rowVariableNames.mergeSet];for(a&&this.recreateColumnMergeInformation(u,f,a,t,r[f].extendBoundary),w=this.dataColumn.getAll(f,this.constValue.returnType.multi),nt=w[0].length,v=0,it=l.trIdx.length;v<it;v++){for(rt=this._renderingTableMap[l.trIdx[v]],b=i.left;b<nt;b++)delete l[w[v][b].id];rt.splice(i.left)}}for(a=this.optRow[u].additionalDatas&&this.optRow[u].additionalDatas[this.constValue.rowVariableNames.mergeSet],a&&this.recreateColumnMergeInformation(u,f,a,t,r[f].extendBoundary),this.optCommon.columnType==this.constValue.columnType.multi?(o=this.dataColumn.__remove(f,t,i),o&&o[f]&&(k[f]=o[f])):(o=this.dataColumn.__remove(u,t,i),o&&o[u]&&(k[u]=o[u])),tt=0,ut=0,e=0,c=h.length,this.optCommon.columnType==this.constValue.columnType.multi&&(s=this.getSectionRowIndex(u,f),e=s.startRowIndex,c=s.endRowCount,this.tfootType==f&&(tt=s.endRowCount-s.startRowIndex));e<c;e++){var p=h[e],g=p[this.constValue.keyColumnPropertyName],l=this._trMap[g],ft=u;p[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate&&(ft=this.tfootType);this.view.setRenderMode(this.constValue.renderMode.removeColumn);this.view.makeViewDataGroupRows(u,g,{groupRowIdx:0,groupRowLen:w.length,columnStartIdx:i.left,columnEndLen:nt-(t.right-t.left+1),dataRowIndex:e,prevRowId:e==0?null:h[e-1],nextRowId:e==c-1?null:h[e+1],trIdx:l.trIdx,tableIndex:l.tableIndex,tempSectionType:ft,etcInfo:{madeTbodyRowCount:tt,madeTfootRowCount:ut}});this.view.setRenderMode(this.constValue.renderMode.none)}}return k},removeTrMaps:function(n,t){var i,r,e,o,u,c;this.setStructureInfo(n);var f=this.getAll(n),s,l=t.length,h=0;for(i=0,r=t.length;i<r;i++)s=f[this._trMap[t[i]].dataIdx],h+=this._trMap[t[i]].trIdx.length,delete this._trMap[t[i]];for(i=s[this.constValue.rowCountColumnPropertyName],r=f.length;i<r;i++)for(e=f[i][this.constValue.keyColumnPropertyName],this._trMap[e].dataIdx-=l,o=this._trMap[e].trIdx,u=0,c=o.length;u<c;u++)o[u]-=h},removeTrMap:function(n,t){var i,o,f,e,r,s;this.setStructureInfo(n);var u=this.getAll(n),h=u[this._trMap[t].dataIdx],c=this._trMap[t].trIdx.length;for(this.view.removeViewDataRemoveMadeRow(n,t),i=h[this.constValue.rowCountColumnPropertyName],o=u.length;i<o;i++)for(f=u[i][this.constValue.keyColumnPropertyName],this._trMap[f].dataIdx-=1,e=this.__datas[n].trMap[f].trIdx,r=0,s=e.length;r<s;r++)e[r]-=c;delete this._trMap[t]},sortByKeyList:function(n,t){var e,s,r,u,h,f,i,o;for(this.setStructureInfo(n),e=[],i=0,o=t.length;i<o;i++)r=t[i],u=this.getIndexById(n,r),e.push({destinationIndex:i,targetId:r});for(i=0,o=e.length;i<o;i++)(s=e[i],r=s.targetId,u=this.getIndexById(n,r),f=s.destinationIndex,h=this.getIdByIndex(n,f),typeof u=="number"&&typeof f=="number"&&u!=f)&&this.moveBulkRows(n,u,f,0)},moveUpByKeyList:function(n,t){var f,o,s,u,r,e,i;for(this.setStructureInfo(n),r=[],e=[],i=0;i<t.length;i++)f=t[i],r.push(this.getIndexById(n,f));for(r=r.sort(this.AscendingOrder),i=0;i<r.length;i++)f=t[i],o=r[i],u=o-1,s=this.getIdByIndex(n,u),!e.contains(u)&&u>=0?(this.move(n,f,s),e.push(u)):e.push(o)},moveDownByKeyList:function(n,t){var i;this.setStructureInfo(n);var r,e,f,o,u=[],s={},h=this._datas.length;for(i=0;i<t.length;i++)r=t[i],u.push({index:this.getIndexById(n,r),rowId:r});for(u.sort(function(n,t){return n.index>t.index?1:n.index<t.index?-1:0}),i=u.length-1;i>=0;i--)r=u[i].rowId,e=u[i].index,o=e+1,f=this.getIdByIndex(n,o),f&&!s[f]&&this.move(n,r,f),s[r]=!0},insertUpByKeyList:function(n,t){var u,r,f,i;for(this.view.setRenderMode("addRow"),r={addDirection:"up"},f=this.getAll(n),i=0;i<t.length;i++)u=this.getIndexById(n,t[i]),r.isFirstRow=i===0,r.isLastRow=i===t.length-1,this.__core.fn.addRow(n,1,u,r)},moveBulkRows:function(n,t,i,r){this.setStructureInfo(n);var u=t<i?"down":"up",f=this.getIdByIndex(n,t),e=this.getIdByIndex(n,i);this.__core.transaction.push("row","moveBulkRows",[n,u,f,e]);this.moveBulkTableMap(n,t,i,u,r)},moveBulkTableMap:function(n,t,i,r,u){var c,l,v,y,e,f;this.setStructureInfo(n);var s=this._trMap,a=this.getIdByIndex(n,t),h=[],p=this.dataColumn.getAll(n,this.constValue.returnType.multi),o=p.length>0?p.length:1;if(this.optCommon.gridStyle==this.constValue.gridStyle.tree&&(h=this.dataTree.getChildRowList(a,{isRetrieveKey:!0}),u=h.length),r=="down"){if(s[a]){for(f=0;f<o;f++)s[a].trIdx[f]=(i-u)*o+f;s[a].dataIdx=i-u}for(e=0;e<u;e++)if(s[h[e]]){for(f=0;f<o;f++)s[h[e]].trIdx[f]=(i+e-u+1)*o+f;s[h[e]].dataIdx=i+e-u+1}for(c=i;c>t+u;c--)if(l=this.getIdByIndex(n,c),s[l]){for(f=0;f<o;f++)s[l].trIdx[f]-=(u+1)*o;s[l].dataIdx-=u+1}for(v=this._datas.splice(t,u+1),y=this._renderingTableMap.splice(t*o,(u+1)*o),e=0;e<v.length;e++){for(this._datas.splice(i+e+u,0,v[e]),f=0;f<o;f++)this._renderingTableMap.splice(i+e*o+f,0,y[e*o+f]);this._renderingTableMap.splice((i+e+u)*o+f,0,y[e*o+f])}}else{if(s[a]){for(f=0;f<o;f++)s[a].trIdx[f]=i*o+f;s[a].dataIdx=i}for(e=0;e<u;e++)if(s[h[e]]){for(f=0;f<o;f++)s[h[e]].trIdx[f]=(i+e+1)*o+f;s[h[e]].dataIdx=i+e+1}for(c=i;c<t;c++)if(l=this.getIdByIndex(n,c),s[l]){for(f=0;f<o;f++)s[l].trIdx[f]+=(u+1)*o;s[l].dataIdx+=u+1}for(v=this._datas.splice(t,u+1),y=this._renderingTableMap.splice(t*o,(u+1)*o),e=0;e<v.length;e++)for(this._datas.splice(i+e,0,v[e]),f=0;f<o;f++)this._renderingTableMap.splice(i+e*o+f,0,y[e*o+f])}},move:function(n,t,i){this.setStructureInfo(n);var r=this.getIndexById(n,t),u=this.getIndexById(n,i),f=r<u?"down":"up",e=this._datas.splice(r,1)[0];this._datas.splice(u,0,e);this.__core.transaction.push("row","move",[n,f,t,i]);this.moveTableMap(n,r,u)},DescendingOrder:function(n,t){return n<t?1:n>t?-1:0},AscendingOrder:function(n,t){return n>t?1:n<t?-1:0},syncColumnFormatByMergeset:function(n){var a=this.getAll(n),e,v,o,p,i,b,u,k;if(this.optCommon.columnType==this.constValue.columnType.single)for(e=0,v=a.length;e<v;e++){var d=a[e],t=this.dataColumn.getAll(this.theadType,this.constValue.returnType.multi),y=t[0].length,h=d[this.constValue.rowVariableNames.mergeSet];if(h)for(o=0,p=h.length;o<p;o++){var s=h[o],nt=s[this.constValue.rowVariableNames.isAutoMerge],w=s[this.constValue.rowVariableNames.mergeStartIndex],r=Math.floor(w/y),f=w%y,c=s[this.constValue.rowVariableNames.rowspanCount]||1,tt=c-1,l=s[this.constValue.rowVariableNames.colspanCount]||1,it=l-1;if(c!=1||l!=1)for(i=r,b=r+c;i<b;i++)for(u=f,k=f+l;u<k;u++)if(nt)this.dataColumn.cloneColumnFormatByBoundary({sectionType:n,columnSectionType:this.theadType,boundary:{top:r,left:f,bottom:r+tt,right:f+it},filter:function(t){if(this.optCommon.columnType==this.constValue.columnType.single)return t.ALIGN_USE_BODY_TF=="0"||t.ALIGN_USE_FOOT_TF=="0"||t.FONT_USE_BODY_TF=="0"||t.FONT_USE_FOOT_TF=="0";if(this.optCommon.columnType==this.constValue.columnType.multi){if(n==this.theadType)return t.ALIGN_USE_HEAD_TF=="0"||t.FONT_USE_HEAD_TF=="0";if(n==this.tbodyType)return t.ALIGN_USE_BODY_TF=="0"||t.FONT_USE_BODY_TF=="0";if(n==this.tfootType)return t.ALIGN_USE_FOOT_TF=="0"||t.FONT_USE_FOOT_TF=="0"}return!1}.bind(this)},{sectionType:n,columnSectionType:this.theadType,columnId:t[i][u].id});else{if(i==r&&u==f)continue;if(!t[r]||!t[r][f])continue;if(!t[i]||!t[i][u])continue;this.dataColumn.cloneColumnFormat(n,this.theadType,t[r][f].id,n,this.theadType,t[i][u].id)}}}else if(this.optCommon.columnType==this.constValue.columnType.multi)for(e=0,v=a.length;e<v;e++){var d=a[e],rt=d[this.constValue.rowVariableNames.rowType],g=rt==this.constValue.rowType.separate?this.tfootType:n,t=this.dataColumn.getAll(g,this.constValue.returnType.multi),y=t[0].length,h=d[this.constValue.rowVariableNames.mergeSet];if(h)for(o=0,p=h.length;o<p;o++){var s=h[o],w=s[this.constValue.rowVariableNames.mergeStartIndex],r=Math.floor(w/y),f=w%y,c=s[this.constValue.rowVariableNames.rowspanCount]||1,tt=c-1,l=s[this.constValue.rowVariableNames.colspanCount]||1,it=l-1;if(c!=1||l!=1)for(i=r,b=r+c;i<b;i++)for(u=f,k=f+l;u<k;u++)(i!=r||u!=f)&&t[r]&&t[r][f]&&t[i]&&t[i][u]&&this.dataColumn.cloneColumnFormat(n,g,t[r][f].id,n,g,t[i][u].id)}}},moveTableMap:function(n,t,i){var r,s,u,l,f,a;this.setStructureInfo(n);var h,v=this._datas,c=this._trMap,e=[t,i],y=this.dataColumn.getAll(n,this.constValue.returnType.multi),o=y.length;for(e=e.sort(this.AscendingOrder),r=e[0];r<=e[1];r++){for(h=v[r],targetId=h[this.constValue.keyColumnPropertyName],h[this.constValue.rowCountColumnPropertyName]=r+1,c[targetId].dataIdx=r,c[targetId].trIdx=[],s=0;s<o;s++)c[targetId].trIdx.push(r*o+s);for(u=r*o,l=(r+1)*o;u<l;u++)for(f=0,a=this._renderingTableMap[u].length;f<a;f++)this._renderingTableMap[u][f].dataIdx=r,this._renderingTableMap[u][f].trIdx=r}},clear:function(n,t,i){var d=i.changeCascade||!1,g=i.changeCascade||!1,w=i.deleteImpossibilityColumnIdList||null,nt=i.setDefaultValue||!1,it=i.remainEditableState==undefined||i.remainEditableState==null?!0:i.remainEditableState,l=this.dataCheckbox.getCheckboxUseColumnList(n),f,o,h,b,a,k,c,u,e,y,p;this.setStructureInfo(n);var v=this.dataColumn.getAll(n,this.constValue.returnType.multi),s=this.getAdditionalDatas(n),tt=i.ignoreColumnList||[],r;if([this.constValue.gridType.editable,this.constValue.gridType.editableForm].contains(this.optCommon.gridType)&&this.optRow[n].additionalDatas)for(f in s)s.hasOwnProperty(f)&&(r=typeof s[f]=="object"?Object.clone(s[f]):s[f],this.setValue(n,f,t,r,{isRunChange:!1,isRunComplete:!1}));for(o=0;o<l.length;o++)l[o].use&&this.dataCheckbox.isChecked(n,l[o].columnId,t)&&this.dataCheckbox.executeCheckbox(n,l[o].columnId,t,!1);for(h=0,b=v.length;h<b;h++)for(a=0,k=v[h].length;a<k;a++)r="",u=v[h][a],e=this.getViewDataCellMap(n,u.id,t),e.cellInfo.adjustmentValue==1||tt.contains(u.id)||(w?w.contains[u.propertyName]&&(r=row[u.propertyName]):u.columnStatus==ecount.grid.constValue.columnStatus.deleteImpossibility&&(r=rowItem[u.propertyName]),nt?this.optRow[n].defaultValue&&this.optRow[n].defaultValue[u.propertyName]?(r=this.optRow[n].defaultValue[u.propertyName],y=columnType==this.constValue.columnType.multi?this.data.column.getConvertor(n,this.constValue.dataType.modeView,f):this.data.column.getConvertor(this.tbodyType,this.constValue.dataType.modeView,f),r=y&&y(r,u).replace(this.constValue.thousandsPattern,"")||r):e.cellInfo.controlType=="widget.date"||e.cellInfo.controlType=="widget.multiDate":e.cellInfo.editControlType=="widget.date"||e.cellInfo.editControlType=="widget.multiDate"||e.cellInfo.editControlType=="widget.select"&&(p=this.view.__datas[n].widgetInstances[e.cellInfo.editControlId],p&&(c=p.getValueByIndex(0),r=typeof c=="object"&&c.constructor!=Array?c.value:c||"")),this.setValue(n,u.id,t,r,{isRunChange:d,isRunComplete:g}))},getNextRow:function(n,t){this.setStructureInfo(n);var i=parseInt(this._keys[t][this.constValue.rowCountColumnPropertyName],10);return i>=this._datas.length?null:this._datas[i]},getPrevRow:function(n,t){this.setStructureInfo(n);var i=parseInt(this._keys[t][this.constValue.rowCountColumnPropertyName],10)-2;return i<0?null:this._datas[i]},setValue:function(n,t,i,r,u){var tt,it,rt,a;u=u||{};var ut=$.isBoolean(u.isRunChange)?u.isRunChange:!0,ft=$.isBoolean(u.isRunComplete)?u.isRunComplete:!0,et=$.isBoolean(u.isForceRunChange)?u.isForceRunChange:!1,k=this.dataColumn.__datas[n].propertyNormalizer,f=n;this.optForm.version==this.constValue.formVersion.fourth&&this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tfootType&&(n=this.tbodyType);this.setStructureInfo(n);var e=this.data.column.getById(f,t),p=e&&e.propertyName||(k?k(t):t.toLowerCase()),o=this.getById(n,i),ot=this.getIndexById(n,i),st=this._trMap[i]&&this._trMap[i][t]&&this._trMap[i][t].columnRowIdx,c=this.getDataById(n,ot),s,w,h=this.__core.data.row.getViewDataCellMap(n,t,i),v=h.cellInfo?h.cellInfo.controlType:"",lt=this.constValue.nativeControlInWidget[v],d=h.cellInfo?h.cellInfo.editControlType:"",y=!0,b=!1,ht=u.subDataIdx,ct=u.subControlType,g=h.cellInfo?h.cellInfo.columnIdx:null,nt=this._trMap[i]&&this._trMap[i].trIdx[st],l=$.isNull(g)?null:this._renderingTableMap[nt]&&this._renderingTableMap[nt][g];if(e&&l&&l[this.constValue.rowVariableNames.isAutoMerge]&&([this.constValue.sectionSeparateValue.line,this.constValue.sectionSeparateValue.slip].contains(e.GROUP_FLAG)?this.__setting.setRowDataMergeInfoRowTitle(f,r):[this.constValue.sectionSeparateValue.pagetot,this.constValue.sectionSeparateValue.pagetotslip].contains(e.GROUP_FLAG)?this.__setting.setRowPageTotal1MergeInfoRowTitle(f,r):[this.constValue.sectionSeparateValue.tsubtot1,this.constValue.sectionSeparateValue.tsubtot1slip].contains(e.GROUP_FLAG)?this.__setting.setRowTopSubtotal1MergeInfoRowTitle(f,r):[this.constValue.sectionSeparateValue.tsubtot2,this.constValue.sectionSeparateValue.tsubtot2slip].contains(e.GROUP_FLAG)?this.__setting.setRowTopSubtotal2MergeInfoRowTitle(f,r):[this.constValue.sectionSeparateValue.tsubtot3,this.constValue.sectionSeparateValue.tsubtot3slip].contains(e.GROUP_FLAG)?this.__setting.setRowTopSubtotal3MergeInfoRowTitle(f,r):[this.constValue.sectionSeparateValue.tsubtot4,this.constValue.sectionSeparateValue.tsubtot4slip].contains(e.GROUP_FLAG)?this.__setting.setRowTopSubtotal4MergeInfoRowTitle(f,r):[this.constValue.sectionSeparateValue.tsubtot5,this.constValue.sectionSeparateValue.tsubtot5slip].contains(e.GROUP_FLAG)?this.__setting.setRowTopSubtotal5MergeInfoRowTitle(f,r):[this.constValue.sectionSeparateValue.subtot1,this.constValue.sectionSeparateValue.subtot1slip].contains(e.GROUP_FLAG)?this.__setting.setRowBottomSubtotal1MergeInfoRowTitle(f,r):[this.constValue.sectionSeparateValue.subtot2,this.constValue.sectionSeparateValue.subtot2slip].contains(e.GROUP_FLAG)?this.__setting.setRowBottomSubtotal2MergeInfoRowTitle(f,r):[this.constValue.sectionSeparateValue.subtot3,this.constValue.sectionSeparateValue.subtot3slip].contains(e.GROUP_FLAG)?this.__setting.setRowBottomSubtotal3MergeInfoRowTitle(f,r):[this.constValue.sectionSeparateValue.subtot4,this.constValue.sectionSeparateValue.subtot4slip].contains(e.GROUP_FLAG)?this.__setting.setRowBottomSubtotal4MergeInfoRowTitle(f,r):[this.constValue.sectionSeparateValue.subtot5,this.constValue.sectionSeparateValue.subtot5slip].contains(e.GROUP_FLAG)&&this.__setting.setRowBottomSubtotal5MergeInfoRowTitle(f,r)),l&&l.type=="MERGE"&&l[this.constValue.rowVariableNames.mergeUseOwn]!=!0&&(l[this.constValue.rowVariableNames.rowTitle]=r),this.constValue.controlInWidget[d]&&(v=d),!o||!c){ecount.gridV2.util.warn("ecount.gridV2.data.row 객체 setValue 함수에서 rowId: {0} 를 찾지 못했습니다.",i);return}return(r=r==undefined?"":r,!u.isRemove&&(tt=["beforeChange",f,t,v,"custom"].join(ecount.constValue.gridDelimiter),this.__core.events.exist(tt)&&(a={type:"gridEvent.rowItem.beforeChange"},y=this.emitCustomEvent(f,t,i,"beforeChange",a,{newValue:r}),y===!1)))?{continueToChange:y}:(s=o[p],w=o,o[p]=r,c[p]=r,b=s!==r,et&&(b=!0),this.dataCheckbox.getCheckboxUse(f,t)&&(it=this.dataCheckbox.get(f,t,i),it?this.dataCheckbox.update(f,t,i,o):this.dataCheckbox.getDisableCheck(f,t)&&this.dataCheckbox.updateDisabledList(f,t,i,o)),h.cellInfo&&(this.useAutoCalculate(this.tbodyType)&&this.dataNormalColumnAutoCalculateSetting.get(f,t)&&(rt=this.dataNormalColumnAutoCalculateSetting.get(f,t),rt.targetRowId!=i&&this.dataNormalColumnAutoCalculateSetting.trigger(f,t,new Decimal(r||0).minus(s||0).toString())),this.useAutoCalculate(this.tfootType)&&/special-row-\d+/g.test(i)&&this.dataSpecialrowColumnAutoCalculateSetting.trigger(f,t,i)),b&&ut&&v!="widget.multiDate"&&(a={type:"gridEvent.rowItem.change"},["ecount.gridV2.widget.rowItemCheckbox","ecount.gridV2.widget.checkbox"].contains(v)&&(a.target={},a.target.checked=r==!0?!0:!1),this.emitCustomEvent(f,t,i,"change",a,{oldRow:w,oldValue:s,newValue:r})),ft&&this.emitCustomEvent(f,t,i,"editComplete",{type:"gridEvent.rowItem.editComplete"},{oldRow:w,oldValue:s,newValue:r,subDataIdx:ht,subControlType:ct}),s!==r&&(this.optMatrixState.use&&(this.matrixState.setCell(f,ecount.grid.constValue.matrixState.standardLine.row,i,t,{state:ecount.grid.constValue.columnState.changed}),this.matrixState.setCell(f,ecount.grid.constValue.matrixState.standardLine.column,t,i,{state:ecount.grid.constValue.columnState.changed})),o[this.constValue.rowStatePropertyName]==this.constValue.rowState.deletedNew?o[this.constValue.rowStatePropertyName]=this.constValue.rowState.create:[this.constValue.rowState.none,this.constValue.rowState.changed,this.constValue.rowState.deleted].contains(o[this.constValue.rowStatePropertyName])&&(o[this.constValue.rowStatePropertyName]=this.constValue.rowState.changed),c[this.constValue.rowStatePropertyName]==this.constValue.rowState.deletedNew?c[this.constValue.rowStatePropertyName]=this.constValue.rowState.create:[this.constValue.rowState.none,this.constValue.rowState.changed,this.constValue.rowState.deleted].contains(c[this.constValue.rowStatePropertyName])&&(c[this.constValue.rowStatePropertyName]=this.constValue.rowState.changed)),{oldValue:s,newValue:r,continueToChange:y})},getById:function(n,t,i){this.setStructureInfo(n);var r=this._keys[t];return r?i?Object.clone(r):r:null},getDataById:function(n,t,i){this.setStructureInfo(n);var r=this._datas[t];return r?i?Object.clone(r):r:null},getIndexById:function(n,t){this.setStructureInfo(n);for(var i=0;i<this._datas.length;i++)if(this._datas[i][this.constValue.keyColumnPropertyName]==t)return i;return null},getIdByIndex:function(n,t){return this.setStructureInfo(n),this._datas[t]&&this._datas[t][this.constValue.keyColumnPropertyName]},getByIndex:function(n,t,i){if(this.optForm.version==this.constValue.formVersion.fourth&&this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tfootType){this.setStructureInfo(this.tbodyType);var r=this._datas.filter(function(n){return n[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate}.bind(this));return t>=r.length?null:i?Object.clone(r[t]):r[t]}return(this.setStructureInfo(n),t>=this._datas.length)?null:i?Object.clone(this._datas[t]):this._datas[t]},getNextRowId:function(n,t){var u,i,r;return this.setStructureInfo(n),u=this.__core.data.column.getById(n,t),u?(i=u.propertyName,r=this._datas.head(function(n){return n[i]==undefined||n[i]==null||n[i]===""}),!r&&this.optRow[this.tfootType].specialRowCount>0)?this.getNextRowId(this.tfootType,t):r&&r[this.constValue.keyColumnPropertyName]:this._datas[0]&&this._datas[0][this.constValue.keyColumnPropertyName]},getAll:function(n,t,i){var r,f,u,o,e;if(this.setStructureInfo(n),r=this._datas,[this.constValue.formVersion.second,this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(this.optForm.version)&&this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tfootType&&(r=this._datas.filter(function(n){return n[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate}.bind(this))),t!=null&&t!=undefined){for(f=[],u=0,o=r.length;u<o;u++)e={},e[t]=r[u][t],f.push(e);return f}return r=r||[],i?Object.clone(r):r},getSectionRowIndex:function(n,t){this.setStructureInfo(n);var r,u,f,i;return this.optCommon.columnType==this.constValue.columnType.multi?t==this.tfootType?(r=this._tfootStartRowIndex,u=this._tfootStartRowCount,f=this._tfootEndRowIndex,i=this._tfootEndRowCount):(r=this._tbodyStartRowIndex,u=this._tbodyStartRowCount,f=this._tbodyEndRowIndex,i=this._tbodyEndRowCount):(r=0,u=1,i=this._datas.length,f=i-1),{startRowIndex:r,startRowCount:u,endRowIndex:f,endRowCount:i}},getSubTotalCount:function(n){return this.setStructureInfo(n),this._subTotalCount},getTotalCount:function(n){return this.setStructureInfo(n),this._totalCount},getDeletedAll:function(n,t){return this.setStructureInfo(n),t?Object.clone(this._removeDatas):this._removeDatas},getMatrixStateRowList:function(n,t,i){return this.matrixState&&this.matrixState.getRowList(n,t,i)},getInitRowCount:function(n){return this.setStructureInfo(n),this.__core.initRowCount},getViewDataTableMapAll:function(n){return this.setStructureInfo(n),this._tableMap},getViewDataTableMap:function(n,t){return this.setStructureInfo(n),this._tableMap[t]},getViewDataRenderingTableMapAll:function(n){return this.setStructureInfo(n),this._renderingTableMap},getViewDataRenderingTableMap:function(n,t){return this.setStructureInfo(n),this._renderingTableMap[t]},getViewDataRenderingTableMapByColumnIndex:function(n,t,i){return this.setStructureInfo(n),this._renderingTableMap[t][i]},getViewDataMadeRows:function(n){return this.view.setStructureInfo(n),this.view._madeRows},getViewDataMadeRowRange:function(n,t,i){var r=0,u=[],f;if(this.setStructureInfo(n),this.optCommon.columnType==this.constValue.columnType.single){var o=this.dataColumn.getAll(n,this.constValue.returnType.multi),e=o.length,f=this.view.getViewDataMadeRowAll(n);for(r=t*e,len=i*e;r<len;r++)u.push(f[r])}else if(this.optCommon.columnType==this.constValue.columnType.multi)for(f=this.view.getViewDataMadeRowAll(n),r=t,len=i;r<=len;r++)u.push(f[r]);return u},getViewDataMadeRow:function(n,t){var i=this.view.getViewDataMadeRowAll(n);return i[t]},getViewDataMadeCell:function(n,t,i){var r=this.view.getViewDataMadeRowAll(n);return r[i]&&r[i].cells[t]},getViewDataTrMapAll:function(n){return this.setStructureInfo(n),this._trMap},getViewDataTrMap:function(n,t){this.setStructureInfo(n);var i=this._trMap[t],r=i&&i.tableIndex,u=i&&i.tableId;return{rowInfo:i,tableId:u,tableIndex:r}},getViewDataCellMap:function(n,t,i){this.setStructureInfo(n);var r=this.getViewDataTrMap(n,i);return r.cellInfo=r.rowInfo&&r.rowInfo[t]||this._notUICellInfo[t],r},addViewDataRenderingTableMap:function(n,t,i){var s,f,h,p,a,r,v,o,y,c,b;this.setStructureInfo(n);s=[this.theadType,this.tbodyType,this.tfootType];this.optCommon.columnType==this.constValue.columnType.multi&&(s=[n]);switch(t){case"right":f=i.right+1}for(h=0,p=s.length;h<p;h++){var e=this.dataColumn.getAll(s[h],this.constValue.returnType.multi),w=e.length,l=this.getViewDataTrMapAll(s[h]),u=this.getViewDataRenderingTableMapAll(s[h]);for(a in l)if(l.hasOwnProperty(a))for(r=0,v=e.length;r<v;r++)for(l[a][e[r][f].id]=Object.clone(l[a][e[r][i.right].id]),o=f,y=e[r].length;o<y;o++)l[a][e[r][o].id].columnIdx+=1;for(r=0,v=u.length;r<v;r++)for(o=f,y=f+1;o<y;o++)if(u[r][f])for(u[r].splice(f,0,Object.clone(u[r][i.right])),c=f,b=u[r].length;c<b;c++)u[r][c].columnIdx+=1,u[r][c].columnId=e[r%w][c].id;else u[r].splice(u[r].length,0,Object.clone(u[r][i.right])),u[r][u[r].length-1].columnIdx+=1,u[r][u[r].length-1].columnId=e[r%w][f].id}},moveViewDataRenderingTableMap:function(n,t){var e,b,s,nt,ft,f,w,y,r,c,o,p,et,st,ot,ct,lt,l,d,i,rt,a,v,h,tt,ht,it,k;switch(n){case this.constValue.crossDirection.up:for(a=this.dataColumn.getAll("thead",this.constValue.returnType.multi),l=0,d=t.length;l<d;l++){i=t[l];s=[];this.setStructureInfo(i.fromSectionType);var ut=0,u=0,a=this.dataColumn.getAll(i.fromColumnSectionType||i.fromSectionType,this.constValue.returnType.multi);if(this.optCommon.columnType==this.constValue.columnType.multi?(nt=this.getSectionRowIndex(i.fromSectionType,i.fromColumnSectionType),i.fromColumnSectionType==this.tfootType&&(ft=this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi),ut=nt.endRowCount-nt.startRowIndex,u=ut*ft.length)):this.optCommon.columnType==this.constValue.columnType.single&&(u=a.length*l),i.toBoundary.top==0&&(this.optCheckbox[i.fromSectionType==this.tfootType?this.theadType:i.fromSectionType].items[this.constValue.checkBoxPropertyName].use&&(index=this.optCheckbox[i.fromSectionType==this.tfootType?this.theadType:i.fromSectionType].items[this.constValue.checkBoxPropertyName].index,i.fromSectionType==this.tfootType?s.push({targetIndex:index}):s.push({targetIndex:index})),this.optRowmoveable.use&&(index=this.optRowmoveable.index,s.push({targetIndex:index})),this.optNumbering.use&&(index=this.optNumbering.index,s.push({targetIndex:index})),s.sort(function(n,t){var i=n.targetIndex,r=t.targetIndex;return i>r?1:i<r?-1:0})),f=this.getViewDataRenderingTableMapAll(i.fromSectionType),y=[],this.optForm.version==this.constValue.formVersion.fourth){if(i.fromBoundary.top>i.toBoundary.top){for(r=i.fromBoundary.top+u,c=i.fromBoundary.bottom+u;r<=c;r++)o=f[r].splice(i.fromBoundary.left,i.fromBoundary.right-i.fromBoundary.left+1),o.splice(0,0,i.fromBoundary.left,0),y.push(o);for(r=i.toBoundary.top+u,c=i.fromBoundary.top+u;r<c;r++)o=f[r].splice(i.toBoundary.left,i.toBoundary.right-i.toBoundary.left+1),o.splice(0,0,i.fromBoundary.left,0),y.push(o)}else if(i.fromBoundary.top<i.toBoundary.top){for(r=i.fromBoundary.bottom+1+u,c=i.toBoundary.bottom+u;r<=c;r++)o=f[r].splice(i.fromBoundary.left,i.fromBoundary.right-i.fromBoundary.left+1),o.splice(0,0,i.fromBoundary.left,0),y.push(o);for(r=i.fromBoundary.top+u,c=i.fromBoundary.bottom+u;r<=c;r++)o=f[r].splice(i.toBoundary.left,i.toBoundary.right-i.toBoundary.left+1),o.splice(0,0,i.fromBoundary.left,0),y.push(o)}}else w=f.splice(u+i.fromBoundary.top,i.fromBoundary.bottom-i.fromBoundary.top+1);if(a.length>1)for(p=0,et=s.length;p<et;p++)ot=f[i.toBoundary.top+u].splice(s[p].targetIndex,1),st=w[0].splice(s[p].targetIndex,1),f[i.toBoundary.top+u].splice(s[p].targetIndex,0,st[0]),w[0].splice(s[p].targetIndex,0,ot[0]);if(this.optForm.version==this.constValue.formVersion.fourth){if(i.fromBoundary.top>i.toBoundary.top)for(var r=i.toBoundary.top+u,c=i.fromBoundary.bottom+u,g=0;r<=c;r++,g++)f[r].splice.apply(f[r],y[g]);else if(i.fromBoundary.top<i.toBoundary.top)for(var r=i.fromBoundary.top,c=i.toBoundary.bottom,g=0;r<=c;r++,g++)f[r].splice.apply(f[r],y[g])}else i.toBoundary.top<i.fromBoundary.top?w.splice(0,0,u+i.toBoundary.top,0):w.splice(0,0,u+i.toBoundary.top-(i.fromBoundary.bottom-i.fromBoundary.top+1),0),f.splice.apply(f,w)}break;case this.constValue.crossDirection.down:for(a=this.dataColumn.getAll("thead",this.constValue.returnType.multi),l=0,d=t.length;l<d;l++){i=t[l];s=[];this.setStructureInfo(i.fromSectionType);var ut=0,u=0,a=this.dataColumn.getAll(i.fromColumnSectionType||i.fromSectionType,this.constValue.returnType.multi);if(this.optCommon.columnType==this.constValue.columnType.multi?(nt=this.getSectionRowIndex(i.fromSectionType,i.fromColumnSectionType),i.fromColumnSectionType==this.tfootType&&(ft=this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi),ut=nt.endRowCount-nt.startRowIndex,u=ut*ft.length)):this.optCommon.columnType==this.constValue.columnType.single&&(u=a.length*l),i.fromBoundary.top==0&&(this.optCheckbox[i.fromSectionType==this.tfootType?this.theadType:i.fromSectionType].items[this.constValue.checkBoxPropertyName].use&&(index=this.optCheckbox[i.fromSectionType==this.tfootType?this.theadType:i.fromSectionType].items[this.constValue.checkBoxPropertyName].index,i.fromSectionType==this.tfootType?s.push({targetIndex:index}):s.push({targetIndex:index})),this.optRowmoveable.use&&(index=this.optRowmoveable.index,s.push({targetIndex:index})),this.optNumbering.use&&(index=this.optNumbering.index,s.push({targetIndex:index})),s.sort(function(n,t){var i=n.targetIndex,r=t.targetIndex;return i>r?1:i<r?-1:0})),f=this.getViewDataRenderingTableMapAll(i.fromSectionType),y=[],this.optForm.version==this.constValue.formVersion.fourth){if(i.fromBoundary.top>i.toBoundary.top){for(r=i.fromBoundary.top+u,c=i.fromBoundary.bottom+u;r<=c;r++)o=f[r].splice(i.fromBoundary.left,i.fromBoundary.right-i.fromBoundary.left+1),o.splice(0,0,i.fromBoundary.left,0),y.push(o);for(r=i.toBoundary.top+u,c=i.fromBoundary.top+u;r<c;r++)o=f[r].splice(i.toBoundary.left,i.toBoundary.right-i.toBoundary.left+1),o.splice(0,0,i.fromBoundary.left,0),y.push(o)}else if(i.fromBoundary.top<i.toBoundary.top){for(r=i.fromBoundary.bottom+1+u,c=i.toBoundary.bottom+u;r<=c;r++)o=f[r].splice(i.toBoundary.left,i.toBoundary.right-i.toBoundary.left+1),o.splice(0,0,i.fromBoundary.left,0),y.push(o);for(r=i.fromBoundary.top+u,c=i.fromBoundary.bottom+u;r<=c;r++)o=f[r].splice(i.fromBoundary.left,i.fromBoundary.right-i.fromBoundary.left+1),o.splice(0,0,i.fromBoundary.left,0),y.push(o)}}else i.fromBoundary.top<i.toBoundary.top?w=f.splice(u+i.fromBoundary.bottom+1,i.toBoundary.bottom-i.fromBoundary.bottom):i.fromBoundary.top>i.toBoundary.top&&(w=f.splice(u+i.fromBoundary.top,i.fromBoundary.bottom-i.fromBoundary.top+1));if(a.length>1)for(p=0,et=s.length;p<et;p++)st=w[0].splice(s[p].targetIndex,1),ot=f[i.fromBoundary.top+u].splice(s[p].targetIndex,1),f[i.fromBoundary.top+u].splice(s[p].targetIndex,0,st[0]),w[0].splice(s[p].targetIndex,0,ot[0]);if(this.optForm.version==this.constValue.formVersion.fourth){if(i.fromBoundary.top>i.toBoundary.top)for(var r=i.toBoundary.top+u,c=i.fromBoundary.bottom+u,g=0;r<=c;r++,g++)f[r].splice.apply(f[r],y[g]);else if(i.fromBoundary.top<i.toBoundary.top)for(var r=i.fromBoundary.top+u,c=i.toBoundary.bottom+u,g=0;r<=c;r++,g++)f[r].splice.apply(f[r],y[g])}else i.fromBoundary.top<i.toBoundary.top?w.splice(0,0,i.fromBoundary.top+u,0):i.fromBoundary.top>i.toBoundary.top&&w.splice(0,0,i.toBoundary.bottom+u+1,0),f.splice.apply(f,w)}break;case this.constValue.crossDirection.left:for(l=0,d=t.length;l<d;l++){i=t[l];this.setStructureInfo(i.fromSectionType);e={top:i.fromBoundary.top,bottom:i.fromBoundary.bottom,left:i.fromBoundary.left,right:i.fromBoundary.right};b={top:i.toBoundary.top,bottom:i.toBoundary.bottom,left:i.toBoundary.left,right:i.toBoundary.right};rt=this.getViewDataTrMap(i.fromSectionType,i.fromRowId);a=this.optCommon.columnType==this.constValue.columnType.multi?i.fromColumnSectionType==this.tfootType?this.dataColumn.getAll(i.fromColumnSectionType||i.fromSectionType,this.constValue.returnType.multi):this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi):this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi);var wt=a.length,at=e.left-b.left,vt=e.right-e.left+1;for(this.constValue.selector&&i.moveMethod==this.constValue.selector.selectionType.allHorizontal?(trIdx=0,trLen=a.length):(trIdx=e.top,trLen=e.bottom+1);trIdx<trLen;trIdx++){for(v=this.getViewDataRenderingTableMap(i.fromSectionType,rt.rowInfo.trIdx[trIdx]),h=b.left,tt=e.right;h<=tt;h++)ht=a[trIdx][h],it=this.getViewDataCellMap(i.fromSectionType,ht.id,i.fromRowId),e.left<=h&&e.right>=h?(it.cellInfo.columnIdx-=at,v[h].columnIdx-=at):(it.cellInfo.columnIdx+=vt,v[h].columnIdx+=vt);for(k=v.splice(e.left,e.right-e.left+1),k&&(k.splice(0,0,b.left,0),v.splice.apply(v,k)),ct=0,v=this.getViewDataRenderingTableMap(i.fromSectionType,rt.rowInfo.trIdx[trIdx]),h=0,tt=v.length;h<tt;h++)lt=a[trIdx%wt][h].id,["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN","SKIP"].contains(v[h].type)?(ct-=1,this._trMap[i.fromRowId][lt].adjustmentValue=1):this._trMap[i.fromRowId][lt].adjustmentValue=ct}}break;case this.constValue.crossDirection.right:for(l=0,d=t.length;l<d;l++){i=t[l];this.setStructureInfo(i.fromSectionType);e={top:i.fromBoundary.top,bottom:i.fromBoundary.bottom,left:i.fromBoundary.left,right:i.fromBoundary.right};b={top:i.toBoundary.top,bottom:i.toBoundary.bottom,left:i.toBoundary.left,right:i.toBoundary.right};rt=this.getViewDataTrMap(i.fromSectionType,i.fromRowId);a=this.optCommon.columnType==this.constValue.columnType.multi?i.fromColumnSectionType==this.tfootType?this.dataColumn.getAll(i.fromColumnSectionType||i.fromSectionType,this.constValue.returnType.multi):this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi):this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi);var wt=a.length,yt=b.left-e.right+(b.right-b.left),pt=e.right-e.left+1;for(this.constValue.selector&&i.moveMethod==this.constValue.selector.selectionType.allHorizontal?(trIdx=0,trLen=a.length):(trIdx=e.top,trLen=e.bottom+1);trIdx<trLen;trIdx++){for(v=this.getViewDataRenderingTableMap(i.fromSectionType,rt.rowInfo.trIdx[trIdx]),h=e.left,tt=b.right;h<=tt;h++)ht=a[trIdx][h],it=this.getViewDataCellMap(i.fromSectionType,ht.id,i.fromRowId),h>=e.left&&h<=e.right?(it.cellInfo.columnIdx+=yt,v[h].columnIdx+=yt):(it.cellInfo.columnIdx-=pt,v[h].columnIdx-=pt);k=v.splice(e.right+1,b.right-e.right);k&&(k.splice(0,0,e.left,0),v.splice.apply(v,k))}}}},moveViewDataTrMap:function(n,t){for(var i,y,p,k,e,d,u,w,r,g,l,nt,tt,s,h,c=0,a=0,it=t.length;a<it;a++){i=t[a];this.setStructureInfo(i.fromSectionType);var f=this.getViewDataTrMap(i.fromSectionType,i.fromRowId),v=0,b=0,o;for(this.optCommon.columnType==this.constValue.columnType.multi?(y=this.getSectionRowIndex(i.fromSectionType,i.fromColumnSectionType),i.fromColumnSectionType==this.tfootType?(o=this.dataColumn.getAll(i.fromColumnSectionType||i.fromSectionType,this.constValue.returnType.multi),p=this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi),v=y.endRowCount-y.startRowIndex,b=v*p.length,c=v*p.length):o=this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi)):o=this.dataColumn.getAll(i.fromSectionType,this.constValue.returnType.multi),k=o.length,e=0,d=f.rowInfo.trIdx.length;e<d;e++){for(u=this._renderingTableMap[f.rowInfo.trIdx[e]],w=0,r=0,g=u.length;r<g;r++)if(l=o[(f.rowInfo.trIdx[e]-b)%k][r].id,f.rowInfo[l].columnRowIdx=e,["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN","SKIP"].contains(u[r].type))w-=1,f.rowInfo[l].adjustmentValue=1;else if(f.rowInfo[l].adjustmentValue=w,u[r].trIdx=c,u[r].type=="MERGE")for(nt=(u[r][this.constValue.rowVariableNames.rowspanCount]||1)-1,tt=(u[r][this.constValue.rowVariableNames.colspanCount]||1)-1,s=0;s<=nt;s++)for(h=0;h<=tt;h++)(s!=0||h!=0)&&(this._renderingTableMap[u[r].trIdx+s][r+h].trIdx=c);c+=1}}},changeViewDataTrMapAll:function(n,t){var r;this.setStructureInfo(n);var u=this._datas,i=0,f=u.length;for(this.optCommon.columnType==this.constValue.columnType.multi&&(r=this.getSectionRowIndex(n,t),i=r.startRowIndex,f=r.endRowCount);i<f;i++)this.changeViewDataTrMap(n,t,u[i][this.constValue.keyColumnPropertyName])},changeViewDataTrMap:function(n,t,i,r){var e,s,o,v,p,w,r,l,f,y,u,b,a,k,d,h,c;for(this.setStructureInfo(n),e=this.getViewDataTrMap(n,i),o=0,this.optCommon.columnType==this.constValue.columnType.multi?(v=this.getSectionRowIndex(n,t),t==this.tfootType?(s=this.dataColumn.getAll(t||n,this.constValue.returnType.multi),p=this.dataColumn.getAll(n,this.constValue.returnType.multi),o=(v.endRowCount-v.startRowIndex)*p.length):s=this.dataColumn.getAll(n,this.constValue.returnType.multi)):s=this.dataColumn.getAll(n,this.constValue.returnType.multi),w=s.length,r=0,l=w;r<l;r++)e.rowInfo.trIdx[r]=o+r;for(r=0,l=e.rowInfo.trIdx.length;r<l;r++){for(f=this._renderingTableMap[e.rowInfo.trIdx[r]],y=0,u=0,b=f.length;u<b;u++)if(a=s[r][u].id,e.rowInfo[a].columnRowIdx=r,["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN","SKIP"].contains(f[u].type))y-=1,e.rowInfo[a].adjustmentValue=1;else if(e.rowInfo[a].adjustmentValue=y,f[u].trIdx=o,f[u].type=="MERGE")for(k=(f[u][this.constValue.rowVariableNames.rowspanCount]||1)-1,d=(f[u][this.constValue.rowVariableNames.colspanCount]||1)-1,h=0;h<=k;h++)for(c=0;c<=d;c++)(h!=0||c!=0)&&(this._renderingTableMap[f[u].trIdx+h][u+c].trIdx=o);o+=1}},divideViewDataTrMap:function(n,t){var g=[this.tfootType,this.tbodyType,this.theadType],h,u,w,c,s,i,b,f;this.setStructureInfo(n);var l=this._datas,e=this._trMap,o=0,a=l.length;for(this.optCommon.columnType==this.constValue.columnType.multi&&(h=this.getSectionRowIndex(n,t),o=h.startRowIndex,a=h.endRowCount);o<a;o++){var v=l[o],r=v[this.constValue.keyColumnPropertyName],k=v[this.constValue.rowVariableNames.rowType];t=k==this.constValue.rowType.separate?this.tfootType:null;var y=this.getViewDataTrMap(n,r),p=this.dataColumn.getAll(t||n,this.constValue.returnType.multi),d=p.length;for(u=0,w=y.rowInfo.trIdx.length;u<w;u++)for(c=0,s=this.getViewDataRenderingTableMap(n,y.rowInfo.trIdx[u]),i=0,b=s.length;i<b;i++)f=p[u%d][i].id,e[r][f]&&(e[r][f].columnIdx=i,["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN","SKIP"].contains(s[i].type)?(c-=1,e[r][f].adjustmentValue=1):(e[r][f].adjustmentValue=c,s[i].columnIdx=i))}},addViewDataWidgetInstance:function(n,t,i){this.view.addViewDataWidgetInstance(n,t,i)},removeViewDataWidgetInstance:function(n,t){this.view.removeViewDataWidgetInstance(n,t)},getViewDataWidgetInstances:function(n){return this.view.getViewDataWidgetInstances(n)},getViewDataWidgetInstance:function(n,t,i){var r;return r=arguments.length==2?arguments[1]:[n,t,i].join(ecount.constValue.gridDelimiter),this.view.getViewDataWidgetInstance(n,r)},getViewDataWidgetInstanceById:function(n,t){return this.view.getViewDataWidgetInstance(n,t)},setUnmappingWidgetInstances:function(n,t){for(var r=this.getUnmappingWidgetInstances(n),i=0;i<t.length;i++)r.push(t[i])},getUnmappingWidgetInstances:function(n){return this.view.getUnmappingWidgetInstances(n)},getViewDataCellInfo:function(n,t,i){var o,s,v;this.setStructureInfo(n);o=n;s=this._keys[i];this.optCommon.columnType==this.constValue.columnType.multi&&s[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate&&(o=this.tfootType);var r=this.dataColumn.getById(o,t),c=this.optColumn[n].customCell&&this.optColumn[n].customCell[t.toLowerCase()],l=this._trMap[i][t],e,f=l.editableState,y=l.columnRowIdx,a=s[r.propertyName]||"",h=this.dataColumn.getConvertor(o,this.constValue.dataType.modeInput,t),p=this.optColumn[n].duplicationPoint&&this.optColumn[n].duplicationPoint.length,w=p?y:h&&h(a,r)||a,u;return n==this.theadType?(f=typeof f=="boolean"?f:ecount.common.isTrue(r.columnOption.editableState),e=r.columnOption.controlType?r.columnOption.controlType:r.controlType=="widget.checkbox"?"widget.checkbox":"widget.label"):(f=typeof f=="boolean"?f:ecount.common.isTrue(r.editableState),e=r.controlType||"widget.label"),v=r.GROUP_FLAG||this.constValue.sectionSeparateValue.line,c&&(u=c(w,s,h,{dataType:r.dataType,isCheckZero:r.isCheckZero,isShowIfZero:r.isShowIfZero,amtCalc:r.amtCalc,thousandSeparator:r.thousandSeparator==null||r.thousandSeparator==undefined?ecount.config.company.THOU_SEPARATOR:r.thousandSeparator,decimalSeparator:r.decimalSeparator==null||r.decimalSeparator==undefined?ecount.config.company.DEC_SEPARATOR:r.decimalSeparator,isTodayTime:ecount.common.isTrue(r.isTodayTime)},{rowType:v})||{},e=u.controlType||e,(u.editableState!=undefined||u.editableState!=null)&&(f=typeof u.editableState=="boolean"?u.editableState:ecount.common.isTrue(u.editableState))),{controlType:e,editableState:f,controlOption:u&&u.controlOption}},getMergeInfo:function(n,t,i,r){r=r||{};this.setStructureInfo(n);var f,u;if(this.optCommon.columnType==this.constValue.columnType.single)r.isOnlyFirst=!r.isNotForm&&n==this.tbodyType;else if(this.optCommon.columnType==this.constValue.columnType.multi&&(f=n,this.tfootType==n&&(n=this.tbodyType),u=this.getSectionRowIndex(n,f),r.index=u.startRowIndex,r.length=u.endRowCount,$.isNull(r.index)&&$.isNull(r.length)))return[];return this._findMergeInfo(n,t,i,r)},_findMergeInfo:function(n,t,i,r){var f,b,s,k,d,c;r=r||{};var l=this.getAll(n),h=r.index||0,g=r.length||l.length,u=l[h][this.constValue.rowVariableNames.mergeSet],e=[],t;if(u&&ecount.common.isTrue(r.isVisibilityMergeInfo)){var a=this.dataColumn.getAll(r.sectionType||n,this.constValue.returnType.multi),w=a[0].length,v,y=[],o=-1,p=-1;for(f=0,b=a.length;f<b;f++)ecount.common.isTrue(a[f][0].isHideRow)?y.push(f):(o==-1&&(o=f),p=f);if(y.length){for(s=0,k=u.length;s<k;s++)d=u[s][this.constValue.rowVariableNames.mergeStartIndex],c=Math.floor(d/w),y.contains(c)||(v=Object.clone(u[s]),o>-1&&p>-1&&c>=o&&c<=p&&(v[this.constValue.rowVariableNames.mergeStartIndex]-=o*w),e.push(v));return e}}for(;h<g;h++)if(u&&(!t||t===l[h][this.constValue.keyColumnPropertyName])&&(!i||u.find(function(n){return n.columnId==i}))&&(e=e.concat(Object.clone(u,!0))),r.isOnlyFirst)break;return e},getRowCount:function(n){var t;return t=this.optForm.version==this.constValue.formVersion.third||this.optForm.version==this.constValue.formVersion.fourth?this.dataColumn.getAll(n,this.constValue.returnType.multi):this.view.getViewDataMadeRowAll(n),t.length},getAdditionalDatas:function(n){return this.optRow[n].additionalDatas?this._normalizeProperties(this.optRow[n].additionalDatas):!1},getAddtionalDatasInForm:function(n){return this.optRow[n].additionalDatasInForm?this._normalizeProperties(this.optRow[n].additionalDatasInForm):null},extendBoundary:function(n,t,i,r){var k=this.dataColumn.getAll(t||n,this.constValue.returnType.multi),h=k[0].length,v=this.getViewDataRenderingTableMapAll(n),y,o,c,f,s,u,p,e;if(h==0)return r;for(this.__core.boundary.set(r),y=this.dataColumn.getSystemColumnCount(n),o=i.top,c=i.bottom;o<=c;){for(f=v[o],s=!1,u=i.left,p=i.right;u<=p;)if(e=null,f[u]&&(["MERGE"].contains(f[u].type)?e=f[u]:["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(f[u].type)&&(e=v[f[u].trIdx][f[u].columnIdx])),e){var w=e[this.constValue.rowVariableNames.mergeStartIndex],l=Math.floor(w/h),a=w%h,d=(e[this.constValue.rowVariableNames.rowspanCount]||1)-1,b=e[this.constValue.rowVariableNames.colspanCount]||1,g=b-1;if(n!=this.theadType&&l>0&&(a+=y),s=this.__core.boundary.mergeBoundary({top:l,left:a,bottom:l+d,right:a+g}),s){r=this.__core.boundary.get();o=Math.min(r.top,i.top);c=Math.max(r.bottom,i.bottom);i.left=Math.min(r.left,i.left);i.right=Math.max(r.right,i.right);break}u+=b}else u+=1;s||(o+=1)}return this.__core.boundary.reset(),r},extendBoundary2:function(n,t,i,r,u){return this.mergeSet.extendBoundary(n,t,i,r,u)},getHorizontalExpansionOfSelectionBasedOnMergeInformation:function(n,t,i){var r=_.extend({},i);return this.optCommon.columnType==this.constValue.columnType.multi&&(r=this.extendBoundary(n,t,r,r)),{left:r.left,right:r.right}},extendRowBoundary:function(n,t,i,r){var nt=this.dataColumn.getAll(t||n,this.constValue.returnType.multi),y=nt[0].length,p=this.getViewDataRenderingTableMapAll(n),tt,o,a,e,c,f,b,u,v,l;this.__core.boundary.set(r);var it=this.dataColumn.getSystemColumnCount(n),tt=this.dataColumn.getAll(this.tbodyType,this.constValue.returnType.multi),w=tt.length;for(o=i.top,a=i.bottom;o<=a;){for(e=p[o],c=!1,f=i.left,b=i.right;f<=b;)if(u=null,["MERGE"].contains(e[f].type)?u=e[f]:["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(e[f].type)&&(u=p[e[f].trIdx][e[f].columnIdx]),v=u&&u[this.constValue.rowVariableNames.rowspanCount]||1,l=u&&u[this.constValue.rowVariableNames.colspanCount]||1,u&&(v>1||l>1)){var k=u[this.constValue.rowVariableNames.mergeStartIndex],s=Math.floor(k/y),h=k%y,d=v-1,g=l-1;if(n!=this.theadType&&s>0&&(h+=it),c=this.optCommon.columnType==this.constValue.columnType.multi&&u.columnSectionType==this.tfootType?this.__core.boundary.mergeBoundary({top:s+w,left:h,bottom:s+d+w,right:h+g}):this.__core.boundary.mergeBoundary({top:s,left:h,bottom:s+d,right:h+g}),c){r=this.__core.boundary.get();o=Math.min(r.top,i.top);a=Math.max(r.bottom,i.bottom);i.left=Math.min(r.left,i.left);i.right=Math.max(r.right,i.right);break}f+=l}else f+=1;c||(o+=1)}return this.__core.boundary.reset(),r},makeKey:function(n,t){var u,i,r,e,f;if(this.setStructureInfo(n),this._key.callback)t[this.constValue.keyColumnPropertyName]=this._key.callback(t);else if(i="",this._key.refKeys&&this._key.refKeys.length>0){for(r=0,e=this._key.refKeys.length;r<e;r++)f=this.dataColumn.getById(n,this._key.refKeys[r]),u=f&&f.propertyName||this._key.refKeys[r],i!=""&&(i+=this.constValue.rowKeySeparator),$.isEmpty(t[u])||(i+=ecount.gridV2.util.replaceEscape(t[u]).toString().replace(/\t/g,"    "));i==""?(i=this._key.index.toString(),i=i.replaceAll("\r","").replaceAll("\n","_").replaceAll("\t",""),t[this.constValue.keyColumnPropertyName]=this._key.index.toString(),this._key.index+=1):(i=i.replaceAll("\r","").replaceAll("\n","_").replaceAll("\t",""),this._keys[i]&&[this.constValue.subtotalRowType,this.constValue.totalRowType].contains(t[this.constValue.rowVariableNames.rowType])?(t[this.constValue.keyColumnPropertyName]=this._key.index.toString(),this._key.index+=1):t[this.constValue.keyColumnPropertyName]=i)}else t[this.constValue.keyColumnPropertyName]=n==this.tfootType?"special-row-"+this._key.index.toString():this._key.index.toString(),this._key.index+=1},addSystemMergeInfo:function(n,t,i){var e=this,r=r=this.data.column.getAll(n,this.constValue.returnType.multi),f,h;if(r.length>1&&(this.__setting.getCheckBoxUse(n,this.constValue.checkBoxPropertyName)||this.optRowmoveable.use||this.optNumbering.use)){var u=t[this.constValue.rowVariableNames.mergeSet]||[],o=e.data.column.getSystemColumnCount(n),a=r[0].length;this.optNumbering.use&&(this.dataUtil.isDuplicateMerge(u,r,o,this.optNumbering.index)||u.push({_MERGE_START_INDEX:this.optNumbering.index,_ROWSPAN_COUNT:r.length}));var l=this.__setting.getCheckBoxUse(n==this.tfootType?this.theadType:n,this.constValue.checkBoxPropertyName),c=this.__setting.getCheckBoxDisplayMergeType(),s=this.dataColumn.__datas.tbody;(l||n==this.theadType)&&(this.constValue.displayCheckboxMegeType.merge===c||n==this.theadType?(f=this.__setting.getCheckBoxIndex(n==this.tfootType?this.theadType:n,this.constValue.checkBoxPropertyName),this.dataUtil.isDuplicateMerge(u,r,o,f)||u.push({_MERGE_START_INDEX:f,_ROWSPAN_COUNT:r.length})):this.constValue.displayCheckboxMegeType.mergeLine===c&&(f=r[0].length*s.startRow,u.push({_IS_SYSTEM_COLUMN:!0,_MERGE_START_INDEX:f,_ROWSPAN_COUNT:s.endRow-s.startRow+1})));this.optRowmoveable.use&&(this.dataUtil.isDuplicateMerge(u,r,o,this.optRowmoveable.index)||u.push({_MERGE_START_INDEX:this.optRowmoveable.index,_ROWSPAN_COUNT:r.length}));u=u.sort(function(n,t){var i=parseInt(n[e.constValue.rowVariableNames.mergeStartIndex],10),r=parseInt(t[e.constValue.rowVariableNames.mergeStartIndex],10);return i>r?1:i<r?-1:0});t[this.constValue.rowVariableNames.mergeSet]=u}n==this.tfootType&&this.optEditable.specialRowMerge&&this.optEditable.specialRowMerge[i]&&(h=[this.constValue.formVersion.second,this.constValue.formVersion.third].contains(this.optForm.version),h&&this.optCommon.useMergeAutoGenratorTotal?(this.optEditable.specialRowMerge[i][this.constValue.rowVariableNames.mergeSet].forEach(function(n){t[this.constValue.rowVariableNames.mergeSet].remove(function(t){return t[this.constValue.rowVariableNames.mergeStartIndex]==n[this.constValue.rowVariableNames.mergeStartIndex]}.bind(this))}.bind(this)),t[this.constValue.rowVariableNames.mergeSet]=t[this.constValue.rowVariableNames.mergeSet].concat(Object.clone(this.optEditable.specialRowMerge[i][this.constValue.rowVariableNames.mergeSet],!0)),this.dataUtil.singleArraySort(t[this.constValue.rowVariableNames.mergeSet])):h||(t[this.constValue.rowVariableNames.mergeSet]=t[this.constValue.rowVariableNames.mergeSet]||this.optEditable.specialRowMerge[i][this.constValue.rowVariableNames.mergeSet]))},makeState:function(n,t,i){this.setStructureInfo(n);t[this.constValue.rowStatePropertyName]||(t[this.constValue.rowStatePropertyName]=i)},makeTree:function(n,t){var p,l,r,c,i,e,o;this.setStructureInfo(n);var i=this.data.tree.serialize(),u={},v={},f,y=[];for(e=0,p=t.length;e<p;e++){var h=t[e],w=h[this.constValue.keyColumnPropertyName],k=h[this.constValue.rowVariableNames.rowType];if([this.constValue.subtotalRowType,this.constValue.totalRowType].contains(k)){y.push(h);f="";continue}l=h[this.constValue.tree.set];l&&(r=l[this.constValue.tree.parentId],u.hasOwnProperty(r)||(u[r]=this.data.tree.getDepth(r,0,p)),l[this.constValue.tree.depth]=u[r],u[r]==0&&(f=r,i.rootNodeList.push(w)),i.listParentToChild[r]||(i.listParentToChild[r]=[]),i.listParentToChild[r].push(w),i.listParentToChild[r][this.constValue.tree.expand]=u[r]==0?!0:this.optTree.treeOpenOnInitCallback(u,r),v[w]=h)}if(this.optTree.eventOnLabel&&(i.eventOnLabel=this.optTree.eventOnLabel),this.optTree.eventDisable&&(i.eventDisable=this.optTree.eventDisable),f){if(this.optTree.sort)for(o in i.listParentToChild)i.listParentToChild.hasOwnProperty(o)&&(i.listParentToChild[o]=i.listParentToChild[o].sort());if(this.optTree.treeHideOnNoChild){var s={},a=[],c=[],b={};for(this.dataTree.makeNoChildList(f,i.rootNodeList,s,u),e=0;e<i.listParentToChild[f].length;e++)s[i.listParentToChild[f][e]]=i.listParentToChild[f][e];delete s[f];for(o in s)s.hasOwnProperty(o)&&a.push(o);a=a.sort();this.dataTree.dataOrderHideOnNoChild(0,a,v,c,b,s,{},u);i.listParentToChild=b;t=c.concat(y)}else this.optTree.dataNoReOrder||(c=[],i=this.data.tree.serialize(),this.dataTree.dataOrder(c,f,i.rootNodeList.sort(),v,i.listParentToChild,u),t=c.concat(y))}return t},initCheckedValue:function(n){var r,t,i,u,f;if(this.__setting.getCheckBoxUse()){this.setStructureInfo(n);r=this.dataCheckbox.getList(n);for(i in r)if(typeof i=="string"&&r.hasOwnProperty(i)&&this.dataCheckbox.getUse(n,i)&&(t=r[i].checkedList,t&&t.length>0))for(u=0,f=t.length;u<f;u++)this.__initCheckedKeys[t[u]]=!0}},makeShaded:function(n,t){var h,f,r,o,e,s,c,i,l,u;for(this.data.column.setStructureInfo(n),this.data.shaded.setStructureInfo(n),o=this.data.shaded.keys,s=0,c=this.optShaded.list.length;s<c;s++)if(i=this.data.column._columnKeys[this.optShaded.list[s]],i){l=t[this.constValue.keyColumnPropertyName];u=i.id;e=o[u]?o[u]:{};switch(this.optShaded.type){case"id":f=t[this.constValue.keyColumnPropertyName];break;case"data":case"dataGroup":r=t[i.propertyName];i.controlOption.numberType==this.constValue.numberType.decimal&&(h=this.data.column._convertorDataTypeView.getConvertor(n,u),(r==undefined||r==null)&&(r=""),r=h(r,{dataType:i.controlOption.dataType,zeroYN:i.controlOption.isCheckZero,amtCalc:i.controlOption.amtCalc,thousandSeparator:"",isTodayTime:ecount.common.isTrue(i.controlOption.isTodayTime)}));f=r}e[f]||(e[f]=[]);e[f].push({rowId:l,columnId:u});o[u]||this.data.shaded.add(n,u,e)}},serialize:function(n){return this.setStructureInfo(n),Object.clone(this._datas)},setStructureInfo:function(n){[this.constValue.formVersion.second,this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(this.optForm.version)&&this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tfootType&&(n=this.tbodyType);this._datas=this.__datas[n].datas;this._removeDatas=this.__datas[n].removeDatas;this._keys=this.__datas[n].keys;this._key=this.__datas[n].key;this._initRowCount=this.__datas[n].initRowCount;this._totalCount=this.__datas[n].totalCount;this._subTotalCount=this.__datas[n].subTotalCount;this._tbodyStartRowIndex=this.__datas[n].tbodyStartRowIndex;this._tbodyEndRowIndex=this.__datas[n].tbodyEndRowIndex;this._tbodyStartRowCount=this.__datas[n].tbodyStartRowCount;this._tbodyEndRowCount=this.__datas[n].tbodyEndRowCount;this._skipRowLine=this.__datas[n].skipRowLine;this._tfootStartRowIndex=this.__datas[n].tfootStartRowIndex;this._tfootEndRowIndex=this.__datas[n].tfootEndRowIndex;this._tfootStartRowCount=this.__datas[n].tfootStartRowCount;this._tfootEndRowCount=this.__datas[n].tfootEndRowCount;this._renderingTableMap=this.__datas[n].renderingTableMap;this._tableMap=this.__datas[n].tableMap;this._trMap=this.__datas[n].trMap;this._notUICellInfo=this.__datas[n].notUICellInfo;this._textareaRows=this.__datas[n].textareaRows},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__api=this.__core.api;this.__setting=n.setting;this.dataUtil=ecount.gridV2.data.util;$.extend(this,n.mixinOption);this.generator=new ecount.gridV2.generator;this.__events=this.__setting.eventsGet();this.__apiPrefixId="_REQUEST_ROWDATA_";this.__apiPrefixIndex=1;this.renderingCount=0;this.modules=ecount.gridV2.modules;this.view=new ecount.gridV2.data.viewTable(n);this.optCommon.columnType==this.constValue.columnType.single?this.mergeSet=new ecount.gridV2.data.singleMergeSet(n):this.optCommon.columnType==this.constValue.columnType.multi&&(this.mergeSet=new ecount.gridV2.data.multiMergeSet(n));this.__initCheckedKeys={};this.skipRowMergeSetInfo=null},initDataModule:function(n,t){var i,r,u,f;t.mixinOption.optColumn.sortable||t.mixinOption.optColumn.sortEnableList&&t.mixinOption.optColumn.sortEnableList.length>0?(t.mixinOption.dataSortable?(this.optColumn.sortableReset&&t.mixinOption.dataSortable.reset(),t.mixinOption.dataSortable.initGlobalValue(t)):(i=new ecount.gridV2.data.sortable,i.init(t),this.data.sortable=i,this.data.column.dataSortable=i,this.dataSortable=i,t.mixinOption.dataSortable=i),this.view.addExternalModule("dataSortable",this.data.sortable),this.data.column.initSortableColumns(this.theadType),t.mixinOption.dataSortable.clearState()):t.mixinOption.dataSortable&&(t.mixinOption.dataSortable.destroyAll&&t.mixinOption.dataSortable.destroyAll(),t.mixinOption.dataSortable=null,this.view.removeExternalModule("dataSortable"),delete t.mixinOption.dataSortable);t.mixinOption.optPaging.use?(t.mixinOption.dataPaging?t.mixinOption.dataPaging.reset&&t.mixinOption.dataPaging.reset():(r=new ecount.gridV2.data.paging,r.init(t),this.data.paging=r,this.data.column.dataPaging=r,this.dataPaging=r,t.mixinOption.dataPaging=r),u=[],n=="api"?u=this.optRow[this.tbodyType].apiDatas:n=="custom"&&(u=this.optRow[this.tbodyType].datas),f=u&&u.length>0?u[0][this.constValue.row.maxCount]||this.optPaging.totalRowCount||0:0,this.view.addExternalModule("dataPaging",this.data.paging),t.mixinOption.dataPaging.setTotalRowCount(f),this.optPaging.totalRowCount=f):t.mixinOption.dataPaging&&(t.mixinOption.dataPaging.destroyAll&&this.paging&&this.paging.destroyAll(),t.mixinOption.dataPaging=null,this.view.removeExternalModule("dataPaging"),delete t.mixinOption.dataPaging)},reset:function(){this.__datas={thead:{},tbody:{},tfoot:{}};this._datas=null;this._keys=null;this._key=null;this.initRowCount=0;this._totalCount=0;this._subTotalCount=0;this._madeSectionCount=0},initPrepareDataValue:function(n){var e=this,i,t,f,r,u;for(this.data=this.__core.data,i=[this.theadType,this.tbodyType,this.tfootType],this.optMatrixState.use&&(this.matrixState=new ecount.gridV2.data.matrixState,this.matrixState.init(n)),t=0,f=i.length;t<f;t++)if(this.__datas[i[t]].datas=[],this.__datas[i[t]].keys={},this.__datas[i[t]].key={refKeys:this.optRow[i[t]].keyColumnIdList,index:0,callback:this.optRow[i[t]].makeKeyFn},this.optRow[i[t]].isInitRowIndex&&(this.__datas[i[t]].initRowCount=0),this.__datas[i[t]].totalCount=0,this.__datas[i[t]].subTotalCount=0,this.__datas[i[t]].renderingTableMap=[],this.__datas[i[t]].tableMap={},this.__datas[i[t]].trMap={},this.__datas[i[t]].notUICellInfo={},this.__datas[i[t]].textareaRows={},this.__datas[i[t]].skipRowLine=[],r=this.optColumn[i[t]].propertyColumnNormalize,r){r=="UPPER"?(this._normalizeProperties=function(n){return typeof n=="string"?n.toUpperCase():JSON.parse(Object.toJSON(n).replace(/(\")([\w|\-|\.|\|]+)(\"\:)/gi,function(n){return ecount.gridV2.util.isPropertyInConstValue(n)?n:n.toUpperCase()}))},this._arrayNormalizeProperties=function(n){for(var t=0,i=n.length;t<i;t++)n[t]=this._normalizeProperties(n[t]);return n}):(this._normalizeProperties=function(n){return typeof n=="string"?n.toLowerCase():JSON.parse(Object.toJSON(n).replace(/(\")([\w|\-|\.|\|]+)(\"\:)/gi,function(n){return ecount.gridV2.util.isPropertyInConstValue(n)?n:n.toLowerCase()}))},this._arrayNormalizeProperties=function(n){for(var t=0,i=n.length;t<i;t++)n[t]=this._normalizeProperties(n[t]);return n});for(u in this.constValue.rowVariableNames)r=="UPPER"?this.constValue.rowVariableNames[u].toUpperCase():this.constValue.rowVariableNames[u].toLowerCase()}else this._normalizeProperties=function(n){return n},this._arrayNormalizeProperties=function(n){return n}},removeMergeInfoOverlayIndex:function(n,t,i,r){for(var l,a,v=this.data.column.getAll(t,this.constValue.returnType.multi),s=v[0].length,u=r.length-1;u>-1;u--){var h=r[u][this.constValue.rowVariableNames.mergeStartIndex],o=Math.floor(h/s),f=h%s,y=r[u][this.constValue.rowVariableNames.rowspanCount]||1,c=y-1,p=r[u][this.constValue.rowVariableNames.colspanCount]||1,e=p-1;i.top<=o&&i.bottom>=o+c&&i.left<=f&&i.right>=f+e?r.splice(u,1):i.top<=o&&i.bottom>=o+c&&i.left<=f?i.right>=f&&i.right<f+e&&(r[u][this.constValue.rowVariableNames.mergeStartIndex]+=i.right-f+1,r[u][this.constValue.rowVariableNames.colspanCount]-=i.right-f+1,r[u][this.constValue.rowVariableNames.colspanCount]==0&&(r[u][this.constValue.rowVariableNames.colspanCount]=1)):i.top<=o&&i.bottom>=o+c&&i.right>=f+e?i.left>f&&i.left<=f+e&&(l=Math.min(f+e,i.left),a=Math.max(f+e,i.left),r[u][this.constValue.rowVariableNames.colspanCount]-=a-l+1,r[u][this.constValue.rowVariableNames.colspanCount]==0&&(r[u][this.constValue.rowVariableNames.colspanCount]=1)):i.top*s+i.left==h&&i.bottom*s+i.right<h+e+s*c&&(r[u][this.constValue.rowVariableNames.mergeStartIndex]+=i.right-i.left+1,r[u][this.constValue.rowVariableNames.colspanCount]-=i.right-i.left+1)}},extendMergeInfoOverlayIndex:function(n,t,i,r){for(var l=this.data.column.getAll(t,this.constValue.returnType.multi),s=l[0].length,u=r.length-1;u>-1;u--){var h=r[u][this.constValue.rowVariableNames.mergeStartIndex],e=Math.floor(h/s),f=h%s,a=r[u][this.constValue.rowVariableNames.rowspanCount]||1,c=a-1,v=r[u][this.constValue.rowVariableNames.colspanCount]||1,o=v-1;i.top<=e&&i.bottom>=e+c&&i.left<=f&&i.right>=f+o?r.splice(u,1):i.top<=e&&i.bottom>=e+c&&i.left<=f?i.right>=f&&i.right<f+o&&(r[u][this.constValue.rowVariableNames.mergeStartIndex]+=i.right-f+1,r[u][this.constValue.rowVariableNames.colspanCount]-=i.right-f+1,r[u][this.constValue.rowVariableNames.colspanCount]==0&&(r[u][this.constValue.rowVariableNames.colspanCount]=1)):i.top<=e&&i.bottom>=e+c&&i.right>f+o?i.left>f&&i.left<=f+o&&(r[u][this.constValue.rowVariableNames.colspanCount]+=i.right-(f+o),r[u][this.constValue.rowVariableNames.colspanCount]==0&&(r[u][this.constValue.rowVariableNames.colspanCount]=1)):i.top*s+i.left==h&&i.bottom*s+i.right<h+o+s*c&&(r[u][this.constValue.rowVariableNames.mergeStartIndex]+=i.right-i.left+1,r[u][this.constValue.rowVariableNames.colspanCount]-=i.right-i.left+1)}},getMinBoundary:function(n,t,i){var s,h,f,l,r;this.optCommon.columnType==this.constValue.columnType.single?(s=this.dataColumn.getAll(this.theadType,this.constValue.returnType.multi),h=this.dataColumn.getSystemColumnCount(this.theadType)):(s=this.dataColumn.getAll(n,this.constValue.returnType.multi),h=this.dataColumn.getSystemColumnCount(n));var u=s[0].length,w=u-1,c=[];for(f=t.top,l=t.bottom;f<=l;f++)c.push({startIndex:f*u+t.left,endIndex:f*u+t.right});for(r=i.length-1;r>-1;r--){var e=i[r][this.constValue.rowVariableNames.mergeStartIndex],b=Math.floor(e/u),o=e%u,a=i[r][this.constValue.rowVariableNames.rowspanCount]||1,k=a-1,v=i[r][this.constValue.rowVariableNames.colspanCount]||1,y=v-1,p=c.find(function(n){return n.startIndex<=e&&n.endIndex>=e});p&&o!=h&&t.left<=o&&t.right<o+y&&(t.right=o-1)}return t},removeCustomMergeSet:function(n,t,i,r){r.remove(function(n){return n.detailSectionType!=this.constValue.sectionSeparateValue.line}.bind(this))},makeCustomMergeSet:function(n,t,i,r){var f=this.dataColumn.getAll(t,this.constValue.returnType.multi,!1,null,{byDetailSection:!0}),h=this.dataColumn.getMergeInfoByDataType(n,t,[i],"number"),e={top:h.startRowIndex,left:0,bottom:h.endRowIndex,right:f[i].columnRows[0].length-1},u=(e.bottom-e.top+1)*(e.right+1);if(f[i]&&f[i].columnRows.length){var c=f[i].columnRows,o=c[0].length,l=o-1,s=[];r.some(function(t){var r=$.extend(!0,{},t);if(t.detailSectionType!=i)return!1;this.constValue.sectionSeparateValue.pagetot==i?(this.constValue.sectionSeparateValue.tsubtot1==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u),this.constValue.sectionSeparateValue.tsubtot2==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u*2),this.constValue.sectionSeparateValue.tsubtot3==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u),this.constValue.sectionSeparateValue.tsubtot4==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u),this.constValue.sectionSeparateValue.tsubtot5==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u),r[this.constValue.rowVariableNames.mergeStartIndex]-=u):this.constValue.sectionSeparateValue.tsubtot1==i?r[this.constValue.rowVariableNames.mergeStartIndex]-=u:this.constValue.sectionSeparateValue.tsubtot2==i?(this.constValue.sectionSeparateValue.tsubtot1==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u),r[this.constValue.rowVariableNames.mergeStartIndex]-=u*2):this.constValue.sectionSeparateValue.tsubtot3==i?(this.constValue.sectionSeparateValue.tsubtot1==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u),this.constValue.sectionSeparateValue.tsubtot2==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u),r[this.constValue.rowVariableNames.mergeStartIndex]-=u):this.constValue.sectionSeparateValue.tsubtot4==i?(this.constValue.sectionSeparateValue.tsubtot1==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u),this.constValue.sectionSeparateValue.tsubtot2==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u),this.constValue.sectionSeparateValue.tsubtot3==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u),r[this.constValue.rowVariableNames.mergeStartIndex]-=u):this.constValue.sectionSeparateValue.tsubtot5==i?(this.constValue.sectionSeparateValue.tsubtot1==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u),this.constValue.sectionSeparateValue.tsubtot2==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u),this.constValue.sectionSeparateValue.tsubtot3==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u),this.constValue.sectionSeparateValue.tsubtot4==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]-=u),r[this.constValue.rowVariableNames.mergeStartIndex]-=u):this.constValue.sectionSeparateValue.subtot1==i?r[this.constValue.rowVariableNames.mergeStartIndex]+=u:this.constValue.sectionSeparateValue.subtot2==i?(this.constValue.sectionSeparateValue.subtot1==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]+=u),r[this.constValue.rowVariableNames.mergeStartIndex]+=u):this.constValue.sectionSeparateValue.subtot3==i?(this.constValue.sectionSeparateValue.subtot1==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]+=u),this.constValue.sectionSeparateValue.subtot2==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]+=u),r[this.constValue.rowVariableNames.mergeStartIndex]+=u):this.constValue.sectionSeparateValue.subtot4==i?(this.constValue.sectionSeparateValue.subtot1==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]+=u),this.constValue.sectionSeparateValue.subtot2==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]+=u),this.constValue.sectionSeparateValue.subtot3==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]+=u),r[this.constValue.rowVariableNames.mergeStartIndex]+=u):this.constValue.sectionSeparateValue.subtot5==i&&(this.constValue.sectionSeparateValue.subtot1==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]+=u),this.constValue.sectionSeparateValue.subtot2==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]+=u),this.constValue.sectionSeparateValue.subtot3==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]+=u),this.constValue.sectionSeparateValue.subtot4==i&&(r[this.constValue.rowVariableNames.mergeStartIndex]+=u),r[this.constValue.rowVariableNames.mergeStartIndex]+=u);var f=this.getViewDataRenderingTableMapAll(n),e=r[this.constValue.rowVariableNames.mergeStartIndex],h=Math.floor(e/o),c=e%o,l=r[this.constValue.rowVariableNames.rowspanCount]||1,v=l-1,a=r[this.constValue.rowVariableNames.colspanCount]||1,y=a-1;r.columnId=f[h][c].columnId;r.detailSectionType=this.constValue.sectionSeparateValue[i];r.trIdx=f[h][c].trIdx;r.ROW_TYPE=this.constValue.sectionSeparateText[i];s.push(r)}.bind(this));s.length&&(r=r.concat(s),this.dataUtil.singleArraySort(r))}return r},hasDuplicateMergeInformation:function(n,t){var i=this;return n.find(function(n){return n[i.constValue.rowVariableNames.mergeStartIndex]==t[i.constValue.rowVariableNames.mergeStartIndex]})},removeDuplicationMergeSet:function(n,t,i,r){var u=this.data.column.getMergeInfoByDataType(n,t,i,"number");if(u.startColumnId||u.endColumnId){var f={top:u.startRowIndex,left:u.startColumnIndex,bottom:u.endRowIndex,right:u.endColumnIndex},e=this.data.column.getAll(t,this.constValue.returnType.multi),o=e[0].length;return r.remove(function(n){var s=n[this.constValue.rowVariableNames.mergeStartIndex],u=Math.floor(s/o),f=s%o,h=n[this.constValue.rowVariableNames.rowspanCount]||1,v=h-1,c=n[this.constValue.rowVariableNames.colspanCount]||1,y=c-1,t,l,r,a;if(this.optForm.version==this.constValue.formVersion.fourth)for(t=u,l=u+h;t<l;t++)for(r=f,a=f+c;r<a;r++)(t!=u||r!=f)&&(e[t][r].isMergeColumn="0");return n.detailSectionType===i&&n[this.constValue.rowVariableNames.isAutoMerge]===!0}.bind(this)),this.removeMergeInfoOverlayIndex(n,t,f,r),f}},addTotalMergeSet:function(n,t,i,r){var s=this.data.column.getMergeInfoByDataType(n,t,i,"number"),e,f,u;if(s.startColumnId||s.endColumnId){var o=this.removeDuplicationMergeSet(n,t,i,r),h=this.dataColumn.getAll(n,this.constValue.returnType.multi),c=h[0].length;this.mergeSet.duplicateMergeSplit(n,t,i,r,o);e={};e[this.constValue.rowVariableNames.mergeStartIndex]=o.top*c+o.left;e[this.constValue.rowVariableNames.rowspanCount]=o.bottom-o.top+1;e[this.constValue.rowVariableNames.colspanCount]=o.right-o.left+1;e[this.constValue.rowVariableNames.enableSelect]=!0;e[this.constValue.rowVariableNames.isAutoMerge]=!0;e[this.constValue.rowVariableNames.styleUseOwn]=!1;e[this.constValue.rowVariableNames.mergeUseOwn]=!1;f=ecount.resource.LBL10956;u=this.constValue.subtotalRowType;this.optForm.version==this.constValue.formVersion.fourth&&(this.optCommon.columnType==this.constValue.columnType.single?i.contains(this.constValue.sectionSeparateValue.line)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.line],f=$.isNull(this.optRow[n].dataMergeInfoRowTitle)?ecount.resource.LBL21369:this.optRow[n].dataMergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.tsubtot1)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.tsubtot1],f=$.isNull(this.optRow[n].topSubtotal1MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[n].topSubtotal1MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.tsubtot2)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.tsubtot2],f=$.isNull(this.optRow[n].topSubtotal2MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[n].topSubtotal2MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.tsubtot3)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.tsubtot3],f=$.isNull(this.optRow[n].topSubtotal3MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[n].topSubtotal3MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.tsubtot4)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.tsubtot4],f=$.isNull(this.optRow[n].topSubtotal4MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[n].topSubtotal4MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.tsubtot5)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.tsubtot5],f=$.isNull(this.optRow[n].topSubtotal5MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[n].topSubtotal5MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.subtot1)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.subtot1],f=$.isNull(this.optRow[n].bottomSubtotal1MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[n].bottomSubtotal1MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.subtot2)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.subtot2],f=$.isNull(this.optRow[n].bottomSubtotal2MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[n].bottomSubtotal2MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.subtot3)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.subtot3],f=$.isNull(this.optRow[n].bottomSubtotal3MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[n].bottomSubtotal3MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.subtot4)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.subtot4],f=$.isNull(this.optRow[n].bottomSubtotal4MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[n].bottomSubtotal4MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.subtot5)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.subtot5],f=$.isNull(this.optRow[n].bottomSubtotal5MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[n].bottomSubtotal5MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.pagetot)&&(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.pagetot],f=$.isNull(this.optRow[n].pageTotal1MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[n].pageTotal1MergeInfoRowTitle):this.optCommon.columnType==this.constValue.columnType.multi&&(i.contains(this.constValue.sectionSeparateValue.line)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.line],f=$.isNull(this.optRow[t].dataMergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[t].dataMergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.tsubtot1)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.tsubtot1],f=$.isNull(this.optRow[t].topSubtotal1MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[t].topSubtotal1MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.tsubtot2)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.tsubtot2],f=$.isNull(this.optRow[t].topSubtotal2MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[t].topSubtotal2MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.tsubtot3)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.tsubtot3],f=$.isNull(this.optRow[t].topSubtotal3MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[t].topSubtotal3MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.tsubtot4)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.tsubtot4],f=$.isNull(this.optRow[t].topSubtotal4MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[t].topSubtotal4MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.tsubtot5)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.tsubtot5],f=$.isNull(this.optRow[t].topSubtotal5MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[t].topSubtotal5MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.subtot1)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.subtot1],f=$.isNull(this.optRow[t].bottomSubtotal1MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[t].bottomSubtotal1MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.subtot2)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.subtot2],f=$.isNull(this.optRow[t].bottomSubtotal2MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[t].bottomSubtotal2MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.subtot3)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.subtot3],f=$.isNull(this.optRow[t].bottomSubtotal3MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[t].bottomSubtotal3MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.subtot4)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.subtot4],f=$.isNull(this.optRow[t].bottomSubtotal4MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[t].bottomSubtotal4MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.subtot5)?(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.subtot5],f=$.isNull(this.optRow[t].bottomSubtotal5MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[t].bottomSubtotal5MergeInfoRowTitle):i.contains(this.constValue.sectionSeparateValue.pagetot)&&(u=this.constValue.sectionSeparateText[ecount.grid.constValue.sectionSeparateValue.pagetot],f=$.isNull(this.optRow[t].pageTotal1MergeInfoRowTitle)?ecount.resource.LBL10956:this.optRow[t].pageTotal1MergeInfoRowTitle)),t==this.tfootType&&i.contains(this.constValue.sectionSeparateValue.line)&&(u="total"));e.detailSectionType=i;e[this.constValue.rowVariableNames.rowType]=u;e[this.constValue.rowVariableNames.rowTitle]=f;e[this.constValue.rowVariableNames.isCenterAlign]=this.optFoot.styleFontAlign;e[this.constValue.rowVariableNames.vAlignType]=this.optFoot.styleFontVAlign;e[this.constValue.rowVariableNames.isBold]=this.optFoot.styleFontBold;e[this.constValue.rowVariableNames.isFontItalic]=this.optFoot.styleFontItalic;e[this.constValue.rowVariableNames.isFontStrike]=this.optFoot.styleFontStrike;e[this.constValue.rowVariableNames.isFontUnderline]=this.optFoot.styleFontUnderline;e[this.constValue.rowVariableNames.font]=this.optFoot.styleFont;e[this.constValue.rowVariableNames.fontColor]=this.optFoot.styleFontColor;r.push(e);this.dataUtil.singleArraySort(r)}},removeTotalMergeSet:function(n,t,i,r){var u,o,s,f,e;if(this.optCommon.columnType==this.constValue.columnType.single?(u=this.dataColumn.getMergeInfoByDataType(this.theadType,this.theadType,i,"number"),o=this.dataColumn.getAll(this.theadType,this.constValue.returnType.multi),s=o[0].length):(u=this.dataColumn.getMergeInfoByDataType(n,t,i,"number"),o=this.dataColumn.getAll(n,this.constValue.returnType.multi),s=o[0].length),u.startColumnId||u.endColumnId)for(f={top:u.startRowIndex,left:u.startColumnIndex,bottom:u.endRowIndex,right:u.endColumnIndex},f=this.getMinBoundary(n,f,r),e=r.length-1;e>-1;e--){var h=r[e][this.constValue.rowVariableNames.mergeStartIndex],a=r[e][this.constValue.rowVariableNames.rowspanCount]||1,y=a-1,v=r[e][this.constValue.rowVariableNames.colspanCount]||1,p=v-1,c=Math.floor(h/s),l=h%s;f.top<=c&&f.bottom>=c&&f.left<=l&&f.right>=l&&r.splice(e,1)}},setCustomRowCell:function(){var n,t;if((this.optForm.version==this.constValue.formVersion.third||this.optForm.version==this.constValue.formVersion.fourth)&&this.optCommon.columnType==this.constValue.columnType.single&&(n=this.optColumn[this.tbodyType].customCell,n))for(t in n)n.hasOwnProperty(t)&&this.__setting.setCustomRowCell(this.tfootType,t,n[t])},initDataValue:function(){var gi=this,y,n,s,ct,lt,c,gt,p,ni,nr=this.__setting.getCommonColumnType(),tt,at,it,w,oi,rt,si,wt,r,o,l,f,bt,nt,b,i,a,ut,e,pt,ft,hi,ci,k,d,kt,li,v,ot,ai,h,et,dt,u,g,st,vi;for(y=[this.theadType,this.tbodyType],this.hasTfoot(!0)&&y.push(this.tfootType),this.optRow[this.tbodyType].dataUseFirst=!1,this._sectionLength=y.length,this.view.setSectionTypes(y),it=0;it<this._sectionLength;it++){var t=null,vt=null,ti=null,ii=null,ri=null,yt=null,ui=null,fi=null,ei=null;if(n=y[it],p=this.getAdditionalDatas(n),ni=this.optRow[n].notContainRowType||[],this.setStructureInfo(n),this.data.column.setStructureInfo(n),pt=this.data.column.getDataConversionColumnKeys(n),s=this.data.column.getAll(n,this.constValue.returnType.multi),c=s[0].length,gt=c-1,ct=this.data.column.getAll(n,this.constValue.returnType.keys),tt=this.data.column.getValidationColumns(n),at=this.data.column.getConvetorDecimalList(n),t=Object.clone(this.optRow[n].datas)||[],n==this.tbodyType&&this.optEvent.triggerAfterRowDataLoadOnSetRowData&&this.__events&&this.__events._triggerEvent(ecount.grid.event.list.afterRowDataLoad,{},{result:{Data:t},totalCount:null,isLimitData:!1}),[this.constValue.gridType.editable,this.constValue.gridType.editableForm].contains(this.optCommon.gridType))if(n==this.tfootType&&this.optCommon.columnType==this.constValue.columnType.single)for(o=0,l=this.optRow[n].specialRowCount;o<l;o++){for(f={},f[this.constValue.rowStatePropertyName]=this.constValue.rowState.create,w=0,oi=s.length;w<oi;w++)for(rt=0,si=s[w].length;rt<si;rt++)f[s[w][rt].propertyName]="";if(_.extend(f,Object.clone(p,!0)),this.optEditable.specialRowMerge||(this.optEditable.specialRowMerge=[]),this.optEditable.specialRowMerge.length==0&&(wt={},wt[this.constValue.rowVariableNames.mergeSet]=[],this.optEditable.specialRowMerge.push(wt)),this.optForm.version==this.constValue.formVersion.third&&this.optCommon.useMergeAutoGenratorTotal)this.addTotalMergeSet(this.theadType,this.theadType,null,this.optEditable.specialRowMerge[o][this.constValue.rowVariableNames.mergeSet]);else if(this.optForm.version==this.constValue.formVersion.fourth&&this.optCommon.useMergeAutoGenratorTotal)if(r=this.dataColumn.getDetailSections(n),this.optForm.version==this.constValue.formVersion.fourth)f[this.constValue.rowVariableNames.mergeSet]||(f[this.constValue.rowVariableNames.mergeSet]=[]),u=f[this.constValue.rowVariableNames.mergeSet],u.remove(function(n){return n[this.constValue.rowVariableNames.isAutoMerge]}.bind(this)),(r.contains(this.constValue.sectionSeparateValue.pagetotslip)||r.contains(this.constValue.sectionSeparateValue.pagetot))&&this.addTotalMergeSet(n,n,[this.constValue.sectionSeparateValue.pagetotslip,this.constValue.sectionSeparateValue.pagetot],u),(r.contains(this.constValue.sectionSeparateValue.subtot1slip)||r.contains(this.constValue.sectionSeparateValue.subtot1))&&this.addTotalMergeSet(n,n,[this.constValue.sectionSeparateValue.subtot1slip,this.constValue.sectionSeparateValue.subtot1],u),(r.contains(this.constValue.sectionSeparateValue.subtot2slip)||r.contains(this.constValue.sectionSeparateValue.subtot2))&&this.addTotalMergeSet(n,n,[this.constValue.sectionSeparateValue.subtot2slip,this.constValue.sectionSeparateValue.subtot2],u),(r.contains(this.constValue.sectionSeparateValue.subtot3slip)||r.contains(this.constValue.sectionSeparateValue.subtot3))&&this.addTotalMergeSet(n,n,[this.constValue.sectionSeparateValue.subtot3slip,this.constValue.sectionSeparateValue.subtot3],u),(r.contains(this.constValue.sectionSeparateValue.subtot4slip)||r.contains(this.constValue.sectionSeparateValue.subtot4))&&this.addTotalMergeSet(n,n,[this.constValue.sectionSeparateValue.subtot4slip,this.constValue.sectionSeparateValue.subtot4],u),(r.contains(this.constValue.sectionSeparateValue.subtot5slip)||r.contains(this.constValue.sectionSeparateValue.subtot5))&&this.addTotalMergeSet(n,n,[this.constValue.sectionSeparateValue.subtot5slip,this.constValue.sectionSeparateValue.subtot5],u),(r.contains(this.constValue.sectionSeparateValue.slip)||r.contains(this.constValue.sectionSeparateValue.line))&&this.addTotalMergeSet(n,n,[this.constValue.sectionSeparateValue.slip,this.constValue.sectionSeparateValue.line],u);else for(i=0,a=r.length;i<a;i++)this.addTotalMergeSet(n,n,[r[i]],this.optEditable.specialRowMerge[o][this.constValue.rowVariableNames.mergeSet]);this.optEditable.specialRowMerge&&o<this.optEditable.specialRowMerge.length&&(f[this.constValue.rowVariableNames.mergeSet]&&this.optEditable.specialRowMerge[o][this.constValue.rowVariableNames.mergeSet]?(this.optEditable.specialRowMerge[o][this.constValue.rowVariableNames.mergeSet].forEach(function(n){f[this.constValue.rowVariableNames.mergeSet].remove(function(t){return t[this.constValue.rowVariableNames.mergeStartIndex]==n[this.constValue.rowVariableNames.mergeStartIndex]}.bind(this))}.bind(this)),f[this.constValue.rowVariableNames.mergeSet]=f[this.constValue.rowVariableNames.mergeSet].concat(Object.clone(this.optEditable.specialRowMerge[o][this.constValue.rowVariableNames.mergeSet],!0)),this.dataUtil.singleArraySort(f[this.constValue.rowVariableNames.mergeSet])):!f[this.constValue.rowVariableNames.mergeSet]&&this.optEditable.specialRowMerge[o][this.constValue.rowVariableNames.mergeSet]&&(f[this.constValue.rowVariableNames.mergeSet]=Object.clone(this.optEditable.specialRowMerge[o][this.constValue.rowVariableNames.mergeSet])));t||(t=[]);t.push(f)}else if(this.constValue.formVersion.fourth==this.optForm.version&&[this.theadType,this.tbodyType].contains(n)&&this.optCommon.columnType==this.constValue.columnType.single)for(o=0,l=t.length;o<l;o++)f=t[o],f[this.constValue.rowStatePropertyName]=this.constValue.rowState.create,_.extend(f,_.cloneDeep(p)),e=f[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate?this.tfootType:n,this.optCommon.useMergeAutoGenratorTotal&&(r=this.dataColumn.getDetailSections(n),f[this.constValue.rowVariableNames.mergeSet]||(f[this.constValue.rowVariableNames.mergeSet]=[]),u=f[this.constValue.rowVariableNames.mergeSet],u.remove(function(n){return n[this.constValue.rowVariableNames.isAutoMerge]}.bind(this)),(r.contains(this.constValue.sectionSeparateValue.pagetotslip)||r.contains(this.constValue.sectionSeparateValue.pagetot))&&this.addTotalMergeSet(n,e,[this.constValue.sectionSeparateValue.pagetotslip,this.constValue.sectionSeparateValue.pagetot],u),(r.contains(this.constValue.sectionSeparateValue.subtot1slip)||r.contains(this.constValue.sectionSeparateValue.subtot1))&&this.addTotalMergeSet(n,e,[this.constValue.sectionSeparateValue.subtot1slip,this.constValue.sectionSeparateValue.subtot1],u),(r.contains(this.constValue.sectionSeparateValue.subtot2slip)||r.contains(this.constValue.sectionSeparateValue.subtot2))&&this.addTotalMergeSet(n,e,[this.constValue.sectionSeparateValue.subtot2slip,this.constValue.sectionSeparateValue.subtot2],u),(r.contains(this.constValue.sectionSeparateValue.subtot3slip)||r.contains(this.constValue.sectionSeparateValue.subtot3))&&this.addTotalMergeSet(n,e,[this.constValue.sectionSeparateValue.subtot3slip,this.constValue.sectionSeparateValue.subtot3],u),(r.contains(this.constValue.sectionSeparateValue.subtot4slip)||r.contains(this.constValue.sectionSeparateValue.subtot4))&&this.addTotalMergeSet(n,e,[this.constValue.sectionSeparateValue.subtot4slip,this.constValue.sectionSeparateValue.subtot4],u),(r.contains(this.constValue.sectionSeparateValue.subtot5slip)||r.contains(this.constValue.sectionSeparateValue.subtot5))&&this.addTotalMergeSet(n,e,[this.constValue.sectionSeparateValue.subtot5slip,this.constValue.sectionSeparateValue.subtot5],u),e==this.tfootType&&(r.contains(this.constValue.sectionSeparateValue.slip)||r.contains(this.constValue.sectionSeparateValue.line))&&this.addTotalMergeSet(n,e,[this.constValue.sectionSeparateValue.slip,this.constValue.sectionSeparateValue.line],u)),f[this.constValue.rowVariableNames.mergeSet]&&this.dataUtil.singleArraySort(f[this.constValue.rowVariableNames.mergeSet]);else if(this.optCommon.columnType==this.constValue.columnType.multi)if([this.constValue.formVersion.fourth].contains(this.optForm.version)){if(this.optCommon.isSubtotalInitialAutomaticMergeSetting||this.optCommon.isTotalInitialAutomaticMergeSetting){for(o=0,l=t.length;o<l;o++){f=t[o];f[this.constValue.rowVariableNames.mergeSet]||(f[this.constValue.rowVariableNames.mergeSet]=[]);var u=f[this.constValue.rowVariableNames.mergeSet],e=f[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate?this.tfootType:n,r=this.dataColumn.getDetailSections(e);this.optCommon.isSubtotalInitialAutomaticMergeSetting&&e==this.tbodyType?(u.remove(function(n){return n[this.constValue.rowVariableNames.isAutoMerge]}.bind(this)),(r.contains(this.constValue.sectionSeparateValue.subtot1slip)||r.contains(this.constValue.sectionSeparateValue.subtot1))&&this.addTotalMergeSet(n,e,[this.constValue.sectionSeparateValue.subtot1slip,this.constValue.sectionSeparateValue.subtot1],u),(r.contains(this.constValue.sectionSeparateValue.subtot2slip)||r.contains(this.constValue.sectionSeparateValue.subtot2))&&this.addTotalMergeSet(n,e,[this.constValue.sectionSeparateValue.subtot2slip,this.constValue.sectionSeparateValue.subtot2],u),(r.contains(this.constValue.sectionSeparateValue.subtot3slip)||r.contains(this.constValue.sectionSeparateValue.subtot3))&&this.addTotalMergeSet(n,e,[this.constValue.sectionSeparateValue.subtot3slip,this.constValue.sectionSeparateValue.subtot3],u),(r.contains(this.constValue.sectionSeparateValue.subtot4slip)||r.contains(this.constValue.sectionSeparateValue.subtot4))&&this.addTotalMergeSet(n,e,[this.constValue.sectionSeparateValue.subtot4slip,this.constValue.sectionSeparateValue.subtot4],u),(r.contains(this.constValue.sectionSeparateValue.subtot5slip)||r.contains(this.constValue.sectionSeparateValue.subtot5))&&this.addTotalMergeSet(n,e,[this.constValue.sectionSeparateValue.subtot5slip,this.constValue.sectionSeparateValue.subtot5],u)):this.optCommon.isTotalInitialAutomaticMergeSetting&&e==this.tfootType&&(u.remove(function(n){return n[this.constValue.rowVariableNames.isAutoMerge]}.bind(this)),(r.contains(this.constValue.sectionSeparateValue.pagetotslip)||r.contains(this.constValue.sectionSeparateValue.pagetot))&&this.addTotalMergeSet(n,e,[this.constValue.sectionSeparateValue.pagetotslip,this.constValue.sectionSeparateValue.pagetot],u),(r.contains(this.constValue.sectionSeparateValue.slip)||r.contains(this.constValue.sectionSeparateValue.line))&&this.addTotalMergeSet(n,e,[this.constValue.sectionSeparateValue.slip,this.constValue.sectionSeparateValue.line],u))}n!=this.theadType&&(this.optCommon.isSubtotalInitialAutomaticMergeSetting=!1,this.optCommon.isTotalInitialAutomaticMergeSetting=!1)}}else t=Object.clone(t,!0);else t=Object.clone(t,!0);else t=Object.clone(t,!0);if(this.optPaging.use&&n==this.tbodyType&&(bt=t.length>0?t[0][this.constValue.row.maxCount]||this.optPaging.totalRowCount:this.optPaging.totalRowCount,this.dataPaging.setTotalRowCount(bt),this.optPaging.totalRowCount=bt),n==this.tbodyType&&([this.constValue.gridType.editable,this.constValue.gridType.editableForm].contains(this.optCommon.gridType)?this.initMinRowCount("custom",n,t):[this.constValue.gridRenderType.typeSpecTran,this.constValue.gridRenderType.salaryPayrollBookList,this.constValue.gridRenderType.typeSplitList,this.constValue.gridRenderType.typeStatusList].contains(this.optCommon.renderType)&&this.optFormOption.bodyRowCount>0&&ecount.convertor.initSeperateGridRowData(t,{bodyRowCount:this.optFormOption.bodyRowCount,isAppearTopAreaOnlyFirst:this.optFormOption.isAppearTopAreaOnlyFirst,appearTopAreaOnlyFirstAddBodyRowCount:this.optFormOption.appearTopAreaOnlyFirstAddBodyRowCount,isAppearBottomAreaLast:this.optFormOption.isAppearBottomAreaLast,appearBottomAreaLastAddBodyRowCount:this.optFormOption.appearBottomAreaLastAddBodyRowCount,removeEmptyLine:this.optFormOption.removeEmptyLine,emptyRowMergeInfo:this.optRow[this.tbodyType].emptyRowMergeInfo}),this.optFormOption.gridCountPerPage=="2"&&ecount.convertor.initDivisionGridRowData(t)),this.dataCheckbox)for(nt=this.dataCheckbox.getCheckboxUseColumnList(n),b=0,a=nt.length;b<a;b++)nt[b].use==!0&&this.dataCheckbox.setAvailablePageCount(n,nt[b].columnId,t.length*s.length);for(i=0,a=t.length;i<a;i++){if(n==this.theadType&&(s==null||s.length==0)){lt=[];for(ut in t[i])t[i].hasOwnProperty(ut)&&lt.push(this.data.column.getDefaultColumn({id:ut,propertyName:ut}));this.__setting.setColumns(n,lt);n==this.theadType&&this.data.column.initMakeColumn();this.data.column.initPrimitiveColumns(n);s=this.data.column.getAll(n,this.constValue.returnType.multi)}if(p&&(t[i][this.constValue.rowStatePropertyName]==this.constValue.rowState.create||ni.contains(t[i][this.constValue.rowVariableNames.rowType])||(t[i]=$.extend(!0,{},p,t[i]))),t[i]=this._normalizeProperties(t[i]),e=t[i][this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate?this.tfootType:n,pt=this.data.column.getDataConversionColumnKeys(e),s=this.data.column.getAll(e,this.constValue.returnType.multi),c=s[0].length,gt=c-1,ct=this.data.column.getAll(e,this.constValue.returnType.keys),tt=this.data.column.getValidationColumns(e),at=this.data.column.getConvetorDecimalList(e),t[i][this.constValue.keyColumnPropertyName]!=this.constValue.rowEmptyRowPropertyName&&this.makeKey(n,t[i]),t[i][this.constValue.rowCountColumnPropertyName]=i+1,this.makeState(n,t[i],this.optRow[n].isInitRowState?this.optRow[n].initRowState:this.constValue.rowState.none),this.optRow[n].isInitRowIndex&&[ecount.grid.constValue.rowState.none,ecount.grid.constValue.rowState.changed,ecount.grid.constValue.rowState.changedIndex,ecount.grid.constValue.rowState.deleted].contains(t[i][this.constValue.rowStatePropertyName])&&(t[i][this.constValue.rowIndexPropertyName]=this.__core.initRowCount,this.__core.initRowCount+=1),t[i][this.constValue.rowVariableNames.mergeSet]&&this.optRow[n].mergeSet?(Array.prototype.push.apply(t[i][this.constValue.rowVariableNames.mergeSet],this.optRow[n].mergeSet),this.dataUtil.singleArraySort(t[i][this.constValue.rowVariableNames.mergeSet])):this.optRow[n].mergeSet&&(t[i][this.constValue.rowVariableNames.mergeSet]=this.optRow[n].mergeSet),this.addSystemMergeInfo(n,t[i],i),n==this.tbodyType)for(this.optNumbering.use&&(t[i][this.constValue.rowNumberingPropertyName]=i+1),this.optRowmoveable.use&&(t[i][this.constValue.rowMoveablePropertyName]=i.toString()),ft=0,hi=tt.length;ft<hi;ft++)this.dataValidate.add(this.constValue.validateType.system,n,tt[ft],t[i][this.constValue.keyColumnPropertyName],{result:!1,isValidate:!1,error:{popover:{visible:!0,message:"",placement:"auto",maxWidth:300},css:{visible:!0},widget:{needValidate:!1,errorType:null,useValidate:!1}}});if(u=t[i][this.constValue.rowVariableNames.mergeSet],this.optCommon.renderType==this.constValue.gridRenderType.salarySetting&&(this.optCommon.columnType==this.constValue.columnType.single||this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tbodyType)&&(ci=this.optColumn[n].repeatCount,ci>0&&u)){for(k=this.data.column.__datas[n].columnCountOfRow,d=s.length-1;d>-1;d--)for(kt=d*k,li=kt+k,h=0,et=u.length;h<et;h++)v=parseInt(u[h][this.constValue.rowVariableNames.mergeStartIndex],10),v>=kt&&v<li&&(u[h][this.constValue.rowVariableNames.mergeStartIndex]=v+k*this.optColumn[n].repeatCount*d);for(ot=0,ai=this.optColumn.repeatCount;ot<ai;ot++)for(h=0,et=u.length;h<et;h++)dt=Object.clone(u[h]),dt[this.constValue.rowVariableNames.mergeStartIndex]+=k*(ot+1),u.push(dt);this.dataUtil.singleArraySort(u)}if(this.optCommon.gridType==this.constValue.gridType.editableForm&&n==this.tfootType&&(u=t[i][this.constValue.rowVariableNames.mergeSet],g=this.optEditable.specialRowMerge[i]&&this.optEditable.specialRowMerge[i][this.constValue.rowVariableNames.mergeSet],u&&u.length>0&&g&&g.length>0)){for(st=0,vi=g.length;st<vi;st++){var ht=Object.clone(g[st],!0),v=ht[this.constValue.rowVariableNames.mergeStartIndex],wi=ht[this.constValue.rowVariableNames.rowspanCount]||1,bi=wi-1,ki=ht[this.constValue.rowVariableNames.colspanCount]||1,di=ki-1,yi=Math.floor(v/c),pi=v%c;this.removeMergeInfoOverlayIndex(n,e,{top:yi,left:pi,bottom:yi+bi,right:pi+di},u);u.push(ht)}this.dataUtil.singleArraySort(u)}this.optShaded.use&&this.theadType!=n&&this.makeShaded(n,t[i]);this.initDecimalValue(n,t[i],ct,pt,at);this.setSkipRowLineData(n,t[i-1],t[i],t[i+1],s.length);this.dataCheckbox.getCheckboxUse(n,this.constValue.checkBoxPropertyName)&&(this.__datas[n].skipRowLine[i]&&Object.keys(this.__datas[n].skipRowLine[i]).length>0&&this.skipRowMergeSetInfo&&this.skipRowMergeSetInfo[this.constValue.rowVariableNames.mergeSet]?this.adjustMergeInfo(n,this.skipRowMergeSetInfo[this.constValue.rowVariableNames.mergeSet],i,s):t[i][this.constValue.rowVariableNames.mergeSet]&&(this.skipRowMergeSetInfo=t[i]));this.__datas[n].keys[t[i][this.constValue.keyColumnPropertyName]]=t[i];this.optCommon.columnType==this.constValue.columnType.multi&&(t[i][this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate?(yt==null&&(yt=i,fi=i+1),ui=i,ei=i+1):(vt==null&&(vt=i,ii=i+1),ti=i,ri=i+1))}this.tbodyType==n&&this.optCommon.gridStyle==this.constValue.gridStyle.tree&&t.length>0&&(t=this.makeTree(n,t));this.__datas[n].datas=t;this.__datas[n].removeDatas=[];n==this.tbodyType&&this.initCheckedValue(n);this.__datas[n].tbodyStartRowIndex=vt;this.__datas[n].tbodyEndRowIndex=ti;this.__datas[n].tbodyStartRowCount=ii;this.__datas[n].tbodyEndRowCount=ri;this.__datas[n].tfootStartRowIndex=yt;this.__datas[n].tfootEndRowIndex=ui;this.__datas[n].tfootStartRowCount=fi;this.__datas[n].tfootEndRowCount=ei;this.optForm.version==this.constValue.formVersion.fourth&&this.syncColumnFormatByMergeset(n);n==this.tfootType?ecount.global.setTimeout(this.optCommon.ecPageId,function(){this.view.makeViewData(n,{dataRowStartIndex:0,dataRowEndIndex:t.length})}.bind(this),0):this.view.makeViewData(n,{dataRowStartIndex:0,dataRowEndIndex:t.length});this.optCommon.formVersion==this.constValue.formVersion.fourth&&(n==this.tbodyType?this.optCOmmon.isSubtotalInitialAutomaticMergeSetting&&(this.optCOmmon.isSubtotalInitialAutomaticMergeSetting=!1):n==this.theadType&&(this.optCOmmon.isPagetotalInitialAutomaticMergeSetting&&(this.optCOmmon.isPagetotalInitialAutomaticMergeSetting=!1),this.optCOmmon.isTotalInitialAutomaticMergeSetting&&(this.optCOmmon.isTotalInitialAutomaticMergeSetting=!1)))}},initDataFormValue:function(){var g=this,nt,c=[this.theadType,this.tbodyType],n,r,tt,b,u,it=this.__setting.getCommonColumnType(),l,rt,kt,ut,v,t,lt,e,at,o,vt,y,yt,a,pt,s,i,p,w,f,wt,h,bt;for([this.constValue.gridType.editable,this.constValue.gridType.editableForm].contains(this.optCommon.gridType)&&this.hasTfoot(!0)&&c.push(this.tfootType),this._sectionLength=c.length,this.view.setSectionTypes(c),v=0;v<this._sectionLength;v++){var k=null,ft=null,et=null,ot=null,d=null,st=null,ht=null,ct=null;if(ecount.gridV2.config.dataPerformance&&(nt=(new Date).getTime()),t=[],n=c[v],this.setStructureInfo(n),kt=this.optRow[n].keyColumnIdList,l=this.getAdditionalDatas(n),rt=this.optRow[n].notContainRowType||[],this.data.column.setStructureInfo(n),lt=this.data.column.getDataConversionColumnKeys(n),r=this.data.column.getAll(n,this.constValue.returnType.multi),tt=this.data.column.getAll(n,this.constValue.returnType.keys),ut=this.data.column.getConvetorDecimalList(n),[this.constValue.columnType.single,this.constValue.columnType.each].contains(it))if(n!=this.theadType&&this.optRow[this.tbodyType].url&&this.optRow[this.tbodyType].param){if(this.optRow[n].apiDatas!=null)t=Object.clone(this.optRow[n].apiDatas,!0);else if(this.optRow[n].specialRowCount>0&&this.tfootType==n)for(e=0,at=this.optRow[n].specialRowCount;e<at;e++){for(u={},u[this.constValue.rowStatePropertyName]=this.constValue.rowState.create,o=0,vt=r.length;o<vt;o++)for(y=0,yt=r[o].length;y<yt;y++)u[r[o][y].propertyName]="";_.extend(u,l);this.optEditable.specialRowMerge&&e<this.optEditable.specialRowMerge.length&&(u=$.extend(!0,{},u,this.optEditable.specialRowMerge[e]));t.push(u)}}else t=Object.clone(this.optRow[n].datas,!0);else[this.constValue.columnType.multi].contains(it)&&(n!=this.theadType&&this.optRow[this.tbodyType].url&&this.optRow[this.tbodyType].param?this.optRow[n].apiDatas!=null&&(t=Object.clone(this.optRow[n].apiDatas,!0)):t=Object.clone(this.optRow[n].datas,!0));if(t=t||[],n==this.tbodyType&&([this.constValue.gridType.editable,this.constValue.gridType.editableForm].contains(this.optCommon.gridType)?this.initMinRowCount("api",n,t):[this.constValue.gridRenderType.typeSpecTran,this.constValue.gridRenderType.salaryPayrollBookList,this.constValue.gridRenderType.typeSplitList,this.constValue.gridRenderType.typeStatusList].contains(this.optCommon.renderType)&&this.optFormOption.bodyRowCount>0&&ecount.convertor.initSeperateGridRowData(t,{bodyRowCount:this.optFormOption.bodyRowCount,isAppearTopAreaOnlyFirst:this.optFormOption.isAppearTopAreaOnlyFirst,appearTopAreaOnlyFirstAddBodyRowCount:this.optFormOption.appearTopAreaOnlyFirstAddBodyRowCount,isAppearBottomAreaLast:this.optFormOption.isAppearBottomAreaLast,appearBottomAreaLastAddBodyRowCount:this.optFormOption.appearBottomAreaLastAddBodyRowCount,removeEmptyLine:this.optFormOption.removeEmptyLine,emptyRowMergeInfo:this.optRow[this.tbodyType].emptyRowMergeInfo}),this.optFormOption.gridCountPerPage=="2"&&ecount.convertor.initDivisionGridRowData(t)),this.dataCheckbox)for(a=this.dataCheckbox.getCheckboxUseColumnList(n),pt=t.filter(function(n){return n[this.constValue.rowVariableNames.rowType]!==this.constValue.totalRowType}.bind(this)),s=0,p=a.length;s<p;s++)a[s].use==!0&&this.dataCheckbox.setAvailablePageCount(n,a[s].columnId,pt.length*r.length);for(i=0,p=t.length;i<p;i++){if(n==this.theadType&&(r==null||r.length==0)){b=[];for(w in t[i])t[i].hasOwnProperty(w)&&b.push(this.data.column.getDefaultColumn({id:w,propertyName:w}));this.__setting.setColumns(n,b);n==this.theadType&&this.data.column.initMakeColumn();this.data.column.initPrimitiveColumns(n);r=this.data.column.getAll(n,this.constValue.returnType.multi)}if(l&&(t[i][this.constValue.rowStatePropertyName]==this.constValue.rowState.create||rt.contains(t[i][this.constValue.rowVariableNames.rowType])||(t[i]=$.extend(!0,{},l,t[i]))),t[i]=this._normalizeProperties(t[i]),t[i][this.constValue.keyColumnPropertyName]!=this.constValue.rowEmptyRowPropertyName&&this.makeKey(n,t[i]),t[i][this.constValue.rowCountColumnPropertyName]=i+1,this.makeState(n,t[i],this.optRow[n].isInitRowState?this.optRow[n].initRowState:this.constValue.rowState.none),this.optRow[n].isInitRowIndex&&[ecount.grid.constValue.rowState.none,ecount.grid.constValue.rowState.changed,ecount.grid.constValue.rowState.changedIndex,ecount.grid.constValue.rowState.deleted].contains(t[i][this.constValue.rowStatePropertyName])&&(t[i][this.constValue.rowIndexPropertyName]=this.__core.initRowCount,this.__core.initRowCount+=1),this.addSystemMergeInfo(n,t[i],i),t[i][this.constValue.rowVariableNames.mergeSet]&&this.optRow[n].mergeSet&&(t[i][this.constValue.rowVariableNames.mergeSet]=t[i][this.constValue.rowVariableNames.mergeSet].concat(this.optRow[n].mergeSet),t[i][this.constValue.rowVariableNames.mergeSet].sort(function(n,t){return parseInt(n[g.constValue.rowVariableNames.mergeStartIndex],10)>parseInt(t[g.constValue.rowVariableNames.mergeStartIndex],10)})),this.optShaded.use&&this.theadType!=n&&this.makeShaded(n,t[i]),this.optMatrixState.use&&r.length>1)for(f=0,wt=r.length;f<wt;f++)for(h=0,bt=r[f];h<bt;h++)this.matrixState.setCell(n,ecount.grid.constValue.matrixState.standardLine.row,t[i][this.constValue.keyColumnPropertyName],r[f][h].id,{state:t[i][ecount.grid.constValue.rowStatePropertyName]}),this.matrixState.setCell(n,ecount.grid.constValue.matrixState.standardLine.column,r[f][h].id,t[i][this.constValue.keyColumnPropertyName],{state:t[i][ecount.grid.constValue.rowStatePropertyName]});this.initDecimalValue(n,t[i],tt,lt,ut);this.setSkipRowLineData(n,t[i-1],t[i],t[i+1],r.length);this.dataCheckbox.getCheckboxUse(n,this.constValue.checkBoxPropertyName)&&(this.__datas[n].skipRowLine[i]&&Object.keys(this.__datas[n].skipRowLine[i]).length>0&&this.skipRowMergeSetInfo&&this.skipRowMergeSetInfo[this.constValue.rowVariableNames.mergeSet]?this.adjustMergeInfo(n,this.skipRowMergeSetInfo[this.constValue.rowVariableNames.mergeSet],i,r):t[i][this.constValue.rowVariableNames.mergeSet]&&(this.skipRowMergeSetInfo=t[i]));this.__datas[n].keys[t[i][this.constValue.keyColumnPropertyName]]=t[i];this.optCommon.columnType==this.constValue.columnType.multi&&(t[i][this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate?(d==null&&(d=i,ht=i+1),st=i,ct=i+1):(k==null&&(k=i,et=i+1),ft=i,ot=i+1))}this.tbodyType==n&&this.optCommon.gridStyle==this.constValue.gridStyle.tree&&t.length>0&&(t=this.makeTree(n,t));this.__datas[n].datas=t;this.__datas[n].removeDatas=[];n==this.tbodyType&&this.initCheckedValue(n);this.__datas[n].tbodyStartRowIndex=k;this.__datas[n].tbodyEndRowIndex=ft;this.__datas[n].tbodyStartRowCount=et;this.__datas[n].tbodyEndRowCount=ot;this.__datas[n].tfootStartRowIndex=d;this.__datas[n].tfootEndRowIndex=st;this.__datas[n].tfootStartRowCount=ht;this.__datas[n].tfootEndRowCount=ct;ecount.gridV2.config.dataPerformance&&ecount.gridV2.util.log(String.format("row data {0} performance time: {1}ms",n,(new Date).getTime()-nt));n==this.tfootType?ecount.global.setTimeout(this.optCommon.ecPageId,function(){this.view.makeViewData(n,{dataRowStartIndex:0,dataRowEndIndex:t.length})}.bind(this),0):this.view.makeViewData(n,{dataRowStartIndex:0,dataRowEndIndex:t.length})}},initMinRowCount:function(n,t,i){for(var s,f,e,v,y=0,h=this.data.column.getAll(t),r={},u=0,c=h.length;u<c;u++)r[h[u].propertyName]="";_.extend(r,this.getAdditionalDatas(t)||{});r[this.constValue.rowStatePropertyName]=this.constValue.rowState.create;var l=this.optEditable.initialRowCount,p=this.optEditable.initialRowCountMargin,a=this.optEditable.editLimitAddRow,o=p+i.length;if(!$.isEmpty(a)&&o>a&&(o=a),l<o&&(l=o),y=l-i.length,n=="custom"&&this.optRow[t]&&this.optRow[t].defaultValue)for(s in this.optRow[t].defaultValue)f=h.find(function(n){return n.propertyName==s}),e=this.optRow[t].defaultValue[s],f&&this.data.column.isDecimalDataType(t,f.id)&&(v=this.data.column.getConvertor(t,this.constValue.dataType.modeView,f.id),e=v&&v(e,f)||e),r[s]=e;for(this.optRow[t]&&this.optRow[t].emptyRowMergeInfo&&(r[this.constValue.rowVariableNames.mergeSet]=Object.clone(this.optRow[t].emptyRowMergeInfo,!0)),u=0,c=y;u<c;u++)i.push(Object.clone(r,!0))},initDecimalValue:function(n,t,i,r,u){var e,o,f;if(r=r||{},[this.tbodyType,this.tfootType].contains(n))for(e in u)if(u.hasOwnProperty(e)&&(o=i[e]||r[e],o.controlOption.numberType==this.constValue.numberType.decimal)){if(f=t[o.propertyName],f==undefined||f=="")continue;f=f.toString().replace(this.constValue.thousandsPattern,"");t[o.propertyName]=u[e](f,{dataType:"910",isCheckZero:ecount.common.isTrue(o.controlOption.isCheckZero),amtCalc:"r"}).replace(this.constValue.thousandsPattern,"")}},makeViewDataReplaceCell:function(n,t,i,r){var u,f;r=r||{};var e=r.rowCurrentRowIndex||0,o=r.columnCurrentColumnIndex||0,s=this.getById(n,i),h=s[this.constValue.rowVariableNames.rowType],c=this.view.getViewDataMadeRowAll(n),l=this._trMap;return r.tempSectionType=h==this.constValue.rowType.separate?this.tfootType:null,u=this.view.makeViewDataCell(n,t,i,r),c[e].cells[o]=u.cellData,f=l[i][t],f.disabled=u.disabled,f.controlType=u.controlType,f.editControlType=u.editControlType,f.dropdownmenuData=u.dropdownmenuData,f.editableState=u.editableState,f.eventKeyByEventType=u.eventKeyByEventType,u},setDateOption:function(n,t){t.controlOption||(t.controlOption={});typeof t.hideDateControl=="boolean"&&(t.controlOption.hideDateControl=t.hideDateControl);typeof t.isHideDateOptionChecked=="boolean"&&(t.controlOption.isHideDateOptionChecked=t.isHideDateOptionChecked);typeof t.isOnlyThisYear=="boolean"&&(t.controlOption.isOnlyThisYear=t.isOnlyThisYear);typeof t.hideDateButton=="boolean"&&(t.controlOption.hideDateButton=t.hideDateButton);typeof t.useDateSpace=="boolean"&&(t.controlOption.useDateSpace=t.useDateSpace);typeof t.useSlipDate=="boolean"&&(t.controlOption.useSlipDate=t.useSlipDate);typeof t.isMonthCalendar=="boolean"&&(t.controlOption.isMonthCalendar=t.isMonthCalendar);typeof t.hasYearLimit=="boolean"&&(t.controlOption.hasYearLimit=t.hasYearLimit,/\d+/.test(t.minYearLimit)&&(t.controlOption.minYearLimit=t.minYearLimit),/\d+/.test(t.maxYearLimit)&&(t.controlOption.maxYearLimit=t.maxYearLimit))},removeViewDataTrMapAtBoundary:function(n,t){var u=[this.theadType,this.tbodyType,this.tfootType],i,s,o,f,h,c,r,e,l;for(this.constValue.columnType.multi==this.optCommon.columnType&&(u=[n]),i=0,s=u.length;i<s;i++)for(this.setStructureInfo(u[i]),o=this.dataColumn.getAll(u[i],this.constValue.returnType.multi),f=this._datas.length-1;f>-1;f--)for(h=this._datas[f][this.constValue.keyColumnPropertyName],c=this._trMap[h],r=t.bottom;r>=t.bottom;r--)for(e=0,l=o[r].length;e<l;e++)delete c[o[r][e].id]},renderDivideColumns:function(n,t,i,r,u,f,e){var e,o;this.view.setRenderMode(this.constValue.renderMode.divideColumn);this.setStructureInfo(n);var a=this.dataColumn.getAll(n,this.constValue.returnType.multi),h=this.getById(n,t),v=this.getNextRow(n,t),y=this.getPrevRow(n,t),c=this.getViewDataTrMap(n,t),p=this.view.getViewDataMadeRowAll(n),w=n;h[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate&&(w=this.tfootType);e={groupRowIdx:i,groupRowLen:r,columnStartIdx:u,columnEndLen:f,dataRowIndex:h[this.constValue.rowCountColumnPropertyName]-1,prevRowId:y&&y[this.constValue.keyColumnPropertyName],nextRowId:v&&v[this.constValue.keyColumnPropertyName],trIdx:c.rowInfo.trIdx,tableId:c.tableId,tableIndex:c.tableIndex,tempSectionType:w,etcInfo:e.etcInfo};o=this.view.makeViewDataGroupRows(n,t,e);for(var s=0,l=i,b=o.length;s<b;s++,l++)o[s].cells.splice(0,u),o[s].cells.splice(0,0,u,0),p[(h[this.constValue.rowCountColumnPropertyName]-1)*a.length+l].cells.splice.apply(p[(h[this.constValue.rowCountColumnPropertyName]-1)*a.length+l].cells,o[s].cells),o[s].cells.splice(0,2);return this.view.setRenderMode(this.constValue.renderMode.none),{resultHTML:$.template(ecount.gridV2.render.template.row,{rows:o})}},removeRowRenderginTableMapAt:function(n,t){var s=[this.theadType,this.tbodyType,this.tfootType],f,l,c,e,u,o,r,h,i,a;for(this.constValue.columnType.multi==this.optCommon.columnType&&(s=[n]),f=0,l=s.length;f<l;f++)if(this.setStructureInfo(s[f]),c=this.dataColumn.getAll(s[f],this.constValue.returnType.multi),this._datas.length!=0)for(e=this._datas.length-1;e>-1;e--){for(u=this._datas[e][this.constValue.keyColumnPropertyName],i=this._trMap[u].trIdx.length-1;i>=t.bottom;i--)if(o=c[i],i<=t.bottom&&i>=t.top){for(r=0,h=o.length;r<h;r++)delete this._trMap[u][o[r].id];this._trMap[u].trIdx.splice(i,1);this._renderingTableMap.splice(i,1)}else for(r=0,h=o.length;r<h;r++)this._trMap[u][o[r].id].columnRowIdx-=t.bottom-t.top+1;for(i=0,a=this._trMap[u].trIdx.length;i<a;i++)this._trMap[u].trIdx[i]=e*(c.length-(t.bottom-t.top+1))+i}},removeColumnRenderingTableMapAt:function(n,t,i){var e=[this.tfootType,this.tbodyType,this.theadType],u,y,c,l,a,f,v,p,o,w,r;for(this.optCommon.columnType==this.constValue.columnType.multi&&(e=[n]),u=0,y=e.length;u<y;u++)if(this.setStructureInfo(e[u]),c=this.dataColumn.getAll(e[u],this.constValue.returnType.multi),this._datas.length!=0)for(l=this._datas.length-1;l>-1;l--)for(a=this.getViewDataTrMap(e[u],this._datas[l][this.constValue.keyColumnPropertyName]),f=c.length-1;f>-1;f--){for(v=this._renderingTableMap[a.rowInfo.trIdx[f]],p=a.rowInfo[c[f][i.left].id].adjustmentValue,o=i.left,w=v.length;o<w;)if(r=v[o],"MERGE"==r.type){var s=r[this.constValue.rowVariableNames.colspanCount]||1,b=s-1,h=r.columnIdx,k=h+s;i.left<=h&&i.right>=h}else if(["ROWSPAN_AND_COLSAPN","COLSPAN"].contains(r.type)){r=this._renderingTableMap[r.trIdx][r.columnIdx];var s=r[this.constValue.rowVariableNames.colspanCount]||1,b=s-1,h=r.columnIdx,k=h+s;o+=s}else a.rowInfo[c[f][h].id].adjustmentValue=p,o+=1;v.splice(t.left,t.right-t.left+1)}},mergeViewDataRenderingTableMap:function(n,t){var r=[this.tfootType,this.tbodyType,this.theadType],i,k,e,y,h,o,ut,p,w,s,ft,b;for(this.optCommon.columnType==this.constValue.columnType.multi&&(r=[n]),i=0,k=r.length;i<k;i++){this.setStructureInfo(r[i]);var d=this._datas,g=this.dataColumn.getAll(t||r[i],this.constValue.returnType.multi),c=g.length,f=0,nt=0,tt=d.length,it=0,rt=0;for(this.optCommon.columnType==this.constValue.columnType.multi&&(e=this.getSectionRowIndex(r[i],t),f=e.startRowIndex,tt=e.endRowCount,t==this.tfootType&&(e=this.getSectionRowIndex(r[i]),h=this.dataColumn.getAll(r[i],this.constValue.returnType.multi),it=e.endRowCount-e.startRowIndex,rt=it*h.length));f<tt;f++,nt++){var l=d[f],et=l[this.constValue.keyColumnPropertyName],a=l[this.constValue.rowVariableNames.mergeSet],u=this.getViewDataTrMap(r[i],et),v=n;for(l[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate&&(v=this.tfootType),a&&(this.view.setRenderMode(this.constValue.renderMode.refreshMergeSet),this.optCommon.columnType==this.constValue.columnType.multi&&t==this.tfootType?(y=this.getSectionRowIndex(this.tbodyType),h=this.dataColumn.getAll(this.tbodyType,this.constValue.returnType.multi),this.view.makeViewDataRenderingTableMap(r[i],a,{rowIndex:f,rowCurrentRowIndex:(y.endRowCount-y.startRowIndex)*h.length+nt*c,tableId:u.tableId,tableIndex:u.tableIndex,tempSectionType:v})):this.view.makeViewDataRenderingTableMap(r[i],a,{rowIndex:f,rowCurrentRowIndex:f*c,tableId:u.tableId,tableIndex:u.tableIndex,tempSectionType:v}),this.view.setRenderMode(this.constValue.renderMode.none)),o=0,ut=u.rowInfo.trIdx.length;o<ut;o++)for(p=0,w=this.getViewDataRenderingTableMap(r[i],u.rowInfo.trIdx[o]),s=0,ft=w.length;s<ft;s++)b=g[(u.rowInfo.trIdx[o]-rt)%c][s].id,["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN","SKIP"].contains(w[s].type)?(p-=1,u.rowInfo[b].adjustmentValue=1):u.rowInfo[b].adjustmentValue=p}}},divideViewDataRenderingTableMap:function(n,t){var r=[this.tfootType,this.tbodyType,this.theadType],i,o,s,y,u,h,f,l,a,e,v;for(this.optCommon.columnType==this.constValue.columnType.multi&&(r=[n]),i=0,o=r.length;i<o;i++)for(this.setStructureInfo(r[i]),s=this.dataColumn.getAll(r[i],this.constValue.returnType.multi),y=s.length,u=0,h=this._datas.length;u<h;u++){var c=this._datas[u],p=c[this.constValue.keyColumnPropertyName],b=c[this.constValue.rowVariableNames.mergeSet],w=this.getViewDataTrMap(r[i],p);for(f=t.top,l=t.bottom;f<=l;f++)for(a=this.getViewDataRenderingTableMap(r[i],w.rowInfo.trIdx[f]),e=t.left,v=t.right;e<=v;e++)a[e]=null}},setRenderMode:function(n){this.view.setRenderMode(n)},setDisabled:function(n,t,i,r){this.setStructureInfo(n);this._trMap[i][t].isUseEditable=!0;this._trMap[i][t].editableState=r;this._trMap[i][t].disabled=r===!0?null:"disabled"},emitCustomEvent:function(n,t,i,r,u,f){var e,a,s,o,h,c,v,y,l;return(f=f||{},e=this.__core.data.row.getViewDataCellMap(n,t,i),e.cellInfo&&(a=this.__core.view.row.getRowElement(n,i,e.cellInfo.columnRowIdx),s=this.__core.view.cell.getCellElement(n,t,i)),o=this.dataColumn.getById(n,t,!0),h=this.__core.data.row.getById(n,i,!0),u.stopPropagation=function(){},!e.cellInfo||!e.cellInfo.editControlType&&!["ecount.gridV2.widget.rowItemCheckbox","ecount.gridV2.widget.checkbox","ecount.gridV2.widget.button.time"].contains(e.cellInfo.controlType))?!0:(c=[r,n,t,e.cellInfo.editControlType||e.cellInfo.controlType,"custom"].join(ecount.constValue.gridDelimiter),this.__core.events.exist(c)?e.cellInfo.eventKeyByEventType.custom[r]?(v=typeof f.oldValue=="boolean"?f.oldValue:f.oldValue||"",y=typeof f.newValue=="boolean"?f.newValue:f.newValue||"",l=this.__core.events.emit(c,u,f.customEventArgs||{event:u,gridId:this.optCommon.ecGridId,locationType:o.locationType||null,controlType:e.cellInfo.controlType,targetRow:a,target:u?u.target:s,clonedTarget:s,sectionType:n,rawRowItem:h,oldRowItem:f.oldRow,rowItem:h,rowKey:i,rowIdx:e.rowInfo.trIdx,columnInfo:o,columnId:t,columnProperty:o.propertyName,callIdx:-1,dateValue:"",sDateValue:"",eDateValue:"",oldValue:v,newValue:y,childElementId:-1,subDataIdx:f.subDataIdx||-1,subControlType:f.subControlType||null,funcChangeCurrentValue:function(){},triggerBy:u.triggerBy||"native",triggerByEventType:u.triggerByEventType,specialValue:u.specialValue,checked:u&&u.target&&u.target.checked}),l!=undefined?l:!0):void 0:void 0)},init:function(n){var f,t,i,e,u,o,r;if(ecount.gridV2.config.dataPerformance&&ecount.gridV2.util.log(String.format("column data performance time: {0}ms",(new Date).getTime()-ecount.gridV2.config.dataPerformanceStart)),this.initGlobalValue(n),this.initPrepareDataValue(n),this.destroyAll(),this.__core.drawCancel)return this.__events&&this.__events._triggerEvent(ecount.gridV2.renderEvent.cancelCompleted),{cancel:!0};if(!this.optRow[this.tbodyType].dataUseFirst)for(f=[this.theadType,this.tbodyType,this.tfootType],u=0;u<f.length;u++)t=f[u],i=this.optRow[t].url,e=this.optRow[t].param,i&&(o=this.optSession.createSessionLocationType,o==this.constValue.locationType.GMC?i=ecount.common.makeGmcHost(this.optSession.useGmcNotUseCN)+i+"?SESSION_ID="+this.optSession.sid:o==this.constValue.locationType.ZONE&&(i=ecount.common.makeZoneHost(this.optSession.locationInfo,this.optSession.domain)+i+"?SESSION_ID="+this.optSession.sid),this.optPaging.use&&(r=this.dataPaging.serialize(),this.optRow[t].param=this.optRow[t].param||{},this.optRow[t].param.Request&&this.optRow[t].param.Request.Data?(this.optRow[t].param.Request.Data.PAGE_CURRENT=$.isNull(this.optPaging.currentPage)?r.currentPageIndex:this.optPaging.currentPage,this.optRow[t].param.Request.Data.PAGE_SIZE=$.isNull(this.optPaging.rowCountPerPage)?r.rowCountPerPage:this.optPaging.rowCountPerPage,this.optRow[t].param.Request.Data.PAGE_CURRENT==1&&(this.optPaging.totalRowCount=0)):(this.optRow[t].param.PAGE_CURRENT=$.isNull(this.optPaging.currentPage)?r.currentPageIndex:this.optPaging.currentPage,this.optRow[t].param.PAGE_SIZE=$.isNull(this.optPaging.rowCountPerPage)?r.rowCountPerPage:this.optPaging.rowCountPerPage,this.optRow[t].param.PAGE_CURRENT==1&&(this.optPaging.totalRowCount=0)),e=this.optRow[t].param),this.__api.add(this.__apiPrefixId+"$"+this.__apiPrefixIndex,{sectionType:t,option:n,url:i,data:Object.toJSON(e||{}),progressbar:!1,async:!0,resolve:this.callbackSuccess.bind(this),reject:this.callbackFail.bind(this),completed:this.callbackComplete.bind(this)}),this.__apiPrefixIndex+=1);if(this.__api.length()>0){this.__api.call();return}this.initDataModule("custom",n);this.optColumn[this.theadType].columns&&this.optColumn[this.theadType].columns.length!=0||this.optRow[this.tbodyType].datas&&this.optRow[this.tbodyType].datas.length!=0||this.optLayout.containerSelector!="gridTop-EBZ056R"?(this.__datas[this.tbodyType].isInitRowIndex&&(this.__core.initRowCount=0),this.setCustomRowCell(),this.initDataValue(n),this.useAutoCalculate(this.tbodyType)&&(this.normalColumnAutoCalculateSetting=new ecount.gridV2.data.autoCalculateSetting,this.normalColumnAutoCalculateSetting.init(n).setSectionType(this.tbodyType),n.mixinOption.dataNormalColumnAutoCalculateSetting=this.normalColumnAutoCalculateSetting,this.dataNormalColumnAutoCalculateSetting=n.mixinOption.dataNormalColumnAutoCalculateSetting),this.useAutoCalculate(this.tfootType)&&(this.specialrowColumnAutoCalculateSetting=new ecount.gridV2.data.autoCalculateSpecialrowSetting,this.specialrowColumnAutoCalculateSetting.init(n).setSectionType(this.tfootType),n.mixinOption.dataSpecialrowColumnAutoCalculateSetting=this.specialrowColumnAutoCalculateSetting,this.dataSpecialrowColumnAutoCalculateSetting=n.mixinOption.dataSpecialrowColumnAutoCalculateSetting)):this.__core.drawProcessStop()},render:function(){if(this.__core.drawCancel)return this.__events&&this.__events._triggerEvent(ecount.gridV2.renderEvent.cancelCompleted),{cancel:!0};this.optSession.sid=null;this.__events&&this.__events._triggerEvent(ecount.gridV2.rowEvent.renderCompleted)},callbackSuccess:function(n,t){if(this.optCommon&&this.optCommon.ecPageId&&!ecount.global.findPageInstance(this.optCommon.ecPageId)){this.__events&&this.__events.destroy();return}if(this.__core.drawCancel)return{result:!1};var i,r=t.Data&&t.Data.TotalCount,u=t.Data&&t.Data.isLimitData===!0;if(this.optRow[n].isWithColumn){t.Data.ColumnForm&&ecount.common.isTrue(t.Data.ColumnForm.isFormCache)&&(t.Data.ColumnForm=ecount.formset.getXFormViewModelSync(this.optCommon.ecPageId,{companyType:t.Data.ColumnForm.companyType,formType:t.Data.ColumnForm.formType,formSeq:t.Data.ColumnForm.formSeq}));i=t.Data.ColumnForm||{};this.__setting.setCommonFormOption(i.option||{});this.__events&&this.__events._triggerEvent(ecount.grid.event.list.afterFormLoad,{},{columnForm:i,rowDataParam:this.optRow[n].param});this.dataCheckbox&&this.dataCheckbox.formLoadInit();switch(this.__setting.getCommonColumnType()){case this.constValue.columnType.multi:i.columns||(i.headerColumns=this.optColumn[this.theadType].columns);i.columns||(i.columns=this.optColumn[this.tbodyType].columns);i.columns||(i.footerColumns=this.optColumn[this.tfootType].columns);this.__setting.setColumnsByForm(this.theadType,i.headerColumns);this.__setting.setColumnsByForm(this.tbodyType,i.columns||[]);this.__setting.setColumnsByForm(this.tfootType,i.footerColumns||[]);break;default:i.columns||(i.columns=(this.optColumn[this.theadType]||this.optColumn[this.tbodyType]||{}).columns);this.__setting.setColumnsByForm(this.theadType,i.columns||[]);this.__setting.setColumnsByForm(this.tbodyType,i.columns||[])}i.mergedColumnInfo&&this.__setting.setColumnRowCustom(i.mergedColumnInfo.duplicatePoint,i.mergedColumnInfo.mergedColumnData);t.Data=t.Data.Data;this.optPaging.use&&this.dataPaging.initFormProperties(i.option)}this.__events&&this.__events._triggerEvent(ecount.grid.event.list.afterRowDataLoad,{},{result:t,totalCount:r,isLimitData:u});t.Data&&t.Data.Data&&(t.Data=t.Data.Data);this.__setting.setRowApiData(n,t.Data)},callbackFail:function(n,t,i){if(this.optCommon&&this.optCommon.ecPageId&&!ecount.global.findPageInstance(this.optCommon.ecPageId)){this.__events&&this.__events.destroy();return}this.__events&&this.__events._triggerEvent(ecount.grid.event.list.renderingError,{},{error:i});i&&i.Message!=undefined&&ecount.error(i.Message,{title:"System Error "+t,trace:i.MessageDetail});this.__core.fn.cancel()},callbackComplete:function(n,t){var f,e,i,r,o,s,u,h;if(this.optCommon&&this.optCommon.ecPageId&&!ecount.global.findPageInstance(this.optCommon.ecPageId)){this.__events&&this.__events.destroy();return}if(this.__core.drawCancel)return this.__events&&this.__events._triggerEvent(ecount.gridV2.renderEvent.cancelCompleted),{cancel:!0};if(ecount.gridV2.config.dataPerformance&&(ecount.gridV2.config.dataRowPerformanceStart=(new Date).getTime(),ecount.gridV2.util.log(String.format("row data api performance time: {0}ms",ecount.gridV2.config.dataRowPerformanceStart-ecount.gridV2.config.dataPerformanceStart)),ecount.gridV2.util.log("row data performance start time")),f=this.optRow[this.tbodyType].apiDatas,f&&f.length==0&&this.optPaging.use&&this.optPaging.currentPage>1&&(e=this.optPaging.backTrackCount>0&&this.optPaging.backTrackCount>this.optPaging.backTrackCountFinish,e&&this.optPaging.backTrackCountFinish++,this.optPaging.currentPage=e?this.optPaging.currentPage-1:1,this.dataPaging.setCurrentPageIndex(this.optPaging.currentPage),i=this.optRow[this.tbodyType].url,i&&(r=this.dataPaging.serialize(),this.optRow[this.tbodyType].param=this.optRow[this.tbodyType].param||{},this.optRow[this.tbodyType].param.Request&&this.optRow[this.tbodyType].param.Request.Data?(this.optRow[this.tbodyType].param.Request.Data.PAGE_CURRENT=r.currentPageIndex,this.optRow[this.tbodyType].param.Request.Data.PAGE_SIZE=r.rowCountPerPage):(this.optRow[this.tbodyType].param.PAGE_CURRENT=r.currentPageIndex,this.optRow[this.tbodyType].param.PAGE_SIZE=r.rowCountPerPage),o=this.optSession.createSessionLocationType,o==this.constValue.locationType.GMC?i=ecount.common.makeGmcHost(this.optSession.useGmcNotUseCN)+i+"?SESSION_ID="+this.optSession.sid:o==this.constValue.locationType.ZONE&&(i=ecount.common.makeZoneHost(this.optSession.locationInfo,this.optSession.domain)+i+"?SESSION_ID="+this.optSession.sid),this.__api.add(this.__apiPrefixId+"$"+this.__apiPrefixIndex,{sectionType:this.tbodyType,option:t,url:i,data:Object.toJSON(this.optRow[this.tbodyType].param||{}),progressbar:!1,resolve:this.callbackSuccess.bind(this),reject:this.callbackFail.bind(this),completed:this.callbackComplete.bind(this)}),this.__api.length()>0))){this.__api.call();return}if(this.optPaging.backTrackCountFinish=0,this.optRow[this.tbodyType].isWithColumn)for(this.dataColumn.initSystemColumn(),s=[this.theadType,this.tbodyType,this.tfootType],u=0,h=s.length;u<h;u++)this.data.column.initPrimitiveFormColumns(s[u]);this.initDataModule("api",t);this.optCommon.gridType==this.constValue.gridType.editable&&this.optRow[this.tfootType].specialRowCount>0&&this.optColumn[this.tbodyType].isAutoCalculate&&(this.normalColumnAutoCalculateSetting=new ecount.gridV2.data.autoCalculateSetting,this.normalColumnAutoCalculateSetting.init(t).setSectionType(this.tbodyType),t.mixinOption.dataNormalColumnAutoCalculateSetting=this.normalColumnAutoCalculateSetting,this.dataNormalColumnAutoCalculateSetting=t.mixinOption.dataNormalColumnAutoCalculateSetting);this.optCommon.gridType==this.constValue.gridType.editable&&this.optRow[this.tfootType].specialRowCount>0&&this.optColumn[this.tfootType].isAutoCalculate&&(this.specialrowColumnAutoCalculateSetting=new ecount.gridV2.data.autoCalculateSpecialrowSetting,this.specialrowColumnAutoCalculateSetting.init(t).setSectionType(this.tfootType),t.mixinOption.dataSpecialrowColumnAutoCalculateSetting=this.specialrowColumnAutoCalculateSetting,this.dataSpecialrowColumnAutoCalculateSetting=t.mixinOption.dataSpecialrowColumnAutoCalculateSetting);this.__datas[this.tbodyType].isInitRowIndex&&(this.__core.initRowCount=0);this.setCustomRowCell();this.initDataFormValue(t)},destroyAll:function(){this.__initCheckedHeader=!1;this.__initCHeckedColumns=[];this.__initCheckedKeys={}},clearPopoverList:function(n){var t,i;if(n){for(t in this.view._popoverTransaction.popover)this.view._popoverTransaction.popover.hasOwnProperty(t)&&(i=t.split(ecount.constValue.gridDelimiter),i[0]==n&&delete this.view._popoverTransaction.popover[t]);for(t in this.view._popoverTransaction.tooltip)this.view._popoverTransaction.tooltip.hasOwnProperty(t)&&(i=t.split(ecount.constValue.gridDelimiter),i[0]==n&&delete this.view._popoverTransaction.tooltip[t])}else this.view._popoverTransaction={popover:{},tooltip:{}}},getPopoverList:function(){return this.view._popoverTransaction},getCellSystemEventFucntion:function(){var n;return n},setSkipRowLineData:function(n,t,i,r,u){var o=this.dataColumn.getStartEndInfo(n),f=this.optRow[n].skipRowLineRule,e=null;this.setStructureInfo(n);f&&[this.tbodyType,this.tfootType].contains(n)&&u>1&&(!this.optColumn.thead.duplicationPoint||this.optColumn.thead.duplicationPoint.length==0||this.optColumn.thead.duplicationPoint.contains(1))&&(e=f(t,i,r,o)||{});this.__datas[n].skipRowLine.push(e)},adjustMergeInfo:function(n,t,i,r){for(var o,e,f,u=0;u<t.length;u++)if(t[u][this.constValue.rowVariableNames.mergeStartIndex]==0&&this.__datas[n].skipRowLine[i]&&this.__datas[n].skipRowLine[i][0]==!0){for(o=this.__datas[n].skipRowLine[i],e=0,f=0;f<r.length;f++)o[f]==!0&&e++;t[u][this.constValue.rowVariableNames.rowspanCount]+=r.length-e}},hasTfoot:function(n){var t=this.__setting.getCommonColumnType(),r=[this.constValue.columnType.single,this.constValue.columnType.each].contains(t),u=this.constValue.columnType.multi===t,f=this.optRow[this.tfootType].specialRowCount>0,i=this.__datas[this.tfootType].datas.length>0;return i=n?!_.isEmpty(this.optRow[this.tfootType].apiDatas)||!_.isEmpty(this.optRow[this.tfootType].datas):!_.isEmpty(this.__datas[this.tfootType].datas),[this.constValue.gridType.editable,this.constValue.gridType.editableForm].contains(this.optCommon.gridType)&&(r&&f||u&&i)},useAutoCalculate:function(n){var t=this.optColumn[n].isAutoCalculate||!1;return this.hasTfoot(!1)&&t},setTextareaRow:function(n,t,i,r){this.setStructureInfo(n);this._textareaRows[i]||(this._textareaRows[i]={});var u=this._textareaRows[i];return u[r.groupRowIndex]=u[r.groupRowIndex]||{height:0,columnIds:[]},u[r.groupRowIndex].height<r.height&&(u[r.groupRowIndex].height=r.height),u[r.groupRowIndex].columnIds.indexOf(t)<0&&u[r.groupRowIndex].columnIds.push(t),this},getTextareaRows:function(n){return this.setStructureInfo(n),this._textareaRows},getTextareaRow:function(n,t){return this.setStructureInfo(n),this._textareaRows[t]},makeRowType:function(n,t,i){return t==this.tfootType&&i==this.constValue.sectionSeparateValue.line?"total":this.constValue.sectionSeparateText[i]}};ecount.gridV2.data.view=$.Class(null,{setRenderMode:function(n){this.renderMode=n},initSalaryPayrollBookRowData:function(n,t,i){var e,l;i=i||{};var u=this.dataPrint.getLimitPartitialRowEndIndex()||0,r=this.dataPrint.getLimitPartitialRowEndIndex()||0,o=0,s=0,h=0,c=this.optFormOption.bodyRowCount,f,a=this.dataPrint&&this.dataPrint.getTotalPage()||0,v=this.dataPrint&&this.dataPrint.getCurrentPage()||0;if(t[u]&&t[u][this.constValue.rowVariableNames.renderSet]){for(f=t[u][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.pageCnt]||a,f&&this.dataPrint&&this.dataPrint.setTotalPage(f),t[u][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.startPageIdx]=s,t[u][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.startPrintIdx]=h,t[u][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.totalMaxPageCount]=f,t[u][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.pageCnt]=1,i.tableIndex=v,e=s,l=this.dataPrint&&this.dataPrint.getPartitialRenderingPageCount()||10,maxPageCount=e+l;e<maxPageCount&&e<=f;)o+=c||0,this.optFormOption.isAppearTopAreaOnlyFirst&&e!=0&&(o+=this.optFormOption.appearTopAreaOnlyFirstAddBodyRowCount?this.optFormOption.appearTopAreaOnlyFirstAddBodyRowCount:0),this.optFormOption.isAppearBottomAreaLast&&e!=f-1&&(o+=this.optFormOption.appearBottomAreaLastAddBodyRowCount?this.optFormOption.appearBottomAreaLastAddBodyRowCount:0),e!=f-1&&this.optFormOption.gridCountPerPage!==1&&(o+=c||0,o+=this.optFormOption.isAppearTopAreaOnlyFirst&&this.optFormOption.appearTopAreaOnlyFirstAddBodyRowCount?this.optFormOption.appearTopAreaOnlyFirstAddBodyRowCount:0,o+=this.optFormOption.isAppearBottomAreaLast&&this.optFormOption.appearBottomAreaLastAddBodyRowCount?this.optFormOption.appearBottomAreaLastAddBodyRowCount:0),e++;r+=o;r>=t.length?(r=t.length,t[u][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.pageCnt]=f,t[u][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.startPageIdx]=s+(e-s-1)+this.optFormOption.gridCountPerPage,t[u][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.tableId]||(i.tableId=t[0][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.tableId])):(t[r][this.constValue.rowVariableNames.renderSet]||(t[r][this.constValue.rowVariableNames.renderSet]={}),t[r][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.newTable]=t[u][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.newTable],t[r][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.pageCnt]=f,t[r][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.startPageIdx]=s+(e-s-1)+this.optFormOption.gridCountPerPage,t[r][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.startPrintIdx]=h,t[r][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.totalMaxPageCount]=f,t[r][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.tableId]||(i.tableId=t[0][this.constValue.rowVariableNames.renderSet][this.constValue.rowVariableNames.tableId]));r>t.length&&(r=t.length)}return this.dataPrint.setLimitPartitialRowEndIndex(r),i},getDefaultHeight:function(n){var t,i;switch(n){case this.theadType:return 0;case this.tbodyType:return t=this.dataRow.getAll(this.theadType),this.optRow[this.theadType].trHeight.sum(function(n){return n})*t.length;case this.tfootType:return t=this.dataRow.getAll(this.theadType),i=this.optRow[this.theadType].trHeight.sum(function(n){return n})*t.length,t=this.dataRow.getAll(this.tbodyType),i+(this.optRow[this.tbodyType].trHeight.sum(function(n){return n})||0)*t.length}return 0},initRowHeight:function(){for(var n,e,r,h,i,t,u,c,o,s=[this.theadType,this.tbodyType,this.tfootType],f=0,l=s.length;f<l;f++)for(n=s[f],e=this.dataColumn.getAll(n,this.constValue.returnType.multi),r=0,h=e.length;r<h;r++){if(t=this.optFormOption.bodyRowCount||1,u=$.isArray(this.optRow[n].trHeight)&&(this.optRow[n].trHeight[r]>0?this.optRow[n].trHeight[r]:this.optRow[n].trHeight[0]),u>0)i=u;else if(this.optCommon.renderType==this.constValue.gridRenderType.typeSpecTran||this.optCommon.renderType==this.constValue.gridRenderType.salaryPrint)c=this.optFormOption.gridCountPerPage,i=parseInt((245-t)/t,10),c==1?i=n==this.theadType?20:parseInt((720-t)/t,10):n==this.theadType&&(o=$.isArray(this.optRow[this.tbodyType].trHeight)?this.optRow[this.tbodyType].trHeight[0]:this.optRow[this.tbodyType].trHeight,i=o>0&&u<=0?20-(o+1)*t:265-(t*i+t));else if(this.optCommon.renderType==this.constValue.gridRenderType.salaryPayrollBookList){var a=this.optFormOption.pageWay=="P"?this.optFormOption.pageHeight:this.optFormOption.pageWidth,v=Math.floor((a-(this.optFormOption.topMargin+this.optFormOption.bottomMargin+50))/25.4*96);i=n!==this.theadType?Math.floor(v/(t*e.length)):20}i&&(this.optRow[n].trHeight[r]=i)}},setRowHeight:function(n,t,i,r,u){var o,l,c;this.setStructureInfo(n);var f,h=i,e=this.optFormOption.bodyRowCount||1,s=$.isArray(this.optRow[n].trHeight)&&(this.optRow[n].trHeight[h]>0?this.optRow[n].trHeight[h]:this.optRow[n].trHeight[0]);if((u==this.constValue.totalRowType||u==this.constValue.rowType.separate)&&(o=this.optRow[this.tfootType].trHeight[h],/-?\d+/g.test(o)&&(o=parseInt(o,10)),o>0&&(s=o-this.optFormOption.rowTrHeightAdjust)),r.trHeight)f=r.trHeight+"px";else if(s>0)f=s;else if(this.optCommon.renderType==this.constValue.gridRenderType.typeSpecTran||this.optCommon.renderType==ecount.grid.constValue.gridRenderType.salaryPrint)l=this.optFormOption.gridCountPerPage,f=parseInt((245-e)/e,10),l==1?f=n==this.theadType?20:parseInt((720-e)/e,10):n==this.theadType&&(c=$.isArray(this.optRow.tbody.trHeight)?this.optRow.tbody.trHeight[0]:this.optRow.tbody.trHeight,f=c>0&&s<=0?20-(c+1)*e:265-(e*f+e));else if(this.optCommon.renderType==this.constValue.gridRenderType.salaryPayrollBookList){var a=this.optFormOption.pageWay=="P"?this.optFormOption.pageHeight:this.optFormOption.pageWidth,v=Math.floor((a-(this.optFormOption.topMargin+this.optFormOption.bottomMargin+50))/25.4*96),y=this.dataColumn.getAll(r.tempSectionType,this.constValue.returnType.multi);f=n!==this.theadType?Math.floor(v/(e*y.length)):20}f||f===0?t.style.height=f+"px":[this.constValue.formVersion.second,this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(this.optForm.version)&&n==this.theadType&&(t.className+=" height-auto ")},getViewDataMadeRowAll:function(n){return this.setStructureInfo(n),this._madeRows},getUnmappingWidgetInstances:function(n){return this.setStructureInfo(n),this._unmappedWidgetInstancesId},addViewDataWidgetInstance:function(n,t,i){this.setStructureInfo(n);this._widgetInstances[t]=i},removeViewDataWidgetInstance:function(n,t){this.setStructureInfo(n);this._widgetInstances[t]&&this._widgetInstances[t].destroy();this._widgetInstances[t]=null},getViewDataWidgetInstances:function(n){return this.setStructureInfo(n),this._widgetInstances},getViewDataWidgetInstance:function(n,t){return this.setStructureInfo(n),this._widgetInstances[t]},getViewDataWidgetInstanceById:function(n,t){return this.setStructureInfo(n),this._widgetInstances[t]},makeViewDataConverteValue:function(n,t,i,r,u){if((u=u||{},u.isExecuteConvert=typeof u.isExecuteConvert=="boolean"?u.isExecuteConvert:!0,typeof r=="boolean")||!u.isExecuteConvert)return r;this.dataRow.setStructureInfo(n);var e=u.tempSectionType||n,f=this.dataColumn.getById(e,i),o=u.convertor||this.dataColumn.getConvertor(e,t,i);return(r!=""&&f.dataType1=="DATETIME"&&(f.dataFormat=="Date20"||["YEARMONTH","YEARMONTH_NO"].contains(f.dataType2))&&(r=this.setViewValueDate20(r)),$.isPlainObject(r)||$.isArray(r))?r:o?o(r,{dataType:f.dataType,amtCalc:f.amtCalc,isCheckZero:f.isCheckZero,thousandSeparator:u.thousandSeparator||f.thousandSeparator,decimalSeparator:u.decimalSeparator||f.decimalSeparator,isTodayTime:f.isTodayTime,dateFormat:f.dateFormat,customizeDate:f.customizeDate}):r.toString()},setViewValueDate20:function(n){var t=/^([1|2][0-9]{3})[\/\-\.]?(0[1-9]|1[0-2])[\/\-\.]?([\/\-\.]\d+)?$/g.exec(n);return t&&(n=t[1]+"/"+t[2]+"/01",t[3]&&(n+=t[3])),n},removeDuplicationClassName:function(n,t){return(n=n||"",t=t||"",this.constValue.boldRex.test(t)&&(n=n.replace(this.constValue.boldRex,"")),this.constValue.alignRex.test(t)&&(n=n.replace(this.constValue.alignRex,"")),this.constValue.fontSizeRex.test(t)&&(n=n.replace(this.constValue.fontSizeRex,"")),this.constValue.italicRex.test(t)&&(n=n.replace(this.constValue.italicRex,"")),this.constValue.valignRex.test(t)&&(n=n.replace(this.constValue.valignRex,"")),this.constValue.fontRex.test(t)&&(n=n.replace(this.constValue.fontRex,"")),this.constValue.strikeRex.test(t)&&(n=n.replace(this.constValue.strikeRex,"")),this.constValue.underlineRex.test(t)&&(n=n.replace(this.constValue.underlineRex,"")),this.constValue.strikeUnderlineRex.test(t)&&(n=n.replace(this.constValue.strikeRex,"").replace(this.constValue.underlineRex,"").replace(this.constValue.strikeUnderlineRex,"")),n.trimRight&&(n=n.trimRight()),n&&t)?n+" "+t:n?n:t?t:""},getItemClickCallback:function(n,t,i,r,u){var f=this;return function(t,i,e,o,s){s.rowItem=f.dataRow.getById(n,t,!0)||{};s.oldValue=r;s.newValue=s.value;u(t,s)}},setViewDataCellBorder:function(n,t,i){i=i||{isBorderTopStyleImpotant:!1,isBorderBottomStyleImpotant:!1,isBorderLeftStyleImpotant:!1,isBorderRightStyleImpotant:!1};var r;t.TOP_BORD_USE_TF||t.BTTM_BORD_USE_TF||t.LEFT_BORD_USE_TF||t.RGT_BORD_USE_TF?(t.TOP_BORD_USE_TF&&(t.TOP_BORD_COLOR_CD&&(r=ecount.convertor.convertRGBToHex(t.TOP_BORD_COLOR_CD),this.constValue.nativeColorname[r]||(r=r.indexOf("#")!=0?"#"+r:r),n.style["border-top-color"]=r),t.TOP_BORD_THICK&&(n.style["border-top-width"]=t.TOP_BORD_THICK+"px"),t.TOP_BORD_STYL_CD&&(n.style["border-top-style"]=t.TOP_BORD_STYL_CD+(i.isBorderTopStyleImpotant?" !important":""))),t.BTTM_BORD_USE_TF&&(t.BTTM_BORD_COLOR_CD&&(r=ecount.convertor.convertRGBToHex(t.BTTM_BORD_COLOR_CD),this.constValue.nativeColorname[r]||(r=r.indexOf("#")!=0?"#"+r:r),n.style["border-bottom-color"]=r),t.BTTM_BORD_THICK&&(n.style["border-bottom-width"]=t.BTTM_BORD_THICK+"px"),t.BTTM_BORD_STYL_CD&&(n.style["border-bottom-style"]=t.BTTM_BORD_STYL_CD+(i.isBorderBottomStyleImpotant?" !important":""))),t.LEFT_BORD_USE_TF&&(t.LEFT_BORD_COLOR_CD&&(r=ecount.convertor.convertRGBToHex(t.LEFT_BORD_COLOR_CD),this.constValue.nativeColorname[r]||(r=r.indexOf("#")!=0?"#"+r:r),n.style["border-left-color"]=r),t.LEFT_BORD_THICK&&(n.style["border-left-width"]=t.LEFT_BORD_THICK+"px"),t.LEFT_BORD_STYL_CD&&(n.style["border-left-style"]=t.LEFT_BORD_STYL_CD+(i.isBorderLeftStyleImpotant?" !important":""))),t.RGT_BORD_USE_TF&&(t.RGT_BORD_COLOR_CD&&(r=ecount.convertor.convertRGBToHex(t.RGT_BORD_COLOR_CD),this.constValue.nativeColorname[r]||(r=r.indexOf("#")!=0?"#"+r:r),n.style["border-right-color"]=r),t.RGT_BORD_THICK&&(n.style["border-right-width"]=t.RGT_BORD_THICK+"px"),t.RGT_BORD_STYL_CD&&(n.style["border-right-style"]=t.RGT_BORD_STYL_CD+(i.isBorderRightStyleImpotant?" !important":"")))):this.optFormOption.borderColor&&(n.style["border-color"]="#"+this.optFormOption.borderColor)},setViewDataCellLinebreak:function(n,t){switch(t.fontEcsTxtProcCd){case"TRU":n.className=n.className.replace(this.constValue.lineBreakRex,"");n.className+=" text-nowrap overflow-hidden "}},removeViewDataRemoveMadeRow:function(n,t){var r,i;for(this.setStructureInfo(n),r=this.dataRow.getViewDataTrMap(n,t),i=r.rowInfo.trIdx.length-1;i>-1;i--)this._madeRows.splice(r.rowInfo.trIdx[i],1)},getColSpanInEmptyRow:function(n){var t=0,i=this.dataColumn.getAll(n,this.constValue.returnType.multi);return i[this.__core.maxColumnCountInRow].forEach(function(n){ecount.common.isTrue(n.isHideColumn)||t++}),t},makeEmptyCellData:function(){return{data:this.optRow[this.tbodyType].emptyMessage||ecount.resource.message.NODATA}},makeEmptyCell:function(n){var i=this.getColSpanInEmptyRow(n),t={style:{},className:["text-center"],attr:{colspan:i.toString()},tag:n==this.theadType?"th":"td",cell:{}};return t.cell=this.makeEmptyCellData(n),t},makeEmptyRow:function(n){this.setStructureInfo(n);var t={style:{},className:[],attr:{},cells:[],option:{}};t.option.tableId=this.constValue.defaultTableId;t.option.tableIndex=this.constValue.defaultTableIndex;t.cells.push(this.makeEmptyCell(n));this._madeRows.push(t)},getDataLabel:function(n,t,i){var e=this.optColumn[n].duplicationPoint&&this.optColumn[n].duplicationPoint.length,r=e?t.split("∬∬∬∬∬")[0]:t,u,f;switch(r){case this.constValue.checkBoxPropertyName:case this.constValue.rowMoveablePropertyName:case this.constValue.rowNumberingPropertyName:return""}return u=this.dataColumn.getById(n,r),f=this.dataRow.getById(n,i),ecount.gridV2.util.replaceEscapeString(f[u.propertyName]||"")},getClassName:function(n,t,i,r){if(i=i||{},r=r||{},t=t||"",t.length>0&&t[t.length-1]!=" "&&(t+=" "),r[this.constValue.rowVariableNames.alignType])t=t.replace(this.constValue.alignRex,"")+("text-"+r[this.constValue.rowVariableNames.alignType]+" ");else if(r[this.constValue.rowVariableNames.isCenterAlign]){var u=r[this.constValue.rowVariableNames.isCenterAlign].toString();u!=="false"&&(t=t.replace(this.constValue.alignRex,"")+(u=="true"?" text-center ":u=="left"?" text-left ":u=="right"?" text-right ":" text-center "))}else ecount.common.isTrue(r[this.constValue.rowVariableNames.isCenterAlign])?t=t.replace(this.constValue.alignRex,"")+"text-center ":i.align&&!this.constValue.alignRex.test(t)&&(t+="text-"+i.align+" ");return r[this.constValue.rowVariableNames.vAlignType]?t=t.replace(this.constValue.valignRex,"")+("valign-"+r[this.constValue.rowVariableNames.vAlignType]+" "):i.valign&&!this.constValue.valignRex.test(t)&&(t+="valign-"+i.valign+" "),ecount.common.isTrue(r[this.constValue.rowVariableNames.isBold])?t=t.replace(this.constValue.boldRex,"")+"text-bold ":ecount.common.isTrue(i.fontBold)&&!this.constValue.boldRex.test(t)&&(t+="text-bold "),ecount.common.isTrue(r[this.constValue.rowVariableNames.isFontItalic])?t=t.replace(this.constValue.italicRex,"")+"text-italic ":ecount.common.isTrue(i.fontItalic)&&!this.constValue.italicRex.test(t)&&(t+="text-italic "),!i.fontSize||isNaN(i.fontSize)||this.constValue.fontSizeRex.test(t)||(t+="font-"+i.fontSize+"px "),i.font&&!this.constValue.fontRex.test(t)&&(t+="font-"+ecount.convertor.convertFontClassName(i.font)+" "),ecount.common.isTrue(r[this.constValue.rowVariableNames.isFontStrike])&&ecount.common.isTrue(r[this.constValue.rowVariableNames.isFontUnderline])?t=t.replace(this.constValue.strikeRex,"").replace(this.constValue.underlineRex,"").replace(this.constValue.strikeUnderlineRex,"")+"grid-text-uline-through ":ecount.common.isTrue(r[this.constValue.rowVariableNames.isFontStrike])?t=t.replace(this.constValue.strikeRex,"").replace(this.constValue.underlineRex,"").replace(this.constValue.strikeUnderlineRex,"")+"text-line-through ":ecount.common.isTrue(r[this.constValue.rowVariableNames.isFontUnderline])?t=t.replace(this.constValue.strikeRex,"").replace(this.constValue.underlineRex,"").replace(this.constValue.strikeUnderlineRex,"")+"text-uline ":ecount.common.isTrue(i.fontStrike)&&!this.constValue.strikeRex.test(t)&&ecount.common.isTrue(i.fontUnderline)&&!this.constValue.underlineRex.test(t)?t=t.replace(this.constValue.strikeRex,"").replace(this.constValue.underlineRex,"").replace(this.constValue.strikeUnderlineRex,"")+"grid-text-uline-through ":ecount.common.isTrue(i.fontStrike)&&!this.constValue.strikeRex.test(t)?t=t.replace(this.constValue.strikeRex,"").replace(this.constValue.underlineRex,"").replace(this.constValue.strikeUnderlineRex,"")+"text-line-through ":ecount.common.isTrue(i.fontUnderline)&&!this.constValue.underlineRex.test(t)&&(t=t.replace(this.constValue.strikeRex,"").replace(this.constValue.underlineRex,"").replace(this.constValue.strikeUnderlineRex,"")+"text-uline "),n==this.constValue.sectionType.thead?i.fontCellBgColor||ecount.common.isFalse(i.isShadow)&&(t=t.replace(/bg-(white|muted)/g,"")+"bg-white "):i.fontCellBgColor||ecount.common.isTrue(i.isShadow)&&(t=t.replace(/bg-(white|muted)/g,"")+"bg-muted "),t.trimRight()},initCellPopover:function(n,t,i,r){var f=[n,t,i].join(ecount.constValue.gridDelimiter),u={type:r.attrs["data-toggle"],container:this.optLayout.$bootstrapContainer?this.optLayout.$bootstrapContainer:"body",trigger:r.attrs["data-trigger"]?r.attrs["data-trigger"]:undefined,placement:r.attrs["data-placement"]?r.attrs["data-placement"]:undefined,html:r.attrs["data-html"]?r.attrs["data-html"]:undefined,template:r.attrs["data-template"]?r.attrs["data-template"]:undefined,multiPopover:r.attrs["data-multiPopover"]?r.attrs["data-multiPopover"]:undefined,title:r.attrs.title?r.attrs.title:undefined,content:r.attrs.content||r.attrs["data-content"]||undefined,targetSelector:r.attrs.targetSelector?r.attrs.targetSelector:undefined,targetSelector:r.attrs.targetSelector};r.attrs["data-title"]&&(u.title=r.attrs["data-title"]);u.type=="popover"?this._popoverTransaction.popover[f]=u:u.type=="tooltip"&&(this._popoverTransaction.tooltip[f]=u)},removeCellPopoverProerties:function(n){delete n.attrs["data-toggle"];delete n.attrs["data-trigger"];delete n.attrs["data-placement"];delete n.attrs["data-html"];delete n.attrs["data-template"];delete n.attrs["data-multiPopover"];delete n.attrs.title;delete n.attrs.content},setObserveHandlerList:function(n){ecount.gridV2.logger.log("data row setObserveHandlerList - %s",n.path);switch(n.path){case"popover.alloptions":this.setPopoverMessage(n);break;case"validate.needvalidate":this.setValidateNeedvalidate(n);break;case"opt.rows":n.state==!1&&this.setTextareaClass(n)}},setPopoverMessage:function(n){var t=n.self&&n.self.gridSectionType||this.__core.activeSectionType,i=n.self&&n.self.gridColumnID||this.__core.activeColumnId,r=n.self&&n.self.gridDataKey||this.__core.activeRowId,s=this.dataRow.getViewDataCellInfo(t,i,r),f;if(s.controlType=="widget.button.toggling")f={},f[[t,i,r].join(ecount.constValue.gridDelimiter)]={type:"popover",container:this.optLayout.$bootstrapContainer?this.optLayout.$bootstrapContainer:"body",trigger:n.state.trigger||"hover",placement:n.state.placement,html:!0,template:undefined,multiPopover:undefined,title:undefined,content:n.state.message&&n.state.message.cr2br()},this.__core.view.bindPopover(f);else{var u=this.dataValidate.get("widget",t,i,r),o=u!=null&&u!=undefined,u=o?u:{isValidate:!1,error:{popover:{visible:!0,isShow:!1,message:"",placement:"auto",maxWidth:300},css:{visible:!0},widget:{needValidate:!1,errorType:null,useValidate:!1}}},h=o?u.error.popover.visible:!1,e=n.state.toggle;h!=e&&(e?this.__core.fn.setCellShowPopover("widget",t,i,r,{popOverVisible:e,message:n.state.message,placement:n.state.placement,widgetNeedValidate:!0}):(this.__core.fn.setCellDestroyPopover("widget",t,i,r),this.dataValidate.remove("widget",t,i,r)))}},setValidateNeedvalidate:function(n){var i=n.self&&n.self.gridSectionType||this.__core.activeSectionType,r=n.self&&n.self.gridColumnID||this.__core.activeColumnId,u=n.self&&n.self.gridDataKey||this.__core.activeRowId,t=this.dataValidate.get("widget",i,r,u),f=t!=null&&t!=undefined,t=f?t:{isValidate:!1,error:{popover:{visible:!1,isShow:!1,message:"",placement:"auto"},css:{visible:!1},widget:{needValidate:!1,errorType:null,useValidate:!1}}};n.state==!0?this.__core.fn.setCellShowError(i,r,u,{validateType:"widget",popOverVisible:t.error.popover.visible,showDirect:t.error.popover.isShow,message:t.error.popover.message,placement:t.error.popover.placement,cssVisible:!0,widgetNeedValidate:t.error.widget.needValidate}):(t.error.widget.needValidate=!1,this.__core.fn.removeValidate(i,r,u))},setObserveEmptyValue:function(n){var i=this.__core.lastFocusedActiveSectionType||n.self&&n.self.gridSectionType,r=this.__core.lastFocusedActiveColumnId||n.self&&n.self.gridColumnID,f=this.__core.lastFocusedActiveRowId||n.self&&n.self.gridDataKey,t=this.dataColumn.getById(i,r),u=t&&t.controlType;!/^widget.code.*/g.test(u)||n.self.valueCompIndex!=n.key||n.state!=""||this.__core.activeSectionType||this.__core.activeColumnId||this.__core.activeRowId||this.__core.fn.setCell(this.__core.lastFocusedActiveSectionType,this.__core.lastFocusedActiveColumnId,this.__core.lastFocusedActiveRowId,"",{isRunChange:!1,isRunComplete:!1,callByType:"system"})},setTextareaClass:function(n){var t=this.__core.lastFocusedActiveSectionType||n.self&&n.self.gridSectionType,i=this.__core.lastFocusedActiveColumnId||n.self&&n.self.gridColumnID,r=this.__core.lastFocusedActiveRowId||n.self&&n.self.gridDataKey,s=this.dataColumn.getById(t,i);if(controlType=s.controlType,controlType=="widget.textarea"){var u=this.__core.view.editLayer&&this.__core.view.editLayer.getInstance(),h=this.dataColumn.getIndexById(t,this.constValue.returnColumnIndexType.multi,i),c=this.dataRow.getIndexById(t,r),f=this.dataRow.getViewDataMadeCell(t,h,c),e=[],o;f&&f.className.forEach(function(n){n.indexOf("textarea-row")>-1&&e.push(n)});u&&(o=u.getValue().split("\n").length);this.__core.fn.removeCellClass(t,i,r,e);this.__core.view.row.changeTextareaHeight(t,i,r,{rows:o})}},setAutoCompleteCustomCellCallBack:function(){var i=this.optColumn[this.tbodyType].autoCalculate?Object.keys(this.optColumn[this.tbodyType].autoCalculate):[],t=this.optColumn[this.tbodyType].customCell,n=this.optColumn[this.tfootType].customCell;this.optColumn[this.tbodyType].customCell||(this.optColumn[this.tbodyType].customCell={},t=this.optColumn[this.tbodyType].customCell);this.optColumn[this.tfootType].customCell||(this.optColumn[this.tfootType].customCell={},n=this.optColumn[this.tfootType].customCell);i.map(function(n){return n.toLowerCase()}).forEach(function(i){n[i]=n[i]||t[i]})},addExternalModule:function(n,t){this[n]||(this[n]=t)},removeExternalModule:function(n){delete this[n]},setDateOption:function(n,t){t.controlOption||(t.controlOption={});typeof t.hideDateControl=="boolean"&&(t.controlOption.hideDateControl=t.hideDateControl);typeof t.isHideDateOptionChecked=="boolean"&&(t.controlOption.isHideDateOptionChecked=t.isHideDateOptionChecked);typeof t.isOnlyThisYear=="boolean"&&(t.controlOption.isOnlyThisYear=t.isOnlyThisYear);typeof t.hideDateButton=="boolean"&&(t.controlOption.hideDateButton=t.hideDateButton);typeof t.useDateSpace=="boolean"&&(t.controlOption.useDateSpace=t.useDateSpace);typeof t.useSlipDate=="boolean"&&(t.controlOption.useSlipDate=t.useSlipDate);typeof t.isMonthCalendar=="boolean"&&(t.controlOption.isMonthCalendar=t.isMonthCalendar);typeof t.hasYearLimit=="boolean"&&(t.controlOption.hasYearLimit=t.hasYearLimit,/\d+/.test(t.minYearLimit)&&(t.controlOption.minYearLimit=t.minYearLimit),/\d+/.test(t.maxYearLimit)&&(t.controlOption.maxYearLimit=t.maxYearLimit))},getDropdownmenuInfo:function(n,t){for(var r,e,f=this.optDropdown.dropdownList,u=0,h=f.length;u<h;u++)if(f[u].dropdownShowArea=="body"&&n==this.tbodyType){var i=f[u].dropdownFilter,o=f[u].dropdownmenuData,s=f[u].dropdownEvent;if(i.column=="all"){if(!i.disableColumn)break;if(!i.disableColumnKeys)for(i.disableColumnKeys={},r=0,e=i.disableColumn.length;r<e;r++)i.disableColumnKeys[i.disableColumn[r]]=!0;if(!i.disableColumnKeys[t])return{dropdownmenuData:o,dropdownEvent:s}}else if(i.column=="each"){if(!i.columnArray)break;if(!i.columnKeys)for(i.columnKeys={},r=0,e=i.columnArray.length;r<e;r++)i.columnKeys[i.columnArray[r]]=!0;if(i.columnKeys[t])return{dropdownmenuData:o,dropdownEvent:s}}}return null},makeViewData:function(){var n=this;if(this.__core.drawCancel)return this.__events&&this.__events._triggerEvent(ecount.gridV2.renderEvent.cancelCompleted),{cancel:!0}},getCellStyler:function(n){return{getStyle:function(){return Object.clone(n.style)},addStyle:function(t){n.style=_.merge(n.style,t)},removeStyle:function(t){delete n.style[t]},getCss:function(){var t=Object.clone(n.className);return t.split(" ").remove(function(n){return n===""})},addCss:function(t){t=_.isArray(t)?t.filter(function(t){return!~n.className.indexOf(t)}).join(" "):_.isString(t)?~n.className.indexOf(t)?"":t:"";n.className=[n.className,t].join(" ")},removeCss:function(t){var i;_.isArray(t)?t.forEach(function(t){i=new RegExp(t+" *","g");n.className=n.className.replace(i,"")}):_.isString(t)&&(i=new RegExp(t+" *","g"));n.className=n.className.replace(i,"")}}},setSectionTypes:function(n){this._sectionTypes=n},setStructureInfo:function(n){[this.constValue.formVersion.second,this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(this.optForm.version)&&this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tfootType&&(n=this.tbodyType);var t=this.__datas[n];this._madeRows=t.madeRows;this._renderedRowCount=t.renderedRowCount;this._widgetInstances=t.widgetInstances;this._unmappedWidgetInstancesId=t.unmappedWidgetInstancesId},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__api=this.__core.api;this.__setting=n.setting;this.dataUtil=ecount.gridV2.data.util;$.extend(this,n.mixinOption);this.generator=new ecount.gridV2.generator;this.__events=this.__setting.eventsGet();this.renderingCount=0;this.renderMode=this.constValue.renderMode.initialize;this.dataShaded=this.__core.data.shaded;this.dataSortable=this.__core.data.sortable;this.dataCheckbox=this.__core.data.checkbox;this.__initCheckedHeader=!1},initPrepareDataValue:function(){var t,n,i,r;for(this.__datas={},t=[this.theadType,this.tbodyType,this.tfootType],this._popoverTransaction={popover:{},tooltip:{}},this._madeSectionCount=0,n=0,i=t.length;n<i;n++)r=t[n],this.__datas[r]={madeRows:[],renderedRowCount:0,widgetInstances:{},unmappedWidgetInstancesId:[]}},init:function(n){this.initGlobalValue(n);this.initPrepareDataValue()},render:function(){},destroyAll:function(){}});ecount.gridV2.data.viewTable=$.Class(ecount.gridV2.data.view,{makeViewData:function(n,t){var st,ht,c,et,h,d,v,y,p,vt,g,ot,yt;ecount.gridV2.data.view.prototype.makeViewData.apply(this,arguments);this.setStructureInfo(n);st=this;this._madeSectionCount==0&&this.__events._triggerEvent(ecount.grid.event.list.preInit,null,{isMoveCursor:this.optKeyboard.useMoveCursor});ecount.gridV2.config.dataPerformance&&(ht=(new Date).getTime());n==this.tfootType&&this.dataRow.useAutoCalculate(this.tbodyType)&&(this.dataRow.dataNormalColumnAutoCalculateSetting.render(),this.setAutoCompleteCustomCellCallBack());n==this.tfootType&&this.dataRow.useAutoCalculate(this.tfootType)&&this.dataRow.dataSpecialrowColumnAutoCalculateSetting.render();this.dataRow.setStructureInfo(n);c=this.dataRow.getAll(n);n==this.tbodyType&&this.optCommon.renderType==this.constValue.gridRenderType.salaryPayrollBookList&&(this.setRenderMode(this.constValue.renderMode.partitialRenderingRow),t=this.initSalaryPayrollBookRowData(n,c,t));t=t||{};var r=t.dataRowStartIndex||0,l=t.dataRowEndIndex||0,ct=this.dataPrint&&this.dataPrint.getLimitPartitialRowEndIndex()||0,nt=t.madeTbodyRowCount||0,tt=t.madeTfootRowCount||0;l-r>ecount.gridV2.config.rowLimit&&(l=r+ecount.gridV2.config.rowLimit);ct&&(l=ct);for(var it=t.madeRows||this._madeRows,e=t.tableIdIndex||this.constValue.defaultTableId,u=t.tableId!=undefined&&t.tableId!=null?t.tableId:e.toString(),f=t.tableIndex||0,b=t.duplicationTableIdList||{},k,o,i,lt,rt,a,ut,at=Object.clone(t,!0),s=typeof t.isMadeTableIdByIndex=="boolean"?t.isMadeTableIdByIndex:!1,ft=this.dataRow.getViewDataTableMapAll(n),w=this.dataRow.getViewDataTrMapAll(n);r<l;r++){if(this.__core.drawCancel){this.__events&&this.__events._triggerEvent(ecount.gridV2.renderEvent.cancelCompleted);break}if(k=c[r],o=k[this.constValue.keyColumnPropertyName],o=o.replaceAll("\r","").replaceAll("\n","_").replaceAll("\t",""),a=k[this.constValue.rowVariableNames.rowType],t=Object.clone(at,!0),i=k[this.constValue.rowVariableNames.renderSet],lt=i&&i[this.constValue.rowVariableNames.pageCnt]||lt,rt=i&&i[this.constValue.rowVariableNames.totalMaxPageCount]||rt,et=!0,t.totalPageCount=rt,i&&!s?(i[this.constValue.rowVariableNames.newTable]||i.NEWTABLE?(f+=1,t.tableIndex=f,t.newTable=!0,this.dataPrint&&this.dataPrint.setCurrentPage(f),s&&(u=t.tableId=e.toString(),e+=1)):r!=0&&i[this.constValue.rowVariableNames.tableId]!=undefined&&(et=!1),i[this.constValue.rowVariableNames.tableId]!=undefined?(u=t.tableId=at.tableId=i[this.constValue.rowVariableNames.tableId],f>0&&(f=0,t.tableIndex=f,this.dataPrint&&this.dataPrint.setCurrentPage(f))):r==0&&(s=!0,t.isMadeTableIdByIndex=s,u=t.tableId=e.toString(),e+=1),i[this.constValue.rowVariableNames.tableId]!=undefined&&et==!0&&((i[this.constValue.rowVariableNames.newTable]||i.NEWTABLE)&&b[t.tableId]?(b[t.tableId].index+=1,f=b[t.tableId].index):b[t.tableId]={index:0})):(t.detailTableId=null,r!=0||s?[this.constValue.gridRenderType.typeSpecTran,this.constValue.gridRenderType.salaryPayrollBookList,this.constValue.gridRenderType.typeSplitList,this.constValue.gridRenderType.typeStatusList].contains(this.optCommon.renderType)?i&&(i[this.constValue.rowVariableNames.newTable]||i.NEWTABLE)&&(t.tableIndex=f=0,u=t.tableId=e.toString(),e+=1,t.newTable=!0):this.constValue.gridRenderType.typeHorizonList==this.optCommon.renderType&&i&&i[this.constValue.rowVariableNames.tableDirection]&&(t.tableIndex=f=0,u=i&&i[this.constValue.rowVariableNames.tableId]?t.tableId=i[this.constValue.rowVariableNames.tableId]:t.tableId=e.toString(),e+=1,t.newTable=!0):(s=!0,t.isMadeTableIdByIndex=s,u=t.tableId=e.toString(),e+=1)),i){if(i[this.constValue.rowVariableNames.detailTableId]||i[this.constValue.rowVariableNames.detailTableIdList]){for(h=i[this.constValue.rowVariableNames.detailTableIdList]?i[this.constValue.rowVariableNames.detailTableIdList]:i[this.constValue.rowVariableNames.detailTableId],$.isArray(h)||(h=[h]),t.detailTableId=h,d=0;d<h.length;d++)this.dataPrint&&this.dataPrint.setDetailGridList(h[d]);v=c[r+1];v&&(v[this.constValue.rowVariableNames.renderSet]?v[this.constValue.rowVariableNames.renderSet].detailTableType="cutFromDetail":(v[this.constValue.rowVariableNames.renderSet]={},v[this.constValue.rowVariableNames.renderSet].detailTableType="cutFromDetail"))}i.detailTableType=="cutFromDetail"&&(t.detailTableType=i.detailTableType);i[this.constValue.rowVariableNames.tableDirection]&&(t.tableDirection=i[this.constValue.rowVariableNames.tableDirection]);i[this.constValue.rowVariableNames.trHeight]&&(t.trHeight=i[this.constValue.rowVariableNames.trHeight]);i.ISFIRSTTABLE&&(t.isFirstTable=i.ISFIRSTTABLE);i.ISLASTTABLE&&(t.isLastTable=i.ISLASTTABLE);i.CURRENTPAGE!=undefined&&i.CURRENTPAGE!=null&&(t.currentPage=i.CURRENTPAGE.toString());i[this.constValue.rowVariableNames.totalMaxPageCount]!=undefined&&i[this.constValue.rowVariableNames.totalMaxPageCount]!=null&&(t.totalPage=i[this.constValue.rowVariableNames.totalMaxPageCount].toString())}if(a&&a===this.constValue.totalRowType?this.dataRow.__datas[n].totalCount++:a&&a===this.constValue.subtotalRowType&&this.dataRow.__datas[n].subTotalCount++,y=u+f,!ft[y]){if(r!=0||n!=this.theadType)if(r==0&&n==this.tbodyType&&u!=this.constValue.defaultTableId){for(p in this.dataRow.__datas.thead.tableMap)this.dataRow.__datas.thead.tableMap.hasOwnProperty(p)&&(this.dataRow.__datas.thead.tableMap[p].tableId=u);for(p in this.dataRow.__datas.thead.trMap)this.dataRow.__datas.thead.trMap.hasOwnProperty(p)&&(this.dataRow.__datas.thead.trMap[p].tableId=u);y=u+f}else r==0&&n==this.tfootType&&u==this.constValue.defaultTableId&&this.dataRow.__datas.tbody.length>0&&(vt=Object.keys(this.dataRow.__datas.tbody.tableMap),u=this.dataRow.__datas.tbody.tableMap[vt[0]].tableId,y=u+f,ft[y]={tableId:u,tableIndex:f});ft[y]={tableId:u,tableIndex:f}}for(w[o]||(w[o]={tableId:u,tableIndex:f,dataIdx:r}),t.tableId=u,t.tableIndex=f,t.dataRowIndex=r,t.prevRowId=null,t.nextRowId=r!=l-1?c[r+1][this.constValue.keyColumnPropertyName]:null,this.optCommon.columnType==this.constValue.columnType.multi&&(t.etcInfo={madeTbodyRowCount:nt,madeTfootRowCount:tt}),g=r-1;g>=0;g--)if(ut=c[g][this.constValue.keyColumnPropertyName],w[ut].trIdx){t.prevRowId=ut;break}t.trIdx=r==0||t.newTable?[-1]:[w[t.prevRowId].trIdx[w[t.prevRowId].trIdx.length-1]];[this.constValue.renderMode.initialize,this.constValue.renderMode.partitialRenderingRow].contains(this.renderMode)?(Array.prototype.push.apply(it,this.makeViewDataGroupRows(n,o,t)),this.__datas[n].renderedRowCount++,this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tbodyType&&(a==this.constValue.rowType.separate?tt+=1:nt+=1)):this.renderMode==this.constValue.renderMode.addRow&&(ot=this.makeViewDataGroupRows(n,o,t),yt=this.dataColumn.getAll(n,this.constValue.returnType.multi),ot.splice(0,0,r*yt.length,0),it.splice.apply(it,ot))}t.dataRowEndIndex>l&&this.optCommon.renderType!=this.constValue.gridRenderType.salaryPayrollBookList&&ecount.global.setTimeout(this.optCommon.ecPageId,function(){ecount.gridV2.util.log("call setTimeout");t.dataRowStartIndex=r;t.madeTfootRowCount=tt;t.madeTbodyRowCount=nt;st.makeViewData(n,t)},0);ecount.gridV2.config.dataPerformance&&ecount.gridV2.util.log(String.format("row view data {0} performance time: {1}ms",n,(new Date).getTime()-ht));this.triggerRowInitComplete(n,t)},triggerRowInitComplete:function(n,t){var o,u,f,s,c,i,l,h,r,a,e;if(this.renderMode==this.constValue.renderMode.initialize&&t.dataRowEndIndex==this.__datas[n].renderedRowCount||this.renderMode==this.constValue.renderMode.partitialRenderingRow){if(this._madeSectionCount++,this.tbodyType==n&&(t.dataRowEndIndex===0&&this.makeEmptyRow(n),this.__initCheckedHeader==!0)){var v=this.dataRow.getAll(this.theadType),y=this.constValue.checkBoxPropertyName,p=this.dataColumn.getIndexById(this.theadType,this.constValue.returnColumnIndexType.multi,y);for(o=0;o<v.length;o++)this.dataCheckbox.executeCheckbox(this.theadType,y,v[o][this.constValue.keyColumnPropertyName],!0,{isRunChange:!1,isRunComplete:!1}),this.dataRow.makeViewDataReplaceCell(this.theadType,y,v[o][this.constValue.keyColumnPropertyName],{rowCurrentRowIdx:o,columnCurrentColumnIdx:p});this.__initCheckedHeader=!1}if(this._madeSectionCount==this._sectionTypes.length||t.renderType==this.constValue.renderMode.partitialRenderingRow){if(this.renderMode=this.constValue.renderMode.none,this.optForm.version==this.constValue.formVersion.second){if(this.optDrag.titleSetupMenu&&this.optDrag.titleSetupMenu.length>0&&this.optDrag.titleSetupCallback){u=this.dataRow.getViewDataTrMapAll(this.theadType);f=this.dataColumn.getAll(this.theadType);for(s in u)if(u.hasOwnProperty(s))for(c=u[s],i=0,l=f.length;i<l;i++){h=c[f[i].id];for(r in this.optDrag.titleSetupCallback)if(this.optDrag.titleSetupCallback.hasOwnProperty(r)&&(a=this.optDrag.titleSetupCallback[r],e=[r,this.theadType,f[i].id,h.controlType,"custom"].join(ecount.constValue.gridDelimiter),h.eventKeyByEventType.custom[r]=e,!this.__core.events.exist(e)))this.__core.events.on(e,a,null)}}if(this.optDrag.totalSetupMenu&&this.optDrag.totalSetupMenu.length>0&&this.optDrag.totalSetupCallback){u=this.dataRow.getViewDataTrMapAll(this.tfootType);f=this.dataColumn.getAll(this.tfootType);for(s in u)if(u.hasOwnProperty(s))for(c=u[s],i=0,l=f.length;i<l;i++){h=c[f[i].id];for(r in this.optDrag.totalSetupCallback)if(this.optDrag.totalSetupCallback.hasOwnProperty(r)&&(a=this.optDrag.totalSetupCallback[r],e=[r,this.tfootType,f[i].id,h.controlType,"custom"].join(ecount.constValue.gridDelimiter),h.eventKeyByEventType.custom[r]=e,!this.__core.events.exist(e)))this.__core.events.on(e,a,null)}}}this.__events&&this.__events._triggerEvent(ecount.gridV2.rowEvent.initCompleted,t)}}},makeViewDataGroupRows:function(n,t,i){var ct,ft,u,tt,d,it,et,o,g,h,a;this.dataRow.setStructureInfo(n);var nt=[],lt=this.dataColumn.getAll(n),c=this.dataRow.getById(n,t),p=this.dataRow.getViewDataTrMapAll(n),e=n,s=c[this.constValue.rowVariableNames.rowType];s==this.constValue.rowType.separate&&(e=this.tfootType);i.tempSectionType=e;var f=this.dataColumn.getAll(e,this.constValue.returnType.multi),w,ot=i.prevRowId&&this.dataRow.getById(n,i.prevRowId),st=i.nextRowId&&this.dataRow.getById(n,i.nextRowId),r=typeof i.groupRowIdx=="number"?i.groupRowIdx:0,b=typeof i.groupRowLen=="number"?i.groupRowLen:f.length,rt=c[this.constValue.tree.set],l=this.dataRow.getViewDataRenderingTableMapAll(n),v,ht=this.dataColumn.getStartEndInfo(e),k,ut="",y;for(v=i.dataRowIndex*f.length,this.optCommon.columnType==this.constValue.columnType.multi&&(e==this.tbodyType?(w=this.dataColumn.getAll(this.tfootType,this.constValue.returnType.multi),v=i.etcInfo.madeTfootRowCount*w.length+i.etcInfo.madeTbodyRowCount*f.length):e==this.tfootType&&(w=this.dataColumn.getAll(this.tbodyType,this.constValue.returnType.multi),v=i.etcInfo.madeTbodyRowCount*w.length+i.etcInfo.madeTfootRowCount*f.length)),y={rowIndex:i.dataRowIndex,rowCurrentRowIndex:v,tableIndex:i.tableIndex,tempSectionType:e},i.rowCurrentRowIndex=v,ct=this.makeViewDataRenderingTableMap(n,c[this.constValue.rowVariableNames.mergeSet]||this.optRow[n].mergeSet,y),this.optRow[n].styleBoldOnMergeRow&&c[this.constValue.rowVariableNames.mergeSet]&&c[this.constValue.rowVariableNames.mergeSet].length>0&&!(f.length==1&&c[this.constValue.rowVariableNames.mergeSet].length>0&&c[this.constValue.rowVariableNames.mergeSet][0][this.constValue.rowVariableNames.mergeStartIndex]>=f[0].length)&&(ft=c[this.constValue.rowVariableNames.mergeSet].find(function(n){if(n[this.constValue.rowVariableNames.isBold])return!0}.bind(this)),ft&&(ut+=this.constValue.styleClassName.bold+" "));r<b;r++){if(this.__core.drawCancel)break;if(u={style:{},className:ut,attr:{"data-key":t},cells:null,option:{tableIndex:i.tableIndex,tableId:i.tableId,newTable:i.newTable,isFirstTable:i.isFirstTable,isLastTable:i.isLastTable,currentPage:i.currentPage,totalPage:i.totalPage}},u.attr["data-rowtype"]=f[r]&&f[r][0]&&this.constValue.sectionSeparateText[f[r][0].GROUP_FLAG]||this.constValue.sectionSeparateValue.line,i.detailTableType&&r==0&&(u.option.detailTableType=i.detailTableType),/^special-row-\d+/g.test(t)||this.constValue.subtotalRex.test(s)||this.constValue.subtotalRex2.test(s)||this.constValue.topsubtotalRex.test(s)||this.constValue.bottomsubtotalRex.test(s)||this.constValue.pagetotalRex.test(s)||this.constValue.totalRex.test(s)?u.className.test(this.constValue.mutedRex)||(u.className+="muted "):this.optRow[n].styleBackgroundColorDeterminer&&(k=this.optRow[n].styleBackgroundColorDeterminer(c,r),k&&(u.className+=$.isString(k)?k+" ":this.optRow[n].styleBackgroundColor+" ")),this.optCommon.gridType==this.constValue.gridType.editable&&this.optRow[n].showInputFakeOutLine===!0&&(u.className.test(this.constValue.rowEditableRex)||(u.className+=this.constValue.rowEditableClassName+" ")),this.optFormOption.borderRemoveHorizontal&&(i.tempSectionType==this.tfootType||s&&(s==="total"||s==="subtotal")||this.optForm.version==this.constValue.formVersion.fourth&&(this.constValue.topsubtotalRex.test(this.constValue.sectionSeparateText[f[r][0].GROUP_FLAG||"1"])||this.constValue.bottomsubtotalRex.test(this.constValue.sectionSeparateText[f[r][0].GROUP_FLAG||"1"])),(i.tempSectionType==this.tfootType||s&&(s==="total"||s==="subtotal"))&&r==b-1||this.optForm.version==this.constValue.formVersion.fourth&&(this.constValue.topsubtotalRex.test(this.constValue.sectionSeparateText[f[r][0].GROUP_FLAG||"1"])||this.constValue.bottomsubtotalRex.test(this.constValue.sectionSeparateText[f[r][0].GROUP_FLAG||"1"]))),this.optFormOption.borderRemoveVertical&&(i.tempSectionType==this.tfootType||s&&(s==="total"||s==="subtotal")||this.optForm.version==this.constValue.formVersion.fourth&&(this.constValue.topsubtotalRex.test(this.constValue.sectionSeparateText[f[r][0].GROUP_FLAG||"1"])||this.constValue.bottomsubtotalRex.test(this.constValue.sectionSeparateText[f[r][0].GROUP_FLAG||"1"]))),i.newTable&&(u.option.isNewTable=i.newTable,this.dataRow.__datas[n].skipRowLine&&this.dataRow.__datas[n].skipRowLine[i.dataRowIndex]&&this.dataRow.__datas[n].skipRowLine[i.dataRowIndex][r]||(i.newTable=!1)),i.detailTableId&&(u.option.detailTableId=i.detailTableId),i.tableDirection&&(u.option.tableDirection=i.tableDirection),this.dataRow.__datas[n].skipRowLine&&this.dataRow.__datas[n].skipRowLine[i.dataRowIndex]&&this.dataRow.__datas[n].skipRowLine[i.dataRowIndex][r]){for(l[y.rowCurrentRowIndex+r]||(l[y.rowCurrentRowIndex+r]=[]),nt.push(null),h=0,a=f[r].length;h<a;h++)l[y.rowCurrentRowIndex+r][h]={type:"SKIP"};this.dataCheckbox.getCheckboxUse(n,this.constValue.checkBoxPropertyName)&&this.dataCheckbox.setAvailablePageCount(n,this.constValue.checkBoxPropertyName,-1);continue}function v(n){var t="",i;return n&&(i=n.split(" "),t="",i.forEach(function(n){n=="muted"||n!=""&&(t+=n+" ")})),t}if(e==this.tbodyType&&(tt=c[this.constValue.rowCountColumnPropertyName],tt&&(u.className+=tt%2==0?"tr-even ":"tr-odd ")),this.optRow[n].isShade&&(this.optRow[n].shadeType==this.constValue.shadeType.multi?this.optForm.version==this.constValue.formVersion.third||this.optForm.version==this.constValue.formVersion.fourth?this.optCommon.columnType==this.constValue.columnType.single?i.dataRowIndex%this.optRow[n].shadeMultiple==this.optRow[n].shadeMultiple-1&&(u.className=v(u.className,"muted"),u.className+=this.optRow[n].shadeCss+" "):this.optCommon.columnType==this.constValue.columnType.multi&&e==this.tbodyType&&r%this.optRow[n].shadeMultiple==this.optRow[n].shadeMultiple-1&&(u.className=v(u.className,"muted"),u.className+=this.optRow[n].shadeCss+" "):i.dataRowIndex%this.optRow[n].shadeMultiple==this.optRow[n].shadeMultiple-1&&(u.className=v(u.className,"muted"),u.className+=this.optRow[n].shadeCss+" "):this.optRow[n].shadeType==this.constValue.shadeType.custom&&(d=this.optRow[n].shadeCallback&&this.optRow[n].shadeCallback({prevRow:ot,curRow:c,nextRow:st,etcInfo:ht}),d&&d.shadeClass&&(u.className+=d.shadeClass+" "))),rt&&this.dataTree.isTreeExpand(n,rt[this.constValue.tree.parentId])===!1&&(u.className+=" hide "),this.setRowHeight(n,u,r,i,s),this.renderMode==this.constValue.renderMode.insertRow){if(this.optCommon.columnType==this.constValue.columnType.multi&&i.tempSectionType==this.tfootType){for(it=this.dataRow.getSectionRowIndex(n),et=this.dataColumn.getAll(n,this.constValue.returnType.multi),o=r,g=f.length;o<g;o++)if(i.trIdx[o]=(it.endRowCount-it.startRowIndex)*et.length+o,o>=b)for(h=0,a=f[o].length;h<a;h++)p[t][f[o][h].id].columnRowIdx=o,["MERGE","NORMAL"].contains(l[i.trIdx[o]][h].type)&&(l[i.trIdx[o]][h].trIdx=o)}else for(o=r,g=f.length;o<g;o++)if(i.trIdx[o]=i.dataRowIndex*f.length+o,o>=b)for(h=0,a=f[o].length;h<a;h++)p[t][f[o][h].id].columnRowIdx=o,["MERGE","NORMAL"].contains(l[i.trIdx[o]][h].type)&&(l[i.trIdx[o]][h].trIdx=o)}else this.renderMode==this.constValue.renderMode.addColumn||this.renderMode=="divideColumn"||(this.renderMode==this.constValue.renderMode.replace?i.trIdx[r]=i.trIdx[i.trIdx.length-1]:this.renderMode==this.constValue.renderMode.removeColumn||this.renderMode==this.constValue.renderMode.removeRowAt||this.renderMode==this.constValue.renderMode.refresh||((i.trIdx[r]==undefined||i.trIdx[r]==null)&&(i.trIdx[r]=i.trIdx[i.trIdx.length-1]),i.trIdx[r]+=1));p[t].trIdx=i.trIdx;p[t].columnSectionType=i.tempSectionType;u.cells=this.makeViewDataCells(n,r,t,i);this.optForm.version==this.constValue.formVersion.fourth&&(this.optCommon.columnType==this.constValue.columnType.single&&(!this.optRow[n].isVisibleTopSubtotal1Slip&&[this.constValue.sectionSeparateValue.tsubtot1slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleTopSubtotal2Slip&&[this.constValue.sectionSeparateValue.tsubtot2slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleTopSubtotal3Slip&&[this.constValue.sectionSeparateValue.tsubtot3slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleTopSubtotal4Slip&&[this.constValue.sectionSeparateValue.tsubtot4slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleTopSubtotal5Slip&&[this.constValue.sectionSeparateValue.tsubtot5slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleTopSubtotal1&&[this.constValue.sectionSeparateValue.tsubtot1].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleTopSubtotal2&&[this.constValue.sectionSeparateValue.tsubtot2].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleTopSubtotal3&&[this.constValue.sectionSeparateValue.tsubtot3].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleTopSubtotal4&&[this.constValue.sectionSeparateValue.tsubtot4].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleTopSubtotal5&&[this.constValue.sectionSeparateValue.tsubtot5].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":this.optRow[n].isVisibleSlipData||f[r][0].GROUP_FLAG!=this.constValue.sectionSeparateValue.slip?this.optRow[n].isVisibleData||f[r][0].GROUP_FLAG!=this.constValue.sectionSeparateValue.line?!this.optRow[n].isVisibleBottomSubtotal1Slip&&[this.constValue.sectionSeparateValue.subtot1slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleBottomSubtotal2Slip&&[this.constValue.sectionSeparateValue.subtot2slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleBottomSubtotal3Slip&&[this.constValue.sectionSeparateValue.subtot3slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleBottomSubtotal4Slip&&[this.constValue.sectionSeparateValue.subtot4slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleBottomSubtotal5Slip&&[this.constValue.sectionSeparateValue.subtot5slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleBottomSubtotal1&&[this.constValue.sectionSeparateValue.subtot1].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleBottomSubtotal2&&[this.constValue.sectionSeparateValue.subtot2].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleBottomSubtotal3&&[this.constValue.sectionSeparateValue.subtot3].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleBottomSubtotal4&&[this.constValue.sectionSeparateValue.subtot4].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[n].isVisibleBottomSubtotal5&&[this.constValue.sectionSeparateValue.subtot5].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":this.optRow[n].isVisiblePageTotal1Slip||f[r][0].GROUP_FLAG!=this.constValue.sectionSeparateValue.pagetotslip?this.optRow[n].isVisiblePageTotal1||f[r][0].GROUP_FLAG!=this.constValue.sectionSeparateValue.pagetot||(u.className+=" hide"):u.className+=" hide":u.className+=" hide":u.className+=" hide"),this.optCommon.columnType==this.constValue.columnType.multi&&(!this.optRow[e].isVisibleTopSubtotal1Slip&&[this.constValue.sectionSeparateValue.tsubtot1slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleTopSubtotal2Slip&&[this.constValue.sectionSeparateValue.tsubtot2slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleTopSubtotal3Slip&&[this.constValue.sectionSeparateValue.tsubtot3slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleTopSubtotal4Slip&&[this.constValue.sectionSeparateValue.tsubtot4slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleTopSubtotal5Slip&&[this.constValue.sectionSeparateValue.tsubtot5slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleTopSubtotal1&&[this.constValue.sectionSeparateValue.tsubtot1].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleTopSubtotal2&&[this.constValue.sectionSeparateValue.tsubtot2].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleTopSubtotal3&&[this.constValue.sectionSeparateValue.tsubtot3].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleTopSubtotal4&&[this.constValue.sectionSeparateValue.tsubtot4].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleTopSubtotal5&&[this.constValue.sectionSeparateValue.tsubtot5].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":this.optRow[e].isVisibleSlipData||f[r][0].GROUP_FLAG!=this.constValue.sectionSeparateValue.slip?this.optRow[e].isVisibleData||f[r][0].GROUP_FLAG!=this.constValue.sectionSeparateValue.line?!this.optRow[e].isVisibleBottomSubtotal1Slip&&[this.constValue.sectionSeparateValue.subtot1slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleBottomSubtotal2Slip&&[this.constValue.sectionSeparateValue.subtot2slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleBottomSubtotal3Slip&&[this.constValue.sectionSeparateValue.subtot3slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleBottomSubtotal4Slip&&[this.constValue.sectionSeparateValue.subtot4slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleBottomSubtotal5Slip&&[this.constValue.sectionSeparateValue.subtot5slip].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleBottomSubtotal1&&[this.constValue.sectionSeparateValue.subtot1].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleBottomSubtotal2&&[this.constValue.sectionSeparateValue.subtot2].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleBottomSubtotal3&&[this.constValue.sectionSeparateValue.subtot3].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleBottomSubtotal4&&[this.constValue.sectionSeparateValue.subtot4].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":!this.optRow[e].isVisibleBottomSubtotal5&&[this.constValue.sectionSeparateValue.subtot5].contains(f[r][0].GROUP_FLAG)?u.className+=" hide":this.optRow[e].isVisiblePageTotal1Slip||f[r][0].GROUP_FLAG!=this.constValue.sectionSeparateValue.pagetotslip?this.optRow[e].isVisiblePageTotal1||f[r][0].GROUP_FLAG!=this.constValue.sectionSeparateValue.pagetot||(u.className+=" hide"):u.className+=" hide":u.className+=" hide":u.className+=" hide"));u.className=u.className.split(" ");nt.push(u)}return nt},makeViewDataCells:function(n,t,i,r){var w,e,v,a,l;this.dataRow.setStructureInfo(n);var b=[],d=this.dataColumn.getAll(n),p=r.tempSectionType||n,f=this.dataColumn.getAll(p,this.constValue.returnType.multi),g=this.dataRow.getById(n,i),c=this.dataRow.getViewDataTrMapAll(n),s=this.dataRow.getViewDataRenderingTableMapAll(n),o=r.rowCurrentRowIndex+t,u=typeof r.columnStartIdx=="number"?r.columnStartIdx:0,k=typeof r.columnEndLen=="number"?r.columnEndLen:f[t].length,h=0,y;if(this.renderMode==this.constValue.renderMode.divideColumn)if(w=f[t][u].id,e=c[i][w].adjustmentValue,e==1)for(;;){if(a=this.dataColumn.getPrevColumn(p,w),!a)break;if(w=a.id,e=c[i][w].adjustmentValue,e!=1){h+=e;break}else h-=1}else h=e;else if(this.renderMode==this.constValue.renderMode.addColumn){if(e=0,r.direction=="right")if(f[t][u-1]&&(e=c[i][f[t][u-1].id].adjustmentValue),e==1)for(h-=1,v=2;u-v>-1;){if(e=c[i][f[t][u-v].id].adjustmentValue,e!=1){h+=e;break}else h-=1;v+=1}else h=e;else if(r.direction=="left")if(f[t][u+(k-u)]&&(e=c[i][f[t][u+(k-u)].id].adjustmentValue),e==1)for(h-=1,v=1;u-v>-1;){if(e=c[i][f[t][u-v].id].adjustmentValue,e!=1){h+=e;break}else h-=1;v+=1}else h=e}else this.renderMode==this.constValue.renderMode.removeColumn&&f[t][u]&&(a=this.dataColumn.getPrevRealColumn(p,f[t][u].id,i),h=a&&a.column?c[i][a.column.id].adjustmentValue+a.minuseIndex:this.dataColumn.getIndexById(p,this.constValue.returnColumnIndexType.multi,f[t][u].id)*-1);for(;u<k;u++){if(this.__core.drawCancel)break;this.renderMode==this.constValue.renderMode.removeRowAt?c[i][f[t][u].id]={columnRowIdx:t,columnIdx:u,columnSectionType:r.tempSectionType}:n!=this.theadType&&this.__setting.getCheckBoxDisplayMergeType()!=this.constValue.displayCheckboxMegeType.merge&&f[t][u].id==this.constValue.checkBoxPropertyName?c[i][f[t][u].id]={columnRowIdx:t,columnIdx:u,columnSectionType:r.tempSectionType}:c[i][f[t][u].id]||(c[i][f[t][u].id]={columnRowIdx:t,columnIdx:u,columnSectionType:r.tempSectionType});l=c[i][f[t][u].id];s[o]||(s[o]=[]);[this.constValue.renderMode.divideColumn].contains(this.renderMode)&&(s[o][u]=null);["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN","SKIP"].contains(s[o][u]&&s[o][u].type)?(h-=1,[this.constValue.checkBoxPropertyName,this.constValue.rowMoveablePropertyName,this.constValue.rowNumberingPropertyName].contains(f[t][u].id)||(l.adjustmentValue=1,l.controlType=null,b[u]=null),f[t][u].isMergeColumn="1",f[t][u].isTempColumn="1"):(s[o][u]?(s[o][u].dataIdx=r.dataRowIndex,s[o][u].tableIdx=r.tableIndex,s[o][u].columnIdx=u,s[o][u].trIdx=o,s[o][u].rowId=i,s[o][u].columnId=f[t][u].id,s[o][u].columnSectionType=r.tempSectionType,s[o][u].detailSectionType=f[t][u].GROUP_FLAG||this.constValue.sectionSeparateValue.line):s[o][u]={type:"NORMAL",dataIdx:r.dataRowIndex,tableIdx:r.tableIndex,trIdx:o,columnIdx:u,rowId:i,columnId:f[t][u].id,columnSectionType:r.tempSectionType,detailSectionType:f[t][u].GROUP_FLAG||this.constValue.sectionSeparateValue.line},l.adjustmentValue=h,y=this.makeViewDataCell(n,f[t][u].id,i,{rowCurrentRowIndex:o,columnCurrentColumnIndex:u,groupRowIndex:t,modeView:this.constValue.dataType.modeView,popover:r.popover,tooltip:r.tooltip,tempSectionType:p}),b[u]=y.cellData,l.disabled=y.disabled,l.controlType=y.controlType,l.editControlType=y.editControlType,l.dropdownmenuData=y.dropdownmenuData,l.eventKeyByEventType=y.eventKeyByEventType,f[t][u].isMergeColumn="0")}return b},makeViewDataCell:function(n,t,i,r){var yt,f,ti,wt,kr,yi,l,ce,du,gu,ri,ur,pi,lt,tu,fr,iu,ru,uu,ui,nf,fi,g,fu,ht,tf,eu,er,or,ou,su,sr,uf,ff,ef,si,et,it,wi,at,hu,cr,cu,lu,k,w,rt,li,lr,sf,hf,ar,cf,lf,hi,ci,au,vt,bi,tt,bt,yf,pf,ki,yr,pr,gt,kt,wr,vu,ai,di,ot,vr,d,gf,ne,ni;r=r||{};var yu=r.rowCurrentRowIndex||0,st=r.columnCurrentColumnIndex||0,ct=r.groupRowIndex||0,nt,ut=r.tempSectionType||n,te=this.dataRow.getViewDataRenderingTableMapAll(n);if(this.dataRow.setStructureInfo(n),yt=this.dataRow.getViewDataTrMapAll(n),f={style:{},cell:{},attr:{sectiontype:n},className:yt[i][t].className?yt[i][t].className:"",removeClassName:"",tag:n==this.theadType?"th":"td"},this.__core.drawCancel)return f;ti={system:{},custom:{}};ecount.common.isSafari&&this.optCommon.gridType==this.constValue.gridType.editable&&(f.className="cursor-pointer ");var pt=this.dataColumn.getAll(this.theadType,this.constValue.returnType.multi),ie=pt[0].length,gi=ie-1,e=this.dataColumn.getById(ut,t),v=this.dataRow.getById(n,i),nr=v[this.constValue.rowVariableNames.rowType],br=yt[i][t],vi=v[this.constValue.tree.set],pu="",tr,p=ecount.common.isTrue(e.editableState),ir=(this.__core.activeSectionType==n&&this.__core.activeColumnId==t&&this.__core.activeRowId==i)==!0,wu=e.isCellHeaderType,a=te[yu][st],we=a&&a[this.constValue.rowVariableNames.isAutoMerge],ii=a&&a[this.constValue.rowVariableNames.rowType]||v[this.constValue.rowVariableNames.rowType],bu=this.optColumn[ut].duplicationPoint&&this.optColumn[ut].duplicationPoint.length&&this.optColumn.copyMergeInfo===!1;br.isUseEditable&&(p=typeof br.editableState=="boolean"?br.editableState:p);[this.constValue.columnType.single,this.constValue.columnType.each].contains(this.optCommon.columnType)?/^special-row-\d+/g.test(i)||this.constValue.subtotalRex.test(ii)||this.constValue.subtotalRex2.test(ii)||this.constValue.topsubtotalRex.test(ii)||this.constValue.bottomsubtotalRex.test(ii)||this.constValue.pagetotalRex.test(ii)||this.constValue.totalRex.test(ii)?(e.footerOption&&e.footerOption.className?f.className+=e.footerOption.className:e.className&&(f.className+=e.className,!$.isEmpty(this.optFoot.styleFontBold)&&ecount.common.isTrue(this.optFoot.styleFontBold)&&(f.className=f.className.replace(this.constValue.boldRex,""),f.className+=" text-bold "),!$.isEmpty(this.optFoot.styleFontItalic)&&ecount.common.isTrue(this.optFoot.styleFontItalic)&&(f.className=f.className.replace(this.constValue.italicRex,""),f.className+=" text-italic "),!$.isEmpty(this.optFoot.styleFontStrike)&&ecount.common.isTrue(this.optFoot.styleFontStrike)&&!$.isEmpty(this.optFoot.styleFontUnderline)&&ecount.common.isTrue(this.optFoot.styleFontUnderline)?(f.className=f.className.replace(this.constValue.strikeUnderlineRex,""),f.className+=" grid-text-uline-through "):(!$.isEmpty(this.optFoot.styleFontStrike)&&ecount.common.isTrue(this.optFoot.styleFontStrike)&&(f.className=f.className.replace(this.constValue.strikeRex,""),f.className+=" text-line-through "),!$.isEmpty(this.optFoot.styleFontUnderline)&&ecount.common.isTrue(this.optFoot.styleFontUnderline)&&(f.className=f.className.replace(this.constValue.underlineRex,""),f.className+=" text-uline ")),!$.isEmpty(this.optFoot.styleFontSize)&&this.optFoot.styleFontSize>0&&(f.className=f.className.replace(this.constValue.fontSizeRex,""),f.className+=" font-"+this.optFoot.styleFontSize+"px ")),e.footerOption&&e.footerOption.fontColor&&(f.style.color="#"+e.footerOption.fontColor+";"),e.footerOption&&e.footerOption.fontCellBgColor&&(f.style["background-color"]=(this.constValue.nativeColorname[e.footerOption.fontCellBgColor]?"":"#")+e.footerOption.fontCellBgColor+";"),this.setViewDataCellLinebreak(f,e.footerOption),this.setViewDataCellBorder(f,e.footerOption,{isBorderTopStyleImpotant:!0,isBorderBottomStyleImpotant:!0,isBorderLeftStyleImpotant:!0,isBorderRightStyleImpotant:!0})):n==this.theadType?(/\d+/.test(e.fontSize)&&(f.className+="font-"+e.fontSize.toString()+"px "),e.columnOption.className?(this.constValue.fontSizeRex.test(e.columnOption.className)&&(f.className=f.className.replace(this.constValue.fontSizeRex,"")),f.className+=e.columnOption.className):e.className&&(f.className+=e.className),this.optHeader.headerCellClass&&$.isString(this.optHeader.headerCellClass)&&(f.className+=this.optHeader.headerCellClass+" "),e.columnOption&&e.columnOption.fontColor&&(f.style.color="#"+e.columnOption.fontColor+";"),e.columnOption&&e.columnOption.fontCellBgColor&&(f.style["background-color"]=(this.constValue.nativeColorname[e.columnOption.fontCellBgColor]?"":"#")+e.columnOption.fontCellBgColor+";"),wt={isBorderTopStyleImpotant:!1,isBorderBottomStyleImpotant:!1,isBorderLeftStyleImpotant:!1,isBorderRightStyleImpotant:!1},st==0&&(wt.isBorderLeftStyleImpotant=!0),st==gi&&(wt.isBorderRightStyleImpotant=!0),this.setViewDataCellLinebreak(f,e.columnOption),this.setViewDataCellBorder(f,e.columnOption,wt)):ut==this.tbodyType&&(e.className&&(f.className+=e.className),e.style&&(f.style=_.merge(f.style,e.style)),f.className=this.getClassName(n,f.className,e,a),e.fontColor&&(f.style.color="#"+e.fontColor+";"),e.fontCellBgColor&&(f.style["background-color"]=(this.constValue.nativeColorname[e.fontCellBgColor]?"":"#")+e.fontCellBgColor+";"),wt={isBorderTopStyleImpotant:!1,isBorderBottomStyleImpotant:!1,isBorderLeftStyleImpotant:!1,isBorderRightStyleImpotant:!1},st==0&&(wt.isBorderLeftStyleImpotant=!0),st==gi&&(wt.isBorderRightStyleImpotant=!0),this.setViewDataCellLinebreak(f,e),this.setViewDataCellBorder(f,e,wt)):(f.className+=e.className,n==this.theadType&&this.optHeader.headerCellClass&&$.isString(this.optHeader.headerCellClass)&&(f.className+=this.optHeader.headerCellClass+" "),f.className=this.getClassName(n,f.className,e,a),e.fontColor&&(f.style.color="#"+e.fontColor+";"),e.fontCellBgColor&&(f.style["background-color"]=(this.constValue.nativeColorname[e.fontCellBgColor]?"":"#")+e.fontCellBgColor+";"),this.setViewDataCellLinebreak(f,e),this.setViewDataCellBorder(f,e));this.optDrag.use&&[this.constValue.formVersion.second,this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(this.optForm.version)&&(this.optDrag.disableColumnIds&&this.optDrag.disableColumnIds[t]||/tempRepeat\d+/g.test(e.id)||(this.optCommon.columnType==this.constValue.columnType.single?n==this.theadType&&(f.className+=" gridDrag-enable ",f.className+=" gridDrop-enable "):this.optCommon.columnType==this.constValue.columnType.multi&&(f.className+=" gridDrag-enable ",f.className+=" gridDrop-enable ")));this.optForm.version==this.constValue.formVersion.third?/tempRepeat\d+/g.test(e.id)||(this.optCommon.columnType==this.constValue.columnType.single?n==this.tfootType&&this.__setting.getFormIsAutoMergeSpecialrow()?(this.optEditable.specialRowMerge.forEach(function(n){return kr=n._MERGE_SET.find(function(n){return n._MERGE_START_INDEX==st&&n._ENABLESELECT===!0}),kr?!1:void 0}),kr&&(f.className+=" gridSelector-enable ")):n==this.theadType&&(f.className+=" gridSelector-enable "):this.optCommon.columnType==this.constValue.columnType.multi&&(f.className+=" gridSelector-enable ")):this.optForm.version==this.constValue.formVersion.fourth&&(f.className+=" gridSelector-enable ");!ir&&vi&&this.optCommon.gridStyle==this.constValue.gridStyle.tree&&e.isTree==!0&&(f.className+=" indent"+(vi[this.constValue.tree.depth]+1)+" ");this.optCommon.columnType!=this.constValue.columnType.multi?n!=this.theadType&&(f.attr["data-label"]=this.getDataLabel(this.theadType,pt[ct][st].id,this.dataRow.__datas.thead.datas[0][this.constValue.keyColumnPropertyName],r)):f.attr["data-label"]=e.title;e.fixTitle&&(f.attr["data-fixtitle"]=e.fixTitle);f.attr["data-key"]=ecount.gridV2.util.escapeHTML(i);f.attr["data-columnid"]=t;a.type=="MERGE"&&((a[this.constValue.rowVariableNames.rowspanCount]||!1)&&(f.attr.rowspan=a[this.constValue.rowVariableNames.rowspanCount]),(a[this.constValue.rowVariableNames.colspanCount]||!1)&&(f.attr.colspan=a[this.constValue.rowVariableNames.colspanCount]));yi=dr==this.constValue.columnType.multi?this.dataColumn.getConvertor(ut,r.modeView,t):this.dataColumn.getConvertor(this.tbodyType,r.modeView,t);var re=this.optCommon.ecPageId,ue=this.optCommon.ecContainerName,fe=this.optCommon.ecTabId,ee=this.optLayout.containerSelector,dr=this.optCommon.columnType,b={ecPageID:re,containerName:ue,tabId:fe,gridID:ee,gridDataKey:i,gridColumnID:t,gridSectionType:n},gr=this.generator.get("ecount.gridV2.widget.cell",b)||this.generator.get("widget.generator.cell",b),ft=gr.end(),oe=this.generator.get("widget.generator.control"),nu=this.optColumn[ut].customCell&&t&&this.optColumn[ut].customCell[t.toLowerCase()],dt={},u={},c,o,se,he,ku={},k=v[e.propertyName],k=k==undefined||k==null?"":typeof k=="boolean"?k:typeof k=="object"?k:k.toString(),s=k,h,rr=null;h=dr!=this.constValue.columnType.multi&&n==this.theadType?e.controlType=="widget.checkbox"?e.controlType:e.columnOption.controlType||"widget.label":e.controlType||"widget.label";n==this.theadType&&bu&&(s=k=pt[yu][st].title||"");n!=this.theadType&&r.modeView==this.constValue.dataType.modeView&&(s=this.makeViewDataConverteValue(n,r.modeView,t,k,{isExecuteConvert:!nu||!this.optColumn.canOverrideDataTypeInCustomRowCell,tempSectionType:r.tempSectionType,thousandSeparator:e.thousandSeparator==undefined||e.thousandSeparator==null?ecount.config.company.THOU_SEPARATOR:e.thousandSeparator,decimalSeparator:e.decimalSeparator==undefined||e.decimalSeparator==null?ecount.config.company.DEC_SEPARATOR:e.decimalSeparator}));l=e.controlOption||{};ce={sectionType:n,columnId:t,rowId:i,column:e,controlType:h,row:v,originalValue:k,value:s,settings:this.__setting};typeof e.widgetOptions=="string"&&(du=e.widgetOptions,l.widgetOptions={},l.widgetOptions.controlOption=du,l.widgetOptions._addPopUpOpenParam=!0,l.widgetOptions._addPopUpOpenPwidgetOptionsaram=!0,b=$.extend({},b,l));n==this.theadType&&(dt=e.columnOption&&e.columnOption.event||{});lt=e.GROUP_FLAG||this.constValue.sectionSeparateValue.line;switch(lt){case this.constValue.sectionSeparateValue.slip:f.attr["data-rowtype"]="slip";break;default:f.attr["data-rowtype"]=this.constValue.sectionSeparateText[lt]}if(gu=v[this.constValue.keyColumnPropertyName]==this.constValue.rowEmptyRowPropertyName?{}:v,nu?(u=nu(bu?r.rowCurrentRowIndex:s,gu,yi,{dataType:e.dataType,dataType1:e.dataType1,dataType2:e.dataType2,isCheckZero:e.isCheckZero,isShowIfZero:e.isShowIfZero,amtCalc:e.amtCalc,thousandSeparator:e.thousandSeparator==null||e.thousandSeparator==undefined?ecount.config.company.THOU_SEPARATOR:e.thousandSeparator,decimalSeparator:e.decimalSeparator==null||e.decimalSeparator==undefined?ecount.config.company.DEC_SEPARATOR:e.decimalSeparator,isTodayTime:ecount.common.isTrue(e.isTodayTime)},{rowType:lt,cellStyler:this.getCellStyler(f),isGenerateViewData:!0,columnSectionType:ut})||{},h=u.controlType||h,r.modeView==this.constValue.dataType.modeInput||(u.data!=undefined&&u.data!=null?s=typeof u.data=="string"||typeof u.data=="number"?u.data.toString():u.data instanceof Decimal?u.data.toString():u.data:k==""&&u.placeHolder&&typeof u.placeHolder=="string"&&(s=u.placeHolder,f.className+=" text-muted ")),this.optColumn.canOverrideDataTypeInCustomRowCell&&(typeof u.dataType=="string"&&u.dataType.length>0?["none","0"].contains(u.dataType)||(yi=ecount.convertor.dataTypeConvertor[u.dataType[0]],s=this.makeViewDataConverteValue(n,r.modeView,t,s,{convertor:yi})):s=this.makeViewDataConverteValue(n,r.modeView,t,s,{convertor:yi})),ku=n==this.theadType?u.columnOption&&u.columnOption.controlOption||{}:u.controlOption?u.controlOption.controlEvent:{},dt=_.extend(dt,u.event,ku),rr=u.dropdownmenuData,e.controlOption&&(u.controlOption?u.controlOption=_.extend({},l,u.controlOption):(u.controlOption={},_.extend(u.controlOption,l))),k==""&&u.controlOption&&u.controlOption.placeHolder&&typeof u.controlOption.placeHolder=="string"&&(s=u.controlOption.placeHolder,f.className+=" text-muted "),u.parentAttrs||(u.parentAttrs={}),typeof u.parentAttrs["class"]=="object"&&u.parentAttrs["class"].constructor==Array?u.parentAttrs["class"]=u.parentAttrs["class"].join(" "):typeof u.parentAttrs["class"]!="string"&&(u.parentAttrs["class"]=""),$.isNull(u.parentAttrs.isCellHeaderType)||(wu=u.parentAttrs.isCellHeaderType,delete u.parentAttrs.isCellHeaderType),u.editableState!=undefined||u.editableState!=null?p=typeof u.editableState=="boolean"?u.editableState:ecount.common.isTrue(u.editableState):u.attrs&&(u.attrs.disabled===!0||u.attrs.disabled==="disabled")&&(p=!1),pu=this.getClassName(n,u.parentAttrs["class"],u.style,a),r.modeView==this.constValue.dataType.modeInput&&(u.controlOption&&(l=$.extend(!0,l,u.controlOption)),u.hasFn&&(l.hasFn=u.hasFn),u.optionFn&&(l.optionFn=u.optionFn)),u.attrs&&u.attrs["data-toggle"]?(u.attrs.content&&(u.attrs.content=ecount.gridV2.util.escapeHTML(u.attrs.content).replace(/&lt;/g,"<").replace(/&gt;/g,">")),u.attrs["data-content"]&&(u.attrs["data-content"]=ecount.gridV2.util.escapeHTML(u.attrs["data-content"]).replace(/&lt;/g,"<").replace(/&gt;/g,">")),u.attrs["data-trigger"]=u.attrs["data-trigger"]||"hover",this.initCellPopover(n,t,i,u),this.removeCellPopoverProerties(u)):u.parentAttrs&&u.parentAttrs["data-toggle"]&&(u.parentAttrs.content&&(u.parentAttrs.content=ecount.gridV2.util.escapeHTML(u.parentAttrs.content).replace(/&lt;/g,"<").replace(/&gt;/g,">")),u.parentAttrs["data-content"]&&(u.parentAttrs["data-content"]=ecount.gridV2.util.escapeHTML(u.parentAttrs["data-content"]).replace(/&lt;/g,"<").replace(/&gt;/g,">")),u.parentAttrs["data-original-title"]&&(u.parentAttrs["data-original-title"]=ecount.gridV2.util.escapeHTML(u.parentAttrs["data-original-title"]).replace(/&lt;/g,"<").replace(/&gt;/g,">")),u.parentAttrs["data-trigger"]=u.parentAttrs["data-trigger"]||"hover",this.initCellPopover(n,t,i,{attrs:{"data-toggle":u.parentAttrs["data-toggle"],"data-trigger":u.parentAttrs["data-trigger"],"data-placement":u.parentAttrs["data-placement"],"data-html":u.parentAttrs["data-html"],"data-template":u.parentAttrs["data-template"],"data-multiPopover":u.parentAttrs["data-multiPopover"],"data-hoverTime":u.parentAttrs["data-hoverTime"],title:u.parentAttrs["data-original-title"]||u.parentAttrs.title,content:u.parentAttrs.content||u.parentAttrs["data-content"],targetSelector:u.parentAttrs.targetSelector}})),u.parentAttrs&&(u.parentAttrs["class"]&&(u.parentAttrs.className=u.parentAttrs["class"],delete u.parentAttrs["class"]),_.extend(f.attr,u.parentAttrs),f.attr.disabled===!1&&delete f.attr.disabled)):dr!=this.constValue.columnType.multi&&n==this.theadType&&e.columnOption&&e.columnOption.attrs&&(e.columnOption.attrs.content&&(e.columnOption.attrs.content=ecount.gridV2.util.escapeHTML(e.columnOption.attrs.content)),e.columnOption.attrs["data-content"]&&(e.columnOption.attrs["data-content"]=ecount.gridV2.util.escapeHTML(e.columnOption.attrs["data-content"])),_.extend(f.attr,e.columnOption.attrs),e.columnOption.attrs["data-toggle"]&&((e.columnOption.attrs["data-trigger"]==undefined||e.columnOption.attrs["data-trigger"]==null)&&(e.columnOption.attrs["data-trigger"]="hover"),e.columnOption.attrs.targetSelector=this.constValue.popoverSelectorInCell[h],this.initCellPopover(n,t,i,e.columnOption))),this.optDropdown.useDropdown&&this.optDropdown.dropdownList&&(ri=this.getDropdownmenuInfo(n,t,i),ri&&ri.dropdownmenuData&&ri.dropdownEvent&&(h="ecount.gridV2.widget.tempDropdownmenu",rr=ri.dropdownmenuData,dt=_.extend(dt,ri.dropdownEvent))),n!=this.theadType&&wu&&(f.tag="th"),a.type=="MERGE"&&a[this.constValue.rowVariableNames.mergeUseOwn]!=!0&&(a[this.constValue.rowVariableNames.rowTitle]!=undefined&&a[this.constValue.rowVariableNames.rowTitle]!=null&&(this.constValue.checkBoxPropertyNameRex.test(t)||this.constValue.rowMoveablePropertyNameRex.test(t)||this.constValue.rowNumberingPropertyNameRex.test(t))&&(h="widget.label"),s=a[this.constValue.rowVariableNames.rowTitle]||""),this.optForm.version==this.constValue.formVersion.fourth&&this.optCommon.columnType==this.constValue.columnType.single&&(ur=this.dataColumn.isDecimalDataType(ut,t),[this.constValue.sectionSeparateValue.tsubtot1,this.constValue.sectionSeparateValue.tsubtot2,this.constValue.sectionSeparateValue.tsubtot3,this.constValue.sectionSeparateValue.tsubtot4,this.constValue.sectionSeparateValue.tsubtot5,this.constValue.sectionSeparateValue.subtot1,this.constValue.sectionSeparateValue.subtot2,this.constValue.sectionSeparateValue.subtot3,this.constValue.sectionSeparateValue.subtot4,this.constValue.sectionSeparateValue.subtot5,this.constValue.sectionSeparateValue.tsubtot1slip,this.constValue.sectionSeparateValue.tsubtot2slip,this.constValue.sectionSeparateValue.tsubtot3slip,this.constValue.sectionSeparateValue.tsubtot4slip,this.constValue.sectionSeparateValue.tsubtot5slip,this.constValue.sectionSeparateValue.subtot1slip,this.constValue.sectionSeparateValue.subtot2slip,this.constValue.sectionSeparateValue.subtot3slip,this.constValue.sectionSeparateValue.subtot4slip,this.constValue.sectionSeparateValue.subtot5slip,].contains(e.GROUP_FLAG)?ur&&(ecount.common.isTrue(e.IsSubTotal)||(s="")):[this.constValue.sectionSeparateValue.pagetot,this.constValue.sectionSeparateValue.pagetotslip].contains(e.GROUP_FLAG)?ur&&(ecount.common.isTrue(e.footerOption.IsPageTotal)||(s="")):(this.constValue.sectionSeparateValue.line||this.constValue.sectionSeparateValue.slip)&&this.tfootType==ut&&ur&&(ecount.common.isTrue(e.footerOption.IsTotal)||(s=""))),/^widget.(date|multiDate)/g.test(h)&&this.setDateOption(n,u),this.optCommon.gridType==this.constValue.gridType.editable&&n==this.tfootType||this.constValue.subtotalRex.test(v[this.constValue.rowVariableNames.rowType])||this.constValue.subtotalRex2.test(v[this.constValue.rowVariableNames.rowType])||this.constValue.topsubtotalRex.test(v[this.constValue.rowVariableNames.rowType])||this.constValue.bottomsubtotalRex.test(v[this.constValue.rowVariableNames.rowType])||this.constValue.pagetotalRex.test(v[this.constValue.rowVariableNames.rowType])||v[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate||this.constValue.totalRex.test(v[this.constValue.rowVariableNames.rowType]))h=="widget.Label"?h="ecount.gridV2.widget.label":this.constValue.nativeControlInWidget[h]||(h="ecount.gridV2."+h),v[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate&&this.constValue.checkBoxPropertyNameRex.test(t)&&(f.className+=" bg-muted "),a.type=="MERGE"&&a[this.constValue.rowVariableNames.mergeUseOwn]!=!0&&(h="ecount.gridV2.widget.label"),t.indexOf(this.constValue.checkBoxPropertyName)>-1&&this.__setting.getCheckBoxDisplayMergeType()===this.constValue.displayCheckboxMegeType.mergeLine&&(h="ecount.gridV2.widget.label",this.dataCheckbox.setAvailablePageCount(n,this.constValue.checkBoxPropertyName,-1)),this.constValue.controlInGrid[h]||this.constValue.nativeControlInGrid[h]||this.constValue.nativeControlInWidget[h]||this.constValue.controlInWidget[h]||(h="ecount.gridV2.widget.defaultType"),nt=h;else{if(this.constValue.checkBoxPropertyName==t){pi=this.__setting.getCheckBoxDisplayMergeType();pi!=this.constValue.displayCheckboxMegeType.merge&&(lt=this.constValue.sectionSeparateValue.line,n==this.tbodyType?(tu=this.dataColumn.__datas.tbodyslip,fr=this.dataColumn.__datas.tbody,fr.startRow<=ct&&fr.endRow>=ct?lt=this.constValue.sectionSeparateValue.line:tu.startRow<=ct&&tu.endRow>=ct&&(lt=this.constValue.sectionSeparateValue.slip)):n==this.tfootType&&(iu=this.dataColumn.__datas.tfootSlip,ru=this.dataColumn.__datas.tfoot,ru.startRow<=ct&&ru.endRow>=ct?lt=this.constValue.sectionSeparateValue.line:iu.startRow<=ct&&iu.endRow>=ct&&(lt=this.constValue.sectionSeparateValue.slip)),pi==this.constValue.displayCheckboxMegeType.onlyLine&&lt!=this.constValue.sectionSeparateValue.line?(h="widget.label",this.dataCheckbox.setAvailablePageCount(n,t,-1)):pi==this.constValue.displayCheckboxMegeType.onlySlip&&lt!=this.constValue.sectionSeparateValue.slip?(h="widget.label",this.dataCheckbox.setAvailablePageCount(n,t,-1)):pi==this.constValue.displayCheckboxMegeType.mergeLine&&n!==this.theadType&&fr.startRow!==ct&&(h="widget.label",this.dataCheckbox.setAvailablePageCount(n,t,-1)));se=ecount.common.uuid(e.controlType);he=[n,t,i].join(ecount.constValue.gridDelimiter);uu=this.dataCheckbox.getcallbackObject(n,t);h="ecount.gridV2."+h;a.type=="MERGE"&&a[this.constValue.rowVariableNames.rowspanCount]&&this.dataCheckbox.setAvailablePageCount(n,t,(a[this.constValue.rowVariableNames.rowspanCount]-1)*-1);for(g in uu)if(ht=[g,n,t,h,"custom"].join(ecount.constValue.gridDelimiter),ti.custom[g]=ht,!this.__core.events.exist(ht))this.__core.events.on(ht,uu[g],null)}else t.indexOf(this.constValue.checkBoxPropertyName)>-1?this.__setting.getCheckBoxDisplayMergeType()===this.constValue.displayCheckboxMegeType.mergeLine&&(h="ecount.gridV2.widget.label",this.dataCheckbox.setAvailablePageCount(n,this.constValue.checkBoxPropertyName,-1)):this.constValue.rowMoveablePropertyName==t?h="ecount.gridV2."+h:this.constValue.rowNumberingPropertyName==t?(h="ecount.gridV2.widget.label",p=!0,delete f.className,this.optNumbering.headerStyle&&(_.merge(f.attr,this.optNumbering.headerStyle),n==this.theadType&&this.optNumbering.headerStyle.title!=null&&this.optNumbering.headerStyle.title!=undefined&&(s=this.optNumbering.headerStyle.title))):(!ir&&vi&&this.optCommon.gridStyle==this.constValue.gridStyle.tree&&e.isTree==!0?(ui=this.dataTree.serialize(),ui.eventDisable==!1&&ui.listParentToChild[i]&&ui.listParentToChild[i].length>0&&(ui.eventOnLabel=="cell"&&h=="widget.link"&&(f.className+="cursor-pointer "),h=ui.eventOnLabel||h!="widget.link"?"widget.label.arrow":"widget.link.arrow")):e.isTree&&this.optCommon.gridType==this.constValue.gridType.list?h="widget.label":a.type=="MERGE"&&a[this.constValue.rowVariableNames.mergeUseOwn]!=!0&&(h="widget.label"),r.modeView==this.constValue.dataType.modeInput?this.constValue.nativeControlInWidget[h]||this.constValue.controlInWidget[h]||(h="ecount.gridV2.widget.label"):(this.constValue.gridType.editable==this.optCommon.gridType&&(this.constValue.nativeControlInWidget[h]||this.constValue.controlInWidget[h]?p=n==this.theadType?typeof p=="boolean"?p:ecount.common.isTrue(e.columnOption.editableState):typeof p=="boolean"?p:ecount.common.isTrue(e.editableState):(h=="widget.label"||h=="widget.barcodeImageTag")&&(p=!1),p&&(f.className+=" noselection ")),[this.constValue.gridType.editable,this.constValue.gridType.list,this.constValue.gridType.editableForm,this.constValue.gridStyle.tree].contains(this.optCommon.gridType)&&this.constValue.convertControlNamespace[h]?h=h=="widget.faCheckLink"?"ecount.gridV2.widget.link.fa":h=="widget.faCheck"?"ecount.gridV2.widget.label.fa":h=="widget.faPlusLink"?"ecount.gridV2.widget.link.faPlus":h=="widget.faCheckWithLink"?"ecount.gridV2.widget.link.faLabel":"ecount.gridV2."+h:this.constValue.nativeControlInWidget[h]?h=="widget.code.serialCodeItemNative"?(h="widget.code.serialCodeItem",l.codeType=7):h=="widget.code.serialCodeItemNew"&&(l.codeType=7):this.constValue.controlInWidget[h]?(this.constValue.gridType.editable==this.optCommon.gridType&&([this.tbodyType,this.tfootType].contains(n)&&h!="widget.input.colLabel"&&(f.className+=" nowrap "),yt[i][t].editControlType=h),h=="widget.textarea"&&(s=s.replaceAll("\n","<br>"),nf=Math.max(s.split("<br>").length,2),this.dataRow.setTextareaRow(n,t,i,{groupRowIndex:r.groupRowIndex,height:ecount.gridV2.view.util.getTextareaHeight(nf)})),nt=h,h=h=="widget.input.colLabel"?"ecount.gridV2.widget.label.inputColLabel":"ecount.gridV2.widget.label"):h="ecount.gridV2.widget.defaultType"));nt=nt||h;this.constValue.gridType.editable!=this.optCommon.gridType||p||f.className.test(this.constValue.cellEditableRex)||e.isHideColumn==!0||["ecount.gridV2.widget.label","ecount.gridV2.widget.barcodeImageTag"].contains(nt)||(f.className+=" disabled")}/widget.link*/g.test(nt)&&(f.className=f.className.replace(this.constValue.noselectionRex,""));r.modeView!=this.constValue.dataType.modeInput&&typeof s=="string"&&/['"&<>\t]/.test(s)&&(s=ecount.gridV2.util.escapeHTML(s).replaceAll(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"));fi=nt||h;/^widget.code.*/g.test(nt)?fi="widget.code":/^widget.calc.*/g.test(nt)?fi="widget.calc":/^widget.select.*/.test(nt)&&(fi="widget.select");for(g in ecount.gridV2.widget.systemEventHandler[fi])if(ht=[g,n,t,nt||h,"system"].join(ecount.constValue.gridDelimiter),ti.system[g]=ht,!this.__core.events.exist(ht))this.__core.events.on(ht,ecount.gridV2.widget.systemEventHandler[fi][g],this.__core);for(g in dt)if(fu=!1,(g=="click"||g=="dblclick")&&(fu=this.constValue.noLinkType[h]||!1),!fu&&(ht=[g,n,t,nt||h,"custom"].join(ecount.constValue.gridDelimiter),ti.custom[g]=ht,!this.__core.events.exist(ht)))this.__core.events.on(ht,dt[g],null);if(n==this.tbodyType&&(tf=e.columnOption&&e.columnOption.controlType||e.controlType,this.dataCheckbox.getCheckboxUse(n,t)&&tf=="widget.checkbox"&&h!="ecount.gridV2.widget.checkbox"&&(this.dataCheckbox.setAvailablePageCount(n,t,pt.length*-1),this.renderMode=="initialize"))){if(e.columnOption&&e.columnOption.attrs&&e.columnOption.attrs.checked)for(eu=this.dataRow.getAll(this.theadType),tt=0;tt<eu.length;tt++)this.__core.fn.refreshCell(this.theadType,t,eu[tt][this.constValue.keyColumnPropertyName]);this.dataRow.setStructureInfo(n)}if(this.constValue.controlInGrid[h]){c=this.generator.get(h,b);o=c.end();switch(h){case"ecount.gridV2.widget.link.caret":this.dataSortable.enableList[e.realId]&&c.sortOrder(this.dataSortable.enableList[e.realId].sortOrder);o.value=s;break;case"ecount.gridV2.widget.link.multi":o.option.type=u.attrs&&u.attrs.type;u.attrs&&u.attrs["class"]&&o.className.push(u.attrs["class"]);o.attr.linkId=t;o.value=s;break;case"ecount.gridV2.widget.label":u["class"]=u["class"]||[];u.style=u.style||u.attrs&&u.attrs.style||{};this.optCommon.columnType==this.constValue.columnType.single?this.theadType==ut?!u.style["background-color"]&&e.columnOption.fontBgColor&&(u.style["background-color"]=(this.constValue.nativeColorname[e.columnOption.fontBgColor]?"":"#")+e.columnOption.fontBgColor+";"):this.tbodyType==ut?!u.style["background-color"]&&e.fontBgColor&&(u.style["background-color"]=(this.constValue.nativeColorname[e.fontBgColor]?"":"#")+e.fontBgColor+";"):this.tfootType==ut&&!u.style["background-color"]&&e.footerOption.fontBgColor&&(u.style["background-color"]=(this.constValue.nativeColorname[e.footerOption.fontBgColor]?"":"#")+e.footerOption.fontBgColor+";"):this.optCommon.columnType==this.constValue.columnType.multi&&!u.style["background-color"]&&e.fontBgColor&&(u.style["background-color"]=(this.constValue.nativeColorname[e.fontBgColor]?"":"#")+e.fontBgColor+";");u.labelBackgroundColor&&($.isString(u["class"])&&(u["class"]=new Array(u["class"])),u["class"].push("label"),u.labelBackgroundColor>"#dddddd"&&u["class"].push("label-light"),u.style["background-color"]=u.labelBackgroundColor);[this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(this.optForm.version)&&ecount.common.isTrue(e.LEFT_FIXD_STND_TF)&&(o.option.isFixed=!0);o.className=u["class"];o.style=u.style;this.optCommon.gridType==this.constValue.gridType.editable&&n!=this.theadType&&nt!=h&&this.constValue.controlInWidget[nt]&&o.className.push("grid-input-data");o.tagOption=u.tagOption;u.controlOption&&u.controlOption.isAsteriscusRange?(er=u.controlOption.remainLastLength||0,or=u.controlOption.asteriscusLength||0,o.value=ecount.gridV2.util.convertAsteriscus(s,or,er)):o.value=typeof s!="string"?"":s;o.value==""&&u.style["background-color"]&&(u.style["background-color"]="");(this.optForm.version==this.constValue.formVersion.third||this.optForm.version==this.constValue.formVersion.fourth)&&(o.option.addNbspWhenEmptyData=!0);break;case"ecount.gridV2.widget.link":u["class"]=u["class"]||[];u.style=u.style||{};u.labelBackgroundColor&&($.isString(u["class"])&&(u["class"]=new Array(u["class"])),u["class"].push("label"),u.labelBackgroundColor>"#dddddd"&&u["class"].push("label-light"),u.style["background-color"]=u.labelBackgroundColor);o.className=u["class"];o.style=u.style;o.tagOption=u.tagOption;o.width=e.width;u.controlOption&&u.controlOption.isAsteriscusRange?(er=u.controlOption.remainLastLength||0,or=u.controlOption.asteriscusLength||0,o.value=ecount.gridV2.util.convertAsteriscus(s,or,er)):o.value=s;break;case"ecount.gridV2.widget.link.email":ou=u.emailAddress;this.optLayout.useEmailType||(this.optLayout.useEmailType=!0);typeof s=="object"&&(u.emailAddress||(ou=s.emailAddress),s=s.name);o.emailAddress="mailto:"+ou;o.target=this.optCommon.ecGridId+"-emailTarget";o.value=s;break;case"ecount.gridV2.widget.link.downloadMenubox":if(typeof s=="object"){for($.isArray(s)||(s=[s]),su=[],sr=0,bt=s.length;sr<bt;sr++){var ei=s[sr].name,oi="",rf="",hr=-1;typeof ei=="string"&&(hr=ei.lastIndexOf("."),hr>-1?(oi=ei.substring(0,hr),rf=ei.substring(hr)):oi=ei);uf=oi.byte();uf>50&&(oi=oi.substring(50)+"...");su.push({id:ei,label:oi+rf})}s="["+s.length+"]"}o.value=s;rr=su;break;case"ecount.gridV2.widget.link.downloadFileAndSlip":typeof s=="object"&&(ff=s||{},ef=ff[this.optColumn[this.tbodyType].propertyColumnNormalize==="UPPER"?"text".toUpperCase():"text"]||"",e.fontColor&&e.isColorSettable&&(o.style.color=e.fontColor));o.value=ef;break;case"ecount.gridV2.widget.text.multi":o.option.type=u.attrs&&u.attrs.type;o.value=s;break;case"ecount.gridV2.widget.icon":it=u.iconType;u.position=="webmail"?(u["delay-delivery"]?it="mail-icon-delay-delivery":u.repeat?it="mail-icon-repeat":u.reply?it="mail-icon-reply":u["reply-all"]?it="mail-icon-reply-all":u.forward&&(it="mail-icon-forward"),o.typeClassName.push(it),o.typeClassName.push("text-info")):o.typeClassName.push("messenger-icon-"+it);o.isOnlySpan=u.isOnlySpan||!1;break;case"ecount.gridV2.widget.icon.multi":for(si=u.datas||[],bt=si.length,$.isArray(si)||(si=[si]),tt=0;tt<bt;tt++)et=si[tt],it=et.iconType,rt=[],wi=[],et.position=="webmail"?(et["delay-delivery"]?it="mail-icon-delay-delivery":et.repeat?it="mail-icon-repeat":et.reply?it="mail-icon-reply":et["reply-all"]?it="mail-icon-reply-all":et.forward&&(it="mail-icon-forward"),wi.push(it),wi.push("text-info")):wi.push("messenger-icon-"+it),et.attrs&&(rt=et.attrs["class"]||et.attrs.Class,typeof rt=="string"&&(rt=rt.split(" "))),o.push({attr:{childElementId:et.id},typeClassName:wi,isOnlySpan:et.isOnlySpan,className:rt});break;case"ecount.gridV2.widget.thumbnailLink":u&&u.attrs&&u.attrs.width&&(o.attr.width=u.attrs.width);u&&u.attrs&&u.attrs.height&&(o.attr.height=u.attrs.height);o.value=s;break;case"ecount.gridV2.widget.thumbnail":o.value=s;break;case"ecount.gridV2.widget.label.arrow":o.value=s;!ir&&vi&&this.optCommon.gridStyle==this.constValue.gridStyle.tree&&e.isTree&&o.arrowClassName.push(this.dataTree.isTreeExpand(n,i)?"open":"");this.optCommon.gridType==this.constValue.gridType.editable&&n!=this.theadType&&this.constValue.controlInWidget[e.controlType]&&o.className.push(" grid-input-data ");break;case"ecount.gridV2.widget.link.arrow":o.value=s;u.treeAttrs&&u.treeAttrs["class"]&&(typeof u.treeAttrs["class"]=="string"&&(u.treeAttrs["class"]=u.treeAttrs["class"].split(" ")),o.arrowClassName=u.treeAttrs["class"]);!ir&&vi&&this.optCommon.gridStyle==this.constValue.gridStyle.tree&&e.isTree&&o.arrowClassName.push(this.dataTree.isTreeExpand(n,i)?"open":"");break;case"ecount.gridV2.widget.link.faLabel":u.faCheckTooltip&&(at=u.faCheckTooltip,at.title=at["data-original-title"]||at.title,at["data-trigger"]=at["data-trigger"]||"hover",at.targetSelector=at.targetSelector||"span",at["data-toggle"]=at["data-toggle"]||"tooltip",hu={attrs:at},this.initCellPopover(n,t,i,hu),this.removeCellPopoverProerties(hu));var of=u.faPosition==="right",le=of===!0?"pull-right":"pull-left",ae=u.faCheckColorCss||"";o.faClassName.push(le,ae);o.faPosition=of;o.value=s;break;case"ecount.gridV2.widget.rowItemCheckbox":u.attrs&&["disabled","true",!0].contains(u.attrs.disabled)?(o[0].attr.disabled="disabled",p=!1):(this.dataCheckbox.getDisabledCheckbox(n,t,i)&&this.dataCheckbox.removeDisabledCheckbox(n,t,i),p=!0);w=!1;n==this.tbodyType&&(w=this.dataCheckbox.has(n,t,i));u.attrs&&u.attrs.checked&&(w=!0);n==this.theadType&&this.__initCheckedHeader==!0&&(w=this.dataCheckbox.has(n,t,i),w==!0&&(this.dataCheckbox.add(n,t,i,v),this.dataCheckbox.setCheckedPagingCount(n,t,!0),this.dataCheckbox.setCheckedTotalCount(n,t,1),this.__core.fn.setCell(n,t,i,k,{isRunChange:!1,isRunComplete:!1,isCheckedFromGrid:!0,callByType:"system"})));o[0].option.isOriginal=this.__setting.getCheckBoxOriginalStyle();this.renderMode==this.constValue.renderMode.initialize&&this.dataRow.__initCheckedKeys[i]==!0||w==!0?(w=!0,this.dataCheckbox.add(n,t,i,!0),cr=this.__setting.getCheckBoxCountingDeterminer(n,t,[n,t,i].join(ecount.constValue.gridDelimiter)),cu=cr?cr(v):!0,cr&&cu===!1||(cu&&(o[0].attr.disabled=="disabled"?(this.dataCheckbox.setDisabledList(n,t,i,!0),this.dataCheckbox.setDisabledCount(n,t,1),this.dataCheckbox.setAvailablePageCount(n,t,pt.length*-1)):((this.__core.drawCount==0||r.isSetCell)&&this.dataCheckbox.setCheckedTotalCount(n,t,1),this.dataCheckbox.isDisabledCheckbox(n,t,i)&&(this.dataCheckbox.removeDisabledCheckbox(n,t,i),this.dataCheckbox.setDisabledCount(n,t,-1),this.dataCheckbox.setAvailablePageCount(n,t,pt.length)))),this.dataCheckbox.setCheckedPagingCount(n,e.id,w))):o[0].attr.disabled=="disabled"&&(this.dataCheckbox.setDisabledList(n,t,i,!0),this.dataCheckbox.setAvailablePageCount(n,t,pt.length*-1),this.dataCheckbox.setDisabledCount(n,t,1));o[0].attr.checked=w?"checked":"";o[0].option.isOriginal||n!=this.constValue.sectionType.tbody||(r.isSetCell?(lu=this.__core.view.cell.getCellElement(n,t,i).cell,lu&&(o[0].value=lu.textContent)):(k=this.__setting.getCheckBoxCustomIndex(n,e.id)+1,o[0].value=k,this.__setting.setCheckBoxCustomIndex(n,e.id,k)));n!=this.tbodyType||this.dataCheckbox.isRemainMaxCount(n,t)&&this.dataCheckbox.isRemainPageMaxCount(n,t)||this.dataCheckbox.getAvailablePageCount(n,t)==0&&this.dataRow.getAll(n).length==this.dataCheckbox.getDisabledCount(n,t)||(this.__initCheckedHeader=!0);break;case"ecount.gridV2.widget.checkbox":this.__setting.getCheckBoxUse(n,t)||this.__setting.getCheckboxIgnore(n,t)||(this.__setting.setCheckBoxUse(t,!0),this.dataCheckbox.addCheckBoxColumn(n,t));n==this.theadType?o.label=e.title:(o.label=e.columnOption.label?e.columnOption.label:u.label?u.label:"",o.value=s);o.attr=n==this.theadType?e.columnOption.attrs||{}:u.attrs||{};w=!1;this.__core.drawCount>0&&!r.isSetCell?(s==!0||["y","true","checked"].contains(s.toString().toLowerCase())?w=!0:(s==!1||["n","false"].contains(s.toString().toLowerCase()))&&(w=!1),o.attr.checked&&(w=!0),n==this.tbodyType&&w==!1&&(w=this.dataCheckbox.has(n,t,i))):(n==this.tbodyType&&(w=this.dataCheckbox.has(n,t,i)),s==!0||["y","true","checked"].contains(s.toString().toLowerCase())?w=!0:(s==!1||["n","false"].contains(s.toString().toLowerCase()))&&(w=!1),o.attr.checked&&(w=!0));["disabled",!0].contains(o.attr.disabled)?(o.attr.disabled="disabled",this.dataCheckbox.isDisabledCheckbox(n,t,i)||(this.dataCheckbox.setDisabledList(n,t,i,!0),this.dataCheckbox.setDisabledCount(n,t,1),this.dataCheckbox.setAvailablePageCount(n,t,pt.length*-1)),p=!1):(this.dataCheckbox.isDisabledCheckbox(n,t,i)&&(this.dataCheckbox.removeDisabledCheckbox(n,t,i),this.dataCheckbox.setDisabledCount(n,t,-1),this.dataCheckbox.setAvailablePageCount(n,t,pt.length)),p=!0);w?(this.dataCheckbox.add(n,t,i,v),this.dataCheckbox.setCheckedTotalCount(n,t,1),this.dataCheckbox.setCheckedPagingCount(n,t,!0),this.renderMode!=this.constValue.renderMode.addRow&&this.__core.fn.setCell(n,t,i,!0,{isRunChange:!1,isRunComplete:!1,isCheckedFromGrid:!0,callByType:"system"})):v[e.propertyName]=!1;o.attr.checked=w?"checked":"";u.isSquare&&(o.isSquare=u.isSquare);break;case"ecount.gridV2.widget.checkbox.multi":o.value=n==this.theadType?e.columnOption&&e.columnOption.controlData:s;o.attr=n==this.theadType&&e.columnOption.attrs||u.attrs;f.attr.disabled&&delete f.attr.disabled;break;case"ecount.gridV2.widget.checkbox.number":o.attr=u.attrs||{};u.attrs&&["disabled",!0].contains(u.attrs.disabled)&&(o.attr.disabled="disabled");o.number=u.checkboxNumbering||0;o.value=s;break;case"ecount.gridV2.widget.rowItemMoveable":break;case"ecount.gridV2.widget.imageFileBox":o.option.isChecked=!!v[e.propertyName];o.option.imageCheckboxId="rounded"+v[ecount.grid.constValue.keyColumnPropertyName];o.option.buttonType=u.buttonType;o.option.slideData=u.label;o.option.isSlide=u.isSlide;o.value=s;o.label_info=v.LABEL_INFO;break;case"ecount.gridV2.widget.flow.slide":o.option.buttonType=u.buttonType;o.option.slideData=u.label;o.option.isSlide=u.isSlide;o.value=s;break;case"ecount.gridV2.widget.flow.slideGroup":case"ecount.gridV2.widget.flow.slideGroupDynamic":o.attr=u.attrs;o.option.labelOption=u.labelOption;o.value=s;break;case"ecount.gridV2.widget.flow.order":o.option.orderOption=u.order;o.option.orderLabel=u.label;break;case"ecount.gridV2.widget.flow.signalLamp":typeof s=="string"&&(s=[s]);$.isEmpty(u.lampCount)||(o.lampCount=parseInt(u.lampCount));o.optionData=u.optionData;o.value=s;break;case"ecount.gridV2.widget.radio.number":u.name&&(o.attr.name=u.name);u.disabled&&(o.attr.disabled="disabled");s==null||s==undefined||s==""||s!=u.value||o.attr.disabled||(o.attr.checked="checked");o.style=o.style||{};o.style.width="30px";o.style.margin="auto";o.value=u.checkboxNumbering!=undefined&&u.checkboxNumbering!=null?u.checkboxNumbering:s;break;case"ecount.gridV2.widget.radio":u&&(u.isSquare&&(o.isSquare=u.isSquare),u.containerAttrs&&(o.containerAttrs=u.containerAttrs),u.name&&(o.attr.name=u.name),u.value&&(o.attr.value=u.value),s==null||s==undefined||s==""||s!=u.value&&s!="checked"||o.attr.disabled||(o.attr.checked="checked"),u.attrs&&u.attrs.checked&&(o.attr.checked="checked"),u.disabled&&(o.attr.disabled="disabled"));!o.attr.name&&n==this.theadType&&e.columnOption.name&&(o.attr.name=e.columnOption.name);o.label=u.label||e.columnOption.label||"";o.value=s;break;case"ecount.gridV2.widget.userHelpMark":f.tag="th";o.value=s;break;case"ecount.gridV2.widget.button.time":o.value=s;s===!0?f.className+="danger ":f.removeClassName+="danger ";break;case"ecount.gridV2.widget.barcodeImageTag":s!=null&&s!=undefined&&s!=""&&(s=s.replace(/&quot;/g,ecount.gridV2.util.replaceEscape));o.value=s;break;case"ecount.gridV2.widget.label.inputColLabel":rt=e.className.split(" ");f.className+=" position-relative ";o.className=o.className.concat(e.className);o.className.push("form-control");case"ecount.gridV2.widget.label.colLabel":o.label=u.label||"";o.value=s;break;case"ecount.gridV2.widget.link.scheduleMore":o.className.push("ellipsis");u.scheduleMore&&o.className.push("link-schedule-more");o.dataCount=u.scheduleMoreCount;o.value=s;break;case"ecount.gridV2.widget.form.dropdownmenu":f.attr["data-service"]="layer.dropdown";u["class"]=u["class"]||[];u.style=u.style||u.attrs&&u.attrs.style||{};o.className=u["class"];o.style=u.style;o.value=typeof s!="string"?"":s;break;case"ecount.gridV2.widget.defaultType":u["class"]=u["class"]||[];u.style=u.style||{};this.optCommon.gridType==this.constValue.gridType.editable&&n!=this.theadType&&this.constValue.controlInWidget[e.controlType]&&u["class"].push(" grid-input-data ");o.className=u["class"];o.style=u.style;o.tagOption=u.tagOption;o.width=e.width;o.value=s;break;default:o.value=s}if(hi=_.get(u,"controlOption.nationalFlagOptions"),_.isEmpty(hi)||(o.option.nationalFlagOptions=ecount.control.prototype.getInitNationalFlagProp.call(null,hi)),ci=_.get(u,"controlOption.__prettyFilter"),_.isEmpty(ci)||(o.option.__prettyFilter=ci),ft.tag=f.tag,u.attrs){if(u.attrs["class"]||u.attrs.Class)if(rt=u.attrs["class"]||u.attrs.Class,typeof rt=="string"&&(rt=rt.split(" ")),h=="ecount.gridV2.widget.link.multi"&&typeof rt=="object"&&typeof rt.constructor!=Array)o.className.push(rt);else for(tt=0,bt=rt.length;tt<bt;tt++)(li=rt[tt],li!=undefined&&li!=null&&li!="")&&(o.className.contains(li)||o.className.push(li));u.attrs.disabled&&[!0,"disabled"].contains(u.attrs.disabled)&&($.isArray(o)&&o.length==1?o[0].attr.disabled=!0:o.attr.disabled=!0)}this.optShaded.use&&n!=this.theadType&&(h=="ecount.gridV2.widget.link"||h=="ecount.gridV2.widget.link.faLabel")&&(tr=this.dataShaded.getClassName(n,t,i,k),tr&&!o.className.contains(tr)&&o.className.push(tr))}else{if(this.optCommon.columnType==this.constValue.columnType.single?lr=this.dataRow.__datas[this.theadType].keys["0"][this.dataColumn.getById(this.theadType,t).propertyName]:this.optCommon.columnType==this.constValue.columnType.multi&&(sf=this.dataColumn.getIndexById(n,this.constValue.returnType.single,e.id),hf=this.dataColumn.getByIndex(this.theadType,sf),lr=this.dataRow.__datas[this.theadType].keys["0"][hf.propertyName]),ar=yt[i].dataIdx,cf=l.codeType||(/^widget.multiCode.*/g.test(h)?9:3),this.constValue.nativeControlInWidget[h]?n!=undefined&&n!=null&&n!=""&&t!=undefined&&t!=null&&t!=""&&i!=undefined&&i!=null&&i!=""?this.constValue.combineControlWidget[h]?(vr=h.split(".")[2],ot=[n,t,i,vr].join(ecount.constValue.gridDelimiter)):ot=[n,t,i].join(ecount.constValue.gridDelimiter):ot=ecount.common.uuid(h):ot=t,lf=h=="widget.radio.multi"?[n,e.propertyName,ar].join(ecount.constValue.gridDelimiter):n+ecount.constValue.gridDelimiter+e.propertyName,u&&u.controlOption&&u.controlOption.controlEvent&&(b.controlEvent=u.controlOption.controlEvent,b.controlEvent.itemClick&&(b.controlEvent.itemClick=this.getItemClickCallback(n,t,i,k,b.controlEvent.itemClick))),/^widget.(date|multiDate)/g.test(h)&&((u.controlOption&&u.controlOption.isMonthCalendar===!1||e.columnOption&&e.columnOption.isMonthCalendar===!1)&&(b._isMonthCalendar=!1),u.editableState==0&&(b._readOnly=!0),n==this.theadType?e.columnOption&&typeof e.columnOption.hasYearLimit=="boolean"&&(b.hasYearLimit=e.columnOption.hasYearLimit,/\d+/.test(e.columnOption._minYearLimit)&&(b._minYearLimit=e.columnOption._minYearLimit),/\d+/.test(e.columnOption._maxYearLimit)&&(b._maxYearLimit=e.columnOption._maxYearLimit)):u.controlOption&&typeof u.controlOption.hasYearLimit=="boolean"&&(b.hasYearLimit=u.controlOption.hasYearLimit,/\d+/.test(u.controlOption._minYearLimit)&&(b._minYearLimit=u.controlOption._minYearLimit),/\d+/.test(u.controlOption._maxYearLimit)&&(b._maxYearLimit=u.controlOption._maxYearLimit))),b.rowIdx=ar,u.controlOption&&u.controlOption.widgetOptions&&$.extend(b,u.controlOption.widgetOptions),c=oe.define(h,ot,lf,ar+ecount.constValue.gridDelimiter+lr).setOptions(b).setObserveHandler(this.setObserveHandlerList.bind(this)),hi=_.get(u,"controlOption.nationalFlagOptions"),_.isEmpty(hi)||c.setNationalFlag(hi),ci=_.get(u,"controlOption.__prettyFilter"),_.isEmpty(ci)||c.prettyFilter(ci),(h=="widget.input.number"||h=="widget.input.colLabel")&&(l.numberType=="decimal"?l&&$.isArray(l.decimalUnit)&&l.decimalUnit.length==2?c.numericOnly(l.decimalUnit[0],l.decimalUnit[1],null,!1,l.isPositiveInteger===!0):c.numericOnly(null,null,null,!1,l.isPositiveInteger===!0):l.numberType=="onlyNumber"?c.alignRight():c.numericOnly(null,null,null,!1,l.isPositiveInteger===!0),c.setNumericOnlySeparator(l.thousandSeparator||e.thousandSeparator||ecount.config.company.THOU_SEPARATOR,l.decimalSeparator||e.decimalSeparator||ecount.config.company.DEC_SEPARATOR)),/^(widget.input.*|widget.(code|multiCode).*)/g.test(h)&&(l.maxLength!=undefined&&(l.maxLengthOnFilter?c.filter("maxlength",l.maxLength):c.maxLength(l.maxLength)),l.maxByte!=undefined&&c.filter("maxbyte",l.maxByte),l.numberOnlyAndSign!=undefined&&c.filter("numberOnlyAndSign",l.numberOnlyAndSign),l.hasFn===!0&&(l.optionFn&&$.isArray(l.optionFn)&&c.hasFn(l.optionFn).singleCell(),c._allowToggleLayer=l.editModeOn===!0?!0:!1),l.noReplacement===!0&&c.noReplacement(),l.filter&&c.filter.apply(c,l.filter),l.isFromFavoriteCode===!0&&c.setOptions({isFromFavoriteCode:!0}),l.widg_dv_cd!=undefined&&c.setOptions({widg_dv_cd:l.widg_dv_cd}),l.prgId!=undefined&&c.setOptions({prgId:l.prgId}),l.placeHolder&&typeof l.placeHolder=="string"&&c.setPlaceHolder(l.placeHolder)),/^widget.(code|multiCode).*/g.test(h)&&(c.codeType(cf).setOptions({popupLevel:1,popupID:this.optCommon.popupID,parentPageID:this.optCommon.parentEcPageId,ecPageID:this.optCommon.ecPageId,tabID:this.optCommon.ecTabId,gridID:this.optLayout.containerSelector,rowKey:i,rowIdx:parseInt(v[this.constValue.rowCountColumnPropertyName],10)-1,preventOpenPopupByEnter:!1,alreadyIncludedLayout:!0,eventContainer:this.optLayout.$layer}),this.optCommon.widgetInitializer&&this.optCommon.widgetInitializer(c)),h=="widget.textarea"&&(c.rowSize(10),au=u&&u.columnOption&&u.columnOption.maxByte,au!=undefined&&c.filter("maxbyte",au)),h=="widget.button.sideLabel")vt=u&&u.columnOption&&u.columnOption.controlData,bi={},vt&&(vt.label&&c.label(vt.label),u.attrs&&u.attrs.class&&c.css(u.attrs.class),$.isNull(vt.leftText)||(bi.leftText=vt.leftText),$.isNull(vt.rightText)||(bi.rightText=vt.rightText),$.isNull(vt.leftText)&&$.isNull(vt.rightText)&&s&&(bi.leftText=s),c.setOptions(bi));else if(/^widget.calc.*/.test(h)){var l=u.controlOption,af=u.data,vf=u.dataGubun;numberCalcIds=u.numberCalcIds;l&&(c.setCalcList(l.codes,l.logics,l.comparisons,l.calcs,l.bracketFunction,l.bracket,l.joinString,l.inCodes,l.comma,l.commaBracketFunction,l.sumIf),$.isNull(l.isCalc)||c.setOptions({_isCalc:l.isCalc}),$.isNull(l.isRequired)||c.setOptions({_isRequired:l.isRequired}),$.isNull(l.isJoinString)||c.setOptions({_isJoinString:l.isJoinString}),$.isNull(l.maxBytes)||c.setOptions({_maxBytes:l.maxBytes}),$.isNull(l.joinMaxLength)||c.setOptions({joinMaxLength:l.joinMaxLength}),$.isNull(l.requiredItem)||c.setOptions({requiredItem:l.requiredItem}),$.isNull(l.notCheckRequiredItem)||c.setOptions({notCheckRequiredItem:l.notCheckRequiredItem}),$.isNull(l.requiredType)||c.setOptions({requiredType:l.requiredType}),$.isNull(l.outCheckError)||typeof l.outCheckError!="function"||c.setOptions({onOutCheckError:l.outCheckError}),$.isNull(l.strCalcCallBack)||typeof l.strCalcCallBack!="function"||c.setOptions({strCalcCallBack:l.strCalcCallBack}),$.isNull(l.sumIfCallBack)||typeof l.sumIfCallBack!="function"||c.setOptions({sumIfCallBack:l.sumIfCallBack}),$.isNull(l.labelClickCallBack)||typeof l.labelClickCallBack!="function"||c.setOptions({labelClickCallBack:l.labelClickCallBack}),$.isNull(l.customizeKeyDownValidate)||typeof l.customizeKeyDownValidate!="function"||c.setOptions({customizeKeyDownValidate:l.customizeKeyDownValidate}),$.isNull(l.customizeValue)||typeof l.customizeValue!="function"||c.setOptions({customizeValue:l.customizeValue}),$.isNull(l.fieldGubun)||c.setOptions({fieldGubun:l.fieldGubun}),$.isNull(l.cutInSetSelectableItem)||c.setOptions({cutInSetSelectableItem:l.cutInSetSelectableItem}));af&&vf&&c.setCalcData(af,vf);numberCalcIds&&c.setNumberCalcIds(numberCalcIds)}else h=="widget.button.toggling"&&c.setOptions(u.controlOption);if(this.optWidget.commonEventDelegator&&c.delegator(this.optWidget.commonEventDelegator),s!=undefined)if(/^widget.multiCode.*/g.test(h))s.constructor!=Array&&(s=[s]),c.addCode(s);else if(/^widget.code.*/.test(h))c.addCode({label:s,value:s});else if(/^widget.select.*/.test(h)){if(u.optionData?(c.option(u.optionData),$.isEmpty(s)||c.select(s)):n==this.theadType&&e.columnOption&&e.columnOption.controlData&&e.columnOption.controlData.option?c.option(e.columnOption.controlData.option):/exchangeType*|ioType*/.test(h)&&($.isEmpty(s)||c.select(s)),u.controlOption&&(u.controlOption.defaultOptions&&c.defaultOptions(u.controlOption.defaultOptions),u.controlOption.initOptions&&c.setDefault(u.controlOption.initOptions),u.controlOption.changeStateFuncName&&c.setChangeStateFuncName(u.controlOption.changeStateFuncName),u.controlOption.STR_YEAR_TYPE_CD&&c.setOptions({STR_YEAR_TYPE_CD:u.controlOption.STR_YEAR_TYPE_CD}),u.controlOption.STR_MM_TYPE_CD&&c.setOptions({STR_MM_TYPE_CD:u.controlOption.STR_MM_TYPE_CD}),u.controlOption.END_YEAR_TYPE_CD&&c.setOptions({END_YEAR_TYPE_CD:u.controlOption.END_YEAR_TYPE_CD}),u.controlOption.END_MM_TYPE_CD&&c.setOptions({END_MM_TYPE_CD:u.controlOption.END_MM_TYPE_CD}),u.controlOption.STR_DD&&c.setOptions({STR_DD:u.controlOption.STR_DD}),u.controlOption.END_DD&&c.setOptions({END_DD:u.controlOption.END_DD}),u.controlOption&&u.controlOption.addItems&&u.controlOption.addItems.length>0))for(tt=0,bt=u.controlOption.addItems.length;tt<bt;tt++)c.addItem(u.controlOption.addItems[tt])}else if(/^widget.(date|multiDate)/g.test(h))h=="widget.date"&&s.replace(ecount.delimiter,"")!=""?u.controlOption.isOnlyThisYear&&s.split(ecount.delimiter)[0].length==4?(yf=new Date,pf=yf.getFullYear(),c.select(pf+s.split(ecount.delimiter)[0])):c.select(s.split(ecount.delimiter)[0]):h=="widget.multiDate"&&s&&(s.from||s.to)&&c.select(s.from,s.to),c.setOptions({executeParentChangeDelegator:function(n,t){(t=t||{},g="change",n.data)&&(h=="widget.date"?(n.value=n.data[0],this.__core.fn.emitEvent(n,t,g)):h=="widget.multiDate"&&(n.value={from:n.data[0],to:n.data[1]},this.__core.fn.emitEvent(n,t,g)))}.bind(this)}),u.controlOption&&(u.controlOption.hideDateControl&&c.hideDateControl(u.controlOption.hideDateControl),u.controlOption.isHideDateOptionChecked&&c.isHideDateOptionChecked(u.controlOption.isHideDateOptionChecked),u.controlOption.isOnlyThisYear&&c.thisYearOnly(),u.controlOption.hideDateButton&&c.hideDateButton(),u.controlOption.useDateSpace&&c.useDateSpace(),u.controlOption.useSlipDate===!1&&c.useSlipDate(u.controlOption.useSlipDate),u.controlOption.hideDateIndividual&&c.hideDateIndividual(),u.controlOption.optionFn&&c.hasFn(u.controlOption.optionFn),u.controlOption.fnDynamicView===!1&&c.fnDynamicView(u.controlOption.fnDynamicView));else if(h=="widget.radio.multi"){var wf=typeof u.label=="string"?[u.label]:u.label,ki=typeof u.value=="string"?[u.value]:u.value,bf=u.disabled||u.attrs&&u.attrs.disabled;wf&&c.label(wf);ki&&c.value(ki);bf&&c.readOnly(!0,bf);s!=null&&s!=undefined&&s!=""&&c.select(s).end()}else if(this.constValue.combineControlWidget[h]==!0){if(h=="widget.combine.setNotificationCondition"?f.className=f.className.replace(this.constValue.alignRex,""):h=="widget.combine.addupBalance"&&(ki=typeof u.value=="string"?[u.value]:u.value,ki&&c.value(ki)),u.controlOption&&u.controlOption.maxLength!=undefined&&(u.controlOption.maxLengthOnFilter?c.filter("maxlength",u.controlOption.maxLength):c.maxLength(u.controlOption.maxLength)),u.controlOption&&u.controlOption.filter&&c.filter.apply(c,u.controlOption.filter),typeof s=="string"&&(s=s.split(",")),s&&s.length>0&&c.fixedSelect(s),u.controlOption&&u.controlOption.customOptions&&c.setOptions({customOptions:u.controlOption.customOptions}),h=="widget.combine.fileGroup"){var kf=(u.controlOption?u.controlOption.groups:l.groups)||[],ve=u.controlOption?u.controlOption.baseControlType:l.baseControlType,df=u.controlOption?u.controlOption.HID:l.HID,ye=u.controlOption?u.controlOption.limitTotalCount:l.limitTotalCount,pe=u.controlOption?u.controlOption.limitTotalCountCallback:l.limitTotalCountCallback,y;for(c.setOptions({HID:df?df:null,baseControlType:ve,limitTotalCount:ye,limitTotalCountCallback:pe}),yr=0;yr<kf.length;yr++)y=kf[yr],c.setGroups({id:y.id,name:y.name}),y.callback&&c.setCallbackFunction(y.callback),y.files&&c.setGroupFiles([y.id,y.files]),y.maxCount&&c.setMaxCount([y.id,y.maxCount]),y.myStorageConfig&&c.setMystorageConfig(y.id,y.myStorageConfig.gwPermission,y.myStorageConfig.isViewMode),y.uploaderConfig&&c.setUploaderConfig(y.id,y.uploaderConfig),y.newFileStorageConfig&&c.setNewFileStorageConfig(y.id,y.newFileStorageConfig),y.massStorageConfig&&c.setMassStorageConfig(y.id,y.massStorageConfig),y.referenceConfig&&c.setReferenceConfig(y.id,y.referenceConfig.referenceType,y.referenceConfig.getParamCallback)}}else h=="widget.button"?(pr="btn btn-default btn-sm",u.attrs&&u.attrs["class"]&&(pr=pr+" "+u.attrs["class"]),c.css(pr),c.label(s)):h=="widget.combine.exchangeType"?c.setOptions({isGrid:!0}):c.value(k);(h=="widget.combine.setNotificationCondition"||h=="widget.combine.setNotificationForm"||h=="widget.combine.earningCode")&&c.exchangeSubTitle(lr);this.constValue.gridType.editable!=this.optCommon.gridType||p||c.readOnly();gr.addControl(c)}if(yt[i][t].editableState=p,f.className=this.removeDuplicationClassName(f.className,pu),gt=(v[this.constValue.rowVariableNames.rowType]||"").toLowerCase(),kt=(a&&a[this.constValue.rowVariableNames.rowType]||"").toLowerCase(),kt&&(this.constValue.subtotalRex.test(kt)||this.constValue.subtotalRex.test(gt)||this.constValue.subtotalRex2.test(kt)||this.constValue.subtotalRex2.test(gt)||this.constValue.topsubtotalRex.test(kt)||this.constValue.topsubtotalRex.test(gt)||this.constValue.bottomsubtotalRex.test(kt)||this.constValue.bottomsubtotalRex.test(gt)||this.constValue.pagetotalRex.test(kt)||this.constValue.pagetotalRex.test(gt)||this.constValue.totalRex.test(kt)||this.constValue.totalRex.test(gt))&&(a[this.constValue.rowVariableNames.styleUseOwn]!=!0&&(di=a[this.constValue.rowVariableNames.isCenterAlign]&&a[this.constValue.rowVariableNames.isCenterAlign].toString(),f.className=f.className.replace(this.constValue.alignRex,""),f.className+=di=="true"?" text-center ":di=="left"?" text-left ":di=="right"?" text-right ":" text-center",a[this.constValue.rowVariableNames.vAlignType]&&(wr=a[this.constValue.rowVariableNames.vAlignType].toString(),f.className=f.className.replace(this.constValue.valignRex,""),wr=="top"?f.className+=" valign-top ":wr=="middle"?f.className+=" valign-middle ":wr=="bottom"&&(f.className+=" valign-bottom "))),vu=!0,this.optForm.version==this.constValue.formVersion.fourth&&(vu=ecount.common.isTrue(a[this.constValue.rowVariableNames.isAutoMerge])),vu&&v[this.constValue.rowVariableNames.rowType]&&(this.constValue.subtotalRex.test(v[this.constValue.rowVariableNames.rowType].toLowerCase())||this.constValue.subtotalRex2.test(v[this.constValue.rowVariableNames.rowType].toLowerCase())||this.constValue.topsubtotalRex.test(v[this.constValue.rowVariableNames.rowType].toLowerCase())||this.constValue.bottomsubtotalRex.test(v[this.constValue.rowVariableNames.rowType].toLowerCase())||this.constValue.pagetotalRex.test(v[this.constValue.rowVariableNames.rowType].toLowerCase())||this.constValue.rowType.separate==v[this.constValue.rowVariableNames.rowType].toLowerCase()||this.constValue.totalRex.test(v[this.constValue.rowVariableNames.rowType].toLowerCase()))?(ai=a[this.constValue.rowVariableNames.isCenterAlign]&&a[this.constValue.rowVariableNames.isCenterAlign].toString(),ai&&(f.className=f.className.replace(this.constValue.alignRex,""),ai=="true"?f.className+=" text-center ":ai=="left"?f.className+=" text-left ":ai=="right"?f.className+=" text-right ":ai=="center"&&(f.className+=" text-center ")),!$.isEmpty(this.optFoot.styleFontBold)&&ecount.common.isTrue(this.optFoot.styleFontBold)?(f.className=f.className.replace(this.constValue.boldRex,""),f.className+=" text-bold "):f.className=f.className.replace(this.constValue.boldRex,""),!$.isEmpty(this.optFoot.styleFontItalic)&&ecount.common.isTrue(this.optFoot.styleFontItalic)?(f.className=f.className.replace(this.constValue.italicRex,""),f.className+=" text-italic "):f.className=f.className.replace(this.constValue.italicRex,""),!$.isEmpty(this.optFoot.styleFontStrike)&&ecount.common.isTrue(this.optFoot.styleFontStrike)&&!$.isEmpty(this.optFoot.styleFontUnderline)&&ecount.common.isTrue(this.optFoot.styleFontUnderline)?(f.className=f.className.replace(this.constValue.strikeUnderlineRex,""),f.className+=" grid-text-uline-through "):(f.className=f.className.replace(this.constValue.strikeUnderlineRex,""),!$.isEmpty(this.optFoot.styleFontStrike)&&ecount.common.isTrue(this.optFoot.styleFontStrike)?(f.className=f.className.replace(this.constValue.strikeRex,""),f.className+=" text-line-through "):f.className=f.className.replace(this.constValue.strikeRex,""),!$.isEmpty(this.optFoot.styleFontUnderline)&&ecount.common.isTrue(this.optFoot.styleFontUnderline)?(f.className=f.className.replace(this.constValue.underlineRex,""),f.className+=" text-uline "):f.className=f.className.replace(this.constValue.underlineRex,"")),!$.isEmpty(this.optFoot.styleFontSize)&&this.optFoot.styleFontSize>0?(f.className=f.className.replace(this.constValue.fontSizeRex,""),f.className+=" font-"+this.optFoot.styleFontSize+"px "):f.className=f.className.replace(this.constValue.fontSizeRex,""),$.isEmpty(this.optFoot.styleFont)?f.className=f.className.replace(this.constValue.fontRex,""):(f.className=f.className.replace(this.constValue.fontRex,""),f.className+=" font-"+ecount.convertor.convertFontClassName(this.optFoot.styleFont)),$.isEmpty(this.optFoot.styleFontColor)||this.optFoot.styleFontColor==="000000"?$.isEmpty(a[this.constValue.rowVariableNames.fontColor])||_.trim(a[this.constValue.rowVariableNames.fontColor])==="000000"?delete f.style.color:f.style.color="#"+a[this.constValue.rowVariableNames.fontColor]+";":f.style.color="#"+this.optFoot.styleFontColor+";"):[this.constValue.formVersion.second,this.constValue.formVersion.third].contains(this.optForm.version)&&/special-row-\d+/.test(i)&&(di=a[this.constValue.rowVariableNames.isCenterAlign]&&a[this.constValue.rowVariableNames.isCenterAlign].toString(),this.optFoot.styleFontAlign&&(f.className=f.className.replace(this.constValue.alignRex,""),f.className+=" text-"+this.optFoot.styleFontAlign),this.optFoot.styleFontVAlign&&(f.className=f.className.replace(this.constValue.valignRex,""),f.className+=" valign-"+this.optFoot.styleFontVAlign),!$.isEmpty(this.optFoot.styleFontBold)&&ecount.common.isTrue(this.optFoot.styleFontBold)?(f.className=f.className.replace(this.constValue.boldRex,""),f.className+=" text-bold "):f.className=f.className.replace(this.constValue.boldRex,""),!$.isEmpty(this.optFoot.styleFontItalic)&&ecount.common.isTrue(this.optFoot.styleFontItalic)?(f.className=f.className.replace(this.constValue.italicRex,""),f.className+=" text-italic "):f.className=f.className.replace(this.constValue.italicRex,""),!$.isEmpty(this.optFoot.styleFontStrike)&&ecount.common.isTrue(this.optFoot.styleFontStrike)&&!$.isEmpty(this.optFoot.styleFontUnderline)&&ecount.common.isTrue(this.optFoot.styleFontUnderline)?(f.className=f.className.replace(this.constValue.strikeUnderlineRex,""),f.className+=" grid-text-uline-through "):(f.className=f.className.replace(this.constValue.strikeUnderlineRex,""),!$.isEmpty(this.optFoot.styleFontStrike)&&ecount.common.isTrue(this.optFoot.styleFontStrike)?(f.className=f.className.replace(this.constValue.strikeRex,""),f.className+=" text-line-through "):f.className=f.className.replace(this.constValue.strikeRex,""),!$.isEmpty(this.optFoot.styleFontUnderline)&&ecount.common.isTrue(this.optFoot.styleFontUnderline)?(f.className=f.className.replace(this.constValue.underlineRex,""),f.className+=" text-uline "):f.className=f.className.replace(this.constValue.underlineRex,"")),!$.isEmpty(this.optFoot.styleFontSize)&&this.optFoot.styleFontSize>0?(f.className=f.className.replace(this.constValue.fontSizeRex,""),f.className+=" font-"+this.optFoot.styleFontSize+"px "):f.className=f.className.replace(this.constValue.fontSizeRex,""),$.isEmpty(this.optFoot.styleFont)?f.className=f.className.replace(this.constValue.fontRex,""):(f.className=f.className.replace(this.constValue.fontRex,""),f.className+=" font-"+ecount.convertor.convertFontClassName(this.optFoot.styleFont)),$.isEmpty(this.optFoot.styleFontColor)||this.optFoot.styleFontColor==="000000"?delete f.style.color:f.style.color="#"+this.optFoot.styleFontColor+";")),this.optFormOption.borderRemoveHorizontal&&([this.constValue.subtotalRowType,this.constValue.totalRowType].contains(nr)||ut==this.tfootType?(ct==0&&(f.className.test(this.constValue.borderTRex)||(f.className+=" border-t ")),f.className.test(this.constValue.borderBRex)||(f.className+=" border-b ")):this.optForm.version==this.constValue.formVersion.fourth&&(this.constValue.topsubtotalRex.test(this.constValue.sectionSeparateText[e.GROUP_FLAG||"1"])||this.constValue.bottomsubtotalRex.test(this.constValue.sectionSeparateText[e.GROUP_FLAG||"1"]))&&(f.className+=" border-t border-b ")),this.optFormOption.borderRemoveVertical&&(r.tempSectionType==this.tfootType||nr&&(nr==="total"||nr==="subtotal")?f.className+=" border-l border-r ":this.optForm.version==this.constValue.formVersion.fourth?this.constValue.topsubtotalRex.test(this.constValue.sectionSeparateText[e.GROUP_FLAG||"1"])||this.constValue.bottomsubtotalRex.test(this.constValue.sectionSeparateText[e.GROUP_FLAG||"1"])?f.className+=" border-l border-r ":st==0?f.className+=" border-l":gi==st&&(f.className+=" border-r"):st==0?f.className+=" border-l":gi==st&&(f.className+=" border-r")),(h=="ecount.gridV2.widget.label"||h==undefined||h==null||h=="ecount.gridV2.widget.defaultType")&&s==""&&(f.className=f.className&&f.className.replace(/(grid-text-uline-through|text-uline|text-line-through)/g,"")),f.className=f.className?f.className.split(" "):[],f.removeClassName=f.removeClassName?f.removeClassName.split(" "):[],ecount.common.isTrue(e.isHideColumn)&&(f.className.contains("hide")||f.className.push("hide")),this.renderMode!=this.constValue.renderMode.initialize&&(n!=undefined&&n!=null&&n!=""&&t!=undefined&&t!=null&&t!=""&&i!=undefined&&i!=null&&i!=""?this.constValue.combineControlWidget[h]?(vr=h.split(".")[2],ot=[n,t,i,vr].join(ecount.constValue.gridDelimiter)):ot=[n,t,i].join(ecount.constValue.gridDelimiter):ot=ecount.common.uuid(h),this._widgetInstances[ot]&&(this._widgetInstances[ot].destroy(),delete this._widgetInstances[ot])),r.modeView==this.constValue.dataType.modeView&&this.constValue.nativeControlInWidget[h]||r.modeView==this.constValue.dataType.modeInput){if(d=this.generator.get(h,c.end()),this.constValue.slienceChangeEventControl[h]&&(d.__silence_change_event=!0),l&&l.numberType=="onlyNumber"?d.setImeModeKeydownHandler(0,!1,"N",!0):l&&l.numberType=="englishNumber"?d.setImeModeKeydownHandler(0,!1,"EN",!0):l&&l.numberType=="addressNumber"&&d.setImeModeKeydownHandler(0,!1,"ADR",!0),yt[i][t].editControlId=d.id,yt[i][t].editControlType=h,this.__events._triggerEvent(ecount.grid.event.list.createWidgetInstance,null,{id:d.id,instance:d}),r.modeView==this.constValue.dataType.modeInput)return/widget.code.*/.test(h)&&(d._allowOpenPopupOnSingleData=!1),d.render(r.$el),d;if(r.modeView==this.constValue.dataType.modeView)return d.render(),/^widget.select.*/.test(h)?(gf=d.getSelectedItem(),ne=d.getSelectOptions(),v[e.propertyName]=ne.length>0?gf.value:""):h=="widget.date"?(ni=d.getDateFormat(),v[e.propertyName]=ni.length>0?ni[0]:""):h=="widget.multiDate"&&(ni=d.getDateFormat(),ni.length>0?(v[e.propertyName].from=ni[0],v[e.propertyName].to=ni[1]):(v[e.propertyName].from="",v[e.propertyName].to="")),ft.tag=f.tag,ft.attr=f.attr,ft.className=f.className,ft.removeClassName=f.removeClassName,ft.style=f.style,ft.cell.data=d.getComposedDomString(),this.constValue.nativeControlInWidget[h]&&(this._widgetInstances[ot]=d,this._unmappedWidgetInstancesId.push(ot)),{eventKeyByEventType:ti,controlType:h,editControlType:nt||h,editableState:p,cellData:ft}}else return ft.tag=f.tag,ft.attr=f.attr,ft.className=f.className,ft.removeClassName=f.removeClassName,ft.style=f.style,c&&ft.controls.push(c),{eventKeyByEventType:ti,disabled:f.attr&&["disabled",!0,"true"].contains(f.attr.disabled)?"disabled":null,controlType:h,editControlType:nt||h,dropdownmenuData:rr,editableState:p,cellData:gr.serialize()}},makeViewDataRenderingTableMap:function(n,t,i){var nt,u,rt,ot,d,ct,ut,lt,r;i=i||{};var a=i.rowCurrentRowIndex||0,at=this.dataColumn._systemColumnCount,ft=this.theadType;this.dataRow.setStructureInfo(n);var o=this.dataRow.getViewDataRenderingTableMapAll(n),f=this.dataColumn.getAll(i.tempSectionType,this.constValue.returnType.multi),et,g=this.dataColumn.getAll(i.tempSectionType),vt=this.dataColumn._systemColumnCount,s=0;(this.optForm.version==this.constValue.formVersion.third||this.optForm.version==this.constValue.formVersion.fourth)&&this.optCommon.columnType==this.constValue.columnType.multi&&i.tempSectionType==this.tfootType&&(nt=this.dataRow.getSectionRowIndex(n),et=this.dataColumn.getAll(n,this.constValue.returnType.multi),s=(nt.endRowCount-nt.startRowIndex)*et.length);i.tempSectionType==this.tfootType&&g.length==0&&(g=this.optColumn[this.tbodyType].columns);var yt=function(t,i){var o=i?0:at,r,e,u;if(n!=ft&&t>=f[0].length)for(r=t;r>0;)r=r-f[0].length,r>=0&&(t+=o,r+=o);for(e=0,u=0;u<f.length;u++){if(f[u].length+e>t)break;e+=f[u].length}return n!=ft&&t>=g.length+vt&&(e=0),{startRowIdx:u,startColumnIdx:t-e}},tt={},h=f.length,wt=f[0]?f[0].length:1,it=[];if(!t){for(u=a,rt=a+f.length;u<rt;u++)o[u]||(o[u]=[]);return tt}for(r=0,ot=t.length;r<ot;r++){var pt=parseInt(t[r][this.constValue.rowVariableNames.mergeStartIndex],10),v=parseInt(t[r][this.constValue.rowVariableNames.colspanCount]||1,10),c=parseInt(t[r][this.constValue.rowVariableNames.rowspanCount]||1,10),bt=v-1,kt=c-1,st=yt(pt,t[r][this.constValue.rowVariableNames.isSystemColumn]),w=st.startRowIdx,l=st.startColumnIdx,u=a+w,rt=a+w+c,e,ht;for(t[r][this.constValue.rowVariableNames.rowType]&&(tt[w]=t[r]);u<rt;u++)for(e=l,ht=e+v,o[u]||(o[u]=[]);e<ht;e++){var b,y=this.dataRow.getByIndex(n,i.rowIndex)[this.constValue.keyColumnPropertyName],k=f[(u-s)%h][e]&&f[(u-s)%h][e].id,p=this.constValue.sectionSeparateValue.LINE;if(f[(u-s)%h][e]&&f[(u-s)%h][e].GROUP_FLAG&&(p=f[(u-s)%h][e].GROUP_FLAG),this.renderMode==this.constValue.renderMode.initialize&&o[u][e]){it.push(r);continue}if(d=t[r][this.constValue.rowVariableNames.colspanCount]||0,ct=t[r][this.constValue.rowVariableNames.rowspanCount]||0,d==0&&ct>0&&(d=1),u==a+w&&e==l&&d>0){if(b=u,t[r][this.constValue.rowVariableNames.styleUseOwn===!1]&&t[r][this.constValue.rowVariableNames.isCenterAlign]!=undefined&&t[r][this.constValue.rowVariableNames.isCenterAlign]!=null)if($.isEmpty(t[r][this.constValue.rowVariableNames.isCenterAlign]))t[r][this.constValue.rowVariableNames.alignType]="center";else switch(t[r][this.constValue.rowVariableNames.isCenterAlign].toString()){case"true":t[r][this.constValue.rowVariableNames.alignType]="center";break;case"false":t[r][this.constValue.rowVariableNames.alignType]="left";break;default:t[r][this.constValue.rowVariableNames.alignType]=t[r][this.constValue.rowVariableNames.isCenterAlign].toString()}t[r].type="MERGE";t[r].dataIdx=i.rowIndex;t[r].tableIdx=i.tableIndex;t[r].trIdx=u;t[r].columnIdx=l;t[r].rowId=y;t[r].columnId=k;t[r].columnSectionType=i.tempSectionType;t[r].detailSectionType=p;o[u][e]=t[r];t[r][this.constValue.rowVariableNames.mergeUseOwn]!=!0&&(ut=this.dataRow.getById(n,y),lt=f[(u-s)%h][e]&&f[(u-s)%h][e].propertyName,ut&&(ut[lt]=t[r][this.constValue.rowVariableNames.rowTitle]||""))}else c>1&&v>1?o[u][e]={type:c>f.length?"OTHER_ROW_ROWSPAN_AND_COLSPAN":"ROWSPAN_AND_COLSPAN",dataIdx:i.rowIndex,tableIdx:i.tableIndex,trIdx:b,columnIdx:l,rowId:y,columnId:k,columnSectionType:i.tempSectionType,detailSectionType:p}:c>1&&v==1?o[u][e]={type:c>f.length?"OTHER_ROW_ROWSPAN":"ROWSPAN",dataIdx:i.rowIndex,tableIdx:i.tableIndex,trIdx:b,columnIdx:l,rowId:y,columnId:k,columnSectionType:i.tempSectionType,detailSectionType:p}:c==1&&v>1&&(o[u][e]={type:"COLSPAN",dataIdx:i.rowIndex,tableIdx:i.tableIndex,trIdx:b,columnIdx:l,rowId:y,columnId:k,columnSectionType:i.tempSectionType,detailSectionType:p})}}for(r=it.length-1;r>-1;r--)t.splice(it[r],r);return tt},renderAddColumns:function(n,t,i,r,u,f,e){var b,o;e=e||{};n==this.tfootType&&this.dataRow.useAutoCalculate(this.tbodyType)&&(this.dataRow.dataNormalColumnAutoCalculateSetting.render(),this.setAutoCompleteCustomCellCallBack());n==this.tfootType&&this.dataRow.useAutoCalculate(this.tfootType)&&this.dataRow.dataSpecialrowColumnAutoCalculateSetting.render();this.setRenderMode(this.constValue.renderMode.addColumn);this.setStructureInfo(n);var a=this.dataColumn.getAll(n,this.constValue.returnType.multi),h=this.dataRow.getById(n,t),v=this.dataRow.getNextRow(n,t),y=this.dataRow.getPrevRow(n,t),c=this.dataRow.getViewDataTrMap(n,t),p=this.getViewDataMadeRowAll(n),w=n;h[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate&&(w=this.tfootType);b={groupRowIdx:i,groupRowLen:r,columnStartIdx:u,columnEndLen:f,dataRowIndex:h[this.constValue.rowCountColumnPropertyName]-1,prevRowId:y&&y[this.constValue.keyColumnPropertyName],nextRowId:v&&v[this.constValue.keyColumnPropertyName],trIdx:c.rowInfo.trIdx,tableId:c.tableId,tableIndex:c.tableIndex,tempSectionType:w,etcInfo:e.etcInfo,direction:e.direction};o=this.makeViewDataGroupRows(n,t,b);for(var s=0,l=i,k=o.length;s<k;s++,l++)o[s].cells.splice(0,u),o[s].cells.splice(0,0,u,0),p[(h[this.constValue.rowCountColumnPropertyName]-1)*a.length+l].cells.splice.apply(p[(h[this.constValue.rowCountColumnPropertyName]-1)*a.length+l].cells,o[s].cells),o[s].cells.splice(0,2);return this.setRenderMode(this.constValue.renderMode.none),{resultHTML:$.template(ecount.gridV2.render.template.row,{rows:o})}},renderAddGroupRows:function(n,t,i,r,u,f){var v,e;this.setRenderMode(u);this.setStructureInfo(n);var y=this.dataColumn.getAll(n,this.constValue.returnType.multi),o=this.dataRow.getById(n,t),h=this.dataRow.getNextRow(n,t),c=this.dataRow.getPrevRow(n,t),s=this.dataRow.getViewDataTrMap(n,t),l=this.getViewDataMadeRowAll(n),a=n;return o[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate&&(a=this.tfootType),v={groupRowIdx:i,groupRowLen:r,dataRowIndex:o[this.constValue.rowCountColumnPropertyName]-1,prevRowId:c&&c[this.constValue.keyColumnPropertyName],nextRowId:h&&h[this.constValue.keyColumnPropertyName],trIdx:s.rowInfo.trIdx,tableId:s.tableId,tableIndex:s.tableIndex,tempSectionType:a,etcInfo:f.etcInfo},e=this.makeViewDataGroupRows(n,t,v),e.splice(0,0,(o[this.constValue.rowCountColumnPropertyName]-1)*y.length+i,0),l.splice.apply(l,e),e.splice(0,2),this.setRenderMode(this.constValue.renderMode.none),{resultHTML:$.template(ecount.gridV2.render.template.row,{rows:e})}},refreshRow:function(n,t,i){var s,h;this.setRenderMode(this.constValue.renderMode.refresh);this.setStructureInfo(n);var c=this.dataColumn.getAll(n,this.constValue.returnType.multi),u=this.dataRow.getById(n,t),f=this.dataRow.getNextRow(n,t),e=this.dataRow.getPrevRow(n,t),r=this.dataRow.getViewDataTrMap(n,t),o=n;return u[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate&&(o=this.tfootType),s={groupRowIdx:i.groupRowStartIndex||0,groupRowLen:i.groupRowEndCount||c.length,dataRowIndex:u[this.constValue.rowCountColumnPropertyName]-1,prevRowId:e&&e[this.constValue.keyColumnPropertyName],nextRowId:f&&f[this.constValue.keyColumnPropertyName],trIdx:r.rowInfo.trIdx,tableId:r.tableId,tableIndex:r.tableIndex,tempSectionType:o,etcInfo:i.etcInfo},h=this.makeViewDataGroupRows(n,t,s),this.setRenderMode(this.constValue.renderMode.none),h},destroyAll:function(){}});ecount.gridV2.data.paging=function(){};ecount.gridV2.data.paging.prototype={constValue:null,theadType:null,tbodyType:null,tfootType:null,core:null,setting:null,events:null,__data:null,getTotalRowCount:function(){return this.__datas.totalRowCount},getTotalPageCount:function(){return this.__datas.totalPageCount},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__setting=n.setting;$.extend(this,n.mixinOption)},initDataValue:function(){var n=function(n,t,i){return n[i]=t&&t(),n};this.__datas={currentPageIndex:1,rowCountPerPage:this.optPaging.rowCountPerPage||0,totalRowCount:0,totalPageCount:0,controlData:_.reduce(this.optPaging.controlData,n,{}),instance:{}}},init:function(n){this.initGlobalValue(n);this.initDataValue()},initFormProperties:function(n){n=n||{};var i=n.pageSize||this.constValue.defaultPageSize,t;return this.optPaging.rowCountPerPage==null?t=i:this.optPaging.rowCountPerPagePreferManualSetting==!1&&(t=i),t==undefined&&(t=this.optPaging.rowCountPerPage),this.optRow[this.tbodyType].param&&(this.optRow[this.tbodyType].param.PAGE_CURRENT=this.optPaging.currentPage,this.optRow[this.tbodyType].param.PAGE_SIZE=t),this.__datas.currentPageIndex=this.optPaging.currentPage,this.__datas.rowCountPerPage=t,this},initCustomProperties:function(n){var t=$.isNull(n)?this.optPaging.rowCountPerPage!=null?this.optPaging.rowCountPerPage:this.constValue.defaultPageSize:n.pageSize;return t=t||this.constValue.defaultPageSize,this.optRow[this.tbodyType].param&&(this.optRow[this.tbodyType].param.PAGE_CURRENT=this.optPaging.currentPage,this.optRow[this.tbodyType].param.PAGE_SIZE=t),this.__datas.currentPageIndex=this.optPaging.currentPage,this.__datas.rowCountPerPage=t,this},setTotalRowCount:function(n){return this.__datas.totalRowCount=n,this},setCurrentPageIndex:function(n){this.__datas.currentPageIndex=n},setTotalPageCount:function(n){this.__datas.totalPageCount=n},isCurrentPageLast:function(){return this.__datas.totalPageCount===this.__datas.currentPageIndex},addPagingControl:function(n,t){var i=this.__datas.instance;i[n]&&i[n].destroy&&i[n].destroy();i[n]=t},getPagingControl:function(n){return this.__datas.instance[n]},render:function(){},destroyAll:function(){_.forEach(this.__datas.instance,function(n){n.destroy&&n.destroy()});this.__datas.instance=null},serialize:function(){return this.__datas}};ecount.gridV2.data.checkbox=function(){};ecount.gridV2.data.checkbox.prototype={add:function(n,t,i,r){if(this[n].items[t]&&!this.has(n,t,i)){var f=[n,t,i].join(ecount.constValue.gridDelimiter),u;return r&&(u=this.dataRow.getById(n,i)),this[n].items[t].checkedKeyList[f]=u,this}},update:function(n,t,i,r){if(this[n].items[t]&&this.has(n,t,i)){var u=[n,t,i].join(ecount.constValue.gridDelimiter);return this[n].items[t].checkedKeyList[u]=r,this}},get:function(n,t,i){if(!this[n].items[t])return null;var r=[n,t,i].join(ecount.constValue.gridDelimiter);return this[n].items[t].checkedKeyList[r]},has:function(n,t,i){if(!this[n].items[t])return!1;var r=[n,t,i].join(ecount.constValue.gridDelimiter);return this[n].items[t].checkedKeyList[r]!=undefined&&this[n].items[t].checkedKeyList[r]!=null},remove:function(n,t,i){if(this[n].items[t]&&this.has(n,t,i)){var r=[n,t,i].join(ecount.constValue.gridDelimiter);return delete this[n].items[t].checkedKeyList[r],this}},reset:function(n){var t=this.getList(n);for(var i in t)t.hasOwnProperty(i)&&(t[i].checkedKeyList={},t[i].checkedTotalCount=0,t[i].checkedPagingCount=0,t[i].disabledPagingCount=0,t[i].availablePagingCount=0,t[i].isMaxChecked=!1)},resetColumnId:function(n,t){var i=this[n].items[t];i&&(i.checkedKeyList={},i.checkedTotalCount=0,i.checkedPagingCount=0,i.disabledPagingCount=0,i.availablePagingCount=0,i.isMaxChecked=!1)},clearCheckedPagingCount:function(){for(var n,t,r=[this.theadType,this.tbodyType,this.tfootType],i=0,u=r.length;i<u;i++)if(this[r[i]]){n=this[r[i]].items;for(t in n)n.hasOwnProperty(t)&&(n[t].checkedPagingCount=0,n[t].disabledPagingCount=0,n[t].availablePagingCount=0)}},getUse:function(n,t){return this[n].items[t].use},getList:function(n){return this[n].items},isChecked:function(n,t,i){var n=n||this.tbodyType,t=t||this.checkBoxPropertyName,r=this.get(n,t,i);return!!r},addList:function(n,t,i){for(var e,r,n=n||this.tbodyType,t=t||this.checkBoxPropertyName,o=this.__fn.begin(),u,f=0;f<i.length;f++){if(!this.isRemainMaxCount(n,t))break;u=i[f];this.dataRow.getById(n,u)&&this.executeCheckbox(n,t,u,!0,{isForceCheck:!0})}if(!this.isRemainPageMaxCount(n,t))for(e=this.dataRow.getAll(this.theadType),r=0;r<e.length;r++)this.executeCheckbox(this.theadType,t,e[r][this.constValue.keyColumnPropertyName],!0);o&&this.__fn.commit()},removeList:function(n,t,i){for(var f,r,o,n=n||this.tbodyType,t=t||this.checkBoxPropertyName,s=this.__fn.begin(),e,u=0;u<i.length;u++)e=i[u],this.executeCheckbox(n,t,e,!1,{isForceCheck:!0});if(this.isRemainMaxCount(this.tbodyType,t))for(f=this.dataRow.getAll(this.theadType),r=0,o=f.length;r<o;r++)this.executeCheckbox(this.theadType,t,f[r][this.constValue.keyColumnPropertyName],!1);s&&this.__fn.commit()},checkAll:function(n,t){var i=t===!0?"addList":"removeList",n=n||this.checkBoxPropertyName,r=this.dataRow.getAll(this.tbodyType),u=r.map(function(n){return n[this.constValue.keyColumnPropertyName]}.bind(this)),f=this.__fn.begin();this[i](this.tbodyType,n,u);t===!0?this.getCheckedTotalCount(this.tbodyType,n)==this.getCheckedPagingCount(this.tbodyType,n)&&this.headerCheckFunction(n,t):this.headerCheckFunction(n,t);f&&this.__fn.commit()},headerCheckFunction:function(n,t){var i=t===!0?"addList":"removeList",r=this.dataRow.getAll(this.theadType),n=n||this.checkBoxPropertyName,u=r.map(function(n){return n[this.constValue.keyColumnPropertyName]}.bind(this));this[i](this.theadType,n,u)},clear:function(n){for(var r=[this.theadType,this.tbodyType],n=n||this.checkBoxPropertyName,f=this.__fn.begin(),u,t,i=0;i<r.length;i++){u=this.getList(r[i])[n].checkedKeyList;for(checkedKey in u)t=this.splitCheckedItemInfo(checkedKey),this.dataRow.getById(t.sectionType,t.rowId)?this.executeCheckbox(t.sectionType,t.columnId,t.rowId,!1,{isRunChange:!1,isRunComplete:!1}):(this.remove(t.sectionType,t.columnId,t.rowId),this.setCheckedPagingCount(t.sectionType,t.columnId,!1),this.setCheckedTotalCount(t.sectionType,t.columnId,-1))}f&&this.__fn.commit()},splitCheckedItemInfo:function(n){var t=n.split(ecount.constValue.gridDelimiter);return{sectionType:t[0],columnId:t[1],rowId:t[2]}},setCheckedPagingCount:function(n,t,i){i==!0?this[n].items[t].checkedPagingCount++:this[n].items[t]&&this[n].items[t].checkedPagingCount!=0&&this[n].items[t].checkedPagingCount--},getCheckedPagingCount:function(n,t){return this[n].items[t].checkedPagingCount},getcallbackObject:function(n,t){return this[n].items[t].callbackObject},getMaxCount:function(n,t){return this[n].items[t].checkedMaxCount},setMaxCount:function(n,t,i){return this[n].items[t].checkedMaxCount=i,this},getMaxCountCallback:function(n,t){return this[n].items[t].maxCountCallback},setCheckedTotalCount:function(n,t,i){if(!(i<0)||this[n].items[t].checkedTotalCount!=0)return this[n].items[t].checkedTotalCount+=i,this},getCheckedTotalCount:function(n,t){var n=n||this.tbodyType,t=t||this.checkBoxPropertyName;return this[n].items[t].checkedTotalCount},getCheckedRowIdList:function(n,t,i){var n=n||this.tbodyType,t=t||this.checkBoxPropertyName,u=this.getList(n)[t].checkedKeyList,r=[];for(checkedKey in u)r.push(this.splitCheckedItemInfo(checkedKey).rowId);return i&&r.length>0&&(r=this.funcKeySort(r,{sortOrder:i.sortOrder,sortColumn:i.sortColumn,checkedKeyList:u,sectionType:n,columnId:t})),r},getCheckedItem:function(n,t,i){for(var e=e||this.tbodyType,t=t||"array",i=i||{},c=i.filterFunc,o=n&&this.dataColumn.getPropertyName(this.tbodyType,n),n=n||this.constValue.checkBoxPropertyName,l=this.getCheckedRowIdList(e,this.checkBoxPropertyName,i),s=t=="array"?[]:{},r,u,f,h=0;h<l.length;h++)(u=l[h],r=this.get(e,n,u),r=this.cloneRowItem(r),$.isFunction(c)&&c(r)!==!0)||(o&&(f={},f[this.constValue.keyColumnPropertyName]=u,f[o]=r[o],r=f),t=="array"?s.push(r):s[u]=r);return s},getCheckedRememberRow:function(n,t){var n=n||this.tbodyType,i=this.getList(n)[t].checkedKeyList;return _.map(i,function(n){return this.cloneRowItem(n)}.bind(this))},getCheckboxUse:function(n,t){return this[n].items[t]&&this[n].items[t].use},getCheckboxUseColumnList:function(n){var t=this[n].items,i=function(n,t){return{columnId:t,use:n.use}},r=function(n){return n.use===!0&&n.ignore!==!0};return _(t).map(i).filter(r).value()},cloneRowItem:function(n){return JSON.parse(Object.toJSON(n).replace(/(\")([\w|\-]+)(\"\:)/gi,function(n){return n.toUpperCase()}))},funcKeySort:function(n,t){var u=t.sortOrder||"A",i=t.sortColumn,f=t.checkedKeyList,r=t.sectionType,e=t.columnId;return i&&(i=this.__core.data.column.getById(r,i)?this.__core.data.column.getById(r,i).propertyName:i),u=="a"||u=="asc"?n=i==undefined?n.sort(function(n,t){return n<t?-1:n>t?1:0}):n.sort(function(n,t){return leftKey=[r,e,n].join(ecount.constValue.gridDelimiter),rightKey=[r,e,t].join(ecount.constValue.gridDelimiter),n=f[leftKey][i],t=f[rightKey][i],n<t?-1:n>t?1:0}):(u=="d"||u=="desc")&&(n=i==undefined?n.sort(function(n,t){return n<t?1:n>t?-1:0}):n.sort(function(n,t){return leftKey=[r,e,n].join(ecount.constValue.gridDelimiter),rightKey=[r,e,t].join(ecount.constValue.gridDelimiter),n=f[leftKey][i],t=f[rightKey][i],n<t?1:n>t?-1:0})),n},isRemainMaxCount:function(n,t){var i=this.getMaxCount(n,t),r=this.getCheckedTotalCount(n,t);return i==-1?!0:i-r>0},isRemainPageMaxCount:function(n,t){var r=this.getAvailablePageCount(n,t),i=this.getCheckedPagingCount(n,t);return i==-1?!0:r-i>0},getActiveRowStyle:function(n,t){return this[n].items[t].activeRowStyle},getActiveRowDeterminer:function(n,t){return this[n].items[t].activeRowDeterminer},getDisableCheck:function(n,t){return this[n].items[t].isUseDisableCheck==!0},executeCheckbox:function(n,t,i,r,u){var u=u||{},y=!1,f=this.dataRow.getById(n,i),p=this.__setting.getCheckBoxCheckingDeterminer(n,t),w=this.__setting.getCheckBoxCountingDeterminer(n,t),e=w?w(f):!0,b=this.getDisableCheck(n,t),l=(b==!0||u.isForceCheck==!0)&&this.isDisabledCheckbox(n,t,i),o=u.isRunChange===!1?!1:!0,s=u.isRunComplete===!0?!0:!1,a=u.isSetCell===!0?!0:!1,h=n===ecount.grid.constValue.sectionType.thead&&!_.isNil(u.copyTheadInfo)?u.copyTheadInfo:null,c=this.dataRow.getViewDataCellMap(n,t,i),v;if(!c.cellInfo||c.cellInfo&&c.cellInfo.adjustmentValue==1||!["ecount.gridV2.widget.rowItemCheckbox","ecount.gridV2.widget.checkbox"].contains(c.cellInfo.controlType))return!0;if(a&&this.setCustomCellCheckbox(n,t,i,f,r),this.getCheckCountTypeOnlyChild(n,t)&&this.__core.data.tree.hasChildRow(n,i)&&(e=!1),c.cellInfo.editableState||u.isForceCheck||l)r===!0&&p&&p(f)!=!0&&(a=!0,r=!1);else return r==!1&&(a||n==this.theadType)&&(this.remove(n,t,i,f),this.setCheckedPagingCount(n,t,!1),e&&this.setDisabledCount(n,t,-1),this.__fn.setCell(n,t,i,r,{isRunChange:o,isRunComplete:s,isCheckedFromGrid:!0,callByType:"system"})),!0;return(r==!0||["y","true","checked"].contains(r.toString().toLowerCase())?r=!0:(r==!1||["n","false"].contains(r.toString().toLowerCase()))&&(r=!1),r==this.has(n,t,i))?((a||h)&&this.__fn.setCell(n,t,i,r,{isRunChange:o,isRunComplete:s,isCheckedFromGrid:!0,callByType:"system",copyTheadInfo:h}),!0):(r===!1||this.isRemainMaxCount(n,t)||l==!0?(r===!1?this.has(n,t,i)&&(l==!0?(this.remove(n,t,i,f),this.setCheckedPagingCount(n,t,!1),e&&this.setDisabledCount(n,t,-1),this.__fn.setCell(n,t,i,r,{isRunChange:o,isRunComplete:s,isCheckedFromGrid:!0,callByType:"system",copyTheadInfo:h})):(this.remove(n,t,i,f),this.setCheckedPagingCount(n,t,!1),e&&this.setCheckedTotalCount(n,t,-1),this.__fn.setCell(n,t,i,r,{isRunChange:o,isRunComplete:s,isCheckedFromGrid:!0,callByType:"system",copyTheadInfo:h})),this.setMaxChecked(n,t,!1)):this.has(n,t,i)||(l==!0?(this.add(n,t,i,f),this.setCheckedPagingCount(n,t,!0),e&&this.setDisabledCount(n,t,1),this.__fn.setCell(n,t,i,r,{isRunChange:o,isRunComplete:s,isCheckedFromGrid:!0,callByType:"system",copyTheadInfo:h})):(this.add(n,t,i,f),this.setCheckedPagingCount(n,t,!0),e&&this.setCheckedTotalCount(n,t,1),this.__fn.setCell(n,t,i,r,{isRunChange:o,isRunComplete:s,isCheckedFromGrid:!0,callByType:"system",copyTheadInfo:h}))),y=!0):(this.getMaxChecked(n,t)||(v=this.getMaxCountCallback(n,t),v&&v(this.getMaxCount(n,t))),this.setMaxChecked(n,t,!0)),y)},headerExecuteCheckbox:function(n,t,i,r){var f=this.dataRow.getAll(this.tbodyType),r=r||{},h,e,n=n||this.constValue.checkBoxPropertyName,c,s,u,o;if(this.getColumnUse(this.tbodyType,n))if(this.getMaxCount(this.tbodyType,n)==this.getCheckedTotalCount(this.tbodyType,n)&&this.getCheckedPagingCount(this.tbodyType,n)==0)this.__fn.setCell(this.theadType,n,t,!0,{isRunChange:!1,isRunComplete:!1,isCheckedFromGrid:!0,callByType:"system"});else if(this.__setting.getCheckboxUseDisableCheck(this.tbodyType,n)||this.getDisabledCount(this.tbodyType,n)!=this.dataRow.getRowCount(this.tbodyType)&&this.getAvailablePageCount(this.tbodyType,n)!=0)if(this.__core.data&&this.__core.data.optFormOption&&this.__core.data.optFormOption.gridCountPerPage==2&&!_.isNil(r.currentPage)&&_.get(f[0],"_RENDER_SET.DIVISIONINDEX",null)!==null){for(u=0,o=f.length;u<o;u++)if(c=_.get(f[u],"_RENDER_SET.DIVISIONINDEX",null),r.currentPage==c&&(!this.__core.view.filter||this.__core.view.filter&&this.__core.view.filter.isRowHidden&&this.__core.view.filter.isRowHidden[u]!="hide")&&(e=f[u][this.constValue.keyColumnPropertyName],h=this.isChecked(this.tbodyType,n,e),!this.executeCheckbox(this.tbodyType,n,e,i)))break;s=!this.isRemainPageMaxCount(this.tbodyType,n)||!this.isRemainMaxCount(this.tbodyType,n);this.has(this.theadType,n,t)!==s&&(r.copyTheadInfo={currentPage:r.currentPage,checked:i},r.realColumnId?this.executeCheckbox(this.theadType,r.realColumnId,t,s,r):this.executeCheckbox(this.theadType,n,t,s,r))}else{for(u=0,o=f.length;u<o;u++)if((!this.__core.view.filter||this.__core.view.filter&&this.__core.view.filter.isRowHidden&&this.__core.view.filter.isRowHidden[u]!="hide")&&(e=f[u][this.constValue.keyColumnPropertyName],h=this.isChecked(this.tbodyType,n,e),!this.executeCheckbox(this.tbodyType,n,e,i)))break;r.realColumnId?this.executeCheckbox(this.theadType,r.realColumnId,t,i,r):this.executeCheckbox(this.theadType,n,t,i,r)}else this.__fn.setCell(this.theadType,n,t,!1,{isRunChange:!1,isRunComplete:!1,isCheckedFromGrid:!0,callByType:"system"})},bodyExecuteCheckbox:function(n,t,i,r){var h=this.dataRow.getAll(this.theadType),c=this.isRemainMaxCount(this.tbodyType,n),l,f,o,u,s,e,a;for(i===!1||c?this.executeCheckbox(this.tbodyType,n,t,i,r):i!==!0||c||(this.__fn.setCell(this.tbodyType,n,t,!i,{isCheckedFromGrid:!0,callByType:"system"}),this.getMaxChecked(this.tbodyType,n)||(l=this.getMaxCountCallback(this.tbodyType,n),l&&l(this.getMaxCount(this.tbodyType,n)),this.setMaxChecked(this.tbodyType,n,!0))),f=this.dataColumn.getDuplicatedColumns(this.theadType,n),o={isRunChange:!1,isRunComplete:!1},u=0;u<f.length;u++)if(f[u].id&&this.getCheckboxUse(this.theadType,f[u].id))for(s=!this.isRemainPageMaxCount(this.tbodyType,n)||!this.isRemainMaxCount(this.tbodyType,n),s||o.copyTheadInfo||(o.copyTheadInfo=this.getAllCheckedInfoByTbody(r)),e=0,a=h.length;e<a;e++)this.executeCheckbox(this.theadType,f[u].id,h[e][this.constValue.keyColumnPropertyName],s,o),this.__core.view.fix&&this.__core.view.fix.executeCloneCheckbox(this.theadType,f[u].id,h[e][this.constValue.keyColumnPropertyName],s);return c},getAllCheckedInfoByTbody:function(n){var t=null,u=this.__core.data&&this.__core.data.optFormOption&&this.__core.data.optFormOption.gridCountPerPage==2,i=this.dataRow.getAll(this.tbodyType),r;return!_.isNil(n.currentPage)&&u&&i.length>0&&(r=i.filter(function(n){return _.isPlainObject(n._RENDER_SET)&&!_.isNil(n._RENDER_SET.DIVISIONINDEX)&&!~_.indexOf(["total","subtotal"],n._ROW_TYPE)}).reduce(function(n,t){return n[t._RENDER_SET.DIVISIONINDEX]=~_.indexOf(Object.keys(n),String(t._RENDER_SET.DIVISIONINDEX))?n[t._RENDER_SET.DIVISIONINDEX]===!1?!1:!!t.CHK_H:!!t.CHK_H,n},{}),t={currentPage:n.currentPage,checkedInfo:r}),t},setChecked:function(n,t,i,r,u){var f,e;u=$.extend({isSetCell:!0},u||{});var h=this.dataRow.getViewDataTrMap(n,i),o=h.rowInfo[t],c=o.disabled==="disabled",l=this.isChecked(n,t,i),s=!c&&r;this.getColumnUse(this.tbodyType,t)&&this.setMaxChecked(this.tbodyType,t,!1);this.__core.view&&this.__core.view.cell&&(e=this.__core.view.cell.getCellElement(n,t,i),e.cell&&e.map.cellInfo.adjustmentValue!=1&&(f=e.cell.querySelector(this.constValue.controlSelector[o.controlType])));u.oEvent={target:f};n==this.theadType?this.headerExecuteCheckbox(t,i,s,u):this.bodyExecuteCheckbox(t,i,s,u);_.isNil(u.currentPage)&&f&&$(f).focus()},onFocus:function(){},onBlur:function(){},onChange:function(n,t){var r=t.target.getAttribute("disabled")=="disabled",i=!r&&!t.target.checked,u=this.__fn.begin();n.gridSectionType==this.theadType?this.headerExecuteCheckbox(n.gridColumnID,n.gridDataKey,i):this.bodyExecuteCheckbox(n.gridColumnID,n.gridDataKey,i);u&&this.__fn.commit()},setCustomCellCheckbox:function(n,t,i,r,u){var f={},o=this.optColumn[n].customCell&&this.optColumn[n].customCell[t.toLowerCase()];o&&(f=o(u,r)||{});var s=this.isDisabledCheckbox(n,t,i),e=!1,h=this.dataColumn.getAll(this.theadType,this.constValue.returnType.multi);f.attrs&&!$.isEmpty(f.attrs.disabled)&&(e=!!f.attrs.disabled);s&&!e?(this.removeDisabledCheckbox(n,t,i),this.setDisabledCount(n,t,-1),this.setAvailablePageCount(n,t,h.length),this.dataRow.setDisabled(n,t,i,!0)):!s&&e&&(this.setDisabledList(n,t,i,!0),this.setDisabledCount(n,t,1),this.setAvailablePageCount(n,t,h.length*-1),this.dataRow.setDisabled(n,t,i,!1))},setDisabledList:function(n,t,i,r){if(this[n].items[t]&&!this.isDisabledCheckbox(n,t,i)){var f=[n,t,i].join(ecount.constValue.gridDelimiter),u;return r&&(u=this.dataRow.getById(n,i)),this[n].items[t].disabledKeyList[f]=u,this}},updateDisabledList:function(n,t,i,r){if(this[n].items[t]&&this.has(n,t,i)){var u=[n,t,i].join(ecount.constValue.gridDelimiter);return this[n].items[t].disabledKeyList[u]=r,this}},getDisabledList:function(n,t){return this[n].items[t].disabledKeyList},getDisabledCheckbox:function(n,t,i){var r=[n,t,i].join(ecount.constValue.gridDelimiter);return this[n].items[t].disabledKeyList[r]},removeDisabledCheckbox:function(n,t,i){var r=[n,t,i].join(ecount.constValue.gridDelimiter);delete this[n].items[t].disabledKeyList[r]},isDisabledCheckbox:function(n,t,i){var r=[n,t,i].join(ecount.constValue.gridDelimiter);return this[n].items[t].disabledKeyList[r]?!0:!1},setDisabledCount:function(n,t,i){this[n].items[t].disabledPagingCount+=i},getDisabledCount:function(n,t){return this[n].items[t].disabledPagingCount},setMaxChecked:function(n,t,i){this[n].items[t].isMaxChecked=i},getMaxChecked:function(n,t){return this[n].items[t].isMaxChecked},setAvailablePageCount:function(n,t,i){this[n].items[t].availablePagingCount+=i},getAvailablePageCount:function(n,t){return this[n].items[t].availablePagingCount},getCheckCountTypeOnlyChild:function(n,t){return this[n].items[t].checkCountTypeOnlyChild},getColumnUse:function(n,t){return!!(this[n].items[t]&&this[n].items[t].use)},addCheckBoxColumn:function(n,t){this.optCheckbox[n]&&this.optCheckbox[n].items&&this.optCheckbox[n].items[t]&&(this[n]||(this[n]={}),this[n].items||(this[n].items={}),this[n].items[t]=this.optCheckbox[n].items[t])},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.checkBoxPropertyName=this.constValue.checkBoxPropertyName;this.__core=n.core;this.__fn=this.__core.fn;this.__setting=n.setting;$.extend(this,n.mixinOption);this.clearCheckedPagingCount()},init:function(n,t,i){this[n]||(this[n]={});this[n].items||(this[n].items={});$.extend(this[n].items,t);this.reset(n);this.initGlobalValue(i)},formLoadInit:function(){for(var i,t=[this.theadType,this.tbodyType,this.tfootType],n=0;n<t.length;n++)i=this.__setting.getCheckBox(t[n]),$.extend(this[t[n]].items,i)},render:function(){},destroyAll:function(){}};ecount.gridV2.data.sortable=function(){};ecount.gridV2.data.sortable.prototype={add:function(n,t){this.enableList[n]||(this.enableList[n]=t)},remove:function(n){delete this.enableList[n]},has:function(n){return this.enableList[n]!=undefined},get:function(n){return this.enableList[n]},clearState:function(){this._state="none"},isSorting:function(){return this._state==="sorting"},sort:function(n,t,i,r){this.prevColumnId&&this.prevColumnId!=t&&(this.enableList[this.prevColumnId].sortOrder="A");var e={A:r?"A":"D",D:r?"D":"A"},u=e[r||this.enableList[t].sortOrder]||"A",f=this.dataColumn.getById(n,t);this.enableList[t].sortOrder=u;this.prevColumnId=t;this._state="sorting";this.optColumn.sortExecute&&this.optColumn.sortExecute(null,{columnId:t,columnIndex:f.index,propertyName:f.propertyName,sortOrder:u})},initDataValue:function(){this.enableList={};this.disableList={};this.state="none";this.prevColumnId=null},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__setting=n.setting;$.extend(this,n.mixinOption);this.dataColumn=this.__core.data.column},init:function(n){this.initDataValue();this.initGlobalValue(n)},reset:function(){this.initDataValue()},render:function(){},destroyAll:function(){}};ecount.gridV2.data.shaded=function(){};ecount.gridV2.data.shaded.prototype={__datas:null,className:"",keys:null,paintItems:null,clearItems:null,setStructureInfo:function(n){this.keys=this.__datas[n].keys;this.paintItems=this.__datas[n].paintItems;this.clearItems=this.__datas[n].clearItems},add:function(n,t,i){return this.setStructureInfo(n),this.keys[t]||(this.keys[t]=[]),this.keys[t].push(i),this},removeKey:function(n,t){this.__datas[n].keys[t]&&delete this.__datas[n].keys[t]},removeItem:function(n,t,i){var r=this.__datas[n].keys[t].indexOf(i),u,f;if(r>-1)this.__datas[n].keys[t].splice(r,1);else{for(r=0,u=this.__datas[n].keys[t].length;r<u;r++)if(f=this.__datas[n].keys[t][r],f.rowId==i.rowIdx&&f.columnId==i.columnId)break;r!=u&&this.__datas[n].keys[t].splice(r,1)}},hasKey:function(n,t){return this.__datas[n].keys[t]?!0:!1},onClick:function(n){var u,f,r,t,i,e;this.setStructureInfo(this.tbodyType);switch(this.optShaded.type){case"data":case"dataGroup":u=this.__core.data.row.getById(this.tbodyType,n.gridDataKey);f=this.__core.data.column.getById(this.tbodyType,n.gridColumnID);r=u[f.propertyName];this.clearItems=this.paintItems;this.hasKey(r)&&this.paintItems(this.keys[r])}for(this.__fn.begin();t=this.clearItems&&this.clearItems.pop();)this.__fn.cell.removeClass(this.tbodyType,t.columnId,t.rowId,this.className);if(this.paintItems)for(i=0,e=this.paintItems.length;i<e;i++)t=this.paintItems[i],this.__fn.cell.addClass(this.tbodyType,t.columnId,t.rowId,this.className);this.__fn.commit()},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__fn=this.__core.fn;this.__setting=n.setting;var t=this.__setting.serialize();this.optCommon=t.common;this.optColumn=t.column;this.optForm=t.form;this.optRow=t.row},init:function(n){return this.reset(),this.initGlobalValue(n),this},reset:function(){this.__datas={thead:{keys:[],paintItems:[],clearItems:[]},tbody:{keys:[],paintItems:[],clearItems:[]},tfoot:{keys:[],paintItems:[],clearItems:[]}}},render:function(){},destroyAll:function(){}};ecount.gridV2.data.shadedCollection=function(){};ecount.gridV2.data.shadedCollection.prototype={add:function(n,t,i){this.setStructureInfo(n);this.keys[t]=i},remove:function(n,t){this.setStructureInfo(n);this.has(n,t)&&delete this.keys[t]},hasKey:function(n,t){return this.keys[t]?!0:!1},onClick:function(n){var i,u,f=this.__core.data.row.getById(n.gridSectionType,n.gridDataKey),s=f[this.constValue.rowVariableNames.rowType],h=s==this.constValue.rowType.separate?this.tfootType:n.gridSectionType,c=this.__core.data.column.getById(h,n.gridColumnID),e=this.getShadedKey(f,c),o=this.optShaded.shadedGroupIdList,t,r;if(this.setStructureInfo(n.gridSectionType),this.keys[n.gridColumnID]&&this.keys[n.gridColumnID][e]&&(this.__datas[n.gridSectionType].clearItems=this.__datas[n.gridSectionType].paintItems,this.__datas[n.gridSectionType].paintItems=o&&!o.contains(n.gridColumnID)?[{rowId:n.gridDataKey,columnId:n.gridColumnID}]:this.keys[n.gridColumnID][e]),u=this.__fn.begin(),this.__datas[n.gridSectionType].clearItems)for(t=0,r=this.__datas[n.gridSectionType].clearItems.length;t<r;t++)i=this.__datas[n.gridSectionType].clearItems[t],this.__fn.refreshCell(n.gridSectionType,i.columnId,i.rowId);if(this.__datas[n.gridSectionType].paintItems)for(t=0,r=this.__datas[n.gridSectionType].paintItems.length;t<r;t++)i=this.__datas[n.gridSectionType].paintItems[t],this.__fn.refreshCell(n.gridSectionType,i.columnId,i.rowId);u&&this.__fn.commit()},getShadedItems:function(n){for(var i,n=n||this.tbodyType,f=this.__datas[n].paintItems,r=[],t,u=0;u<f.length;u++)t=f[u],i=r.find(function(n){return t.columnId==n.columnId}),i?i.shadedKey.contains(t.rowId)||i.shadedKey.push(t.rowId):r.push({columnId:t.columnId,shadedKey:[t.rowId]});return r},clickShadedByKey:function(n,t,i){var i=i||this.tbodyType,r=this.__fn.begin();this.removeShadedItems(i);this.__datas[i].paintItems=[{rowId:t,columnId:n}];this.__fn.refreshCell(i,n,t);r&&this.__fn.commit()},removeShadedItems:function(n){var i,n=n||this.tbodyType,r=this.__datas[n].paintItems,u=this.__fn.begin(),t;for(this.__datas[n].paintItems=[],t=0;t<r.length;t++)i=r[t],this.__fn.refreshCell(n,i.columnId,i.rowId);u&&this.__fn.commit()},getShadedKey:function(n,t){var i;switch(this.optShaded.type){case"id":i=n[this.constValue.keyColumnPropertyName];break;case"data":case"dataGroup":i=n[t.propertyName]}return i},getClassName:function(n,t,i,r){var f="",e="",u,o;if(this.setStructureInfo(n),!this.paintItems||this.paintItems.length==0)return f;switch(this.optShaded.type){case"id":e=i;break;case"data":case"dataGroup":e=r}if(this.keys[t]&&this.keys[t][e])for(u=0,o=this.paintItems.length;u<o;u++)if(this.paintItems[u].rowId==i&&this.paintItems[u].columnId==t){f=this.optShaded.className;break}return f},setStructureInfo:function(n){this.keys=this.__datas[n].keys;this.paintItems=this.__datas[n].paintItems;this.clearItems=this.__datas[n].clearItems},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__fn=this.__core.fn;this.__setting=n.setting;$.extend(this,n.mixinOption)},init:function(n){this.reset();this.initGlobalValue(n)},reset:function(){this.__datas={thead:{keys:{},paintItems:[],clearItems:[]},tbody:{keys:{},paintItems:[],clearItems:[]},tfoot:{keys:{},paintItems:[],clearItems:[]}}},render:function(){},destroyAll:function(){}};ecount.gridV2.data.tree=function(){};ecount.gridV2.data.tree.prototype={removeParent:function(n){delete this.__datas.listParentToChild[n]},addChild:function(n,t){this.__datas.listParentToChild[n]||(this.__datas.listParentToChild[n]=[]);this.__datas.listParentToChild[n].push(t)},removeChild:function(n,t){if(this.__datas.listParentToChild[n]){var i=this.__datas.listParentToChild[n].indexOf(t);i>-1&&this.__datas.listParentToChild[n].splice(i,1)}},removeRootNode:function(n){var t=this.__datas.rootNodeList.indexOf(n);t>-1&&this.__datas.rootNodeList.splice(t,1)},isParent:function(n,t){var i=this.__datas.listParentToChild[t];return i!=undefined&&i!=null},getParentKey:function(n,t){var r=this.__datas.listParentToChild,i,u;for(i in r)if(u=r[i].indexOf(t),u>-1)return i;return null},getParentGroup:function(n){for(var i=[],r=n,u=!0,t;u;)t=this.getParentKey(this.tbodyType,r),t?(i.push(t),r=t):u=!1;return i},getDepth:function(n,t,i){var u=this.dataRow.__datas[this.tbodyType].keys[n],r;return u?(r=u[this.constValue.tree.set],!r||t>i)?t:this.getDepth(r[this.constValue.tree.parentId],++t,i):t},dataOrder:function(n,t,i,r,u,f){for(var e,o=0,s=i.length;o<s;o++)e=i[o],n.push(r[e]),u[e]?this.dataOrder(n,e,u[e],r,u,f):this.optTree.treeOpenOnInit=="upper"&&f[t]>0&&(this.__datas.listParentToChild[t][this.constValue.tree.expand]=!1)},dataOrderHideOnNoChild:function(n,t,i,r,u,f,e,o){for(var s="",c,l=[],h=0,a=t.length;h<a;h++)s=t[h],s!=undefined&&e[s]!==!0?this.__datas.listParentToChild[s]?this.__datas.listParentToChild[s].hasSelectableChild==!0?(f[s]!=undefined&&(i[s]&&(c=i[s][this.constValue.tree.set],c[this.constValue.tree.depth]>=n&&(c[this.constValue.tree.depth]=n),o[s]=c[this.constValue.tree.depth],r.push(i[s]),u[s]=this.__datas.listParentToChild[s]),e[s]=!0),this.dataOrderHideOnNoChild(n+1,this.__datas.listParentToChild[s],i,r,u,f,e,o)):(l.push(h),delete this.__datas.listParentToChild[s]):(i[s]&&(c=i[s][this.constValue.tree.set],c[this.constValue.tree.depth]>=n&&(c[this.constValue.tree.depth]=n,o[s]=n),r.push(i[s])),e[s]=!0):l.push(h);for(h=l.length-1;h>-1;h--)t.splice(l[h],1)},makeNoChildList:function(n,t,i){for(var r="",u=0,f=t.length;u<f;u++)r=t[u],this.__datas.listParentToChild[r]?this.makeNoChildList(r,this.__datas.listParentToChild[r],i):(i[n]=n,this.__datas.listParentToChild[n].hasSelectableChild=!0)},getChild:function(){},getChildAll:function(n,t,i){var e,s;i=i||{};var u=this.__datas.listParentToChild[t],f=i.onlyExpand,o=i.isRetrieveKey,r=i.searchDepth;if(!u)return n;if(r!=0)for(e=0,s=u.length;e<s;e++)key=u[e],n.push(key),this.__datas.listParentToChild[key]&&(f?u[key].expand==f&&this.getChildAll(n,key,{onlyExpand:f,isRetrieveKey:o,searchDepth:r>0?i.searchDepth-1:r}):this.getChildAll(n,key,{onlyExpand:f,isRetrieveKey:o,searchDepth:r>0?i.searchDepth-1:r}));return n},getChildByOption:function(n,t,i){var r=i.searchDepth;return r===0?n:this.getChildAll(n,t,i)},getChildRowList:function(n,t){return t=_.extend(!0,{onlyExpand:!1,isRetrieveKey:!1,searchDepth:-1},t),this.getChildByOption([],n,t)},hasChildRow:function(n,t,i,r){var u=this.__datas.listParentToChild[t]!=undefined&&this.__datas.listParentToChild[t].length>0;return i&&r&&(u=this.isCheckBoxDisabled(n,t,r)),u},isCheckBoxDisabled:function(n,t,i){var r,f,e;i=_.extend(!0,{isRetrieveKey:!0},i);var o=i.columnId||this.constValue.checkBoxPropertyName,u=this.getChildRowList(t,i),s=this.__core.data.checkbox.getDisabledList(this.tbodyType,this.constValue.checkBoxPropertyName);for(r=0,f=u.length;r<f;r++)if(e=[n,o,u[r]].join(ecount.constValue.gridDelimiter),!s[e])return!1;return!0},visible:function(n,t){var u=this.__fn.begin(),i,r,f;for(this.dataRow.setStructureInfo(n),i=0,r=this.__datas.listParentToChild[t].length;i<r;i++)f=this.dataRow._keys[this.__datas.listParentToChild[t][i]][this.constValue.tree.set],this.__fn.removeRowClass(n,this.__datas.listParentToChild[t][i],"hide",{}),this.__datas.listParentToChild[t]&&this.__datas.listParentToChild[t][this.constValue.tree.expand]&&this.__datas.listParentToChild[this.__datas.listParentToChild[t][i]]&&this.__datas.listParentToChild[this.__datas.listParentToChild[t][i]][this.constValue.tree.expand]&&this.visible(n,this.__datas.listParentToChild[t][i]);u&&this.__fn.commit()},invisible:function(n,t){for(var r=this.__fn.begin(),i=0,u=this.__datas.listParentToChild[t].length;i<u;i++)this.__fn.addRowClass(n,this.__datas.listParentToChild[t][i],"hide"),this.__datas.listParentToChild[this.__datas.listParentToChild[t][i]]&&this.invisible(n,this.__datas.listParentToChild[t][i]);r&&this.__fn.commit()},setCheckWithChild:function(n,t,i,r){for(var f=this.getChildRowList(t),e,u=0,o=f.length;u<o;u++)e=this.__core.data.checkbox.bodyExecuteCheckbox(this.constValue.checkBoxPropertyName,f[u],i,_.extend(r,{isSetCell:!0}))},onClick:function(n,t,i){var h=this.dataRow.getById(n.gridSectionType,n.gridDataKey),c=h[this.constValue.tree.set],u=!0,f=!1,e,o,r,s;if(this.isTreeClicked(n,t,i,c)){for(e=this.__datas.listParentToChild[n.gridDataKey][this.constValue.tree.expand]=!this.isTreeExpand(n.gridSectionType,n.gridDataKey),f=this.__fn.begin(),o=e?"visible":"invisible",this[o](n.gridSectionType,n.gridDataKey),r=0,s=this.optTree.treeColumns.length;r<s;r++)this.__fn.refreshCell(n.gridSectionType,this.optTree.treeColumns[r],n.gridDataKey);u=!1}return f&&this.__fn.commit(),this.__events._triggerEvent(ecount.grid.event.list.gridResized,{},{}),u},isTreeClicked:function(n,t,i,r){var u=r&&r.eventOnLabel||this.optTree.eventOnLabel,f=this.__datas.listParentToChild[n.gridDataKey],e=t.target&&t.target.tagName=="SPAN",o=["ecount.gridV2.widget.label.arrow","ecount.gridV2.widget.link.arrow"].contains(i.cellInfo.controlType);return u&&f||e&&o},treeNodeToggle:function(n,t,i){var n=n||this.tbodyType,r,h,s,u,c,e,o,f;if(t)t=$.isArray(t)?t:[t];else for(s=this.dataRow.getAll(n),t=[],u=0,f=s.length;u<f;u++)t.push(s[u][this.constValue.keyColumnPropertyName]);for(c=this.__fn.begin(),e=0;e<t.length;e++)if(r=t[e],this.__datas.listParentToChild[r]&&this.__datas.listParentToChild[r][this.constValue.tree.expand]!=i)for(this.__datas.listParentToChild[r][this.constValue.tree.expand]=i,h=i?"visible":"invisible",this[h](n,r),o=0,f=this.optTree.treeColumns.length;o<f;o++)this.__fn.refreshCell(n,this.optTree.treeColumns[o],r);c&&this.__fn.commit();this.__events._triggerEvent(ecount.grid.event.list.gridResized,{},{})},isTreeExpand:function(n,t){return this.__datas.listParentToChild[t]&&this.__datas.listParentToChild[t][this.constValue.tree.expand]},checkTreeNumberRadio:function(n,t,i){var r,c,o,s,a;i=i||{};var h=i.valueStorage,u=this.getChildRowList(t,{isRetrieveKey:!0}),v=this.__core.transaction.begin(),f=[];for(i.refreshColumnId&&typeof i.refreshColumnId=="string"?f.push(i.refreshColumnId):i.refreshColumnId&&$.isArray(i.refreshColumnId)&&(f=i.refreshColumnId),r=0,c=u.length;r<c;r++){var y=this.hasChildRow(this.tbodyType,u[r]),l=this.dataRow.getViewDataCellInfo(this.tbodyType,n,u[r]),p=this.dataRow.getById(this.tbodyType,u[r]),e=l.editableState;if(this.optRadio.checkingDeterminer&&(e=this.optRadio.checkingDeterminer&&this.optRadio.checkingDeterminer(n,p,e),typeof e!="boolean"&&(e=!1)),l&&e)if(y==!0){if(o=this.dataRow.getById(this.tbodyType,u[r]),this.dataRow.setValue(this.tbodyType,h,u[r],n),this.__core.transaction.push("cell","setValue",[this.tbodyType,n,u[r],i.totalColumnId?o[i.totalColumnId]:o.COUNT_TOTAL]),this.__core.transaction.push("cell","setNumberRadioCount",[this.tbodyType,n,u[r],i.totalColumnId?o[i.totalColumnId]:o.COUNT_TOTAL]),i.callback&&i.callback(this.dataRow.getById(this.tbodyType,u[r]),!0),f.length>0)for(s=0,a=f.length;s<a;s++)this.__core.transaction.push("cell","setValue",[this.tbodyType,f[s],u[r],0]),this.__core.transaction.push("cell","setNumberRadioCount",[this.tbodyType,f[s],u[r],0]);this.checkTreeNumberRadio(n,u[r],i)}else this.__fn.setCell(this.tbodyType,h,u[r],n,{callByType:"system"}),this.__fn.refreshCell(this.tbodyType,n,u[r]),i.callback&&i.callback(this.dataRow.getById(this.tbodyType,u[r]),!1)}v&&this.__core.transaction.commit()},setTreeNodeInOut:function(n,t,i,r){for(var a=this.getParentKey(n,t),v=this.dataRow.getById(n,t),u=v[this.constValue.tree.set],e=this.__datas.listParentToChild[a],h=this.__datas.listParentToChild[i],y=this.dataRow.getById(n,i),p=y[this.constValue.tree.set],c,f=0,w=e.length;f<w;f++)if(t==e[f]){c=f;break}e.splice(c,1);h?h.push(t):(this.__datas.listParentToChild[i]=[t],this.__datas.listParentToChild[i][this.constValue.tree.expand]=!0);this.__core.view.cell.removeClass(n,r,t,"indent"+(u[this.constValue.tree.depth]+1));u[this.constValue.tree.depth]=p[this.constValue.tree.depth]+1;u[this.constValue.rowVariableNames.parentGroupId]=i;this.dataRow.setValue(n,this.constValue.rowVariableNames.treeSet,t,u);this.__core.view.cell.addClass(n,r,t,"indent"+(u[this.constValue.tree.depth]+1));var o=this.dataRow.getIndexById(n,t),s=this.dataRow.getIndexById(n,i),l=this.getChildRowList(i);o<s?this.__core.data.row.moveBulkRows(n,o,s+l.length-1,0):this.__core.data.row.moveBulkRows(n,o,s+l.length,0)},reset:function(){this.__datas={treeHideOnNoChild:!1,eventOnLabel:!1,eventDisable:!1,allKey:{"0000":{id:"0000",parentId:null,depth:0,hasChild:!1}},rootNodeList:[],listParentToChild:{},listChildToParent:{}}},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__setting=n.setting;this.__events=this.__setting.eventsGet();this.__fn=this.__core.fn;_.extend(this,n.mixinOption)},init:function(n){this.reset();this.initGlobalValue(n)},render:function(){},destroyAll:function(){},serialize:function(){return this.__datas}};ecount.gridV2.data.validation=function(){};ecount.gridV2.data.validation.prototype={add:function(n,t,i,r,u){var f=[i,r].join(ecount.constValue.gridDelimiter);this.__datas.items&&this.__datas.items[n]&&this.__datas.items[n][t]&&(this.__datas.items[n][t][f]=u)},remove:function(n,t,i,r){var u=[i,r].join(ecount.constValue.gridDelimiter);this.__datas.items[n]&&this.__datas.items[n][t]&&this.__datas.items[n][t][u]&&delete this.__datas.items[n][t][u]},removeAll:function(){this.__datas.items={}},get:function(n,t,i,r,u){var f=[i,r].join(ecount.constValue.gridDelimiter);return this.__datas.items[n]&&this.__datas.items[n][t]&&this.__datas.items[n][t][f]?u?Object.clone(this.__datas.items[n][t][f]):this.__datas.items[n][t][f]:null},getAll:function(n,t){return this.__datas.items[n][t]},initGlobalValue:function(n){this.defaultOption=n;this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;$.extend(this,n.mixinOption);this.__list=null},initDataValue:function(){this.__datas={items:{widget:{thead:{},tbody:{},tfoot:{}},custom:{thead:{},tbody:{},tfoot:{}},system:{thead:{},tbody:{},tfoot:{}}}}},init:function(n){this.initGlobalValue(n);this.initDataValue()},render:function(){},destroyAll:function(){}};ecount.gridV2.data.autoCalculateSetting=function(){};ecount.gridV2.data.autoCalculateSetting.prototype={get:function(n,t){var i=[n,t].join(ecount.constValue.gridDelimiter);return this.__datas[i]},trigger:function(n,t,i){var o=[n,t].join(ecount.constValue.gridDelimiter),s=this.dataRow.getAll(n),r=this.__datas[o],f,u,e;r&&(f=new Decimal(r.total||0),u=f.plus(i),r.total=u.toString(),r.actionType=="avg"&&(e=u.div(s.length),r.average=e.toString()),this.__fn.setCell(r.targetSectionType,r.targetColumnId,r.targetRowId,r.actionType=="sum"?r.total:r.actionType=="avg"?r.average:0,{isRunChange:r.isRunChange,isRunComplete:r.isRunComplete,callByType:"system"}))},initDataValue:function(){this.__datas={}},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__fn=this.__core.fn;this.__setting=n.setting;$.extend(this,n.mixinOption)},init:function(n){return this.initGlobalValue(n),this.initDataValue(n),this},setSectionType:function(n){return this.sectionType=n,this},render:function(){var t,s,o,v,r;if(this.sectionType==this.tbodyType){for(t in this.optColumn[this.sectionType].autoCalculate)if(this.optColumn[this.sectionType].autoCalculate.hasOwnProperty(t)){if(s=[this.sectionType,t].join(ecount.constValue.gridDelimiter),this.__datas[s])continue;var n=this.optColumn[this.sectionType].autoCalculate[t],l=n.targetRowId||"special-row-0",a=n.targetColumnId||t,h=n.actionType||"sum",i=n.total==undefined||n.total==null?null:n.total,u=n.average==undefined||n.average==null?null:n.average,y=n.isRunChange===!0,p=n.isRunComplete===!0,f,e,c=this.dataRow.getAll(this.sectionType);for(f=this.dataColumn.getById(this.sectionType,t),e=f?f.propertyName:"",i=new Decimal(0),o=0,v=c.length;o<v;o++)i=i.plus(c[o][e]||0);r=this.dataRow.getById(this.tfootType,l);f=this.dataColumn.getById(this.tfootType,a);r&&(r[e]=i.toString());h=="avg"&&(u=i.div(c.length),r&&(r[e]=u.toString()));this.__datas[s]={actionType:h,targetSectionType:this.tfootType,targetRowId:l,targetColumnId:a,operator:h,total:i.toString(),average:u&&u.toString(),isRunChange:y,isRunComplete:p}}}else this.sectionType==this.tfootType},destroyAll:function(){}};ecount.gridV2.data.autoCalculateSpecialrowSetting=function(){};ecount.gridV2.data.autoCalculateSpecialrowSetting.prototype={get:function(n,t,i){var r=[n,t,i].join(ecount.constValue.gridDelimiter);return this.__datas[r]},trigger:function(n,t,i){var y=[n,t,i].join(ecount.constValue.gridDelimiter),o=this.__datas[y],s=this.dataRow.getById(this.sectionType,i),c,f,l,e,v;if(s&&o)for(c=this.dataRow.getById(this.sectionType,i,!0),f=0,l=o.length;f<l;f++){var h=o[f],u=h.actionType,p=h.targetColumnId,a=h.sourceColumnId,r=new Decimal(u==="mul"?1:0);if(typeof u=="function")r=u(c);else for(e=0,v=a.length;e<v;e++)column=this.dataColumn(this.sectionType,a[e],i),u==="sum"?r=r.plus(s[column.propertyName]||0):u==="mul"&&(r=r.times(s[column.propertyName]||0));this.__fn.setCell(this.sectionType,p,i,r,{isRunChange:!1,isRunComplete:!1,callByType:"system"})}},initDataValue:function(){this.__datas={}},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__fn=this.__core.fn;this.__setting=n.setting;$.extend(this,n.mixinOption)},setSectionType:function(n){return this.sectionType=n,this},init:function(n){return this.initGlobalValue(n),this.initDataValue(n),this},render:function(){var r,f,l,a,n,v;if(this.sectionType==this.tfootType)for(r in this.optColumn[this.sectionType].autoCalculate)if(this.optColumn[this.sectionType].autoCalculate.hasOwnProperty(r)){f=[];this.optColumn[this.sectionType].autoCalculate[r].constructor==Array?f=this.optColumn[this.sectionType].autoCalculate[r]:f.push(this.optColumn[this.sectionType].autoCalculate[r]);var h="special-row-"+r,c=this.dataRow.getById(this.sectionType,h),e,y=this.dataRow.getById(this.sectionType,h,!0);if(!c)continue;for(l=0,a=f.length;l<a;l++){var i=f[l],o=i.actionType,p=i.targetColumnId,s=i.sourceColumnId,u=new Decimal(o==="mul"?1:0),t;if(typeof o=="function")for(u=o(y),n=0,v=s.length;n<v;n++)t=[this.sectionType,s[n],h].join(ecount.constValue.gridDelimiter),this.__datas[t]?this.__datas[t].push(i):this.__datas[t]=[i];else for(n=0,v=s.length;n<a;n++)t=[this.sectionType,s[n],h].join(ecount.constValue.gridDelimiter),this.__datas[t]?this.__datas[t].push(i):this.__datas[t]=[i],e=this.dataColumn.getById(this.sectionType,s[n]),o==="sum"?u=u.plus(c[e.propertyName]||0):o==="mul"&&(u=u.times(c[e.propertyName]||0));e=this.dataColumn.getById(this.sectionType,p);c[e.propertyName]=u.toString()}}},destroyAll:function(){}};ecount.gridV2.data.util={singleArraySort:function(n,t){var i=ecount.grid.constValue;t||(t=function(n,t){var r=n[i.rowVariableNames.mergeStartIndex],u=t[i.rowVariableNames.mergeStartIndex];return r>u?1:r<u?-1:0});n.sort(t)},getDetailSectionType:function(n){var t=ecount.grid.constValue;switch(n){case t.sectionType.theadSlip:case t.sectionType.tbodySlip:case t.sectionType.tfootSlip:return t.sectionSeparateValue.slip;default:return t.sectionSeparateValue.line}},isDuplicateMerge:function(n,t,i,r){if(!n)return!1;var f=ecount.grid.constValue,u=t[0].length;return n.some(function(n){for(var t=parseInt(n[f.rowVariableNames.mergeStartIndex],10),c=parseInt(n[f.rowVariableNames.rowspanCount]||1,10),l=parseInt(n[f.rowVariableNames.colspanCount]||1,10),a=c-1,s=l-1,o=[],e=0,h=c;e<h;e++)t<u?e==0?o.push({from:t,to:t+s}):o.push({from:t+u,to:t+u+(s-i)}):e==0?o.push({from:t,to:t+s}):o.push({from:t+(u-i),to:t+(u-i)+(s- -i)});for(e=0,h=o.length;e<h;e++)if(o[e].from<=r&&o[e].to>=r)return!0})===!0},getMergeInfo:function(n,t){var i=ecount.grid.constValue,r=n[i.rowVariableNames.mergeStartIndex],u=Math.floor(r/t.columnRowsCountPerOneline),f=r%t.columnRowsCountPerOneline,e=n[i.rowVariableNames.rowspanCount]||1,o=e-1,s=n[i.rowVariableNames.colspanCount]||1,h=s-1;return{index:r,colIdx:f,rowIdx:u,rowspanCount:e,rowspanIndex:o,colspanCount:s,colspanIndex:h,boundary:{top:u,bottom:u+o,left:f,right:f+h}}},getDetailSectionTypes:function(n){var t=ecount.grid.constValue;return[t.sectionSeparateValue.tsubtot1slip,t.sectionSeparateValue.tsubtot1].contains(n)?[t.sectionSeparateValue.tsubtot1slip,t.sectionSeparateValue.tsubtot1]:[t.sectionSeparateValue.tsubtot2slip,t.sectionSeparateValue.tsubtot2].contains(n)?[t.sectionSeparateValue.tsubtot2slip,t.sectionSeparateValue.tsubtot2]:[t.sectionSeparateValue.tsubtot3slip,t.sectionSeparateValue.tsubtot3].contains(n)?[t.sectionSeparateValue.tsubtot3slip,t.sectionSeparateValue.tsubtot3]:[t.sectionSeparateValue.tsubtot4slip,t.sectionSeparateValue.tsubtot4].contains(n)?[t.sectionSeparateValue.tsubtot4slip,t.sectionSeparateValue.tsubtot4]:[t.sectionSeparateValue.tsubtot5slip,t.sectionSeparateValue.tsubtot5].contains(n)?[t.sectionSeparateValue.tsubtot5slip,t.sectionSeparateValue.tsubtot5]:[t.sectionSeparateValue.pagetotslip,t.sectionSeparateValue.pagetot].contains(n)?[t.sectionSeparateValue.pagetotslip,t.sectionSeparateValue.pagetot]:[t.sectionSeparateValue.subtot1slip,t.sectionSeparateValue.subtot1].contains(n)?[t.sectionSeparateValue.subtot1slip,t.sectionSeparateValue.subtot1]:[t.sectionSeparateValue.subtot2slip,t.sectionSeparateValue.subtot2].contains(n)?[t.sectionSeparateValue.subtot2slip,t.sectionSeparateValue.subtot2]:[t.sectionSeparateValue.subtot3slip,t.sectionSeparateValue.subtot3].contains(n)?[t.sectionSeparateValue.subtot3slip,t.sectionSeparateValue.subtot3]:[t.sectionSeparateValue.subtot4slip,t.sectionSeparateValue.subtot4].contains(n)?[t.sectionSeparateValue.subtot4slip,t.sectionSeparateValue.subtot4]:[t.sectionSeparateValue.subtot5slip,t.sectionSeparateValue.subtot5].contains(n)?[t.sectionSeparateValue.subtot5slip,t.sectionSeparateValue.subtot5]:[t.sectionSeparateValue.slip,t.sectionSeparateValue.line]}};ecount.gridV2.data.matrixState=function(){this.reset()};ecount.gridV2.data.matrixState.prototype={__data:null,__section:null,__stateHorizontal:null,__stateVertical:null,destroy:function(){this.__data=null;this.__section=null;this.__stateHorizontal=null;this.__stateVertical=null},getCell:function(n,t,i,r){this.setStructureInfo(n);var u;return t==this.constValue.matrixState.standardLine.row?u=this.__stateHorizontal[i]:t==this.constValue.matrixState.standardLine.column&&(u=this.__stateVertical[i]),u&&u[r]},getRowList:function(n,t,i){var r,u;if(i=i||{},r=[],this.setStructureInfo(n),t==this.constValue.matrixState.standardLine.row)for(u in this.__stateHorizontal)r=r.concat(this.getRow(n,t,u,i));else if(t==this.constValue.matrixState.standardLine.column)for(u in this.__stateVertical)r=r.concat(this.getRow(n,t,u,i));return r},getRow:function(n,t,i,r){var u,f,o,s,e;if(r=r||{},this.setStructureInfo(n),o=[],t==this.constValue.matrixState.standardLine.row)if(u=this.__stateHorizontal[i],r.stateInclude){f={rowItem:this.dataRow.getById(this.tbodyType,i),columnItems:[]};for(e in u)r.stateInclude.contains(u[e].state)&&(s={},s[e]=u[e],f.columnItems.push(s));f.columnItems.length>0&&o.push(f)}else o.push(u);else if(t==this.constValue.matrixState.standardLine.column)if(u=this.__stateVertical[i],r.stateInclude)for(e in u)r.stateInclude.contains(u[e].state)&&(f=o.find(function(n){return n.columnId==i&&n.columnState==u[e].state}),f||(f={columnId:i,columnState:null,rowItems:[]},o.push(f)),f.columnState=u[e].state,f.rowItems.push(this.dataRow.getById(this.tbodyType,e)));else o.push(u);return Object.clone(o)},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__api=this.__core.api;this.__setting=n.setting;$.extend(this,n.mixinOption);this.__events=this.__setting.eventsGet();this.renderingCount=0},init:function(n){return n=n||{},this.initGlobalValue(n),this},removeRow:function(n,t){return this.setStructureInfo(secitonType),delete this.__section[t],this},reset:function(){return this.__data={thead:{stateHorizontal:{},stateVertical:{}},tbody:{stateHorizontal:{},stateVertical:{}},tfooter:{stateHorizontal:{},stateVertical:{}}},this},serialize:function(){return Object.clone(this.__data)},setCell:function(n,t,i,r,u){return this.makeRow(n,t,i),t==this.constValue.matrixState.standardLine.row?this.__stateHorizontal[i][r]=u:t==this.constValue.matrixState.standardLine.column&&(this.__stateVertical[i][r]=u),this},makeRow:function(n,t,i){return this.setStructureInfo(n),t==this.constValue.matrixState.standardLine.row?this.__stateHorizontal[i]||(this.__stateHorizontal[i]={}):t==this.constValue.matrixState.standardLine.column&&(this.__stateVertical[i]||(this.__stateVertical[i]={})),this},setStructureInfo:function(n){return n=n.toLowerCase(),[this.theadType,this.tbodyType,this.tfootType].contains(n)&&(this.__section=this.__data[n],this.__stateHorizontal=this.__data[n].stateHorizontal,this.__stateVertical=this.__data[n].stateVertical),this}};ecount.gridV2.data.print=function(){};ecount.gridV2.data.print.prototype={setInitPrintPage:function(n){var t=this;n.filter(function(n,i){var u=i.getAttribute("print-page"),r;$(this).hasClass("wrapper-print")&&u&&(r=[],$(i).find(".grid-wrapper-print-content").filter(function(n,t){var i=t.getAttribute("groupid");i&&r.push(i)}),t.printPages.push({elementObj:i,groupIdList:r}),$(this).hasClass("hide")||(t.currentPrintPage=u))})},setPrintGridPage:function(n){if(typeof n=="number"&&this.printPages.length>0){var t=$(this.printPages[n-1].elementObj);t.length>0&&($(this.printPages[this.currentPrintPage-1].elementObj).addClass("hide"),t.removeClass("hide"),this.currentPrintPage=n)}},getPrintGridCurrentPage:function(){return this.currentPrintPage},getPrintGridPageInfo:function(n){if(typeof n=="number"&&this.printPages.length>0){var t=this.printPages[n-1];if(t)return{groupIdList:t.groupIdList}}return{}},setDetailGridList:function(n){this.detailGridIdList.push(n)},getDetailGridList:function(){return this.detailGridIdList},setPartitialRenderingPageCount:function(n){this.partitialRenderingPageCount=n},getPartitialRenderingPageCount:function(){return this.partitialRenderingPageCount},setLimitPartitialRowStartIndex:function(n){this.limitPartitialRowStartIndex=n},getLimitPartitialRowStartIndex:function(){return this.limitPartitialRowStartIndex},setLimitPartitialRowEndIndex:function(n){this.limitPartitialRowEndIndex=n},getLimitPartitialRowEndIndex:function(){return this.limitPartitialRowEndIndex},setIsSeperateRendering:function(n){this.isSeperateRendering=n},getIsSeperateRendering:function(){return this.isSeperateRendering},setTotalPage:function(n){this.totalPage=n},getTotalPage:function(){return this.totalPage},setCurrentPage:function(n){this.currentPage=n},getCurrentPage:function(){return this.currentPage},reset:function(){this.printPages=[];this.currentPrintPage=0;this.detailGridIdList=[];this.partitialRenderingPageCount=10;this.limitPartitialRowStartIndex=0;this.limitPartitialRowEndIndex=0;this.isSeperateRendering=!1;this.totalPage=0;this.currentPage=0},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__setting=n.setting},init:function(n){this.initGlobalValue(n);this.reset()},destroyAll:function(){}};ecount.class("ecount.gridV2.data.mergeSet","ecount.gridV2.merge",{divide:function(){},merge:function(){},extendBoundary:function(n,t,i,r,u){var p=this.dataColumn.getAll(t||n,this.constValue.returnType.multi),w=p[0].length,b={columnRowsCountPerOneline:w},a=this.dataRow.getViewDataRenderingTableMapAll(n),v,s,l,o,c,f,y,h,e;for(this.__core.boundary.set(u),v=this.dataColumn.getSystemColumnCount(n),s=r.top,l=r.bottom;s<=l;){if(o=a[s],o[r.left].detailSectionType!=i){s+=1;continue}for(c=!1,f=r.left,y=r.right;f<=y;)if(h=null,["MERGE"].contains(o[f].type)?h=o[f]:["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(o[f].type)&&(h=a[o[f].trIdx][o[f].columnIdx]),h){if(e=this.dataUtil.getMergeInfo(h,b),n!=this.theadType&&e.boundary.top>0&&(e.boundary.left+=v),c=this.__core.boundary.mergeBoundary({top:e.boundary.top,left:e.boundary.left,bottom:e.boundary.bottom,right:e.boundary.right}),c){u=this.__core.boundary.get();s=Math.min(u.top,r.top);l=Math.max(u.bottom,r.bottom);r.left=Math.min(u.left,r.left);r.right=Math.max(u.right,r.right);break}f+=e.colspanCount}else f+=1;c||(s+=1)}return this.__core.boundary.reset(),u},duplicateMergeSplit:function(n,t,i,r,u){var o=this.dataColumn.getAll(t,this.constValue.returnType.multi),f=o[0].length,s={columnRowsCountPerOneline:f},e=r.reduce(function(n,t){var i=this.dataUtil.getMergeInfo(t,s),r,e;return this.modules.boundary.inboundRow(u,i.boundary)?this.modules.boundary.inboundColumn(i.boundary,u)?(r=_.cloneDeep(t),e=_.cloneDeep(t),r[this.constValue.rowVariableNames.mergeStartIndex]=i.boundary.top*f+i.boundary.left,r[this.constValue.rowVariableNames.colspanCount]=u.left-i.boundary.left,e[this.constValue.rowVariableNames.mergeStartIndex]=i.boundary.top*f+(u.right+(u.right-u.left)),e[this.constValue.rowVariableNames.colspanCount]=i.boundary.right-u.right,n.push(r),n.push(e)):n.push(t):n.push(t),n}.bind(this),[]);e.splice(0,0,0,r.length);Array.prototype.splice.apply(r,e)},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__api=this.__core.api;this.__setting=n.setting;this.dataUtil=ecount.gridV2.data.util;$.extend(this,n.mixinOption);this.modules=ecount.gridV2.modules},init:function(n){this.initGlobalValue(n)}});ecount.class("ecount.gridV2.data.singleMergeSet","ecount.gridV2.data.mergeSet",{divide:function(){},merge:function(){},findBoundary:function(){},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__api=this.__core.api;this.__setting=n.setting;this.dataUtil=ecount.gridV2.data.util;$.extend(this,n.mixinOption);this.modules=ecount.gridV2.modules},init:function(n){this.initGlobalValue(n)}});ecount.class("ecount.gridV2.data.multiMergeSet","ecount.gridV2.data.mergeSet",{divide:function(){},merge:function(){},findBoundary:function(){},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__api=this.__core.api;this.__setting=n.setting;this.dataUtil=ecount.gridV2.data.util;$.extend(this,n.mixinOption);this.modules=ecount.gridV2.modules},init:function(n){this.initGlobalValue(n)}});ecount.gridV2.render.table=function(){};ecount.gridV2.render.table.prototype={drawnCount:0,paintedCount:0,renderMode:null,getTopTemplateHTML:function(n,t,i,r){r=r||{};var s=r.isDetail===!0,h=r.isFirstTable===!0,c=this.optFormOption.isAppearTopAreaOnlyFirst,l=r.isExecuteAlways===!0,a=this.optFormOption.useTop,o=this.optFormOption.headerHtmlCallback,f=this.optFormOption.topBottomHTML||{},e="",u="";return l?o?(u=o({areaKind:n,tableId:t,tableIndex:i}),u!=undefined&&u!=null&&(e="<div class='custom-top'>"+u+"<\/div>")):f[t]&&f[t][i]&&f[t][i][n]&&(u=f[t][i][n],e="<div>"+u+"<\/div>"):a&&(c?h&&(o?(u=o({areaKind:n,tableId:t,tableIndex:i}),u!=undefined&&u!=null&&(e="<div>"+u+"<\/div>")):f[t]&&f[t][i]&&f[t][i][n]&&(u=f[t][i][n],e="<div>"+u+"<\/div>")):o?(u=o({areaKind:n,tableId:t,tableIndex:i}),u!=undefined&&u!=null&&(e=s?u:"<div>"+u+"<\/div>")):f[t]&&f[t][i]&&f[t][i][n]&&(u=f[t][i][n],e=s?u:"<div>"+u+"<\/div>")),e},getBottomTemplateHTML:function(n,t,i,r){r=r||{};var s=r.isDetail===!0,h=r.isLastTable===!0,c=r.isExecuteAlways===!0,l=this.optFormOption.topOnly,y=this.optFormOption.useTop,p=this.optFormOption.useBody,a=this.optFormOption.useBottom,v=this.optFormOption.isAppearBottomAreaLast,o=this.optFormOption.footerHtmlCallback,f=this.optFormOption.topBottomHTML||{},e="",u="";return c?o?(u=o({areaKind:n,tableId:t,tableIndex:i}),u!=undefined&&u!=null&&(e="<div>"+u+"<\/div>")):f[t]&&f[t][i]&&f[t][i][n]&&(u=f[t][i][n],e="<div>"+u+"<\/div>"):!l&&a&&(v?h&&(o?(u=o({areaKind:n,tableId:t,tableIndex:i}),u!=undefined&&u!=null&&(e="<div>"+u+"<\/div>")):f[t]&&f[t][i]&&f[t][i][n]&&(u=f[t][i][n],e="<div>"+u+"<\/div>")):o?(u=o({areaKind:n,tableId:t,tableIndex:i}),u!=undefined&&u!=null&&(e=s?u:"<div>"+u+"<\/div>")):f[t]&&f[t][i]&&f[t][i][n]&&(u=f[t][i][n],e=s?u:"<div>"+u+"<\/div>")),e},getDetailTableList:function(){return this._detailTableList},renderDetailGrid:function(n){var r,u=this.getDetailTableList(),t=u[0],f=this.optCommon.containerId+ecount.grid.constValue.detailItemsForPrintContainerAfterfix+this._detailCount,i=document.createElement("DIV");i.setAttribute("data-gid",f);i.style.display="none";this.optLayout.contents.appendChild(i);this.initializeGridSettings(t);u.length>0&&(this._detailTableList=this._detailTableList.slice(1));t.setParentGridEvent(this.__events,n);r=ecount.gridV2(f,t);this._detailCount++;r.render()},initializeGridSettings:function(n){n.setCommonParentPageId(this.optCommon.parentEcPageId).setCommonEcPageId(this.optCommon.ecPageId).setAlreadyIncludedLayout(this.optCommon.alreadyIncludedLayout).setCommonWidgetInitializer(this.optCommon.widgetInitializer).setEventContainerObj(this.optLayout.bootstrapContainer).setCommonPopupLevel(this.optCommon.popupLevel).setCommonPopupID(this.optCommon.popupID).setLayoutLayer(this.optLayout.layer).setCommonParentGridId(this.optCommon.ecGridId)},setStructureInfo:function(n){this.optCommon.columnType==this.constValue.columnType.multi&&n==this.tfootType&&(n=this.tbodyType);this._renderingTableMap=this.__datas[n].renderingTableMap;this._tableMap=this.__datas[n].tableMap;this._trMap=this.__datas[n].trMap},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__data=this.__core.data;this.__setting=n.setting;$.extend(this,n.mixinOption);this.__events=this.__setting.eventsGet();this.generator=new ecount.gridV2.generator;this.__datas={thead:{renderingTableMap:[],tableMap:{},trMap:{},rawData:null},tbody:{renderingTableMap:[],tableMap:{},trMap:{},rawData:null},tfoot:{renderingTableMap:[],tableMap:{},trMap:{},rawData:null}};this._renderingTableMap=null;this._trMap=null;this._detailTableList=this.optFormOption.detailGridSettings||[];this._detailCount=0},init:function(n){return this.initGlobalValue(n),this.__core.drawCancel?(this.__events&&this.__events._triggerEvent(ecount.gridV2.renderEvent.cancelCompleted),{cancel:!0}):void 0},getDataLabel:function(n,t){switch(t){case this.constValue.checkBoxPropertyName:return this.constValue.checkBoxPropertyName;case this.constValue.rowMoveablePropertyName:return this.constValue.rowMoveablePropertyName;case this.constValue.rowNumberingPropertyName:return this.constValue.rowNumberingPropertyName}var i=this.__data.column.getById(n,t),r=this.__data.row.getByIndex(n,0);return ecount.gridV2.util.replaceEscapeString(r[i.propertyName]||"")},render:function(){var h=this.dataRow.getViewDataWidgetInstances(this.tbodyType),c=this.dataRow.getViewDataWidgetInstances(this.tfootType),f=_.merge({},c,h),e=this.dataRow._popover,o=this.dataRow._tooltip,l=this.__core.setting._getSettings(),a=this.makeTable(),v=this.dataColumn.getColGroup(),n={thead:this.dataRow.getViewDataMadeRows(this.theadType),tbody:this.dataRow.getViewDataMadeRows(this.tbodyType),tfoot:[]},i;if(this.dataRow.hasTfoot()&&(n[this.tfootType]=this.dataRow.getViewDataMadeRows(this.tfootType)),this.optCommon.renderType==this.constValue.gridRenderType.salaryPayrollBookList&&this.dataPrint){var y=this.dataPaging?this.dataPaging.getTotalRowCount():this.__core.data.row.getAll(this.tbodyType),s=this.dataPaging?this.dataPaging.getTotalRowCount():y.length,r=this.dataPrint.getLimitPartitialRowStartIndex(),t=this.dataPrint.getLimitPartitialRowEndIndex(),u=this.dataColumn.__datas[this.tbodyType].columnRows.length;t!=0&&(s>t?n.tbody=n.tbody.slice(r*u,t*u):s==t&&r!=0&&(n.tbody=n.tbody.slice(r*u)))}i=$.template(this.optCommon.templateType,{common:this.optCommon,form:this.optForm,formOption:this.optFormOption,table:a,trs:n,cols:v,oSetting:l,headerToolbar:this.optHeaderToolbar,footToolbar:this.optFootToolbar,isPagingUse:this.optPaging.use,isShowPageNo:this.isShowPageNo(),getTopTemplateHTML:this.getTopTemplateHTML.bind(this),getBottomTemplateHTML:this.getBottomTemplateHTML.bind(this)});this.optLayout.useEmailType&&(i+='<iframe name = "'+this.optCommon.ecGridId+'-emailTarget" class="hidden"><\/iframe>');this.optFormOption.detailGridSettings?this.renderDetailGrid({resultHTML:i,widgetInstances:f,popover:e,tooltip:o}):this.__events&&this.__events._triggerEvent(ecount.gridV2.renderEvent.renderCompleted,{resultHTML:i,widgetInstances:f,popover:e,tooltip:o});return},renderAll:function(){},renderRowCompleted:function(n,t,i){var u,r,f;this.setStructureInfo(n);i.arrTrs[n]=i.arrTrs[n]?t:i.arrTrs[n].concat(t);u=this.__data.column.getAll(n,this.constValue.returnType.multi);r=this.__data.row.getAll(n);r.length==0||u.length*r.length==i.arrTrs[n].length?this.paintedCount+=1:i.arrTrs[n].length==0;this.drawnCount==this.paintedCount&&(f=$.template(this.optCommon.templateType,{common:this.optCommon,form:this.optForm,formOption:this.optFormOption,table:i.oTable,trs:i.arrTrs,cols:i.arrCols,headerToolbar:this.optHeaderToolbar,footToolbar:this.optFootToolbar,isShowPageNo:this.isShowPageNo()}),this.paintedCount=0,this.__events&&this.__events._triggerEvent(ecount.gridV2.renderEvent.renderCompleted,{resultHTML:f,widgetInstances:i.widgetInstances,popover:i.popover,tooltip:i.tooltip}))},renderAddRows:function(n,t,i){this.setStructureInfo(n);this.renderMode="addRow";this.dataRow.setRenderMode(this.constValue.renderMode.addRow);var r;return r=this.dataRow.getViewDataMadeRowRange(n,t,i),{resultHTML:$.template(ecount.gridV2.render.template.row,{rows:r})}},renderCell:function(n,t,i,r){return this.dataRow.makeViewDataReplaceCell(n,t,i,r)},renderCellCompleted:function(){ecount.global.setTimeout(this.optCommon.ecPageId,function(){this.__events&&this.__events._triggerEvent(ecount.gridV2.cellEvent.renderCompleted)}.bind(this),0)},renderWidgetControl:function(n,t,i,r){return this.dataRow.view.makeViewDataCell(n,t,i,r)},makeTable:function(){var n={style:{},className:this.optCommon.defaultTableClass.clone(),attr:{id:this.constValue.tableIdPrefix+this.optCommon.ecGridUniqueId}};return this.optForm.version==this.constValue.formVersion.fourth&&(n.attr["data-controltype"]="ecount.grid"),this.setTableClassName(n),this.setTableStyle(n),this.optColumn.visible==!1&&(n.headerClassName=["hide"]),n},makeColgroup:function(n){for(var i=[],r=this.__data.column.getAll(n,this.constValue.returnType.multi),t=0,u=r[this.__core.maxColumnCountInRow].length;t<u;t++)i.push(this.makeColByIndex(n,t));return i},makeColByIndex:function(n,t){var i={attr:{},style:{},className:["colgroup-col"]},r=this.__data.column.getAll(n,this.constValue.returnType.multi);return i.attr["data-columnid"]=r[this.__core.maxColumnCountInRow][t].id,ecount.common.isTrue(r[this.__core.maxColumnCountInRow][t].isHideColumn)&&(i.className.contains("hide")||i.className.push("hide")),r[this.__core.maxColumnCountInRow][t].width&&(i.style.width=(t==0?r[this.__core.maxColumnCountInRow][t].width-1:r[this.__core.maxColumnCountInRow][t].width)+"px"),ecount.common.isTrue(r[this.__core.maxColumnCountInRow][t].isHide)&&(i.attr.className.contains(this.constValue.className.hide)||i.attr.className.push(this.constValue.className.hide)),i},removeTrMaps:function(n,t){var i,r,e,o,u,c;this.setStructureInfo(n);var f=this.dataRow.getAll(n),s,l=t.length,h=0;for(i=0,r=t.length;i<r;i++)s=f[this._trMap[t[i]].dataIdx],h+=this._trMap[t[i]].trIdx.length,delete this._trMap[t[i]];for(i=s[this.constValue.rowCountColumnPropertyName],r=f.length;i<r;i++)for(e=f[i][this.constValue.keyColumnPropertyName],this._trMap[e].dataIdx-=l,o=this._trMap[e].trIdx,u=0,c=o.length;u<c;u++)o[u]-=h},removeTrMap:function(n,t){var i,o,f,e,r,s;this.setStructureInfo(n);var u=this.dataRow.getAll(n),h=u[this._trMap[t].dataIdx],c=this._trMap[t].trIdx.length;for(i=h[this.constValue.rowCountColumnPropertyName],o=u.length;i<o;i++)for(f=u[i][this.constValue.keyColumnPropertyName],this._trMap[f].dataIdx-=1,e=this.__datas[n].trMap[f].trIdx,r=0,s=e.length;r<s;r++)e[r]-=c;delete this._trMap[t]},getCellInfo:function(n,t,i){this.setStructureInfo(n);var r=this.dataColumn.getById(n,t),o=this.dataRow.getById(n,i),s=this.optColumn[n].customCell&&this.optColumn[n].customCell[t.toLowerCase()],f,u=this._trMap[i][t].editableState,h=o[r.propertyName]||"",e=this.dataColumn.getConvertor(n,this.constValue.dataType.modeInput,t),c=e&&e(h,r)||h;return n==this.theadType?(u=typeof u=="boolean"?u:ecount.common.isTrue(r.columnOption.editableState),f=r.columnOption.controlType||"widget.label"):(u=typeof u=="boolean"?u:ecount.common.isTrue(r.editableState),f=r.controlType||"widet.label"),s&&(customCellResult=s(c,o,e,{dataType:r.dataType,isCheckZero:r.isCheckZero,isShowIfZero:r.isShowIfZero,amtCalc:r.amtCalc,thousandSeparator:r.thousandSeparator==null||r.thousandSeparator==undefined?ecount.config.company.THOU_SEPARATOR:r.thousandSeparator,decimalSeparator:r.decimalSeparator==null||r.decimalSeparator==undefined?ecount.config.company.DEC_SEPARATOR:r.decimalSeparator,isTodayTime:ecount.common.isTrue(r.isTodayTime)},{rowType:r.rowType||this.constValue.sectionSeparateValue.line})||{},f=customCellResult.controlType||f,(customCellResult.editableState!=undefined||customCellResult.editableState!=null)&&(u=typeof customCellResult.editableState=="boolean"?customCellResult.editableState:ecount.common.isTrue(customCellResult.editableState))),{controlType:f,editableState:u}},setTableClassName:function(n){var t=n.className,i=[this.constValue.gridRenderType.typeSpecTran,this.constValue.gridRenderType.salaryPayrollBookList,this.constValue.gridRenderType.salaryPrint,this.constValue.gridRenderType.salaryDetail];this.optDrag.use&&[this.constValue.formVersion.second,this.constValue.formVersion.third,this.constValue.formVersion.fourth].contains(this.optForm.version)&&t.push("gridDrag-group");(this.optForm.version==this.constValue.formVersion.third||this.optForm.version==this.constValue.formVersion.fourth)&&t.push("gridSelector-group");this.optTable.disableHover!==!0&&t.push("table-hover");this.optTable.restrictedTime==!0&&t.push("table-restricted-time");this.isNeedIEBugFixClass()&&t.push("ie-border-bug-fix");this.optCommon.isDynamicWidth&&t.push("table-layout-auto");i.contains(this.optCommon.renderType)?(t.push("table-padding-no-a","table-lh-normal"),!this.constValue.isIE_LT11||this.constValue.isIE_LT9?t.push("table-slip-body"):t.push("table-slip-body","table-border-darken"),this.optFormOption.useFormPrint===!0&&t.push("table-slip-template-paper-body")):this.optCommon.useTableResponsive!==!0||this.optCommon.useTreeStyle||t.push("table-responsive");this.optCommon.renderType==this.constValue.gridRenderType.barCode?n.className=["table","table-barcode"]:([this.constValue.gridType.editable,this.constValue.gridType.editableForm].contains(this.optCommon.gridType)?t.push("table-grid-input","table-listform"):this.optCommon.renderType!==this.constValue.gridRenderType.typeSpecTran&&t.push("table-list"),this.optDrag&&this.optDrag.use==!0&&[this.constValue.formVersion.second].contains(this.optForm.version)&&t.push("table-template-setup-preview"));this.optFormOption.borderRemoveAll==!0?t.push("table-border-no-a"):(this.optFormOption.borderRemoveVertical==!0&&t.push("table-border-no-v"),this.optFormOption.borderRemoveHorizontal==!0&&t.push("table-border-no-h"));this.optFormOption.useBody==!1&&t.push("hide");this.optColumn.autoAddColumnOnLastColumn===!0&&t.push("table-grid-input-th");this.optForm.version==this.constValue.formVersion.fourth&&t.push("noselection");this.optCommon.defaultTableRemoveClass.forEach(function(n){t.remove(function(t){return t==n})});this.optCommon.tbodyClassName&&(n.tbodyClassName=this.optCommon.tbodyClassName)},setTableStyle:function(n){if(!this.optCommon.isDynamicWidth){this.__core.freeSizeWidth?(n.style.width="100%",n.style["min-width"]=this.__data.column.getTotalWidth(!0)+"px",n.style["padding-right"]=this.optTable.freeWidthPaddingRight+"px"):n.style.width=this.__data.column.getTotalWidth(!0)+"px";var t=this.dataColumn.getByIndex(this.theadType,0);t&&t.TOP_BORD_USE_TF&&t.BTTM_BORD_USE_TF&&t.LEFT_BORD_USE_TF&&t.RGT_BORD_USE_TF&&(n.style["border-color"]=t.TOP_BORD_COLOR_CD||t.BTTM_BORD_COLOR_CD||t.LEFT_BORD_COLOR_CD||t.RGT_BORD_COLOR_CD,n.style["border-width"]=t.TOP_BORD_THICK||t.BTTM_BORD_THICK||t.LEFT_BORD_THICK||t.RGT_BORD_THICK,n.style["border-style"]=t.TOP_BORD_STYL_CD||t.BTTM_BORD_STYL_CD||t.LEFT_BORD_STYL_CD||t.RGT_BORD_STYL_CD);this.optFormOption.borderColor&&(n.style["border-color"]="#"+this.optFormOption.borderColor);this.optTable.marginLeft&&(n.style["margin-left"]=this.optTable.marginLeft+"px")}},getRenderingTableMap:function(n){return this.setStructureInfo(n),this._renderingTableMap},getTableMap:function(n){return this.setStructureInfo(n),this._tableMap},getRowMap:function(n){return this.setStructureInfo(n),this._trMap},getTableMapRow:function(n,t){this.setStructureInfo(n);var i=this._trMap[t],r=i&&i.tableIndex;return{rowInfo:i,tableIndex:r}},isNeedIEBugFixClass:function(){return ecount.grid.constValue.isIE_MS10&&!this.optFormOption.borderRemoveVertical&&!this.optFormOption.borderRemoveHorizontal&&!this.optFormOption.borderRemoveAll&&!this.optFormOption.borderRemoveLeftRight&&(this.optCommon.renderType==this.constValue.gridRenderType.typeSpecTran||this.optCommon.renderType==this.constValue.gridRenderType.typeSplitList||this.optCommon.renderType==this.constValue.gridRenderType.typeStatusList||this.optCommon.renderType==this.constValue.gridRenderType.typeDetailList||this.optCommon.renderType)?!0:!1},isShowPageNo:function(){return this.optFormOption.showPageNumber&&this.optFootToolbar.isShowPageNo&&[this.constValue.gridRenderType.typeStatusList,this.constValue.gridRenderType.typeSplitList].contains(this.optCommon.renderType)},destroyAll:function(){}};ecount.gridV2.render.div=function(){};ecount.gridV2.render.div.prototype={drawnCount:0,paintedCount:0,renderMode:null,getTopTemplateHTML:function(n,t,i,r){r=r||{};var s=r.isFirstTable===!0,h=this.optFormOption.isAppearTopAreaOnlyFirst,c=r.isExecuteAlways===!0,l=this.optFormOption.useTop,o=this.optFormOption.headerHtmlCallback,f=this.optFormOption.topBottomHTML||{},e="",u="";return c?o?(u=o({areaKind:n,tableId:t,tableIndex:i}),u!=undefined&&u!=null&&(e="<div class='custom-top'>"+u+"<\/div>")):f[t]&&f[t][i]&&f[t][i][n]&&(u=f[t][i][n],e="<div>"+u+"<\/div>"):l&&(h?s&&(o?(u=o({areaKind:n,tableId:t,tableIndex:i}),u!=undefined&&u!=null&&(e="<div>"+u+"<\/div>")):f[t]&&f[t][i]&&f[t][i][n]&&(u=f[t][i][n],e="<div>"+u+"<\/div>")):o?(u=o({areaKind:n,tableId:t,tableIndex:i}),u!=undefined&&u!=null&&(e="<div>"+u+"<\/div>")):f[t]&&f[t][i]&&f[t][i][n]&&(u=f[t][i][n],e="<div>"+u+"<\/div>")),e},getBottomTemplateHTML:function(n,t,i,r){r=r||{};var s=r.isLastTable===!0,h=r.isExecuteAlways===!0,c=this.optFormOption.topOnly,v=this.optFormOption.useTop,y=this.optFormOption.useBody,l=this.optFormOption.useBottom,a=this.optFormOption.isAppearBottomAreaLast,o=this.optFormOption.footerHtmlCallback,f=this.optFormOption.topBottomHTML||{},e="",u="";return h?o?(u=o({areaKind:n,tableId:t,tableIndex:i}),u!=undefined&&u!=null&&(e="<div>"+u+"<\/div>")):f[t]&&f[t][i]&&f[t][i][n]&&(u=f[t][i][n],e="<div>"+u+"<\/div>"):!c&&l&&(a?s&&(o?(u=o({areaKind:n,tableId:t,tableIndex:i}),u!=undefined&&u!=null&&(e="<div>"+u+"<\/div>")):f[t]&&f[t][i]&&f[t][i][n]&&(u=f[t][i][n],e="<div>"+u+"<\/div>")):o?(u=o({areaKind:n,tableId:t,tableIndex:i}),u!=undefined&&u!=null&&(e="<div>"+u+"<\/div>")):f[t]&&f[t][i]&&f[t][i][n]&&(u=f[t][i][n],e="<div>"+u+"<\/div>")),e},setStructureInfo:function(){},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__data=this.__core.data;this.__setting=n.setting;$.extend(this,n.mixinOption);this.__events=this.__setting.eventsGet();this.generator=new ecount.gridV2.generator;this.__datas={thead:{renderingTableMap:[],tableMap:{},trMap:{},rawData:null},tbody:{renderingTableMap:[],tableMap:{},trMap:{},rawData:null},tfoot:{renderingTableMap:[],tableMap:{},trMap:{},rawData:null}};this._renderingTableMap=null;this._trMap=null},init:function(n){return this.initGlobalValue(n),this.__core.drawCancel?(this.__events&&this.__events._triggerEvent(ecount.gridV2.renderEvent.cancelCompleted),{cancel:!0}):void 0},getDataLabel:function(n,t){switch(t){case this.constValue.checkBoxPropertyName:return this.constValue.checkBoxPropertyName;case this.constValue.rowMoveablePropertyName:return this.constValue.rowMoveablePropertyName;case this.constValue.rowNumberingPropertyName:return this.constValue.rowNumberingPropertyName}var i=this.__data.column.getById(n,t),r=this.__data.row.getByIndex(n,0);return ecount.gridV2.util.replaceEscapeString(r[i.propertyName]||"")},render:function(){var i=this.dataRow.getViewDataWidgetInstances(this.tbodyType),r=this.dataRow.getViewDataWidgetInstances(this.tfootType),u=_.merge({},r,i),f=this.dataRow._popover,e=this.dataRow._tooltip,o=this.__core.setting._getSettings(),s,h,t={thead:this.dataRow.getViewDataMadeRows(this.theadType),tbody:this.dataRow.getViewDataMadeRows(this.tbodyType),tfoot:[]},n;[this.constValue.gridType.editable,this.constValue.gridType.editableForm].contains(this.optCommon.gridType)&&this.optRow[this.tfootType].specialRowCount&&(t[this.tfootType]=this.dataRow.getViewDataMadeRows(this.tfootType));n=$.template(this.optCommon.templateType,{common:this.optCommon,form:this.optForm,formOption:this.optFormOption,table:s,trs:t,cols:h,oSetting:o,headerToolbar:this.optHeaderToolbar,footToolbar:this.optFootToolbar,isPagingUse:this.optPaging.use,isShowPageNo:this.isShowPageNo(),getTopTemplateHTML:this.getTopTemplateHTML.bind(this),getBottomTemplateHTML:this.getBottomTemplateHTML.bind(this)});this.optLayout.useEmailType&&(n+='<iframe name = "'+this.optCommon.ecGridId+'-emailTarget" class="hidden"><\/iframe>');this.__events&&this.__events._triggerEvent(ecount.gridV2.renderEvent.renderCompleted,{resultHTML:n,widgetInstances:u,popover:f,tooltip:e})},isShowPageNo:function(){return this.optFormOption.showPageNumber&&this.optFootToolbar.isShowPageNo&&[this.constValue.gridRenderType.typeStatusList,this.constValue.gridRenderType.typeSplitList].contains(this.optCommon.renderType)},destroyAll:function(){}};ecount.gridV2.render.template={horizontal:"<% var pageIndex = 0,common = obj.common,table = obj.table,cols = obj.cols,setting = obj.oSetting,trByThead = obj.trs.thead,trByTbody = obj.trs.tbody,trByTfoot = obj.trs.tfoot,headerToolbar = obj.headerToolbar,footToolbar = obj.footToolbar,currentTableId = common.ecGridId,tableIdx = 0,tbodyTrIdx = 0,tbodyTrLen = trByTbody.length,isShowPageNo = obj.isShowPageNo,isPagingUse = obj.isPagingUse,getTopTemplateHTML = obj.getTopTemplateHTML,getBottomTemplateHTML = obj.getBottomTemplateHTML;%><% while (tbodyTrIdx < tbodyTrLen) {if(currentTableId != trByTbody[tbodyTrIdx].option.tableId) {tableIdx = 0;}currentTableId = trByTbody[tbodyTrIdx].option.tableId;table.attr.index = tableIdx;pageIndex += 1;%>"+"<% if (tbodyTrIdx > 0) { %>"+"<div class='page-break'><\/div>"+"<% } %>"+"<% if (common.renderType == ecount.grid.constValue.gridRenderType.typeStatusList) { %>"+"<% if (headerToolbar && (headerToolbar.leftHTML != '' || headerToolbar.rightHTML != '') && !obj.formOption.headerHtmlCallback) { %>"+"<div class='wrapper-toolbar grid-top-html' "+"<% if (table.style['min-width']) { %>"+"style='min-width:<%=(parseInt(table.style['min-width'].replace('px', ''), 10) + 1) + 'px'%>;'"+"<% } else { %>"+"style='width:<%=(parseInt(table.style.width.toString().replace('px', ''), 10) + 1) + 'px'%>; '"+"<% } %>"+"><div class='pull-left' data-top='left'><\/div><div class='pull-right text-right' data-top='right'><\/div><\/div>"+"<% } %>"+"<% } else { %>"+"<% if ((headerToolbar && (headerToolbar.leftHTML != '' || headerToolbar.rightHTML != '')) || isPagingUse) { %>"+"<% var isHideToolbar = !(headerToolbar && (headerToolbar.leftHTML || headerToolbar.rightHTML)) ? 'hidden' : '';%>"+"<div class='wrapper-toolbar grid-top-html <%=isHideToolbar%>'"+"<% if (table.style['min-width']) { %>"+"style='min-width:<%=(parseInt(table.style['min-width'].replace('px', ''), 10) + 1) + 'px'%>;'"+"<% } else { %> "+"style='width:<%=(parseInt(table.style.width.toString().replace('px', ''), 10) + 1) + 'px'%>; '"+"<% } %>"+"><div class='pull-left'><\/div><div class='pull-right text-right'><\/div><\/div>"+"<% } %>"+"<% } %>"+"<%= getTopTemplateHTML('TOP', currentTableId, tableIdx.toString(), { totalWidth: Number(table.style.width.replace('px', '')), isExecuteAlways: true }) %>"+"<table id='grid-main' data-gridid='"+"<%=[ecount.grid.constValue.tableIdPrefix + currentTableId, tableIdx].join('-')%>"+"' "+"<%=ecount.gridV2.util.convertToAttribute(table.attr, ['id'])%>"+" "+"<%=ecount.gridV2.util.convertToClassName(table.className)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(table.style)%>"+">"+"<% if (cols.length > 0) { %>"+"<colgroup>"+"<% for (var i = 0, len = cols.length; i < len; i++) { %>"+"<col "+"<%=ecount.gridV2.util.convertToAttribute(cols[i].attr)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(cols[i].style)%>"+" "+"<%=ecount.gridV2.util.convertToClassName(cols[i].className)%>"+" />"+"<% } %>"+"<\/colgroup>"+"<% } %>"+"<% if (trByThead.length > 0) { %>"+"<% if(table.headerClassName) { %>"+"<thead "+"<%=ecount.gridV2.util.convertToClassName(table.headerClassName) %>"+">"+"<% } else { %>"+"<thead>"+"<% } %>"+"<% for (var rowIdx = 0, rowLen = trByThead.length; rowIdx < rowLen; rowIdx++) { %>"+'<% var trStyle = trByThead[rowIdx].style ? ecount.gridV2.util.convertToStyle(trByThead[rowIdx].style) : "";%>'+"<% var fixTitle = trByThead[rowIdx].cells.some(function(i) { %>"+"<% if (i && i.attr['data-fixtitle']) { %>"+"<% delete i.attr['data-fixtitle']; %>"+"<% return true; %>"+"<% } %>"+"<% }); %>"+"<% if (fixTitle) { %>"+"<% trByThead[rowIdx].attr['data-fixtitle'] = fixTitle %>"+"<% } %>"+"<tr "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].className) %>"+" "+"<%= trStyle%>"+">"+"<% for (var colIdx = 0, colLen = trByThead[rowIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByThead[rowIdx].cells[colIdx] && trByThead[rowIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByThead[rowIdx].cells[colIdx].style) %>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].cells[colIdx].attr) %>"+">"+"<%= trByThead[rowIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/thead>"+"<% } %>"+"<% if (tbodyTrLen > 0) { %>"+"<% if(table.tbodyClassName) { %>"+"<tbody "+"<%=ecount.gridV2.util.convertToClassName(table.tbodyClassName) %>"+">"+"<% } else { %>"+"<tbody> <% } %>"+"<% for (; tbodyTrIdx < tbodyTrLen; tbodyTrIdx++) {if (!trByTbody[tbodyTrIdx]) {continue;}%>"+'<% var trStyle = trByTbody[tbodyTrIdx].style ? ecount.gridV2.util.convertToStyle(trByTbody[tbodyTrIdx].style) : "";%>'+"<tr "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[tbodyTrIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[tbodyTrIdx].className) %>"+" "+"<%=trStyle%>"+">"+"<% for (var colIdx = 0, colLen = trByTbody[tbodyTrIdx].cells.length; colIdx < colLen; colIdx++) {%>"+"<% if (trByTbody[tbodyTrIdx].cells[colIdx] && trByTbody[tbodyTrIdx].cells[colIdx].cell) {%>"+"<"+"<%=trByTbody[tbodyTrIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[tbodyTrIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[tbodyTrIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTbody[tbodyTrIdx].cells[colIdx].style) %>"+">"+"<%= trByTbody[tbodyTrIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByTbody[tbodyTrIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/tbody>"+"<% } %>"+"<% if (trByTfoot.length > 0) { %>"+"<tfoot>"+"<% for (var rowIdx = 0, rowLen = trByTfoot.length; rowIdx < rowLen; rowIdx++) { %>"+'<% var trStyle = trByTfoot[rowIdx].style ? ecount.gridV2.util.convertToStyle(trByTfoot[rowIdx].style) : "";%>'+"<tr "+"<%= ecount.gridV2.util.convertToAttribute(trByTfoot[rowIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTfoot[rowIdx].className) %>"+" "+"<%=trStyle%>"+">"+"<% for (var colIdx = 0, colLen = trByTfoot[rowIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByTfoot[rowIdx].cells[colIdx] && trByTfoot[rowIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByTfoot[rowIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByTfoot[rowIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTfoot[rowIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTfoot[rowIdx].cells[colIdx].style) %>"+">"+"<%= trByTfoot[rowIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByTfoot[rowIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/tfoot>"+"<% } %>"+"<\/table>"+"<% if (footToolbar && (footToolbar.leftHTML != '' || footToolbar.rightHTML != '' || isShowPageNo) && !obj.formOption.footerHtmlCallback) { %>"+"<div class='wrapper-toolbar grid-bottom-html' "+"<% if (table.style['min-width']) { %>"+"style='min-width:<%=(parseInt(table.style['min-width'].replace('px', ''), 10) + 1) + 'px'%>;'"+"<% } else { %> "+"style='width:<%=(parseInt(table.style.width.toString().replace('px', ''), 10) + 1) + 'px'%>; '"+"<% } %>"+">"+"<% if (isShowPageNo) { %>"+"<div class='pull-left' data-bottom='left'>"+"<div class='inline-group toolbar-text'>[P.<%=pageIndex%>]<\/div>"+"<\/div><% } else { if (footToolbar.leftHTML != '') { %><div class='pull-left' data-bottom='left'>"+"<div class='inline-group toolbar-text'><%=footToolbar.leftHTML%><\/div>"+"<\/div><% } } if (footToolbar.rightHTML != '') { %><div class='pull-right text-right' data-bottom='right'>"+"<div class='inline-group toolbar-text'><%=footToolbar.rightHTML%><\/div>"+"<\/div>"+"<% } %>"+"<\/div>"+"<% } %>"+"<%= getBottomTemplateHTML('BOTTOM', currentTableId, tableIdx.toString(), { totalWidth: Number(table.style.width.replace('px', '')), isExecuteAlways: true }) %>"+"<% tableIdx++ %>"+"<% } %>",vertical:"",typeSpecTran:"<% var tableRenderEnd = false,halfLine = false,common = obj.common,formOption = obj.formOption,formData = obj.form.data,table = obj.table,cols = obj.cols,setting = obj.oSetting,trByThead = obj.trs.thead,trByTbody = obj.trs.tbody,trByTfoot = obj.trs.tfoot,headerToolbar = obj.headerToolbar,footToolbar = obj.footToolbar,tbodyTrIdx = 0,nextTableTrIdx = 0,currentTrIdx = 0,tbodyTrLen = trByTbody.length,topOnly = formOption.topOnly,useTop = formOption.useTop,useBody = formOption.useBody,useBottom = formOption.useBottom,isAppearTopAreaOnlyFirst = formOption.isAppearTopAreaOnlyFirst,appearTopAreaOnlyFirstAddBodyRowCount = formOption.appearTopAreaOnlyFirstAddBodyRowCount,isAppearBottomAreaLast = formOption.isAppearBottomAreaLast,appearBottomAreaLastAddBodyRowCount = formOption.appearBottomAreaLastAddBodyRowCount,useGridDuplicate = formOption.gridDuplicationCount == 1 ? false : true,skipSecondGridInPage = formOption.skipSecondGridInPage,useDetailGrid = obj.formOption.detailGridSettings,useOuterDetailGrid = obj.formOption.useOuterDetailGrid,useCutLine = !useDetailGrid && formOption.useCutLine,cutLinePosition = formOption.cutLinePosition,secondTablePosition = formOption.secondTablePosition,forceEmptyRow = false,isLastRow = false,gridDuplicated = false,duplicateString = '',isDuplicatedTable = false,eachTableCounter = 0,tableId = '',areaCommonId = '',detailTableId = '',showPageNumber = formData && formData.option && formData.option.showPageNumber,totalPage = '',currentTablePage = '',gridCountPerPage = obj.formOption.gridCountPerPage,gridDuplicationCount = formOption.gridDuplicationCount,currentDuplicationCount = 0,getTopTemplateHTML = obj.getTopTemplateHTML,getBottomTemplateHTML = obj.getBottomTemplateHTML;if(gridCountPerPage === 2 && skipSecondGridInPage === true) { gridCountPerPage = 1; }%><% while (!tableRenderEnd) {tableRenderEnd = true;if(!forceEmptyRow) {if(tableId != trByTbody[nextTableTrIdx].option.isFirstTable) { eachTableCounter = 0; }var bodyRowCount = formOption.bodyRowCount;var isFirstTable = trByTbody[nextTableTrIdx].option.isFirstTable;var isLastTable = trByTbody[nextTableTrIdx].option.isLastTable;var tableId = trByTbody[nextTableTrIdx].option.tableId;var tableIdx = trByTbody[nextTableTrIdx].option.tableIndex || '0';var duplicatedIdx = 0;var trStartIdx = tbodyTrIdx;var skipDuplicateGrid = false;var tableHide = trByTbody[nextTableTrIdx].option.tableHide;var newTableType = trByTbody[nextTableTrIdx].option.detailTableType;isDuplicatedTable = gridDuplicated;duplicateString = (currentDuplicationCount > 0 ? '_DUPLICATE' : '');var tempDuplicateString = (currentDuplicationCount % 2 == 1 ? '_DUPLICATE' : '');var topHTMLTargetName = \"TOP\" + tempDuplicateString;var bottomHTMLTargetName = \"BOTTOM\" + tempDuplicateString;var isDrawHeader = trByTbody[nextTableTrIdx].option['detailTableType'] !== 'useForDetail' || formOption.showHeaderWithDetail;areaCommonId = [tableId, eachTableCounter].join('∬');table.attr.index = tableIdx;if(useTop && isAppearTopAreaOnlyFirst && isFirstTable) { bodyRowCount += appearTopAreaOnlyFirstAddBodyRowCount || 0; }if(!topOnly && useBottom && isAppearBottomAreaLast && isLastTable) { bodyRowCount += appearBottomAreaLastAddBodyRowCount || 0; }} %><% if (newTableType != 'useForDetail' && !forceEmptyRow) {currentTablePage = trByTbody[nextTableTrIdx].option['currentPage'] || null;totalPage = trByTbody[nextTableTrIdx].option['totalPage'];renderRowCount = 0;if (halfLine === true) {if (useCutLine === true) { %>"+'<DIV class="print-half-line grid-print-cut-line" style="top: <%=cutLinePosition%>mm;"><\/DIV>'+"<% } } else { if( formOption.gridIndex > 1) { %><DIV class='page-break'><\/DIV><% }}if ((formOption.gridIndex - 1) % gridCountPerPage == 0) {var printPage = Math.floor((formOption.gridIndex - 1) / gridCountPerPage) + 1; %>"+'<div class="wrapper-print<%=(printPage == 1 ? \'\' : \' hide\')%>" container-type="wrapper-print" print-page="<%=printPage%>">'+"<% } %>"+'<div class="wrapper-print-content grid-wrapper-print-content" container-type="wrapper-print-content" groupid="<%=areaCommonId+duplicateString%>"'+"<% if(halfLine === true) { %>"+" style = 'top:"+"<%=secondTablePosition%>"+"mm;'>"+"<% } else {%>"+">"+"<% } %>"+"<% if (useTop) {%>"+"<%= getTopTemplateHTML(topHTMLTargetName, tableId, tableIdx, { isFirstTable: isFirstTable }) %>"+"<% }} %>"+"<% if (topOnly || !useBody || tableHide) { table.className.push('hide') }; %>"+"<table id='grid-main' data-gridid='"+"<%=[ecount.grid.constValue.tableIdPrefix + tableId, tableIdx].join('-')%>"+"' "+"<%=ecount.gridV2.util.convertToAttribute(table.attr, ['id'])%>"+" "+"<%=ecount.gridV2.util.convertToClassName(table.className)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(table.style)%>"+">"+"<% if (cols.length > 0) { %>"+"<colgroup>"+"<% for (var i = 0, len = cols.length; i < len; i++) { %>"+"<col "+"<%=ecount.gridV2.util.convertToAttribute(cols[i].attr)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(cols[i].style)%>"+" "+"<%=ecount.gridV2.util.convertToClassName(cols[i].className)%>"+" />"+"<% } %>"+"<\/colgroup>"+"<% } %>"+"<% if (trByThead.length > 0 && isDrawHeader == true && !forceEmptyRow) { %>"+"<% if(table.headerClassName) { %>"+"<thead "+"<%=ecount.gridV2.util.convertToClassName(table.headerClassName) %>"+">"+"<% } else { %>"+"<thead>"+"<% } %>"+"<% for (var rowIdx = 0, rowLen = trByThead.length; rowIdx < rowLen; rowIdx++) { %>"+"<tr "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByThead[rowIdx].style) %>"+">"+"<% for (var colIdx = 0, colLen = trByThead[rowIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByThead[rowIdx].cells[colIdx] && trByThead[rowIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByThead[rowIdx].cells[colIdx].style) %>"+">"+"<%= trByThead[rowIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/thead>"+"<% } %>"+"<% if (trByTbody[nextTableTrIdx] && trByTbody[nextTableTrIdx].option && trByTbody[nextTableTrIdx].option['detailTableType'] !== 'useForDetail' && !forceEmptyRow) { tbodyTrIdx = nextTableTrIdx; } %>"+"<% if (tbodyTrLen > 0) { %>"+"<% if(table.tbodyClassName) { %>"+"<tbody "+"<%=ecount.gridV2.util.convertToClassName(table.tbodyClassName) %>"+">"+"<% } else { %>"+"<tbody> <% } %>"+"<% currentTrIdx = nextTableTrIdx;for (var trIdx = nextTableTrIdx; trIdx < tbodyTrLen && trIdx < tbodyTrLen; trIdx++) {if (!trByTbody[trIdx]) {continue;}if (!forceEmptyRow) {nextTableTrIdx = trIdx;if (!useOuterDetailGrid && trByTbody[trIdx].option['detailTableType'] === 'cutFromDetail') {tableRenderEnd = false;if (trByTbody[trIdx].option['newTable'] === true) {trByTbody[trIdx].option['detailTableType'] = '';} else { trByTbody[trIdx].option['detailTableType'] = 'useForDetail'; break; }}if (!useOuterDetailGrid && trByTbody[trIdx].option['detailTableType'] === 'useForDetail' && detailTableId) {tableRenderEnd = false;break;}if (trByTbody[trIdx].option['newTable'] === true) {tableRenderEnd = false;if (useGridDuplicate === true) {if (gridDuplicated === false) {duplicatedIdx = nextTableTrIdx - 1; gridDuplicated = true; nextTableTrIdx = tbodyTrIdx; currentDuplicationCount++;} else if (currentDuplicationCount < gridDuplicationCount - 1) { duplicatedIdx = nextTableTrIdx - 1; nextTableTrIdx = tbodyTrIdx; currentDuplicationCount++;} else { gridDuplicated = false; trByTbody[trIdx].option['newTable'] = 'newTabled'; currentDuplicationCount = 0; }} else { trByTbody[trIdx].option['newTable'] = 'newTabled'; } break;} else if (trIdx === tbodyTrLen - 1) {if (useGridDuplicate === true) {duplicatedIdx = nextTableTrIdx;if (gridDuplicated === false) {nextTableTrIdx = tbodyTrIdx; tableRenderEnd = false; gridDuplicated = true; currentDuplicationCount++;}else if (currentDuplicationCount < gridDuplicationCount - 1) {nextTableTrIdx = tbodyTrIdx; tableRenderEnd = false; currentDuplicationCount++;} else { currentDuplicationCount = 0; }}}detailTableId = !useOuterDetailGrid && trByTbody[trIdx].option['detailTableId'];%><tr "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[trIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[trIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTbody[trIdx].style) %>"+">"+"<% for (var colIdx = 0, colLen = trByTbody[trIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByTbody[trIdx].cells[colIdx] && trByTbody[trIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByTbody[trIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[trIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[trIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTbody[trIdx].cells[colIdx].style) %>"+">"+"<%= trByTbody[trIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByTbody[trIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<% } %>"+"<\/tbody>"+"<% } %>"+"<% if(forceEmptyRow) {if (isLastRow) {tableRenderEnd = true; forceEmptyRow = false;} else { forceEmptyRow = false; tableRenderEnd = false;}} %><\/table><% if (detailTableId && !table.className.contains('hide')) {for (var detailIdx = 0; detailIdx < detailTableId.length; detailIdx++) { %><"+"<%=detailTableId[detailIdx]%>"+">"+"<% } %>"+"<% emptyTrLimit = bodyRowCount - (nextTableTrIdx == tbodyTrIdx ? 1 : nextTableTrIdx - tbodyTrIdx);if (emptyTrLimit > 0 && (tableRenderEnd || (trByTbody[nextTableTrIdx] && trByTbody[nextTableTrIdx].option && trByTbody[nextTableTrIdx].option['newTable']) == 'newTabled')) {forceEmptyRow = true;if (tableRenderEnd) { tableRenderEnd = false; isLastRow = true; }}detailTableId = null;}if (!forceEmptyRow && (tableRenderEnd || (trByTbody[nextTableTrIdx] && trByTbody[nextTableTrIdx].option && trByTbody[nextTableTrIdx].option['detailTableType'] !== 'useForDetail'))) {if (!topOnly && useBottom) {var isExcuteCallback = false;if (trByTbody[nextTableTrIdx]) {if (useGridDuplicate === true && gridDuplicated === true) { isExcuteCallback = trByTbody[duplicatedIdx].option.isLastTable; }else if (trByTbody[nextTableTrIdx].option['newTable'] == 'newTabled' && !tableRenderEnd) {isExcuteCallback = trByTbody[nextTableTrIdx - 1].option['isLastTable']} else { isExcuteCallback = trByTbody[nextTableTrIdx].option.isLastTable } %>"+"<%= getBottomTemplateHTML(bottomHTMLTargetName, tableId, tableIdx, { isLastTable: isExcuteCallback })%>"+"<% if(showPageNumber && totalPage && totalPage > 1) { %>"+"<div class='print-contents-page-number' style='width:650px;'>[ "+"<%=currentTablePage%>"+" / "+"<%=trByTbody[nextTableTrIdx].option.totalPage%>"+" ]<\/div><% }}} %><% if (totalPage == currentTablePage && useOuterDetailGrid) {var detailTableIdData = trByTbody.find(function (v, i, me) {return v.option.detailTableId && trByTbody[currentTrIdx].option.tableId == v.option.tableId;}), detailTableIdList = detailTableIdData ? detailTableIdData.option.detailTableId : [];for (var detailIdx = 0; detailIdx < detailTableIdList.length; detailIdx++) { %><"+"<%=detailTableIdList[detailIdx]%>"+">"+"<% } %>"+"<% } %>"+"<\/div><% formOption.gridIndex++;if (gridCountPerPage == 2) {halfLine = !halfLine;if (halfLine && tableRenderEnd && useCutLine === true) { %>"+'<DIV class="print-half-line grid-print-cut-line" style="top: <%=cutLinePosition%>mm;"><\/DIV>'+"<% }if (!halfLine || tableRenderEnd) { %><\/div><% }} else { %><\/div><% }}} %>",typeDetailList:'<% var gridIndex = 0,common = obj.common,formData = obj.form.data,tableId = obj.tableId,table = obj.table,cols = obj.cols,setting = obj.oSetting,useTop = formOption.useTop,useBottom = formOption.useBottom,trByThead = obj.trs.thead,trByTbody = obj.trs.tbody,trByTfoot = obj.trs.tfoot,headerToolbar = obj.headerToolbar,getTopTemplateHTML = obj.getTopTemplateHTML,getBottomTemplateHTML = obj.getBottomTemplateHTML;footToolbar = obj.footToolbar,tbodyTrIdx = 0,tbodyTrLen = trByTbody.length,rowCountPerTable = formData.option.bodyRowCnt,useTableDuplicate = formOption.gridDuplicationCount == 1 ? false : true,useCutLine = formData.option.useCutLine,cutLinePosition = formData.option.dotLineHeight,secondTablePosition = formData.option.tMarginTwo,gridCountPerPage = formData.option.signYn == \'0\' ? 2 : 1;%><% while (tbodyTrIdx < tbodyTrLen) {var tableId = trByTbody[tbodyTrIdx].option.tableId || \'\';var tableIdx = trByTbody[tbodyTrIdx].option.tableIndex || \'0\';var topHTMLTargetName = (gridIndex % gridCountPerPage == 0 && useTableDuplicate) ? "TOP_DUPLICATE" : "TOP";var bottomHTMLTargetName = (gridIndex % gridCountPerPage == 0 && useTableDuplicate) ? "BOTTOM_DUPLICATE" : "BOTTOM";var trStartIdx = tbodyTrIdx;table.attr.index = tableIdx;gridIndex += 1;%>'+"<% if (useTop) { %>"+'<div data-detailtableid="<%=tableId%>" data-targetname="<%=topHTMLTargetName%>">'+"<%= getTopTemplateHTML(topHTMLTargetName, tableId, tableIdx, { isDetail: true }) %>"+"<\/div>"+"<% } %>"+'<div class="wrapper-floating-table" style="width:1294px;"><table id=\'grid-main\' data-gridid=\''+"<%=[ecount.grid.constValue.tableIdPrefix + tableId, tableIdx].join('-')%>"+"' "+"<%=ecount.gridV2.util.convertToAttribute(table.attr, ['id'])%>"+" "+"<%=ecount.gridV2.util.convertToClassName(table.className)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(table.style)%>"+" "+'data-detailtableid="<%=tableId%>">'+"<% if (cols.length > 0) { %>"+"<colgroup>"+"<% for (var i = 0, len = cols.length; i < len; i++) { %>"+"<col "+"<%=ecount.gridV2.util.convertToAttribute(cols[i].attr)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(cols[i].style)%>"+" "+"<%=ecount.gridV2.util.convertToClassName(cols[i].className)%>"+" />"+"<% } %>"+"<\/colgroup>"+"<% } %>"+"<% if (trByThead.length > 0) { %>"+"<% if(table.headerClassName) { %>"+"<thead "+"<%=ecount.gridV2.util.convertToClassName(table.headerClassName) %>"+">"+"<% } else { %>"+"<thead>"+"<% } %>"+"<% for (var rowIdx = 0, rowLen = trByThead.length; rowIdx < rowLen; rowIdx++) { %>"+"<tr "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByThead[rowIdx].style) %>"+">"+"<% for (var colIdx = 0, colLen = trByThead[rowIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByThead[rowIdx].cells[colIdx] && trByThead[rowIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByThead[rowIdx].cells[colIdx].style) %>"+">"+"<%= trByThead[rowIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/thead>"+"<% } %>"+"<% if (tbodyTrLen > 0) { %>"+"<% if(table.tbodyClassName) { %>"+"<tbody "+"<%=ecount.gridV2.util.convertToClassName(table.tbodyClassName) %>"+">"+"<% } else { %>"+"<tbody> <% } %>"+"<% for (; tbodyTrIdx < tbodyTrLen; tbodyTrIdx++) { if (!trByTbody[tbodyTrIdx]) {continue; } if (trByTbody[tbodyTrIdx].option.isNewTable) { %>"+"<% trByTbody[tbodyTrIdx].option.isNewTable = false; break; %>"+"<% } %>"+"<tr "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[tbodyTrIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[tbodyTrIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTbody[tbodyTrIdx].style) %>"+">"+"<% for (var colIdx = 0, colLen = trByTbody[tbodyTrIdx].cells.length; colIdx < colLen; colIdx++) {%>"+"<% if (trByTbody[tbodyTrIdx].cells[colIdx] && trByTbody[tbodyTrIdx].cells[colIdx].cell) {%>"+"<"+"<%=trByTbody[tbodyTrIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[tbodyTrIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[tbodyTrIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTbody[tbodyTrIdx].cells[colIdx].style) %>"+">"+"<%= trByTbody[tbodyTrIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByTbody[tbodyTrIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/tbody>"+"<% } %>"+"<% if (trByTfoot.length > 0) { %>"+"<tfoot>"+"<% for (var rowIdx = 0, rowLen = trByTfoot.length; rowIdx < rowLen; rowIdx++) { %>"+"<tr "+"<%= ecount.gridV2.util.convertToAttribute(trByTfoot[rowIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTfoot[rowIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTfoot[rowIdx].style) %>"+">"+"<% for (var colIdx = 0, colLen = trByTfoot[rowIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByTfoot[rowIdx].cells[colIdx] && trByTfoot[rowIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByTfoot[rowIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByTfoot[rowIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTfoot[rowIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTfoot[rowIdx].cells[colIdx].style) %>"+">"+"<%= trByTfoot[rowIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByTfoot[rowIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/tfoot>"+"<% } %>"+"<\/table><\/div>"+"<% if (useBottom) { %>"+'<div data-detailtableid="<%=tableId%>" data-targetname="<%=bottomHTMLTargetName%>">'+"<%= getBottomTemplateHTML(bottomHTMLTargetName, tableId, tableIdx, { isDetail: true }) %>"+"<\/div>"+"<% } %>"+"<% } %>",typeSplitList:"<% var tableRenderEnd = false,halfLine = false,common = obj.common,formOption = obj.formOption,formData = obj.form.data,table = obj.table,cols = obj.cols,setting = obj.oSetting,trByThead = obj.trs.thead,trByTbody = obj.trs.tbody,trByTfoot = obj.trs.tfoot,headerToolbar = obj.headerToolbar,footToolbar = obj.footToolbar,tbodyTrIdx = 0,nextTableTrIdx = 0,currentPage = 1,tbodyTrLen = trByTbody.length,topOnly = formOption.topOnly,useTop = formOption.useTop,useBody = formOption.useBody,useBottom = formOption.useBottom,isPagingUse = obj.isPagingUse,getTopTemplateHTML = obj.getTopTemplateHTML,getBottomTemplateHTML = obj.getBottomTemplateHTML;%><% while (!tableRenderEnd) {tableRenderEnd = true;var bodyRowCount = formOption.bodyRowCount;var tableId = trByTbody[nextTableTrIdx].option.tableId;var tableIdx = trByTbody[nextTableTrIdx].option.tableIndex || '0';var topHTMLTargetName = 'TOP';var bottomHTMLTargetName = 'BOTTOM';var trStartIdx = tbodyTrIdx;table.attr.index = tableIdx;var headerCallbackHTML = ''; %>"+"<% if( formOption.gridIndex > 1) { %>"+"<DIV class='page-break'><\/DIV>"+"<% } %>"+"<% if (formOption.headerHtmlCallback || formOption.topBottomHTML) {headerCallbackHTML = getTopTemplateHTML(topHTMLTargetName, tableId, (formOption.gridIndex - 1).toString(), { isExecuteAlways: true }); %>"+"<%= headerCallbackHTML %>"+"<% } %>"+"<% if (headerToolbar && (headerToolbar.leftHTML != '' || headerToolbar.rightHTML != '') && !formOption.headerHtmlCallback && !headerCallbackHTML) { %>"+"<div class='wrapper-toolbar grid-top-html' "+"<% if (table.style['min-width']) { %>"+"style='min-width:<%=(parseInt(table.style['min-width'].replace('px', ''), 10) + 1) + 'px'%>;'"+"<% } else { %> "+"style='width:<%=(parseInt(table.style.width.toString().replace('px', ''), 10) + 1) + 'px'%>; '"+"<% } %> "+"><div class='pull-left' data-top='left'><\/div><div class='pull-right text-right' data-top='right'><\/div><\/div>"+"<% } else if ((( (headerToolbar && (headerToolbar.leftHTML != '' || headerToolbar.rightHTML != '')) || isPagingUse) && !headerCallbackHTML)) {%>"+"<% var isHideToolbar = !(headerToolbar && (headerToolbar.leftHTML || headerToolbar.rightHTML)) ? 'hidden' : '';%>"+"<div class='wrapper-toolbar grid-top-html <%=isHideToolbar%>' "+"<% if (table.style['min-width']) { %>"+"style='min-width:<%=(parseInt(table.style['min-width'].replace('px', ''), 10) + 1) + 'px'%>;'"+"<% } else { %> "+"style='width:<%=(parseInt(table.style.width.toString().replace('px', ''), 10) + 1) + 'px'%>; '"+"<% } %> "+"><div class='pull-left'><\/div><div class='pull-right text-right'><\/div><\/div>"+"<% } %>"+"<table id='grid-main' data-current-page='"+"<%=currentPage%>"+"' data-gridid='"+"<%=[ecount.grid.constValue.tableIdPrefix + tableId, tableIdx].join('-').escapeHTML(true)%>"+"' "+"<%=ecount.gridV2.util.convertToAttribute(table.attr, ['id'])%>"+" "+"<%=ecount.gridV2.util.convertToClassName(table.className)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(table.style)%>"+">"+"<% if (cols.length > 0) { %>"+"<colgroup>"+"<% for (var i = 0, len = cols.length; i < len; i++) { %>"+"<col "+"<%=ecount.gridV2.util.convertToAttribute(cols[i].attr)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(cols[i].style)%>"+" "+"<%=ecount.gridV2.util.convertToClassName(cols[i].className)%>"+" />"+"<% } %>"+"<\/colgroup>"+"<% } %>"+"<% if (trByThead.length > 0) { %>"+"<% if(table.headerClassName) { %>"+"<thead "+"<%=ecount.gridV2.util.convertToClassName(table.headerClassName) %>"+">"+"<% } else { %>"+"<thead>"+"<% } %>"+"<% for (var rowIdx = 0, rowLen = trByThead.length; rowIdx < rowLen; rowIdx++) { %>"+"<tr "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByThead[rowIdx].style) %>"+">"+"<% for (var colIdx = 0, colLen = trByThead[rowIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByThead[rowIdx].cells[colIdx] && trByThead[rowIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByThead[rowIdx].cells[colIdx].style) %>"+">"+"<%= trByThead[rowIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/thead>"+"<% } %>"+"<% tbodyTrIdx = nextTableTrIdx; %>"+"<% if (tbodyTrLen > 0) { %>"+"<% if(table.tbodyClassName) { %>"+"<tbody "+"<%=ecount.gridV2.util.convertToClassName(table.tbodyClassName) %>"+">"+"<% } else { %>"+"<tbody> <% } %>"+"<% for (var trIdx = nextTableTrIdx; trIdx < tbodyTrLen && trIdx < tbodyTrLen; trIdx++) {if (!trByTbody[trIdx]) {continue;}nextTableTrIdx = trIdx;if (trByTbody[trIdx].option['newTable'] === true) {tableRenderEnd = false;trByTbody[trIdx].option['newTable'] = 'newTabled';  break;} %><tr "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[trIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[trIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTbody[trIdx].style) %>"+">"+"<% for (var colIdx = 0, colLen = trByTbody[trIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByTbody[trIdx].cells[colIdx] && trByTbody[trIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByTbody[trIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[trIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[trIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTbody[trIdx].cells[colIdx].style) %>"+">"+"<%= trByTbody[trIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByTbody[trIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/tbody>"+"<% } %>"+"<% if (trByTfoot.length > 0) { %>"+"<tfoot>"+"<% for (var rowIdx = 0, rowLen = trByTfoot.length; rowIdx < rowLen; rowIdx++) { %>"+"<tr "+"<%= ecount.gridV2.util.convertToAttribute(trByTfoot[rowIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTfoot[rowIdx].className) %>"+">"+"<% for (var colIdx = 0, colLen = trByTfoot[rowIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByTfoot[rowIdx].cells[colIdx] && trByTfoot[rowIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByTfoot[rowIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByTfoot[rowIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTfoot[rowIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTfoot[rowIdx].cells[colIdx].style) %>"+">"+"<%= trByTfoot[rowIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByTfoot[rowIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/tfoot>"+"<% } %>"+"<\/table>"+"<% if (footToolbar && (footToolbar.leftHTML != '' || footToolbar.rightHTML != '' || isShowPageNo) && !obj.formOption.footerHtmlCallback) { %>"+"<div class='wrapper-toolbar grid-bottom-html' "+"<% if (table.style['min-width']) { %>"+"style='min-width:<%=(parseInt(table.style['min-width'].replace('px', ''), 10) + 1) + 'px'%>;'"+"<% } else { %>"+"style='width:<%=(parseInt(table.style.width.toString().replace('px', ''), 10) + 1) + 'px'%>; '"+"<% } %>"+">"+"<% if (isShowPageNo) { %>"+"<div class='pull-left' data-bottom='left'>"+"<div class='inline-group toolbar-text'>[P.<%=formOption.gridIndex%>]<\/div>"+"<\/div><% }else { if (footToolbar.leftHTML != '') { %><div class='pull-left' data-bottom='left'>"+"<div class='inline-group toolbar-text'><%=footToolbar.leftHTML%><\/div>"+"<\/div><% }}if (footToolbar.rightHTML != '') { %><div class='pull-right text-right' data-bottom='right'>"+"<div class='inline-group toolbar-text'><%=footToolbar.rightHTML%><\/div>"+"<\/div>"+"<% } %>"+"<\/div>"+"<% } %>"+"<%= getBottomTemplateHTML(bottomHTMLTargetName, tableId, (formOption.gridIndex - 1).toString(), { isExecuteAlways: true }) %>"+"<% formOption.gridIndex++; currentPage++; %>"+"<% } %>",imageListTypeGrid:"<% var pageIndex = 0,common = obj.common,table = obj.table,cols = obj.cols,setting = obj.oSetting,trByThead = obj.trs.thead,trByTbody = obj.trs.tbody,trByTfoot = obj.trs.tfoot,headerToolbar = obj.headerToolbar,footToolbar = obj.footToolbar,tableIdx = trByTbody[0].option.tableIndex,currentTableId = trByTbody[0].option.tableId,tbodyTrIdx = 0,tbodyTrLen = trByTbody.length;%>"+"<% if (headerToolbar && (headerToolbar.leftHTML != '' || headerToolbar.rightHTML != '') && !obj.formOption.headerHtmlCallback) { %>"+"<div class='wrapper-toolbar grid-top-html' "+"<% if (table.style['min-width']) { %>"+"style='min-width:<%=(parseInt(table.style['min-width'].replace('px', ''), 10) + 1) + 'px'%>;'"+"<% } else { %>"+"style='width:<%=(parseInt(table.style.width.toString().replace('px', ''), 10) + 1) + 'px'%>; '"+"<% } %>"+"><div class='pull-left' data-top='left'><\/div><div class='pull-right text-right' data-top='right'><\/div><\/div>"+"<% } %>"+"<% if (obj.formOption.headerHtmlCallback) { %>"+"<%=formOption.headerHtmlCallback({ areaKind: 'TOP', tableId: currentTableId, tableIndex: tableIdx.toString(), totalWidth: Number(table.style.width.replace('px', '')) }) %><\/div>"+"<% } %>"+"<% if (tbodyTrLen > 0) { %>"+'<ul class="thumbnail-list" data-layouttype="grid" id=\'grid-main\' data-gridid=\''+"<%=[ecount.grid.constValue.tableIdPrefix + currentTableId, tableIdx].join('-')%>"+"'><% for (; tbodyTrIdx < tbodyTrLen; tbodyTrIdx++) {if (!trByTbody[tbodyTrIdx]) {continue;}for (var colIdx = 0, colLen = trByTbody[tbodyTrIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByTbody[tbodyTrIdx].cells[colIdx] && trByTbody[tbodyTrIdx].cells[colIdx].cell) { %>"+"<li "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[tbodyTrIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[tbodyTrIdx].cells[colIdx].className) %>"+">"+"<%= trByTbody[tbodyTrIdx].cells[colIdx].cell.data %>"+"<\/li>"+"<% } %>"+"<% } %>"+"<% } %>"+"<\/ul>"+"<% } %>"+"<% if (footToolbar && (footToolbar.leftHTML != '' || footToolbar.rightHTML != '' || isShowPageNo) && !obj.formOption.footerHtmlCallback) { %>"+"<div class='wrapper-toolbar grid-bottom-html' "+"<% if (table.style['min-width']) { %>"+"style='min-width:<%=(parseInt(table.style['min-width'].replace('px', ''), 10) + 1) + 'px'%>;'"+"<% } else { %>"+"style='width:<%=(parseInt(table.style.width.toString().replace('px', ''), 10) + 1) + 'px'%>; '"+"<% } %>"+">"+"<% if (isShowPageNo) { %>"+"<div class='pull-left' data-bottom='left'>"+"<div class='inline-group toolbar-text'>[P.<%=pageIndex%>]<\/div>"+"<\/div><% }else {if (footToolbar.leftHTML != '') { %><div class='pull-left' data-bottom='left'>"+"<div class='inline-group toolbar-text'><%=footToolbar.leftHTML%><\/div>"+"<\/div><% }}if (footToolbar.rightHTML != '') { %><div class='pull-right text-right' data-bottom='right'>"+"<div class='inline-group toolbar-text'><%=footToolbar.rightHTML%><\/div>"+"<\/div>"+"<% } %>"+"<\/div>"+"<% } %>"+"<% if (obj.formOption.footerHtmlCallback) { %>"+"<%=formOption.footerHtmlCallback({ areaKind: 'BOTTOM', tableId: currentTableId, tableIndex: tableIdx.toString(), totalWidth: Number(table.style.width.replace('px', '')) }) %><\/div>"+"<% } %>",salaryPayrollBookList:"<% var tableRenderEnd = false,halfLine = false,common = obj.common,formOption = obj.formOption,formData = obj.form.data,table = obj.table,cols = obj.cols,setting = obj.oSetting,trByThead = obj.trs.thead,trByTbody = obj.trs.tbody,trByTfoot = obj.trs.tfoot,headerToolbar = obj.headerToolbar,footToolbar = obj.footToolbar,tbodyTrIdx = 0,nextTableTrIdx = 0,tbodyTrLen = trByTbody.length,topOnly = formOption.topOnly,useTop = formOption.useTop,useBody = formOption.useBody,useBottom = formOption.useBottom,isAppearTopAreaOnlyFirst = formOption.isAppearTopAreaOnlyFirst,appearTopAreaOnlyFirstAddBodyRowCount = formOption.appearTopAreaOnlyFirstAddBodyRowCount,isAppearBottomAreaLast = formOption.isAppearBottomAreaLast,appearBottomAreaLastAddBodyRowCount = formOption.appearBottomAreaLastAddBodyRowCount,useGridDuplicate = formOption.gridDuplicationCount == 1 ? false : true,skipSecondGridInPage = formOption.skipSecondGridInPage,useDetailGrid = obj.formOption.detailGridSettings,useCutLine = !useDetailGrid && formOption.useCutLine,cutLinePosition = formOption.cutLinePosition,secondTablePosition = formOption.secondTablePosition,forceEmptyRow = false,isLastRow = false,gridDuplicated = false,showPageNumber = formData && formData.option && formData.option.showPageNumber,totalPage = '',duplicateString = '',isDuplicatedTable = false,eachTableCounter = 0,tableId = '',areaCommonId = '',currentTablePage = '',gridCountPerPage = obj.formOption.gridCountPerPage,gridDuplicationCount = formOption.gridDuplicationCount,currentDuplicationCount = 0,getTopTemplateHTML = obj.getTopTemplateHTML,getBottomTemplateHTML = obj.getBottomTemplateHTML;if(gridCountPerPage === 2 && skipSecondGridInPage === true) { gridCountPerPage = 1; }%><% while (!tableRenderEnd) {if(tableId != trByTbody[nextTableTrIdx].option.isFirstTable) { eachTableCounter = 0; }tableRenderEnd = true;if(!forceEmptyRow) {var bodyRowCount = formOption.bodyRowCount;var isFirstTable = trByTbody[nextTableTrIdx].option.isFirstTable;var isLastTable = trByTbody[nextTableTrIdx].option.isLastTable;var tableId = trByTbody[nextTableTrIdx].option.tableId;var tableIdx = trByTbody[nextTableTrIdx].option.tableIndex || '0';var duplicatedIdx = 0; var trStartIdx = tbodyTrIdx;var skipDuplicateGrid = false;var tableHide = trByTbody[nextTableTrIdx].option.tableHide;var newTableType = trByTbody[nextTableTrIdx].option.detailTableType;isDuplicatedTable = gridDuplicated;duplicateString = (currentDuplicationCount % 2 == 1 ? '_DUPLICATE' : '');var topHTMLTargetName = \"TOP\" + duplicateString;var bottomHTMLTargetName = \"BOTTOM\" + duplicateString;areaCommonId = [tableId, eachTableCounter].join('∬');table.attr.index = tableIdx;if(useTop && isAppearTopAreaOnlyFirst && isFirstTable) { bodyRowCount += appearTopAreaOnlyFirstAddBodyRowCount || 0; }if(!topOnly && useBottom && isAppearBottomAreaLast && isLastTable) { bodyRowCount += appearBottomAreaLastAddBodyRowCount || 0; }} %><% if (newTableType != 'useForDetail' && !forceEmptyRow) {currentTablePage = trByTbody[nextTableTrIdx].option['currentPage'] || null;totalPage = trByTbody[nextTableTrIdx].option['totalPage'];renderRowCount = 0;if (halfLine === true) {if (useCutLine === true) { %>"+'<DIV class="print-half-line grid-print-cut-line" style="top: <%=cutLinePosition%>mm;"><\/DIV>'+"<% }} else {if( formOption.gridIndex > 1) { %><DIV class='page-break'><\/DIV><% }}if ((formOption.gridIndex - 1) % gridCountPerPage == 0) {var printPage = Math.floor((formOption.gridIndex - 1) / gridCountPerPage) + 1; %>"+'<div class="wrapper-print" container-type="wrapper-print" print-page="<%=printPage%>">'+"<% } %>"+'<div class="wrapper-print-content grid-wrapper-print-content" container-type="wrapper-print-content" groupid="<%=areaCommonId+duplicateString%>"'+"<% if(halfLine === true) { %>"+" style = 'top:"+"<%=secondTablePosition%>"+"mm;' >"+"<% } else {%>"+">"+"<% } %>"+"<% if (useTop) { %>"+"<%= getTopTemplateHTML(topHTMLTargetName, tableId, tableIdx, { isFirstTable: isFirstTable }) %>"+"<%}} %>"+"<% if (topOnly || !useBody || tableHide) { table.className.push('hide') }; %>"+"<table id='grid-main' data-gridid='"+"<%=[ecount.grid.constValue.tableIdPrefix + tableId, tableIdx].join('-')%>"+"' "+"<%=ecount.gridV2.util.convertToAttribute(table.attr, ['id'])%>"+" "+"<%=ecount.gridV2.util.convertToClassName(table.className)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(table.style)%>"+">"+"<% if (cols.length > 0) { %>"+"<colgroup>"+"<% for (var i = 0, len = cols.length; i < len; i++) { %>"+"<col "+"<%=ecount.gridV2.util.convertToAttribute(cols[i].attr)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(cols[i].style)%>"+" "+"<%=ecount.gridV2.util.convertToClassName(cols[i].className)%>"+" />"+"<% } %>"+"<\/colgroup>"+"<% } %>"+"<% if (trByThead.length > 0 && trByTbody[nextTableTrIdx].option['detailTableType'] !== 'useForDetail' && !forceEmptyRow) { %>"+"<% if(table.headerClassName) { %>"+"<thead "+"<%=ecount.gridV2.util.convertToClassName(table.headerClassName) %>"+">"+"<% } else { %>"+"<thead>"+"<% } %>"+"<% for (var rowIdx = 0, rowLen = trByThead.length; rowIdx < rowLen; rowIdx++) { %>"+"<tr "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByThead[rowIdx].style) %>"+">"+"<% for (var colIdx = 0, colLen = trByThead[rowIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByThead[rowIdx].cells[colIdx] && trByThead[rowIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByThead[rowIdx].cells[colIdx].style) %>"+">"+"<%= trByThead[rowIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/thead>"+"<% } %>"+"<% if (trByTbody[nextTableTrIdx] && trByTbody[nextTableTrIdx].option && trByTbody[nextTableTrIdx].option['detailTableType'] !== 'useForDetail' && !forceEmptyRow) { tbodyTrIdx = nextTableTrIdx; } %>"+"<% if (tbodyTrLen > 0) { %>"+"<% if(table.tbodyClassName) { %>"+"<tbody "+"<%=ecount.gridV2.util.convertToClassName(table.tbodyClassName) %>"+">"+"<% } else { %>"+"<tbody> <% } %>"+"<% for (var trIdx = nextTableTrIdx; trIdx < tbodyTrLen && trIdx < tbodyTrLen; trIdx++) {if (!trByTbody[trIdx]) {continue;}if (!forceEmptyRow) {nextTableTrIdx = trIdx;if (trByTbody[trIdx].option['detailTableType'] === 'cutFromDetail') {tableRenderEnd = false;if (trByTbody[trIdx].option['newTable'] === true) {trByTbody[trIdx].option['detailTableType'] = '';} else { trByTbody[trIdx].option['detailTableType'] = 'useForDetail'; break; }}if (trIdx != 0 && trByTbody[trIdx].option['newTable'] === true) {tableRenderEnd = false;if (useGridDuplicate === true) {if (gridDuplicated === false) {duplicatedIdx = nextTableTrIdx - 1; gridDuplicated = true; nextTableTrIdx = tbodyTrIdx; currentDuplicationCount++;} else if (currentDuplicationCount < gridDuplicationCount - 1) { duplicatedIdx = nextTableTrIdx - 1; nextTableTrIdx = tbodyTrIdx; currentDuplicationCount++;} else { gridDuplicated = false; trByTbody[trIdx].option['newTable'] = 'newTabled'; currentDuplicationCount = 0; }} else { trByTbody[trIdx].option['newTable'] = 'newTabled'; } break;} else if (trIdx === tbodyTrLen - 1) {if (useGridDuplicate === true) {duplicatedIdx = nextTableTrIdx;if (gridDuplicated === false) {nextTableTrIdx = tbodyTrIdx; tableRenderEnd = false; gridDuplicated = true; currentDuplicationCount++;}else if (currentDuplicationCount < gridDuplicationCount - 1) {nextTableTrIdx = tbodyTrIdx; tableRenderEnd = false; currentDuplicationCount++;} else { currentDuplicationCount = 0; }}} %><tr "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[trIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[trIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTbody[trIdx].style) %>"+">"+"<% for (var colIdx = 0, colLen = trByTbody[trIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByTbody[trIdx].cells[colIdx] && trByTbody[trIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByTbody[trIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[trIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[trIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTbody[trIdx].cells[colIdx].style) %>"+">"+"<%= trByTbody[trIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByTbody[trIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<% } %>"+"<\/tbody>"+"<% } %>"+"<% if(forceEmptyRow) {if (isLastRow) {tableRenderEnd = true; forceEmptyRow = false;} else { forceEmptyRow = false; tableRenderEnd = false;}} %><\/table><% if (!forceEmptyRow && (tableRenderEnd || (trByTbody[nextTableTrIdx] && trByTbody[nextTableTrIdx].option && trByTbody[nextTableTrIdx].option['detailTableType'] !== 'useForDetail'))) { if (!topOnly && useBottom) {var isExcuteCallback = false;if (useGridDuplicate === true && gridDuplicated === true) { isExcuteCallback = trByTbody[duplicatedIdx].option.isLastTable; }else if (trByTbody[nextTableTrIdx].option['newTable'] == 'newTabled') {isExcuteCallback = trByTbody[nextTableTrIdx - 1] && trByTbody[nextTableTrIdx - 1].option['isLastTable']}else { isExcuteCallback = trByTbody[nextTableTrIdx - 1] && trByTbody[nextTableTrIdx].option.isLastTable } %>"+"<%= getBottomTemplateHTML(bottomHTMLTargetName, tableId, tableIdx, { isLastTable: isExcuteCallback })%>"+"<% if(showPageNumber && totalPage && totalPage > 1) { %>"+"<div class='print-contents-page-number' style='width:650px;'>[ "+"<%=currentTablePage%>"+" / "+"<%=trByTbody[nextTableTrIdx].option.totalPage%>"+" ]<\/div><% }} %><\/div><% formOption.gridIndex++; if (gridCountPerPage == 2) { halfLine = !halfLine;if (!halfLine || tableRenderEnd) { %><\/div><% }} else { %><\/div><% }}} %>",salaryPrint:"<% var tableRenderEnd = false,halfLine = false,common = obj.common,formOption = obj.formOption,formData = obj.form.data,table = obj.table,cols = obj.cols,setting = obj.oSetting,trByThead = obj.trs.thead,trByTbody = obj.trs.tbody,trByTfoot = obj.trs.tfoot,headerToolbar = obj.headerToolbar,footToolbar = obj.footToolbar,tbodyTrIdx = 0,nextTableTrIdx = 0,currentTrIdx = 0,tbodyTrLen = trByTbody.length,topOnly = formOption.topOnly,useTop = formOption.useTop,useBody = formOption.useBody,useBottom = formOption.useBottom,isAppearTopAreaOnlyFirst = formOption.isAppearTopAreaOnlyFirst,appearTopAreaOnlyFirstAddBodyRowCount = formOption.appearTopAreaOnlyFirstAddBodyRowCount,isAppearBottomAreaLast = formOption.isAppearBottomAreaLast,appearBottomAreaLastAddBodyRowCount = formOption.appearBottomAreaLastAddBodyRowCount,useGridDuplicate = formOption.gridDuplicationCount == 1 ? false : true,skipSecondGridInPage = formOption.skipSecondGridInPage,useDetailGrid = obj.formOption.detailGridSettings,useOuterDetailGrid = obj.formOption.useOuterDetailGrid,useTableDuplicate = formOption.gridDuplicationCount == 1 ? false : true,useCutLine = !useDetailGrid && formOption.useCutLine,cutLinePosition = formOption.cutLinePosition,secondTablePosition = formOption.secondTablePosition,isLastRow = false,gridDuplicated = false,duplicateString = '',isDuplicatedTable = false,eachTableCounter = 0,tableId = '',areaCommonId = '',detailTableId = '',showPageNumber = formData && formData.option && formData.option.showPageNumber,totalPage = '',currentTablePage = '',gridCountPerPage = obj.formOption.gridCountPerPage,usePaging = formOption.usePaging,printPage = 0,getTopTemplateHTML = obj.getTopTemplateHTML,getBottomTemplateHTML = obj.getBottomTemplateHTML;if(gridCountPerPage === 2 && skipSecondGridInPage === true) { gridCountPerPage = 1; }%><% while (!tableRenderEnd) {if(tableId != trByTbody[nextTableTrIdx].option.isFirstTable) { eachTableCounter = 0; }tableRenderEnd = true;var bodyRowCount = formOption.bodyRowCount;var isFirstTable = trByTbody[nextTableTrIdx].option.isFirstTable;var isLastTable = trByTbody[nextTableTrIdx].option.isLastTable;var tableId = trByTbody[nextTableTrIdx].option.tableId;var tableIdx = trByTbody[nextTableTrIdx].option.tableIndex || '0';var topHTMLTargetName = (formOption.gridIndex % gridCountPerPage == 0 && useTableDuplicate) ? \"TOP_DUPLICATE\" : \"TOP\";var bottomHTMLTargetName = (formOption.gridIndex % gridCountPerPage == 0 && useTableDuplicate) ? \"BOTTOM_DUPLICATE\" : \"BOTTOM\";var trStartIdx = tbodyTrIdx;var skipDuplicateGrid = false;var tableHide = trByTbody[nextTableTrIdx].option.tableHide;var newTableType = trByTbody[nextTableTrIdx].option.detailTableType;var duplicatedIdx = 0; isDuplicatedTable = gridDuplicated;duplicateString = (isDuplicatedTable ? '_DUPLICATE' : '');isDuplicatedTable = gridDuplicated;duplicateString = (isDuplicatedTable ? '_DUPLICATE' : '');areaCommonId = [tableId, eachTableCounter].join('∬');var topHTMLTargetName = \"TOP\" + duplicateString;var bottomHTMLTargetName = \"BOTTOM\" + duplicateString;table.attr.index = tableIdx;if(useTop && isAppearTopAreaOnlyFirst && isFirstTable) { bodyRowCount += appearTopAreaOnlyFirstAddBodyRowCount || 0; }if(!topOnly && useBottom && isAppearBottomAreaLast && isLastTable) { bodyRowCount += appearBottomAreaLastAddBodyRowCount || 0; }if (newTableType != 'useForDetail') {currentTablePage = trByTbody[nextTableTrIdx].option['currentPage'] || null;totalPage = trByTbody[nextTableTrIdx].option['totalPage'];renderRowCount = 0;printPage++; %>"+'<div class="wrapper-print<%=((printPage > 1 && usePaging) ? \' hide\' : \'\')%>" container-type="wrapper-print" print-page="<%=printPage%>">'+'<div class="wrapper-print-content grid-wrapper-print-content" container-type="wrapper-print-content" groupid="<%=areaCommonId+duplicateString%>">'+"<% if (useTop) { %>"+"<%= getTopTemplateHTML(topHTMLTargetName, tableId, tableIdx, { isFirstTable: isFirstTable }) %>"+"<% }} %>"+"<% if (topOnly || !useBody || tableHide) { table.className.push('hide') }; %>"+"<table id='grid-main' data-gridid='"+"<%=[ecount.grid.constValue.tableIdPrefix + tableId, tableIdx].join('-')%>"+"' "+"<%=ecount.gridV2.util.convertToAttribute(table.attr, ['id'])%>"+" "+"<%=ecount.gridV2.util.convertToClassName(table.className)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(table.style)%>"+">"+"<% if (cols.length > 0) { %>"+"<colgroup>"+"<% for (var i = 0, len = cols.length; i < len; i++) { %>"+"<col "+"<%=ecount.gridV2.util.convertToAttribute(cols[i].attr)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(cols[i].style)%>"+" "+"<%=ecount.gridV2.util.convertToClassName(cols[i].className)%>"+" />"+"<% } %>"+"<\/colgroup>"+"<% } %>"+"<% if (trByThead.length > 0 && trByTbody[nextTableTrIdx].option['detailTableType'] !== 'useForDetail') { %>"+"<% if(table.headerClassName) { %>"+"<thead "+"<%=ecount.gridV2.util.convertToClassName(table.headerClassName) %>"+">"+"<% } else { %>"+"<thead>"+"<% } %>"+"<% for (var rowIdx = 0, rowLen = trByThead.length; rowIdx < rowLen; rowIdx++) { %>"+"<tr "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByThead[rowIdx].style) %>"+">"+"<% for (var colIdx = 0, colLen = trByThead[rowIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByThead[rowIdx].cells[colIdx] && trByThead[rowIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByThead[rowIdx].cells[colIdx].style) %>"+">"+"<%= trByThead[rowIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/thead>"+"<% } %>"+"<% if (trByTbody[nextTableTrIdx] && trByTbody[nextTableTrIdx].option && trByTbody[nextTableTrIdx].option['detailTableType'] !== 'useForDetail') { tbodyTrIdx = nextTableTrIdx; } %>"+"<% if (tbodyTrLen > 0) { %>"+"<% if(table.tbodyClassName) { %>"+"<tbody "+"<%=ecount.gridV2.util.convertToClassName(table.tbodyClassName) %>"+">"+"<% } else { %>"+"<tbody> <% } %>"+"<% currentTrIdx = nextTableTrIdx;for (var trIdx = nextTableTrIdx; trIdx < tbodyTrLen && trIdx < tbodyTrLen; trIdx++) {if (!trByTbody[trIdx]) {continue;}nextTableTrIdx = trIdx;if (!useOuterDetailGrid && trByTbody[trIdx].option['detailTableType'] === 'cutFromDetail') {tableRenderEnd = false; if (trByTbody[trIdx].option['newTable'] === true) {trByTbody[trIdx].option['detailTableType'] = '';} else { trByTbody[trIdx].option['detailTableType'] = 'useForDetail'; break; }}if (trByTbody[trIdx].option['newTable'] === true) {tableRenderEnd = false;if (useGridDuplicate === true) {if (gridDuplicated === false) {duplicatedIdx = nextTableTrIdx - 1; gridDuplicated = true; nextTableTrIdx = tbodyTrIdx;} else { gridDuplicated = false; trByTbody[trIdx].option['newTable'] = 'newTabled'; }} else { trByTbody[trIdx].option['newTable'] = 'newTabled'; } break;} else if (trIdx === tbodyTrLen - 1) {if (useGridDuplicate === true) {duplicatedIdx = nextTableTrIdx;if (gridDuplicated === false) {nextTableTrIdx = tbodyTrIdx; tableRenderEnd = false; gridDuplicated = true;}}}detailTableId = !useOuterDetailGrid && trByTbody[trIdx].option['detailTableId'];%><tr "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[trIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[trIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTbody[trIdx].style) %>"+">"+"<% for (var colIdx = 0, colLen = trByTbody[trIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByTbody[trIdx].cells[colIdx] && trByTbody[trIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByTbody[trIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[trIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[trIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTbody[trIdx].cells[colIdx].style) %>"+">"+"<%= trByTbody[trIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByTbody[trIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/tbody>"+"<% } %>"+"<\/table><% if (detailTableId) {for (var detailIdx = 0; detailIdx < detailTableId.length; detailIdx++) { %><"+"<%=detailTableId[detailIdx]%>"+">"+"<% } %>"+"<% }if ((tableRenderEnd || (trByTbody[nextTableTrIdx] && trByTbody[nextTableTrIdx].option && trByTbody[nextTableTrIdx].option['detailTableType'] !== 'useForDetail'))) {if (!topOnly && useBottom) {var isExcuteCallback = false;if (useGridDuplicate === true && gridDuplicated === true) { isExcuteCallback = trByTbody[duplicatedIdx].option.isLastTable; }else if (trByTbody[nextTableTrIdx].option['newTable'] == 'newTabled') {isExcuteCallback = trByTbody[nextTableTrIdx - 1].option['isLastTable']}else { isExcuteCallback = trByTbody[nextTableTrIdx].option.isLastTable } %>"+"<%= getBottomTemplateHTML(bottomHTMLTargetName, tableId, tableIdx, { isLastTable: isExcuteCallback })%>"+"<% if(showPageNumber && totalPage && totalPage > 1) { %>"+"<div class='print-contents-page-number' style='width:650px;'>[ "+"<%=currentTablePage%>"+" / "+"<%=trByTbody[nextTableTrIdx].option.totalPage%>"+" ]<\/div><% }} %><% if (totalPage == currentTablePage && useOuterDetailGrid) {var detailTableIdData = trByTbody.find(function (v, i, me) {return v.option.detailTableId && trByTbody[currentTrIdx].option.tableId == v.option.tableId;}), detailTableIdList = detailTableIdData ? detailTableIdData.option.detailTableId : [];for (var detailIdx = 0; detailIdx < detailTableIdList.length; detailIdx++) { %><"+"<%=detailTableIdList[detailIdx]%>"+">"+"<% } %>"+"<% } %>"+"<\/div>"+"<% formOption.gridIndex++;%>"+"<\/div><% }} %>",typeHorizonList:"<% var tableRenderEnd = false,halfLine = false,common = obj.common,formOption = obj.formOption,formData = obj.form.data,table = obj.table,cols = obj.cols,setting = obj.oSetting,trByThead = obj.trs.thead,trByTbody = obj.trs.tbody,trByTfoot = obj.trs.tfoot,headerToolbar = obj.headerToolbar,footToolbar = obj.footToolbar,tbodyTrIdx = 0,nextTableTrIdx = 0,tbodyTrLen = trByTbody.length,useTop = formOption.useTop,useBody = formOption.useBody,currentDirection = 'L',useBottom = formOption.useBottom,getTopTemplateHTML = obj.getTopTemplateHTML,getBottomTemplateHTML = obj.getBottomTemplateHTML;%>"+"<% if (headerToolbar && (headerToolbar.leftHTML != '' || headerToolbar.rightHTML != '') && !formOption.headerHtmlCallback) { %>"+"<div class='wrapper-toolbar grid-top-html' "+"<% if (table.style['min-width']) { %>"+"style='min-width:<%=(parseInt(table.style['min-width'].replace('px', ''), 10) + 1) + 'px'%>;'"+"<% } else { %> "+"style='width:<%=(parseInt(table.style.width.toString().replace('px', ''), 10) + 1) + 'px'%>;'"+"<% } %> "+"><div class='pull-left' data-top='left'><\/div><div class='pull-right text-right' data-top='right'><\/div><\/div>"+"<% } %>"+"<%= getTopTemplateHTML(topHTMLTargetName, tableId, (formOption.gridIndex - 1).toString(), { totalWidth: Number(table.style.width.replace('px', '')), isExecuteAlways: true }) %>"+"<div class='wrapper-floating-table' style='width: <%= (parseInt(table.style.width, 10) * 2) + 1 %>px;' >"+'<% while (!tableRenderEnd) {tableRenderEnd = true;var bodyRowCount = formOption.bodyRowCount;var tableId = trByTbody[nextTableTrIdx].option.tableId;var tableIdx = trByTbody[nextTableTrIdx].option.tableIndex || \'0\';var topHTMLTargetName = "TOP";var bottomHTMLTargetName = "BOTTOM";var trStartIdx = tbodyTrIdx;table.attr.index = tableIdx; %>'+"<% if( formOption.gridIndex / 2 > 1) { %>"+"<DIV class='page-break'><\/DIV>"+"<% } %>"+"<table id='grid-main' data-gridid='"+"<%=[ecount.grid.constValue.tableIdPrefix + tableId, tableIdx].join('-')%>"+"' "+"<%=ecount.gridV2.util.convertToAttribute(table.attr, ['id'])%>"+" "+"<%=ecount.gridV2.util.convertToClassName(table.className)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(table.style)%>"+">"+"<% if (cols.length > 0) { %>"+"<colgroup>"+"<% for (var i = 0, len = cols.length; i < len; i++) { %>"+"<col "+"<%=ecount.gridV2.util.convertToAttribute(cols[i].attr)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(cols[i].style)%>"+" "+"<%=ecount.gridV2.util.convertToClassName(cols[i].className)%>"+" />"+"<% } %>"+"<\/colgroup>"+"<% } %>"+"<% if (trByThead.length > 0) { %>"+"<% if(table.headerClassName) { %>"+"<thead "+"<%=ecount.gridV2.util.convertToClassName(table.headerClassName) %>"+" >"+"<% } else { %>"+"<thead>"+"<% } %>"+"<% for (var rowIdx = 0, rowLen = trByThead.length; rowIdx < rowLen; rowIdx++) { %>"+"<tr "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByThead[rowIdx].style) %>"+">"+"<% for (var colIdx = 0, colLen = trByThead[rowIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByThead[rowIdx].cells[colIdx] && trByThead[rowIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByThead[rowIdx].cells[colIdx].style) %>"+">"+"<%= trByThead[rowIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/thead>"+"<% } %>"+"<% tbodyTrIdx = nextTableTrIdx; %>"+"<% if (tbodyTrLen > 0) { %>"+"<% if(table.tbodyClassName) { %>"+"<tbody "+"<%=ecount.gridV2.util.convertToClassName(table.tbodyClassName) %>"+">"+"<% } else { %>"+"<tbody> <% } %>"+"<% for (var trIdx = nextTableTrIdx; trIdx < tbodyTrLen && trIdx < tbodyTrLen; trIdx++) {if (!trByTbody[trIdx]) {continue;}nextTableTrIdx = trIdx;if (trByTbody[trIdx].option['tableDirection'] && trByTbody[trIdx].option['tableDirection'] != currentDirection) {tableRenderEnd = false;currentDirection = trByTbody[trIdx].option['tableDirection'];  break;} %><tr "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[trIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[trIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTbody[trIdx].style) %>"+">"+"<% for (var colIdx = 0, colLen = trByTbody[trIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (trByTbody[trIdx].cells[colIdx] && trByTbody[trIdx].cells[colIdx].cell) { %>"+"<"+"<%=trByTbody[trIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[trIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[trIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTbody[trIdx].cells[colIdx].style) %>"+">"+"<%= trByTbody[trIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=trByTbody[trIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>"+"<\/tbody>"+"<% } %>"+"<\/table><% } formOption.gridIndex++; %><\/div>"+"<% if (footToolbar && (footToolbar.leftHTML != '' || footToolbar.rightHTML != '' || isShowPageNo) && !obj.formOption.footerHtmlCallback) { %>"+"<div class='wrapper-toolbar grid-bottom-html' "+"<% if (table.style['min-width']) { %>"+"style='min-width:<%=(parseInt(table.style['min-width'].replace('px', ''), 10) + 1) + 'px'%>;'"+"<% } else { %> "+"style='width:<%=(parseInt(table.style.width.toString().replace('px', ''), 10) + 1) + 'px'%>; '"+"<% } %>"+">"+"<% if (isShowPageNo) { %>"+"<div class='pull-left' data-bottom='left'>"+"<div class='inline-group toolbar-text'>[P.<%=formOption.gridIndex%>]<\/div>"+"<\/div><% }else {if (footToolbar.leftHTML != '') { %><div class='pull-left' data-bottom='left'>"+"<div class='inline-group toolbar-text'><%=footToolbar.leftHTML%><\/div>"+"<\/div><% }}if (footToolbar.rightHTML != '') { %><div class='pull-right text-right' data-bottom='right'>"+"<div class='inline-group toolbar-text'><%=footToolbar.rightHTML%><\/div>"+"<\/div>"+"<% } %>"+"<\/div>"+"<% } %>"+"<%= getBottomTemplateHTML(bottomHTMLTargetName, tableId, (formOption.gridIndex - 1).toString(), { isExecuteAlways: true }) %>",formSetting:"<%var trByThead = obj.trs.thead,trByTbody = obj.trs.tbody,trByTfoot = obj.trs.tfoot,currentTableId = trByTbody[0].option.tableId,tableIdx = trByTbody[0].option.tableIndex || '0';%><div id='grid-main' data-gridid='"+"<%=[ecount.grid.constValue.tableIdPrefix + currentTableId, tableIdx].join('-')%>"+"' class='container'><%if (trByThead.length > 0) {for (var rowIdx = 0, rowLen = trByThead.length; rowIdx < rowLen; rowIdx++) {for (var colIdx = 0, colLen = trByThead[rowIdx].cells.length; colIdx < colLen; colIdx++) {if (trByThead[rowIdx].cells[colIdx] && trByThead[rowIdx].cells[colIdx].cell) {%><"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByThead[rowIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByThead[rowIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByThead[rowIdx].cells[colIdx].style) %>"+">"+"<%=trByThead[rowIdx].cells[colIdx].cell.data%>"+"<\/"+"<%=trByThead[rowIdx].cells[colIdx].tag%>"+"><%}}}}%><%if (trByTbody.length > 0) {for (var rowIdx = 0, rowLen = trByTbody.length; rowIdx < rowLen; rowIdx++) {for (var colIdx = 0, colLen = trByTbody[rowIdx].cells.length; colIdx < colLen; colIdx++) {if (trByTbody[rowIdx].cells[colIdx] && trByTbody[rowIdx].cells[colIdx].cell) {%><"+"<%=trByTbody[rowIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByTbody[rowIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTbody[rowIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTbody[rowIdx].cells[colIdx].style) %>"+">"+"<%=trByTbody[rowIdx].cells[colIdx].cell.data%>"+"<\/"+"<%=trByTbody[rowIdx].cells[colIdx].tag%>"+"><%}}}}%><%if (trByTfoot.length > 0) {for (var rowIdx = 0, rowLen = trByTfoot.length; rowIdx < rowLen; rowIdx++) {for (var colIdx = 0, colLen = trByTfoot[rowIdx].cells.length; colIdx < colLen; colIdx++) {if (trByTfoot[rowIdx].cells[colIdx] && trByTfoot[rowIdx].cells[colIdx].cell) {%><"+"<%=trByTfoot[rowIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(trByTfoot[rowIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(trByTfoot[rowIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(trByTfoot[rowIdx].cells[colIdx].style) %>"+">"+"<%=trByTfoot[rowIdx].cells[colIdx].cell.data%>"+"<\/"+"<%=trByTfoot[rowIdx].cells[colIdx].tag%>"+"><%}}}}%><\/div>",row:"<% rows = obj.rows; %>"+"<% for (var rowIdx = 0, rowLen = rows.length; rowIdx < rowLen; rowIdx++) { %>"+"<tr "+"<%= ecount.gridV2.util.convertToAttribute(rows[rowIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(rows[rowIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(rows[rowIdx].style) %>"+">"+"<% for (var colIdx = 0, colLen = rows[rowIdx].cells.length; colIdx < colLen; colIdx++) { %>"+"<% if (rows[rowIdx].cells[colIdx] && rows[rowIdx].cells[colIdx].cell) { %>"+"<"+"<%=rows[rowIdx].cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(rows[rowIdx].cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(rows[rowIdx].cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(rows[rowIdx].cells[colIdx].style) %>"+">"+"<%= rows[rowIdx].cells[colIdx].cell.data %>"+"<\/"+"<%=rows[rowIdx].cells[colIdx].tag%>"+">"+"<% } %>"+"<% } %>"+"<\/tr>"+"<% } %>",cells:"<% cells = obj.cells; %>"+"<% for (var colIdx = 0, colLen = cells.length; colIdx < colLen; colIdx++) { %>"+"<"+"<%=cells[colIdx].tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(cells[colIdx].attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(cells[colIdx].className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(cells[colIdx].style) %>"+">"+"<%=cells[colIdx].cell.data %>"+"<\/"+"<%=cells[colIdx].tag%>"+">"+"<% } %>",cell:"<%cell = obj.cell; %><"+"<%=cell.tag%>"+" "+"<%= ecount.gridV2.util.convertToAttribute(cell.attr) %>"+" "+"<%= ecount.gridV2.util.convertToClassName(cell.className) %>"+" "+"<%= ecount.gridV2.util.convertToStyle(cell.style) %>"+">"+"<%= cell.cell.data %>"+"<\/"+"<%=cell.tag%>"+">",cols:"<% cols = obj.cols %>"+"<colgroup>"+"<% for (var i = 0, len = cols.length; i < len; i++) { %>"+"<col "+"<%=ecount.gridV2.util.convertToAttribute(cols[i].attr)%>"+" "+"<%=ecount.gridV2.util.convertToStyle(cols[i].style)%>"+" "+"<%=ecount.gridV2.util.convertToClassName(cols[i].className)%>"+" />"+"<% } %>"+"<\/colgroup>"};ecount.gridV2.data.column.dataType=function(){};ecount.gridV2.data.column.dataType.prototype={setStructureInfo:function(n){this._convertor=this.__data[n].convertor;this._convertorDecimal=this.__data[n].convertorDecimal;this._convertorDate=this.__data[n].convertorDate;this._convertorString=this.__data[n].convertorString;this.__key=this.__data[n].key;this._stringType=this.__data[n].stringType;this._dateType=this.__data[n].dateType;this._decimalType=this.__data[n].decimalType},remove:function(){delete this.__data[sectionType][key]},isDateDataType:function(n,t){return this.setStructureInfo(n),this._dateType.contains(t)},isDecimalDataType:function(n,t){return this.setStructureInfo(n),this._decimalType.contains(t)},isStringDataType:function(n,t){return this.setStructureInfo(n),this._stringType.contains(t)},set:function(n,t){this.setStructureInfo(n);var i;return this.__viewMode==this.constValue.dataType.modeView?t.dataType&&t.dataType.length>0&&(i=t.dataType.substring(0,1),["1","2","5"].contains(i)?(this._convertor[t.id]=ecount.convertor.dataTypeConvertor[i],this._convertorDate[t.id]=ecount.convertor.dataTypeConvertor[i],this._dateType.push(t.propertyName)):["8","9"].contains(i)?(this._convertor[t.id]=ecount.convertor.dataTypeConvertor[i],this._convertorDecimal[t.id]=ecount.convertor.dataTypeConvertor[i],this._decimalType.push(t.propertyName)):/^(date)\d{2}$/gi.test(t.dataType)?(this._convertor[t.id]=ecount.convertor.dataTypeConvertor.date,this._convertorDate[t.id]=ecount.convertor.dataTypeConvertor.date,this._dateType.push(t.propertyName)):(this._convertorString[t.id]=function(n){return n},this._stringType.push(t.propertyName))):this.__viewMode==this.constValue.dataType.modeInput&&t.controlOption.dataType&&t.controlOption.dataType.length>0&&(i=t.controlOption.dataType.substring(0,1),["1","2","5"].contains(i)?(this._convertor[t.id]=ecount.convertor.dataTypeConvertor[i],this._convertorDate[t.id]=ecount.convertor.dataTypeConvertor[i],this._dateType.push(t.propertyName)):["8","9"].contains(i)?(this._convertor[t.id]=ecount.convertor.dataTypeConvertor["9"],this._convertorDecimal[t.id]=ecount.convertor.dataTypeConvertor["9"],this._decimalType.push(t.propertyName)):/^(date)\d{2}$/gi.test(t.dataType)?(this._convertor[t.id]=ecount.convertor.dataTypeConvertor.date,this._convertorDate[t.id]=ecount.convertor.dataTypeConvertor.date,this._dateType.push(t.propertyName)):(this._convertorString[t.id]=function(n){return n},this._stringType.push(t.propertyName))),this},get:function(n,t){return this.setStructureInfo(n),this.__key[t]},getConvetorDecimalList:function(n){return this.setStructureInfo(n),this._convertorDecimal},getConvetorDateList:function(n){return this.setStructureInfo(n),this._convertorDate},getConvetorStringList:function(n){return this.setStructureInfo(n),this._convertorString},reset:function(){return this.__data={thead:{convertor:{},convertorDecimal:{},convertorDate:{},convertorString:{},key:{},stringType:[],dateType:[],decimalType:[]},tbody:{convertor:{},convertorDecimal:{},convertorDate:{},convertorString:{},key:{},stringType:[],dateType:[],decimalType:[]},tfoot:{convertor:{},convertorDecimal:{},convertorDate:{},convertorString:{},key:{},stringType:[],dateType:[],decimalType:[]}},this},getConvertor:function(n,t){return this.setStructureInfo(n),this._convertor[t]},removeConvertor:function(n,t){delete this.__data[n].convertor[t];var i=this.__data[n].stringType.indexOf(t);return i>-1&&this.__data[n].stringType.splice(this.__data[n].stringType.indexOf(t),1),i=this.__data[n].dateType.indexOf(t),i>-1&&this.__data[n].dateType.splice(this.__data[n].dateType.indexOf(t),1),i=this.__data[n].decimalType.indexOf(t),i>-1&&this.__data[n].decimalType.splice(this.__data[n].decimalType.indexOf(t),1),this._convertor[t]&&delete this._convertor[t],this},removeKey:function(n,t){return delete this.__data[n].key[t],this},removeAll:function(n){return this.removeAllConvertor(n),this.removeAllKey(n),this},removeAllConvertor:function(n){return delete this.__data[n].convertor,this},removeAllKey:function(n){return delete this.__data[n].key,this},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__setting=n.setting;this.renderingCount=0},init:function(n,t){return this.initGlobalValue(n),this.reset(),this.__viewMode=t,this},destroyAll:function(){}};ecount.gridV2.handler=function(){};ecount.gridV2.handler.prototype={onActive:function(n,t){ecount.gridV2.util.log("grid onActive");var i=this.__core.setting.eventsGet(),r={gridId:this.optLayout.containerSelector,stripePattern:this.optRow[this.tbodyType].isShade};(i&&i._triggerEvent(ecount.grid.event.list.activate,null,r),n.id&&n.id.indexOf("searchText")>0&&(this.__core.isActive=!0),this.__core.isActive||this.optCommon.gridType!=this.constValue.gridType.editable||(this.__core.isActive=!0),n.gridSectionType&&n.gridColumnID&&n.gridDataKey)&&(this.__core.isActive||this.optCommon.gridType!=this.constValue.gridType.editable||this.__core.active(n,t),ecount.gridV2.logger.log(String.format("{0}-{1}-{2}",this.__core.activeSectionType,this.__core.activeColumnId,this.__core.activeRowId)))},onDeactive:function(n,t){var i,u,f,e,r;if(ecount.gridV2.util.log("grid onDeactive"),this.__core.isActive=!1,this.optCommon.gridType==this.constValue.gridType.editable){if(i={},this.viewEditLayer&&(i=this.viewEditLayer.getActiveCell()),i.activeSectionType!=null&&i.activeColumnId!=null&&i.activeRowId!=null){if(this.viewEditLayer.blur(null,null,null,{event:"mousedown"}),this.optRow[i.activeSectionType].showInputFakeOutLine==="activeRow"&&this.viewRow.removeClass(i.activeSectionType,i.activeRowId,[this.constValue.rowEditableClassName]),this.optEditable.highlightHeader){for(u=this.dataRow.getAll(this.theadType),f=this.dataColumn.getById(i.activeSectionType,i.activeColumnId).propertyName,r=0;r<u.length;r++)if(u[r][f]!=undefined||u[r][f]!=null){e=u[r][this.constValue.keyColumnPropertyName];break}i.activeColumnId&&this.viewCell.removeClass(this.theadType,i.activeColumnId,e,"muted")}this.viewEditLayer.commit();this.emitEvent({gridSectionType:i.activeSectionType,gridColumnID:i.activeColumnId,gridDataKey:i.activeRowId,value:n.value},t,"blur")}this.__core.deactiveSectionType=null;this.__core.deactiveColumnId=null;this.__core.deactiveRowId=null;this.__core.deactiveColumnIndex=-1;this.__core.deactiveRowIndex=-1;this.__core.activeSectionType=null;this.__core.activeColumnId=null;this.__core.activeRowId=null;this.__core.activeColumnIndex=-1;this.__core.activeRowIndex=-1;i.activeSectionType!=null&&i.activeColumnId!=null&&i.activeRowId!=null&&this.__core.fn.validateRemove(i.activeSectionType,i.activeColumnId,i.activeRowId)}else this.viewKeyboard&&(this.viewKeyboard.removeCurRowClass(),this.viewKeyboard.reset());this.preColumnId=null;this.preRowIndex=null;this.preOverRowKey=null},onMousedown:function(n,t,i,r){var f,e,o,u;if(ecount.gridV2.util.log("grid onMousedown"),this._setStore(n,t,i,r),this.__core.eventHost="mousedown",this.optCheckbox.useMultiCheck&&this._downCheckbox(n,t),this.optCommon.gridType==this.constValue.gridType.editable&&this.__core.activeSectionType&&this.__core.activeColumnId&&this.__core.activeRowId&&!(this.__core.activeSectionType==n.gridSectionType&&this.__core.activeColumnId==n.gridColumnID&&this.__core.activeRowId==n.gridDataKey)){if(this.viewEditLayer.blur(this.__core.activeSectionType,this.__core.activeColumnId,this.__core.activeRowId),this.viewEditLayer.commit(),this.__core.activeSectionType&&this.__core.activeColumnId&&this.__core.activeRowId&&(this.optRow[this.__core.activeSectionType].showInputFakeOutLine==="activeRow"&&this.viewRow.removeClass(this.__core.activeSectionType,this.__core.activeRowId,[this.constValue.rowEditableClassName]),this.optEditable.highlightHeader)){for(f=this.dataRow.getAll(this.theadType),e=this.dataColumn.getById(this.__core.activeSectionType,this.__core.activeColumnId).propertyName,u=0;u<f.length;u++)if(f[u][e]!=undefined||f[u][e]!=null){o=f[u][this.constValue.keyColumnPropertyName];break}this.__core.activeColumnId&&this.viewCell.removeClass(this.theadType,this.__core.activeColumnId,o,"muted")}this.emitEvent({gridSectionType:this.__core.activeSectionType,gridColumnID:this.__core.activeColumnId,gridDataKey:this.__core.activeRowId,value:n.value},t,"blur")}if(this.optCommon.gridType==this.constValue.gridType.editableForm){if(!this.optContextmenu.keys||!this.optContextmenu.keys.contains(t.button))return;this.optContextmenu.itemList&&this.optForm.version==this.constValue.formVersion.fourth&&(this.optSelector.version==this.constValue.selector.version.singleSection?this.__core.fn.ON_CONTEXTMENU_HANDLER(t):this.optSelector.version==this.constValue.selector.version.multiSection&&this.__core.fn.ON_CONTEXTMENU_HANDLER(t))}},onMouseup:function(n,t,i,r){this.__core.onFocusin=!1;this.__core.eventHost=null;this.preOverRowKey&&this._multiChecked();this.isCheckboxDragStart&&(this.isCheckboxDragStart=!1);this._setStore(n,t,i,r)},onClick:function(n,t,i,r){var g,ft,tt,c,p,l,it,ot,rt,b,h,a,w,s,d;if((ecount.gridV2.util.log("grid onclick"),this._setStore(n,t,i,r),!this.__core.drawing)&&!n.gridDetailTableID&&n.ecService!=ecount.layer.constValue.FN){if(this.optCommon.gridType==this.constValue.gridType.editableForm){if(n.id.test(new RegExp(this.constValue.checkBoxPropertyName+"(-)?d*","g")))return;if(n.id.test(new RegExp(this.constValue.rowMoveablePropertyName+"(-)?d*","g")))return;if(n.id.test(new RegExp(this.constValue.rowNumberingPropertyName+"(-)?d*","g")))return;this.viewSelector&&![this.constValue.selector.state.dragable,this.constValue.selector.state.mouseup].contains(this.viewSelector.getState())&&(this.viewOuterHorizontal&&this.viewOuterHorizontal.CLICK_HANDLER(n,t),this.viewOuterVertical&&this.viewOuterVertical.CLICK_HANDLER(n,t))}if(g=!0,ft=this._isEventFromCell(n,t,i,r,"click"),ft){var nt=r.value||t.target.getAttribute("childelementid")||null,u=n.gridSectionType,f=n.gridColumnID,e=n.gridDataKey,o={childElementId:nt},y=!1;if(n.ecService=="service.layer"&&(tt=n.serviceKey.split(ecount.separator.ecPath),u=this.tbodyType,f=tt[3],e=tt[4]),c=this.dataRow.getViewDataCellInfo(u,f,e),p=this.dataRow.getViewDataCellMap(u,f,e),this.optCommon.gridType==this.constValue.gridType.editable&&!c.editableState){if(this.__core.deactiveSectionType&&this.__core.deactiveRowId&&(this.optRow[this.__core.deactiveSectionType].showInputFakeOutLine==="activeRow"&&this.viewRow.removeClass(this.__core.deactiveSectionType,this.__core.deactiveRowId,[this.constValue.rowEditableClassName]),this.__core.deactiveColumnId&&(this.viewEditLayer.blur(this.__core.deactiveSectionType,this.__core.deactiveColumnId,this.__core.deactiveRowId),this.viewEditLayer.commit(),this.emitEvent({gridSectionType:this.__core.deactiveSectionType,gridColumnID:this.__core.deactiveColumnId,gridDataKey:this.__core.deactiveRowId,value:n.value},t,"blur")),this.optEditable.highlightHeader)){for(h=this.dataRow.getAll(this.theadType),a=this.dataColumn.getById(this.__core.deactiveSectionType,this.__core.deactiveColumnId).propertyName,s=0;s<h.length;s++)if(h[s][a]!=undefined||h[s][a]!=null){w=h[s][this.constValue.keyColumnPropertyName];break}this.__core.deactiveColumnId&&this.viewCell.removeClass(this.theadType,this.__core.deactiveColumnId,w,"muted")}this.emitEvent(n,t,"focus",{});this.calledFocusEventByClicked={sectionType:u,columnId:f,rowId:e};return}t.target&&t.target.tagName&&t.target.tagName.test(/T[DH]/g)&&($(t.target).find("span[tree-type!='head']").focus(),this.emitEvent(n,t,"focus",{}),this.calledFocusEventByClicked={sectionType:u,columnId:f,rowId:e});var ct=this.__core.view.cell.getCellElement(u,f,e),v=this.dataRow.getById(u,e,!0),et=u;if((this.optCommon.columnType==this.constValue.columnType.multi&&v[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate&&(et=this.tfootType),l=this.dataColumn.getById(et,f,!0),l.isTree==!0&&(it=this.dataTree&&this.dataTree.serialize(),["ecount.gridV2.widget.label.arrow","ecount.gridV2.widget.link.arrow"].contains(p.cellInfo.controlType)&&(it.eventOnLabel===!0||it.eventOnLabel=="cell"||t.target.className.indexOf("tree-arrow")>-1)&&(!/^widget.code.*/g.test(l.controlType)||t.target.className.indexOf("tree-arrow")>-1)&&(this.__core.activeSectionType=null,this.__core.activeColumnId=null,this.__core.activeRowId=null,g=this.dataTree.onClick(n,t,p))),g)&&p.cellInfo.adjustmentValue!=1){switch(c.controlType){case"widget.link":case"widget.link.fa":case"widget.faCheckLink":case"widget.faPlusLink":if(t.target.tagName=="TD"||t.target.tagName=="TH")return;break;case"widget.link.multi":if(t.target.tagName=="TD"||t.target.tagName=="DIV")return;break;case"widget.checkbox.multi":if(t.target.tagName!="LABEL"&&t.target.tagName!="INPUT"&&t.target.tagName!="DIV")return;o.checked={};ot=this.__core.view.cell.getChildElement(u,f,e,"INPUT",nt);o.checked[nt]=ot.prop("checked");y=!0;break;case"widget.rowItemCheckbox":case"widget.checkbox":case"widget.checkbox.number":if(t.target.tagName!="LABEL"&&t.target.tagName!="INPUT"&&t.target.tagName!="DIV")return;this.dataCheckbox.getCheckboxUse(u,f)?(rt=this.dataCheckbox.has(u,f,e),o.checked=!rt,o.newValue=!rt,o.oldValue=v[l.propertyName]):(o.checked=!v[l.propertyName],o.newValue=!v[l.propertyName],o.oldValue=v[l.propertyName]);this.optCheckbox.useMultiCheck&&this._downCheckbox(n,t);y=!0;break;case"widget.radio":case"widget.radio.number":if(t.target.tagName!="LABEL"&&t.target.tagName!="INPUT"&&t.target.tagName!="DIV")return;b=t.target.value;t.target.tagName=="LABEL"&&(b=$(t.target.parentElement).find("input:radio").length>0?$(t.target.parentElement).find("input:radio")[0].value:b);o.checked=!0;o.newValue=b;y=!0;break;case"widget.empty":return;case"widget.rowItemMoveable":if(t.target.tagName!="SPAN"&&t.target.tagName!="A")return}if(this.optCommon.gridType==this.constValue.gridType.editable){var lt=this._isEventFromEditLayerCell(n),k=!1,st,ht,ut=this.viewEditLayer&&this.viewEditLayer.getInstance();if(this.viewEditLayer&&this.viewEditLayer.isViewMode()&&this.__core.deactiveSectionType==n.gridSectionType&&this.__core.deactiveRowId==n.gridDataKey&&this.__core.deactiveColumnId==n.gridColumnID&&this.viewEditLayer.focusAndSelect(),this.__core.active(n,t),this.__fn.setLastUpdateTime(),c.editableState&&this.constValue.controlInWidget[c.controlType])k=!0,st=c.controlType;else if(this.constValue.nativeControlInWidget[c.controlType]){if(this.optRow[n.gridSectionType].showInputFakeOutLine==="activeRow"&&this.viewRow.removeClass(this.__core.activeSectionType,this.__core.activeRowId,[this.constValue.rowEditableClassName]),this.optEditable.highlightHeader){for(h=this.dataRow.getAll(this.theadType),a=this.dataColumn.getById(this.__core.activeSectionType,this.__core.activeColumnId).propertyName,s=0;s<h.length;s++)if(h[s][a]!=undefined||h[s][a]!=null){w=h[s][this.constValue.keyColumnPropertyName];break}this.__core.activeColumnId&&this.viewCell.removeClass(this.theadType,this.__core.activeColumnId,w,"muted")}t.target.focus()}k&&(d=this.emitEvent(n,t,"isBeginEdit"),(d.length==0||d[0]===!0||d[0]==="popuponly")&&(ecount.constValue.isIE&&(this.calledClickEvent=!0),this.viewEditLayer.render(u,f,e,st),ut=this.viewEditLayer&&this.viewEditLayer.getInstance(),n.ecFunction=="nationalFlag"&&ut&&ut.openPopupNationalFlag(),["custom","widget"].forEach(function(n){var t=this.__core.data.validate.get(n,u,f,e);t&&!t.isValidate&&(t.error.popover.isShow=!0,this.__core.transaction.push("cell","showError",[n,u,f,e]),this.__core.transaction.push("cell","showPopover",[n,u,f,e]))}.bind(this))));c.controlType==="widget.mergeAddRow"&&(ht=!0);this.autoAddColumnOnLastColumn(n,k);this.autoAddRowOnLastRow(n,k,ht)}this.emitEvent(n,t,"click",o);y==!0&&this.emitEvent(n,t,"change",o)}}}},autoAddColumnOnLastColumn:function(n){var i=!1,r=this.dataColumn.getColumnCount(this.theadType),f=this.dataColumn.getIndexById(n.gridSectionType,this.constValue.returnColumnIndexType.multi,n.gridColumnID),t=this.optColumn.autoAddColumnOption,u;i=f+1>r-this.optColumn.autoAddColumnMargin;this.optColumn.autoAddColumnOnLastColumn&&i&&(u=this.dataColumn.getByIndex(this.theadType,r-1),t=_.merge(t,{columnId:u.id}),this._addColumn(t))},autoAddRowOnLastRow:function(n,t,i){var r=n.gridSectionType,e=n.gridDataKey,u,f;!i&&r==this.tbodyType&&this.optRow[r].autoAddRowOnLastRow&&(u=this.dataRow.getAll(r),f=this.dataRow.getById(r,e),u.length-this.optRow[r].autoAddRowMargin<f[this.constValue.rowCountColumnPropertyName]&&(this.__fn.addRow(r,this.optRow[r].autoAddRowCount,u.length,{addDirection:"last"}),this.view.fix&&this.view.fix.update()))},onClickService:function(n,t,i,r){var l,k,p,w,d,b,s,e,f;if(ecount.gridV2.logger.log("grid onClickService"),l=n.serviceKey.split(ecount.separator.ecPath),this._setStore(n,t,i,r),n.gridSectionType||(n.gridSectionType=r.gridSectionType||l[2]),n.gridColumnID||(n.gridColumnID=r.gridColumnID||l[3]),n.gridDataKey||(n.gridDataKey=r.gridDataKey||l[4]),this.optCommon.gridType==this.constValue.gridType.editableForm){if(this.optForm.version==this.constValue.formVersion.third||this.optForm.version==this.constValue.formVersion.fourth){var g=this.optCommon.ecGridId,o=this.__core.view.selector,h=o.getStartSectionType(),nt=o.getEndSectionType(),c=o.getStartColumnSectionType(),a=o.getStartRowType(),tt=o.getSelectionType(),u=o.getBoundary().clone(),v=o.getStartBoundary().clone(),y=o.getEndBoundary().clone();if(this.optCommon.columnType==this.constValue.columnType.multi&&c==this.tfootType&&(k=this.dataColumn.getAll(h,this.constValue.returnType.multi),u.top-=k.length,u.bottom-=k.length),this.optMerge.useContextmenu&&this.optMerge.contextmenu){if(this.optContextmenu.callback&&this.optContextmenu.callback[r.value]){for(p=[],f=this.dataColumn.getAll(c||h,this.constValue.returnType.multi,!0),f=f.slice(u.top,u.bottom+1),w=0,d=f.length;w<d;w++)b=f[w].splice(u.left,u.right-u.left+1),b.splice(0,0,b.length,0),p.splice.apply(p,b);this.optContextmenu.callback[r.value](t,{gridId:g,sectionType:h,sectionDetailType:a,sectionDetailTypeName:a,rowStartIndex:u.top,rowEndIndex:u.bottom,columnStartIndex:u.left,columnEndIndex:u.right,columns:p})}}else if(this.optContextmenu.callback&&this.optContextmenu.callback[r.value])if(this.optForm.version==this.constValue.formVersion.third)this.optContextmenu.callback[r.value].call(this,h,c,a,tt,u,v,y);else if(this.optForm.version==this.constValue.formVersion.fourth){if(t.target&&t.target.classList.contains("disabled"))return;if(t.target&&t.target.parentNode&&t.target.parentNode.classList.contains("disabled"))return;s=r.value;e={direction:""};"insertUpRow"==r.value?(e.direction="up",s="insertRow"):"insertDownRow"==r.value?(e.direction="down",s="insertRow"):r.value=="insertRightColumn"?(e.direction="right",s="insertColumn"):r.value=="insertLeftColumn"?(e.direction="left",s="insertColumn"):r.value=="addLastRow"&&(e.direction="down",f=this.dataColumn.getAll(c,this.constValue.returnType.multi),v.top=f.length-1,v.bottom=f.length-1,y.top=f.length-1,y.bottom=f.length-1);e.columnSectionType=c;e.boundary=u;this.optContextmenu.callback[s].call(this,h,v,nt,y,a,e)}}}else this.optContextmenu.callback&&this.optContextmenu.callback[r.value]?this.optContextmenu.callback[r.value].call(this):n.gridSectionType&&n.gridColumnID&&n.gridDataKey&&this.emitEvent(n,t,"click",{childElementId:r.value});this.__core.dropdownmenu={}},onClickMenuToggle:function(){ecount.gridV2.logger.log("grid onClickMenuToggle");this.view&&this.view.fix&&this.view.fix.onClickMenuToggle()},onResizeMaximize:function(){ecount.gridV2.logger.log("grid onResizeMaximize");this.__core&&this.__core.view&&this.__core.view.fix&&this.__core.view.fix.getDrawCount()<=1&&this.__core.view.fix.setCloneTablePosition()},onDblClick:function(n,t,i,r){var s,v,h;if((this._setStore(n,t,i,r),!this.__core.drawing)&&!n.gridDetailTableID){var f=n.gridSectionType,c=n.gridColumnID,l=n.gridDataKey,p=this.viewEditLayer&&this.viewEditLayer.isViewMode(),y=this._isEventFromCell(n,t,i,r,"dblClick");if(y){var u=this.dataRow.getViewDataCellInfo(f,c,l),w=this.dataColumn.getById(f,c,!0),a=this.dataRow.getById(f,l,!0),o=!1,v,e=this.viewEditLayer&&this.viewEditLayer.getInstance();u.editableState&&(f==this.theadType&&this.constValue.controlInWidget[u.controlType]?(o=!0,controlType=u.controlType):f==this.tbodyType&&this.constValue.controlInWidget[u.controlType]?(o=!0,controlType=u.controlType):f==this.tbodyType&&(u.controlType=="widget.code.serialCodeItemNative"||u.controlType=="widget.code.serialCodeItemNew")&&(o=!0,controlType=u.controlType,e=this.dataRow.getViewDataWidgetInstance(f,i.cid)));o&&(/^widget.(code|multiCode).*/g.test(controlType)?(s=this.emitEvent(n,t,"isBeginEdit"),v=s.length>1?s[1]:s[0],this.viewEditLayer&&this.viewEditLayer.getInstance()&&v!==!1?(e=this.viewEditLayer&&this.viewEditLayer.getInstance(),n.cindex=0,h=!0,e&&(h=e.onDblClickHandler(n,t,{__gridOpenPopupTriggerInfo:{rowItem:a,event:"dblclick"}})),h&&$(document.body).trigger("mousedown",{isTriggerFromSyntheticEvent:!0}),this.viewEditLayer.blur(this.__core.activeSectionType,this.__core.activeColumnId,this.__core.activeRowId,{isRunChange:!1,isRunComplete:!1}),this.viewEditLayer.commit(),this.emitEvent({gridSectionType:this.__core.activeSectionType,gridColumnID:this.__core.activeColumnId,gridDataKey:this.__core.activeRowId,value:n.value},t,"blur")):e&&(h=e.onDblClickHandler(n,t,{__gridOpenPopupTriggerInfo:{rowItem:a,event:"dblclick"}}))):(this.viewEditLayer.show(this.constValue.dataType.modeInput),this.viewEditLayer.focusAndSelect()))}}},onInput:function(n,t,i,r){(this._setStore(n,t,i,r),n.gridSectionType||n.gridColumnID||n.gridDataKey)&&(this.constValue.functionKeyList[t.keyCode]||this.emitEvent(n,t,"keydown",{}))},onChange:function(n,t,i,r){var h,c,l,b,s,a,v,y;if(ecount.gridV2.util.log("grid onChange"),this._setStore(n,t,i,r),this.__core){var k=this._isEventFromCell(n,t,i,r,"change"),u=n.gridSectionType||this.__core.lastFocusedActiveSectionType,f=n.gridColumnID||this.__core.lastFocusedActiveColumnId,e=n.gridDataKey||this.__core.lastFocusedActiveRowId;if((k||n.gridSectionType||n.gridColumnID||n.gridDataKey)&&(h=n.eventType,c=n.control&&n.control.controlType||n.__self&&n.__self.controlType,!_.isEmpty(this.dataColumn.__datas))){var d=this.dataColumn.getById(u,f),g=d.propertyName,o={},p=this.dataRow.getViewDataCellMap(u,f,e),w=p.cellInfo?p.cellInfo.controlType:"";if(u&&f&&e){l=n.message&&n.message.data||this.dataRow.getById(u,e,!0);b=!1;t=t||{};l[ecount.grid.constValue.keyColumnPropertyName]||(l[ecount.grid.constValue.keyColumnPropertyName]=e);switch(n.type){case"addCodesAll":case"addCode":n.type="addCode";b=!0;h="itemSelect";n.control=_.extend({},n.control,{id:f});this.constValue.combineControlWidget[w]?(s=this.dataRow.getViewDataWidgetInstances(u)[n.cid],s&&(a=s.getValue(),v={isRunChange:!1,isRunComplete:!1,callByHandler:!0},this.dataRow.setValue(u,f,e,a,v)),o.subDataIdx=n.cindex):this.__core.fn.refreshCell(n.gridSectionType,n.gridColumnID,n.gridDataKey);break;default:this.constValue.combineControlWidget[w]?(s=this.dataRow.getViewDataWidgetInstances(u)[n.cid],s&&(a=s.getValue(),v={isRunChange:!1,isRunComplete:!1,callByHandler:!0},this.dataRow.setValue(u,f,e,a,v)),h="change",o.oldRowItem=l,o.oldValue=l[g],n.value=a||n.value):this.constValue.nativeControlInWidget[c]&&(h="change",/^widget.select.*/.test(c)?(y=i.getSelectedItem(),y&&(o.selectedLabel=y.label)):c=="widget.radio.multi"&&(o.selectedLabel=i.getCheckedLabel()))}if(c=="widget.multiDate"&&n.calledSetCell===!0)return!1;this.emitEvent(n,t,h,o)}}}},onMouseOver:function(n,t,i,r){if((this._setStore(n,t,i,r),n.gridSectionType&&n.gridColumnID&&n.gridDataKey)&&!n.gridDetailTableID){!this.optCheckbox.useMultiCheck||this.optDrag.dragableModule&&this.optDrag.dragableModule.isDragging()||this._dragCheckbox(n,t);var u={},f=this.dataRow.getViewDataCellMap(n.gridSectionType,n.gridColumnID,n.gridDataKey);this.constValue.mouseoverSelectInCell[f.cellInfo.controlType]&&this.constValue.mouseoverSelectInCell[f.cellInfo.controlType].contains(t.target.tagName)&&(u.childElementId=t.target.getAttribute("childElementId"),this.emitEvent(n,t,t.type,u))}},onMouseOut:function(n,t,i,r){if((this._setStore(n,t,i,r),n.gridSectionType&&n.gridColumnID&&n.gridDataKey)&&!n.gridDetailTableID)!this.optCheckbox.useMultiCheck||this.optDrag.dragableModule&&this.optDrag.dragableModule.isDragging()||this._dragCheckbox(n,t),this.emitEvent(n,t,t.type,{})},onFocusin:function(n,t,i,r){var l,s,u,e,h,c;if(ecount.gridV2.util.log("grid onFocusin"),ecount.gridV2.util.log(n),ecount.gridV2.util.log(t.target),this._setStore(n,t,i,r),l=this._isEventFromCell(n,t,i,r,"focus"),l){this.__core.active(n,t);var f=n.gridSectionType,a=n.gridColumnID,v=n.gridDataKey,o=this.dataRow.getById(f,v,!0);if(this.calledFocusEventByClicked.sectionType==f&&this.calledFocusEventByClicked.columnId==a&&this.calledFocusEventByClicked.rowId==v){this.calledFocusEventByClicked={};return}s=f;this.optCommon.columnType==this.constValue.columnType.multi&&o[this.constValue.rowVariableNames.rowType]==this.constValue.rowType.separate&&(s=this.tfootType);u=this.dataColumn.getById(s,a,!0);e=!1;f==this.theadType&&this.constValue.controlInWidget[u&&u.columnOption.controlType]?(e=!0,controlType=u.columnOption.controlType):f==this.tbodyType&&(this.constValue.nativeControlInWidget[u&&u.controlType]?(e=!0,controlType=u.controlType):this.constValue.controlInWidget[u&&u.controlType]&&(e=!0,controlType=u.controlType));e&&(h={rowItem:o,newValue:o[u.propertyName]},this.__core.onFocusin=!0,ecount.constValue.isIE?(c=this.viewEditLayer&&this.viewEditLayer.getInstance(),c&&c.ecview.$el.find(t.target).length!=0&&this.calledClickEvent!=!0||this.emitEvent(n,t,"focus",h),this.calledClickEvent=!1):this.emitEvent(n,t,"focus",h))}},onFocusout:function(n,t,i,r){var c,u,o,e,s,h,f;if(ecount.gridV2.util.log("grid onFocusout"),ecount.gridV2.util.log(n),ecount.gridV2.util.log(t),this._setStore(n,t,i,r),c=this._isEventFromCell(n,t,i,r,"blur"),this.__core.searchText&&n.id&&n.id.indexOf("searchText")>0){this.__core.searchText.preColumnId&&this.__core.searchText.preRowId&&this.__core.searchText.searchCellColor&&this.__core.view.cell.removeClass(this.tbodyType,this.__core.searchText.preColumnId,this.__core.searchText.preRowId,this.__core.searchText.searchCellColor);this.__core.searchText.destroyAll();return}if(n.gridSectionType&&n.gridColumnID&&n.gridDataKey&&(!ecount.constValue.isIE||!t.target||!t.target.tagName||!t.target.tagName.test(/T[DH]/g))){if(u=this.dataRow.getViewDataCellMap(n.gridSectionType,n.gridColumnID,n.gridDataKey),this.optCommon.gridType==this.constValue.gridType.editable){if(o=!1,this.constValue.controlInWidget[u.cellInfo.controlType]?(o=!0,controlType=u.cellInfo.controlType):this.constValue.nativeControlInWidget[u.cellInfo.controlType]||this.constValue.controlInWidget[u.cellInfo.editControlType]&&(o=!0,controlType=u.cellInfo.editControlType),o&&this.viewEditLayer&&this.viewEditLayer.isInputMode()){if(!this.__core.eventHost||this.__core.eventHost=="altTab"||this.__core.eventHost=="rightArrow"||this.__core.eventHost=="leftArrow"||!["mousedown","keydown"].contains(this.__core.eventHost)){this.__core.eventHost=null;return}if(this.viewEditLayer.blur(n.gridSectionType,n.gridColumnID,n.gridDataKey),this.optRow[n.gridSectionType].showInputFakeOutLine==="activeRow"&&this.viewRow.removeClass(n.gridSectionType,n.gridDataKey,[this.constValue.rowEditableClassName]),this.optEditable.highlightHeader){for(e=this.dataRow.getAll(this.theadType),s=this.dataColumn.getById(this.__core.activeSectionType,n.gridColumnID).propertyName,f=0;f<e.length;f++)if(e[f][s]!=undefined||e[f][s]!=null){h=e[f][this.constValue.keyColumnPropertyName];break}n.gridColumnID&&this.viewCell.removeClass(this.theadType,n.gridColumnID,h,"muted")}this.viewEditLayer.commit()}else this.viewEditLayer&&this.viewEditLayer.isViewMode()||this.__fn.removeValidate(n.gridSectionType,n.gridColumnID,n.gridDataKey);this.__core.deactiveSectionType=this.__core.activeSectionType;this.__core.deactiveColumnId=this.__core.activeColumnId;this.__core.deactiveRowId=this.__core.activeRowId;this.__core.deactiveColumnIndex=this.__core.activeColumnIndex;this.__core.deactiveRowIndex=this.__core.activeRowIndex;this.__core.lastFocusedActiveSectionType=this.__core.activeSectionType;this.__core.lastFocusedActiveColumnId=this.__core.activeColumnId;this.__core.lastFocusedActiveRowId=this.__core.activeRowId;this.__core.lastFocusedActiveColumnIndex=this.__core.activeColumnIndex;this.__core.lastFocusedActiveRowIndex=this.__core.activeRowIndex;this.__core.activeSectionType=null;this.__core.activeColumnId=null;this.__core.activeRowId=null;this.__core.activeColumnIndex=-1;this.__core.activeRowIndex=-1;this.__fn.setLastUpdateTime()}return this.dataSortable&&this.dataSortable.enableList[n.gridColumnID]||this.emitEvent(n,t,"blur"),["mousedown","keydown"].contains(this.__core.eventHost)&&(this.__core.eventHost=null),!0}},onKeydown:function(n,t,i,r){var o;this.__core.eventHost=t.altKey&&t.which==9?"altTab":t.which==39?"rightArrow":t.which==37?"leftArrow":"keydown";var f=this.__core.activeSectionType,u=this.__core.activeColumnId,s=this.__core.activeColumnIndex,e=this.__core.activeRowId,h=this.__core.activeRowIndex;return n.gridColumnIndex=s,n.gridDataIndex=h,o=function(){var s,a;if(this.optKeyboard.useMoveCursor==!0&&[this.constValue.gridType.list,this.constValue.gridStyle.tree].contains(this.optCommon.gridType)){if(this.__fn.focus(),n.cid||n.cindex!=undefined&&n.cindex!=null)if([38,40].contains(t.keyCode))t.preventDefault(),t.stopPropagation();else return!0;else t.keyCode!=37&&(t.preventDefault(),t.stopPropagation());if(s=this.viewKeyboard.onKeydown(n,t),typeof s=="boolean")return s}if(f||u||e){var l=this._isEventFromCell(n,t,i,r,"keydown"),h=this.viewEditLayer&&this.viewEditLayer.isViewMode(),g=this.__core.data.column.getById(f,u),o=this.dataRow.getViewDataCellMap(f,u,e),v=o&&o.cellInfo&&o.cellInfo.editControlType,c=this.dataColumn.getAll(f),y=c[0],p=c[c.length-1];switch(t.which){case 37:this.__core.history&&this.__core.history.executeUndo();break;case 39:this.__core.history&&this.__core.history.executeRedo()}if((!n.gridSectionType||!n.gridColumnID||t.which!=32||!this.dataCheckbox.getCheckboxUse(n.gridSectionType,n.gridColumnID))&&this.optCommon.gridType==this.constValue.gridType.editable){if(!l&&h)n.gridSectionType=f,n.gridColumnID=u,n.gridDataKey=e;else if(!l&&!h)return;if([37,39].contains(t.which)&&!h&&this.constValue.controlInWidget[v]||t.which==37&&h&&u==y.id||t.which==39&&h&&u==p.id)return;var w=f,b=u,k=e,d=this.viewEditLayer.getInstance();if(f&&u&&e&&d,s=this.viewKeyboard.onKeydown(n,t),s.isPreventDefault)return o=this.dataRow.getViewDataCellMap(n.gridSectionType,n.gridColumnID,n.gridDataKey),a=o.cellInfo&&o.cellInfo.editControlType,s.isFocusInWidget?this.viewEditLayer.setStateOpenPopup(!1):!s.isMoved&&this.constValue.controlInWidget[a]&&this.viewEditLayer.render(w,b,k),t.preventDefault(),t.stopPropagation(),!1;s.isPreventDefault!=!0&&[37,38,39,40].contains(t.which)&&(o=this.viewCell.getCellElement(n.gridSectionType,n.gridColumnID,n.gridDataKey),o&&o.map&&o.map.cellInfo&&o.map.cellInfo.editControlType=="widget.textarea"||this.__customEvents.fire("click",o.cell,{shiftKey:n.shiftKey,altKey:n.altKey,ctrlKey:n.ctrlKey,ignoreDetail:!0}));this.__fn.setLastUpdateTime()}}}.bind(this),ecount.common.isChrome||this.optCommon.gridType!=this.constValue.gridType.editable||[9,13].contains(t.keyCode)?o():o()},onKeydownOthers:function(){var n=this.viewEditLayer&&this.viewEditLayer.isViewMode();this.optCommon.gridType==this.constValue.gridType.editable&&n&&this.viewEditLayer.show(this.constValue.dataType.modeInput)},onKeyup:function(n,t){if(n.gridSectionType&&n.gridColumnID&&n.gridDataKey){if([this.constValue.gridType.list,this.constValue.gridStyle.tree].contains(this.optCommon.gridType)&&this.optKeyboard.useMoveCursor)this.viewKeyboard.onKeyup(n,t);this.emitEvent(n,t,"keyup",{})}},onKeyUpArrowUp:function(n,t){this.onKeyup(n,t)},onKeyUpArrowDown:function(n,t){this.onKeyup(n,t)},onKeydownArrowUp:function(n,t){this.onKeydown(n,t)},onKeydownArrowDown:function(n,t){this.onKeydown(n,t)},onKeydownESC:function(n){var i=this.dataRow.getValue(n.gridSectionType,n.gridColumnID,n.gridDataKey)||"",t=this.viewEditLayer&&this.viewEditLayer.getInstance();this.optCommon.gridType==this.constValue.gridType.editable&&t&&(t.setValue(i),this.viewEditLayer.show(ecount.config.user.IS_SLIP_INPUTTYPE_MOVE?this.constValue.dataType.modeView:this.constValue.dataType.modeInput),this.viewEditLayer.focusAndSelect())},onKeydownBackspace:function(){var n=this.viewEditLayer&&this.viewEditLayer.isViewMode();this.optCommon.gridType==this.constValue.gridType.editable&&n&&this.viewEditLayer.show(this.constValue.dataType.modeInput)},preInitExecuteSort:function(){},onScroll:function(n){var e,h,c,l,t,i,r,a;try{this.view&&this.view.fix&&this.view.fix.getDrawCount()<=1&&(e=this.view.fix.isFocused(),e&&(h=this.view.fix.focus.sectionType,c=this.view.fix.focus.columnId,l=this.view.fix.focus.rowDataKey),t=this.__core.activeSectionType,i=this.__core.activeColumnId,r=this.__core.activeRowId,this.view.fix.scrollCloneTable(n,{afterCreateClone:function(){var u=t&&i&&r,f=this.view.fix.getCloneCellElement(t,i,r),o=f&&_.isElement(f.cell),n=_.isNull(u)?null:this.dataRow.getViewDataCellInfo(t,i,r),s=_.isNull(n)?!1:this.constValue.controlInGrid[n&&n.controlType];!e&&u&&o&&!s&&(this.viewEditLayer.blur(t,i,r),this.viewEditLayer.commit(),this.viewEditLayer.render(t,i,r))}.bind(this),beforeRemoveClone:function(){e&&(this.viewEditLayer.blur(h,c,l),this.viewEditLayer.commit(),this.viewEditLayer.render(h,c,l))}.bind(this)}))}catch(v){}if(this.optCommon.renderType==this.constValue.gridRenderType.salaryPayrollBookList&&this.optLayout.scrollContainer){var o=this.optLayout.layer.offsetHeight,y=o,p=o,w=o,b=o,u=this.optLayout.scrollContainer.scrollHeight,f=Math.ceil(this.optLayout.scrollContainer.scrollTop),k=this.optLayout.scrollContainer.offsetHeight,s=this.optLayout.scrollContainer.clientHeight;ecount.gridV2.logger.log("scrollHeight: %s, scrollTop: %s, offsetHeight: %s, clientHeight: %s",this.optLayout.scrollContainer.scrollHeight,this.optLayout.scrollContainer.scrollTop,this.optLayout.scrollContainer.offsetHeight,s);f!=0&&f!=undefined&&f!=null&&(a=0,this.__core.pageInfo&&this.__core.pageInfo.forEach(function(n){a=Math.max(a,n.bottomHeight-n.topHeight)}.bind(this)),this.__core.pageInfo&&this.__core.pageInfo.some(function(n,t,i){var r=n.el;r||(r=this.optLayout.container.querySelector("[print-page='"+n.key+"']"));n.el=r;u-(f+s)<5&&u<=n.topHeight+5&&u+s>=n.topHeight&&(r.classList.contains("hide")?r.classList.remove("hide"):r.classList.contains("invisible")&&r.classList.remove("invisible"));this.optLayout.moveScrollTop>f?u<=n.topHeight&&u+s>=n.topHeight&&ecount.global.setTimeout(this.optCommon.ecPageId,function(){this.optLayout.scrollContainer.scrollTop=this.optLayout.moveScrollTop;i.length-1===t&&(this.optLayout.moveScrollTop=null)}.bind(this),0):this.optLayout.moveScrollTop=null}.bind(this)))}},onResize:function(){this.__core.view&&this.__core.view.fix&&this.__core.view.fix.getDrawCount()<=1&&this.__core.view.fix.setCloneTablePosition()},onPopupDragStop:function(){this.__core.view&&this.__core.view.fix&&this.__core.view.fix.getDrawCount()<=1&&this.__core.view.fix.setCloneTablePosition()},onPaste:function(n,t){var i,r;return this.optEditable.isClipboardMode==!0&&this.__core.isActive&&(i={columnInfo:this.__core.data.column.getAll(this.tbodyType,this.constValue.returnType.single,!1,"custom",{isNotIndexSort:!0}),columnMap:this.__core.data.column.dataRow._trMap,columnId:this.__core.activeColumnId,rowKey:this.__core.activeRowId,columnIndexAddition:this.__core.fn.getColumnIndexAddtionCount(this.tbodyType),exceptColumnCounter:this.optEditable.exceptColumnCounter,clipboardKeyword:this.optEditable.clipboardKeyword},this.__core.view.clipboard.setOptions(i),r=this.__core.view.clipboard.getValue(t),this.viewEditLayer.blur(this.__core.activeSectionType,this.__core.activeColumnId,this.__core.activeRowId),this.viewEditLayer.commit(),this.emitEvent({gridSectionType:this.__core.activeSectionType,gridColumnID:this.__core.activeColumnId,gridDataKey:this.__core.activeRowId,value:n.value},t,"blur"),this.optEvent.clipboardCallback&&this.optEvent.clipboardCallback(r)),!1},onContextmenu:function(n,t){this.optEvent.useRightClick==!0&&t.button==2&&this.onClick.apply(this,arguments)},initGlobalValue:function(n){this.constValue=ecount.grid.constValue;this.theadType=this.constValue.sectionType.thead;this.tbodyType=this.constValue.sectionType.tbody;this.tfootType=this.constValue.sectionType.tfoot;this.__core=n.core;this.__customEvents=this.__core.customEvents;this.__fn=this.__core.fn;this.__view=n.view;this.__setting=n.setting;this.__renderer=this.__core.render;this.__events=n.__events;$.extend(this,n.mixinOption);this.dataShaded=this.__core.data.shaded;this.dataSortable=this.__core.data.sortable;this.dataCheckbox=this.__core.data.checkbox;this.viewKeyboard=this.__core.view.keyboard;this.calledClickEvent=!1;this.calledFocusEventByClicked={};this.preOverRowKey=null;this.multiCheckBulk={}},init:function(n){this.initGlobalValue(n)},emitEvent:function(n,t,i,r,u){var tt,f,s,b,it,k;t=t||{};i=i||n.type;r=r||{};u=u||{};var e=n.gridSectionType||this.__core.lastFocusedActiveSectionType,o=n.gridDataKey||this.__core.lastFocusedActiveRowId,ft=this.dataRow.getAll(e),et=this.dataColumn.getAll(e);if(this.constValue.rowType&&ft.length!=0&&et.length!=0){var d=this.dataRow.getById(e,o),ot=d[this.constValue.rowVariableNames.rowType],g=ot==this.constValue.rowType.separate?this.tfootType:e,l=n.gridColumnID||this.__core.lastFocusedActiveColumnId,h=this.dataColumn.getById(g,l),c=this.dataRow.getViewDataCellMap(e,l,o),st=[this.constValue.tableIdPrefix+c.tableId,c.rowInfo.tableIndex].join("-");if(!this.viewRow.defaultDatas.tableKeyList[st])return[!1];var ht=this.viewRow.getRowElement(e,o,c.cellInfo.columnRowIdx),rt=this.viewCell.getCellElement(e,l,o),w=u.eventTarget||["system","custom"],y,a=[],nt,v=n.message?n.message.data:this.dataRow.getById(e,o,!0),p=c.cellInfo.editControlType||c.cellInfo.controlType,ut=rt.cell;["change","setNextFocus"].contains(i)&&(["addCode","addCodesAll","removeCodes","removeCodesAll"].contains(n.type)||(v[h.propertyName]=n.value));p=="ecount.gridV2.widget.rowItemCheckbox"&&(ut=t.target);["click","setNextFocus","focus"].contains(i)&&(this.constValue.controlInWidget[p]||["widget.code.serialCodeItemNew","ecount.gridV2.widget.link","ecount.gridV2.widget.link.downloadMenubox","ecount.gridV2.widget.link.downloadFileAndSlip","ecount.gridV2.widget.link.download"].contains(p))?tt=v[h.propertyName]:["itemSelect","change","keydown","blur"].contains(i)&&(tt=n.value);f={event:t,gridId:this.optCommon.ecGridId,controlType:p&&p.replace(/^ecount.gridV2./g,""),targetRow:ht,target:ut,clonedTarget:rt.cell,sectionType:e,rowKey:o,rowIdx:c.rowInfo.trIdx&&c.rowInfo.trIdx[0],columnId:h.originalId?h.originalId:l,originalColumnId:h.originalId,realColumnId:l,callIdx:-1,dateValue:"",sDateValue:"",eDateValue:"",oldValue:this.__core.oldValue,newValue:tt,selectedLabel:r.selectedLabel,childElementId:r.childElementId||-1,childElementIdx:n.cindex,subDataIdx:-1,subControlType:null,funcChangeCurrentValue:function(){},triggerBy:t.triggerBy||"native",triggerByEventType:t.eventType,specialValue:t.specialValue};for(key in r)f[key]=r[key];for(s=0;s<w.length;s++)if((y=[i,e,l,p,w[s]].join(ecount.constValue.gridDelimiter),this.__core.events.exist(y))&&c.cellInfo.eventKeyByEventType[w[s]][i]){if(b=$.extend(!0,{},t),e==this.theadType?b.type=this.constValue.headerEventTypePrefix+i:e==this.tbodyType&&(b.type=this.constValue.eventTypePrefix+i),w[s]=="custom"?(it=n.message?n.message.data:this.dataRow.getById(e,o),v[h.propertyName]!=it[h.propertyName]&&["change","setNextFocus"].contains(i)&&(["addCode","addCodesAll","removeCodes","removeCodesAll"].contains(n.type)||(v[h.propertyName]=it[h.propertyName])),f.columnInfo=this.dataColumn.getById(g,l,!0),f.locationType=f.columnInfo.locationType||null,f.columnProperty=f.columnInfo.propertyName,f.rawRowItem=v,f.rowItem=v,f.oldRowItem=r.oldRowItem,f.oldValue=r.oldValue||f.oldValue,f.rowId=o,n.message?a.push(this.__core.events.safeCall(y,o,f,n)):["ecount.gridV2.widget.link.downloadMenubox","ecount.gridV2.widget.link.downloadFileAndSlip","ecount.gridV2.widget.link.downloadMenubox"].contains(c.cellInfo.controlType)?a.push(this.__core.events.safeCall(y,o,d,f.fileIdx)):(k=this.__core.events.safeCall(y,b,f,n),i=="isBeginEdit"&&k==undefined&&(k=!0),a.push(k))):(f.columnInfo=this.dataColumn.getById(g,l),f.locationType=f.columnInfo.locationType||null,f.columnProperty=f.columnInfo.propertyName,f.rawRowItem=v,f.rowItem=v,f.oldValue=d[f.columnProperty],a.push(this.__core.events.safeCall(y,b,f,n))),w[s]=="system"&&a[s]===!1)return!1;$.isFunction(a[s])&&(nt=a[s])}return nt&&nt(),a}},_setStore:function(n,t,i,r){r=r||{};var u=n.gridSectionType,f=n.gridColumnID,e=n.gridDataKey;r.gridId=this.optCommon&&this.optCommon.ecGridId;r.cid=n.cid;r.pcid=n.pcid;r.cindex=n.cindex;r.sectionType=u;r.columnId=f;r.rowKey=e},_isEventFromCell:function(n,t,i,r,u){var f,e;return(this.optCommon.useImageListTypeGrid===!0&&(n.gridSectionType=this.tbodyType),f=n.gridSectionType&&n.gridColumnID&&n.gridDataKey,!f&&i&&i.gridControlArea&&(e=[u,i.gridControlArea,i.id,i.controlType,"custom"].join(ecount.constValue.gridDelimiter),r.widget=i,this.__core.events.safeCall(e,t,r,n)),this.optCommon.gridType==this.constValue.gridType.editableForm)?n.ecService=="service.layer":f},_isEventFromEditLayerCell:function(n){var t=this.viewEditLayer.getActiveCell();return n.gridSectionType==t.activeSectionType&&n.gridColumnID==t.activeColumnId&&n.gridDataKey==t.activeRowId},_getAddableCount:function(){var t=this.__core.data.column.getColumnCount(this.theadType),n=this.optColumn.autoAddColumnCount,i=this.optEditable.editLimitAddColumn;return t>i?n=0:t+n>i&&(n=i-t),n},_getAddColumns:function(n,t){return t.columns.map(function(t){return t=_.merge({},t),t.id=(t.id||"tempColumnId")+"_"+this.optColumn.addedColumnCount,t.propertyName=(t.propertyName||t.id)+"_"+this.optColumn.addedColumnCount,t.editableState=typeof t.editableState=="undefined"?this.optCommon.gridType==this.constValue.gridType.editable?1:-1:columns[i].editableState,t.isShadow=n===this.theadType?"1":"0",t.font="",t.columnOption=t.columnOption||{},t.footerOption=t.footerOption||{},t.controlOption=t.controlOption||{},this.dataColumn.makeColumnDataType(n,t),t.customCell&&this.optColumn[n]&&(this.optColumn[n].customCell[t.id.toLowerCase()]=t.customCell),[t]}.bind(this))},_addColumn:function(n){var s,f,c;n=n||{};var l=this._getAddableCount(),a=n.direction||"right",h=this.optColumn.autoAddColumnInfo,r,t,i,e,o,u;for(this.optCommon.columnType===this.constValue.columnType.single?r=[this.theadType]:this.optCommon.columnType===this.constValue.columnType.multi&&(r=[this.theadType,this.tbodyType,this.tfootType]),u={sectionType:this.theadType,right:-1},s=0;s<l;s++){for(o=this.dataColumn.getAll(this.theadType,this.constValue.returnType.multi),u.right=!_.isEmpty(o)&&o[0].length-1,e=[],f=0,c=r.length;f<c;f++){if(t=r[f],i=h[t]&&h[t](),i&&i.autoCalculate&&Object.keys(i.autoCalculate).forEach(function(n){var r=n+"_"+this.optColumn.addedColumnCount;this.optColumn[t].autoCalculate[r]=i.autoCalculate[n]}.bind(this)),u.right==-1||_.isEmpty(i)){this.optCommon.columnType===this.constValue.columnType.single&&t===this.tbodyType;continue}e.push({sectionType:t,columns:this._getAddColumns(t,i)})}this.__fn.__columnAdd(a,u,e,n);this.optColumn.addedColumnCount++}},_downCheckbox:function(n,t){var i=n.gridSectionType,r=n.gridColumnID,f=n.gridDataKey,a=!0,v,u,c,h,e,o,l,y,s;if(!_.isEmpty(i)&&!_.isEmpty(r)&&!_.isEmpty(f)&&(u=this.dataRow.getIndexById(i,f),c=this.dataRow.getViewDataCellMap(i,r,f),v=_.merge(this.constValue.nativeControlInWidgetCheckbox,{"ecount.gridV2.widget.checkbox":!0,"ecount.gridV2.widget.rowItemCheckbox":!0}),!!c.cellInfo&&v[c.cellInfo.controlType]&&(this.preOverRowKey=f,n.oType=="mousedown"&&t.target.tagName==="INPUT"&&(this.isCheckboxDragStart=!0),n.oType=="click"))){if(t.shiftKey&&r===this.preColumnId){if(h=this.dataCheckbox.getMaxCount(i,r),e=(u>this.preRowIndex?this.preRowIndex:u)+1,o=u<this.preRowIndex?this.preRowIndex:u,h>0&&h<o-e&&(o=e+h-1),this.optCheckbox.useMultiCheckBulk==!0){for(s=e;s<o;s++)l=this.dataRow.getIdByIndex(i,s),y=this.dataCheckbox.isChecked(i,r,f),this.multiCheckBulk[l]={rowKey:l,index:s};a=!1}this.__core.fn.excuteMultiCheckbox(i,r,{start:e,end:o,isRunChange:a})}this.preColumnId=r;this.preRowIndex=u;this.optCheckbox.useMultiCheckBulk==!0&&this._multiChecked()}},_dragCheckbox:function(n,t){var u=n.gridSectionType,i=n.gridColumnID,r=n.gridDataKey,l,s,e,o,h,c,f;_.isEmpty(u)||_.isEmpty(i)||_.isEmpty(r)||(o=this.dataRow.getViewDataCellMap(u,i,r),l=_.merge(this.constValue.nativeControlInWidgetCheckbox,{"ecount.gridV2.widget.checkbox":!0,"ecount.gridV2.widget.rowItemCheckbox":!0}),o&&o.cellInfo&&l[o.cellInfo.controlType]&&n.mouseButtons===1&&(h=!0,this.preColumnId=i,s=this.dataRow.getById(u,r),n.oType!="mouseover"||_.isNil(this.preOverRowKey)||this.preOverRowKey===r?n.oType=="mouseout"&&this.isCheckboxDragStart&&(this.isCheckboxDragStart=!1,e=s[i]||!1):(this.preOverRowKey=r,e=s[i]||!1),this.optCheckbox.useMultiCheckBulk==!0&&(this.multiCheckBulk[this.preOverRowKey]={rowKey:this.preOverRowKey,index:this.dataRow.getIndexById(u,this.preOverRowKey)},h=!1),$.isEmpty(e)||(c={isRunChange:h},f=$(t.target).closest("table#grid-main"),f&&f.length>0&&f[0].hasAttribute("data-current-page")&&_.merge(c,{currentPage:Number(f.attr("data-current-page"))}),this.__core.fn.executeCheckbox(u,i,r,!e,c))))},_multiChecked:function(){var n=Object.getOwnPropertyNames(this.multiCheckBulk),t,i;n.length>0&&(t=n.sort(function(n,t){return this.multiCheckBulk[n].index>this.multiCheckBulk[t].index?1:this.multiCheckBulk[n].index<this.multiCheckBulk[t].index?-1:0}.bind(this)),i=t.map(function(n){return this.multiCheckBulk[n].value=this.dataCheckbox.isChecked(this.tbodyType,this.preColumnId,this.multiCheckBulk[n].rowKey),this.multiCheckBulk[n].rowData=this.dataRow.getById(this.tbodyType,this.multiCheckBulk[n].rowKey),this.multiCheckBulk[n]}.bind(this)),this.__events&&this.__events._triggerEvent(ecount.grid.event.list.multiChecked,{},{multiCheckBulk:i}));this.preOverRowKey=null;this.multiCheckBulk={}}};ecount.gridV2.widget.systemEventHandler={"ecount.gridV2.widget.checkbox":{click:function(n,t,i){if(n.target.tagName=="INPUT"||n.target.tagName=="LABEL"){var r=t.originalColumnId||i.gridColumnID;this.setting.getCheckboxIgnore(i.gridSectionType,r)?this.data.row.setValue(i.gridSectionType,r,i.gridDataKey,t.checked,{isRunChange:!1,realColumnId:t.realColumnId}):this.data.checkbox.getCheckboxUse(i.gridSectionType,r)&&this.fn.executeCheckbox(i.gridSectionType,r,i.gridDataKey,t.checked,{isRunChange:!1,realColumnId:t.realColumnId})}}},"ecount.gridV2.widget.checkbox.number":{click:function(n,t,i){if(n.target.tagName=="INPUT"||n.target.tagName=="LABEL"){var r=t.originalColumnId||i.gridColumnID;this.data.checkbox.getCheckboxUse(i.gridSectionType,r)&&this.fn.executeCheckbox(i.gridSectionType,r,i.gridDataKey,t.checked,{isRunChange:!1})}}},"ecount.gridV2.widget.rowItemCheckbox":{click:function(n,t,i){if(n.target.tagName=="INPUT"&&this.data.checkbox.getCheckboxUse(i.gridSectionType,i.gridColumnID)){var u={isRunChange:!1},r=$(n.target).closest("table#grid-main");r&&r.length>0&&r[0].hasAttribute("data-current-page")&&_.merge(u,{currentPage:Number(r.attr("data-current-page")),ctrlKey:n.ctrlKey,shiftKey:n.shiftKey});this.fn.executeCheckbox(i.gridSectionType,i.gridColumnID,i.gridDataKey,n.target.checked,u)}}},"ecount.gridV2.widget.link.caret":{click:function(n,t,i){var r=this.data.row.getViewDataCellMap(i.gridSectionType,i.gridColumnID,i.gridDataKey),u=this.data.optColumn[i.gridSectionType].duplicationPoint,f=r.cellInfo&&r.cellInfo.columnRowIdx>0&&u&&u.length>1;f&&(i.gridColumnID=i.gridColumnID.replace("∬∬∬∬∬"+r.cellInfo.columnRowIdx,""));(n.target.tagName=="A"||n.target.tagName=="SPAN"&&n.target.className.indexOf("fa")>-1)&&this.fn.executeHeaderSort(i.gridSectionType,i.gridColumnID,i.gridDataKey)}},"ecount.gridV2.widget.link":{click:function(n,t,i){this.data.shaded&&this.data.shaded.onClick(i,n);var r=this.view.cell.getCellElement(i.gridSectionType,i.gridColumnID,i.gridDataKey),u=r.map&&r.map.cellInfo&&r.map.cellInfo.dropdownmenuData;if(u&&!t.childElementId)return this.fn.showLayer(i.gridSectionType,i.gridColumnID,i.gridDataKey,{type:"click"}),!1}},"ecount.gridV2.widget.link.faLabel":{click:function(n,t,i){this.data.shaded&&this.data.shaded.onClick(i,n)}},"ecount.gridV2.widget.link.scheduleMore":{click:function(n,t,i){this.data.shaded&&this.data.shaded.onClick(i,n)}},"ecount.gridV2.widget.rowItemMoveable":{click:function(n,t){if(t.sectionType=="tbody"&&this.setting.getRowmoveableIsEventTrigger()){var i=this.data.column.getAll(t.sectionType,ecount.grid.constValue.returnType.multi);this.fn.addRow(t.sectionType,1,t.rowIdx/i.length,{addDirection:ecount.grid.constValue.rowAddType.up,moveScroll:!1})}}},"widget.select":{change:function(n,t,i){var r=t.originalColumnId||t.columnId;this.fn.setCell(t.sectionType,r,t.rowKey,t.newValue,{isRunChange:!1,isRunComplete:!1,callByType:"system",cindex:i&&!$.isEmpty(i.cindex)?i.cindex:0})}},"widget.combine.exchangeType":{change:function(n,t){var i=t.originalColumnId||t.columnId;this.fn.setCell(t.sectionType,i,t.rowKey,t.newValue,{isRunChange:!1,isRunComplete:!1,callByType:"system"})}},"ecount.gridV2.widget.flow.order":{click:function(n,t){var i=n.target.tagName.toUpperCase()=="A"?n.target:n.target.parentElement;t.childElementId=i.getAttribute("childelementid");t.childElementIndex=i.getAttribute("childElementIndex")}},"ecount.gridV2.widget.flow.slide":{mouseover:function(n){var t;if(n.target.tagName=="A"?t=$(n.target).parent().next("ul"):n.target.tagName=="SPAN"&&(t=$(n.target).next("ul")),t&&t.length>0){t.css({top:"-5000px",left:"-5000px"});t.addClass("show");t.addClass("position-fixed");var f=$(window).height(),e=this.$container.closest("div.wrapper-frame-body").find(".footer").height(),i=t.parent()[0].getBoundingClientRect(),u=t.height(),r={x:null,y:null};r.x=i.bottom+u>=f-e?i.top-u+"px":i.bottom+"px";r.y=i.left+"px";t.css({top:r.x,left:r.y,"min-width":"0",width:i.width})}},mouseout:function(n){var t=$(n.target).closest("td").find("ul");t&&t.hasClass("show")&&t.removeClass("show")}},"ecount.gridV2.widget.flow.slideGroup":{mouseover:function(n){var t;if(n.target.tagName=="A"?t=$(n.target).parent().next("ul"):n.target.tagName=="SPAN"&&(t=$(n.target).next("ul")),t&&t.length>0){t.css({top:"-5000px",left:"-5000px"});t.addClass("show");t.addClass("position-fixed");var f=$(window).height(),e=this.$container.closest("div.wrapper-frame-body").find(".footer").height(),i=t.parent()[0].getBoundingClientRect(),u=t.height(),r={x:null,y:null};r.x=i.bottom+u>=f-e?i.top-u+"px":i.bottom+"px";r.y=i.left+"px";t.css({top:r.x,left:r.y,"min-width":"0",width:i.width})}},mouseout:function(n){var t=$(n.target).closest("td").find("ul");t&&t.hasClass("show")&&t.removeClass("show")}},"ecount.gridV2.widget.flow.slideGroupDynamic":{mouseover:function(n){var t;if(n.target.tagName=="A"?t=$(n.target).parent().next("ul"):n.target.tagName=="SPAN"&&(t=$(n.target).next("ul")),t&&t.length>0){t.css({top:"-5000px",left:"-5000px"});t.addClass("show");t.addClass("position-fixed");var f=$(window).height(),e=this.$container.closest("div.wrapper-frame-body").find(".footer").height(),i=t.parent()[0].getBoundingClientRect(),u=t.height(),r={x:null,y:null};r.x=i.bottom+u>=f-e?i.top-u+"px":i.bottom+"px";r.y=i.left+"px";t.css({top:r.x,left:r.y,"min-width":"0",width:i.width})}},mouseout:function(n){var t=$(n.target).closest("td").find("ul");t&&t.hasClass("show")&&t.removeClass("show")}},"ecount.gridV2.widget.link.downloadMenubox":{click:function(n,t,i){var r,s;if(t.childElementId){var f=this.setting.getContextmenuDownloadCallback(),u=t.rowItem[t.columnProperty],e="",o=-1;for(r=0,s=u.length;r<s;r++)if(u[r].name==t.childElementId){o=r;e=u[r].url;t.fileIdx=r;break}f&&f(e,{preventDefault:function(){}},t,o)}else return this.fn.showLayer(i.gridSectionType,i.gridColumnID,i.gridDataKey,{type:"click"}),!1}},"ecount.gridV2.widget.link.downloadFileAndSlip":{click:function(n,t,i){var r,s;if(t.childElementId){var f=this.setting.getContextmenuDownloadCallback(),e=t.rowItem[i.gridColumnID],o=e?e.VALUES:[],u=-1;for(r=0,s=o.length;r<s;r++)if(o[r].name==t.childElementId){u=r;t.fileIdx=r;break}f&&u>-1&&f(i.gridDataKey,t.rowItem,u)}else return this.fn.setDropdownListShowLayer(i,t,"/SVC/Common/Infra/GetRefData",{className:"dropdown-menu-icon-list dropdown-menu-fixed-height"}),!1}},"ecount.gridV2.widget.link.download":{click:function(n,t,i){var r,o;if(t.childElementId){var f=this.setting.getContextmenuDownloadCallback(),e=t.rowItem.VALUES,u=-1;for(r=0,o=e.length;r<o;r++)if(e.name==t.childElementId){u=r;t.fileIdx=r;break}f&&u>-1&&f(i.gridDataKey,t.rowItem,u)}else return this.fn.setDropdownListShowLayer(i,t,"/Common/Infra/GetFileInfo",{containsValue:!0}),!1}},"ecount.gridV2.widget.mergeAddRow":{click:function(n,t,i){var r=this.data.row.getIndexById(i.gridSectionType,i.gridDataKey);this.fn.addRow(i.gridSectionType,1,r,{isMergeAddRow:!0,addDirection:ecount.grid.constValue.rowAddType.down})}},"ecount.gridV2.widget.radio":{click:function(n,t,i){this.view.cell.setChecked(t.sectionType,i.gridColumnID,t.rowKey,!0)},change:function(n,t,i){var r=this.data.column.getById(t.sectionType,i.gridColumnID),u,f;r&&(u=r.propertyName,f=this.data.row.getById(t.sectionType,t.rowKey),f[u]!==undefined&&this.fn.setCell(t.sectionType,i.gridColumnID,t.rowKey,t.newValue,{isRunChange:!1,orginalColumnId:t.columnId,callByType:"system"}))}},"ecount.gridV2.widget.radio.number":{click:function(n){var t=$(n.target.parentElement).find("input:radio")[0];return t&&t.checked===!0?!1:!0}},"widget.code":{itemSelect:function(n,t,i){for(key in i)t[key]=i[key];t.message=i.message||{};t.message.subDataIdx=i.control.cIndex;t.message.subControlType=i.control.controlType}},"widget.date":{change:function(n,t,i){var o=[t.sectionType,t.columnId,t.rowKey].join(ecount.constValue.gridDelimiter),f=this.view.dataRow.getViewDataWidgetInstance(t.sectionType,o),e,r,u;f._setDate(i.cindex,i.value);e=f.getSYear();r=f.getSMonth();r=r.length==1?"0"+r:r;u=f.getSDay();u=u.length==1?"0"+u:u;f.isEmptyDate()?this.view.dataRow.setValue(t.sectionType,t.columnId,t.rowKey,"",{isRunChange:!1}):/\d+/g.test(e)&&/\d+/g.test(r)&&/\d+/g.test(u)&&this.view.dataRow.setValue(t.sectionType,t.columnId,t.rowKey,[e,r,u].join("-"),{isRunChange:!1})}},"widget.multiDate":{change:function(n,t){var s=[t.sectionType,t.columnId,t.rowKey].join(ecount.constValue.gridDelimiter),i=this.view.dataRow.getViewDataWidgetInstance(t.sectionType,s),r="",u="",o,e=!1,f;i.getSYear()!=""&&i.getSMonth()!=""&&i.getSDay()!=""&&(f=i.getSMonth().length>1?i.getSMonth():"0"+i.getSMonth(),r=String.format("{0}-{1}-{2}",i.getSYear(),f,i.getSDay()),e=!0);i.getEYear()!=""&&i.getEMonth()!=""&&i.getEDay()!=""&&(f=i.getEMonth().length>1?i.getEMonth():"0"+i.getEMonth(),u=String.format("{0}-{1}-{2}",i.getEYear(),f,i.getEDay()),e=!0);e&&(r=r?r:u,u=u?u:r,o={from:r,to:u},this.fn.setCell(t.sectionType,t.columnId,t.rowKey,o,{isRunChange:!1,callByType:"system"}))}},"widget.radio.multi":{change:function(n,t){this.fn.setCell(t.sectionType,t.columnId,t.rowKey,t.newValue,{isRunChange:!1,callByType:"system"})}},"ecount.gridV2.widget.imageFileBox":{click:function(n,t){var i=n.target.tagName.toUpperCase();if(["INPUT","LABEL"].contains(i))return i==="INPUT"&&this.fn.setCell(t.sectionType,t.columnId,t.rowKey,n.target.checked,{callByType:"system"}),!1}},"ecount.gridV2.widget.button.time":{click:function(n,t){var i=t.oldValue;typeof i=="boolean"&&this.fn.setCell(t.sectionType,t.columnId,t.rowKey,!i,{callByType:"system"})}},"ecount.gridV2.widget.columnfilter":{click:function(n){n.target.tagName=="BUTTON"&&this.view.filter&&this.view.filter.onClickHandler(n)}},"widget.calc":{blur:function(n,t){var i=[t.sectionType,t.columnId,t.rowKey].join(ecount.constValue.gridDelimiter),r=this.view.dataRow.getViewDataWidgetInstance(t.sectionType,i);this.fn.setCell(t.sectionType,t.columnId,t.rowKey,r.getValue(),{isBlur:!0})},change:function(){ecount.gridV2.logger.log(arguments)}}};ecount.gridV2.handler.filter={getDataList:function(n){var t=ecount.grid.constValue,u=t.sectionType.thead,f=t.sectionType.tbody,e=t.sectionType.tfoot,r=this.mixinOption.dataRow.getAll(n.gridSectionType),i;return i=this.mixinOption.dataCheckbox&&_.isEmpty(this.mixinOption.dataColumn.__datas)?this.mixinOption.dataCheckbox.dataColumn.getById(n.gridSectionType,n.gridColumnID):this.mixinOption.dataColumn.getById(n.gridSectionType,n.gridColumnID),{datas:r,column:i}}};ecount.gridV2.handler.selector={unselectable:function(){this.core.dropdownmenu.activeSectionType&&this.core.dropdownmenu.activeColumnId&&this.core.dropdownmenu.activeRowId&&this.core.dropdownmenu.event&&(this.core.dropdownmenu.activeSectionType=null,this.core.dropdownmenu.activeColumnId=null,this.core.dropdownmenu.activeRowId=null,this.core.dropdownmenu.event=null)},selectStart:function(n){var r=ecount.grid.constValue,c=r.sectionType.thead,l=r.sectionType.tbody,a=r.sectionType.tfoot,o=n.gridSectionType,s=n.gridColumnID,h=n.gridDataKey,e,u;if(n.startBoundary.reset(),n.endBoundary.reset(),e={startBoundary:n.startBoundary,endBoundary:n.endBoundary,element:null},u=this.mixinOption.viewCell.getCellElement(o,s,h),u.map.cellInfo.adjustmentValue!=1){var t=u.map.cellInfo.columnIdx,i=u.map.rowInfo.trIdx[u.map.cellInfo.columnRowIdx],f=this.mixinOption.dataRow.getViewDataRenderingTableMap(o,i);typeof f[t]=="object"&&f[t].type=="MERGE"?(n.startBoundary.addBoundary({top:i,left:t,bottom:i+((f[t][r.rowVariableNames.rowspanCount]||1)-1),right:t+((f[t][r.rowVariableNames.colspanCount]||1)-1)}),n.endBoundary.addBoundary({top:i,left:t,bottom:i+((f[t][r.rowVariableNames.rowspanCount]||1)-1),right:t+((f[t][r.rowVariableNames.colspanCount]||1)-1)}),e.element=u.cell):(n.startBoundary.addBoundary({top:i,left:t,bottom:i,right:t}),n.endBoundary.addBoundary({top:i,left:t,bottom:i,right:t}),e.element=u.cell)}return e},selectEnd:function(n){var r=ecount.grid.constValue,h=r.sectionType.thead,c=r.sectionType.tbody,l=r.sectionType.tfoot,e=n.gridSectionType,o=n.gridColumnID,s=n.gridDataKey,i=this.mixinOption.viewCell.getCellElement(e,o,s);if(i.map.cellInfo.adjustmentValue!=1){var t=i.map.cellInfo.columnIdx,u=i.map.rowInfo.trIdx[i.map.cellInfo.columnRowIdx],f=this.mixinOption.dataRow.getViewDataRenderingTableMap(e,u);return typeof f[t]=="object"&&f[t].type=="MERGE"?(n.endBoundary.addBoundary({top:u,left:t,bottom:u+((f[t][r.rowVariableNames.rowspanCount]||1)-1),right:t+((f[t][r.rowVariableNames.colspanCount]||1)-1)}),{endBoundary:n.endBoundary,element:i.cell}):(n.endBoundary.addBoundary({top:u,left:t,bottom:u,right:t}),{endBoundary:n.endBoundary,element:i.cell})}},select:function(){ecount.gridV2.logger.log("ecount.gridV2.handler.selector.select")},selectExtend:function(n){var f,y,h,r,i,e,o,d,u,t;ecount.gridV2.logger.log("ecount.gridV2.handler.selector.selectExtend");var s=ecount.grid.constValue,g=s.sectionType.thead,c=s.sectionType.tbody,tt=s.sectionType.tfoot,l=[g,c],a=l.indexOf(n.gridStartSectionType),v=l.indexOf(n.gridEndSectionType);if(a>v)for(f in n)n.hasOwnProperty(f)&&f.startsWith("gridStart")&&(y=n[f],h="gridEnd"+f.replace("gridStart",""),n[f]=n[h],n[h]=y);if(n.gridStartSectionType==n.gridEndSectionType){var p=Math.min(n.gridStartBoundary.top,n.gridEndBoundary.top),w=Math.min(n.gridStartBoundary.left,n.gridEndBoundary.left),b=Math.max(n.gridStartBoundary.right,n.gridEndBoundary.right),k=Math.max(n.gridStartBoundary.bottom,n.gridEndBoundary.bottom),it=this.mixinOption.dataColumn.getAll(c,s.returnType.multi),nt={top:p,left:w,right:b,bottom:k},t=this.mixinOption.dataRow.extendRowBoundary(n.gridStartSectionType,n.gridStartColumnSectionType,{top:p,left:w,right:b,bottom:k},nt);n.gridStartBoundary.top=t.top;n.gridStartBoundary.bottom=t.bottom;n.gridStartBoundary.left=t.left;n.gridStartBoundary.right=t.left;n.gridEndBoundary.top=t.top;n.gridEndBoundary.bottom=t.bottom;n.gridEndBoundary.left=t.left;n.gridEndBoundary.right=t.right}else{for(r={top:0,left:0,bottom:0,right:0},i={top:0,left:0,bottom:0,right:0},r.top=n.gridStartBoundary.top,r.left=Math.min(n.gridStartBoundary.left,n.gridEndBoundary.left),r.bottom=n.gridStartBoundary.bottom,r.right=Math.max(n.gridStartBoundary.right,n.gridEndBoundary.right),i.top=n.gridEndBoundary.top,i.left=Math.min(n.gridStartBoundary.left,n.gridEndBoundary.left),i.bottom=n.gridEndBoundary.bottom,i.right=Math.max(n.gridStartBoundary.right,n.gridEndBoundary.right),e=this.core.fn.getRangeInformationByRange(n.gridStartSectionType,r,n.gridEndSectionType,i,{returnType:"array"}),o=0,d=e.length;o<d;o++)u=e[o],u.sectionType==e[0].sectionType?(t=this.mixinOption.dataRow.extendBoundary(u.sectionType,u.columnSectionType,u.columnBoundary,u.columnBoundary),r.top=Math.min(r.top,t.top),r.bottom=Math.max(r.bottom,t.bottom)):(t=this.mixinOption.dataRow.extendBoundary(u.sectionType,u.columnSectionType,u.columnBoundary,u.columnBoundary),i.top=Math.min(i.top,t.top),i.bottom=Math.max(i.bottom,t.bottom)),i.left=Math.min(i.left,t.left),i.right=Math.max(i.right,t.right),r.left=Math.min(r.left,t.left),r.right=Math.max(r.left,t.right),(t.top!=u.columnBoundary.top||t.left!=u.columnBoundary.left||t.bottom!=u.columnBoundary.bottom||t.right!=u.columnBoundary.right)&&(e.forEach(function(n){n.columnBoundary.top=t.top;n.columnBoundary.left=i.left=Math.min(i.left,t.left);n.columnBoundary.bottom=t.bottom;n.columnBoundary.right=i.right=Math.max(i.right,t.right)}),o=-1);a>v?(_.extend(n.gridEndBoundary,r),_.extend(n.gridStartBoundary,i)):(_.extend(n.gridStartBoundary,r),_.extend(n.gridEndBoundary,i))}return{startSectionType:n.gridStartSectionType,endSectionType:n.gridEndSectionType}},executeSelectionExtend:function(n){var i=ecount.grid.constValue,c=i.sectionType.thead,l=i.sectionType.tbody,a=i.sectionType.tfoot,u,s,f,h;ecount.gridV2.logger.log("ecount.gridV2.handler.selector.__selectExtend");var o=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridStartSectionType),r=n.boundary.get(),t,e=!1;for(u=r.top,s=r.bottom;u<=s;u++)for(f=r.left,h=r.right;f<=h;f++)t=o[u][f],["ROWSPAN_AND_COLSPAN","ROWSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(t.type)&&(t=o[t.trIdx][t.columnIdx]),e=n.boundary.mergeBoundary({top:t.trIdx,left:t.columnIdx,bottom:t.trIdx+((t[i.rowVariableNames.rowspanCount]||1)-1),right:t.columnIdx+((t[i.rowVariableNames.colspanCount]||1)-1)})||e;return e},draw:function(n){var o,c,s,l,h;ecount.gridV2.logger.log("ecount.gridV2.handler.selector.draw");var u=ecount.grid.constValue,a=u.sectionType.thead,v=u.sectionType.tbody,y=u.sectionType.tfoot,e=this.mixinOption.optLayout.$container.find(".wrapper-grid").length>0,t,r,f=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridStartSectionType),p=this.mixinOption.dataRow.getViewDataTrMapAll(n.gridStartSectionType),i={top:0,left:0,width:0,height:0,bottom:0,right:0};for(o=n.gridStartBoundary.top,c=n.gridEndBoundary.bottom;o<=c;)r={height:0},t=f[o][n.gridStartBoundary.left],["MERGE","NORMAL"].contains(t.type)&&(r=e?this.mixinOption.viewCell.getSizeByContainer(n.gridStartSectionType,t.columnId,t.rowId):this.mixinOption.viewCell.getSizeByScreen(n.gridStartSectionType,t.columnId,t.rowId)),o+=t.type=="MERGE"&&(t[u.rowVariableNames.rowspanCount]||1)>1?t[u.rowVariableNames.rowspanCount]||1:1,i.height+=r.height;for(s=n.gridStartBoundary.left,l=n.gridEndBoundary.right;s<=l;)r={width:0},t=f[n.gridStartBoundary.top][s],["MERGE","NORMAL"].contains(t.type)&&(r=e?this.mixinOption.viewCell.getSizeByContainer(n.gridStartSectionType,t.columnId,t.rowId):this.mixinOption.viewCell.getSizeByScreen(n.gridStartSectionType,t.columnId,t.rowId)),s+=t.type=="MERGE"&&(t[u.rowVariableNames.colspanCount]||1)>1?t[u.rowVariableNames.colspanCount]||1:1,i.width+=r.width;return t=f[n.gridStartBoundary.top][n.gridStartBoundary.left],["ROWSPAN","ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(t.type)&&(t=f[t.trIdx][t.columnIdx]),r=e?this.mixinOption.viewCell.getSizeByContainer(n.gridStartSectionType,t.columnId,t.rowId):this.mixinOption.viewCell.getSizeByScreen(n.gridStartSectionType,t.columnId,t.rowId),i.top=r.top,i.left=r.left,t=f[n.gridEndBoundary.bottom][n.gridEndBoundary.right],["ROWSPAN","ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(t.type)&&(t=f[t.trIdx][t.columnIdx]),r=e?this.mixinOption.viewCell.getSizeByContainer(n.gridStartSectionType,t.columnId,t.rowId):this.mixinOption.viewCell.getSizeByScreen(n.gridStartSectionType,t.columnId,t.rowId),i.bottom=r.bottom,i.right=r.right,h=this.mixinOption.optLayout.container.getBoundingClientRect(),i.top=i.top-h.top,i.left=i.left-h.left,i.left-=this.mixinOption.optLayout.scrollContainer&&this.mixinOption.optLayout.scrollContainer.scrollLeft||0,i.top-=this.mixinOption.optLayout.scrollContainer&&this.mixinOption.optLayout.scrollContainer.scrollTop||0,i},drawHorizontal:function(n){for(var o,s,y,c,w,e,b,a,i=ecount.grid.constValue,k=i.sectionType.thead,d=i.sectionType.tbody,g=i.sectionType.tfoot,t={top:0,left:0,width:0,height:0},u=[k,d],v=!1,r=0,nt=u.length;r<nt;r++)if(o=this.mixinOption.dataRow.getAll(u[r]),o.length!=0){for(s=0,y=o.length;s<y;s++){var p=o[s],l=p[i.keyColumnPropertyName],tt=p[i.rowVariableNames.rowType],it=this.mixinOption.dataRow.getViewDataTrMap(u[r],l),rt=tt==i.rowType.separate?g:u[r],h=this.mixinOption.dataColumn.getAll(rt,i.returnType.multi),ft=h.length,ut=h[0].length,et=ut-1,f;for(c=0,w=it.rowInfo.trIdx.length;c<w;c++)f=this.mixinOption.viewRow.getSizeByScreen(u[r],l,c),t.height+=f.height}if(!v){for(e=n.boundary.left,b=n.boundary.right;e<=b;e++)ecount.common.isTrue(h[0][e].isMergeColumn)||(f=this.mixinOption.viewCell.getSizeByScreen(u[r],h[0][e].id,l),e==n.boundary.left&&(t.top=f.top,t.left=f.left),t.width+=f.width);v=!0}}return a=this.mixinOption.optLayout.container.getBoundingClientRect(),t.top=t.top-a.top,t.left=t.left-a.left,t.left-=this.mixinOption.optLayout.scrollContainer&&this.mixinOption.optLayout.scrollContainer.scrollLeft||0,t.top-=this.mixinOption.optLayout.scrollContainer&&this.mixinOption.optLayout.scrollContainer.scrollTop||0,t},getSectionType:function(){},afterInsideSelection:function(){var n;this.mixinOption.viewOuterHorizontal&&(n=this.mixinOption.viewOuterHorizontal.__datas.deactiveId,n&&this.mixinOption.viewOuterHorizontal.active(n));this.mixinOption.viewOuterVertical&&(n=this.mixinOption.viewOuterVertical.__datas.deactiveId,n&&this.mixinOption.viewOuterVertical.active(n))},isExternalSelection:function(n){var t=ecount.grid.constValue,u=t.sectionType.thead,f=t.sectionType.tbody,e=t.sectionType.tfoot,r=!0,i;return this.mixinOption.optForm.version==t.formVersion.third&&this.mixinOption.optCommon.columnType==t.columnType.multi&&(i=this.mixinOption.dataColumn.getIndexById(n.gridSectionType,t.returnColumnIndexType.multi,n.gridColumnID),n.gridBoundary.left<=i&&i<=n.gridBoundary.right&&(r=!1)),r},isSelectContinue:function(n,t){var y=this.mixinOption.viewSelector.getSelectionType(),i=ecount.grid.constValue,a=i.sectionType.thead,p=i.sectionType.tbody,s=i.sectionType.tfoot,k=i.sectionType.theadSlip,d=i.sectionType.tbodySlip,g=i.sectionType.tfootSlip,r,f,h,e;if(y==i.selectionType.allHorizontal)return!0;if(this.mixinOption.optCommon.columnType==i.columnType.multi){if(f=this.mixinOption.view.getSectionTypeByElement(t.target),f.sectionType==null&&f.detailSectionType==null)return returnValue;n.gridColumnSectionType=f.columnSectionType?f.columnSectionType:n.gridSectionType;n.gridDetailSectionType=f.detailSectionType?f.detailSectionType:n.gridDetailSectionType}if(this.mixinOption.optCommon.columnType==i.columnType.single?(h=[a],this.mixinOption.optRow[s].specialRowCount>0&&h.push(s)):this.mixinOption.optCommon.columnType==i.columnType.multi&&(h=[a,p,s]),h.contains(n.gridSectionType)){if(this.mixinOption.optCommon.columnType==i.columnType.single&&n.gridSectionType==s){var w=this.mixinOption.dataColumn.getAll(n.gridSectionType,i.returnType.multi),l=w[0].length,nt=l-1,b=this.mixinOption.dataRow.getIndexById(n.gridSectionType,n.gridDataKey),v=this.mixinOption.dataColumn.getIndexById(n.gridSectionType,i.returnColumnIndexType.multi,n.gridColumnID);return this.mixinOption.optEditable.specialRowMerge[b][i.rowVariableNames.mergeSet].find(function(n){var t=n[i.rowVariableNames.mergeStartIndex],e=Math.floor(t/l),r=t%l,u=n[i.rowVariableNames.colspanCount]||1,f=u-1;if(r<=v&&v<=r+f)return!0})}}else return!1;if(n.gridSectionType!=n.gridPrevSectionType)return!1;if(e=this.mixinOption.viewCell.getCellElement(n.gridSectionType,n.gridColumnID,n.gridDataKey),e.map.cellInfo.adjustmentValue!=1){var u=e.map.cellInfo.columnIdx,o=e.map.rowInfo.trIdx[e.map.cellInfo.columnRowIdx],c=this.mixinOption.dataRow.getViewDataRenderingTableMap(n.gridSectionType,o);r=typeof c[u]=="object"&&c[u].type=="MERGE"?{top:o,left:u,bottom:o+((c[u][i.rowVariableNames.rowspanCount]||1)-1),right:u+((c[u][i.rowVariableNames.colspanCount]||1)-1)}:{top:o,left:u,bottom:o,right:u};returnValue.isSelect=!(r.top>=n.gridBoundary.top&&r.bottom<=n.gridBoundary.bottom&&r.left>=n.gridBoundary.left&&r.right<=n.gridBoundary.right);r.top>=n.gridBoundary.top&&r.bottom<=n.gridBoundary.bottom&&r.left>=n.gridBoundary.left&&r.right<=n.gridBoundary.right?returnValue.isSelect=!1:(returnValue.isSelect=!0,returnValue.isAttachEvent=!0)}return returnValue},getColumnSectionType:function(n){var t=ecount.grid.constValue,f=t.sectionType.thead,e=t.sectionType.tbody,i=t.sectionType.tfoot,r=this.mixinOption.dataRow.getById(n.gridSectionType,n.gridDataKey),u=r[t.rowVariableNames.rowType];return u==t.rowType.separate?i:n.gridSectionType},isAutoMerge:function(n){var i=ecount.grid.constValue,o=i.sectionType.thead,s=i.sectionType.tbody,h=i.sectionType.tfoot,c=this.mixinOption.dataRow.getById(n.gridSectionType,n.gridDataKey),f=this.mixinOption.dataRow.getViewDataTrMap(n.gridSectionType,n.gridDataKey),e=f&&f.rowInfo,r,u,t;return e?(r=e[n.gridColumnID],!r)?!1:(u=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridSectionType),t=u[r.columnRowIdx][r.columnIdx],["ROWSPAN","COLSPAN","ROWSPAN_AND_COLSPAN"].contains(t.type)&&(t=u[t.trIdx][t.columnIdx]),!t)?!1:t[i.rowVariableNames.isAutoMerge]:!1},isIncludeAutoMerge:function(n){var u=ecount.grid.constValue,v=u.sectionType.thead,y=u.sectionType.tbody,p=u.sectionType.tfoot,h=this.mixinOption.dataRow.getViewDataTrMap(n.gridEndSectionType,n.gridEndDataKey),c=h&&h.rowInfo,f,e,t,i,r,o,l,s,a;if(!c||(f=c[n.gridEndColumnID],!f)||(e=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridEndSectionType),t=e[f.columnRowIdx][f.columnIdx],["ROWSPAN","COLSPAN","ROWSPAN_AND_COLSPAN"].contains(t.type)&&(t=e[t.trIdx][t.columnIdx]),!t))return!1;for(this.core.boundary.reset(),this.core.boundary.addBoundary(n.gridStartBoundary),this.core.boundary.addBoundary({top:t.trIdx,left:t.columnIdx,bottom:t.trIdx,right:t.columnIdx}),i=this.core.boundary.get(),i=this.mixinOption.dataRow.extendBoundary(n.gridStartSectionType,n.gridStartColumnSectionType,i,i),r=!1,o=i.top,l=i.bottom;o<=l;o++){for(s=i.left,a=i.right;s<=a;s++)if(r=e[o][s][u.rowVariableNames.isAutoMerge],r)break;if(r)break}return r},movePossible:function(n){function c(n,i,u){return i.startRow>-1&&i.endRow>-1&&n.startRow>-1&&n.endRow>-1?u.top==n.startRow&&u.bottom==n.endRow&&t-r!=u.right-u.left+1?{isPossibleHorizontal:!0}:u.top==i.startRow&&u.bottom==i.endRow&&t-r!=u.right-u.left+1?{isPossibleHorizontal:!0}:{isPossibleHorizontal:!1}:{isPossibleHorizontal:o.length==u.bottom-u.top+1&&t-r!=u.right-u.left+1}}function l(n,i,u){return i.startRow>-1&&i.endRow>-1&&n.startRow>-1&&n.endRow>-1?u.top==n.startRow&&u.bottom==n.endRow&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_DIFFERENT_ROWTYPE"}:u.top==i.startRow&&u.bottom==i.endRow&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_DIFFERENT_ROWTYPE"}:n.startRow<=u.top&&n.endRow>=u.bottom&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}:i.startRow<=u.top&&i.endRow>=u.bottom&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}:{isPossibleVertical:!1,verticalMethod:"NONE"}:{isPossibleVertical:o.length!=u.bottom-u.top+1&&t-r==u.right-u.left+1,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}}var u=ecount.grid.constValue,a=u.sectionType.thead,s=u.sectionType.tbody,h=u.sectionType.tfoot,i={isPossibleVertical:!1,isPossibleHorizontal:!1},e;this.mixinOption.optCommon.columnType==u.columnType.multi&&n.gridColumnSectionType==h&&(e=this.mixinOption.dataColumn.getAll(s,u.returnType.multi),n.gridBoundary.top-=e.length,n.gridBoundary.bottom-=e.length);var o=this.mixinOption.dataColumn.getAll(n.gridColumnSectionType||n.gridSectionType,u.returnType.multi),t=o[0].length,v=t-1,r=this.core.data.column.getSystemColumnCount(n.gridSectionType),f;return f=c(this.mixinOption.dataColumn.__datas[n.gridColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridColumnSectionType+"slip"],n.gridBoundary),i.isPossibleHorizontal=f.isPossibleHorizontal,f=l(this.mixinOption.dataColumn.__datas[n.gridColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridColumnSectionType+"slip"],n.gridBoundary),i.isPossibleVertical=f.isPossibleVertical,i.verticalMethod=f.verticalMethod,i.isPossibleVertical&&i.isPossibleHorizontal&&(i.isPossibleVertical=i.isPossibleHorizontal=!1),i}};ecount.gridV2.handler.selectorAllSection={unselectable:function(){this.core.dropdownmenu.activeSectionType&&this.core.dropdownmenu.activeColumnId&&this.core.dropdownmenu.activeRowId&&this.core.dropdownmenu.event&&(this.core.dropdownmenu.activeSectionType=null,this.core.dropdownmenu.activeColumnId=null,this.core.dropdownmenu.activeRowId=null,this.core.dropdownmenu.event=null)},initMousedown:function(){},isSelectableTarget:function(n){var t=this.setting.eventsGet(),i=t&&t._triggerEvent(ecount.grid.event.list.selectorBeforeSelect,null,_.extend({ecPageID:this.mixinOption.optCommon.ecPageId,ecTabID:this.mixinOption.optCommon.ecTabId,ecGridID:this.mixinOption.optCommon.ecGridId},n));return _.extend({result:!0},i)},hasReselectItem:function(){return{result:!1}},selectStart:function(n){var r=ecount.grid.constValue,c=r.sectionType.thead,l=r.sectionType.tbody,a=r.sectionType.tfoot,o=n.gridSectionType,s=n.gridColumnID,h=n.gridDataKey,e,u;if(n.startBoundary.reset(),n.endBoundary.reset(),e={startBoundary:n.startBoundary,endBoundary:n.endBoundary,element:null},u=this.mixinOption.viewCell.getCellElement(o,s,h),u.map.cellInfo.adjustmentValue!=1){var t=u.map.cellInfo.columnIdx,i=u.map.rowInfo.trIdx[u.map.cellInfo.columnRowIdx],f=this.mixinOption.dataRow.getViewDataRenderingTableMap(o,i);typeof f[t]=="object"&&f[t].type=="MERGE"?(n.startBoundary.addBoundary({top:i,left:t,bottom:i+((f[t][r.rowVariableNames.rowspanCount]||1)-1),right:t+((f[t][r.rowVariableNames.colspanCount]||1)-1)}),n.endBoundary.addBoundary({top:i,left:t,bottom:i+((f[t][r.rowVariableNames.rowspanCount]||1)-1),right:t+((f[t][r.rowVariableNames.colspanCount]||1)-1)}),e.element=u.cell):(n.startBoundary.addBoundary({top:i,left:t,bottom:i,right:t}),n.endBoundary.addBoundary({top:i,left:t,bottom:i,right:t}),e.element=u.cell)}return e},selectEnd:function(n){var r=ecount.grid.constValue,h=r.sectionType.thead,c=r.sectionType.tbody,l=r.sectionType.tfoot,e=n.gridSectionType,o=n.gridColumnID,s=n.gridDataKey,i=this.mixinOption.viewCell.getCellElement(e,o,s);if(i.map.cellInfo.adjustmentValue!=1){var t=i.map.cellInfo.columnIdx,u=i.map.rowInfo.trIdx[i.map.cellInfo.columnRowIdx],f=this.mixinOption.dataRow.getViewDataRenderingTableMap(e,u);return(n.gridStartSectionType!=n.gridSectionType&&n.endBoundary.reset(),typeof f[t]=="object"&&f[t].type=="MERGE")?(n.endBoundary.addBoundary({top:u,left:t,bottom:u+((f[t][r.rowVariableNames.rowspanCount]||1)-1),right:t+((f[t][r.rowVariableNames.colspanCount]||1)-1)}),{endBoundary:n.endBoundary,element:i.cell}):(n.endBoundary.addBoundary({top:u,left:t,bottom:u,right:t}),{endBoundary:n.endBoundary,element:i.cell})}},select:function(){},selectExtend:function(n){var o=ecount.grid.constValue,g=o.sectionType.thead,c=o.sectionType.tbody,tt=o.sectionType.tfoot,l=[g,c],a=l.indexOf(n.gridStartSectionType),v=l.indexOf(n.gridEndSectionType),f,y,h,u,i,s,e,d,r,t;if(a>v)for(f in n)n.hasOwnProperty(f)&&f.startsWith("gridStart")&&(y=n[f],h="gridEnd"+f.replace("gridStart",""),n[f]=n[h],n[h]=y);if(n.gridStartSectionType==n.gridEndSectionType){var p=Math.min(n.gridStartBoundary.top,n.gridEndBoundary.top),w=Math.min(n.gridStartBoundary.left,n.gridEndBoundary.left),b=Math.max(n.gridStartBoundary.right,n.gridEndBoundary.right),k=Math.max(n.gridStartBoundary.bottom,n.gridEndBoundary.bottom),it=this.mixinOption.dataColumn.getAll(c,o.returnType.multi),nt={top:p,left:w,right:b,bottom:k},t=this.mixinOption.dataRow.extendRowBoundary(n.gridStartSectionType,n.gridStartColumnSectionType,{top:p,left:w,right:b,bottom:k},nt);n.gridStartBoundary.top=t.top;n.gridStartBoundary.bottom=t.bottom;n.gridStartBoundary.left=t.left;n.gridStartBoundary.right=t.left;n.gridEndBoundary.top=t.top;n.gridEndBoundary.bottom=t.bottom;n.gridEndBoundary.left=t.left;n.gridEndBoundary.right=t.right}else{for(u={top:0,left:0,bottom:0,right:0},i={top:0,left:0,bottom:0,right:0},u.top=n.gridStartBoundary.top,u.left=Math.min(n.gridStartBoundary.left,n.gridEndBoundary.left),u.bottom=n.gridStartBoundary.bottom,u.right=Math.max(n.gridStartBoundary.right,n.gridEndBoundary.right),i.top=n.gridEndBoundary.top,i.left=Math.min(n.gridStartBoundary.left,n.gridEndBoundary.left),i.bottom=n.gridEndBoundary.bottom,i.right=Math.max(n.gridStartBoundary.right,n.gridEndBoundary.right),s=this.core.fn.getRangeInformationsByRange(n.gridStartSectionType,u,n.gridEndSectionType,i,{returnType:"array"}),e=0,d=s.length;e<d;e++)r=s[e],r.sectionType==s[0].sectionType?(t=this.mixinOption.dataRow.extendBoundary(r.sectionType,r.columnSectionType,r.rowBoundary,r.columnBoundary),u.top=Math.min(u.top,t.top),u.bottom=Math.max(u.bottom,t.bottom)):(t=this.mixinOption.dataRow.extendBoundary(r.sectionType,r.columnSectionType,r.rowBoundary,r.columnBoundary),i.top=Math.min(i.top,t.top),i.bottom=Math.max(i.bottom,t.bottom)),i.left=Math.min(i.left,t.left),i.right=Math.max(i.right,t.right),u.left=Math.min(u.left,t.left),u.right=Math.max(u.left,t.right),(t.top!=r.columnBoundary.top||t.left!=r.columnBoundary.left||t.bottom!=r.columnBoundary.bottom||t.right!=r.columnBoundary.right)&&(r.columnBoundary.top=t.top,r.columnBoundary.left=i.left=Math.min(i.left,t.left),r.columnBoundary.bottom=t.bottom,r.columnBoundary.right=i.right=Math.max(i.right,t.right),e=-1);a>v?(_.extend(n.gridEndBoundary,u),_.extend(n.gridStartBoundary,i)):(_.extend(n.gridStartBoundary,u),_.extend(n.gridEndBoundary,i))}return{startSectionType:n.gridStartSectionType,endSectionType:n.gridEndSectionType}},executeSelectionExtend:function(){},getScreenBoundingClientRect:function(n){function l(n,t,r){for(var o,u,s=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(t),e=r.top,h=r.bottom;e<=h;)o={height:0},u=s[e][r.left],["MERGE","NORMAL"].contains(u.type)&&(i=this.mixinOption.viewCell.getCellElement(t,u.columnId,u.rowId).cell,o=ecount.gridV2.view.util.getScreenBoundingClientRect(i,!1)),e+=u.type=="MERGE"&&(u[f.rowVariableNames.rowspanCount]||1)>1?u[f.rowVariableNames.rowspanCount]||1:1,n.height+=o.height}var f=ecount.grid.constValue,w=f.sectionType.thead,b=f.sectionType.tbody,k=f.sectionType.tfoot,g=this.mixinOption.optLayout.$container.find(".wrapper-grid").length>0,t,i,r,nt=this.mixinOption.dataRow.getViewDataTrMapAll(n.gridStartSectionType),u={top:0,left:0,width:0,height:0,bottom:0,right:0},e,s=[w,b,k],a=s.indexOf(n.gridStartSectionType),d=s.indexOf(n.gridEndSectionType),h,v,o,y,c,p;for(s=s.splice(a,d-a+1),h=0,v=s.length;h<v;h++)o=s[h],n.gridStartSectionType==n.gridEndSectionType?l.call(this,u,o,{top:n.gridStartBoundary.top,bottom:n.gridEndBoundary.bottom,left:n.gridStartBoundary.left,right:n.gridEndBoundary.right}):(n.gridStartSectionType==o&&(y=this.mixinOption.dataColumn.getAll(o,f.returnType.multi),l.call(this,u,o,{top:n.gridStartBoundary.top,bottom:y.length-1,left:n.gridStartBoundary.left,right:n.gridEndBoundary.right})),n.gridEndSectionType==o&&l.call(this,u,o,{top:0,bottom:n.gridEndBoundary.bottom,left:n.gridStartBoundary.left,right:n.gridEndBoundary.right}));for(e=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridStartSectionType),c=n.gridStartBoundary.left,p=n.gridEndBoundary.right;c<=p;)r={width:0},t=e[n.gridStartBoundary.top][c],["MERGE","NORMAL"].contains(t.type)&&(i=this.mixinOption.viewCell.getCellElement(n.gridStartSectionType,t.columnId,t.rowId).cell,r=ecount.gridV2.view.util.getScreenBoundingClientRect(i,!1)),c+=t.type=="MERGE"&&(t[f.rowVariableNames.colspanCount]||1)>1?t[f.rowVariableNames.colspanCount]||1:1,u.width+=r.width;return e=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridStartSectionType),t=e[n.gridStartBoundary.top][n.gridStartBoundary.left],["ROWSPAN","ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(t.type)&&(t=e[t.trIdx][t.columnIdx]),i=this.mixinOption.viewCell.getCellElement(n.gridStartSectionType,t.columnId,t.rowId).cell,r=ecount.gridV2.view.util.getScreenBoundingClientRect(i,!1),u.top=r.top,u.left=r.left,e=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridEndSectionType),t=e[n.gridEndBoundary.bottom][n.gridEndBoundary.right],["ROWSPAN","ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(t.type)&&(t=e[t.trIdx][t.columnIdx]),i=this.mixinOption.viewCell.getCellElement(n.gridEndSectionType,t.columnId,t.rowId).cell,r=ecount.gridV2.view.util.getScreenBoundingClientRect(i,!1),u.bottom=r.bottom,u.right=r.right+i.clientLeft*2,u},draw:function(n){function a(n,t,i){for(var e,u,o=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(t),f=i.top,h=i.bottom;f<=h;)e={height:0},u=o[f][i.left],["MERGE","NORMAL"].contains(u.type)&&(e=s?this.mixinOption.viewCell.getSizeByContainer(t,u.columnId,u.rowId):this.mixinOption.viewCell.getSizeByScreen(t,u.columnId,u.rowId)),f+=u.type=="MERGE"&&(u[r.rowVariableNames.rowspanCount]||1)>1?u[r.rowVariableNames.rowspanCount]||1:1,n.height+=e.height}var r=ecount.grid.constValue,k=r.sectionType.thead,d=r.sectionType.tbody,g=r.sectionType.tfoot,s=!1,c,p,e,w,l,b,v,h;s=this.mixinOption.optForm.version==r.formVersion.fourth?!0:this.mixinOption.optLayout.$container.find(".wrapper-grid").length>0;var t,u,tt=this.mixinOption.dataRow.getViewDataTrMapAll(n.gridStartSectionType),i={top:0,left:0,width:0,height:0,bottom:0,right:0},f,o=[k,d,g],y=o.indexOf(n.gridStartSectionType),nt=o.indexOf(n.gridEndSectionType);for(o=o.splice(y,nt-y+1),c=0,p=o.length;c<p;c++)e=o[c],n.gridStartSectionType==n.gridEndSectionType?a.call(this,i,e,{top:n.gridStartBoundary.top,bottom:n.gridEndBoundary.bottom,left:n.gridStartBoundary.left,right:n.gridEndBoundary.right}):(n.gridStartSectionType==e&&(w=this.mixinOption.dataColumn.getAll(e,r.returnType.multi),a.call(this,i,e,{top:n.gridStartBoundary.top,bottom:w.length-1,left:n.gridStartBoundary.left,right:n.gridEndBoundary.right})),n.gridEndSectionType==e&&a.call(this,i,e,{top:0,bottom:n.gridEndBoundary.bottom,left:n.gridStartBoundary.left,right:n.gridEndBoundary.right}));for(f=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridStartSectionType),l=n.gridStartBoundary.left,b=n.gridEndBoundary.right;l<=b;)u={width:0},t=f[n.gridStartBoundary.top][l],["MERGE","NORMAL"].contains(t.type)&&(u=s?this.mixinOption.viewCell.getSizeByContainer(n.gridStartSectionType,t.columnId,t.rowId):this.mixinOption.viewCell.getSizeByScreen(n.gridStartSectionType,t.columnId,t.rowId)),l+=t.type=="MERGE"&&(t[r.rowVariableNames.colspanCount]||1)>1?t[r.rowVariableNames.colspanCount]||1:1,i.width+=u.width;return f=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridStartSectionType),t=f[n.gridStartBoundary.top][n.gridStartBoundary.left],["ROWSPAN","ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(t.type)&&(t=f[t.trIdx][t.columnIdx]),u=s?this.mixinOption.viewCell.getSizeByContainer(n.gridStartSectionType,t.columnId,t.rowId):this.mixinOption.viewCell.getSizeByScreen(n.gridStartSectionType,t.columnId,t.rowId),i.top=u.top,i.left=u.left,f=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridEndSectionType),t=f[n.gridEndBoundary.bottom][n.gridEndBoundary.right],["ROWSPAN","ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(t.type)&&(t=f[t.trIdx][t.columnIdx]),u=s?this.mixinOption.viewCell.getSizeByContainer(n.gridEndSectionType,t.columnId,t.rowId):this.mixinOption.viewCell.getSizeByScreen(n.gridEndSectionType,t.columnId,t.rowId),i.bottom=u.bottom,i.right=u.right,v=this.mixinOption.optLayout.container.classList.contains("grid-selector")?this.mixinOption.optLayout.container.getBoundingClientRect():this.mixinOption.optLayout.panelContainer?this.mixinOption.optLayout.panelContainer.getBoundingClientRect():{top:0,left:0,x:0,y:0,width:0,height:0},i.top=i.top-v.top,i.left=i.left-v.left,h=this.mixinOption.optLayout.$container.find("[data-gridid]"),h&&h.length&&(i.top+=h[0].offsetTop,i.left+=h[0].offsetLeft),i.left+=this.mixinOption.optLayout.scrollContainer&&this.mixinOption.optLayout.scrollContainer.scrollLeft||0,i.top+=this.mixinOption.optLayout.scrollContainer&&this.mixinOption.optLayout.scrollContainer.scrollTop||0,i},drawHorizontal:function(n){for(var o,s,y,c,w,e,b,a,i=ecount.grid.constValue,k=i.sectionType.thead,d=i.sectionType.tbody,g=i.sectionType.tfoot,t={top:0,left:0,width:0,height:0},u=[k,d],v=!1,r=0,nt=u.length;r<nt;r++)if(o=this.mixinOption.dataRow.getAll(u[r]),o.length!=0){for(s=0,y=o.length;s<y;s++){var p=o[s],l=p[i.keyColumnPropertyName],tt=p[i.rowVariableNames.rowType],it=this.mixinOption.dataRow.getViewDataTrMap(u[r],l),rt=tt==i.rowType.separate?g:u[r],h=this.mixinOption.dataColumn.getAll(rt,i.returnType.multi),ft=h.length,ut=h[0].length,et=ut-1,f;for(c=0,w=it.rowInfo.trIdx.length;c<w;c++)f=this.mixinOption.viewRow.getSizeByScreen(u[r],l,c),t.height+=f.height}if(!v){for(e=n.boundary.left,b=n.boundary.right;e<=b;e++)ecount.common.isTrue(h[0][e].isMergeColumn)||(f=this.mixinOption.viewCell.getSizeByScreen(u[r],h[0][e].id,l),e==n.boundary.left&&(t.top=f.top,t.left=f.left),t.width+=f.width);v=!0}}return a=this.mixinOption.optLayout.container.getBoundingClientRect(),t.top=t.top-a.top,t.left=t.left-a.left,t.left-=this.mixinOption.optLayout.scrollContainer&&this.mixinOption.optLayout.scrollContainer.scrollLeft||0,t.top-=this.mixinOption.optLayout.scrollContainer&&this.mixinOption.optLayout.scrollContainer.scrollTop||0,t},getSectionType:function(){},afterInsideSelection:function(){var n;this.mixinOption.viewOuterHorizontal&&(n=this.mixinOption.viewOuterHorizontal.__datas.deactiveId,n&&this.mixinOption.viewOuterHorizontal.active(n));this.mixinOption.viewOuterVertical&&(n=this.mixinOption.viewOuterVertical.__datas.deactiveId,n&&this.mixinOption.viewOuterVertical.active(n))},isExternalSelection:function(n){var t=ecount.grid.constValue,u=t.sectionType.thead,f=t.sectionType.tbody,e=t.sectionType.tfoot,r=!0,i;return this.mixinOption.optForm.version==t.formVersion.fourth&&this.mixinOption.optCommon.columnType==t.columnType.multi&&(i=this.mixinOption.dataColumn.getIndexById(n.gridSectionType,t.returnColumnIndexType.multi,n.gridColumnID),n.gridBoundary.left<=i&&i<=n.gridBoundary.right&&(r=!1)),r},isSelectContinue:function(n,t){var y=this.mixinOption.viewSelector.getSelectionType(),i=ecount.grid.constValue,a=i.sectionType.thead,p=i.sectionType.tbody,s=i.sectionType.tfoot,k=i.sectionType.theadSlip,d=i.sectionType.tbodySlip,g=i.sectionType.tfootSlip,r,f,h,e;if(y==i.selectionType.allHorizontal)return!0;if(this.mixinOption.optCommon.columnType==i.columnType.multi){if(f=this.mixinOption.view.getSectionTypeByElement(t.target),f.sectionType==null&&f.detailSectionType==null)return returnValue;n.gridColumnSectionType=f.columnSectionType?f.columnSectionType:n.gridSectionType;n.gridDetailSectionType=f.detailSectionType?f.detailSectionType:n.gridDetailSectionType}if(this.mixinOption.optCommon.columnType==i.columnType.single?(h=[a],this.mixinOption.optRow[s].specialRowCount>0&&h.push(s)):this.mixinOption.optCommon.columnType==i.columnType.multi&&(h=[a,p,s]),h.contains(n.gridSectionType)){if(this.mixinOption.optCommon.columnType==i.columnType.single&&n.gridSectionType==s){var w=this.mixinOption.dataColumn.getAll(n.gridSectionType,i.returnType.multi),l=w[0].length,nt=l-1,b=this.mixinOption.dataRow.getIndexById(n.gridSectionType,n.gridDataKey),v=this.mixinOption.dataColumn.getIndexById(n.gridSectionType,i.returnColumnIndexType.multi,n.gridColumnID);return this.mixinOption.optEditable.specialRowMerge[b][i.rowVariableNames.mergeSet].find(function(n){var t=n[i.rowVariableNames.mergeStartIndex],e=Math.floor(t/l),r=t%l,u=n[i.rowVariableNames.colspanCount]||1,f=u-1;if(r<=v&&v<=r+f)return!0})}}else return!1;if(n.gridSectionType!=n.gridPrevSectionType)return!1;if(e=this.mixinOption.viewCell.getCellElement(n.gridSectionType,n.gridColumnID,n.gridDataKey),e.map.cellInfo.adjustmentValue!=1){var u=e.map.cellInfo.columnIdx,o=e.map.rowInfo.trIdx[e.map.cellInfo.columnRowIdx],c=this.mixinOption.dataRow.getViewDataRenderingTableMap(n.gridSectionType,o);r=typeof c[u]=="object"&&c[u].type=="MERGE"?{top:o,left:u,bottom:o+((c[u][i.rowVariableNames.rowspanCount]||1)-1),right:u+((c[u][i.rowVariableNames.colspanCount]||1)-1)}:{top:o,left:u,bottom:o,right:u};returnValue.isSelect=!(r.top>=n.gridBoundary.top&&r.bottom<=n.gridBoundary.bottom&&r.left>=n.gridBoundary.left&&r.right<=n.gridBoundary.right);r.top>=n.gridBoundary.top&&r.bottom<=n.gridBoundary.bottom&&r.left>=n.gridBoundary.left&&r.right<=n.gridBoundary.right?returnValue.isSelect=!1:(returnValue.isSelect=!0,returnValue.isAttachEvent=!0)}return returnValue},getColumnSectionType:function(n){var t=ecount.grid.constValue,f=t.sectionType.thead,e=t.sectionType.tbody,i=t.sectionType.tfoot,r=this.mixinOption.dataRow.getById(n.gridSectionType,n.gridDataKey),u=r[t.rowVariableNames.rowType];return u==t.rowType.separate?i:n.gridSectionType},isAutoMerge:function(n){var i=ecount.grid.constValue,o=i.sectionType.thead,s=i.sectionType.tbody,h=i.sectionType.tfoot,c=this.mixinOption.dataRow.getById(n.gridSectionType,n.gridDataKey),f=this.mixinOption.dataRow.getViewDataTrMap(n.gridSectionType,n.gridDataKey),e=f&&f.rowInfo,r,u,t;return e?(r=e[n.gridColumnID],!r)?!1:(u=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridSectionType),t=u[r.columnRowIdx][r.columnIdx],["ROWSPAN","COLSPAN","ROWSPAN_AND_COLSPAN"].contains(t.type)&&(t=u[t.trIdx][t.columnIdx]),!t)?!1:t[i.rowVariableNames.isAutoMerge]:!1},isIncludeAutoMerge:function(n){var u=ecount.grid.constValue,v=u.sectionType.thead,y=u.sectionType.tbody,p=u.sectionType.tfoot,h=this.mixinOption.dataRow.getViewDataTrMap(n.gridEndSectionType,n.gridEndDataKey),c=h&&h.rowInfo,f,e,t,i,r,o,l,s,a;if(!c||(f=c[n.gridEndColumnID],!f)||(e=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridEndSectionType),t=e[f.columnRowIdx][f.columnIdx],["ROWSPAN","COLSPAN","ROWSPAN_AND_COLSPAN"].contains(t.type)&&(t=e[t.trIdx][t.columnIdx]),!t))return!1;for(this.core.boundary.reset(),this.core.boundary.addBoundary(n.gridStartBoundary),this.core.boundary.addBoundary({top:t.trIdx,left:t.columnIdx,bottom:t.trIdx,right:t.columnIdx}),i=this.core.boundary.get(),i=this.mixinOption.dataRow.extendBoundary(n.gridStartSectionType,n.gridStartColumnSectionType,i,i),r=!1,o=i.top,l=i.bottom;o<=l;o++){for(s=i.left,a=i.right;s<=a;s++)if(r=e[o][s][u.rowVariableNames.isAutoMerge],r)break;if(r)break}return r},movePossible:function(n){function c(n,i,u){return i.startRow>-1&&i.endRow>-1&&n.startRow>-1&&n.endRow>-1?u.top==n.startRow&&u.bottom==n.endRow&&t-r!=u.right-u.left+1?{isPossibleHorizontal:!0}:u.top==i.startRow&&u.bottom==i.endRow&&t-r!=u.right-u.left+1?{isPossibleHorizontal:!0}:{isPossibleHorizontal:!1}:{isPossibleHorizontal:o.length==u.bottom-u.top+1&&t-r!=u.right-u.left+1}}function l(n,i,u){return i.startRow>-1&&i.endRow>-1&&n.startRow>-1&&n.endRow>-1?u.top==n.startRow&&u.bottom==n.endRow&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_DIFFERENT_ROWTYPE"}:u.top==i.startRow&&u.bottom==i.endRow&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_DIFFERENT_ROWTYPE"}:n.startRow<=u.top&&n.endRow>=u.bottom&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}:i.startRow<=u.top&&i.endRow>=u.bottom&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}:{isPossibleVertical:!1,verticalMethod:"NONE"}:{isPossibleVertical:o.length!=u.bottom-u.top+1&&t-r==u.right-u.left+1,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}}var u=ecount.grid.constValue,a=u.sectionType.thead,s=u.sectionType.tbody,h=u.sectionType.tfoot,i={isPossibleVertical:!1,isPossibleHorizontal:!1},e;this.mixinOption.optCommon.columnType==u.columnType.multi&&n.gridColumnSectionType==h&&(e=this.mixinOption.dataColumn.getAll(s,u.returnType.multi),n.gridBoundary.top-=e.length,n.gridBoundary.bottom-=e.length);var o=this.mixinOption.dataColumn.getAll(n.gridColumnSectionType||n.gridSectionType,u.returnType.multi),t=o[0].length,v=t-1,r=this.core.data.column.getSystemColumnCount(n.gridSectionType),f;return f=c(this.mixinOption.dataColumn.__datas[n.gridColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridColumnSectionType+"slip"],n.gridBoundary),i.isPossibleHorizontal=f.isPossibleHorizontal,f=l(this.mixinOption.dataColumn.__datas[n.gridColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridColumnSectionType+"slip"],n.gridBoundary),i.isPossibleVertical=f.isPossibleVertical,i.verticalMethod=f.verticalMethod,i.isPossibleVertical&&i.isPossibleHorizontal&&(i.isPossibleVertical=i.isPossibleHorizontal=!1),i},completedMouseUp:function(n){var u=ecount.grid.constValue,l=u.sectionType.thead,a=u.sectionType.tbody,v=u.sectionType.tfoot,h=this.setting.eventsGet(),s=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),t={ecPageID:this.mixinOption.optCommon.ecPageId,ecTabID:this.mixinOption.optCommon.ecTabId,ecGridID:this.mixinOption.optCommon.ecGridId,isPossibleMerge:!1,isPossibleDivide:!1,isDeleteRow:!1,isDeleteColumn:!1,isAddLeftColumn:!0,isAddRightColumn:!0,isAddUpRow:!0,isAddDownRow:!0,fromSectionType:n.gridStartSectionType,fromColumnSectionType:n.gridStartColumnSectionType,fromColumnId:n.gridStartColumnId,fromRowId:n.gridStartRowId,toSectionType:n.gridEndSectionType,toColumnSectionType:n.gridEndColumnSectionType,toColumnId:n.gridEndColumnId,toRowId:n.gridEndRowId,datas:s},i=this.core.fn.getDisplaySelectorOption(n.gridStartSectionType,n.gridStartBoundary,n.gridEndSectionType,n.gridEndBoundary),f,c;for(this.mixinOption.optSelector.handlerVersion==u.selector.handlerVersion.custom||(i.isHorizontal&&i.isVertical?this.mixinOption.viewSelector.showOption({isShowCross:!0}):i.isHorizontal?this.mixinOption.viewSelector.showOption({isShowHorizontal:!0}):i.isVertical&&this.mixinOption.viewSelector.showOption({isShowVertical:!0})),t.isShowHorizontalOption=i.isHorizontal,t.isShowVerticalOption=i.isVertical,f=0,c=s.length;f<c;f++){var r=s[f],y=r.sectionType,p=r.detailSectionType,e=r.columnSectionType,w=r.rowBoundary,o=r.columnBoundary;t.isPossibleMerge||(t.isPossibleMerge=this.core.fn.getIsPossibleMerge(e,o));t.isPossibleDivide||(t.isPossibleDivide=this.core.fn.getIsPossibleDivide(e,o));t.isPossibleDeleteRow||(t.isPossibleDeleteRow=this.core.fn.getIsPossibleDeleteRow(e,o));t.isPossibleDeleteColumn||(t.isPossibleDeleteColumn=this.core.fn.getIsPossibleDeleteColumn(e,o))}h&&h._triggerEvent(ecount.grid.event.list.selectorSelect,null,t)}};ecount.gridV2.handler.selectorSingleSection={unselectable:function(){this.core.dropdownmenu.activeSectionType&&this.core.dropdownmenu.activeColumnId&&this.core.dropdownmenu.activeRowId&&this.core.dropdownmenu.event&&(this.core.dropdownmenu.activeSectionType=null,this.core.dropdownmenu.activeColumnId=null,this.core.dropdownmenu.activeRowId=null,this.core.dropdownmenu.event=null)},initMousedown:function(){},isSelectableTarget:function(n){var i=this.setting.eventsGet(),t=_.extend({ecPageID:this.mixinOption.optCommon.ecPageId,ecTabID:this.mixinOption.optCommon.ecTabId,ecGridID:this.mixinOption.optCommon.ecGridId,currentSelectedInfo:{start:_.extend({boundary:this.mixinOption.viewSelector.getStartBoundary()},this.mixinOption.viewSelector.getStartInfos()),end:_.extend({boundary:this.mixinOption.viewSelector.getEndBoundary()},this.mixinOption.viewSelector.getEndInfos())}},n),r;return t.currentSelectedInfo.start.sectionType?this.mixinOption.viewTempSelector.resetData().ecSelectStartByInfo(t.currentSelectedInfo.start.sectionType,t.currentSelectedInfo.start.columnId,t.currentSelectedInfo.start.rowId).ecSelectEndByInfo(t.sectionType,t.columnId,t.rowId).ecSelectExtend():this.mixinOption.viewTempSelector.resetData().ecSelectStartByInfo(t.sectionType,t.columnId,t.rowId).ecSelectExtend(),t.boundaryAreaToBeSelected=this.mixinOption.viewTempSelector.getBoundary(),r=i&&i._triggerEvent(ecount.grid.event.list.selectorBeforeSelect,null,t),_.extend({result:!0},r)},hasReselectItem:function(n){var t=ecount.grid.constValue,a=t.sectionType.thead,v=t.sectionType.tbody,l=t.sectionType.tfoot,r=this.core.fn.getMultiSectionSelectionRange(sectionType,n.startSectionType,n.startBoundary,n.endSectionType,n.endBoundary),e=!1,o=!1,s,i,u,h,f,c;if(this.mixinOption.optCommon.columnType==t.columnType.single?o=[t.sectionSeparateValue.tsubtot1,t.sectionSeparateValue.tsubtot2,t.sectionSeparateValue.tsubtot3,t.sectionSeparateValue.tsubtot4,t.sectionSeparateValue.tsubtot5,t.sectionSeparateValue.subtot1,t.sectionSeparateValue.subtot2,t.sectionSeparateValue.subtot3,t.sectionSeparateValue.subtot4,t.sectionSeparateValue.subtot5,t.sectionSeparateValue.pagetot].contains(n.startRowType)||l==n.startSectionType:this.mixinOption.optCommon.columnType==t.columnType.multi&&(o=!0),o)for(columnRows=this.mixinOption.dataColumn.getAll(n.startSectionType,t.returnType.multi),s=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.startSectionType),i=s[r.top][r.left],this.mixinOption.dataColumn.isDecimalDataType(n.startSectionType,n.startColumnId)?detailSubSectionType="-number":t.topsubtotalRex.test(i[t.rowVariableNames.rowType])||t.bottomsubtotalRex.test(i[t.rowVariableNames.rowType])||t.subtotalRex.test(i[t.rowVariableNames.rowType])||t.pagetotalRex.test(i[t.rowVariableNames.rowType])||t.totalRex.test(i[t.rowVariableNames.rowType]),u=r.top,h=r.bottom;u<=h;u++){for(f=r.left,c=r.right;f<=c;){if(i=s[u][f],i[t.rowVariableNames.isAutoMerge]){e=!0;break}f+=i&&i[t.rowVariableNames.colspanCount]||1}if(e)break}return{result:e}},selectStart:function(n){var r=ecount.grid.constValue,c=r.sectionType.thead,l=r.sectionType.tbody,a=r.sectionType.tfoot,o=n.gridSectionType,s=n.gridColumnID,h=n.gridDataKey,e,u;if(n.startBoundary.reset(),n.endBoundary.reset(),e={startBoundary:n.startBoundary,endBoundary:n.endBoundary,element:null},u=this.mixinOption.viewCell.getCellElement(o,s,h),u.map.cellInfo.adjustmentValue!=1){var t=u.map.cellInfo.columnIdx,i=u.map.rowInfo.trIdx[u.map.cellInfo.columnRowIdx],f=this.mixinOption.dataRow.getViewDataRenderingTableMap(o,i);typeof f[t]=="object"&&f[t].type=="MERGE"?(n.startBoundary.addBoundary({top:i,left:t,bottom:i+((f[t][r.rowVariableNames.rowspanCount]||1)-1),right:t+((f[t][r.rowVariableNames.colspanCount]||1)-1)}),n.endBoundary.addBoundary({top:i,left:t,bottom:i+((f[t][r.rowVariableNames.rowspanCount]||1)-1),right:t+((f[t][r.rowVariableNames.colspanCount]||1)-1)}),e.element=u.cell):(n.startBoundary.addBoundary({top:i,left:t,bottom:i,right:t}),n.endBoundary.addBoundary({top:i,left:t,bottom:i,right:t}),e.element=u.cell)}return e},selectEnd:function(n){var r=ecount.grid.constValue,h=r.sectionType.thead,c=r.sectionType.tbody,l=r.sectionType.tfoot,e=n.gridSectionType,o=n.gridColumnID,s=n.gridDataKey,i=this.mixinOption.viewCell.getCellOriginalElement(e,o,s);if(i.map.cellInfo.adjustmentValue!=1){var t=i.map.cellInfo.columnIdx,u=i.map.rowInfo.trIdx[i.map.cellInfo.columnRowIdx],f=this.mixinOption.dataRow.getViewDataRenderingTableMap(e,u);return(n.gridStartSectionType!=n.gridSectionType&&n.endBoundary.reset(),typeof f[t]=="object"&&f[t].type=="MERGE")?(n.endBoundary.addBoundary({top:u,left:t,bottom:u+((f[t][r.rowVariableNames.rowspanCount]||1)-1),right:t+((f[t][r.rowVariableNames.colspanCount]||1)-1)}),{endBoundary:n.endBoundary,element:i.cell}):(n.endBoundary.addBoundary({top:u,left:t,bottom:u,right:t}),{endBoundary:n.endBoundary,element:i.cell})}},select:function(){},selectExtend:function(n){var s=ecount.grid.constValue,g=s.sectionType.thead,c=s.sectionType.tbody,tt=s.sectionType.tfoot,l=[g,c],a=l.indexOf(n.gridStartSectionType),v=l.indexOf(n.gridEndSectionType),f,y,h,r,i,e,o,d,u,t;if(a>v)for(f in n)n.hasOwnProperty(f)&&f.startsWith("gridStart")&&(y=n[f],h="gridEnd"+f.replace("gridStart",""),n[f]=n[h],n[h]=y);if(n.gridStartSectionType==n.gridEndSectionType){var p=Math.min(n.gridStartBoundary.top,n.gridEndBoundary.top),w=Math.min(n.gridStartBoundary.left,n.gridEndBoundary.left),b=Math.max(n.gridStartBoundary.right,n.gridEndBoundary.right),k=Math.max(n.gridStartBoundary.bottom,n.gridEndBoundary.bottom),it=this.mixinOption.dataColumn.getAll(c,s.returnType.multi),nt={top:p,left:w,right:b,bottom:k},t=this.mixinOption.dataRow.extendRowBoundary(n.gridStartSectionType,n.gridStartColumnSectionType,{top:p,left:w,right:b,bottom:k},nt);n.gridStartBoundary.top=t.top;n.gridStartBoundary.bottom=t.bottom;n.gridStartBoundary.left=t.left;n.gridStartBoundary.right=t.left;n.gridEndBoundary.top=t.top;n.gridEndBoundary.bottom=t.bottom;n.gridEndBoundary.left=t.left;n.gridEndBoundary.right=t.right}else{for(r={top:0,left:0,bottom:0,right:0},i={top:0,left:0,bottom:0,right:0},r.top=n.gridStartBoundary.top,r.left=Math.min(n.gridStartBoundary.left,n.gridEndBoundary.left),r.bottom=n.gridStartBoundary.bottom,r.right=Math.max(n.gridStartBoundary.right,n.gridEndBoundary.right),i.top=n.gridEndBoundary.top,i.left=Math.min(n.gridStartBoundary.left,n.gridEndBoundary.left),i.bottom=n.gridEndBoundary.bottom,i.right=Math.max(n.gridStartBoundary.right,n.gridEndBoundary.right),e=this.core.fn.getRangeInformationsByRange(n.gridStartSectionType,r,n.gridEndSectionType,i,{returnType:"array"}),o=0,d=e.length;o<d;o++)u=e[o],u.sectionType==e[0].sectionType?(t=this.mixinOption.dataRow.extendBoundary(u.sectionType,u.columnSectionType,u.columnBoundary,u.columnBoundary),r.top=Math.min(r.top,t.top),r.bottom=Math.max(r.bottom,t.bottom)):(t=this.mixinOption.dataRow.extendBoundary(u.sectionType,u.columnSectionType,u.columnBoundary,u.columnBoundary),i.top=Math.min(i.top,t.top),i.bottom=Math.max(i.bottom,t.bottom)),i.left=Math.min(i.left,t.left),i.right=Math.max(i.right,t.right),r.left=Math.min(r.left,t.left),r.right=Math.max(r.left,t.right),(t.top!=u.columnBoundary.top||t.left!=u.columnBoundary.left||t.bottom!=u.columnBoundary.bottom||t.right!=u.columnBoundary.right)&&(e.forEach(function(n){n.columnBoundary.top=t.top;n.columnBoundary.left=i.left=Math.min(i.left,t.left);n.columnBoundary.bottom=t.bottom;n.columnBoundary.right=i.right=Math.max(i.right,t.right)}),o=-1);a>v?(_.extend(n.gridEndBoundary,r),_.extend(n.gridStartBoundary,i)):(_.extend(n.gridStartBoundary,r),_.extend(n.gridEndBoundary,i))}return{startSectionType:n.gridStartSectionType,endSectionType:n.gridEndSectionType}},executeSelectionExtend:function(){},getScreenBoundingClientRect:function(n){function l(n,t,r){for(var o,u,s=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(t),e=r.top,h=r.bottom;e<=h;)o={height:0},u=s[e][r.left],["MERGE","NORMAL"].contains(u.type)&&(i=this.mixinOption.viewCell.getCellElement(t,u.columnId,u.rowId).cell,o=ecount.gridV2.view.util.getScreenBoundingClientRect(i,!1)),e+=u.type=="MERGE"&&(u[f.rowVariableNames.rowspanCount]||1)>1?u[f.rowVariableNames.rowspanCount]||1:1,n.height+=o.height}var f=ecount.grid.constValue,w=f.sectionType.thead,b=f.sectionType.tbody,k=f.sectionType.tfoot,g=this.mixinOption.optLayout.$container.find(".wrapper-grid").length>0,t,i,r,nt=this.mixinOption.dataRow.getViewDataTrMapAll(n.gridStartSectionType),u={top:0,left:0,width:0,height:0,bottom:0,right:0},e,s=[w,b,k],a=s.indexOf(n.gridStartSectionType),d=s.indexOf(n.gridEndSectionType),h,v,o,y,c,p;for(s=s.splice(a,d-a+1),h=0,v=s.length;h<v;h++)o=s[h],n.gridStartSectionType==n.gridEndSectionType?l.call(this,u,o,{top:n.gridStartBoundary.top,bottom:n.gridEndBoundary.bottom,left:n.gridStartBoundary.left,right:n.gridEndBoundary.right}):(n.gridStartSectionType==o&&(y=this.mixinOption.dataColumn.getAll(o,f.returnType.multi),l.call(this,u,o,{top:n.gridStartBoundary.top,bottom:y.length-1,left:n.gridStartBoundary.left,right:n.gridEndBoundary.right})),n.gridEndSectionType==o&&l.call(this,u,o,{top:0,bottom:n.gridEndBoundary.bottom,left:n.gridStartBoundary.left,right:n.gridEndBoundary.right}));for(e=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridStartSectionType),c=n.gridStartBoundary.left,p=n.gridEndBoundary.right;c<=p;)r={width:0},t=e[n.gridStartBoundary.top][c],["MERGE","NORMAL"].contains(t.type)&&(i=this.mixinOption.viewCell.getCellElement(n.gridStartSectionType,t.columnId,t.rowId).cell,r=ecount.gridV2.view.util.getScreenBoundingClientRect(i,!1)),c+=t.type=="MERGE"&&(t[f.rowVariableNames.colspanCount]||1)>1?t[f.rowVariableNames.colspanCount]||1:1,u.width+=r.width;return e=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridStartSectionType),t=e[n.gridStartBoundary.top][n.gridStartBoundary.left],["ROWSPAN","ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(t.type)&&(t=e[t.trIdx][t.columnIdx]),i=this.mixinOption.viewCell.getCellElement(n.gridStartSectionType,t.columnId,t.rowId).cell,r=ecount.gridV2.view.util.getScreenBoundingClientRect(i,!1),u.top=r.top,u.left=r.left,e=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridEndSectionType),t=e[n.gridEndBoundary.bottom][n.gridEndBoundary.right],["ROWSPAN","ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(t.type)&&(t=e[t.trIdx][t.columnIdx]),i=this.mixinOption.viewCell.getCellElement(n.gridEndSectionType,t.columnId,t.rowId).cell,r=ecount.gridV2.view.util.getScreenBoundingClientRect(i,!1),u.bottom=r.bottom,u.right=r.right+i.clientLeft*2,u},draw:function(n){function a(n,t,i){for(var e,u,o=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(t),f=i.top,h=i.bottom;f<=h;)e={height:0},u=o[f][i.left],["MERGE","NORMAL"].contains(u.type)&&(e=s?this.mixinOption.viewCell.getSizeByContainer(t,u.columnId,u.rowId):this.mixinOption.viewCell.getSizeByScreen(t,u.columnId,u.rowId)),f+=u.type=="MERGE"&&(u[r.rowVariableNames.rowspanCount]||1)>1?u[r.rowVariableNames.rowspanCount]||1:1,n.height+=e.height}var r=ecount.grid.constValue,k=r.sectionType.thead,d=r.sectionType.tbody,g=r.sectionType.tfoot,s=!1,c,p,e,w,l,b,v,h;s=this.mixinOption.optForm.version==r.formVersion.fourth?!0:this.mixinOption.optLayout.$container.find(".wrapper-grid").length>0;var t,u,tt=this.mixinOption.dataRow.getViewDataTrMapAll(n.gridStartSectionType),i={top:0,left:0,width:0,height:0,bottom:0,right:0},f,o=[k,d,g],y=o.indexOf(n.gridStartSectionType),nt=o.indexOf(n.gridEndSectionType);for(o=o.splice(y,nt-y+1),c=0,p=o.length;c<p;c++)e=o[c],n.gridStartSectionType==n.gridEndSectionType?a.call(this,i,e,{top:n.gridStartBoundary.top,bottom:n.gridEndBoundary.bottom,left:n.gridStartBoundary.left,right:n.gridEndBoundary.right}):(n.gridStartSectionType==e&&(w=this.mixinOption.dataColumn.getAll(e,r.returnType.multi),a.call(this,i,e,{top:n.gridStartBoundary.top,bottom:w.length-1,left:n.gridStartBoundary.left,right:n.gridEndBoundary.right})),n.gridEndSectionType==e&&a.call(this,i,e,{top:0,bottom:n.gridEndBoundary.bottom,left:n.gridStartBoundary.left,right:n.gridEndBoundary.right}));for(f=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridStartSectionType),l=n.gridStartBoundary.left,b=n.gridEndBoundary.right;l<=b;)u={width:0},t=f[n.gridStartBoundary.top][l],["MERGE","NORMAL"].contains(t.type)&&(u=s?this.mixinOption.viewCell.getSizeByContainer(n.gridStartSectionType,t.columnId,t.rowId):this.mixinOption.viewCell.getSizeByScreen(n.gridStartSectionType,t.columnId,t.rowId)),l+=t.type=="MERGE"&&(t[r.rowVariableNames.colspanCount]||1)>1?t[r.rowVariableNames.colspanCount]||1:1,i.width+=u.width;return f=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridStartSectionType),t=f[n.gridStartBoundary.top][n.gridStartBoundary.left],["ROWSPAN","ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(t.type)&&(t=f[t.trIdx][t.columnIdx]),u=s?this.mixinOption.viewCell.getSizeByContainer(n.gridStartSectionType,t.columnId,t.rowId):this.mixinOption.viewCell.getSizeByScreen(n.gridStartSectionType,t.columnId,t.rowId),i.top=u.top,i.left=u.left,f=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridEndSectionType),t=f[n.gridEndBoundary.bottom][n.gridEndBoundary.right],["ROWSPAN","ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN_AND_COLSPAN","OTHER_ROW_ROWSPAN","COLSPAN"].contains(t.type)&&(t=f[t.trIdx][t.columnIdx]),u=s?this.mixinOption.viewCell.getSizeByContainer(n.gridEndSectionType,t.columnId,t.rowId):this.mixinOption.viewCell.getSizeByScreen(n.gridEndSectionType,t.columnId,t.rowId),i.bottom=u.bottom,i.right=u.right,v=this.mixinOption.optLayout.container.classList.contains("grid-selector")?this.mixinOption.optLayout.container.getBoundingClientRect():this.mixinOption.optLayout.panelContainer?this.mixinOption.optLayout.panelContainer.getBoundingClientRect():{top:0,left:0,x:0,y:0,width:0,height:0},i.top=i.top-v.top,i.left=i.left-v.left,h=this.mixinOption.optLayout.$container.find("[data-gridid]"),h&&h.length&&(i.top+=h[0].offsetTop,i.left+=h[0].offsetLeft),i.left+=this.mixinOption.optLayout.scrollContainer&&this.mixinOption.optLayout.scrollContainer.scrollLeft||0,i.top+=this.mixinOption.optLayout.scrollContainer&&this.mixinOption.optLayout.scrollContainer.scrollTop||0,i},drawHorizontal:function(n){for(var o,s,y,c,w,e,b,a,i=ecount.grid.constValue,k=i.sectionType.thead,d=i.sectionType.tbody,g=i.sectionType.tfoot,t={top:0,left:0,width:0,height:0},u=[k,d],v=!1,r=0,nt=u.length;r<nt;r++)if(o=this.mixinOption.dataRow.getAll(u[r]),o.length!=0){for(s=0,y=o.length;s<y;s++){var p=o[s],l=p[i.keyColumnPropertyName],tt=p[i.rowVariableNames.rowType],it=this.mixinOption.dataRow.getViewDataTrMap(u[r],l),rt=tt==i.rowType.separate?g:u[r],h=this.mixinOption.dataColumn.getAll(rt,i.returnType.multi),ft=h.length,ut=h[0].length,et=ut-1,f;for(c=0,w=it.rowInfo.trIdx.length;c<w;c++)f=this.mixinOption.viewRow.getSizeByScreen(u[r],l,c),t.height+=f.height}if(!v){for(e=n.boundary.left,b=n.boundary.right;e<=b;e++)ecount.common.isTrue(h[0][e].isMergeColumn)||(f=this.mixinOption.viewCell.getSizeByScreen(u[r],h[0][e].id,l),e==n.boundary.left&&(t.top=f.top,t.left=f.left),t.width+=f.width);v=!0}}return a=this.mixinOption.optLayout.container.getBoundingClientRect(),t.top=t.top-a.top,t.left=t.left-a.left,t.left-=this.mixinOption.optLayout.scrollContainer&&this.mixinOption.optLayout.scrollContainer.scrollLeft||0,t.top-=this.mixinOption.optLayout.scrollContainer&&this.mixinOption.optLayout.scrollContainer.scrollTop||0,t},getSectionType:function(){},afterInsideSelection:function(){var n;this.mixinOption.viewOuterHorizontal&&(n=this.mixinOption.viewOuterHorizontal.__datas.deactiveId,n&&this.mixinOption.viewOuterHorizontal.active(n));this.mixinOption.viewOuterVertical&&(n=this.mixinOption.viewOuterVertical.__datas.deactiveId,n&&this.mixinOption.viewOuterVertical.active(n))},isExternalSelection:function(n){var t=ecount.grid.constValue,u=t.sectionType.thead,f=t.sectionType.tbody,e=t.sectionType.tfoot,r=!0,i;return this.mixinOption.optForm.version==t.formVersion.fourth&&this.mixinOption.optCommon.columnType==t.columnType.multi&&(i=this.mixinOption.dataColumn.getIndexById(n.gridSectionType,t.returnColumnIndexType.multi,n.gridColumnID),n.gridBoundary.left<=i&&i<=n.gridBoundary.right&&(r=!1)),r},isSelectContinue:function(n,t){var y=this.mixinOption.viewSelector.getSelectionType(),i=ecount.grid.constValue,a=i.sectionType.thead,p=i.sectionType.tbody,s=i.sectionType.tfoot,k=i.sectionType.theadSlip,d=i.sectionType.tbodySlip,g=i.sectionType.tfootSlip,r,f,h,e;if(y==i.selectionType.allHorizontal)return!0;if(this.mixinOption.optCommon.columnType==i.columnType.multi){if(f=this.mixinOption.view.getSectionTypeByElement(t.target),f.sectionType==null&&f.detailSectionType==null)return returnValue;n.gridColumnSectionType=f.columnSectionType?f.columnSectionType:n.gridSectionType;n.gridDetailSectionType=f.detailSectionType?f.detailSectionType:n.gridDetailSectionType}if(this.mixinOption.optCommon.columnType==i.columnType.single?(h=[a],this.mixinOption.optRow[s].specialRowCount>0&&h.push(s)):this.mixinOption.optCommon.columnType==i.columnType.multi&&(h=[a,p,s]),h.contains(n.gridSectionType)){if(this.mixinOption.optCommon.columnType==i.columnType.single&&n.gridSectionType==s){var w=this.mixinOption.dataColumn.getAll(n.gridSectionType,i.returnType.multi),l=w[0].length,nt=l-1,b=this.mixinOption.dataRow.getIndexById(n.gridSectionType,n.gridDataKey),v=this.mixinOption.dataColumn.getIndexById(n.gridSectionType,i.returnColumnIndexType.multi,n.gridColumnID);return this.mixinOption.optEditable.specialRowMerge[b][i.rowVariableNames.mergeSet].find(function(n){var t=n[i.rowVariableNames.mergeStartIndex],e=Math.floor(t/l),r=t%l,u=n[i.rowVariableNames.colspanCount]||1,f=u-1;if(r<=v&&v<=r+f)return!0})}}else return!1;if(n.gridSectionType!=n.gridPrevSectionType)return!1;if(e=this.mixinOption.viewCell.getCellElement(n.gridSectionType,n.gridColumnID,n.gridDataKey),e.map.cellInfo.adjustmentValue!=1){var u=e.map.cellInfo.columnIdx,o=e.map.rowInfo.trIdx[e.map.cellInfo.columnRowIdx],c=this.mixinOption.dataRow.getViewDataRenderingTableMap(n.gridSectionType,o);r=typeof c[u]=="object"&&c[u].type=="MERGE"?{top:o,left:u,bottom:o+((c[u][i.rowVariableNames.rowspanCount]||1)-1),right:u+((c[u][i.rowVariableNames.colspanCount]||1)-1)}:{top:o,left:u,bottom:o,right:u};returnValue.isSelect=!(r.top>=n.gridBoundary.top&&r.bottom<=n.gridBoundary.bottom&&r.left>=n.gridBoundary.left&&r.right<=n.gridBoundary.right);r.top>=n.gridBoundary.top&&r.bottom<=n.gridBoundary.bottom&&r.left>=n.gridBoundary.left&&r.right<=n.gridBoundary.right?returnValue.isSelect=!1:(returnValue.isSelect=!0,returnValue.isAttachEvent=!0)}return returnValue},getColumnSectionType:function(n){var t=ecount.grid.constValue,f=t.sectionType.thead,e=t.sectionType.tbody,i=t.sectionType.tfoot,r=this.mixinOption.dataRow.getById(n.gridSectionType,n.gridDataKey),u=r[t.rowVariableNames.rowType];return u==t.rowType.separate?i:n.gridSectionType},isAutoMerge:function(n){var i=ecount.grid.constValue,o=i.sectionType.thead,s=i.sectionType.tbody,h=i.sectionType.tfoot,f=this.mixinOption.dataRow.getViewDataTrMap(n.gridSectionType,n.gridDataKey),e=f&&f.rowInfo,r,u,t;return e?(r=e[n.gridColumnID],!r)?!1:(u=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridSectionType),t=u[r.columnRowIdx][r.columnIdx],["ROWSPAN","COLSPAN","ROWSPAN_AND_COLSPAN"].contains(t.type)&&(t=u[t.trIdx][t.columnIdx]),!t)?!1:t[i.rowVariableNames.isAutoMerge]:!1},isIncludeAutoMerge:function(n){var u=ecount.grid.constValue,v=u.sectionType.thead,y=u.sectionType.tbody,p=u.sectionType.tfoot,h=this.mixinOption.dataRow.getViewDataTrMap(n.gridEndSectionType,n.gridEndDataKey),c=h&&h.rowInfo,f,e,t,i,r,o,l,s,a;if(!c||(f=c[n.gridEndColumnID],!f)||(e=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridEndSectionType),t=e[f.columnRowIdx][f.columnIdx],["ROWSPAN","COLSPAN","ROWSPAN_AND_COLSPAN"].contains(t.type)&&(t=e[t.trIdx][t.columnIdx]),!t))return!1;for(this.core.boundary.reset(),this.core.boundary.addBoundary(n.gridStartBoundary),this.core.boundary.addBoundary({top:t.trIdx,left:t.columnIdx,bottom:t.trIdx,right:t.columnIdx}),i=this.core.boundary.get(),i=this.mixinOption.dataRow.extendBoundary(n.gridStartSectionType,n.gridStartColumnSectionType,i,i),r=!1,o=i.top,l=i.bottom;o<=l;o++){for(s=i.left,a=i.right;s<=a;s++)if(r=e[o][s][u.rowVariableNames.isAutoMerge],r)break;if(r)break}return r},movePossible:function(n){function c(n,i,u){return i.startRow>-1&&i.endRow>-1&&n.startRow>-1&&n.endRow>-1?u.top==n.startRow&&u.bottom==n.endRow&&t-r!=u.right-u.left+1?{isPossibleHorizontal:!0}:u.top==i.startRow&&u.bottom==i.endRow&&t-r!=u.right-u.left+1?{isPossibleHorizontal:!0}:{isPossibleHorizontal:!1}:{isPossibleHorizontal:o.length==u.bottom-u.top+1&&t-r!=u.right-u.left+1}}function l(n,i,u){return i.startRow>-1&&i.endRow>-1&&n.startRow>-1&&n.endRow>-1?u.top==n.startRow&&u.bottom==n.endRow&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_DIFFERENT_ROWTYPE"}:u.top==i.startRow&&u.bottom==i.endRow&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_DIFFERENT_ROWTYPE"}:n.startRow<=u.top&&n.endRow>=u.bottom&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}:i.startRow<=u.top&&i.endRow>=u.bottom&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}:{isPossibleVertical:!1,verticalMethod:"NONE"}:{isPossibleVertical:o.length!=u.bottom-u.top+1&&t-r==u.right-u.left+1,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}}var u=ecount.grid.constValue,a=u.sectionType.thead,s=u.sectionType.tbody,h=u.sectionType.tfoot,i={isPossibleVertical:!1,isPossibleHorizontal:!1},e;this.mixinOption.optCommon.columnType==u.columnType.multi&&n.gridColumnSectionType==h&&(e=this.mixinOption.dataColumn.getAll(s,u.returnType.multi),n.gridBoundary.top-=e.length,n.gridBoundary.bottom-=e.length);var o=this.mixinOption.dataColumn.getAll(n.gridColumnSectionType||n.gridSectionType,u.returnType.multi),t=o[0].length,v=t-1,r=this.core.data.column.getSystemColumnCount(n.gridSectionType),f;return f=c(this.mixinOption.dataColumn.__datas[n.gridColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridColumnSectionType+"slip"],n.gridBoundary),i.isPossibleHorizontal=f.isPossibleHorizontal,f=l(this.mixinOption.dataColumn.__datas[n.gridColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridColumnSectionType+"slip"],n.gridBoundary),i.isPossibleVertical=f.isPossibleVertical,i.verticalMethod=f.verticalMethod,i.isPossibleVertical&&i.isPossibleHorizontal&&(i.isPossibleVertical=i.isPossibleHorizontal=!1),i},completedMouseUp:function(n){var u=this.setting.eventsGet(),f=ecount.grid.constValue,v=f.sectionType.thead,l=f.sectionType.tbody,a=f.sectionType.tfoot,e=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),t={ecPageID:this.mixinOption.optCommon.ecPageId,ecTabID:this.mixinOption.optCommon.ecTabId,ecGridID:this.mixinOption.optCommon.ecGridId,isPossibleMerge:!1,isPossibleDivide:!1,isPossibleDeleteRow:!1,isPossibleDeleteColumn:!1,isPossibleAddLeftColumn:!1,isPossibleAddRightColumn:!1,isPossibleAddUpRow:!1,isPossibleAddDownRow:!1,isShowHorizontalOption:!1,isShowVerticalOption:!1,fromSectionType:n.gridStartSectionType,fromColumnSectionType:n.gridStartColumnSectionType,fromColumnId:n.gridStartColumnId,fromRowId:n.gridStartRowId,toSectionType:n.gridEndSectionType,toColumnSectionType:n.gridEndColumnSectionType,toColumnId:n.gridEndColumnId,toRowId:n.gridEndRowId,datas:e},i,o,c;if([l,a].contains(n.gridStartSectionType)){u&&u._triggerEvent(ecount.grid.event.list.selectorSelect,null,t);return}for(t.isPossibleAddLeftColumn=!0,t.isPossibleAddRightColumn=!0,t.isPossibleAddUpRow=!0,t.isPossibleAddDownRow=!0,i={isHorizontal:!1,isVertical:!1},i=this.core.fn.getDisplaySelectorOption(n.gridStartSectionType,n.gridStartBoundary,n.gridEndSectionType,n.gridEndBoundary),this.mixinOption.optSelector.handlerVersion==f.selector.handlerVersion.custom||(i.isHorizontal&&i.isVertical?this.mixinOption.viewSelector.showOption({isShowCross:!0}):i.isHorizontal?this.mixinOption.viewSelector.showOption({isShowHorizontal:!0}):i.isVertical&&this.mixinOption.viewSelector.showOption({isShowVertical:!0})),t.isShowHorizontalOption=i.isHorizontal,t.isShowVerticalOption=i.isVertical,o=0,c=e.length;o<c;o++){var r=e[o],y=r.sectionType,p=r.detailSectionType,s=r.columnSectionType,w=r.rowBoundary,h=r.columnBoundary;t.isPossibleMerge||(t.isPossibleMerge=this.core.fn.getIsPossibleMerge(s,h));t.isPossibleDivide||(t.isPossibleDivide=this.core.fn.getIsPossibleDivide(s,h));t.isPossibleDeleteRow||(t.isPossibleDeleteRow=this.core.fn.getIsPossibleDeleteRow(s,h));t.isPossibleDeleteColumn||(t.isPossibleDeleteColumn=this.core.fn.getIsPossibleDeleteColumn(s,h))}t.datas=e;u&&u._triggerEvent(ecount.grid.event.list.selectorSelect,null,t)}};ecount.gridV2.handler.drag={copyTableV2:function(n,t,i,r,u,f){var c,k,o,a,d,g,nt,v,s,l,h,tt,e,y;f=f||{};var it=this.mixinOption.dataRow.getViewDataTableMapAll(n),rt=Object.keys(it),p=this.mixinOption.viewTable.getTableElement(n,rt[0]),w=p.cloneNode(!1),b=0;for(c=0,k=p.children.length;c<k;c++){if(o=p.children[c],a=o.cloneNode(!1),o.tagName=="COLGROUP")for(e=u.left,y=u.right;e<=y;e++)d=o.children[e],g=d.cloneNode(!0),a.appendChild(g);else for(h=0,tt=o.children.length;h<tt;h++){for(nt=o.children[h],renderingTableMap=this.mixinOption.dataRow.getViewDataRenderingTableMap(o.tagName.toLowerCase(),h),v=nt.cloneNode(!1),e=u.left,y=u.right;e<=y;e++)if(["NORMAL","MERGE"].contains(renderingTableMap[e].type))s=this.mixinOption.viewCell.getCellElement(o.tagName.toLowerCase(),renderingTableMap[e].columnId,renderingTableMap[e].rowId).cell,l=s.cloneNode(!0),l.style.height=s.offsetHeight+"px",v.appendChild(l),c==0&&h==0&&(b+=s.offsetWidth);else if(["COLSPAN","ROWSPAN_AND_COLSPAN"].contains(renderingTableMap[e].type)){if(s=this.mixinOption.viewCell.getCellElement(o.tagName.toLowerCase(),renderingTableMap[e].columnId,renderingTableMap[e].rowId).cell,!s)continue;l=s.cloneNode(!0);l.style.height=s.offsetHeight+"px";v.appendChild(l);c==0&&h==0&&(b+=s.offsetWidth)}a.appendChild(v)}w.appendChild(a)}return w.style.width=b+"px",w},copyTableV3:function(n,t,i,r,u,f,e,o){var v=ecount.grid.constValue,yt=v.sectionType.thead,d=v.sectionType.tbody,rt=v.sectionType.tfoot,w,ot,a,tt,st,ht,it,b,c,p,ct,s,k,l,y,lt,et,at,vt,h,g;o=o||{};var pt=this.mixinOption.dataRow.getViewDataTableMapAll(n),wt=Object.keys(pt),ut=this.mixinOption.viewTable.getTableElement(n,wt[0]),ft=ut.cloneNode(!1),nt=0;for(w=0,ot=ut.children.length;w<ot;w++){if(a=ut.children[w],tt=a.cloneNode(!1),a.tagName=="COLGROUP")for(h=e.left,g=e.right;h<=g;h++)st=a.children[h],ht=st.cloneNode(!0),tt.appendChild(ht);else{if(o.sectionTypes&&!o.sectionTypes.contains(a.tagName.toLowerCase()))continue;s=0;k=0;switch(f){case v.drag.directionMovement.horizontal:for(ct=this.mixinOption.dataRow.getAll(n),s=0,k=ct.length;s<k;s++)for(l=0,y=0,this.mixinOption.optCommon.columnType==v.columnType.multi?a.tagName.toLowerCase()==d?t==rt?i==v.sectionSeparateValue.slip?(l=this.mixinOption.dataColumn.__datas.tfootslip.startRow,y=this.mixinOption.dataColumn.__datas.tfootslip.endRow):(l=this.mixinOption.dataColumn.__datas.tfoot.startRow,y=this.mixinOption.dataColumn.__datas.tfoot.endRow):i==v.sectionSeparateValue.slip?(l=this.mixinOption.dataColumn.__datas.tbodyslip.startRow,y=this.mixinOption.dataColumn.__datas.tbodyslip.endRow):(l=this.mixinOption.dataColumn.__datas.tbody.startRow,y=this.mixinOption.dataColumn.__datas.tbody.endRow):(l=0,y=a.children.length-1):n==yt?i==v.sectionSeparateValue.slip?(l=s*this.mixinOption.dataColumn.__datas.theadslip.startRow+this.mixinOption.dataColumn.__datas.theadslip.startRow,y=s*this.mixinOption.dataColumn.__datas.theadslip.endRow+this.mixinOption.dataColumn.__datas.theadslip.endRow):(l=s*this.mixinOption.dataColumn.__datas.thead.startRow+this.mixinOption.dataColumn.__datas.thead.startRow,y=s*this.mixinOption.dataColumn.__datas.thead.endRow+this.mixinOption.dataColumn.__datas.thead.endRow):n==d?i==v.sectionSeparateValue.slip?(l=s*this.mixinOption.dataColumn.__datas.tbodyslip.startRow+this.mixinOption.dataColumn.__datas.tbodyslip.startRow,y=s*this.mixinOption.dataColumn.__datas.tbodyslip.endRow+this.mixinOption.dataColumn.__datas.tbodyslip.endRow):(l=s*this.mixinOption.dataColumn.__datas.tbody.startRow+this.mixinOption.dataColumn.__datas.tbody.startRow,y=s*this.mixinOption.dataColumn.__datas.tbody.endRow+this.mixinOption.dataColumn.__datas.tbody.endRow):n==rt&&(i==v.sectionSeparateValue.slip?(l=s*this.mixinOption.dataColumn.__datas.tfootslip.startRow+this.mixinOption.dataColumn.__datas.tfootslip.startRow,y=s*this.mixinOption.dataColumn.__datas.tfootslip.endRow+this.mixinOption.dataColumn.__datas.tfootslip.endRow):(l=s*this.mixinOption.dataColumn.__datas.tfoot.startRow+this.mixinOption.dataColumn.__datas.tfoot.startRow,y=s*this.mixinOption.dataColumn.__datas.tfoot.endRow+this.mixinOption.dataColumn.__datas.tfoot.endRow));l<=y;l++){for(it=a.children[l],renderingTableMap=this.mixinOption.dataRow.getViewDataRenderingTableMap(a.tagName.toLowerCase(),l),b=it.cloneNode(!1),h=e.left,g=e.right;h<=g;h++)if(["NORMAL","MERGE"].contains(renderingTableMap[h].type))c=this.mixinOption.viewCell.getCellElement(a.tagName.toLowerCase(),renderingTableMap[h].columnId,renderingTableMap[h].rowId).cell,p=c.cloneNode(!0),p.style.height=c.offsetHeight+"px",b.appendChild(p),w==0&&l==0&&(nt+=c.offsetWidth);else if(["COLSPAN","ROWSPAN_AND_COLSPAN"].contains(renderingTableMap[h].type)){if(c=this.mixinOption.viewCell.getCellElement(a.tagName.toLowerCase(),renderingTableMap[h].columnId,renderingTableMap[h].rowId).cell,!c)continue;p=c.cloneNode(!0);p.style.height=c.offsetHeight+"px";b.appendChild(p);w==0&&l==0&&(nt+=c.offsetWidth)}tt.appendChild(b)}break;case v.drag.directionMovement.vertical:for(this.mixinOption.optCommon.columnType==v.columnType.multi?(lt=this.mixinOption.dataColumn.getAll(t||n,v.returnType.multi),a.tagName.toLowerCase()==d&&(t==rt?(et=this.mixinOption.dataRow.getSectionRowIndex(a.tagName.toLowerCase(),t),at=this.mixinOption.dataColumn.getAll(d,v.returnType.multi),vt=this.mixinOption.dataRow.getSectionRowIndex(d),k=s=vt.startRowCount*at.length):(et=this.mixinOption.dataRow.getSectionRowIndex(d),k=s=et.startRowIndex*lt.length)),s+=e.top,k+=e.bottom):(s=e.top,k=e.bottom);s<=k;s++){for(it=a.children[s],renderingTableMap=this.mixinOption.dataRow.getViewDataRenderingTableMap(a.tagName.toLowerCase(),s),b=it.cloneNode(!1),h=e.left,g=e.right;h<=g;h++)if(["NORMAL","MERGE"].contains(renderingTableMap[h].type))c=this.mixinOption.viewCell.getCellElement(a.tagName.toLowerCase(),renderingTableMap[h].columnId,renderingTableMap[h].rowId).cell,p=c.cloneNode(!0),p.style.height=c.offsetHeight+"px",b.appendChild(p),w==0&&s==0&&(nt+=c.offsetWidth);else if(["COLSPAN","ROWSPAN_AND_COLSPAN"].contains(renderingTableMap[h].type)){if(c=this.mixinOption.viewCell.getCellElement(a.tagName.toLowerCase(),renderingTableMap[h].columnId,renderingTableMap[h].rowId).cell,!c)continue;p=c.cloneNode(!0);p.style.height=c.offsetHeight+"px";b.appendChild(p);w==0&&s==0&&(nt+=c.offsetWidth)}tt.appendChild(b)}}}ft.appendChild(tt)}return ft.style.width=nt+"px",ft},dragStartPrepare:function(n,t){var e,f,a,v,c,g,o,p,s,w,y,b,r,h;this.core.state=="none"&&(this.core.state="draging");var i=ecount.grid.constValue,k=i.sectionType.thead,nt=i.sectionType.tbody,d=i.sectionType.tfoot,u={result:!0,mouseIconElement:null,startBoundary:{},layoutSize:{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0}},h,l;if((i.checkBoxPropertyNameRex.test(n.gridStartColumnID)||i.rowMoveablePropertyNameRex.test(n.gridStartColumnID)||i.rowNumberingPropertyNameRex.test(n.gridStartColumnID))&&(u.result=!1),this.mixinOption.optForm.version==i.formVersion.third&&this.mixinOption.optCommon.columnType==i.columnType.single&&n.gridStartSectionType!=k&&(u.result=!1),u.result){if(e=this.mixinOption.optLayout.container.getBoundingClientRect(),u.layoutSize={x:e.x,y:e.y,top:e.top,left:e.left,width:e.width,height:e.height,right:e.right,bottom:e.bottom},c=this.mixinOption.dataColumn.getAll(n.gridStartSectionType,i.returnType.multi),g=this.mixinOption.dataRow.getAll(n.gridStartSectionType),!f)if(this.mixinOption.optForm.version==i.formVersion.second)for(o=0,p=c.length;o<p;o++){for(s=0,w=c[o].length;s<w;s++)if(c[o][s].id==n.gridStartColumnID){f={top:0,bottom:o,left:s,right:s};break}if(f)break}else if(this.mixinOption.optForm.version==i.formVersion.third){if(a=this.core.view.selector.getStartBoundary(),v=this.core.view.selector.getEndBoundary(),f={top:a.top,left:a.left,bottom:v.bottom,right:v.right},this.mixinOption.optCommon.columnType==i.columnType.multi){if(r=this.mixinOption.view.getSectionTypeByElement(t.target),r.sectionType==null&&r.detailSectionType==null)return u;u.gridColumnSectionType=n.gridColumnSectionType=r.columnSectionType?r.columnSectionType:n.gridSectionType;n.gridDetailSectionType=r.detailSectionType?r.detailSectionType:n.gridDetailSectionType}this.mixinOption.optCommon.columnType==i.columnType.multi&&n.gridColumnSectionType==d&&(y=this.mixinOption.dataColumn.getAll(sectionType,i.returnType.multi),f.top-=y.length,f.bottom-=y.length)}else this.mixinOption.optForm.version==i.formVersion.fourth&&(b=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),f=b[0].columnBoundary);if(r=this.mixinOption.view.getSectionTypeByElement(t.target),r.sectionType==null&&r.detailSectionType==null)return u;u.gridColumnSectionType=n.gridColumnSectionType=r.columnSectionType?r.columnSectionType:n.gridSectionType;n.gridDetailSectionType=r.detailSectionType?r.detailSectionType:n.gridDetailSectionType;this.mixinOption.optForm.version==i.formVersion.second?h=ecount.gridV2.handler.drag.copyTableV2.call(this,n.gridStartSectionType,n.gridStartColumnID,n.gridStartDataKey,n.gridMoveType,f):this.mixinOption.optForm.version==i.formVersion.third?(this.mixinOption.optCommon.columnType==i.columnType.single?l=[n.gridStartSectionType]:this.mixinOption.optCommon.columnType==i.columnType.multi&&(l=[n.gridStartSectionType]),h=ecount.gridV2.handler.drag.copyTableV3.call(this,n.gridStartSectionType,n.gridColumnSectionType,n.gridDetailSectionType,n.gridStartColumnID,n.gridStartDataKey,n.gridMoveType,f,{sectionTypes:l})):this.mixinOption.optForm.version==i.formVersion.fourth&&(h=document.createElement("div"),h.classList.add("draggable-helper"));u.startBoundary=f;u.mouseIconElement=h;u.startElementPosition=this.mixinOption.viewCell.getSizeByContainer(n.gridStartSectionType,c[f.top][f.left].id,n.gridStartDataKey)}return u},dragStartFinish:function(){},dragMovePrepare:function(n,t){var i=ecount.grid.constValue,b=ecount.gridV2.modules.util,k=i.sectionType.thead,at=i.sectionType.tbody,et=i.sectionType.tfoot,u={result:!0,scrollPosition:{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0},element:null},rt,f,o,tt,a,it,l,ft,p,w,c;if((i.checkBoxPropertyNameRex.test(n.gridMoveColumnID)||i.rowMoveablePropertyNameRex.test(n.gridMoveColumnID)||i.rowNumberingPropertyNameRex.test(n.gridMoveColumnID))&&(u.result=!1),this.mixinOption.optForm.version==i.formVersion.second)n.gridMoveSectionType=k,n.gridMoveDataKey=this.mixinOption.dataRow.getByIndex(k,0)[i.keyColumnPropertyName];else if(this.mixinOption.optForm.version==i.formVersion.third){if(this.mixinOption.optCommon.columnType==i.columnType.single)n.gridMoveSectionType!=k&&(u.result=!1);else if(this.mixinOption.optCommon.columnType==i.columnType.multi){if(f=this.mixinOption.view.getSectionTypeByElement(b.closest(t.target,/T[DH]/)),f.sectionType==null&&f.detailSectionType==null)return u;u.gridColumnSectionType=n.gridColumnSectionType=columnSectionType=f.columnSectionType?f.columnSectionType:n.sectionType;n.gridDetailSectionType=f.detailSectionType?f.detailSectionType:n.gridDetailSectionType;(n.gridStartColumnSectionType||n.gridStartSectionType)!=columnSectionType&&(u.result=!1)}}else if(this.mixinOption.optForm.version==i.formVersion.fourth)if(this.mixinOption.optCommon.columnType==i.columnType.single)n.gridMoveSectionType!=k&&(u.result=!1);else if(this.mixinOption.optCommon.columnType==i.columnType.multi){if(f=this.mixinOption.view.getSectionTypeByElement(b.closest(t.target,/T[DH]/)),f.sectionType==null&&f.detailSectionType==null)return u;u.gridColumnSectionType=n.gridColumnSectionType=columnSectionType=f.columnSectionType?f.columnSectionType:n.sectionType;n.gridDetailSectionType=f.detailSectionType?f.detailSectionType:n.gridDetailSectionType;(n.gridStartColumnSectionType||n.gridStartSectionType)!=columnSectionType&&(u.result=!1)}if(u.result){var e=n.gridMoveColumnSectionType||n.gridMoveSectionType,s=n.gridMoveDataKey,v=n.gridMoveColumnID;if([i.formVersion.third].contains(this.mixinOption.optForm.version)){if(f=this.mixinOption.view.getSectionTypeByElement(b.closest(t.target,/T[DH]/)),f.sectionType==null&&f.detailSectionType==null)return u;u.gridColumnSectionType=n.gridColumnSectionType=f.columnSectionType?f.columnSectionType:n.gridSectionType;n.gridDetailSectionType=f.detailSectionType?f.detailSectionType:n.gridDetailSectionType}else if(i.formVersion.fourth==this.mixinOption.optForm.version)if(n.gridMoveDirection==i.crossDirection.rightOfRight||n.gridMoveDirection==i.crossDirection.leftOfRight||n.gridMoveDirection==i.crossDirection.rightOfLeft||n.gridMoveDirection==i.crossDirection.leftOfLeft){var ht=this.mixinOption.dataColumn.getIndexById(e,i.returnType.multi,n.gridMoveColumnID),ut=this.mixinOption.viewSelector.getSelectedSectionTypes(),ot=this.mixinOption.viewSelector.getSelectedColumnSectionTypes(),h=this.mixinOption.dataColumn.getAll(ot[0],i.returnType.multi),d=this.mixinOption.dataRow.getAll(ut[0]);this.mixinOption.optCommon.columnType==i.columnType.multi&&ot[0]==et&&(d=d.filter(function(n){return n[i.rowVariableNames.rowType]==i.rowType.separate}));var st=h[0][ht],ct=this.mixinOption.viewCell.getCellOriginalElement(ut[0],st.id,d[0][i.keyColumnPropertyName]).cell,f=this.mixinOption.view.getSectionTypeByElement(b.closest(ct,/T[DH]/));if(f.sectionType==null&&f.detailSectionType==null)return u;u.gridColumnSectionType=n.gridColumnSectionType=f.columnSectionType?f.columnSectionType:n.gridSectionType;n.gridDetailSectionType=f.detailSectionType?f.detailSectionType:n.gridDetailSectionType;e=ut[0];s=d[0][i.keyColumnPropertyName];v=st.id}else e=n.gridMoveSectionType,s=n.gridMoveDataKey,v=n.gridMoveColumnID;var r,g=this.core.data.column.getSystemColumnCount(n.gridStartSectionType),h=this.mixinOption.dataColumn.getAll(n.gridStartColumnSectionType||e,i.returnType.multi),vt=h.length,lt=h[0].length,nt=lt-1,d=this.mixinOption.dataRow.getAll(e),y;if(!r)if(this.mixinOption.optForm.version==i.formVersion.fourth)for(o=0,tt=h.length;o<tt;o++){for(a=0,it=h[o].length;a<it;a++)if(h[o][a].id==v){y=this.mixinOption.dataColumn.getGroupRowIndexInfo(n.gridStartSectionType,n.gridColumnSectionType||n.gridStartSectionType,n.gridMoveDetailSectionType);r=n.gridMoveType==i.drag.directionMovement.vertical?n.gridMoveMethod=="MOVE_TO_DIFFERENT_ROWTYPE"?{top:y.startRowIndex,bottom:y.endRowIndex,left:g,right:nt}:this.mixinOption.optForm.version==i.formVersion.fourth?{top:o,bottom:o,left:n.gridStartBoundary.left,right:n.gridStartBoundary.right}:{top:o,bottom:o,left:g,right:nt}:{top:n.gridStartBoundary.top,bottom:n.gridStartBoundary.bottom,left:a,right:a};break}if(r)break}else for(o=0,tt=h.length;o<tt;o++){for(a=0,it=h[o].length;a<it;a++)if(h[o][a].id==v){y=this.mixinOption.dataColumn.getGroupRowIndexInfo(n.gridStartSectionType,n.gridColumnSectionType||n.gridStartSectionType,n.gridDetailSectionType);r=n.gridMoveType==i.drag.directionMovement.vertical?n.gridMoveMethod=="MOVE_TO_DIFFERENT_ROWTYPE"?{top:y.startRowIndex,bottom:y.endRowIndex,left:g,right:nt}:this.mixinOption.optForm.version==i.formVersion.fourth?{top:o,bottom:o,left:n.gridStartBoundary.left,right:n.gridStartBoundary.right}:{top:o,bottom:o,left:g,right:nt}:{top:y.startRowIndex,bottom:y.endRowIndex,left:a,right:a};break}if(r)break}if(this.mixinOption.optForm.version==i.formVersion.fourth?this.mixinOption.optCommon.columnType==i.columnType.single?r=this.mixinOption.dataRow.extendBoundary2(n.gridStartSectionType,n.gridColumnSectionType,n.gridDetailSectionType,r,Object.clone(r)):this.mixinOption.optCommon.columnType==i.columnType.multi&&(r=this.mixinOption.dataRow.extendBoundary(n.gridStartSectionType,n.gridColumnSectionType,r,Object.clone(r))):r=this.mixinOption.dataRow.extendBoundary(n.gridStartSectionType,n.gridColumnSectionType,r,Object.clone(r)),this.mixinOption.optForm.version==i.formVersion.third){l=this.core.view.selector.getBoundary().clone();this.mixinOption.optCommon.columnType==i.columnType.multi&&n.gridColumnSectionType==et&&(ft=this.mixinOption.dataColumn.getAll(n.gridStartSectionType,i.returnType.multi),l.top-=ft.length,l.bottom-=ft.length);switch(n.gridMoveType){case i.drag.directionMovement.horizontal:l.left<=r.left&&r.right<=l.right&&(r=l,n.gridMoveDirection="none");break;case i.drag.directionMovement.vertical:l.top<=r.top&&r.bottom<=l.bottom&&l.left<=r.left&&r.right<=l.right?(r=l,n.gridMoveDirection="none"):(r.left=l.left,r.right=l.right)}}this.mixinOption.optForm.version==i.formVersion.second?u.shadowIconElement=ecount.gridV2.handler.drag.copyTableV2.call(this,e,v,s,n.gridMoveType,r):this.mixinOption.optForm.version==i.formVersion.third?(this.mixinOption.optCommon.columnType==i.columnType.single?rt=[e]:this.mixinOption.optCommon.columnType==i.columnType.multi&&(rt=[e]),u.shadowIconElement=ecount.gridV2.handler.drag.copyTableV3.call(this,e,n.gridColumnSectionType,n.gridDetailSectionType,v,s,n.gridMoveType,r,{sectionTypes:rt})):this.mixinOption.optForm.version==i.formVersion.fourth&&(u.caretIconElement=$("<div class='draggable-holder'><div class='holder-top'><\/div><div class='holder-left'><\/div><\/div>")[0]);u.boundary=r;u.startElementPosition=this.mixinOption.viewCell.getSizeByContainer(e,h[r.top][r.left].id,s);this.mixinOption.optForm.version==i.formVersion.second&&(u.startElementPosition.top+=this.mixinOption.optHeader.topMargin,u.startElementPosition.bottom+=this.mixinOption.optHeader.topMargin);[i.crossDirection.left,i.crossDirection.rightOfLeft,i.crossDirection.leftOfLeft].contains(n.gridMoveDirection)?(p=this.mixinOption.dataColumn.getPrevColumnId(n.gridColumnSectionType||n.gridColumnSectionType||e,v,s),p&&(c=this.mixinOption.viewCell.getCellElement(e,p,s),[i.checkBoxPropertyName,i.rowMoveablePropertyName,i.rowNumberingPropertyName].contains(p)||c.map.cellInfo.adjustmentValue!=1&&(u.scrollElement=c.cell,u.scrollPosition=this.mixinOption.viewCell.getSizeByScreen(e,p,s),u.scrollPosition.left=u.scrollPosition.x=Math.floor(u.scrollPosition.left/2)))):[i.crossDirection.right,i.crossDirection.rightOfRight,i.crossDirection.leftOfRight].contains(n.gridMoveDirection)?(w=this.mixinOption.dataColumn.getNextColumnId(n.gridColumnSectionType||e,v,s),w&&(c=this.mixinOption.viewCell.getCellElement(e,w,s),[i.checkBoxPropertyName,i.rowMoveablePropertyName,i.rowNumberingPropertyName].contains(w)||c.map.cellInfo.adjustmentValue!=1&&(u.scrollElement=c.cell,u.scrollPosition=this.mixinOption.viewCell.getSizeByScreen(e,w,s),u.scrollPosition.left=u.scrollPosition.x=Math.floor(u.scrollPosition.left/2)))):n.gridMoveDirection==i.crossDirection.none?(c=this.mixinOption.viewCell.getCellElement(e,h[0][r.left].id,s),u.cellElement=c.cell):[i.crossDirection.up,i.crossDirection.down].contains(n.gridMoveDirection)?(c=this.mixinOption.viewCell.getCellElement(e,h[r.top][r.left].id,s),u.cellElement=c.cell):n.gridMoveMethod=="MOVE_TO_DIFFERENT_ROWTYPE"&&(n.gridStartBoundary.top<r.top?(c=this.mixinOption.viewCell.getCellElement(e,h[r.bottom][r.left].id,s),u.cellElement=c.cell):n.gridStartBoundary.top>r.top&&(c=this.mixinOption.viewCell.getCellElement(e,h[r.top][r.left].id,s),u.cellElement=c.cell))}return u},dragMoveFinish:function(){},dragEndPrepare:function(n){var t={result:!1,sectionType:n.gridStartSectionType,boundary:{top:-1,left:-1,bottom:-1,right:-1},cells:[]},u;if(!n.gridStartBoundary||!n.gridMoveBoundary)return t;var i=ecount.grid.constValue,f=i.sectionType.thead,c=i.sectionType.tbody,l=i.sectionType.tfoot,o=this.setting.eventsGet(),r=!1,s=this.mixinOption.dataColumn.getAll(f,i.returnType.multi),h=s[0].length,a=h-1,e=[];return this.mixinOption.dataRow.addTotalMergeSet(f,f,null,e),e.length>0&&(r=ecount.gridV2.util.isCollideLeftFixed(e,n.gridStartBoundary,n.gridMoveBoundary,s,h)),u=o&&o._triggerEvent(ecount.grid.event.list.formSetDragPrepareComplete,null,{isCollideLeftFixed:r,callback:n.fn})||{result:!0,isCancelLeftFixed:r},t.cells=ecount.gridV2.handler.drag.getCellByBoundary.call(this,n.gridStartSectionType,n.gridStartBoundary),t.isCancelLeftFixed=typeof u.isCancelLeftFixed=="boolean"?u.isCancelLeftFixed:r,t.result=u.result,t},getCellByBoundary:function(n,t){for(var f,r=[],i=ecount.grid.constValue,h=i.sectionType.thead,c=i.sectionType.tbody,l=i.sectionType.tfoot,e=this.mixinOption.dataRow.getAll(n),o=this.mixinOption.dataColumn.getAll(n,i.returnType.multi),u=0,s=e.length;u<s;u++)f=e[u][i.keyColumnPropertyName],r.push(this.mixinOption.viewCell.getCellOriginalElement(n,o[t.top][t.left].id,f).cell),r.push(this.mixinOption.viewCell.getCellOriginalElement(n,o[t.bottom][t.right].id,f).cell);return r},dragEndFinish:function(n){function e(){function hi(){var i=t.crossDirection.none;return n.gridMoveType==t.drag.directionMovement.horizontal?n.gridMoveDirection==t.crossDirection.right?i=t.crossDirection.right:n.gridMoveDirection==t.crossDirection.left&&(i=t.crossDirection.left):n.gridMoveType==t.drag.directionMovement.vertical&&(n.gridMoveDirection==t.crossDirection.up?i=t.crossDirection.up:n.gridMoveDirection==t.crossDirection.down&&(i=t.crossDirection.down)),i}var rt=[r,f,i],ni=this.mixinOption.view.selector&&this.mixinOption.view.selector.getStartColumnSectionType(),a={result:!1,sectionType:n.gridStartSectionType,boundary:{top:-1,left:-1,bottom:-1,right:-1},cells:[]},ti=this.mixinOption.dataColumn.getLeftFixed(r),oi=this.mixinOption.dataRow.getViewDataTableMapAll(r),si=Object.keys(oi),p=this.mixinOption.viewTable.getColgroupElement(r,si[0]),wt=this.setting.getFormIsAutoMergeSpecialrow(),b,ot,ii,ut,ht,ri,it,ui,et,k,g,pt,w,vt,u,kt,dt,o,d,gt,c,h,lt,ei,v,at;if(this.mixinOption.optForm.version==t.formVersion.third&&n.gridStartSectionType!=n.gridMoveSectionType)return a;if(n.gridMoveType==t.drag.directionMovement.horizontal){if(n.gridMoveDirection==t.crossDirection.left){for(v=n.gridStartBoundary.right;v>=n.gridStartBoundary.left;v--)p.children[n.gridMoveBoundary.left]?p.insertBefore(p.children[n.gridStartBoundary.right],p.children[n.gridMoveBoundary.left]):p.appendChild(p.children[n.gridStartBoundary.right]);a.boundary={left:n.gridMoveBoundary.left,right:n.gridMoveBoundary.left+n.gridStartBoundary.right-n.gridStartBoundary.left,top:n.gridStartBoundary.top,bottom:n.gridStartBoundary.bottom}}else if(n.gridMoveDirection==t.crossDirection.right){for(v=n.gridStartBoundary.left,at=n.gridStartBoundary.right;v<=at;v++)p.children[n.gridMoveBoundary.right+1]?p.insertBefore(p.children[n.gridStartBoundary.left],p.children[n.gridMoveBoundary.right+1]):p.appendChild(p.children[n.gridStartBoundary.left]);a.boundary={left:n.gridMoveBoundary.right-(n.gridStartBoundary.right-n.gridStartBoundary.left),right:n.gridMoveBoundary.right,top:n.gridStartBoundary.top,bottom:n.gridStartBoundary.bottom}}}else n.gridMoveType==t.drag.directionMovement.vertical&&(n.gridMoveDirection==t.crossDirection.up?a.boundary={left:n.gridStartBoundary.left,right:n.gridStartBoundary.right,top:n.gridMoveBoundary.top,bottom:n.gridMoveBoundary.top+(n.gridStartBoundary.bottom-n.gridStartBoundary.top)}:n.gridMoveDirection==t.crossDirection.down&&(a.boundary={left:n.gridStartBoundary.left,right:n.gridStartBoundary.right,top:n.gridMoveBoundary.bottom+1-(n.gridStartBoundary.bottom-n.gridStartBoundary.top+1),bottom:n.gridMoveBoundary.bottom}));if(a.boundary.top==-1||a.boundary.left==-1||a.boundary.bottom==-1||a.boundary.right==-1)return a;for(b=hi(),w=0,vt=rt.length;w<vt;w++){var u=rt[w],k=this.mixinOption.dataRow.getAll(u),c=this.mixinOption.dataColumn.getAll(u,t.returnType.multi);for(h=k.length-1;h>-1;h--){var ci=k[h],s=ci[t.keyColumnPropertyName],vi=this.mixinOption.dataRow.getViewDataTrMap(u,s);if(n.gridMoveType==t.drag.directionMovement.horizontal)for(o=n.gridStartBoundary.top,d=n.gridStartBoundary.bottom;o<=d;o++){var ut=this.mixinOption.viewRow.getRowElement(u,s,o),yt=[],nt=null,ft,y,li=n.gridMoveDirection==t.crossDirection.left?n.gridMoveBoundary.left:n.gridMoveBoundary.right+1;for(ft=c[o][li],ft&&(y=this.mixinOption.viewCell.getCellElement(u,ft.id,s),y&&y.map.cellInfo.adjustmentValue==1&&(y=this.mixinOption.viewCell.getNextCellElement(u,ft.id,s),y&&y.map.cellInfo.columnIdx==n.gridStartBoundary.left&&(y=this.mixinOption.viewCell.getNextCellElement(u,c[o][n.gridStartBoundary.left].id,s))),nt=y&&y.cell),v=n.gridStartBoundary.left;v<=n.gridStartBoundary.right;v++)ft=c[o][v],y=this.mixinOption.viewCell.getCellElement(u,ft.id,s),y.map&&y.map.cellInfo&&y.map.cellInfo.adjustmentValue!=1&&yt.push(y.cell);for(ot=0,ii=yt.length;ot<ii;ot++)nt?ut.insertBefore(yt[ot],nt):ut.appendChild(yt[ot])}else if(n.gridMoveType==t.drag.directionMovement.vertical){var bt=this.mixinOption.viewRow.getSectionElement(u,s),tt=bt.children,st=[],nt,l=[],e;if(n.gridMoveDirection==t.crossDirection.up)for(n.gridMoveBoundary.top==0&&(this.mixinOption.optCheckbox[u==i?r:u].items[t.checkBoxPropertyName].use&&(e=this.mixinOption.optCheckbox[u==i?r:u].items[t.checkBoxPropertyName].index,u==i?l.push({element:this.mixinOption.viewCell.getCellElement(i,c[0][e].id,s).cell,targetIndex:e}):l.push({element:this.mixinOption.viewCell.getCellElement(u,c[0][e].id,s).cell,targetIndex:e})),this.mixinOption.optRowmoveable.use&&(e=this.mixinOption.optRowmoveable.index,l.push({element:this.mixinOption.viewCell.getCellElement(u,c[0][e].id,s).cell,targetIndex:e})),this.mixinOption.optNumbering.use&&(e=this.mixinOption.optNumbering.index,l.push({element:this.mixinOption.viewCell.getCellElement(u,c[0][e].id,s).cell,targetIndex:e})),l.sort(function(n,t){var i=n.targetIndex,r=t.targetIndex;return i>r?1:i<r?-1:0})),nt=tt[h*c.length+n.gridMoveBoundary.top],o=n.gridStartBoundary.top,d=n.gridStartBoundary.bottom;o<=d;o++)ut=this.mixinOption.viewRow.getRowElement(u,s,o),st.push(ut);else if(n.gridMoveDirection==t.crossDirection.down)for(n.gridStartBoundary.top==0&&(this.mixinOption.optCheckbox[u==i?r:u].items[t.checkBoxPropertyName].use&&(e=this.mixinOption.optCheckbox[u==i?r:u].items[t.checkBoxPropertyName].index,u==i?l.push({element:this.mixinOption.viewCell.getCellElement(i,c[0][e].id,s).cell,targetIndex:e}):l.push({element:this.mixinOption.viewCell.getCellElement(u,c[0][e].id,s).cell,targetIndex:e})),this.mixinOption.optRowmoveable.use&&(e=this.mixinOption.optRowmoveable.index,l.push({element:this.mixinOption.viewCell.getCellElement(u,c[0][e].id,s).cell,targetIndex:e})),this.mixinOption.optNumbering.use&&(e=this.mixinOption.optNumbering.index,l.push({element:this.mixinOption.viewCell.getCellElement(u,c[0][e].id,s).cell,targetIndex:e})),l.sort(function(n,t){var i=n.targetIndex,r=t.targetIndex;return i>r?1:i<r?-1:0})),this.mixinOption.viewCell.getCellElement(u,c[0][0].id,s),nt=tt[h*c.length+n.gridMoveBoundary.bottom+1],o=n.gridStartBoundary.top,d=n.gridStartBoundary.bottom;o<=d;o++)ut=this.mixinOption.viewRow.getRowElement(u,s,o),st.push(ut);for(ht=0,ri=st.length;ht<ri;ht++)nt?bt.insertBefore(st[ht],nt):bt.appendChild(st[ht]);for(tt=this.mixinOption.viewRow.getRowElement(u,s),it=0,ui=l.length;it<ui;it++)tt[0].children[l[it].targetIndex]?tt[0].insertBefore(l[it].element,tt[0].children[l[it].targetIndex]):tt[0].appendChild(l[it].element)}}}if(wt){for(g=0,pt=this.mixinOption.optEditable.specialRowMerge.length;g<pt;g++)et=this.mixinOption.optEditable.specialRowMerge[g][t.rowVariableNames.mergeSet],et.splice(0,et.length);for(k=this.mixinOption.dataRow.getAll(i),g=0,pt=k.length;g<pt;g++)et=k[g][t.rowVariableNames.mergeSet],et&&this.mixinOption.dataRow.removeTotalMergeSet(i,i,null,et)}for(w=0,vt=rt.length;w<vt;w++){u=rt[w];this.mixinOption.optCommon.columnType==t.columnType.single&&u==r&&this.mixinOption.optEditable.specialRowMerge&&this.mixinOption.optEditable.specialRowMerge.length>0&&this.mixinOption.dataRow.removeTotalMergeSet(u,u,null,this.mixinOption.optEditable.specialRowMerge[0][t.rowVariableNames.mergeSet]);var fi=[],ct=[],k=this.mixinOption.dataRow.getAll(u),ai=this.mixinOption.dataColumn.getAll(u),c=this.mixinOption.dataColumn.getAll(u,t.returnType.multi),h=0,lt=k.length;if(ai.length!=0||lt!=0){for(this.mixinOption.optCommon.columnType==t.columnType.multi&&(kt=this.mixinOption.dataRow.getSectionRowIndex(u,ni),h=kt.startRowIndex,lt=kt.endRowCount);h<lt;h++)ct.push({moveType:n.gridMoveType,moveDirection:b,moveMethod:n.gridMoveMethod,fromSectionType:u,fromColumnSectionType:u,fromRowType:n.gridStartRowType,fromColumnId:n.gridStartColumnID,fromRowId:k[h][t.keyColumnPropertyName],fromRowIndex:h,fromBoundary:n.gridStartBoundary,toSectionType:u,toColumnSectionType:u,toRowType:n.gridMoveRowType,toColumnId:n.gridMoveColumnID,toRowId:k[h][t.keyColumnPropertyName],toRowIndex:h,toBoundary:n.gridMoveBoundary});for(wt&&rt[w]==i?this.mixinOption.dataRow.moveColumn(b,ct):(this.mixinOption.dataRow.moveViewDataRenderingTableMap(b,ct),this.mixinOption.dataRow.moveColumn(b,ct)),dt=this.mixinOption.dataColumn.getGroupRowIndexInfo(u,ni||u,n.gridStartRowType),o=dt.startRowIndex,d=dt.endRowCount;o<d;o++)fi.push({moveType:n.gridMoveType,moveDirection:b,moveMethod:n.gridMoveMethod,fromSectionType:u,fromRowType:n.gridStartRowType,fromColumnId:n.gridStartColumnID,fromRowIndex:o,fromBoundary:n.gridStartBoundary,toSectionType:u,toRowType:n.gridMoveRowType,toColumnId:n.gridMoveColumnID,toRowIndex:o,toBoundary:n.gridMoveBoundary,isCancelLeftFixed:n.isCancelLeftFixed});this.mixinOption.dataColumn.move(b,fi);wt&&rt[w]==i||this.mixinOption.dataRow.moveViewDataTrMap(b,ct)}}if(this.mixinOption.optForm.version==t.formVersion.fourth&&this.core.fn.remakeAllRow(f),this.core.fn.remakeAllRow(i),n.isCancelLeftFixed)for(gt=this.mixinOption.dataRow.getAll(r),c=this.mixinOption.dataColumn.getAll(r,t.returnType.multi),h=0,lt=gt.length;h<lt;h++)for(ei=gt[h],v=0,at=ti.length;v<at;v++)this.core.fn.refreshCell(r,ti[v].id,ei[t.keyColumnPropertyName],{isRunChange:!1});return a.cells=ecount.gridV2.handler.drag.getCellByBoundary.call(this,n.gridStartSectionType,a.boundary),a.result=!0,a}for(var u,t=ecount.grid.constValue,r=t.sectionType.thead,f=t.sectionType.tbody,i=t.sectionType.tfoot,s=e.apply(this),o=0,h=this.mixinOption.optColumn[r].repeatCount;o<h;o++)u=this.mixinOption.dataColumn.__datas[r].columnCountOfRow,n.gridStartBoundary.left+=u,n.gridStartBoundary.right+=u,n.gridMoveBoundary.left+=u,n.gridMoveBoundary.right+=u,e.apply(this);return this.core.state=="draging"&&(this.core.state="none"),s},dragEndCompleted:function(){this.core.state="none"},dragMovePossible:function(n){function c(n,i,u){return i.startRow>-1&&i.endRow>-1&&n.startRow>-1&&n.endRow>-1?u.top==n.startRow&&u.bottom==n.endRow&&t-r!=u.right-u.left+1?{isPossibleHorizontal:!0}:u.top==i.startRow&&u.bottom==i.endRow&&t-r!=u.right-u.left+1?{isPossibleHorizontal:!0}:{isPossibleHorizontal:!1}:{isPossibleHorizontal:o.length==u.bottom-u.top+1&&t-r!=u.right-u.left+1}}function l(n,i,u){return i.startRow>-1&&i.endRow>-1&&n.startRow>-1&&n.endRow>-1?u.top==n.startRow&&u.bottom==n.endRow&&t-r==u.right-u.left+1?{isPossibleVertical:!0}:u.top==i.startRow&&u.bottom==i.endRow&&t-r==u.right-u.left+1?{isPossibleVertical:!0}:n.startRow<=u.top&&n.endRow>=u.bottom&&t-r==u.right-u.left+1?{isPossibleVertical:!0}:i.startRow<=u.top&&i.endRow>=u.bottom&&t-r==u.right-u.left+1?{isPossibleVertical:!0}:{isPossibleVertical:!1}:{isPossibleVertical:o.length!=u.bottom-u.top+1&&t-r==u.right-u.left+1}}var u=ecount.grid.constValue,a=u.sectionType.thead,s=u.sectionType.tbody,h=u.sectionType.tfoot,i={isPossibleVertical:!1,isPossibleHorizontal:!1},e;this.mixinOption.optCommon.columnType==u.columnType.multi&&n.gridColumnSectionType==h&&(e=this.mixinOption.dataColumn.getAll(s,u.returnType.multi),n.gridBoundary.top-=e.length,n.gridBoundary.bottom-=e.length);var o=this.mixinOption.dataColumn.getAll(n.gridColumnSectionType||n.gridSectionType,u.returnType.multi),t=o[0].length,v=t-1,r=this.core.data.column.getSystemColumnCount(n.gridSectionType),f;return f=c(this.mixinOption.dataColumn.__datas[n.gridColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridColumnSectionType+"slip"],n.gridBoundary),i.isPossibleHorizontal=f.isPossibleHorizontal,f=l(this.mixinOption.dataColumn.__datas[n.gridColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridColumnSectionType+"slip"],n.gridBoundary),i.isPossibleVertical=f.isPossibleVertical,i.verticalMethod=this.core.fn.getMoveVerticalType(n.gridSectionType,n.gridColumnSectionType,this.mixinOption.dataColumn.__datas[n.gridColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridColumnSectionType+"slip"],n.gridBoundary),i.isPossibleVertical&&i.isPossibleHorizontal&&(i.isPossibleVertical=i.isPossibleHorizontal=!1),i},getColumnSectionType:function(n){var t=ecount.grid.constValue,f=t.sectionType.thead,e=t.sectionType.tbody,i=t.sectionType.tfoot,r=this.mixinOption.dataRow.getById(n.gridSectionType,n.gridDataKey),u=r[t.rowVariableNames.rowType];return u==t.rowType.separate?i:n.gridSectionType}};ecount.gridV2.handler.dragTableMulti={copyTableV2:function(n,t,i,r,u,f){var c,k,o,a,d,g,nt,v,s,l,h,tt,e,y;f=f||{};var it=this.mixinOption.dataRow.getViewDataTableMapAll(n),rt=Object.keys(it),p=this.mixinOption.viewTable.getTableElement(n,rt[0]),w=p.cloneNode(!1),b=0;for(c=0,k=p.children.length;c<k;c++){if(o=p.children[c],a=o.cloneNode(!1),o.tagName=="COLGROUP")for(e=u.left,y=u.right;e<=y;e++)d=o.children[e],g=d.cloneNode(!0),a.appendChild(g);else for(h=0,tt=o.children.length;h<tt;h++){for(nt=o.children[h],renderingTableMap=this.mixinOption.dataRow.getViewDataRenderingTableMap(o.tagName.toLowerCase(),h),v=nt.cloneNode(!1),e=u.left,y=u.right;e<=y;e++)if(["NORMAL","MERGE"].contains(renderingTableMap[e].type))s=this.mixinOption.viewCell.getCellElement(o.tagName.toLowerCase(),renderingTableMap[e].columnId,renderingTableMap[e].rowId).cell,l=s.cloneNode(!0),l.style.height=s.offsetHeight+"px",v.appendChild(l),c==0&&h==0&&(b+=s.offsetWidth);else if(["COLSPAN","ROWSPAN_AND_COLSPAN"].contains(renderingTableMap[e].type)){if(s=this.mixinOption.viewCell.getCellElement(o.tagName.toLowerCase(),renderingTableMap[e].columnId,renderingTableMap[e].rowId).cell,!s)continue;l=s.cloneNode(!0);l.style.height=s.offsetHeight+"px";v.appendChild(l);c==0&&h==0&&(b+=s.offsetWidth)}a.appendChild(v)}w.appendChild(a)}return w.style.width=b+"px",w},copyTableV3:function(n,t,i,r,u,f,e,o){var l=ecount.grid.constValue,yt=l.sectionType.thead,y=l.sectionType.tbody,ft=l.sectionType.tfoot,p,et,h,k,ot,st,ht,d,v,w,s,a,b,rt,ut,ct,lt,c,g;o=o||{};var at=this.mixinOption.dataRow.getViewDataTableMapAll(n),vt=Object.keys(at),nt=this.mixinOption.viewTable.getTableElement(n,vt[0]),tt=nt.cloneNode(!1),it=0;for(p=0,et=nt.children.length;p<et;p++){if(h=nt.children[p],k=h.cloneNode(!1),h.tagName=="COLGROUP")for(c=e.left,g=e.right;c<=g;c++)ot=h.children[c],st=ot.cloneNode(!0),k.appendChild(st);else{if(o.sectionTypes&&!o.sectionTypes.contains(h.tagName.toLowerCase()))continue;s=0;a=0;switch(f){case l.drag.directionMovement.horizontal:this.mixinOption.optCommon.columnType==l.columnType.multi?(rt=this.mixinOption.dataColumn.getAll(t||n,l.returnType.multi),h.tagName.toLowerCase()==y?t==ft?(b=this.mixinOption.dataRow.getViewDataTrMap(y,u),b.rowInfo.trIdx.length>0&&(s=b.rowInfo.trIdx[0],a=b.rowInfo.trIdx[b.rowInfo.trIdx.length-1])):i==l.sectionSeparateValue.slip?(s=this.mixinOption.dataColumn.__datas.tbodyslip.startRow,a=this.mixinOption.dataColumn.__datas.tbodyslip.endRow):(s=this.mixinOption.dataColumn.__datas.tbody.startRow,a=this.mixinOption.dataColumn.__datas.tbody.endRow):(s=0,a=h.children.length-1)):(s=0,a=h.children.length-1);break;case l.drag.directionMovement.vertical:this.mixinOption.optCommon.columnType==l.columnType.multi?(rt=this.mixinOption.dataColumn.getAll(t||n,l.returnType.multi),h.tagName.toLowerCase()==y&&(t==ft?(ut=this.mixinOption.dataRow.getSectionRowIndex(h.tagName.toLowerCase(),t),ct=this.mixinOption.dataColumn.getAll(y,l.returnType.multi),lt=this.mixinOption.dataRow.getSectionRowIndex(y),a=s=lt.startRowCount*ct.length):(ut=this.mixinOption.dataRow.getSectionRowIndex(y),a=s=ut.startRowIndex*rt.length)),s+=e.top,a+=e.bottom):(s=e.top,a=e.bottom)}for(;s<=a;s++){for(ht=h.children[s],renderingTableMap=this.mixinOption.dataRow.getViewDataRenderingTableMap(h.tagName.toLowerCase(),s),d=ht.cloneNode(!1),c=e.left,g=e.right;c<=g;c++)if(["NORMAL","MERGE"].contains(renderingTableMap[c].type))v=this.mixinOption.viewCell.getCellElement(h.tagName.toLowerCase(),renderingTableMap[c].columnId,renderingTableMap[c].rowId).cell,w=v.cloneNode(!0),w.style.height=v.offsetHeight+"px",d.appendChild(w),p==0&&s==0&&(it+=v.offsetWidth);else if(["COLSPAN","ROWSPAN_AND_COLSPAN"].contains(renderingTableMap[c].type)){if(v=this.mixinOption.viewCell.getCellElement(h.tagName.toLowerCase(),renderingTableMap[c].columnId,renderingTableMap[c].rowId).cell,!v)continue;w=v.cloneNode(!0);w.style.height=v.offsetHeight+"px";d.appendChild(w);p==0&&s==0&&(it+=v.offsetWidth)}k.appendChild(d)}}tt.appendChild(k)}return tt.style.width=it+"px",tt},copyTableV3Multi:function(n,t,i){for(var u,h,w,b,k,c,f,o,e,d,r,l,a=ecount.grid.constValue,it=a.sectionType.thead,rt=a.sectionType.tbody,ut=a.sectionType.tfoot,g=this.mixinOption.dataRow.getViewDataTableMapAll(n),nt=Object.keys(g),v=this.mixinOption.viewTable.getTableElement(n,nt[0]),y=v.cloneNode(!1),p=0,s=0,tt=v.children.length;s<tt;s++){if(u=v.children[s],h=u.cloneNode(!1),u.tagName=="COLGROUP")for(r=i.left,l=i.right;r<=l;r++)w=u.children[r],b=w.cloneNode(!0),h.appendChild(b);else for(e=0,d=u.children.length;e<d;e++){for(k=u.children[e],renderingTableMap=this.mixinOption.dataRow.getViewDataRenderingTableMap(u.tagName.toLowerCase(),e),c=k.cloneNode(!1),r=i.left,l=i.right;r<=l;r++)if(["NORMAL","MERGE"].contains(renderingTableMap[r].type))f=this.mixinOption.viewCell.getCellElement(u.tagName.toLowerCase(),renderingTableMap[r].columnId,renderingTableMap[r].rowId).cell,o=f.cloneNode(!0),o.style.height=f.offsetHeight+"px",c.appendChild(o),s==0&&e==0&&(p+=f.offsetWidth);else if(["COLSPAN","ROWSPAN_AND_COLSPAN"].contains(renderingTableMap[r].type)){if(f=this.mixinOption.viewCell.getCellElement(u.tagName.toLowerCase(),renderingTableMap[r].columnId,renderingTableMap[r].rowId).cell,!f)continue;o=f.cloneNode(!0);o.style.height=f.offsetHeight+"px";c.appendChild(o);s==0&&e==0&&(p+=f.offsetWidth)}h.appendChild(c)}y.appendChild(h)}return y.style.width=p+"px",y},getClosestColumn:function(n,t,i,r){for(var f=ecount.grid.constValue,s=f.sectionType.thead,h=f.sectionType.tbody,c=f.sectionType.tfoot,f=ecount.grid.constValue,o=this.mixinOption.dataColumn.getAll(n,f.returnType.multi),u,e=r.left;;){if(u=o[r.top][e],t==f.crossDirection.left&&u&&ecount.common.isTrue(u.isMergeColumn)){u=null;e+=1;e==i.right&&(e=i.right+1);continue}else if(t==f.crossDirection.right){if(!u)break;if(ecount.common.isTrue(u.isMergeColumn)){u=null;e+=1;continue}}if(u)break;if(o[0].length==e)break}return u},getCellSystemColumn:function(n,t,i){var r=ecount.grid.constValue,o=r.sectionType.thead,s=r.sectionType.tbody,f=r.sectionType.tfoot,e=this.mixinOption.dataColumn.getAll(t,r.returnType.multi),u=[];return this.mixinOption.optCheckbox[n==f?o:n].items[r.checkBoxPropertyName].use&&(index=this.mixinOption.optCheckbox[n==f?o:n].items[r.checkBoxPropertyName].index,n==f?u.push({element:this.mixinOption.viewCell.getCellElement(f,e[0][index].id,i).cell,targetIndex:index}):u.push({element:this.mixinOption.viewCell.getCellElement(n,e[0][index].id,i).cell,targetIndex:index})),this.mixinOption.optRowmoveable.use&&(index=this.mixinOption.optRowmoveable.index,u.push({element:this.mixinOption.viewCell.getCellElement(n,e[0][index].id,i).cell,targetIndex:index})),this.mixinOption.optNumbering.use&&(index=this.mixinOption.optNumbering.index,u.push({element:this.mixinOption.viewCell.getCellElement(n,e[0][index].id,i).cell,targetIndex:index})),u.sort(function(n,t){var i=n.targetIndex,r=t.targetIndex;return i>r?1:i<r?-1:0}),u},moveHorizontalTableAllChildElement:function(n,t,i,r){for(var n,y,h,f,g,a,o,it,u=ecount.grid.constValue,rt=u.sectionType.thead,ut=u.sectionType.tbody,ft=u.sectionType.tfoot,v=[rt,ut],s=0,et=v.length;s<et;s++)for(n=v[s],y=this.mixinOption.dataRow.getAll(n),h=y.length-1;h>-1;h--){var b=y[h],p=b[u.keyColumnPropertyName],ot=b[u.rowVariableNames.rowType],k=ot==u.rowType.separate?ft:v[s],d=this.mixinOption.dataColumn.getAll(k||n,u.returnType.multi);for(f=0,g=d.length;f<g;f++){var nt=this.mixinOption.viewRow.getRowElement(n,p,f),c=[],w=null,tt=t==u.crossDirection.left?r.left:r.right+1,l=ecount.gridV2.handler.dragTableMulti.getClosestColumn.call(this,k,t,{top:i.top,left:i.left,bottom:i.bottom,right:i.right},{top:f,left:tt,bottom:f,right:tt}),e;for(l&&(e=this.mixinOption.viewCell.getCellElement(n,l.id,p),w=e.cell),a=i.left;a<=i.right;a++)l=d[f][a],e=this.mixinOption.viewCell.getCellElement(n,l.id,p),e.map&&e.map.cellInfo&&e.map.cellInfo.adjustmentValue!=1&&c.push(e.cell);for(o=0,it=c.length;o<it;o++)w?nt.insertBefore(c[o],w):nt.appendChild(c[o])}}},moveHorizontalTableChildElement:function(n,t,i,r,u){var f=ecount.grid.constValue,rt=f.sectionType.thead,ut=f.sectionType.tbody,ft=f.sectionType.tfoot,w=this.mixinOption.dataRow.getAll(n),it=this.mixinOption.dataColumn.getAll(t||n,f.returnType.multi),h=w.length-1,b=-1,y,k,c,e,d,v,s,tt;for(this.mixinOption.optCommon.columnType==f.columnType.multi&&(y=this.mixinOption.dataRow.getSectionRowIndex(n,t),h=y.endRowIndex,b=y.startRowIndex-1);h>b;h--)for(k=w[h],c=k[f.keyColumnPropertyName],e=r.bottom,d=r.top;e>=d;e--){var g=this.mixinOption.viewRow.getRowElement(n,c,e),l=[],p=null,nt=i==f.crossDirection.left?u.left:u.right+1,a=ecount.gridV2.handler.dragTableMulti.getClosestColumn.call(this,t,i,{top:r.top,left:r.left,bottom:r.bottom,right:r.right},{top:e,left:nt,bottom:e,right:nt}),o;for(a&&(o=this.mixinOption.viewCell.getCellElement(n,a.id,c),p=o.cell),v=r.left;v<=r.right;v++)a=it[e][v],o=this.mixinOption.viewCell.getCellElement(n,a.id,c),o.map&&o.map.cellInfo&&o.map.cellInfo.adjustmentValue!=1&&l.push(o.cell);for(s=0,tt=l.length;s<tt;s++)p?g.insertBefore(l[s],p):g.appendChild(l[s])}},moveVerticalTableChildElement:function(n,t,i,r,u){var o=ecount.grid.constValue,nt=o.sectionType.thead,d=o.sectionType.tbody,g=o.sectionType.tfoot,h=[],v,k=[],f=_.extend({},r),c=_.extend({},u),l,w,b,y,s,e,p,a;if(this.mixinOption.optCommon.columnType==o.columnType.multi&&t==g&&(l=this.mixinOption.dataColumn.getAll(d,o.returnType.multi),f.top+=l.length,f.bottom+=l.length,c.top+=l.length,c.bottom+=l.length),w=this.mixinOption.viewRow.getSectionElement(n),b=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n),i==o.crossDirection.up)for(y=b[f.top][f.left].rowId,s=this.mixinOption.viewRow.getRowElementAll(n,null,!0),c.top==0&&(k=ecount.gridV2.handler.dragTableMulti.getCellSystemColumn.call(this,n,t,y)),v=s[c.top],e=f.bottom,p=f.top;e>=p;e--)h.push(s[e]);else if(i==o.crossDirection.down)for(y=b[f.top][f.left].rowId,s=this.mixinOption.viewRow.getRowElementAll(n,null,!0),f.top==0&&(k=ecount.gridV2.handler.dragTableMulti.getCellSystemColumn.call(this,n,t,y)),v=s[c.bottom+1],e=f.bottom,p=f.top;e>=p;e--)h.push(s[e]);for(a=h.length-1;a>-1;a--)v?w.insertBefore(h[a],v):w.appendChild(h[a])},moveHorizontalAllData:function(n,t,i,r,u,f){for(var o,y,h,b,e=ecount.grid.constValue,k=e.sectionType.thead,d=e.sectionType.tbody,g=e.sectionType.tfoot,v=[k,d],a=0,nt=v.length;a<nt;a++){n=v[a];var c=this.mixinOption.dataRow.getAll(n),ut={top:u.top,bottom:u.bottom,left:u.left,right:u.right},ft={top:f.top,bottom:f.bottom,left:f.left,right:f.right};for(o=0,y=c.length;o<y;o++){var p=[],l=[],tt=c[o],it=tt[e.rowVariableNames.rowType],s=it==e.rowType.separate?g:n,w=0,rt=this.mixinOption.dataColumn.getAll(s,e.returnType.multi);for(l.push({moveType:t,moveDirection:i,moveMethod:r,fromSectionType:n,fromColumnSectionType:s,fromRowId:c[o][e.keyColumnPropertyName],fromRowIndex:o,fromBoundary:u,toSectionType:n,toColumnSectionType:s,toRowId:c[o][e.keyColumnPropertyName],toRowIndex:o,toBoundary:f}),this.mixinOption.dataRow.moveViewDataRenderingTableMap(i,l),this.mixinOption.dataRow.moveColumn(i,l),h=0,b=rt.length;h<b;h++)p.push({moveType:t,moveDirection:i,moveMethod:r,fromSectionType:n,fromColumnSectionType:s,fromRowIndex:h+w,fromBoundary:u,toSectionType:n,toColumnSectionType:s,toRowIndex:h+w,toBoundary:f});this.mixinOption.dataColumn.move(i,p);this.mixinOption.dataRow.moveViewDataTrMap(i,l)}}},moveData:function(n,t,i,r,u,f,e,o,s,h,c){var g,tt,p,w,a,d;c=_.isBoolean(c)?c:!0;var l=ecount.grid.constValue,it=l.sectionType.thead,rt=l.sectionType.tbody,nt=l.sectionType.tfoot;var y=[],v=[],b=this.mixinOption.dataRow.getAll(n),ut=this.mixinOption.dataColumn.getAll(t||n,l.returnType.multi),k=this.setting.getFormIsAutoMergeSpecialrow(),a=0,d=b.length;for(this.mixinOption.optCommon.columnType==l.columnType.multi&&(g=this.mixinOption.dataRow.getSectionRowIndex(n,t),a=g.startRowIndex,d=g.endRowCount),tt=0;a<d;a++)r=="vertical"?(p={top:f.top,bottom:f.bottom,left:f.left,right:f.right},w={top:e.top,bottom:e.bottom,left:e.left,right:e.right}):r=="horizontal"&&(p={top:o.top,bottom:o.bottom,left:o.left,right:o.right},w={top:o.top,bottom:o.bottom,left:e.left,right:e.right}),y.push({moveType:r,moveMethod:s,moveDirection:u,fromSectionType:n,fromColumnSectionType:t,fromRowType:i,fromRowId:b[a][l.keyColumnPropertyName],fromRowIndex:a,fromBoundary:p,toSectionType:n,toColumnSectionType:t,toRowType:i,toRowId:b[a][l.keyColumnPropertyName],toRowIndex:a,toBoundary:w}),v.push({moveType:r,moveMethod:s,moveDirection:u,fromSectionType:n,fromColumnSectionType:t,fromRowType:i,fromRowId:b[a][l.keyColumnPropertyName],fromRowIndex:a,fromBoundary:f,toSectionType:n,toColumnSectionType:t,toRowType:i,toRowId:b[a][l.keyColumnPropertyName],toRowIndex:a,toBoundary:e});for(this.mixinOption.optForm.version==l.formVersion.fourth?this.mixinOption.optCommon.columnType==l.columnType.single&&k?this.mixinOption.dataRow.moveColumn(u,v):(this.mixinOption.dataRow.moveViewDataRenderingTableMap(u,y),this.mixinOption.dataRow.moveColumn(u,v)):this.mixinOption.optForm.version==l.formVersion.third&&(n==nt&&this.mixinOption.optCommon.columnType==l.columnType.single&&k?this.mixinOption.dataRow.moveColumn(u,v):(this.mixinOption.dataRow.moveViewDataRenderingTableMap(u,y),this.mixinOption.dataRow.moveColumn(u,v))),y=[],a=o.top,d=o.bottom+1;a<d;a++)r=="vertical"?(p={top:f.top,bottom:f.bottom,left:f.left,right:f.right},w={top:e.top,bottom:e.bottom,left:e.left,right:e.right}):r=="horizontal"&&(p={top:o.top,bottom:o.bottom,left:o.left,right:o.right},w={top:o.top,bottom:o.bottom,left:e.left,right:e.right}),y.push({moveType:r,moveMethod:s,moveDirection:u,fromSectionType:n,fromColumnSectionType:t,fromRowType:i,fromRowIndex:a,fromBoundary:p,toSectionType:n,toColumnSectionType:t,toRowType:i,toRowIndex:a,toBoundary:w,isCancelLeftFixed:h});this.mixinOption.dataColumn.move(u,y);[l.crossDirection.left,l.crossDirection.right].contains(u)&&this.mixinOption.optCommon.columnType==l.columnType.multi&&c&&this.mixinOption.dataColumn.syncWidthByBoundary(t||n,o);this.mixinOption.optForm.version==l.formVersion.fourth?this.mixinOption.optCommon.columnType==l.columnType.single&&k||this.mixinOption.dataRow.moveViewDataTrMap(u,v):this.mixinOption.optForm.version==l.formVersion.third&&(n==nt&&this.mixinOption.optCommon.columnType==l.columnType.single&&k||this.mixinOption.dataRow.moveViewDataTrMap(u,v))},getHorizontalSelectedBoundary:function(n,t){for(var u,s,r,c,i=ecount.grid.constValue,w=i.sectionType.thead,b=i.sectionType.tbody,l=i.sectionType.tfoot,h=this.mixinOption.dataRow.getAll(n),f,e=0,a=h.length;e<a;e++){var v=h[e],y=v[i.rowVariableNames.rowType],p=y==i.rowType.separate?l:n,o=this.mixinOption.dataColumn.getAll(p,i.returnType.multi);for(u=0,s=o.length;u<s;u++){for(r=0,c=o[u].length;r<c;r++)if(o[u][r].id==t){f={top:0,bottom:s-1,left:r,right:r};break}if(f)break}}return f},getVerticalSelectedBoundary:function(n){for(var t,s,r,h,i=ecount.grid.constValue,p=i.sectionType.thead,w=i.sectionType.tbody,c=i.sectionType.tfoot,o=this.mixinOption.dataRow.getAll(n),u,f=0,l=o.length;f<l;f++){var a=o[f],v=a[i.rowVariableNames.rowType],y=v==i.rowType.separate?c:n,e=this.mixinOption.dataColumn.getAll(y,i.returnType.multi);for(t=0,s=e.length;t<s;t++){for(r=0,h=e[t].length;r<h;r++)if(e[t][r].id==columnId){u={top:t,bottom:t,left:r,right:r};break}if(u)break}}return u},dragStartPrepare:function(n,t){var i=ecount.grid.constValue,b=i.sectionType.thead,nt=i.sectionType.tbody,k=i.sectionType.tfoot,f={result:!0,mouseIconElement:null,startBoundary:{},layoutSize:{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0}},a,v,y=this.mixinOption.viewSelector&&this.mixinOption.viewSelector.getSelectionType(),e,u,s,r,o,p,h,d,l,g,c,w;if((i.checkBoxPropertyNameRex.test(n.gridStartColumnID)||i.rowMoveablePropertyNameRex.test(n.gridStartColumnID)||i.rowNumberingPropertyNameRex.test(n.gridStartColumnID))&&(f.result=!1),this.mixinOption.optForm.version==i.formVersion.third&&this.mixinOption.optCommon.columnType==i.columnType.single&&n.gridStartSectionType!=i.sectionType.thead&&(f.result=!1),f.result){if(e=this.mixinOption.optLayout.container.getBoundingClientRect(),f.layoutSize={x:e.x,y:e.y,top:e.top,left:e.left,width:e.width,height:e.height,right:e.right,bottom:e.bottom},u=n.gridStartSectionType,s=n.gridStartDataKey,y==i.selectionType.allHorizontal)u=b,r=this.core.view.selector.getBoundary().clone(),o=this.mixinOption.dataColumn.getAll(u,i.returnType.multi),p=this.mixinOption.dataRow.getAll(u),s=p[0][i.keyColumnPropertyName];else if(o=this.mixinOption.dataColumn.getAll(u,i.returnType.multi),p=this.mixinOption.dataRow.getAll(u),!r){if(this.mixinOption.optForm.version==i.formVersion.second)for(h=0,d=o.length;h<d;h++){for(l=0,g=o[h].length;l<g;l++)if(o[h][l].id==n.gridStartColumnID){r={top:h,bottom:h,left:l,right:l};break}if(r)break}if(this.mixinOption.optForm.version==i.formVersion.third){if(r=this.core.view.selector.getBoundary().clone(),this.mixinOption.optCommon.columnType==i.columnType.multi){if(c=this.mixinOption.view.getSectionTypeByElement(t.target),c.sectionType==null&&c.detailSectionType==null)return f;f.gridColumnSectionType=n.gridColumnSectionType=c.columnSectionType?c.columnSectionType:n.gridSectionType;n.gridDetailSectionType=c.detailSectionType?c.detailSectionType:n.gridDetailSectionType}this.mixinOption.optCommon.columnType==i.columnType.multi&&n.gridColumnSectionType==k&&(o=this.mixinOption.dataColumn.getAll(n.gridColumnSectionType,i.returnType.multi),w=this.mixinOption.dataColumn.getAll(u,i.returnType.multi),r.top-=w.length,r.bottom-=w.length)}}this.mixinOption.optForm.version==i.formVersion.second?a=ecount.gridV2.handler.dragTableMulti.copyTableV2.call(this,u,n.gridStartColumnID,s,n.gridMoveType,r):this.mixinOption.optForm.version==i.formVersion.third&&(this.mixinOption.optCommon.columnType==i.columnType.single?v=[u]:this.mixinOption.optCommon.columnType==i.columnType.multi&&(v=y==i.selectionType.allHorizontal?[b,nt,k]:[u]),this.mixinOption.optCommon.columnType==i.columnType.single?a=ecount.gridV2.handler.dragTableMulti.copyTableV3.call(this,u,n.gridColumnSectionType,n.gridDetailSectionType,n.gridStartColumnID,s,n.gridMoveType,r,{sectionTypes:v}):this.mixinOption.optCommon.columnType==i.columnType.multi&&(a=y==i.selectionType.allHorizontal?ecount.gridV2.handler.dragTableMulti.copyTableV3Multi.call(this,u,n.gridMoveType,r):ecount.gridV2.handler.dragTableMulti.copyTableV3.call(this,u,n.gridColumnSectionType,n.gridDetailSectionType,n.gridStartColumnID,s,n.gridMoveType,r,{sectionTypes:v})));f.startBoundary=r;f.mouseIconElement=a;this.mixinOption.optCommon.columnType==i.columnType.single?f.startElementPosition=this.mixinOption.viewCell.getSizeByContainer(u,o[r.top][r.left].id,s):this.mixinOption.optCommon.columnType==i.columnType.multi&&(f.startElementPosition=y==i.selectionType.allHorizontal?this.mixinOption.viewCell.getSizeByContainer(u,o[0][r.left].id,s):this.mixinOption.viewCell.getSizeByContainer(u,o[r.top][r.left].id,s));this.mixinOption.viewOverlay&&this.mixinOption.viewOverlay.unbindConatinerEventMousemove()}return f},dragStartFinish:function(){},dragMovePossible:function(n){function c(n,i,u){return i.startRow>-1&&i.endRow>-1&&n.startRow>-1&&n.endRow>-1?u.top==n.startRow&&u.bottom==n.endRow&&t-r!=u.right-u.left+1?{isPossibleHorizontal:!0}:u.top==i.startRow&&u.bottom==i.endRow&&t-r!=u.right-u.left+1?{isPossibleHorizontal:!0}:{isPossibleHorizontal:!1}:{isPossibleHorizontal:o.length==u.bottom-u.top+1&&t-r!=u.right-u.left+1}}function l(n,i,u){return i.startRow>-1&&i.endRow>-1&&n.startRow>-1&&n.endRow>-1?u.top==n.startRow&&u.bottom==n.endRow&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_DIFFERENT_ROWTYPE"}:u.top==i.startRow&&u.bottom==i.endRow&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_DIFFERENT_ROWTYPE"}:n.startRow<=u.top&&n.endRow>=u.bottom&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}:i.startRow<=u.top&&i.endRow>=u.bottom&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}:{isPossibleVertical:!1,verticalMethod:"NONE"}:{isPossibleVertical:o.length!=u.bottom-u.top+1&&t-r==u.right-u.left+1,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}}var u=ecount.grid.constValue,a=u.sectionType.thead,s=u.sectionType.tbody,h=u.sectionType.tfoot,i={isPossibleVertical:!1,isPossibleHorizontal:!1},e;this.mixinOption.optCommon.columnType==u.columnType.multi&&n.gridColumnSectionType==h&&(e=this.mixinOption.dataColumn.getAll(s,u.returnType.multi),n.gridBoundary.top-=e.length,n.gridBoundary.bottom-=e.length);var o=this.mixinOption.dataColumn.getAll(n.gridColumnSectionType||n.gridSectionType,u.returnType.multi),t=o[0].length,v=t-1,r=this.core.data.column.getSystemColumnCount(n.gridSectionType),f;return f=c(this.mixinOption.dataColumn.__datas[n.gridColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridColumnSectionType+"slip"],n.gridBoundary),i.isPossibleHorizontal=f.isPossibleHorizontal,f=l(this.mixinOption.dataColumn.__datas[n.gridColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridColumnSectionType+"slip"],n.gridBoundary),i.isPossibleVertical=f.isPossibleVertical,i.verticalMethod=f.verticalMethod,i.isPossibleVertical&&i.isPossibleHorizontal&&(i.isPossibleVertical=i.isPossibleHorizontal=!1),i},dragMovePrepare:function(n,t){var r=ecount.grid.constValue,yt=ecount.gridV2.modules.util,it=r.sectionType.thead,ht=r.sectionType.tbody,st=r.sectionType.tfoot,f={result:!0,scrollPosition:{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0},shadowIconElement:null},rt,h,w=this.mixinOption.viewSelector&&this.mixinOption.viewSelector.getSelectionType(),u=n.gridMoveSectionType,y=n.gridColumnSectionType||n.gridMoveSectionType,e=n.gridMoveDataKey,i,o,ct=this.core.data.column.getSystemColumnCount(u),s,ut,ft,d,g,p,a,lt,et,at,c,ot,k,vt,b,l,nt,tt,v;if(this.mixinOption.optForm.version==r.formVersion.third&&(this.mixinOption.optCommon.columnType==r.columnType.single?h=[u]:this.mixinOption.optCommon.columnType==r.columnType.multi&&(h=w==r.selectionType.allHorizontal?[it,ht]:[u])),(r.checkBoxPropertyNameRex.test(n.gridMoveColumnID)||r.rowMoveablePropertyNameRex.test(n.gridMoveColumnID)||r.rowNumberingPropertyNameRex.test(n.gridMoveColumnID))&&(f.result=!1),w==r.selectionType.allHorizontal)u=it,y=it;else if(this.mixinOption.optForm.version==r.formVersion.third)if(this.mixinOption.optCommon.columnType==r.columnType.single)u!=r.sectionType.thead&&(f.result=!1);else if(this.mixinOption.optCommon.columnType==r.columnType.multi){if(p=this.mixinOption.view.getSectionTypeByElement(yt.closest(t.target,/T[DH]/)),p.sectionType==null&&p.detailSectionType==null)return f;f.gridColumnSectionType=n.gridColumnSectionType=y=p.columnSectionType?p.columnSectionType:n.sectionType;n.gridDetailSectionType=p.detailSectionType?p.detailSectionType:n.gridDetailSectionType;(n.gridStartColumnSectionType||n.gridStartSectionType)!=y&&(f.result=!1)}if(f.result){if(w==r.selectionType.allHorizontal){for(s=this.mixinOption.dataColumn.getAll(y,r.returnType.multi),ut=s[0].length,ft=ut-1,d=this.mixinOption.dataRow.getAll(u),e=d[0][r.keyColumnPropertyName],columnIndex=this.mixinOption.dataColumn.getIndexById(n.gridMoveColumnSectionType,r.returnColumnIndexType.multi,n.gridMoveColumnID),i={top:-1,bottom:-1,left:0,right:0},a=0,lt=h.length;a<lt;){for(et=!1,d=this.mixinOption.dataRow.getAll(h[a]),b=this.mixinOption.dataColumn.getAll(h[a],r.returnType.multi),this.core.dragBoundary.mergeBoundary(ecount.gridV2.handler.dragTableMulti.getHorizontalSelectedBoundary.call(this,h[a],b[0][columnIndex].id)),i=this.core.dragBoundary.clone(),i.top=0,i.bottom=b.length-1,at=this.mixinOption.dataRow.getAll(h[a]),c=0,ot=d.length;c<ot;c++){var pt=at[c],wt=pt[r.rowVariableNames.rowType],bt=wt==r.rowType.separate?st:h[a];if(et=this.core.dragBoundary.mergeBoundary(this.mixinOption.dataRow.extendBoundary(h[a],bt,i,Object.clone(i))),i=this.core.dragBoundary.clone(),et)break}et?a=0:a+=1}o={top:i.top,left:i.left,bottom:i.bottom,right:i.right};this.core.dragBoundary.reset()}else{if(s=this.mixinOption.dataColumn.getAll(y,r.returnType.multi),ut=s[0].length,ft=ut-1,d=this.mixinOption.dataRow.getAll(u),!i)for(c=0,ot=s.length;c<ot;c++){for(k=0,vt=s[c].length;k<vt;k++)if(s[c][k].id==n.gridMoveColumnID){g=this.mixinOption.dataColumn.getGroupRowIndexInfo(n.gridStartSectionType,n.gridColumnSectionType||n.gridStartSectionType,n.gridDetailSectionType);i=n.gridMoveType==r.drag.directionMovement.vertical?n.gridMoveMethod=="MOVE_TO_DIFFERENT_ROWTYPE"?{top:g.startRowIndex,bottom:g.endRowIndex,left:ct,right:ft}:this.mixinOption.optForm.version==r.formVersion.fourth?{top:c,bottom:c,left:n.gridStartBoundary.left,right:n.gridStartBoundary.right}:{top:c,bottom:c,left:ct,right:ft}:{top:g.startRowIndex,bottom:g.endRowIndex,left:k,right:k};break}if(i)break}if(this.mixinOption.optCommon.columnType==r.columnType.multi&&n.gridColumnSectionType==st?(b=this.mixinOption.dataColumn.getAll(n.gridColumnSectionType,r.returnType.multi),o={top:i.top+b.length,left:i.left,bottom:i.bottom+b.length-1,right:i.right},i=this.mixinOption.dataRow.extendBoundary(n.gridStartSectionType,n.gridColumnSectionType,o,Object.clone(i))):i=this.mixinOption.dataRow.extendBoundary(n.gridStartSectionType,n.gridColumnSectionType,i,Object.clone(i)),o={top:i.top,left:i.left,bottom:i.bottom,right:i.right},this.mixinOption.optForm.version==r.formVersion.third){l=this.core.view.selector.getBoundary().clone();switch(n.gridMoveType){case r.drag.directionMovement.horizontal:l.left<=i.left&&i.right<=l.right&&(o=l,n.gridMoveDirection="none");break;case r.drag.directionMovement.vertical:l.top<=i.top&&i.bottom<=l.bottom&&l.left<=i.left&&i.right<=l.right?(o=l,n.gridMoveDirection="none"):(i.left=l.left,i.right=l.right)}}}this.mixinOption.optForm.version==r.formVersion.second?rt=ecount.gridV2.handler.dragTableMulti.copyTableV2.call(this,u,n.gridMoveColumnID,e,n.gridMoveType,o):this.mixinOption.optForm.version==r.formVersion.third&&(this.mixinOption.optCommon.columnType==r.columnType.single?h=[u]:this.mixinOption.optCommon.columnType==r.columnType.multi&&(h=w==r.selectionType.allHorizontal?[it,ht,st]:[u]),this.mixinOption.optCommon.columnType==r.columnType.single?rt=ecount.gridV2.handler.dragTableMulti.copyTableV3.call(this,u,n.gridColumnSectionType,n.gridDetailSectionType,n.gridMoveColumnID,e,n.gridMoveType,o,{sectionTypes:h}):this.mixinOption.optCommon.columnType==r.columnType.multi&&(rt=w==r.selectionType.allHorizontal?ecount.gridV2.handler.dragTableMulti.copyTableV3Multi.call(this,u,n.gridMoveType,o):ecount.gridV2.handler.dragTableMulti.copyTableV3.call(this,u,n.gridColumnSectionType,n.gridDetailSectionType,n.gridMoveColumnID,e,n.gridMoveType,o,{sectionTypes:h})));f.boundary=i;f.shadowIconElement=rt;this.mixinOption.optCommon.columnType==r.columnType.single?f.startElementPosition=this.mixinOption.viewCell.getSizeByContainer(u,s[i.top][i.left].id,e):this.mixinOption.optCommon.columnType==r.columnType.multi&&(f.startElementPosition=w==r.selectionType.allHorizontal?this.mixinOption.viewCell.getSizeByContainer(u,s[0][i.left].id,e):o.left<=i.left&&i.right<=o.right?this.mixinOption.viewCell.getSizeByContainer(u,s[i.top][o.left].id,e):this.mixinOption.viewCell.getSizeByContainer(u,s[i.top][i.left].id,e));n.gridMoveDirection==r.crossDirection.left?(nt=this.mixinOption.dataColumn.getPrevColumnId(y,n.gridMoveColumnID,e),nt&&(v=this.mixinOption.viewCell.getCellElement(u,nt,e),[ecount.grid.constValue.checkBoxPropertyName,ecount.grid.constValue.rowMoveablePropertyName,ecount.grid.constValue.rowNumberingPropertyName].contains(nt)||v.map.cellInfo.adjustmentValue!=1&&(f.scrollElement=v.cell,f.scrollPosition=this.mixinOption.viewCell.getSizeByScreen(u,nt,e),f.scrollPosition.left=f.scrollPosition.x=Math.floor(f.scrollPosition.left/2)))):n.gridMoveDirection==r.crossDirection.right?(tt=this.mixinOption.dataColumn.getNextColumnId(y,n.gridMoveColumnID,e),tt&&(v=this.mixinOption.viewCell.getCellElement(u,tt,e),[ecount.grid.constValue.checkBoxPropertyName,ecount.grid.constValue.rowMoveablePropertyName,ecount.grid.constValue.rowNumberingPropertyName].contains(tt)||v.map.cellInfo.adjustmentValue!=1&&(f.scrollElement=v.cell,f.scrollPosition=this.mixinOption.viewCell.getSizeByScreen(u,tt,e),f.scrollPosition.left=f.scrollPosition.x=Math.floor(f.scrollPosition.left/2)))):n.gridMoveDirection==r.crossDirection.none?(v=o.left<=i.left&&i.right<=o.right?this.mixinOption.viewCell.getCellElement(u,s[0][o.left].id,e):this.mixinOption.viewCell.getCellElement(u,s[0][i.left].id,e),f.cellElement=v.cell):[r.crossDirection.up,r.crossDirection.down].contains(n.gridMoveDirection)&&(v=this.mixinOption.viewCell.getCellElement(u,s[i.top][i.left].id,e),f.cellElement=v.cell)}return f},dragMoveFinish:function(){},dragEndPrepare:function(n){var i={result:!1,sectionType:n.gridStartSectionType,boundary:{top:-1,left:-1,bottom:-1,right:-1},cells:[]},o,f;if(!n.gridStartBoundary||!n.gridMoveBoundary)return i;var r=ecount.grid.constValue,s=r.sectionType.thead,h=r.sectionType.tbody,a=r.sectionType.tfoot,c=this.setting.eventsGet(),t=!1,u=this.mixinOption.dataColumn.getAll(s,r.returnType.multi),l=u[0].length,v=l-1,e=-1;return n.gridStartSectionType==s&&(e=ecount.gridV2.handler.dragTableMulti.getLeftFixedIndex.call(this,u,{top:0,left:0,bottom:u.length-1,right:u[0].length-1})),e>-1&&(t=ecount.gridV2.handler.dragTableMulti.isCollideLeftFixed.call(this,{right:n.gridMoveBoundary.right+e}),t||(o=[],this.mixinOption.dataRow.addTotalMergeSet(h,h,null,o),t=ecount.gridV2.util.isCollideLeftFixed(o,n.gridStartBoundary,n.gridMoveBoundary,u,l))),f=c&&c._triggerEvent(ecount.grid.event.list.formSetDragPrepareComplete,null,{isCollideLeftFixed:t,callback:n.fn})||{result:!0,isCancelLeftFixed:t},n.gridMoveType==r.selectionType.allHorizontal||(i.cells=ecount.gridV2.handler.dragTableMulti.getCellByBoundary.call(this,n.gridStartSectionType,n.gridStartColumnSectionType,n.gridMoveSectionType,n.gridStartDataKey,n.gridMoveDataKey,n.gridStartBoundary)),i.isCancelLeftFixed=typeof f.isCancelLeftFixed=="boolean"?f.isCancelLeftFixed:t,i.result=f.result,i},getLeftFixedCount:function(n,t){for(var r,e,f=0,i=!1,u=t.left,o=t.right;u<=o;u++){for(r=t.top,e=t.bottom;r<=e;r++)if(i===!1&&ecount.common.isTrue(n[r][u].LEFT_FIXD_STND_TF)){i=!0;break}if(f+=1,i)break}return i?f:0},getLeftFixedIndex:function(n,t){for(var r,e,f=0,i=!1,u=t.left,o=t.right;u<=o;u++){for(r=t.top,e=t.bottom;r<=e;r++)if(i===!1&&ecount.common.isTrue(n[r][u].LEFT_FIXD_STND_TF)){i=!0;break}if(i)break;f+=1}return i?f:-1},isCollideLeftFixed:function(n){for(var e,i,a,v,o,r,y,u=!1,t=ecount.grid.constValue,h=t.sectionType.thead,w=t.sectionType.tbody,nt=t.sectionType.tfoot,b=this.mixinOption.dataColumn.getAll(h,t.returnType.multi),c=b[0].length,tt=c-1,l=[h,w],f=0,k=l.length;f<k;f++)for(e=this.mixinOption.dataRow.getAll(l[f]),i=0,a=e.length;i<a;i++)for(v=e[i],o=v[t.rowVariableNames.mergeSet]||[],r=0,y=o.length;r<y;r++){var s=o[r],p=s[t.rowVariableNames.mergeStartIndex]%c,d=s[t.rowVariableNames.colspanCount]||1,it=s[t.rowVariableNames.rowspanCount]||1,g=d-1;p<=n.right&&p+g>n.right&&(u=!0)}return!u,u},getCellByBoundary:function(n,t,i,r,u,f){var o=[],e=ecount.grid.constValue,h=e.sectionType.thead,c=e.sectionType.tbody,l=e.sectionType.tfoot,s=this.mixinOption.dataColumn.getAll(t||n,e.returnType.multi);return o.push(this.mixinOption.viewCell.getCellOriginalElement(n,s[f.top][f.left].id,r).cell),o.push(this.mixinOption.viewCell.getCellOriginalElement(i,s[f.bottom][f.right].id,u).cell),o},dragEndFinish:function(n){function tt(){var i=t.crossDirection.none;return[t.drag.directionMovement.horizontal,t.drag.directionMovement.allHorizontal].contains(n.gridMoveType)?n.gridMoveDirection==t.crossDirection.right?i=t.crossDirection.right:n.gridMoveDirection==t.crossDirection.left&&(i=t.crossDirection.left):n.gridMoveType==t.drag.directionMovement.vertical&&(n.gridMoveDirection==t.crossDirection.up?i=t.crossDirection.up:n.gridMoveDirection==t.crossDirection.down&&(i=t.crossDirection.down)),i}var t=ecount.grid.constValue,e=t.sectionType.thead,p=t.sectionType.tbody,d=t.sectionType.tfoot,o=[e,p,d],v=this.mixinOption.view.selector&&this.mixinOption.view.selector.getStartColumnSectionType(),s=this.mixinOption.viewSelector&&this.mixinOption.viewSelector.getSelectionType()||t.selectionType.normal,u={result:!1,sectionType:n.gridStartSectionType,boundary:{top:-1,left:-1,bottom:-1,right:-1},cells:[]},w=this.mixinOption.dataColumn.getLeftFixed(e),c,f,l,y,it,a,b,k,r,h;if([t.selectionType.normal,t.selectionType.allVertical].contains(s)){if(this.mixinOption.optForm.version==t.formVersion.third&&n.gridStartSectionType!=n.gridMoveSectionType)return u;this.mixinOption.optCommon.columnType==t.columnType.multi&&(o=[n.gridStartSectionType])}else s==t.selectionType.allHorizontal&&(o=[e,p]);var g=this.mixinOption.dataRow.getViewDataTableMapAll(e),nt=Object.keys(g),i=this.mixinOption.viewTable.getColgroupElement(e,nt[0]);if([t.drag.directionMovement.horizontal,t.drag.directionMovement.allHorizontal].contains(n.gridMoveType)){if(n.gridMoveDirection==t.crossDirection.left){for(r=n.gridStartBoundary.right,h=n.gridStartBoundary.left;r>=h;r--)i.children[n.gridMoveBoundary.left]?i.insertBefore(i.children[n.gridStartBoundary.right],i.children[n.gridMoveBoundary.left]):i.appendChild(i.children[n.gridStartBoundary.right]);u.boundary={left:n.gridMoveBoundary.left,right:n.gridMoveBoundary.left+n.gridStartBoundary.right-n.gridStartBoundary.left,top:n.gridStartBoundary.top,bottom:n.gridStartBoundary.bottom}}else if(n.gridMoveDirection==t.crossDirection.right){for(r=n.gridStartBoundary.left,h=n.gridStartBoundary.right;r<=h;r++)i.children[n.gridMoveBoundary.right+1]?i.insertBefore(i.children[n.gridStartBoundary.left],i.children[n.gridMoveBoundary.right+1]):i.appendChild(i.children[n.gridStartBoundary.left]);u.boundary={left:n.gridMoveBoundary.right-(n.gridStartBoundary.right-n.gridStartBoundary.left),right:n.gridMoveBoundary.right,top:n.gridStartBoundary.top,bottom:n.gridStartBoundary.bottom}}}else n.gridMoveType==t.drag.directionMovement.vertical&&(n.gridMoveDirection==t.crossDirection.up?u.boundary={left:n.gridStartBoundary.left,right:n.gridStartBoundary.right,top:n.gridMoveBoundary.top,bottom:n.gridMoveBoundary.top+(n.gridStartBoundary.bottom-n.gridStartBoundary.top)}:n.gridMoveDirection==t.crossDirection.down&&(u.boundary={left:n.gridStartBoundary.left,right:n.gridStartBoundary.right,top:n.gridMoveBoundary.bottom+1-(n.gridStartBoundary.bottom-n.gridStartBoundary.top+1),bottom:n.gridMoveBoundary.bottom}));if(c=tt(),s==t.selectionType.allHorizontal)ecount.gridV2.handler.dragTableMulti.moveHorizontalTableAllChildElement.call(this,n.gridStartSectionType,c,n.gridStartBoundary,n.gridMoveBoundary);else if([t.selectionType.allVertical,t.selectionType.normal].contains(s))for(f=0,l=o.length;f<l;f++)n.gridMoveType==t.drag.directionMovement.horizontal?ecount.gridV2.handler.dragTableMulti.moveHorizontalTableChildElement.call(this,o[f],v,c,n.gridStartBoundary,n.gridMoveBoundary):n.gridMoveType==t.drag.directionMovement.vertical&&ecount.gridV2.handler.dragTableMulti.moveVerticalTableChildElement.call(this,o[f],v,c,n.gridStartBoundary,n.gridMoveBoundary);if(s==t.selectionType.allHorizontal)ecount.gridV2.handler.dragTableMulti.moveHorizontalAllData.call(this,n.gridStartSectionType,n.gridMoveType,c,n.gridMoveMethod,n.gridStartBoundary,n.gridMoveBoundary);else if([t.selectionType.allVertical,t.selectionType.normal].contains(s)){for(f=0,l=o.length;f<l;f++)ecount.gridV2.handler.dragTableMulti.moveData.call(this,o[f],v,this.mixinOption.viewSelector.__datas.startRowType,n.gridMoveType,c,n.gridStartBoundary,n.gridMoveBoundary,n.gridStartBoundary,null,n.isCancelLeftFixed);if(n.isCancelLeftFixed)for(y=this.mixinOption.dataRow.getAll(e),it=this.mixinOption.dataColumn.getAll(e,t.returnType.multi),a=0,b=y.length;a<b;a++)for(k=y[a],r=0,h=w.length;r<h;r++)this.core.fn.refreshCell(e,w[r].id,k[t.keyColumnPropertyName],{isRunChange:!1})}return s==t.selectionType.allHorizontal||(u.cells=ecount.gridV2.handler.dragTableMulti.getCellByBoundary.call(this,n.gridStartSectionType,n.gridStartColumnSectionType,n.gridMoveSectionType,n.gridStartDataKey,n.gridMoveDataKey,u.boundary)),u.result=!0,u},dragEndCompleted:function(){this.mixinOption.viewOverlay&&this.mixinOption.viewOverlay.bindConatinerEventMousemove();this.core.state="none"},getColumnSectionType:function(n){var t=ecount.grid.constValue,f=t.sectionType.thead,e=t.sectionType.tbody,i=t.sectionType.tfoot,r=this.mixinOption.dataRow.getById(n.gridSectionType,n.gridDataKey),u=r[t.rowVariableNames.rowType];return u==t.rowType.separate?i:n.gridSectionType},getSelectedBoundaryInfos:function(){var n={thead:[{sectionType:null,columnSectionType:null,detailSectionType:null,boundary:{top:-1,left:-1,bottom:-1,right:-1}}],tbody:[{sectionType:null,columnSectionType:null,detailSectionType:null,boundary:{top:-1,left:-1,bottom:-1,right:-1}}],tfoot:[{sectionType:null,columnSectionType:null,detailSectionType:null,boundary:{top:-1,left:-1,bottom:-1,right:-1}}]},i,t;return this.mixinOption.viewSelector&&(n=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),i=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n[0].sectionType),t=i[n[0].boundary.top][n[0].boundary.left],n[0].columnId=t.columnId,n[0].rowId=t.rowId),n}};ecount.gridV2.handler.dragSingleSectionCaret={copyTableV2:function(){return ecount.gridV2.handler.drag.copyTableV2.apply(this,arguments)},copyTableV3:function(){return ecount.gridV2.handler.drag.copyTableV3.apply(this,arguments)},copyTableV3Multi:function(){return ecount.gridV2.handler.drag.copyTableV3Multi.apply(this,arguments)},getClosestColumn:function(){return ecount.gridV2.handler.drag.getClosestColumn.apply(this,arguments)},getCellSystemColumn:function(){return ecount.gridV2.handler.drag.getCellSystemColumn.apply(this,arguments)},moveHorizontalTableAllChildElement:function(){return ecount.gridV2.handler.drag.moveHorizontalTableAllChildElement.apply(this,arguments)},moveHorizontalTableChildElement:function(){return ecount.gridV2.handler.drag.moveHorizontalTableChildElement.apply(this,arguments)},moveVerticalTableChildElement:function(n,t,i,r,u){var k=ecount.grid.constValue,d=k.sectionType.thead,g=k.sectionType.tbody,nt=k.sectionType.tfoot,h=[],a=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n),o,v,s=0,e,l,f,c;if(i==k.crossDirection.up){if(r.top>u.top){for(e=r.top,l=r.bottom;e<=l;e++,s++)for(h[s]||(h[s]=[]),f=r.left,c=r.right;f<=c;f++)o=a[e][f],v=this.mixinOption.viewRow.getRowElement(n,o.rowId),["MERGE","NORMAL"].contains(a[e][f].type)&&h[s].push(this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell);for(e=u.top,l=r.top;e<l;e++,s++)for(h[s]||(h[s]=[]),f=u.left,c=u.right;f<=c;f++)o=a[e][f],v=this.mixinOption.viewRow.getRowElement(n,o.rowId),["MERGE","NORMAL"].contains(a[e][f].type)&&h[s].push(this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell);for(var e=u.top,l=r.bottom,w=0;e<=l;e++,w++){var y=h[w],p=v[e],b=p.children[r.left];for(f=0,c=y.length;f<c;f++)b?p.insertBefore(y[f],b):p.appendChild(y[f])}}else if(r.top<u.top){for(e=r.bottom+1,l=u.bottom;e<=l;e++,s++)for(h[s]||(h[s]=[]),f=u.left,c=u.right;f<=c;f++)o=a[e][f],v=this.mixinOption.viewRow.getRowElement(n,o.rowId),["MERGE","NORMAL"].contains(a[e][f].type)&&h[s].push(this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell);for(e=r.top,l=r.bottom;e<=l;e++,s++)for(h[s]||(h[s]=[]),f=r.left,c=r.right;f<=c;f++)o=a[e][f],v=this.mixinOption.viewRow.getRowElement(n,o.rowId),["MERGE","NORMAL"].contains(a[e][f].type)&&h[s].push(this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell);for(var e=r.top,l=u.bottom,w=0;e<=l;e++,w++){var y=h[w],p=v[e],b=p.children[r.left];for(f=0,c=y.length;f<c;f++)b?p.insertBefore(y[f],b):p.appendChild(y[f])}}}else if(i==k.crossDirection.down)if(r.top>u.top){for(e=r.top,l=r.bottom;e<=l;e++,s++)for(h[s]||(h[s]=[]),f=r.left,c=r.right;f<=c;f++)o=a[e][f],v=this.mixinOption.viewRow.getRowElement(n,o.rowId),["MERGE","NORMAL"].contains(a[e][f].type)&&h[s].push(this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell);for(e=u.top,l=r.top;e<l;e++,s++)for(h[s]||(h[s]=[]),f=r.left,c=r.right;f<=c;f++)o=a[e][f],v=this.mixinOption.viewRow.getRowElement(n,o.rowId),["MERGE","NORMAL"].contains(a[e][f].type)&&h[s].push(this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell);for(var e=u.top,l=r.bottom,w=0;e<=l;e++,w++){var y=h[w],p=v[e],b=p.children[r.left];for(f=0,c=y.length;f<c;f++)b?p.insertBefore(y[f],b):p.appendChild(y[f])}}else if(r.top<u.top){for(e=r.bottom+1,l=u.bottom;e<=l;e++,s++)for(h[s]||(h[s]=[]),f=r.left,c=r.right;f<=c;f++)o=a[e][f],v=this.mixinOption.viewRow.getRowElement(n,o.rowId),["MERGE","NORMAL"].contains(a[e][f].type)&&h[s].push(this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell);for(e=r.top,l=r.bottom;e<=l;e++,s++)for(h[s]||(h[s]=[]),f=u.left,c=u.right;f<=c;f++)o=a[e][f],v=this.mixinOption.viewRow.getRowElement(n,o.rowId),["MERGE","NORMAL"].contains(a[e][f].type)&&h[s].push(this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell);for(var e=r.top,l=u.bottom,w=0;e<=l;e++,w++){var y=h[w],p=v[e],b=p.children[r.left];for(f=0,c=y.length;f<c;f++)b?p.insertBefore(y[f],b):p.appendChild(y[f])}}},moveHorizontalAllData:function(){return ecount.gridV2.handler.drag.moveHorizontalAllData.apply(this,arguments)},moveData:function(){return ecount.gridV2.handler.drag.moveData.apply(this,arguments)},getHorizontalSelectedBoundary:function(){return ecount.gridV2.handler.drag.getHorizontalSelectedBoundary.apply(this,arguments)},getVerticalSelectedBoundary:function(){return ecount.gridV2.handler.drag.getVerticalSelectedBoundary.apply(this,arguments)},dragStartPrepare:function(n){var o,f,v,h,y,c,p,l,a,t,s;this.core.state=="none"&&(this.core.state="draging");var u=ecount.grid.constValue,w=u.sectionType.thead,k=u.sectionType.tbody,d=u.sectionType.tfoot,e={result:!0,mouseIconElement:null,startBoundary:{},layoutSize:{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0}};if((u.checkBoxPropertyNameRex.test(n.gridStartColumnID)||u.rowMoveablePropertyNameRex.test(n.gridStartColumnID)||u.rowNumberingPropertyNameRex.test(n.gridStartColumnID))&&(e.result=!1),this.mixinOption.optForm.version==u.formVersion.third&&this.mixinOption.optCommon.columnType==u.columnType.single&&n.gridStartSectionType!=w&&(e.result=!1),e.result){f=this.mixinOption.optLayout.container.getBoundingClientRect();e.layoutSize={x:f.x,y:f.y,top:f.top,left:f.left,width:f.width,height:f.height,right:f.right,bottom:f.bottom};var i=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),r=i[0].columnBoundary,b=this.mixinOption.dataColumn.getAll(n.gridStartColumnSectionType||n.gridStartSectionType,u.returnType.multi),g=this.mixinOption.dataRow.getAll(n.gridStartSectionType),o=document.createElement("div");for(o.classList.add("draggable-helper"),t=0,s=i.length;t<s;t++)for(v=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(i[t].sectionType),h=i[t].rowBoundary.top,y=i[t].rowBoundary.bottom;h<=y;h++)for(c=i[t].rowBoundary.left,p=i[t].rowBoundary.right;c<=p;c++)l=v[h][c],this.mixinOption.viewCell.addClass(i[t].sectionType,l.columnId,l.rowId,["draggable-item"]);if(i.length>1){for(a=0,t=0,s=i.length;t<s;t++)a+=(i[t].columnBoundary.bottom-i[t].columnBoundary.top+1)*(i[t].columnBoundary.right-i[t].columnBoundary.left+1);o.innerText=a}else o.innerText=r.bottom-r.top>0||r.right-r.left>0?(r.bottom-r.top+1)*(r.right-r.left+1):"1";e.startBoundary=r;e.mouseIconElement=o;e.startElementPosition=this.mixinOption.viewCell.getSizeByContainer(n.gridStartSectionType,b[r.top][r.left].id,n.gridStartDataKey);this.mixinOption.viewSelector.invisibleOption()}return e},dragStartFinish:function(){return ecount.gridV2.handler.drag.dragStartFinish.apply(this,arguments)},dragMovePossible:function(n){var t=this.core.fn.getDisplaySelectorOption(n.gridStartSectionType,n.gridStartBoundary,n.gridEndSectionType,n.gridEndBoundary),i;return this.core.boundary.reset(),this.core.boundary.addBoundary(n.gridStartBoundary),this.core.boundary.addBoundary(n.gridEndBoundary),i=this.core.boundary.get(),{isPossibleHorizontal:t.isHorizontal,isPossibleVertical:t.isVertical,verticalMethod:this.core.fn.getMoveVerticalType(n.gridStartSectionType,n.gridStartColumnSectionType,this.mixinOption.dataColumn.__datas[n.gridStartColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridStartColumnSectionType+"slip"],i)}},dragMovePrepare:function(n){var t={result:!0,scrollPosition:{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0},element:null,boundary:{top:n.gridStartBoundary.top,bottom:n.gridStartBoundary.bottom,left:n.gridStartBoundary.left,right:n.gridStartBoundary.right}};return n.gridStartSectionType!=n.gridMoveSectionType?(t.result=!1,t):ecount.gridV2.handler.drag.dragMovePrepare.apply(this,arguments)},dragMoveFinish:function(){return ecount.gridV2.handler.drag.dragMoveFinish.apply(this,arguments)},dragEndPrepare:function(n){var t={result:!1,sectionType:n.gridStartSectionType,boundary:{top:-1,left:-1,bottom:-1,right:-1},cells:[]};if(!n.gridStartBoundary||!n.gridMoveBoundary)return t;var i=ecount.grid.constValue,e=i.sectionType.thead,o=i.sectionType.tbody,s=i.sectionType.tfoot,f=this.setting.eventsGet(),r=!1,u=f&&f._triggerEvent(ecount.grid.event.list.formSetDragPrepareComplete,null,{isCollideLeftFixed:r,callback:n.fn,startSectionType:n.gridStartSectionType,startBoundary:n.gridStartBoundary,endSectionType:n.gridMoveSectionType,endBoundary:n.gridMoveBoundary})||{result:!0,isCancelLeftFixed:r};return t.isCancelLeftFixed=typeof u.isCancelLeftFixed=="boolean"?u.isCancelLeftFixed:r,t.result=u.result,t},getLeftFixedCount:function(){return ecount.gridV2.handler.drag.getLeftFixedCount.apply(this,arguments)},getLeftFixedIndex:function(){return ecount.gridV2.handler.drag.getLeftFixedIndex.apply(this,arguments)},isCollideLeftFixed:function(){return ecount.gridV2.handler.drag.isCollideLeftFixed.apply(this,arguments)},getCellByBoundary:function(n,t,i,r,u,f){var s=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n),e=s[i.top][i.left],h=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(r),o=h[f.bottom][f.right],c=this.mixinOption.viewCell.getCellOriginalElement(n,e.columnId,e.rowId).cell,l=this.mixinOption.viewCell.getCellOriginalElement(r,o.columnId,o.rowId).cell;return[c,l]},dragEndFinish:function(n){function gt(){if(n.gridMoveType==t.drag.directionMovement.horizontal){if(n.gridMoveDirection==t.crossDirection.leftOfRight)return n.gridMoveBoundary.left-1==n.gridStartBoundary.right?!1:!0;if(n.gridMoveDirection==t.crossDirection.rightOfRight)return!0;if(n.gridMoveDirection==t.crossDirection.rightOfLeft)return n.gridMoveBoundary.right+1==n.gridStartBoundary.left?!1:!0;if(n.gridMoveDirection==t.crossDirection.leftOfLeft)return!0}else if(n.gridMoveType==t.drag.directionMovement.vertical){if(n.gridMoveDirection==t.crossDirection.topOfTop)return!0;if(n.gridMoveDirection==t.crossDirection.bottomOfTop)return n.gridMoveBoundary.bottom+1==n.gridStartBoundary.top?!1:!0;if(n.gridMoveDirection==t.crossDirection.topOfBottom)return n.gridMoveBoundary.top-1==n.gridStartBoundary.bottom?!1:!0;if(n.gridMoveDirection==t.crossDirection.bottomOfBottom)return!0}return!1}function ni(){var i=t.crossDirection.none;return n.gridMoveType==t.drag.directionMovement.horizontal?n.gridMoveDirection==t.crossDirection.leftOfRight?(n.gridMoveBoundary.left-=1,n.gridMoveBoundary.right-=1,i=t.crossDirection.right):n.gridMoveDirection==t.crossDirection.rightOfRight?i=t.crossDirection.right:n.gridMoveDirection==t.crossDirection.rightOfLeft?(n.gridMoveBoundary.left+=1,n.gridMoveBoundary.right+=1,i=t.crossDirection.left):n.gridMoveDirection==t.crossDirection.leftOfLeft&&(i=t.crossDirection.left):n.gridMoveType==t.drag.directionMovement.vertical&&(n.gridMoveDirection==t.crossDirection.topOfTop?i=t.crossDirection.up:n.gridMoveDirection==t.crossDirection.bottomOfTop?(n.gridMoveBoundary.bottom+=1,n.gridMoveBoundary.top=n.gridMoveBoundary.bottom,i=t.crossDirection.down):n.gridMoveDirection==t.crossDirection.topOfBottom?(n.gridMoveBoundary.top-=1,n.gridMoveBoundary.bottom=n.gridMoveBoundary.top,i=t.crossDirection.up):n.gridMoveDirection==t.crossDirection.bottomOfBottom&&(i=t.crossDirection.down)),i}var t=ecount.grid.constValue,b=t.sectionType.thead,rt=t.sectionType.tbody,ut=t.sectionType.tfoot,dt=this.setting.getFormIsAutoMergeSpecialrow(),h=[b,rt,ut],u={result:!1,startSectionType:null,startColumnSectionType:null,startDetailSectionType:null,startColumnId:null,startRowId:null,startRowBoundary:null,startColumnBoundary:null,endSectionType:null,endColumnSectionType:null,endDetailSectionType:null,endColumnId:null,endRowId:null,endRowBoundary:null,endColumnBoundary:null,cells:[]},o,at=this.mixinOption.dataRow.getAll(rt),vt=this.mixinOption.dataRow.getAll(ut),y,tt,d,ot,ft,pt,wt,f,r,p,ht,lt,s,i,v,bt,a,it,kt;if(o=vt&&vt.length?this.core.fn.getSelectedBoundaryInfos(null,null,ut,null,{returnType:"array"}):at&&at.length?this.core.fn.getSelectedBoundaryInfos(null,null,rt,null,{returnType:"array"}):[],u.cells=ecount.gridV2.handler.dragMultiSectionCaret.getCellByBoundary.call(this,o[0].sectionType,o[0].columnSectionType,o[0].rowBoundary,o[0].sectionType,o[0].columnSectionType,o[0].rowBoundary),u.cells&&u.cells[0]&&(u.startSectionType=u.cells[0].getAttribute("sectiontype"),u.startDetailSectionType=u.cells[0].getAttribute("data-rowtype"),u.startColumnId=u.cells[0].getAttribute("data-columnid"),u.startRowId=u.cells[0].getAttribute("data-key")),u.cells&&u.cells[1]&&(u.endSectionType=u.cells[1].getAttribute("sectiontype"),u.endDetailSectionType=u.cells[1].getAttribute("data-rowtype"),u.endColumnId=u.cells[1].getAttribute("data-columnid"),u.endRowId=u.cells[1].getAttribute("data-key")),gt()){var dt=this.setting.getFormIsAutoMergeSpecialrow(),nt=ni(),ti=this.mixinOption.dataRow.getViewDataTableMapAll(b),ii=Object.keys(ti),l=this.mixinOption.viewTable.getColgroupElement(b,ii[0]);if(nt==t.crossDirection.left)for(y=o[0],i=y.rowBoundary.left,v=y.rowBoundary.right+1;i<v;i++)l.children[n.gridMoveBoundary.left]?l.insertBefore(l.children[y.rowBoundary.right],l.children[n.gridMoveBoundary.left]):l.appendChild(l.children[y.rowBoundary.right]);else if(nt==t.crossDirection.right)for(y=o[0],i=y.rowBoundary.left,v=y.rowBoundary.right+1;i<v;i++)l.children[n.gridMoveBoundary.right+1]?l.insertBefore(l.children[y.rowBoundary.left],l.children[n.gridMoveBoundary.right+1]):l.appendChild(l.children[y.rowBoundary.left]);for(r=0,p=o.length;r<p;r++)n.gridMoveType==t.drag.directionMovement.horizontal?ecount.gridV2.handler.dragTableMulti.moveHorizontalTableChildElement.call(this,o[r].sectionType,o[r].columnSectionType,nt,o[r].columnBoundary,n.gridMoveBoundary):n.gridMoveType==t.drag.directionMovement.vertical&&ecount.gridV2.handler.dragSingleSectionCaret.moveVerticalTableChildElement.call(this,o[r].sectionType,o[r].columnSectionType,nt,n.gridStartBoundary,n.gridMoveBoundary);if(dt){for(d=0,ot=this.mixinOption.optEditable.specialRowMerge.length;d<ot;d++)tt=this.mixinOption.optEditable.specialRowMerge[d][t.rowVariableNames.mergeSet],tt.splice(0,tt.length);for(h=[b,rt,ut],r=0,p=h.length;r<p;r++){var g=this.mixinOption.dataColumn.getDetailSections(h[r]),st=this.mixinOption.dataRow.getAll(h[r]),s=this.mixinOption.dataColumn.getAll(h[r],t.returnType.multi),ct=-1,yt=-1;for(d=0,ot=st.length;d<ot;d++){if(tt=st[d][t.rowVariableNames.mergeSet],tt)for(ft=0,pt=g.length;ft<pt;ft++)[b,rt].contains(h[r])&&g[ft]==t.sectionSeparateValue.line||this.mixinOption.dataRow.removeTotalMergeSet(h[r],h[r],[g[ft]],tt);for(i=0,v=s.length;i<v;i++)ct!=-1||s[i][n.gridStartBoundary.left].isHideRow||(ct=i),s[i][n.gridStartBoundary.right].isHideRow||(yt=i)}h[r]==b&&this.mixinOption.view.tempSelector.ecSelectStart(this.mixinOption.viewCell.getCellOriginalElement(h[r],s[ct][n.gridStartBoundary.left].id,st[0]["K-E-Y"]).cell).ecSelectEnd(this.mixinOption.viewCell.getCellOriginalElement(h[r],s[yt][n.gridStartBoundary.right].id,st[0]["K-E-Y"]).cell).ecSelectExtend()}}for(wt={"1":[t.sectionSeparateValue.line,t.sectionSeparateValue.tsubtot1,t.sectionSeparateValue.tsubtot2,t.sectionSeparateValue.tsubtot3,t.sectionSeparateValue.tsubtot4,t.sectionSeparateValue.tsubtot5,t.sectionSeparateValue.subtot1,t.sectionSeparateValue.subtot2,t.sectionSeparateValue.subtot3,t.sectionSeparateValue.subtot4,t.sectionSeparateValue.subtot5,t.sectionSeparateValue.pagetot],"2":[t.sectionSeparateValue.slip,t.sectionSeparateValue.tsubtot1slip,t.sectionSeparateValue.tsubtot2slip,t.sectionSeparateValue.tsubtot3slip,t.sectionSeparateValue.tsubtot4slip,t.sectionSeparateValue.tsubtot5slip,t.sectionSeparateValue.subtot1slip,t.sectionSeparateValue.subtot2slip,t.sectionSeparateValue.subtot3slip,t.sectionSeparateValue.subtot4slip,t.sectionSeparateValue.subtot5slip,t.sectionSeparateValue.pagetotslip]},r=0,p=o.length;r<p;r++){var c=o[r],g=this.mixinOption.dataColumn.getDetailSections(c.columnSectionType),et=this.mixinOption.dataColumn.getAll(c.columnSectionType,t.returnType.multi,!1,"system",{byDetailSection:!0}),s=et[c.detailSectionType].columnRows,e=s.length,ri=wt[c.detailSectionType];for(g=g.filter(function(n){return ri.contains(n)}),f=g.indexOf(c.detailSectionType),i=g.length-1;i>-1;i--){var w={top:c.columnBoundary.top,bottom:c.columnBoundary.bottom,left:c.columnBoundary.left,right:c.columnBoundary.right},k={top:n.gridMoveBoundary.top,bottom:n.gridMoveBoundary.bottom,left:n.gridMoveBoundary.left,right:n.gridMoveBoundary.right},ui={top:c.rowBoundary.top,bottom:c.rowBoundary.bottom,left:c.rowBoundary.left,right:c.rowBoundary.right};n.gridMoveMethod=="MOVE_TO_DIFFERENT_ROWTYPE"?(e=[t.sectionSeparateValue.line,t.sectionSeparateValue.slip].reduce(function(n,t){return n+(et[t]&&et[t].columnRows.length||0)},0),i<f?(w.top-=e*(f-i),w.bottom-=e*(f-i),k.top-=e*(f-i),k.bottom-=e*(f-i)):i>f&&(w.top+=e*(i-f),w.bottom+=e*(i-f),k.top+=e*(i-f),k.bottom+=e*(i-f))):(e=[t.sectionSeparateValue.line,t.sectionSeparateValue.slip].reduce(function(n,t){return n+(et[t]&&et[t].columnRows.length||0)},0),i<f?(w.top-=e*(f-i),w.bottom-=e*(f-i),k.top-=e*(f-i),k.bottom-=e*(f-i)):i>f&&(w.top+=e*(i-f),w.bottom+=e*(i-f),k.top+=e*(i-f),k.bottom+=e*(i-f)));ecount.gridV2.handler.dragTableSingle.moveData.call(this,c.sectionType,c.columnSectionType,g[i],n.gridMoveType,nt,w,k,w,null,n.isCancelLeftFixed)}}if(this.mixinOption.optForm.version==t.formVersion.fourth){if(nt==t.crossDirection.left){for(r=0,p=h.length;r<p;r++)if(s=this.mixinOption.dataColumn.getAll(h[r],t.returnType.multi),s.length!=0)for(a=n.gridMoveBoundary.left,it=n.gridStartBoundary.right;a<=it;a++)for(ht=parseInt(l.children[a].style.width,10),i=0,v=s.length;i<v;i++)s[i].length!=0&&(s[i][a].width=ht)}else if(nt==t.crossDirection.right)for(r=0,p=h.length;r<p;r++)if(s=this.mixinOption.dataColumn.getAll(h[r],t.returnType.multi),s.length!=0)for(a=n.gridStartBoundary.left,it=n.gridMoveBoundary.right;a<=it;a++)for(ht=parseInt(l.children[a].style.width,10),i=0,v=s.length;i<v;i++)s[i].length!=0&&(s[i][a].width=ht);this.mixinOption.optCommon.columnType==t.columnType.single}else if(n.isCancelLeftFixed)for(lt=this.mixinOption.dataRow.getAll(b),s=this.mixinOption.dataColumn.getAll(b,t.returnType.multi),i=0,v=lt.length;i<v;i++)for(bt=lt[i],a=0,it=leftFixedColumns.length;a<it;a++)this.core.fn.refreshCell(b,leftFixedColumns[a].id,bt[t.keyColumnPropertyName],{isRunChange:!1});u.result=!0}return u.result&&this.mixinOption.optForm.version==t.formVersion.fourth?this.core.fn.remakeAllRow(ut):(kt=this.mixinOption.viewSelector.getState(),this.mixinOption.viewSelector.resetData().setState(kt).ecSelectStart(u.cells[0]).ecSelectEnd(u.cells[u.cells.length-1]).ecSelectExtend().hide().visibleOption().ecDraw().show()),this.core.state=="draging"&&(this.core.state="none"),u},dragEndCompleted:function(n){var u=ecount.grid.constValue,v=u.sectionType.thead,y=u.sectionType.tbody,d=u.sectionType.tfoot,b,h,k,i,t,c,l,r,o,f,a,s;if(this.mixinOption.optForm.version==u.formVersion.fourth){if(this.mixinOption.optCommon.columnType==u.columnType.single)if(n.result){this.mixinOption.dataRow.removeAutoMergeInfo();var g=this.mixinOption.dataColumn.getAll(v),nt=this.mixinOption.dataRow.getAll(v),p=this.mixinOption.dataRow.getAll(y),e=this.mixinOption.dataRow.getAll(d),w=[];for(r=0,o=e.length;r<o;r++)b=e[r],h=b[u.rowVariableNames.mergeSet],h&&h.length&&(w[r]||(w[r]={}),w[r][u.rowVariableNames.mergeSet]=h);this.setting.setEditSpecialRowMerge(null);e&&e.length>0&&p[0][u.rowVariableNames.mergeSet]&&(e[0][u.rowVariableNames.mergeSet]=Object.clone(p[0][u.rowVariableNames.mergeSet],!0),this.setting.setRowDataSample("tfoot",e[0]));this.setting.setColumns(g).setRowData(v,nt).setRowData(y,p).setRowDataSample(y,null).setIsRefreshForm(!0).setEventAfterSelect(!0).setEventSelectInfo({startSectionType:n.startSectionType,startColumnId:n.startColumnId,startRowId:n.startRowId,endSectionType:n.endSectionType,endColumnId:n.endColumnId,endRowId:n.endRowId});$(this.mixinOption.optLayout.container.parentElement).invisibleResize();this.core.fn.render()}else{for(i=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),t=0,c=i.length;t<c;t++)for(l=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(i[t].sectionType),r=i[t].rowBoundary.top,o=i[t].rowBoundary.bottom;r<=o;r++)for(f=i[t].rowBoundary.left,a=i[t].rowBoundary.right;f<=a;f++)s=l[r][f],this.mixinOption.viewCell.removeClass(i[t].sectionType,s.columnId,s.rowId,["draggable-item"]);this.mixinOption.viewSelector.visibleOption()}}else{for(k=ecount.gridV2.handler.drag.dragEndCompleted.apply(this,arguments),i=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),t=0,c=i.length;t<c;t++)for(l=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(i[t].sectionType),r=i[t].rowBoundary.top,o=i[t].rowBoundary.bottom;r<=o;r++)for(f=i[t].rowBoundary.left,a=i[t].rowBoundary.right;f<=a;f++)s=l[r][f],this.mixinOption.viewCell.removeClass(i[t].sectionType,s.columnId,s.rowId,["draggable-item"]);this.mixinOption.viewSelector.visibleOption()}return k},getColumnSectionType:function(){return ecount.gridV2.handler.drag.getColumnSectionType.apply(this,arguments)},getSelectedBoundaryInfos:function(){var i={thead:[{sectionType:null,columnSectionType:null,detailSectionType:null,columnBoundary:{top:-1,left:-1,bottom:-1,right:-1},rowBoundary:{top:-1,left:-1,bottom:-1,right:-1}}],tbody:[{sectionType:null,columnSectionType:null,detailSectionType:null,columnBoundary:{top:-1,left:-1,bottom:-1,right:-1},rowBoundary:{top:-1,left:-1,bottom:-1,right:-1}}],tfoot:[{sectionType:null,columnSectionType:null,detailSectionType:null,columnBoundary:{top:-1,left:-1,bottom:-1,right:-1},rowBoundary:{top:-1,left:-1,bottom:-1,right:-1}}]};if(this.mixinOption.viewSelector){var n=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),r=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n[0].sectionType),t=r[n[0].rowBoundary.top][n[0].rowBoundary.left];n[0].columnId=t.columnId;n[0].rowId=t.rowId;n[0].element=this.mixinOption.viewCell.getCellElement(n[0].sectionType,t.columnId,t.rowId).cell;n[0].elementPosition=this.mixinOption.viewCell.getSizeByContainer(n[0].sectionType,t.columnId,t.rowId);i=n}return i},getDragableElement:function(){var i=null,n,r,t;return this.mixinOption.viewSelector&&(n=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),n&&n.length&&(r=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n[0].sectionType),t=r[n[0].rowBoundary.top][n[0].rowBoundary.left],n=this.mixinOption.viewCell.getCellElement(n[0].sectionType,t.columnId,t.rowId).cell),i=n),i},isPossibleMoveable:function(){},isMoveHorizontalDirection:function(n){var r=ecount.grid.constValue,s=this.mixinOption.dataRow.getViewDataTrMap(n.gridStartSectionType,n.gridStartDataKey),t=s.rowInfo[n.gridStartColumnID],h=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridStartSectionType),e=h[t.columnRowIdx][t.columnIdx],u={top:t.columnRowIdx,left:t.columnIdx,bottom:t.columnRowIdx+(n.gridStartBoundary.bottom-n.gridStartBoundary.top),right:t.columnIdx+(n.gridStartBoundary.right-n.gridStartBoundary.left)};["MERGE"].contains(e.type)&&(u.bottom+=(e[r.rowVariableNames.rowspanCount]||1)-1,u.right+=(e[r.rowVariableNames.colspanCount]||1)-1);var c=this.mixinOption.dataRow.getViewDataTrMap(n.gridMoveSectionType,n.gridMoveDataKey),i=c.rowInfo[n.gridMoveColumnID],l=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridMoveSectionType),o=l[i.columnRowIdx][i.columnIdx],f={top:i.columnRowIdx,left:i.columnIdx,bottom:i.columnRowIdx,right:i.columnIdx};return["MERGE"].contains(o.type)&&(f.bottom+=(o[r.rowVariableNames.rowspanCount]||1)-1,f.right+=(o[r.rowVariableNames.colspanCount]||1)-1),u.left<=f.left&&u.right>=f.right?!1:!0},isMoveVerticalDirection:function(n){var r=this.mixinOption.dataRow.getViewDataTrMap(n.gridStartSectionType,n.gridStartDataKey),t=r.rowInfo[n.gridStartColumnID],u=this.mixinOption.dataRow.getViewDataTrMap(n.gridMoveSectionType,n.gridMoveDataKey),i=u.rowInfo[n.gridMoveColumnID];return t.columnRowIdx<=i.columnRowIdx&&t.columnRowIdx+(n.gridStartBoundary.bottom-n.gridStartBoundary.top)>=i.columnRowIdx?!1:!0},getMoveDirection:function(n){var t=ecount.grid.constValue,e=t.crossDirection.none,i,r,v,c,o,l,a,u;if(this.mixinOption.viewTempSelector.resetData().selectStartByElement(n.mousemoveElement).selectExtend(),i=this.mixinOption.viewTempSelector.getStartSectionType(),r=this.mixinOption.viewTempSelector.getStartBoundary(),n.dragBehavior==t.drag.directionMovement.horizontal){if(v=this.core.fn.getRangeInformationsByRange(this.mixinOption.viewSelector.getStartSectionType(),this.mixinOption.viewSelector.getStartBoundary(),this.mixinOption.viewSelector.getEndSectionType(),this.mixinOption.viewSelector.getEndBoundary(),{returnType:"array"}),c=v[0],c.columnBoundary.right<r.left){var s=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(i),f=s[r.top][r.left],h=this.mixinOption.viewCell.getCellElement(i,f.columnId,f.rowId).cell,u=h.getBoundingClientRect();e=u.left+u.width/2<=n.mousemovePosition.x?t.crossDirection.rightOfRight:t.crossDirection.leftOfRight}else if(c.columnBoundary.left>r.right){var s=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(i),f=s[r.top][r.right],h=this.mixinOption.viewCell.getCellOriginalElement(i,f.columnId,f.rowId).cell,u=h.getBoundingClientRect();e=u.left+u.width/2<=n.mousemovePosition.x?t.crossDirection.rightOfLeft:t.crossDirection.leftOfLeft}}else if(n.dragBehavior==t.drag.directionMovement.vertical&&(o=this.core.fn.getRangeInformationsByRange(this.mixinOption.viewSelector.getStartSectionType(),this.mixinOption.viewSelector.getStartBoundary(),this.mixinOption.viewSelector.getEndSectionType(),this.mixinOption.viewSelector.getEndBoundary(),{returnType:"object"}),o[i]&&(l=o[i][0],a=o[i][o[i].length-1]),l&&a))if(a.rowBoundary.bottom<r.top){var s=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(i),f=s[r.top][r.right],h=this.mixinOption.viewCell.getCellOriginalElement(i,f.columnId,f.rowId).cell;n.gridMoveMethod=="MOVE_TO_DIFFERENT_ROWTYPE"?e=t.crossDirection.bottomOfBottom:(u=h.getBoundingClientRect(),e=u.top+u.height/2<=n.mousemovePosition.y?t.crossDirection.bottomOfBottom:t.crossDirection.topOfBottom)}else if(l.rowBoundary.top>r.bottom){var s=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(i),f=s[r.bottom][r.right],h=this.mixinOption.viewCell.getCellOriginalElement(i,f.columnId,f.rowId).cell;n.gridMoveMethod=="MOVE_TO_DIFFERENT_ROWTYPE"?e=t.crossDirection.topOfTop:(u=h.getBoundingClientRect(),e=u.top+u.height/2<=n.mousemovePosition.y?t.crossDirection.bottomOfTop:t.crossDirection.topOfTop)}return e},getMoveBoundingClientRect:function(n){var r=ecount.grid.constValue,i,t;return(this.mixinOption.viewTempSelector.resetData().selectStartByElement(n.mousemoveElement).selectExtend(),i=ecount.gridV2.handler.selectorAllSection.draw.call(this,{gridStartSectionType:this.mixinOption.viewSelector.getStartSectionType(),gridEndSectionType:this.mixinOption.viewSelector.getEndSectionType(),gridStartBoundary:this.mixinOption.viewSelector.getStartBoundary(),gridEndBoundary:this.mixinOption.viewSelector.getEndBoundary()}),t=ecount.gridV2.handler.selectorAllSection.draw.call(this,{gridStartSectionType:this.mixinOption.viewTempSelector.getStartSectionType(),gridEndSectionType:this.mixinOption.viewTempSelector.getEndSectionType(),gridStartBoundary:this.mixinOption.viewTempSelector.getStartBoundary(),gridEndBoundary:this.mixinOption.viewTempSelector.getEndBoundary()}),n.dragBehavior==r.drag.directionMovement.horizontal)?{top:i.top,left:t.left,bottom:i.bottom,right:t.right,width:t.width,height:t.height}:n.dragBehavior==r.drag.directionMovement.vertical?{top:t.top,left:i.left,bottom:t.bottom,right:i.right,width:t.width,height:t.height}:void 0}};ecount.gridV2.handler.dragMultiSectionCaret={copyTableV2:function(){return ecount.gridV2.handler.drag.copyTableV2.apply(this,arguments)},copyTableV3:function(){return ecount.gridV2.handler.drag.copyTableV3.apply(this,arguments)},copyTableV3Multi:function(){return ecount.gridV2.handler.drag.copyTableV3Multi.apply(this,arguments)},getClosestColumn:function(){return ecount.gridV2.handler.drag.getClosestColumn.apply(this,arguments)},getCellSystemColumn:function(){return ecount.gridV2.handler.drag.getCellSystemColumn.apply(this,arguments)},moveHorizontalTableAllChildElement:function(){return ecount.gridV2.handler.drag.moveHorizontalTableAllChildElement.apply(this,arguments)},moveHorizontalTableChildElement:function(){return ecount.gridV2.handler.drag.moveHorizontalTableChildElement.apply(this,arguments)},moveVerticalTableChildElement:function(n,t,i,r,u){var k=ecount.grid.constValue,nt=k.sectionType.thead,tt=k.sectionType.tbody,g=k.sectionType.tfoot,a=[],f=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n),o,s,w,l,e=0,b=0,d=[],p=0,h,v,c,y;if(t==g&&(d=this.mixinOption.dataColumn.getAll(n,k.returnType.multi),p=d.length),i==k.crossDirection.up){if(r.top>u.top){for(e=0,h=r.top,v=r.bottom;h<=v;h++,b++){for(c=r.left,y=r.right;c<=y;c++)o=f[h][c],s=f[u.top+e][u.right+1]?f[u.top+e][u.right+1]:f[u.top+e][u.right],w=this.mixinOption.viewRow.getRowElement(n,o.rowId),l=this.mixinOption.viewRow.getRowElement(n,s.rowId,s.trIdx-p),["MERGE","NORMAL"].contains(f[h][c].type)&&(f[u.top+e][u.right+1]?a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:this.mixinOption.viewCell.getCellElement(n,s.columnId,s.rowId).cell,destTr:l}):a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:null,destTr:l}));e+=1}for(e=1,h=u.top,v=r.top;h<v;h++,b++){for(c=u.left,y=u.right;c<=y;c++)o=f[h][c],s=f[u.top+e][u.right+1]?f[u.top+e][u.right+1]:f[u.top+e][u.right],w=this.mixinOption.viewRow.getRowElement(n,o.rowId),l=this.mixinOption.viewRow.getRowElement(n,s.rowId,s.trIdx-p),["MERGE","NORMAL"].contains(f[h][c].type)&&(f[u.top+e][u.right+1]?a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:this.mixinOption.viewCell.getCellElement(n,s.columnId,s.rowId).cell,destTr:l}):a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:null,destTr:l}));e+=1}}else if(r.top<u.top){for(e=0,h=r.bottom+1,v=u.bottom;h<=v;h++,b++){for(c=u.left,y=u.right;c<=y;c++)o=f[h][c],s=f[r.top+e][u.right+1]?f[r.top+e][u.right+1]:f[r.top+e][u.right],w=this.mixinOption.viewRow.getRowElement(n,o.rowId),l=this.mixinOption.viewRow.getRowElement(n,s.rowId,s.trIdx-p),["MERGE","NORMAL"].contains(f[h][c].type)&&(f[r.top+e][u.right+1]?a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:this.mixinOption.viewCell.getCellElement(n,s.columnId,s.rowId).cell,destTr:l}):a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:null,destTr:l}));e+=1}for(e=0,h=r.top,v=r.bottom;h<=v;h++,b++){for(c=r.left,y=r.right;c<=y;c++)o=f[h][c],s=f[u.top+e][u.right+1]?f[u.top+e][u.right+1]:f[u.top+e][u.right],w=this.mixinOption.viewRow.getRowElement(n,o.rowId),l=this.mixinOption.viewRow.getRowElement(n,s.rowId,s.trIdx-p),["MERGE","NORMAL"].contains(f[h][c].type)&&(f[u.top+e][u.right+1]?a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:this.mixinOption.viewCell.getCellElement(n,s.columnId,s.rowId).cell,destTr:l}):a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:null,destTr:l}));e+=1}}}else if(i==k.crossDirection.down)if(r.top>u.top){for(e=0,h=r.top,v=r.bottom;h<=v;h++,b++){for(c=r.left,y=r.right;c<=y;c++)o=f[h][c],s=f[u.top+e][u.right+1]?f[u.top+e][u.right+1]:f[u.top+e][u.right],w=this.mixinOption.viewRow.getRowElement(n,o.rowId),l=this.mixinOption.viewRow.getRowElement(n,s.rowId,s.trIdx-p),["MERGE","NORMAL"].contains(f[h][c].type)&&(f[u.top+e][u.right+1]?a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:this.mixinOption.viewCell.getCellElement(n,s.columnId,s.rowId).cell,destTr:l}):a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:null,destTr:l}));e+=1}for(e=0,h=u.top,v=r.top;h<v;h++,b++){for(c=r.left,y=r.right;c<=y;c++)o=f[h][c],s=f[r.top+e][u.right+1]?f[r.top+e][u.right+1]:f[r.top+e][u.right],w=this.mixinOption.viewRow.getRowElement(n,o.rowId),l=this.mixinOption.viewRow.getRowElement(n,s.rowId,s.trIdx-p),["MERGE","NORMAL"].contains(f[h][c].type)&&(f[r.top+e][u.right+1]?a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:this.mixinOption.viewCell.getCellElement(n,s.columnId,s.rowId).cell,destTr:l}):a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:null,destTr:l}));e+=1}}else if(r.top<u.top){for(e=0,h=r.bottom+1,v=u.bottom;h<=v;h++,b++){for(c=r.left,y=r.right;c<=y;c++)o=f[h][c],s=f[r.top+e][u.right+1]?f[r.top+e][u.right+1]:f[r.top+e][u.right],w=this.mixinOption.viewRow.getRowElement(n,o.rowId),l=this.mixinOption.viewRow.getRowElement(n,s.rowId,s.trIdx-p),["MERGE","NORMAL"].contains(f[h][c].type)&&(f[r.top+e][u.right+1]?a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:this.mixinOption.viewCell.getCellElement(n,s.columnId,s.rowId).cell,destTr:l}):a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:null,destTr:l}));e+=1}for(e=0,h=r.top,v=r.bottom;h<=v;h++,b++){for(c=u.left,y=u.right;c<=y;c++)o=f[h][c],s=f[u.top+e]&&f[u.top+e][r.right+1]?f[u.top+e][r.right+1]:f[u.top+e][r.right],w=this.mixinOption.viewRow.getRowElement(n,o.rowId),l=this.mixinOption.viewRow.getRowElement(n,s.rowId,s.trIdx-p),["MERGE","NORMAL"].contains(f[h][c].type)&&(f[u.top+e]&&f[u.top+e][r.right+1]?a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:this.mixinOption.viewCell.getCellElement(n,s.columnId,s.rowId).cell,destTr:l}):a.push({source:this.mixinOption.viewCell.getCellElement(n,o.columnId,o.rowId).cell,dest:null,destTr:l}));e+=1}}a.forEach(function(n){n.dest?n.destTr.insertBefore(n.source,n.dest):n.destTr.appendChild(n.source)})},moveHorizontalAllData:function(){return ecount.gridV2.handler.drag.moveHorizontalAllData.apply(this,arguments)},getHorizontalSelectedBoundary:function(){return ecount.gridV2.handler.drag.getHorizontalSelectedBoundary.apply(this,arguments)},getVerticalSelectedBoundary:function(){return ecount.gridV2.handler.drag.getVerticalSelectedBoundary.apply(this,arguments)},dragStartPrepare:function(n){var o,f,v,h,y,c,p,l,a,t,s;this.core.state=="none"&&(this.core.state="draging");var u=ecount.grid.constValue,w=u.sectionType.thead,k=u.sectionType.tbody,d=u.sectionType.tfoot,e={result:!0,mouseIconElement:null,startBoundary:{},layoutSize:{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0}};if((u.checkBoxPropertyNameRex.test(n.gridStartColumnID)||u.rowMoveablePropertyNameRex.test(n.gridStartColumnID)||u.rowNumberingPropertyNameRex.test(n.gridStartColumnID))&&(e.result=!1),this.mixinOption.optForm.version==u.formVersion.third&&this.mixinOption.optCommon.columnType==u.columnType.single&&n.gridStartSectionType!=w&&(e.result=!1),e.result){f=this.mixinOption.optLayout.container.getBoundingClientRect();e.layoutSize={x:f.x,y:f.y,top:f.top,left:f.left,width:f.width,height:f.height,right:f.right,bottom:f.bottom};var i=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),r=i[0].columnBoundary,b=this.mixinOption.dataColumn.getAll(n.gridStartColumnSectionType||n.gridStartSectionType,u.returnType.multi),g=this.mixinOption.dataRow.getAll(n.gridStartSectionType),o=document.createElement("div");for(o.classList.add("draggable-helper"),t=0,s=i.length;t<s;t++)for(v=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(i[t].sectionType),h=i[t].rowBoundary.top,y=i[t].rowBoundary.bottom;h<=y;h++)for(c=i[t].rowBoundary.left,p=i[t].rowBoundary.right;c<=p;c++)l=v[h][c],this.mixinOption.viewCell.addClass(i[t].sectionType,l.columnId,l.rowId,["draggable-item"]);if(i.length>1){for(a=0,t=0,s=i.length;t<s;t++)a+=(i[t].columnBoundary.bottom-i[t].columnBoundary.top+1)*(i[t].columnBoundary.right-i[t].columnBoundary.left+1);o.innerText=a}else o.innerText=r.bottom-r.top>0||r.right-r.left>0?(r.bottom-r.top+1)*(r.right-r.left+1):"1";e.startBoundary=r;e.mouseIconElement=o;e.startElementPosition=this.mixinOption.viewCell.getSizeByContainer(n.gridStartSectionType,b[r.top][r.left].id,n.gridStartDataKey);this.mixinOption.viewSelector.invisibleOption()}return e},dragStartFinish:function(){return ecount.gridV2.handler.drag.dragStartFinish.apply(this,arguments)},dragMovePossible:function(n){var t=this.core.fn.getDisplaySelectorOption(n.gridStartSectionType,n.gridStartBoundary,n.gridEndSectionType,n.gridEndBoundary),i;return this.core.boundary.reset(),this.core.boundary.addBoundary(n.gridStartBoundary),this.core.boundary.addBoundary(n.gridEndBoundary),i=this.core.boundary.get(),{isPossibleHorizontal:t.isHorizontal,isPossibleVertical:t.isVertical,verticalMethod:this.core.fn.getMoveVerticalType(n.gridStartSectionType,n.gridStartColumnSectionType,this.mixinOption.dataColumn.__datas[n.gridStartColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridStartColumnSectionType+"slip"],i)}},dragMovePrepare:function(n){var t={result:!0,scrollPosition:{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0},boundary:{top:n.gridStartBoundary.top,bottom:n.gridStartBoundary.bottom,left:n.gridStartBoundary.left,right:n.gridStartBoundary.right},element:null},i=this.mixinOption.viewSelector.getSelectedSectionTypes();return!i.contains(n.gridStartSectionType)||!i.contains(n.gridMoveSectionType)?(t.result=!1,t):ecount.gridV2.handler.drag.dragMovePrepare.apply(this,arguments)},dragMoveFinish:function(){return ecount.gridV2.handler.drag.dragMoveFinish.apply(this,arguments)},dragEndPrepare:function(n){var t={result:!1,sectionType:n.gridStartSectionType,boundary:{top:-1,left:-1,bottom:-1,right:-1},cells:[]};if(!n.gridStartBoundary||!n.gridMoveBoundary)return t;var i=ecount.grid.constValue,e=i.sectionType.thead,o=i.sectionType.tbody,s=i.sectionType.tfoot,f=this.setting.eventsGet(),r=!1,u=f&&f._triggerEvent(ecount.grid.event.list.formSetDragPrepareComplete,null,{isCollideLeftFixed:r,callback:n.fn,startSectionType:n.gridStartSectionType,startBoundary:n.gridStartBoundary,endSectionType:n.gridMoveSectionType,endBoundary:n.gridMoveBoundary})||{result:!0,isCancelLeftFixed:r};return t.isCancelLeftFixed=typeof u.isCancelLeftFixed=="boolean"?u.isCancelLeftFixed:r,t.result=u.result,t},getLeftFixedCount:function(){return ecount.gridV2.handler.drag.getLeftFixedCount.apply(this,arguments)},getLeftFixedIndex:function(){return ecount.gridV2.handler.drag.getLeftFixedIndex.apply(this,arguments)},isCollideLeftFixed:function(){return ecount.gridV2.handler.drag.isCollideLeftFixed.apply(this,arguments)},getCellByBoundary:function(n,t,i,r,u,f){var s=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n),e=s[i.top][i.left],h=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(r),o=h[f.bottom][f.right],c=this.mixinOption.viewCell.getCellOriginalElement(n,e.columnId,e.rowId).cell,l=this.mixinOption.viewCell.getCellOriginalElement(r,o.columnId,o.rowId).cell;return[c,l]},isMoveable:function(n){var t=ecount.grid.constValue,i=t.sectionType.thead,r=t.sectionType.tbody,u=t.sectionType.tfoot;if(n.gridMoveType==t.drag.directionMovement.horizontal){if(n.gridMoveDirection==t.crossDirection.leftOfRight)return n.gridMoveBoundary.left-1==n.gridStartBoundary.right?!1:!0;if(n.gridMoveDirection==t.crossDirection.rightOfRight)return!0;if(n.gridMoveDirection==t.crossDirection.rightOfLeft)return n.gridMoveBoundary.right+1==n.gridStartBoundary.left?!1:!0;if(n.gridMoveDirection==t.crossDirection.leftOfLeft)return!0}else if(n.gridMoveType==t.drag.directionMovement.vertical){if(n.gridMoveDirection==t.crossDirection.topOfTop)return!0;if(n.gridMoveDirection==t.crossDirection.bottomOfTop)return n.gridMoveBoundary.bottom+1==n.gridStartBoundary.top?!1:!0;if(n.gridMoveDirection==t.crossDirection.topOfBottom)return n.gridMoveBoundary.top-1==n.gridStartBoundary.bottom?!1:!0;if(n.gridMoveDirection==t.crossDirection.bottomOfBottom)return!0}else if(n.gridMoveType==t.drag.directionMovement.all)return!0;return!1},_boundaryValueCorrection:function(n){var t=ecount.grid.constValue,i=t.sectionType.thead,r=t.sectionType.tbody,u=t.sectionType.tfoot;n.moveType==t.drag.directionMovement.horizontal?n.moveDirection==t.crossDirection.leftOfRight?(n.toBoundary.left-=1,n.toBoundary.right=n.toBoundary.left):n.moveDirection==t.crossDirection.rightOfRight||(n.moveDirection==t.crossDirection.rightOfLeft?(n.toBoundary.left+=1,n.toBoundary.right+=1):n.moveDirection==t.crossDirection.leftOfLeft):n.moveType==t.drag.directionMovement.vertical&&(n.moveDirection==t.crossDirection.topOfTop||(n.moveDirection==t.crossDirection.bottomOfTop?(n.toBoundary.bottom+=1,n.toBoundary.top=n.toBoundary.bottom):n.moveDirection==t.crossDirection.topOfBottom?(n.toBoundary.top-=1,n.toBoundary.bottom=n.toBoundary.top):n.moveDirection==t.crossDirection.bottomOfBottom))},_getMoveDirection:function(n){var t=ecount.grid.constValue,r=t.sectionType.thead,u=t.sectionType.tbody,f=t.sectionType.tfoot,i=t.crossDirection.none;return n.moveType==t.drag.directionMovement.horizontal?n.moveDirection==t.crossDirection.leftOfRight?(n.toBoundary.left-=1,n.toBoundary.right=n.toBoundary.left,i=t.crossDirection.right):n.moveDirection==t.crossDirection.rightOfRight?i=t.crossDirection.right:n.moveDirection==t.crossDirection.rightOfLeft?(n.toBoundary.left+=1,n.toBoundary.right+=1,i=t.crossDirection.left):n.moveDirection==t.crossDirection.leftOfLeft&&(i=t.crossDirection.left):n.moveType==t.drag.directionMovement.vertical&&(n.moveDirection==t.crossDirection.topOfTop?i=t.crossDirection.up:n.moveDirection==t.crossDirection.bottomOfTop?(n.toBoundary.bottom+=1,n.toBoundary.top=n.toBoundary.bottom,i=t.crossDirection.down):n.moveDirection==t.crossDirection.topOfBottom?(n.toBoundary.top-=1,n.toBoundary.bottom=n.toBoundary.top,i=t.crossDirection.up):n.moveDirection==t.crossDirection.bottomOfBottom&&(i=t.crossDirection.down)),i},moveRangeColumn:function(n){var r=ecount.grid.constValue,t=ecount.gridV2.handler.dragMultiSectionCaret,i=t._getMoveDirection.call(this,{moveType:n.moveType,moveDirection:n.moveDirection,fromBoundary:n.fromBoundary,toBoundary:n.toBoundary});n.moveDirection=i;t.moveUI.call(this,n);t.moveData.call(this,n)},moveUI:function(n){var t=ecount.grid.constValue,i=t.sectionType.thead,r=t.sectionType.tbody,u=t.sectionType.tfoot;n.moveType==t.drag.directionMovement.horizontal?ecount.gridV2.handler.dragTableMulti.moveHorizontalTableChildElement.call(this,n.sectionType,n.columnSectionType,n.moveDirection,n.columnBoundary,n.toBoundary):n.moveType==t.drag.directionMovement.vertical&&ecount.gridV2.handler.dragMultiSectionCaret.moveVerticalTableChildElement.call(this,n.sectionType,n.columnSectionType,n.moveDirection,n.fromBoundary,n.toBoundary)},moveData:function(n){var t=ecount.grid.constValue,i=t.sectionType.thead,r=t.sectionType.tbody,u=t.sectionType.tfoot;ecount.gridV2.handler.dragTableMulti.moveData.call(this,n.sectionType,n.columnSectionType,n.detailSectionType,n.moveType,n.moveDirection,n.fromBoundary,n.toBoundary,n.columnBoundary,n.moveMethod,n.isCancelLeftFixed,n.isSyncWidth)},dragEndFinish:function(n){var e=ecount.grid.constValue,c=e.sectionType.thead,nt=e.sectionType.tbody,tt=e.sectionType.tfoot,b=[c,nt,tt],d={result:!1,startSectionType:null,startColumnSectionType:null,startDetailSectionType:null,startRowBoundary:null,startColumnBoundary:null,endSectionType:null,endColumnSectionType:null,endDetailSectionType:null,endRowBoundary:null,endColumnBoundary:null,cells:[]},t=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),s,y,p,w,g,it,i,a,o,f,v,k,r,h;if(d.cells=ecount.gridV2.handler.dragMultiSectionCaret.getCellByBoundary.call(this,t[0].sectionType,t[0].columnSectionType,t[0].rowBoundary,t[t.length-1].sectionType,t[t.length-1].columnSectionType,t[t.length-1].rowBoundary),ecount.gridV2.handler.dragMultiSectionCaret.isMoveable.call(this,n)){var l=ecount.gridV2.handler.dragMultiSectionCaret._getMoveDirection.call(this,{moveType:n.gridMoveType,moveDirection:n.gridMoveDirection,fromBoundary:n.gridStartBoundary,toBoundary:n.gridMoveBoundary}),rt=this.mixinOption.dataRow.getViewDataTableMapAll(c),ut=Object.keys(rt),u=this.mixinOption.viewTable.getColgroupElement(c,ut[0]);if(l==e.crossDirection.left)for(s=t[0],r=s.rowBoundary.left,h=s.rowBoundary.right+1;r<h;r++)u.children[n.gridMoveBoundary.left]?u.insertBefore(u.children[s.rowBoundary.right],u.children[n.gridMoveBoundary.left]):u.appendChild(u.children[s.rowBoundary.right]);else if(l==e.crossDirection.right)for(s=t[0],r=s.rowBoundary.left,h=s.rowBoundary.right+1;r<h;r++)u.children[n.gridMoveBoundary.right+1]?u.insertBefore(u.children[s.rowBoundary.left],u.children[n.gridMoveBoundary.right+1]):u.appendChild(u.children[s.rowBoundary.left]);for(i=0,a=t.length;i<a;i++)y=_.extend({},n.gridStartBoundary),p=_.extend({},n.gridMoveBoundary),this.mixinOption.optCommon.columnType==e.columnType.multi&&t[i].columnSectionType==tt&&(w=this.mixinOption.dataColumn.getAll(nt,e.returnType.multi),y.top+=w.length,y.bottom+=w.length,p.top+=w.length,p.bottom+=w.length),n.gridMoveType=="horizontal"&&(y={top:t[i].rowBoundary.top,bottom:t[i].rowBoundary.bottom,left:n.gridStartBoundary.left,right:n.gridStartBoundary.right},p={top:t[i].rowBoundary.top,bottom:t[i].rowBoundary.bottom,left:n.gridMoveBoundary.left,right:n.gridMoveBoundary.right}),ecount.gridV2.handler.dragMultiSectionCaret.moveUI.call(this,{sectionType:t[i].sectionType,columnSectionType:t[i].columnSectionType,detailSectionType:t[i].detailSectionType,moveType:n.gridMoveType,moveDirection:l,columnBoundary:t[i].columnBoundary,fromBoundary:y,toBoundary:p,moveMethod:null,isCancelLeftFixed:n.isCancelLeftFixed}),ecount.gridV2.handler.dragMultiSectionCaret.moveData.call(this,{sectionType:t[i].sectionType,columnSectionType:t[i].columnSectionType,detailSectionType:t[i].detailSectionType,moveType:n.gridMoveType,moveDirection:l,columnBoundary:t[i].columnBoundary,fromBoundary:n.gridStartBoundary,toBoundary:n.gridMoveBoundary,moveMethod:null,isCancelLeftFixed:n.isCancelLeftFixed});if(n.isCancelLeftFixed)for(g=this.mixinOption.dataRow.getAll(c),o=this.mixinOption.dataColumn.getAll(c,e.returnType.multi),r=0,h=g.length;r<h;r++)for(it=g[r],f=0,v=leftFixedColumns.length;f<v;f++)this.core.fn.refreshCell(c,leftFixedColumns[f].id,it[e.keyColumnPropertyName],{isRunChange:!1});if(l==e.crossDirection.left){for(i=0,a=b.length;i<a;i++)if(o=this.mixinOption.dataColumn.getAll(b[i],e.returnType.multi),o.length!=0)for(f=n.gridMoveBoundary.left,v=n.gridStartBoundary.right;f<=v;f++)for(k=parseInt(u.children[f].style.width,10),r=0,h=o.length;r<h;r++)o[r].length!=0&&(o[r][f].width=k)}else if(l==e.crossDirection.right)for(i=0,a=b.length;i<a;i++)if(o=this.mixinOption.dataColumn.getAll(b[i],e.returnType.multi),o.length!=0)for(f=n.gridStartBoundary.left,v=n.gridMoveBoundary.right;f<=v;f++)for(k=parseInt(u.children[f].style.width,10),r=0,h=o.length;r<h;r++)o[r].length!=0&&(o[r][f].width=k);d.result=!0}return d},dragEndCompleted:function(n){var l=ecount.gridV2.handler.drag.dragEndCompleted.apply(this,arguments),e,i,t,o,s,r,h,u,c,f;for(n.cells&&(e=this.mixinOption.viewSelector.getState(),this.mixinOption.viewSelector.resetData().setState(e).ecSelectStart(n.cells[0]).ecSelectEnd(n.cells[n.cells.length-1]).ecSelectExtend().hide().visibleOption().ecDraw().show()),i=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),this.core.state=="draging"&&(this.core.state="none"),t=0,o=i.length;t<o;t++)for(s=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(i[t].sectionType),r=i[t].rowBoundary.top,h=i[t].rowBoundary.bottom;r<=h;r++)for(u=i[t].rowBoundary.left,c=i[t].rowBoundary.right;u<=c;u++)f=s[r][u],this.mixinOption.viewCell.removeClass(i[t].sectionType,f.columnId,f.rowId,["draggable-item"]);return this.mixinOption.viewSelector.visibleOption(),l},getColumnSectionType:function(){return ecount.gridV2.handler.drag.getColumnSectionType.apply(this,arguments)},getSelectedBoundaryInfos:function(){var i={thead:[{sectionType:null,columnSectionType:null,detailSectionType:null,columnBoundary:{top:-1,left:-1,bottom:-1,right:-1},rowBoundary:{top:-1,left:-1,bottom:-1,right:-1}}],tbody:[{sectionType:null,columnSectionType:null,detailSectionType:null,columnBoundary:{top:-1,left:-1,bottom:-1,right:-1},rowBoundary:{top:-1,left:-1,bottom:-1,right:-1}}],tfoot:[{sectionType:null,columnSectionType:null,detailSectionType:null,columnBoundary:{top:-1,left:-1,bottom:-1,right:-1},rowBoundary:{top:-1,left:-1,bottom:-1,right:-1}}]};if(this.mixinOption.viewSelector){var n=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),r=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n[0].sectionType),t=r[n[0].rowBoundary.top][n[0].rowBoundary.left];n[0].columnId=t.columnId;n[0].rowId=t.rowId;n[0].element=this.mixinOption.viewCell.getCellElement(n[0].sectionType,t.columnId,t.rowId).cell;n[0].elementPosition=this.mixinOption.viewCell.getSizeByContainer(n[0].sectionType,t.columnId,t.rowId);i=n}return i},getDragableElement:function(){var i=null,n,r,t;return this.mixinOption.viewSelector&&(n=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),n&&n.length&&(r=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n[0].sectionType),t=r[n[0].rowBoundary.top][n[0].rowBoundary.left],n=this.mixinOption.viewCell.getCellElement(n[0].sectionType,t.columnId,t.rowId).cell),i=n),i},isPossibleMoveable:function(){},isMoveHorizontalDirection:function(n){var r=ecount.grid.constValue,s=this.mixinOption.dataRow.getViewDataTrMap(n.gridStartSectionType,n.gridStartDataKey),t=s.rowInfo[n.gridStartColumnID],h=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridStartSectionType),e=h[t.columnRowIdx][t.columnIdx],u={top:t.columnRowIdx,left:t.columnIdx,bottom:t.columnRowIdx+(n.gridStartBoundary.bottom-n.gridStartBoundary.top),right:t.columnIdx+(n.gridStartBoundary.right-n.gridStartBoundary.left)};["MERGE"].contains(e.type)&&(u.bottom+=(e[r.rowVariableNames.rowspanCount]||1)-1,u.right+=(e[r.rowVariableNames.colspanCount]||1)-1);var c=this.mixinOption.dataRow.getViewDataTrMap(n.gridMoveSectionType,n.gridMoveDataKey),i=c.rowInfo[n.gridMoveColumnID],l=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.gridMoveSectionType),o=l[i.columnRowIdx][i.columnIdx],f={top:i.columnRowIdx,left:i.columnIdx,bottom:i.columnRowIdx,right:i.columnIdx};return["MERGE"].contains(o.type)&&(f.bottom+=(o[r.rowVariableNames.rowspanCount]||1)-1,f.right+=(o[r.rowVariableNames.colspanCount]||1)-1),u.left<=f.left&&u.right>=f.right?!1:!0},isMoveVerticalDirection:function(n){var r=this.mixinOption.dataRow.getViewDataTrMap(n.gridStartSectionType,n.gridStartDataKey),t=r.rowInfo[n.gridStartColumnID],u=this.mixinOption.dataRow.getViewDataTrMap(n.gridMoveSectionType,n.gridMoveDataKey),i=u.rowInfo[n.gridMoveColumnID];return t.columnRowIdx<=i.columnRowIdx&&t.columnRowIdx+(n.gridStartBoundary.bottom-n.gridStartBoundary.top)>=i.columnRowIdx?!1:!0},getMoveDirection:function(n){var r=ecount.grid.constValue,e=r.crossDirection.none,t,i,v,c,o,l,a;if(this.mixinOption.viewTempSelector.resetData().selectStartByElement(n.mousemoveElement).selectExtend(),t=this.mixinOption.viewTempSelector.getStartSectionType(),i=this.mixinOption.viewTempSelector.getStartBoundary(),n.dragBehavior==r.drag.directionMovement.horizontal){if(v=this.core.fn.getRangeInformationsByRange(this.mixinOption.viewSelector.getStartSectionType(),this.mixinOption.viewSelector.getStartBoundary(),this.mixinOption.viewSelector.getEndSectionType(),this.mixinOption.viewSelector.getEndBoundary(),{returnType:"array"}),c=v[0],c.columnBoundary.right<i.left){var s=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(t),u=s[i.top][i.left],h=this.mixinOption.viewCell.getCellElement(t,u.columnId,u.rowId).cell,f=h.getBoundingClientRect();e=f.left+f.width/2<=n.mousemovePosition.x?r.crossDirection.rightOfRight:r.crossDirection.leftOfRight}else if(c.columnBoundary.left>i.right){var s=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(t),u=s[i.top][i.right],h=this.mixinOption.viewCell.getCellOriginalElement(t,u.columnId,u.rowId).cell,f=h.getBoundingClientRect();e=f.left+f.width/2<=n.mousemovePosition.x?r.crossDirection.rightOfLeft:r.crossDirection.leftOfLeft}}else if(n.dragBehavior==r.drag.directionMovement.vertical&&(o=this.core.fn.getRangeInformationsByRange(this.mixinOption.viewSelector.getStartSectionType(),this.mixinOption.viewSelector.getStartBoundary(),this.mixinOption.viewSelector.getEndSectionType(),this.mixinOption.viewSelector.getEndBoundary(),{returnType:"object"}),o[t]&&(l=o[t][0],a=o[t][o[t].length-1]),l&&a))if(a.rowBoundary.bottom<i.top){var s=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(t),u=s[i.top][i.right],h=this.mixinOption.viewCell.getCellOriginalElement(t,u.columnId,u.rowId).cell,f=h.getBoundingClientRect();e=f.top+f.height/2<=n.mousemovePosition.y?r.crossDirection.bottomOfBottom:r.crossDirection.topOfBottom}else if(l.rowBoundary.top>i.bottom){var s=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(t),u=s[i.bottom][i.right],h=this.mixinOption.viewCell.getCellOriginalElement(t,u.columnId,u.rowId).cell,f=h.getBoundingClientRect();e=f.top+f.height/2<=n.mousemovePosition.y?r.crossDirection.bottomOfTop:r.crossDirection.topOfTop}return e},getMoveBoundingClientRect:function(n){var r=ecount.grid.constValue,i,t;return(this.mixinOption.viewTempSelector.resetData().selectStartByElement(n.mousemoveElement).selectExtend(),i=ecount.gridV2.handler.selectorAllSection.draw.call(this,{gridStartSectionType:this.mixinOption.viewSelector.getStartSectionType(),gridEndSectionType:this.mixinOption.viewSelector.getEndSectionType(),gridStartBoundary:this.mixinOption.viewSelector.getStartBoundary(),gridEndBoundary:this.mixinOption.viewSelector.getEndBoundary()}),t=ecount.gridV2.handler.selectorAllSection.draw.call(this,{gridStartSectionType:this.mixinOption.viewTempSelector.getStartSectionType(),gridEndSectionType:this.mixinOption.viewTempSelector.getEndSectionType(),gridStartBoundary:this.mixinOption.viewTempSelector.getStartBoundary(),gridEndBoundary:this.mixinOption.viewTempSelector.getEndBoundary()}),n.dragBehavior==r.drag.directionMovement.horizontal)?{top:i.top,left:t.left,bottom:i.bottom,right:t.right,width:t.width,height:t.height}:n.dragBehavior==r.drag.directionMovement.vertical?{top:t.top,left:i.left,bottom:t.bottom,right:i.right,width:t.width,height:t.height}:void 0}};ecount.gridV2.handler.dragTableSingle={copyTableV2:function(n,t,i,r,u,f){var c,k,o,a,d,g,nt,v,s,l,h,tt,e,y;f=f||{};var it=this.mixinOption.dataRow.getViewDataTableMapAll(n),rt=Object.keys(it),p=this.mixinOption.viewTable.getTableElement(n,rt[0]),w=p.cloneNode(!1),b=0;for(c=0,k=p.children.length;c<k;c++){if(o=p.children[c],a=o.cloneNode(!1),o.tagName=="COLGROUP")for(e=u.left,y=u.right;e<=y;e++)d=o.children[e],g=d.cloneNode(!0),a.appendChild(g);else for(h=0,tt=o.children.length;h<tt;h++){for(nt=o.children[h],renderingTableMap=this.mixinOption.dataRow.getViewDataRenderingTableMap(o.tagName.toLowerCase(),h),v=nt.cloneNode(!1),e=u.left,y=u.right;e<=y;e++)if(["NORMAL","MERGE"].contains(renderingTableMap[e].type))s=this.mixinOption.viewCell.getCellElement(o.tagName.toLowerCase(),renderingTableMap[e].columnId,renderingTableMap[e].rowId).cell,l=s.cloneNode(!0),l.style.height=s.offsetHeight+"px",v.appendChild(l),c==0&&h==0&&(b+=s.offsetWidth);else if(["COLSPAN","ROWSPAN_AND_COLSPAN"].contains(renderingTableMap[e].type)){if(s=this.mixinOption.viewCell.getCellElement(o.tagName.toLowerCase(),renderingTableMap[e].columnId,renderingTableMap[e].rowId).cell,!s)continue;l=s.cloneNode(!0);l.style.height=s.offsetHeight+"px";v.appendChild(l);c==0&&h==0&&(b+=s.offsetWidth)}a.appendChild(v)}w.appendChild(a)}return w.style.width=b+"px",w},copyTableV3:function(n,t,i,r,u,f,e,o){var l=ecount.grid.constValue,yt=l.sectionType.thead,y=l.sectionType.tbody,ft=l.sectionType.tfoot,p,et,h,k,ot,st,ht,d,v,w,s,a,b,rt,ut,ct,lt,c,g;o=o||{};var at=this.mixinOption.dataRow.getViewDataTableMapAll(n),vt=Object.keys(at),nt=this.mixinOption.viewTable.getTableElement(n,vt[0]),tt=nt.cloneNode(!1),it=0;for(p=0,et=nt.children.length;p<et;p++){if(h=nt.children[p],k=h.cloneNode(!1),h.tagName=="COLGROUP")for(c=e.left,g=e.right;c<=g;c++)ot=h.children[c],st=ot.cloneNode(!0),k.appendChild(st);else{if(o.sectionTypes&&!o.sectionTypes.contains(h.tagName.toLowerCase()))continue;s=0;a=0;switch(f){case l.drag.directionMovement.horizontal:this.mixinOption.optCommon.columnType==l.columnType.multi?(rt=this.mixinOption.dataColumn.getAll(t||n,l.returnType.multi),h.tagName.toLowerCase()==y?t==ft?(b=this.mixinOption.dataRow.getViewDataTrMap(y,u),b.rowInfo.trIdx.length>0&&(s=b.rowInfo.trIdx[0],a=b.rowInfo.trIdx[b.rowInfo.trIdx.length-1])):i==l.sectionSeparateValue.slip?(s=this.mixinOption.dataColumn.__datas.tbodyslip.startRow,a=this.mixinOption.dataColumn.__datas.tbodyslip.endRow):(s=this.mixinOption.dataColumn.__datas.tbody.startRow,a=this.mixinOption.dataColumn.__datas.tbody.endRow):(s=0,a=h.children.length-1)):(s=0,a=h.children.length-1);break;case l.drag.directionMovement.vertical:this.mixinOption.optCommon.columnType==l.columnType.multi?(rt=this.mixinOption.dataColumn.getAll(t||n,l.returnType.multi),h.tagName.toLowerCase()==y&&(t==ft?(ut=this.mixinOption.dataRow.getSectionRowIndex(h.tagName.toLowerCase(),t),ct=this.mixinOption.dataColumn.getAll(y,l.returnType.multi),lt=this.mixinOption.dataRow.getSectionRowIndex(y),a=s=lt.startRowCount*ct.length):(ut=this.mixinOption.dataRow.getSectionRowIndex(y),a=s=ut.startRowIndex*rt.length)),s+=e.top,a+=e.bottom):(s=e.top,a=e.bottom)}for(;s<=a;s++){for(ht=h.children[s],renderingTableMap=this.mixinOption.dataRow.getViewDataRenderingTableMap(h.tagName.toLowerCase(),s),d=ht.cloneNode(!1),c=e.left,g=e.right;c<=g;c++)if(["NORMAL","MERGE"].contains(renderingTableMap[c].type))v=this.mixinOption.viewCell.getCellElement(h.tagName.toLowerCase(),renderingTableMap[c].columnId,renderingTableMap[c].rowId).cell,w=v.cloneNode(!0),w.style.height=v.offsetHeight+"px",d.appendChild(w),p==0&&s==0&&(it+=v.offsetWidth);else if(["COLSPAN","ROWSPAN_AND_COLSPAN"].contains(renderingTableMap[c].type)){if(v=this.mixinOption.viewCell.getCellElement(h.tagName.toLowerCase(),renderingTableMap[c].columnId,renderingTableMap[c].rowId).cell,!v)continue;w=v.cloneNode(!0);w.style.height=v.offsetHeight+"px";d.appendChild(w);p==0&&s==0&&(it+=v.offsetWidth)}k.appendChild(d)}}tt.appendChild(k)}return tt.style.width=it+"px",tt},copyTableV3Multi:function(n,t,i){for(var u,h,w,b,k,c,f,o,e,d,r,l,a=ecount.grid.constValue,it=a.sectionType.thead,rt=a.sectionType.tbody,ut=a.sectionType.tfoot,g=this.mixinOption.dataRow.getViewDataTableMapAll(n),nt=Object.keys(g),v=this.mixinOption.viewTable.getTableElement(n,nt[0]),y=v.cloneNode(!1),p=0,s=0,tt=v.children.length;s<tt;s++){if(u=v.children[s],h=u.cloneNode(!1),u.tagName=="COLGROUP")for(r=i.left,l=i.right;r<=l;r++)w=u.children[r],b=w.cloneNode(!0),h.appendChild(b);else for(e=0,d=u.children.length;e<d;e++){for(k=u.children[e],renderingTableMap=this.mixinOption.dataRow.getViewDataRenderingTableMap(u.tagName.toLowerCase(),e),c=k.cloneNode(!1),r=i.left,l=i.right;r<=l;r++)if(["NORMAL","MERGE"].contains(renderingTableMap[r].type))f=this.mixinOption.viewCell.getCellElement(u.tagName.toLowerCase(),renderingTableMap[r].columnId,renderingTableMap[r].rowId).cell,o=f.cloneNode(!0),o.style.height=f.offsetHeight+"px",c.appendChild(o),s==0&&e==0&&(p+=f.offsetWidth);else if(["COLSPAN","ROWSPAN_AND_COLSPAN"].contains(renderingTableMap[r].type)){if(f=this.mixinOption.viewCell.getCellElement(u.tagName.toLowerCase(),renderingTableMap[r].columnId,renderingTableMap[r].rowId).cell,!f)continue;o=f.cloneNode(!0);o.style.height=f.offsetHeight+"px";c.appendChild(o);s==0&&e==0&&(p+=f.offsetWidth)}h.appendChild(c)}y.appendChild(h)}return y.style.width=p+"px",y},getClosestColumn:function(n,t,i,r){for(var f=ecount.grid.constValue,s=f.sectionType.thead,h=f.sectionType.tbody,c=f.sectionType.tfoot,f=ecount.grid.constValue,o=this.mixinOption.dataColumn.getAll(n,f.returnType.multi),u,e=r.left;;){if(u=o[r.top][e],t==f.crossDirection.left&&u&&ecount.common.isTrue(u.isMergeColumn)){u=null;e+=1;e==i.right&&(e=i.right+1);continue}else if(t==f.crossDirection.right){if(!u)break;if(ecount.common.isTrue(u.isMergeColumn)){u=null;e+=1;continue}}if(u)break;if(o[0].length==e)break}return u},getCellSystemColumn:function(n,t,i){var r=ecount.grid.constValue,o=r.sectionType.thead,s=r.sectionType.tbody,f=r.sectionType.tfoot,e=this.mixinOption.dataColumn.getAll(t,r.returnType.multi),u=[];return this.mixinOption.optCheckbox[n==f?o:n].items[r.checkBoxPropertyName].use&&(index=this.mixinOption.optCheckbox[n==f?o:n].items[r.checkBoxPropertyName].index,n==f?u.push({element:this.mixinOption.viewCell.getCellElement(f,e[0][index].id,i).cell,targetIndex:index}):u.push({element:this.mixinOption.viewCell.getCellElement(n,e[0][index].id,i).cell,targetIndex:index})),this.mixinOption.optRowmoveable.use&&(index=this.mixinOption.optRowmoveable.index,u.push({element:this.mixinOption.viewCell.getCellElement(n,e[0][index].id,i).cell,targetIndex:index})),this.mixinOption.optNumbering.use&&(index=this.mixinOption.optNumbering.index,u.push({element:this.mixinOption.viewCell.getCellElement(n,e[0][index].id,i).cell,targetIndex:index})),u.sort(function(n,t){var i=n.targetIndex,r=t.targetIndex;return i>r?1:i<r?-1:0}),u},moveHorizontalTableAllChildElement:function(n,t,i,r){for(var n,y,h,f,g,a,o,it,u=ecount.grid.constValue,rt=u.sectionType.thead,ut=u.sectionType.tbody,ft=u.sectionType.tfoot,v=[rt,ut],s=0,et=v.length;s<et;s++)for(n=v[s],y=this.mixinOption.dataRow.getAll(n),h=y.length-1;h>-1;h--){var b=y[h],p=b[u.keyColumnPropertyName],ot=b[u.rowVariableNames.rowType],k=ot==u.rowType.separate?ft:v[s],d=this.mixinOption.dataColumn.getAll(k||n,u.returnType.multi);for(f=0,g=d.length;f<g;f++){var nt=this.mixinOption.viewRow.getRowElement(n,p,f),c=[],w=null,tt=t==u.crossDirection.left?r.left:r.right+1,l=ecount.gridV2.handler.dragTableSingle.getClosestColumn.call(this,k,t,{top:i.top,left:i.left,bottom:i.bottom,right:i.right},{top:f,left:tt,bottom:f,right:tt}),e;for(l&&(e=this.mixinOption.viewCell.getCellElement(n,l.id,p),w=e.cell),a=i.left;a<=i.right;a++)l=d[f][a],e=this.mixinOption.viewCell.getCellElement(n,l.id,p),e.map&&e.map.cellInfo&&e.map.cellInfo.adjustmentValue!=1&&c.push(e.cell);for(o=0,it=c.length;o<it;o++)w?nt.insertBefore(c[o],w):nt.appendChild(c[o])}}},moveHorizontalTableChildElement:function(n,t,i,r,u){var f=ecount.grid.constValue,rt=f.sectionType.thead,ut=f.sectionType.tbody,ft=f.sectionType.tfoot,w=this.mixinOption.dataRow.getAll(n),it=this.mixinOption.dataColumn.getAll(t||n,f.returnType.multi),h=w.length-1,b=-1,y,k,c,e,d,v,s,tt;for(this.mixinOption.optCommon.columnType==f.columnType.multi&&(y=this.mixinOption.dataRow.getSectionRowIndex(n,t),h=y.endRowIndex,b=y.startRowIndex-1);h>b;h--)for(k=w[h],c=k[f.keyColumnPropertyName],e=r.bottom,d=r.top;e>=d;e--){var g=this.mixinOption.viewRow.getRowElement(n,c,e),l=[],p=null,nt=i==f.crossDirection.left?u.left:u.right+1,a=ecount.gridV2.handler.dragTableSingle.getClosestColumn.call(this,t,i,{top:r.top,left:r.left,bottom:r.bottom,right:r.right},{top:e,left:nt,bottom:e,right:nt}),o;for(a&&(o=this.mixinOption.viewCell.getCellElement(n,a.id,c),p=o.cell),v=r.left;v<=r.right;v++)a=it[e][v],o=this.mixinOption.viewCell.getCellElement(n,a.id,c),o.map&&o.map.cellInfo&&o.map.cellInfo.adjustmentValue!=1&&l.push(o.cell);for(s=0,tt=l.length;s<tt;s++)p?g.insertBefore(l[s],p):g.appendChild(l[s])}},moveVerticalTableChildElement:function(n,t,i,r,u){var o=ecount.grid.constValue,b=o.sectionType.thead,k=o.sectionType.tbody,d=o.sectionType.tfoot,s=[],c,y=[],p=this.mixinOption.viewRow.getSectionElement(n),w=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n),f,l,e,a,v,h;if(i==o.crossDirection.up)for(f=w[r.top][r.left].rowId,l=this.mixinOption.viewRow.getRowElement(n,f),u.top==0&&(y=ecount.gridV2.handler.dragTableSingle.getCellSystemColumn.call(this,n,t,f)),c=l[u.top],e=r.bottom,a=r.top;e>=a;e--)v=this.mixinOption.viewRow.getRowElement(n,f,e),s.push(v);else if(i==o.crossDirection.down)for(f=w[r.top][r.left].rowId,l=this.mixinOption.viewRow.getRowElement(n,f),r.top==0&&(y=ecount.gridV2.handler.dragTableSingle.getCellSystemColumn.call(this,n,t,f)),c=l[u.bottom+1],e=r.bottom,a=r.top;e>=a;e--)v=this.mixinOption.viewRow.getRowElement(n,f,e),s.push(v);for(h=s.length-1;h>-1;h--)c?p.insertBefore(s[h],c):p.appendChild(s[h])},moveHorizontalAllData:function(n,t,i,r,u,f){for(var o,d,c,nt,tt,e=ecount.grid.constValue,it=e.sectionType.thead,y=e.sectionType.tbody,p=e.sectionType.tfoot,w=[it,y],v=0,rt=w.length;v<rt;v++){n=w[v];var l=this.mixinOption.dataRow.getAll(n),b={top:u.top,bottom:u.bottom,left:u.left,right:u.right},k={top:f.top,bottom:f.bottom,left:f.left,right:f.right};for(o=0,d=l.length;o<d;o++){var g=[],a=[],ut=l[o],ft=ut[e.rowVariableNames.rowType],h=ft==e.rowType.separate?p:n,s=0,et=this.mixinOption.dataColumn.getAll(h,e.returnType.multi);for(a.push({moveType:t,moveDirection:i,moveMethod:r,fromSectionType:n,fromColumnSectionType:h,fromRowId:l[o][e.keyColumnPropertyName],fromRowIndex:o,fromBoundary:u,toSectionType:n,toColumnSectionType:h,toRowId:l[o][e.keyColumnPropertyName],toRowIndex:o,toBoundary:f}),this.mixinOption.dataRow.moveViewDataRenderingTableMap(i,a),this.mixinOption.dataRow.moveColumn(i,a),c=0,nt=et.length;c<nt;c++)h==p&&(tt=this.mixinOption.dataColumn.getAll(y,e.returnType.multi),s=tt.length,b.top+=s,b.bottom+=s,k.top+=s,k.bottom+=s),g.push({moveType:t,moveDirection:i,moveMethod:r,fromSectionType:n,fromColumnSectionType:h,fromRowIndex:c+s,fromBoundary:u,toSectionType:n,toColumnSectionType:h,toRowIndex:c+s,toBoundary:f});this.mixinOption.dataColumn.move(i,g);this.mixinOption.dataRow.moveViewDataTrMap(i,a)}}},moveData:function(n,t,i,r,u,f,e,o,s,h,c){var k,d,a,b;c=_.isBoolean(c)?c:!0;var l=ecount.grid.constValue,nt=l.sectionType.thead,tt=l.sectionType.tbody,g=l.sectionType.tfoot;var y=[],v=[],p=this.mixinOption.dataRow.getAll(n),it=this.mixinOption.dataColumn.getAll(t||n,l.returnType.multi),w=this.setting.getFormIsAutoMergeSpecialrow(),a=0,b=p.length;for(this.mixinOption.optCommon.columnType==l.columnType.multi&&(k=this.mixinOption.dataRow.getSectionRowIndex(n,t),a=k.startRowIndex,b=k.endRowCount),d=0;a<b;a++)y.push({moveType:r,moveMethod:s,moveDirection:u,fromSectionType:n,fromColumnSectionType:t,fromRowType:i,fromRowId:p[a][l.keyColumnPropertyName],fromRowIndex:a+d,fromBoundary:f,toSectionType:n,toColumnSectionType:t,toRowType:i,toRowId:p[a][l.keyColumnPropertyName],toRowIndex:a+d,toBoundary:e}),v.push({moveType:r,moveMethod:s,moveDirection:u,fromSectionType:n,fromColumnSectionType:t,fromRowType:i,fromRowId:p[a][l.keyColumnPropertyName],fromRowIndex:a,fromBoundary:f,toSectionType:n,toColumnSectionType:t,toRowType:i,toRowId:p[a][l.keyColumnPropertyName],toRowIndex:a,toBoundary:e});for(this.mixinOption.optForm.version==l.formVersion.fourth?this.mixinOption.optCommon.columnType==l.columnType.single&&w?this.mixinOption.dataRow.moveColumn(u,v):(this.mixinOption.dataRow.moveViewDataRenderingTableMap(u,y),this.mixinOption.dataRow.moveColumn(u,v)):this.mixinOption.optForm.version==l.formVersion.third&&(n==g&&this.mixinOption.optCommon.columnType==l.columnType.single&&w?this.mixinOption.dataRow.moveColumn(u,v):(this.mixinOption.dataRow.moveViewDataRenderingTableMap(u,y),this.mixinOption.dataRow.moveColumn(u,v))),y=[],a=o.top,b=o.bottom+1;a<b;a++)y.push({moveType:r,moveMethod:s,moveDirection:u,fromSectionType:n,fromColumnSectionType:t,fromRowType:i,fromRowIndex:a,fromBoundary:f,toSectionType:n,toColumnSectionType:t,toRowType:i,toRowIndex:a,toBoundary:e,isCancelLeftFixed:h});this.mixinOption.dataColumn.move(u,y);[l.crossDirection.left,l.crossDirection.right].contains(u)&&this.mixinOption.optCommon.columnType==l.columnType.multi&&c&&this.mixinOption.dataColumn.syncWidthByBoundary(t||n,o);this.mixinOption.optForm.version==l.formVersion.fourth?this.mixinOption.optCommon.columnType==l.columnType.single&&w||this.mixinOption.dataRow.moveViewDataTrMap(u,v):this.mixinOption.optForm.version==l.formVersion.third&&(n==g&&this.mixinOption.optCommon.columnType==l.columnType.single&&w||this.mixinOption.dataRow.moveViewDataTrMap(u,v))},getHorizontalSelectedBoundary:function(n,t){for(var u,s,r,c,i=ecount.grid.constValue,w=i.sectionType.thead,b=i.sectionType.tbody,l=i.sectionType.tfoot,h=this.mixinOption.dataRow.getAll(n),f,e=0,a=h.length;e<a;e++){var v=h[e],y=v[i.rowVariableNames.rowType],p=y==i.rowType.separate?l:n,o=this.mixinOption.dataColumn.getAll(p,i.returnType.multi);for(u=0,s=o.length;u<s;u++){for(r=0,c=o[u].length;r<c;r++)if(o[u][r].id==t){f={top:0,bottom:s-1,left:r,right:r};break}if(f)break}}return f},getVerticalSelectedBoundary:function(n){for(var t,s,r,h,i=ecount.grid.constValue,p=i.sectionType.thead,w=i.sectionType.tbody,c=i.sectionType.tfoot,o=this.mixinOption.dataRow.getAll(n),u,f=0,l=o.length;f<l;f++){var a=o[f],v=a[i.rowVariableNames.rowType],y=v==i.rowType.separate?c:n,e=this.mixinOption.dataColumn.getAll(y,i.returnType.multi);for(t=0,s=e.length;t<s;t++){for(r=0,h=e[t].length;r<h;r++)if(e[t][r].id==columnId){u={top:t,bottom:t,left:r,right:r};break}if(u)break}}return u},dragStartPrepare:function(n,t){var i=ecount.grid.constValue,b=i.sectionType.thead,nt=i.sectionType.tbody,k=i.sectionType.tfoot,f={result:!0,mouseIconElement:null,startBoundary:{},layoutSize:{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0}},a,v,y=this.mixinOption.viewSelector&&this.mixinOption.viewSelector.getSelectionType(),e,u,s,r,o,p,h,d,l,g,c,w;if((i.checkBoxPropertyNameRex.test(n.gridStartColumnID)||i.rowMoveablePropertyNameRex.test(n.gridStartColumnID)||i.rowNumberingPropertyNameRex.test(n.gridStartColumnID))&&(f.result=!1),this.mixinOption.optForm.version==i.formVersion.third&&this.mixinOption.optCommon.columnType==i.columnType.single&&n.gridStartSectionType!=i.sectionType.thead&&(f.result=!1),f.result){if(e=this.mixinOption.optLayout.container.getBoundingClientRect(),f.layoutSize={x:e.x,y:e.y,top:e.top,left:e.left,width:e.width,height:e.height,right:e.right,bottom:e.bottom},u=n.gridStartSectionType,s=n.gridStartDataKey,y==i.selectionType.allHorizontal)u=b,r=this.core.view.selector.getBoundary().clone(),o=this.mixinOption.dataColumn.getAll(u,i.returnType.multi),p=this.mixinOption.dataRow.getAll(u),s=p[0][i.keyColumnPropertyName];else if(o=this.mixinOption.dataColumn.getAll(u,i.returnType.multi),p=this.mixinOption.dataRow.getAll(u),!r){if(this.mixinOption.optForm.version==i.formVersion.second)for(h=0,d=o.length;h<d;h++){for(l=0,g=o[h].length;l<g;l++)if(o[h][l].id==n.gridStartColumnID){r={top:h,bottom:h,left:l,right:l};break}if(r)break}if(this.mixinOption.optForm.version==i.formVersion.third){if(r=this.core.view.selector.getBoundary().clone(),this.mixinOption.optCommon.columnType==i.columnType.multi){if(c=this.mixinOption.view.getSectionTypeByElement(t.target),c.sectionType==null&&c.detailSectionType==null)return f;f.gridColumnSectionType=n.gridColumnSectionType=c.columnSectionType?c.columnSectionType:n.gridSectionType;n.gridDetailSectionType=c.detailSectionType?c.detailSectionType:n.gridDetailSectionType}this.mixinOption.optCommon.columnType==i.columnType.multi&&n.gridColumnSectionType==k&&(o=this.mixinOption.dataColumn.getAll(n.gridColumnSectionType,i.returnType.multi),w=this.mixinOption.dataColumn.getAll(u,i.returnType.multi),r.top-=w.length,r.bottom-=w.length)}}this.mixinOption.optForm.version==i.formVersion.second?a=ecount.gridV2.handler.dragTableSingle.copyTableV2.call(this,u,n.gridStartColumnID,s,n.gridMoveType,r):this.mixinOption.optForm.version==i.formVersion.third&&(this.mixinOption.optCommon.columnType==i.columnType.single?v=[u]:this.mixinOption.optCommon.columnType==i.columnType.multi&&(v=y==i.selectionType.allHorizontal?[b,nt,k]:[u]),this.mixinOption.optCommon.columnType==i.columnType.single?a=ecount.gridV2.handler.dragTableSingle.copyTableV3.call(this,u,n.gridColumnSectionType,n.gridDetailSectionType,n.gridStartColumnID,s,n.gridMoveType,r,{sectionTypes:v}):this.mixinOption.optCommon.columnType==i.columnType.multi&&(a=y==i.selectionType.allHorizontal?ecount.gridV2.handler.dragTableSingle.copyTableV3Multi.call(this,u,n.gridMoveType,r):ecount.gridV2.handler.dragTableSingle.copyTableV3.call(this,u,n.gridColumnSectionType,n.gridDetailSectionType,n.gridStartColumnID,s,n.gridMoveType,r,{sectionTypes:v})));f.startBoundary=r;f.mouseIconElement=a;this.mixinOption.optCommon.columnType==i.columnType.single?f.startElementPosition=this.mixinOption.viewCell.getSizeByContainer(u,o[r.top][r.left].id,s):this.mixinOption.optCommon.columnType==i.columnType.multi&&(f.startElementPosition=y==i.selectionType.allHorizontal?this.mixinOption.viewCell.getSizeByContainer(u,o[0][r.left].id,s):this.mixinOption.viewCell.getSizeByContainer(u,o[r.top][r.left].id,s));this.mixinOption.viewOverlay&&this.mixinOption.viewOverlay.unbindConatinerEventMousemove()}return f},dragStartFinish:function(){},dragMovePossible:function(n){function c(n,i,u){return i.startRow>-1&&i.endRow>-1&&n.startRow>-1&&n.endRow>-1?u.top==n.startRow&&u.bottom==n.endRow&&t-r!=u.right-u.left+1?{isPossibleHorizontal:!0}:u.top==i.startRow&&u.bottom==i.endRow&&t-r!=u.right-u.left+1?{isPossibleHorizontal:!0}:{isPossibleHorizontal:!1}:{isPossibleHorizontal:o.length==u.bottom-u.top+1&&t-r!=u.right-u.left+1}}function l(n,i,u){return i.startRow>-1&&i.endRow>-1&&n.startRow>-1&&n.endRow>-1?u.top==n.startRow&&u.bottom==n.endRow&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_DIFFERENT_ROWTYPE"}:u.top==i.startRow&&u.bottom==i.endRow&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_DIFFERENT_ROWTYPE"}:n.startRow<=u.top&&n.endRow>=u.bottom&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}:i.startRow<=u.top&&i.endRow>=u.bottom&&t-r==u.right-u.left+1?{isPossibleVertical:!0,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}:{isPossibleVertical:!1,verticalMethod:"NONE"}:{isPossibleVertical:o.length!=u.bottom-u.top+1&&t-r==u.right-u.left+1,verticalMethod:"MOVE_TO_SAME_ROWTYPE"}}var u=ecount.grid.constValue,a=u.sectionType.thead,s=u.sectionType.tbody,h=u.sectionType.tfoot,i={isPossibleVertical:!1,isPossibleHorizontal:!1},e;this.mixinOption.optCommon.columnType==u.columnType.multi&&n.gridColumnSectionType==h&&(e=this.mixinOption.dataColumn.getAll(s,u.returnType.multi),n.gridBoundary.top-=e.length,n.gridBoundary.bottom-=e.length);var o=this.mixinOption.dataColumn.getAll(n.gridColumnSectionType||n.gridSectionType,u.returnType.multi),t=o[0].length,v=t-1,r=this.core.data.column.getSystemColumnCount(n.gridSectionType),f;return f=c(this.mixinOption.dataColumn.__datas[n.gridColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridColumnSectionType+"slip"],n.gridBoundary),i.isPossibleHorizontal=f.isPossibleHorizontal,f=l(this.mixinOption.dataColumn.__datas[n.gridColumnSectionType],this.mixinOption.dataColumn.__datas[n.gridColumnSectionType+"slip"],n.gridBoundary),i.isPossibleVertical=f.isPossibleVertical,i.verticalMethod=f.verticalMethod,i.isPossibleVertical&&i.isPossibleHorizontal&&(i.isPossibleVertical=i.isPossibleHorizontal=!1),i},dragMovePrepare:function(n,t){var r=ecount.grid.constValue,yt=ecount.gridV2.modules.util,it=r.sectionType.thead,ht=r.sectionType.tbody,st=r.sectionType.tfoot,f={result:!0,scrollPosition:{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0},shadowIconElement:null},rt,h,w=this.mixinOption.viewSelector&&this.mixinOption.viewSelector.getSelectionType(),u=n.gridMoveSectionType,y=n.gridColumnSectionType||n.gridMoveSectionType,e=n.gridMoveDataKey,i,o,ct=this.core.data.column.getSystemColumnCount(u),s,ut,ft,d,g,p,a,lt,et,at,c,ot,k,vt,b,l,nt,tt,v;if(this.mixinOption.optForm.version==r.formVersion.third&&(this.mixinOption.optCommon.columnType==r.columnType.single?h=[u]:this.mixinOption.optCommon.columnType==r.columnType.multi&&(h=w==r.selectionType.allHorizontal?[it,ht]:[u])),(r.checkBoxPropertyNameRex.test(n.gridMoveColumnID)||r.rowMoveablePropertyNameRex.test(n.gridMoveColumnID)||r.rowNumberingPropertyNameRex.test(n.gridMoveColumnID))&&(f.result=!1),w==r.selectionType.allHorizontal)u=it,y=it;else if(this.mixinOption.optForm.version==r.formVersion.third)if(this.mixinOption.optCommon.columnType==r.columnType.single)u!=r.sectionType.thead&&(f.result=!1);else if(this.mixinOption.optCommon.columnType==r.columnType.multi){if(p=this.mixinOption.view.getSectionTypeByElement(yt.closest(t.target,/T[DH]/)),p.sectionType==null&&p.detailSectionType==null)return f;f.gridColumnSectionType=n.gridColumnSectionType=y=p.columnSectionType?p.columnSectionType:n.sectionType;n.gridDetailSectionType=p.detailSectionType?p.detailSectionType:n.gridDetailSectionType;(n.gridStartColumnSectionType||n.gridStartSectionType)!=y&&(f.result=!1)}if(f.result){if(w==r.selectionType.allHorizontal){for(s=this.mixinOption.dataColumn.getAll(y,r.returnType.multi),ut=s[0].length,ft=ut-1,d=this.mixinOption.dataRow.getAll(u),e=d[0][r.keyColumnPropertyName],columnIndex=this.mixinOption.dataColumn.getIndexById(n.gridMoveColumnSectionType,r.returnColumnIndexType.multi,n.gridMoveColumnID),i={top:-1,bottom:-1,left:0,right:0},a=0,lt=h.length;a<lt;){for(et=!1,d=this.mixinOption.dataRow.getAll(h[a]),b=this.mixinOption.dataColumn.getAll(h[a],r.returnType.multi),this.core.dragBoundary.mergeBoundary(ecount.gridV2.handler.dragTableSingle.getHorizontalSelectedBoundary.call(this,h[a],b[0][columnIndex].id)),i=this.core.dragBoundary.clone(),i.top=0,i.bottom=b.length-1,at=this.mixinOption.dataRow.getAll(h[a]),c=0,ot=d.length;c<ot;c++){var pt=at[c],wt=pt[r.rowVariableNames.rowType],bt=wt==r.rowType.separate?st:h[a];if(et=this.core.dragBoundary.mergeBoundary(this.mixinOption.dataRow.extendBoundary(h[a],bt,i,Object.clone(i))),i=this.core.dragBoundary.clone(),et)break}et?a=0:a+=1}o={top:i.top,left:i.left,bottom:i.bottom,right:i.right};this.core.dragBoundary.reset()}else{if(s=this.mixinOption.dataColumn.getAll(y,r.returnType.multi),ut=s[0].length,ft=ut-1,d=this.mixinOption.dataRow.getAll(u),!i)for(c=0,ot=s.length;c<ot;c++){for(k=0,vt=s[c].length;k<vt;k++)if(s[c][k].id==n.gridMoveColumnID){g=this.mixinOption.dataColumn.getGroupRowIndexInfo(n.gridStartSectionType,n.gridColumnSectionType||n.gridStartSectionType,n.gridDetailSectionType);i=n.gridMoveType==r.drag.directionMovement.vertical?n.gridMoveMethod=="MOVE_TO_DIFFERENT_ROWTYPE"?{top:g.startRowIndex,bottom:g.endRowIndex,left:ct,right:ft}:this.mixinOption.optForm.version==r.formVersion.fourth?{top:c,bottom:c,left:n.gridStartBoundary.left,right:n.gridStartBoundary.right}:{top:c,bottom:c,left:ct,right:ft}:{top:g.startRowIndex,bottom:g.endRowIndex,left:k,right:k};break}if(i)break}if(this.mixinOption.optCommon.columnType==r.columnType.multi&&n.gridColumnSectionType==st?(b=this.mixinOption.dataColumn.getAll(n.gridColumnSectionType,r.returnType.multi),o={top:i.top+b.length,left:i.left,bottom:i.bottom+b.length-1,right:i.right},i=this.mixinOption.dataRow.extendBoundary(n.gridStartSectionType,n.gridColumnSectionType,o,Object.clone(i))):i=this.mixinOption.dataRow.extendBoundary(n.gridStartSectionType,n.gridColumnSectionType,i,Object.clone(i)),o={top:i.top,left:i.left,bottom:i.bottom,right:i.right},this.mixinOption.optForm.version==r.formVersion.third){l=this.core.view.selector.getBoundary().clone();switch(n.gridMoveType){case r.drag.directionMovement.horizontal:l.left<=i.left&&i.right<=l.right&&(o=l,n.gridMoveDirection="none");break;case r.drag.directionMovement.vertical:l.top<=i.top&&i.bottom<=l.bottom&&l.left<=i.left&&i.right<=l.right?(o=l,n.gridMoveDirection="none"):(i.left=l.left,i.right=l.right)}}}this.mixinOption.optForm.version==r.formVersion.second?rt=ecount.gridV2.handler.dragTableSingle.copyTableV2.call(this,u,n.gridMoveColumnID,e,n.gridMoveType,o):this.mixinOption.optForm.version==r.formVersion.third&&(this.mixinOption.optCommon.columnType==r.columnType.single?h=[u]:this.mixinOption.optCommon.columnType==r.columnType.multi&&(h=w==r.selectionType.allHorizontal?[it,ht,st]:[u]),this.mixinOption.optCommon.columnType==r.columnType.single?rt=ecount.gridV2.handler.dragTableSingle.copyTableV3.call(this,u,n.gridColumnSectionType,n.gridDetailSectionType,n.gridMoveColumnID,e,n.gridMoveType,o,{sectionTypes:h}):this.mixinOption.optCommon.columnType==r.columnType.multi&&(rt=w==r.selectionType.allHorizontal?ecount.gridV2.handler.dragTableSingle.copyTableV3Multi.call(this,u,n.gridMoveType,o):ecount.gridV2.handler.dragTableSingle.copyTableV3.call(this,u,n.gridColumnSectionType,n.gridDetailSectionType,n.gridMoveColumnID,e,n.gridMoveType,o,{sectionTypes:h})));f.boundary=i;f.shadowIconElement=rt;this.mixinOption.optCommon.columnType==r.columnType.single?f.startElementPosition=this.mixinOption.viewCell.getSizeByContainer(u,s[i.top][i.left].id,e):this.mixinOption.optCommon.columnType==r.columnType.multi&&(f.startElementPosition=w==r.selectionType.allHorizontal?this.mixinOption.viewCell.getSizeByContainer(u,s[0][i.left].id,e):o.left<=i.left&&i.right<=o.right?this.mixinOption.viewCell.getSizeByContainer(u,s[i.top][o.left].id,e):this.mixinOption.viewCell.getSizeByContainer(u,s[i.top][i.left].id,e));n.gridMoveDirection==r.crossDirection.left?(nt=this.mixinOption.dataColumn.getPrevColumnId(y,n.gridMoveColumnID,e),nt&&(v=this.mixinOption.viewCell.getCellElement(u,nt,e),[ecount.grid.constValue.checkBoxPropertyName,ecount.grid.constValue.rowMoveablePropertyName,ecount.grid.constValue.rowNumberingPropertyName].contains(nt)||v.map.cellInfo.adjustmentValue!=1&&(f.scrollElement=v.cell,f.scrollPosition=this.mixinOption.viewCell.getSizeByScreen(u,nt,e),f.scrollPosition.left=f.scrollPosition.x=Math.floor(f.scrollPosition.left/2)))):n.gridMoveDirection==r.crossDirection.right?(tt=this.mixinOption.dataColumn.getNextColumnId(y,n.gridMoveColumnID,e),tt&&(v=this.mixinOption.viewCell.getCellElement(u,tt,e),[ecount.grid.constValue.checkBoxPropertyName,ecount.grid.constValue.rowMoveablePropertyName,ecount.grid.constValue.rowNumberingPropertyName].contains(tt)||v.map.cellInfo.adjustmentValue!=1&&(f.scrollElement=v.cell,f.scrollPosition=this.mixinOption.viewCell.getSizeByScreen(u,tt,e),f.scrollPosition.left=f.scrollPosition.x=Math.floor(f.scrollPosition.left/2)))):n.gridMoveDirection==r.crossDirection.none?(v=o.left<=i.left&&i.right<=o.right?this.mixinOption.viewCell.getCellElement(u,s[0][o.left].id,e):this.mixinOption.viewCell.getCellElement(u,s[0][i.left].id,e),f.cellElement=v.cell):[r.crossDirection.up,r.crossDirection.down].contains(n.gridMoveDirection)&&(v=this.mixinOption.viewCell.getCellElement(u,s[i.top][i.left].id,e),f.cellElement=v.cell)}return f},dragMoveFinish:function(){},dragEndPrepare:function(n){var i={result:!1,sectionType:n.gridStartSectionType,boundary:{top:-1,left:-1,bottom:-1,right:-1},cells:[]},o,f;if(!n.gridStartBoundary||!n.gridMoveBoundary)return i;var r=ecount.grid.constValue,s=r.sectionType.thead,h=r.sectionType.tbody,a=r.sectionType.tfoot,c=this.setting.eventsGet(),t=!1,u=this.mixinOption.dataColumn.getAll(s,r.returnType.multi),l=u[0].length,v=l-1,e=-1;return n.gridStartSectionType==s&&(e=ecount.gridV2.handler.dragTableSingle.getLeftFixedIndex.call(this,u,{top:0,left:0,bottom:u.length-1,right:u[0].length-1})),e>-1&&(t=ecount.gridV2.handler.dragTableSingle.isCollideLeftFixed.call(this,{right:n.gridMoveBoundary.right+e}),t||(o=[],this.mixinOption.dataRow.addTotalMergeSet(h,h,null,o),t=ecount.gridV2.util.isCollideLeftFixed(o,n.gridStartBoundary,n.gridMoveBoundary,u,l))),f=c&&c._triggerEvent(ecount.grid.event.list.formSetDragPrepareComplete,null,{isCollideLeftFixed:t,callback:n.fn})||{result:!0,isCancelLeftFixed:t},n.gridMoveType==r.selectionType.allHorizontal||(i.cells=ecount.gridV2.handler.dragTableSingle.getCellByBoundary.call(this,n.gridStartSectionType,n.gridStartColumnSectionType,n.gridMoveSectionType,n.gridStartDataKey,n.gridMoveDataKey,n.gridStartBoundary)),i.isCancelLeftFixed=typeof f.isCancelLeftFixed=="boolean"?f.isCancelLeftFixed:t,i.result=f.result,i},getLeftFixedCount:function(n,t){for(var r,e,f=0,i=!1,u=t.left,o=t.right;u<=o;u++){for(r=t.top,e=t.bottom;r<=e;r++)if(i===!1&&ecount.common.isTrue(n[r][u].LEFT_FIXD_STND_TF)){i=!0;break}if(f+=1,i)break}return i?f:0},getLeftFixedIndex:function(n,t){for(var r,e,f=0,i=!1,u=t.left,o=t.right;u<=o;u++){for(r=t.top,e=t.bottom;r<=e;r++)if(i===!1&&ecount.common.isTrue(n[r][u].LEFT_FIXD_STND_TF)){i=!0;break}if(i)break;f+=1}return i?f:-1},isCollideLeftFixed:function(n){for(var e,i,a,v,o,r,y,u=!1,t=ecount.grid.constValue,h=t.sectionType.thead,w=t.sectionType.tbody,nt=t.sectionType.tfoot,b=this.mixinOption.dataColumn.getAll(h,t.returnType.multi),c=b[0].length,tt=c-1,l=[h,w],f=0,k=l.length;f<k;f++)for(e=this.mixinOption.dataRow.getAll(l[f]),i=0,a=e.length;i<a;i++)for(v=e[i],o=v[t.rowVariableNames.mergeSet]||[],r=0,y=o.length;r<y;r++){var s=o[r],p=s[t.rowVariableNames.mergeStartIndex]%c,d=s[t.rowVariableNames.colspanCount]||1,it=s[t.rowVariableNames.rowspanCount]||1,g=d-1;p<=n.right&&p+g>n.right&&(u=!0)}return!u,u},getCellByBoundary:function(n,t,i,r,u,f){var o=[],e=ecount.grid.constValue,h=e.sectionType.thead,c=e.sectionType.tbody,l=e.sectionType.tfoot,s=this.mixinOption.dataColumn.getAll(t||n,e.returnType.multi);return o.push(this.mixinOption.viewCell.getCellOriginalElement(n,s[f.top][f.left].id,r).cell),o.push(this.mixinOption.viewCell.getCellOriginalElement(i,s[f.bottom][f.right].id,u).cell),o},dragEndFinish:function(n){function tt(){var i=t.crossDirection.none;return[t.drag.directionMovement.horizontal,t.drag.directionMovement.allHorizontal].contains(n.gridMoveType)?n.gridMoveDirection==t.crossDirection.right?i=t.crossDirection.right:n.gridMoveDirection==t.crossDirection.left&&(i=t.crossDirection.left):n.gridMoveType==t.drag.directionMovement.vertical&&(n.gridMoveDirection==t.crossDirection.up?i=t.crossDirection.up:n.gridMoveDirection==t.crossDirection.down&&(i=t.crossDirection.down)),i}var t=ecount.grid.constValue,e=t.sectionType.thead,p=t.sectionType.tbody,d=t.sectionType.tfoot,o=[e,p,d],v=this.mixinOption.view.selector&&this.mixinOption.view.selector.getStartColumnSectionType(),s=this.mixinOption.viewSelector&&this.mixinOption.viewSelector.getSelectionType()||t.selectionType.normal,u={result:!1,sectionType:n.gridStartSectionType,boundary:{top:-1,left:-1,bottom:-1,right:-1},cells:[]},w=this.mixinOption.dataColumn.getLeftFixed(e),c,f,l,y,it,a,b,k,r,h;if([t.selectionType.normal,t.selectionType.allVertical].contains(s)){if(this.mixinOption.optForm.version==t.formVersion.third&&n.gridStartSectionType!=n.gridMoveSectionType)return u;this.mixinOption.optCommon.columnType==t.columnType.multi&&(o=[n.gridStartSectionType])}else s==t.selectionType.allHorizontal&&(o=[e,p]);var g=this.mixinOption.dataRow.getViewDataTableMapAll(e),nt=Object.keys(g),i=this.mixinOption.viewTable.getColgroupElement(e,nt[0]);if([t.drag.directionMovement.horizontal,t.drag.directionMovement.allHorizontal].contains(n.gridMoveType)){if(n.gridMoveDirection==t.crossDirection.left){for(r=n.gridStartBoundary.right,h=n.gridStartBoundary.left;r>=h;r--)i.children[n.gridMoveBoundary.left]?i.insertBefore(i.children[n.gridStartBoundary.right],i.children[n.gridMoveBoundary.left]):i.appendChild(i.children[n.gridStartBoundary.right]);u.boundary={left:n.gridMoveBoundary.left,right:n.gridMoveBoundary.left+n.gridStartBoundary.right-n.gridStartBoundary.left,top:n.gridStartBoundary.top,bottom:n.gridStartBoundary.bottom}}else if(n.gridMoveDirection==t.crossDirection.right){for(r=n.gridStartBoundary.left,h=n.gridStartBoundary.right;r<=h;r++)i.children[n.gridMoveBoundary.right+1]?i.insertBefore(i.children[n.gridStartBoundary.left],i.children[n.gridMoveBoundary.right+1]):i.appendChild(i.children[n.gridStartBoundary.left]);u.boundary={left:n.gridMoveBoundary.right-(n.gridStartBoundary.right-n.gridStartBoundary.left),right:n.gridMoveBoundary.right,top:n.gridStartBoundary.top,bottom:n.gridStartBoundary.bottom}}}else n.gridMoveType==t.drag.directionMovement.vertical&&(n.gridMoveDirection==t.crossDirection.up?u.boundary={left:n.gridStartBoundary.left,right:n.gridStartBoundary.right,top:n.gridMoveBoundary.top,bottom:n.gridMoveBoundary.top+(n.gridStartBoundary.bottom-n.gridStartBoundary.top)}:n.gridMoveDirection==t.crossDirection.down&&(u.boundary={left:n.gridStartBoundary.left,right:n.gridStartBoundary.right,top:n.gridMoveBoundary.bottom+1-(n.gridStartBoundary.bottom-n.gridStartBoundary.top+1),bottom:n.gridMoveBoundary.bottom}));if(c=tt(),s==t.selectionType.allHorizontal)ecount.gridV2.handler.dragTableSingle.moveHorizontalTableAllChildElement.call(this,n.gridStartSectionType,c,n.gridStartBoundary,n.gridMoveBoundary);else if([t.selectionType.allVertical,t.selectionType.normal].contains(s))for(f=0,l=o.length;f<l;f++)n.gridMoveType==t.drag.directionMovement.horizontal?ecount.gridV2.handler.dragTableSingle.moveHorizontalTableChildElement.call(this,o[f],v,c,n.gridStartBoundary,n.gridMoveBoundary):n.gridMoveType==t.drag.directionMovement.vertical&&ecount.gridV2.handler.dragTableSingle.moveVerticalTableChildElement.call(this,o[f],v,c,n.gridStartBoundary,n.gridMoveBoundary);if(s==t.selectionType.allHorizontal)ecount.gridV2.handler.dragTableSingle.moveHorizontalAllData.call(this,n.gridStartSectionType,n.gridMoveType,c,n.gridMoveMethod,n.gridStartBoundary,n.gridMoveBoundary);else if([t.selectionType.allVertical,t.selectionType.normal].contains(s)){for(f=0,l=o.length;f<l;f++)ecount.gridV2.handler.dragTableSingle.moveData.call(this,o[f],v,this.mixinOption.viewSelector.__datas.startRowType,n.gridMoveType,c,n.gridStartBoundary,n.gridMoveBoundary,null,n.isCancelLeftFixed);if(n.isCancelLeftFixed)for(y=this.mixinOption.dataRow.getAll(e),it=this.mixinOption.dataColumn.getAll(e,t.returnType.multi),a=0,b=y.length;a<b;a++)for(k=y[a],r=0,h=w.length;r<h;r++)this.core.fn.refreshCell(e,w[r].id,k[t.keyColumnPropertyName],{isRunChange:!1})}return s==t.selectionType.allHorizontal||(u.cells=ecount.gridV2.handler.dragTableSingle.getCellByBoundary.call(this,n.gridStartSectionType,n.gridStartColumnSectionType,n.gridMoveSectionType,n.gridStartDataKey,n.gridMoveDataKey,u.boundary)),u.result=!0,u},dragEndCompleted:function(){this.mixinOption.viewOverlay&&this.mixinOption.viewOverlay.bindConatinerEventMousemove();this.core.state="none"},getColumnSectionType:function(n){var t=ecount.grid.constValue,f=t.sectionType.thead,e=t.sectionType.tbody,i=t.sectionType.tfoot,r=this.mixinOption.dataRow.getById(n.gridSectionType,n.gridDataKey),u=r[t.rowVariableNames.rowType];return u==t.rowType.separate?i:n.gridSectionType},getSelectedBoundaryInfos:function(){var n={thead:[{sectionType:null,columnSectionType:null,detailSectionType:null,boundary:{top:-1,left:-1,bottom:-1,right:-1}}],tbody:[{sectionType:null,columnSectionType:null,detailSectionType:null,boundary:{top:-1,left:-1,bottom:-1,right:-1}}],tfoot:[{sectionType:null,columnSectionType:null,detailSectionType:null,boundary:{top:-1,left:-1,bottom:-1,right:-1}}]},i,t;return this.mixinOption.viewSelector&&(n=this.core.fn.getRangeInformationsOfSelectedArea({returnType:"array"}),i=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(n[0].sectionType),t=i[n[0].boundary.top][n[0].boundary.left],n[0].columnId=t.columnId,n[0].rowId=t.rowId),n}};ecount.gridV2.handler.dragTableTree={copyTableV2:function(){},copyTableV3:function(){},dragStartPrepare:function(n,t){var s=ecount.grid.constValue,h=ecount.gridV2.constEvent,e=this.setting.eventsGet(),r=this.core.fn.getCheckedKeyList(),o=r.length+(r.contains(n.gridDataKey)?0:1),i=e._triggerEvent(ecount.grid.event.list.preInitDrag,null,{sectionType:n.gridSectionType,rowId:n.gridDataKey,columnId:n.gridColumnID}),u,f;return(i||(i={result:!0}),!i.result)?{result:!1}:(u=$("<div class='list-draggable-helper mail' style='display: block;'><span class='badge'>"+o+"<\/span><\/div>"),f={result:!0,element:u[0],layoutSize:this.mixinOption.optLayout.container.getBoundingClientRect(),startElementPosition:{top:t.pageY-20,left:t.pageX+10,bottom:t.pageY-19,right:t.pageX+10+1,y:t.pageY-20,x:t.pageX+10,height:1,width:1}},f)},dragStartFinish:function(){},dragMovePrepare:function(n){var i=ecount.grid.constValue,u={result:!0,scrollPosition:{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0},element:null},t,r,c,f,s,e,h,o;if((i.checkBoxPropertyNameRex.test(n.gridMoveColumnID)||i.rowMoveablePropertyNameRex.test(n.gridMoveColumnID)||i.rowNumberingPropertyNameRex.test(n.gridMoveColumnID))&&(u.result=!1),this.mixinOption.optForm.version==i.formVersion.third&&this.mixinOption.optCommon.columnType==i.columnType.single&&n.gridMoveSectionType!=i.sectionType.thead&&(u.result=!1),u.result){if(r=this.mixinOption.dataColumn.getAll(n.gridMoveSectionType,i.returnType.multi),c=this.mixinOption.dataRow.getAll(n.gridMoveSectionType),!t)switch(this.mixinOption.optDrag.direction){case"horizontal":for(f=0,s=r.length;f<s;f++){for(e=0,h=r[f].length;e<h;e++)if(r[f][e].id==n.gridMoveColumnID){t={top:f,bottom:f,left:e,right:e};break}if(t)break}break;case"vertical":o=this.mixinOption.dataRow.getViewDataTrMap(n.gridMoveSectionType,n.gridMoveDataKey);t={top:o.rowInfo.trIdx[0],bottom:o.rowInfo.trIdx[o.rowInfo.trIdx.length-1],left:0,right:r[0].length-1};break;case"all":this.mixinOption.optForm.version==i.formVersion.third&&(t=this.core.view.selector.getBoundary())}u.boundary=t;["horizontal","all"].contains(this.mixinOption.optDrag.direction)?u.startElementPosition=this.mixinOption.viewCell.getSizeByContainer(n.gridMoveSectionType,r[t.top][t.left].id,n.gridMoveDataKey):this.mixinOption.optDrag.direction=="vertical"&&(u.startElementPosition=this.mixinOption.viewCell.getSizeByContainer(n.gridMoveSectionType,r[t.top%r.length][t.left].id,n.gridMoveDataKey))}return u},dragBeforeMovingStart:function(n){var r=ecount.grid.constValue,t=ecount.gridV2.constEvent,i=this.setting.eventsGet(),u=i._triggerEvent(t.drag.beforeMovingStart,null,{startSectionType:n.gridStartSectionType,startRowId:n.gridStartDataKey,startColumnId:n.gridStartColumnId,moveSectionType:n.gridMoveSectionType,moveRowId:n.gridMoveDataKey,moveColumnId:n.gridMoveColumnId})},dragMoveFinish:function(){},dragEndPrepare:function(){},dragEndFinish:function(n){var u=ecount.grid.constValue,lt=ecount.gridV2.constEvent,rt=this.setting.eventsGet(),c=rt._triggerEvent(ecount.grid.event.list.dragEndPreInit,null,{startSectionType:n.gridStartSectionType,startRowId:n.gridStartDataKey,startColumnId:n.gridStartColumnId,endSectionType:n.gridMoveSectionType,endRowId:n.gridMoveDataKey,endColumnId:n.gridMoveColumnId}),k,a,v,ut,g,w,e,nt,tt,o,ct,ot,it,b,l,ht;if(c||(c={result:!0}),c.result&&["up","down"].contains(n.gridMoveDirection))for(k=c.moveTargetItems||[],a=[],v=0,ut=k.length;v<ut;v++){var t=k[v],y=n.gridMoveDataKey,ft=!1,et=!1,p,d;if(this.mixinOption.optCommon.gridStyle=="tree"&&(ft=this.core.fn.isParent(n.gridMoveSectionType,n.gridMoveDataKey),ft&&(et=this.core.fn.hasChildRow(n.gridMoveDataKey),et&&(p=this.mixinOption.dataRow.getById(n.gridMoveSectionType,n.gridMoveDataKey),d=p[u.tree.set],g=this.core.fn.getChildRowList(n.gridMoveDataKey),y=g[g.length-1]))),w=this.mixinOption.viewRow.getSectionElement(n.gridMoveSectionType,y),e=this.mixinOption.dataRow.getNextRow(n.gridMoveSectionType,y),e&&e[u.keyColumnPropertyName]==t.rowId&&(e=this.mixinOption.dataRow.getNextRow(n.gridMoveSectionType,t.rowId)),nt=this.mixinOption.dataColumn.getAll(n.gridMoveSectionType,u.returnType.multi),tt=e&&this.mixinOption.viewRow.getRowElement(n.gridMoveSectionType,e[u.keyColumnPropertyName],nt.length-1),this.mixinOption.optCommon.gridStyle=="tree"&&(o=this.core.fn.getParentKey(t.sectionType,t.rowId),ct=this.core.fn.getParentKey(n.gridMoveSectionType,n.gridMoveDataKey),a.indexOf(o)==-1&&o!="0000"&&a.push(o)),this.mixinOption.optCommon.gridStyle!="tree"||!o||o!=n.gridMoveDataKey){this.mixinOption.optCommon.gridStyle=="tree"&&(o&&this.mixinOption.dataTree.removeChild(o,t.rowId),this.mixinOption.dataTree.addChild(n.gridMoveDataKey,t.rowId),this.mixinOption.dataTree.removeRootNode(t.rowId));ot=this.mixinOption.dataRow.getById(t.sectionType,t.rowId);this.mixinOption.optCommon.gridStyle=="tree"&&(it=ot[u.tree.set],it[u.tree.parentId]=p&&p[u.keyColumnPropertyName]||null,it[u.tree.depth]=d&&d[u.tree.depth]+1||0);this.mixinOption.viewRow.remove(t.sectionType,t.rowId);var s,h,r,i=this.mixinOption.dataRow.getIndexById(t.sectionType,t.rowId),f=this.mixinOption.dataRow.getIndexById(t.sectionType,y),st=i>f?"up":i<f?"down":"none";if(st=="down"?(s=this.mixinOption.dataRow.getAll(t.sectionType),h=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(t.sectionType),r=s.splice(i+1,f-i),r.splice(0,0,i,0),s.splice.apply(s,r),r=h.splice(i+1,f-i),r.splice(0,0,i,0),h.splice.apply(h,r),this.mixinOption.dataRow.moveTableMap(t.sectionType,i,f)):st=="up"&&(s=this.mixinOption.dataRow.getAll(t.sectionType),h=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(t.sectionType),f=e&&this.mixinOption.dataRow.getIndexById(t.sectionType,e[u.keyColumnPropertyName]),f&&i+1!=f&&(r=s.splice(i,1),r.splice(0,0,f,0),s.splice.apply(s,r),r=h.splice(i,1),r.splice(0,0,f,0),h.splice.apply(h,r),this.mixinOption.dataRow.moveTableMap(t.sectionType,i,f))),c=this.mixinOption.dataRow.renderAddGroupRows(t.sectionType,t.rowId,0,nt.length,u.renderMode.replace),b=$(c.resultHTML),w)for(l=0,ht=b.length;l<ht;l++)tt?w.insertBefore(b[l],tt):w.appendChild(b[l])}}c=rt._triggerEvent(ecount.grid.event.list.dragEndCompleted,null,{startSectionType:n.gridStartSectionType,startRowId:n.gridStartDataKey,startColumnId:n.gridStartColumnId,endSectionType:n.gridMoveSectionType,endRowId:n.gridMoveDataKey,endColumnId:n.gridMoveColumnId,moveTargetParentKey:a})},dragMovePossible:function(n){constValue=ecount.grid.constValue;var t={isPossibleVertical:!1,isPossibleHorizontal:!1},r=this.mixinOption.dataColumn.getAll(n.gridSectionType,constValue.returnType.multi),u=r[0].length,i=0;return this.mixinOption.optCheckbox[n.gridSectionType]&&this.mixinOption.optCheckbox[n.gridSectionType].items&&this.mixinOption.optCheckbox[n.gridSectionType].items[constValue.checkBoxPropertyName]&&this.mixinOption.optCheckbox[n.gridSectionType].items[constValue.checkBoxPropertyName].use&&(i+=1),this.mixinOption.optRowmoveable.use&&(i+=1),this.mixinOption.optNumbering.use&&(i+=1),t.isPossibleHorizontal=r.length==n.gridBoundary.bottom-n.gridBoundary.top+1&&u-i!=n.gridBoundary.right-n.gridBoundary.left+1,t.isPossibleVertical=r.length!=n.gridBoundary.bottom-n.gridBoundary.top+1&&u-i==n.gridBoundary.right-n.gridBoundary.left+1,t.isPossibleVertical&&t.isPossibleHorizontal&&(t.isPossibleVertical=t.isPossibleHorizontal=!1),t}};ecount.gridV2.handler.txDropdownmenu={mousemove:function(n,t){function f(t){var i=[s,c,this.__core.dropdownmenu.activeSectionType,this.__core.dropdownmenu.activeColumnId,this.__core.dropdownmenu.activeRowId].join(ecount.separator.ecPath);if(n.hasOwnerKey){this.__core.dropdownmenu.setTimeoutId&&ecount.global.clearTimeoutByTimerNo(s,this.__core.dropdownmenu.setTimeoutId);this.__core.dropdownmenu.setTimeoutId=null;delete this.__core.dropdownmenu[i];t&&t();return}this.__core.dropdownmenu.setTimeoutId=ecount.global.setTimeout(s,function(){ecount.layer.hide(i);delete this.__core.dropdownmenu[i];this.__core.dropdownmenu.setTimeoutId=null;t&&t()}.bind(this),0);this.__core.dropdownmenu.activeSectionType=null;this.__core.dropdownmenu.activeColumnId=null;this.__core.dropdownmenu.activeRowId=null}function l(){var tt=this.mixinOption.dataRow.getByIndex(h,0),p=this.mixinOption.viewCell.getCellElement(h,r,tt[u.keyColumnPropertyName]),it=this.mixinOption.dataRow.getByIndex(a,0),k=this.mixinOption.viewCell.getCellElement(a,r,it[u.keyColumnPropertyName]),e=[s,c,i,r,o].join(ecount.separator.ecPath),w,b,d,g,n,l,t,f,nt;if(p.map&&p.map.cellInfo&&p.map.cellInfo.adjustmentValue!=1&&(!this.__core.dropdownmenu[e]||this.__core.dropdownmenu[e]!=e)){if(w=[],d=null,i==h&&this.mixinOption.optDrag.isShowTitleSetupDragable){for(n=0,l=this.mixinOption.optDrag.titleSetupMenu.length;n<l;n++){t=this.mixinOption.optDrag.titleSetupMenu[n];for(f in t)t.hasOwnProperty(f)&&w.push({label:t[f],value:f})}d="top";b=ec$.getZoomedBoundary(p.cell)}else if(i==v&&this.mixinOption.optDrag.isShowTotalSetupDragable){for(n=0,l=this.mixinOption.optDrag.totalSetupMenu.length;n<l;n++){t=this.mixinOption.optDrag.totalSetupMenu[n];for(f in t)t.hasOwnProperty(f)&&w.push({label:t[f],value:f})}g=this.mixinOption.viewCell.getCellElement(i,r,o);b=ec$.getZoomedBoundary(g.cell)}else if(k.map.cellInfo.dropdownmenuData){for(n=0,l=k.map.cellInfo.dropdownmenuData.length;n<l;n++){t=k.map.cellInfo.dropdownmenuData[n];for(f in t)t.hasOwnProperty(f)&&w.push({label:t[f],value:f})}b=ec$.getZoomedBoundary(p.cell)}if(!b)return;nt={type:"dropdown",ownerKey:y,serviceKey:e,ecPageID:s,gridID:c,popupID:this.mixinOption.optCommon.popupId,popupLevel:this.mixinOption.optCommon.popupLevel,popupType:this.mixinOption.optCommon.popupType,boundary:b,_forcedDisplayPosition:d,showingUpDelay:0,items:w};ecount.layer.show(nt);this.__core.dropdownmenu[e]=e;this.__core.dropdownmenu.activeSectionType=i;this.__core.dropdownmenu.activeColumnId=r;this.__core.dropdownmenu.activeRowId=o}}var e;n=n||{};t&&(e=t.target,$target=$(e));e&&(n=_.merge(ec$.parseElement(e),ec$.parseGridElement(e)),n.hasOwnerKey=$target.closest("[data-ownerkey='"+y+"']").length>0);var u=ecount.grid.constValue,h=u.sectionType.thead,a=u.sectionType.tbody,v=u.sectionType.tfoot,i=n.gridSectionType,r=n.gridColumnID,o=n.gridDataKey,s=this.mixinOption.optCommon.ecPageId,c=this.mixinOption.optCommon.ecGridId,y=this.mixinOption.optCommon.ecIKey;if(h==i&&this.optDrag.titleSetupMenu&&this.optDrag.titleSetupMenu.length==0){this.__core.dropdownmenu.activeSectionType&&this.__core.dropdownmenu.activeColumnId&&this.__core.dropdownmenu.activeRowId&&f.call(this);return}if(v==i&&this.optDrag.totalSetupMenu&&this.optDrag.totalSetupMenu.length==0){this.__core.dropdownmenu.activeSectionType&&this.__core.dropdownmenu.activeColumnId&&this.__core.dropdownmenu.activeRowId&&f.call(this);return}this.__core.state!="none"?f.call(this):[u.checkBoxPropertyName,u.rowMoveablePropertyName,u.rowNumberingPropertyName].contains(r)?f.call(this):this.__core.dropdownmenu.activeSectionType&&this.__core.dropdownmenu.activeColumnId&&this.__core.dropdownmenu.activeRowId?i&&r&&o?this.__core.dropdownmenu.activeSectionType!=i?f.call(this,l.bind(this)):this.__core.dropdownmenu.activeColumnId!=r&&f.call(this,l.bind(this)):f.call(this):i&&r&&o?l.call(this):f.call(this)},mouseleave:function(){}};ecount.gridV2.handler.txDropdownmenuV3={mouseup:function(n){var i=ecount.grid.constValue,nt=i.sectionType.thead,ft=i.sectionType.tbody,tt=i.sectionType.tfoot,s=n.target,t,e,it,c,et,ot,ut,d,at,vt,w,yt,h,k,a,v,y,bt;if(this.mixinOption.viewSelector.__datas.selectionType==i.selector.selectionType.allHorizontal)s=ecount.gridV2.modules.util.findParentElementByTagName(s,/T(D|H)/g),it=ecount.gridV2.modules.util.findParentElementByTagName(s,/T(HEAD|BODY|FOOT)/g),t=it&&it.tagName.toLowerCase(),c=s.getAttribute("data-key"),t==ft&&(et=this.mixinOption.dataRow.getById(t,c),ot=et[i.rowVariableNames.rowType],e=ot==i.rowType.separate?tt:t);else{if(s=null,![i.selector.state.mousedown,i.selector.state.mousemove,i.selector.state.dragable].contains(this.mixinOption.viewSelector.__datas.state))return;t=this.mixinOption.viewSelector.getStartSectionType();e=this.mixinOption.viewSelector.getStartColumnSectionType()}var st=n.clientX,ht=n.clientY,kt=this.mixinOption.optLayout.scrollContainer&&this.mixinOption.optLayout.scrollContainer.scrollTop||0,dt=this.mixinOption.optLayout.scrollContainer&&this.mixinOption.optLayout.scrollContainer.scrollLeft||0,ct=kt*(2-ecount.common.getZoomRatio()),lt=dt*(2-ecount.common.getZoomRatio()),gt={screenPositionX:Math.abs(st+lt),screenPositionY:Math.abs(ht+ct),screenPositionLeft:Math.abs(st+lt),screenPositionTop:Math.abs(ht+ct)},u=this.mixinOption.viewSelector.getBoundary().clone(),o=this.mixinOption.viewSelector.getSelectionType(),b=this.mixinOption.dataRow.getAll(t),l=this.mixinOption.dataColumn.getAll(e||t,i.returnType.multi),rt=l[0].length,fi=rt-1,p,c,r,ni;for(this.mixinOption.optCommon.columnType==i.columnType.multi&&[i.selector.selectionType.normal,i.selector.selectionType.allVertical].contains(o)&&e==tt&&(ut=this.mixinOption.dataColumn.getAll(ft,i.returnType.multi),u.top-=ut.length,u.bottom-=ut.length),h=0,k=b.length;h<k;h++){for(d=u.top,at=u.bottom;d<=at;d++){for(a=u.left,vt=u.right;a<=vt;a++)if(v=this.mixinOption.viewCell.getCellElement(t,l[d][a].id,b[h][i.keyColumnPropertyName]),v.map&&v.map.cellInfo&&v.map.cellInfo.adjustmentValue!=1&&ecount.gridV2.view.util.isRectangleInnerPointByElement(v.cell,gt)){s=v.cell;break}if(s)break}if(s)break}if(s){if(w=_.merge(ec$.parseElement(s),ec$.parseGridElement(s)),[i.checkBoxPropertyName,i.rowMoveablePropertyName,i.rowNumberingPropertyName].contains(w.gridColumnID))return;t!=w.gridSectionType?(r=this.mixinOption.viewCell.getSizeByScreen(t,l[l.length-1][u.right].id,b[b.length-1][i.keyColumnPropertyName]),r.left+=r.width-10<0?0:r.width-10,r.right=r.left+1,r.top-=r.height-6<0?0:6,r.bottom=r.top+1):(t=w.gridSectionType,p=w.gridColumnID,c=w.gridDataKey,r={top:n.pageY*ecount.common.getZoomRatio(),bottom:n.pageY*ecount.common.getZoomRatio()+1,left:n.pageX*ecount.common.getZoomRatio(),right:n.pageX*ecount.common.getZoomRatio()+1})}else{for(h=0,this.mixinOption.optCommon.columnType==i.columnType.multi&&e==tt&&(yt=this.mixinOption.dataRow.getSectionRowIndex(t,e),h=yt.startRowIndex),c=b[h][i.keyColumnPropertyName],h=u.bottom,k=u.top;h>=k;h--)for(a=u.right;a>=u.left;a--)if(p=l[h][a].id,v=this.mixinOption.dataRow.getViewDataCellMap(t,p,c),v.cellInfo.adjustmentValue!=1)break;r=this.mixinOption.viewCell.getSizeByScreen(t,p,c);r.left+=r.width-10<0?0:r.width-10;r.right=r.left+1;r.top-=r.height-6<0?0:6;r.bottom=r.top+1;this.mixinOption.optLayout.scrollContainer&&(r.left-=this.mixinOption.optLayout.scrollContainer.scrollLeft,r.top-=this.mixinOption.optLayout.scrollContainer.scrollTop)}var g=this.mixinOption.optLayout.$layer[0],pt=g.offsetTop,wt=g.offsetLeft,ti=g.offsetWidth,ii=g.offsetHeight;if(wt<=r.left&&r.left<=wt+ti&&pt<=r.top&&r.top<=pt+ii){this.keys||(this.keys={});var ri=this.mixinOption.optCommon.ecPageId,ui=this.mixinOption.optCommon.ecGridId,ei=[ri,ui,t,p,c].join(ecount.separator.ecPath),f=this.mixinOption.optContextmenu.itemList[t]&&this.mixinOption.optContextmenu.itemList[t].slice(),b=this.mixinOption.dataRow.getAll(t);this.mixinOption.optCommon.gridType==i.gridType.editableForm&&(this.mixinOption.optCommon.columnType==i.columnType.single&&t==nt?(l.length-1==u.bottom-u.top&&f.remove(function(n){return n.value=="removeRow"}),rt==1&&f.remove(function(n){return n.value=="removeColumn"}),this.mixinOption.dataColumn.isPossibleMergeBoundary(e||t,u,o)||f.remove(function(n){return n.value=="merge"}),this.mixinOption.dataColumn.isPossibleDivideBoundary(e||t,u,o)||f.remove(function(n){return n.value=="divide"})):this.mixinOption.optCommon.columnType==i.columnType.multi&&o=="normal"?(t==nt&&f.remove(function(n){return n.value=="add"}),l.length-1==u.bottom-u.top&&f.remove(function(n){return n.value=="removeRow"}),rt==1&&f.remove(function(n){return n.value=="removeColumn"}),this.mixinOption.dataColumn.isPossibleMergeBoundary(e||t,u,o)||f.remove(function(n){return n.value=="merge"}),this.mixinOption.dataColumn.isPossibleDivideBoundary(e||t,u,o)||f.remove(function(n){return n.value=="divide"})):this.mixinOption.optCommon.columnType==i.columnType.multi&&o=="allVertical"?(y=["insertColumn","removeColumn","totalSetting"],t==nt&&f.remove(function(n){return n.value=="add"}),l.length-1==u.bottom-u.top&&f.remove(function(n){return n.value=="removeRow"}),this.mixinOption.dataColumn.isPossibleMergeBoundary(e||t,u,o)||f.remove(function(n){return n.value=="merge"}),this.mixinOption.dataColumn.isPossibleDivideBoundary(e||t,u,o)||f.remove(function(n){return n.value=="divide"}),f.remove(function(n){var t=y.indexOf(n.value);return t>-1?(y.splice(t,1),!0):!1})):this.mixinOption.optCommon.columnType==i.columnType.multi&&o==i.selector.selectionType.allHorizontal&&(y=["add","setting","allsetting","insertRow","removeRow","totalSetting"],this.mixinOption.dataColumn.isPossibleMergeBoundary(e||t,u,o)||y.push("merge"),this.mixinOption.dataColumn.isPossibleDivideBoundary(e||t,u,o)||y.push("divide"),f.remove(function(n){var t=y.indexOf(n.value);return t>-1?(y.splice(t,1),!0):!1})));bt={type:"click",dropdownmenuData:f,boundary:r,directionX:ni};this.__core.dropdownmenu.activeSectionType=t;this.__core.dropdownmenu.activeColumnId=p;this.__core.dropdownmenu.activeRowId=c;this.__core.dropdownmenu.event=n;this.optSelector.use&&this.mixinOption.viewSelector.setState(i.selector.state.mouseup);this.__core.fn.showLayer(t,p,c,bt)}}};ecount.gridV2.handler.formV3Contextmenu={add:function(n,t,i,r,u){var f=this,c=f.__setting.eventsGet(),l,e=f.dataColumn.getAll(t||n,f.constValue.returnType.multi,!0),o=[],s,a,h;for(e=e.slice(u.top,u.bottom+1),s=0,a=e.length;s<a;s++)h=e[s].splice(u.left,u.right-u.left+1),h.splice(0,0,o.length,0),o.splice.apply(o,h);l={gridId:f.optLayout.containerSelector,sectionType:t||n,sectionDetailType:i=="2"?(t||n)+"slip":null,sectionDetailTypeName:i,columnStartIndex:u.left,columnEndIndex:u.right,rowStartIndex:u.top,rowEndIndex:u.bottom,columns:o};f.optSelector.use&&(f.viewSelector.__datas.state=f.constValue.selector.state.mouseup);c&&c._triggerEvent(ecount.grid.event.list.formAdd,null,l)},setting:function(n,t,i,r,u){var f=this,e=f.__setting.eventsGet(),c,o=f.dataColumn.getAll(t||n,f.constValue.returnType.multi,!0),s=[],h,a,l,v;for(o=o.slice(u.top,u.bottom+1),h=0,a=o.length;h<a;h++)l=o[h].splice(u.left,u.right-u.left+1),l.splice(0,0,s.length,0),s.splice.apply(s,l);v=function(){f.optSelector.use&&(f.viewSelector.__datas.state=f.constValue.selector.state.mouseup);e&&e._triggerEvent(ecount.grid.event.list.formSetting,null,c)};c={gridId:f.optLayout.containerSelector,sectionType:t||n,sectionDetailType:i=="2"?(t||n)+"slip":null,sectionDetailTypeName:i,columnStartIndex:u.left,columnEndIndex:u.right,rowStartIndex:u.top,rowEndIndex:u.bottom,columns:s};returnValue=e&&e._triggerEvent(ecount.grid.event.list.formBeforeSetting,null,c)||{result:!0};returnValue.result&&v()},allsetting:function(n,t,i,r,u){var f=this,e=f.__setting.eventsGet(),c,o=f.dataColumn.getAll(t||n,f.constValue.returnType.multi,!0),s=[],h,a,l,v;for(o=o.slice(u.top,u.bottom+1),h=0,a=o.length;h<a;h++)l=o[h].splice(u.left,u.right-u.left+1),l.splice(0,0,s.length,0),s.splice.apply(s,l);v=function(){f.optSelector.use&&(f.viewSelector.__datas.state=f.constValue.selector.state.mouseup);e&&e._triggerEvent(ecount.grid.event.list.formBatchSetting,null,c)};c={gridId:f.optLayout.containerSelector,sectionType:t||n,sectionDetailType:i=="2"?(t||n)+"slip":null,sectionDetailTypeName:i,columnStartIndex:u.left,columnEndIndex:u.right,rowStartIndex:u.top,rowEndIndex:u.bottom,columns:s};returnValue=e&&e._triggerEvent(ecount.grid.event.list.formBeforeBatchSetting,null,c)||{result:!0};returnValue.result&&v()},leftFixed:function(n,t,i,r,u){function w(n){for(var i=!0,r=0,l=n.length;r<l;r++){var t=n[r],o=t[f.constValue.rowVariableNames.mergeStartIndex],w=Math.floor(o/p),h=o%p,a=t[f.constValue.rowVariableNames.rowspanCount]||1,v=t[f.constValue.rowVariableNames.colspanCount]||1,b=a-1,y=v-1,e=h,c=h+y;if(u.left<=e&&e<=u.right){if(u.right<c){i=!1;s=t;break}}else if(u.left>e&&u.right<c){i=!1;s=t;break}}return i}function v(n){for(var t=0,i=n.length;t<i;t++){var u=n[t],r=u[f.constValue.rowVariableNames.mergeSet];if(r&&(e.isPossibleLeftFixed=w(r)),!e.isPossibleLeftFixed)break}}var f=this,h=f.__setting.eventsGet(),e={isPossibleLeftFixed:!0,collideLeftFixedType:"none",callback:null},l=this.constValue.sectionType.thead,a=this.constValue.sectionType.tbody,g=this.constValue.sectionType.tfoot,y=function(){f.__core.fn.setCellCancelLeftFixed(n,t,r,u);f.__core.fn.setCellLeftFixed(n,t,r,u);h&&h._triggerEvent(ecount.grid.event.list.formSetFixed,null,{})},nt=f.dataColumn.getAll(l,f.constValue.returnType.multi,!0),p=nt[0].length,tt=f.dataRow.getAll(l),it=f.dataRow.getAll(a),rt=f.dataRow.getAll(g),s,o,c,b,d;if(v(tt),e.isPossibleLeftFixed&&v(it),e.isPossibleLeftFixed&&v(rt),e.callback=y,o=[],f.optCommon.columnType==this.constValue.columnType.single?f.dataRow.addTotalMergeSet(l,t,null,o):f.dataRow.addTotalMergeSet(a,a,null,o),e.isPossibleLeftFixed)e.isPossibleLeftFixed=w(o),e.isPossibleLeftFixed||(e.collideLeftFixedType="sum");else if(e.collideLeftFixedType="data",s)for(c=0,b=o.length;c<b;c++){var k=o[c],ut=k[this.constValue.rowVariableNames.mergeStartIndex],ft=k[this.constValue.rowVariableNames.colspanCount]||1,et=s[this.constValue.rowVariableNames.mergeStartIndex],ot=s[this.constValue.rowVariableNames.colspanCount]||1;if(ut==et&&ft&&ot){e.collideLeftFixedType="sum";break}}d=h&&h._triggerEvent(ecount.grid.event.list.formSetBeforeFixed,null,e)||{result:!0};d.result&&y()},cancelLeftFixed:function(n,t,i,r,u){var f=this,e=f.__setting.eventsGet(),o={isPossibleCancelLeftFixed:!1,callback:null},b=this.constValue.sectionType.thead,k=this.constValue.sectionType.tbody,d=this.constValue.sectionType.tfoot,a=function(){f.__core.fn.setCellCancelLeftFixed(n,t,r,u);e&&e._triggerEvent(ecount.grid.event.list.formSetCancelFixed,null,{})},c,s,v,l,h,y,p,w;for(o.callback=a,c=f.dataColumn.getAll(b,f.constValue.returnType.multi,!0),s=0,v=c.length;s<v;s++){for(l=c[s],h=0,y=l.length;h<y;h++)if(p=l[h],ecount.common.isTrue(p.LEFT_FIXD_STND_TF)){o.isPossibleCancelLeftFixed=!0;break}if(o.isPossibleCancelLeftFixed)break}w=e&&e._triggerEvent(ecount.grid.event.list.formSetBeforeCancelFixed,null,o)||{result:!0};w.result&&a()},merge:function(n,t,i,r,u,f,e){var o=this,k=o.__setting.eventsGet(),y={data:[]},tt=this.constValue.sectionType.thead,ut=this.constValue.sectionType.tbody,ht=this.constValue.sectionType.tfoot,d=!1,ft,it,p,v,et,h,c,l,s,w,a,g,rt,st;if(o.optSelector.use&&(o.viewSelector.__datas.state=o.constValue.selector.state.mouseup),this.__core.boundary.reset(),this.__core.boundary.addBoundary(f),this.__core.boundary.addBoundary(e),ft=this.__core.boundary.get(),it=function(){o.__core.fn.setCellMerge(n,t,r,u,ft);o.constValue.selector.selectionType.allHorizontal==r||y.data.forEach(function(n){o.__core.fn.setStartCellSelection(n.sectionType,n.columnStartId,n.rowStartId);o.__core.fn.setEndCellSelection(n.sectionType,n.columnEndId,n.rowEndId)});k&&k._triggerEvent(ecount.grid.event.list.formMerged,null,y)},y.callback=it,this.constValue.selector&&r==this.constValue.selector.selectionType.allHorizontal){for(p=[tt,ut,ht],v=0,et=p.length;v<et;v++)if(h=o.dataColumn.getAll(p[v],o.constValue.returnType.multi,!0),h.length!=0){for(c=[],s=0,w=h.length;s<w;s++)l=h[s].splice(u.left,u.right-u.left+1),l.splice(0,0,c.length,0),c.splice.apply(c,l);if(p[v]==tt)for(a=0,g=c.length;a<g;a++)if(ecount.common.isTrue(c[a].LEFT_FIXD_STND_TF)){d=!0;break}y.data.push({gridId:o.optLayout.containerSelector,sectionType:p[v],columnSectionType:p[v],sectionDetailType:i=="2"?(t||n)+"slip":null,sectionDetailTypeName:i,columnStartIndex:u.left,columnEndIndex:u.right,rowStartIndex:0,rowEndIndex:h.length-1,isLeftFixed:d,columns:c})}}else{var ot=o.dataColumn.getAll(tt,o.constValue.returnType.multi,!0),b=[],h=o.dataColumn.getAll(t||n,o.constValue.returnType.multi,!0),c=[],nt=[],ct=h[u.top][u.left].id,lt=h[u.bottom][u.right].id;for(h=h.slice(u.top,u.bottom+1),s=0,w=h.length;s<w;s++)l=h[s].splice(u.left,u.right-u.left+1),l.splice(0,0,c.length,0),c.splice.apply(c,l);for(s=0,w=ot.length;s<w;s++)l=ot[s].splice(u.left,u.right-u.left+1),l.splice(0,0,b.length,0),b.splice.apply(b,l);for(a=0,g=b.length;a<g;a++)if(ecount.common.isTrue(b[a].LEFT_FIXD_STND_TF)){d=!0;break}rt={};o.optCommon.columnType==this.constValue.columnType.multi&&t==ut&&(rt={exceptRowType:[ecount.grid.constValue.rowType.separate]});nt=o.__core.fn.getRowList(t||n,null,rt);y.data.push({gridId:o.optLayout.containerSelector,sectionType:n,columnSectionType:t,sectionDetailType:i=="2"?(t||n)+"slip":null,sectionDetailTypeName:i,columnStartIndex:u.left,columnEndIndex:u.right,columnStartId:ct,columnEndId:lt,rowStartIndex:u.top,rowEndIndex:u.bottom,rowStartId:nt[0][this.constValue.keyColumnPropertyName],rowEndId:nt[nt.length-1][this.constValue.keyColumnPropertyName],isLeftFixed:d,columns:c})}st=k&&k._triggerEvent(ecount.grid.event.list.formBeforeMerged,null,y)||{result:!0};st.result&&it()},divide:function(n,t,i,r,u){var f=this,s=f.__setting.eventsGet(),e,d=this.constValue.sectionType.thead,w=this.constValue.sectionType.tbody,g=this.constValue.sectionType.tfoot,h,c,y,a,v,p;if(f.optSelector.use&&(f.viewSelector.__datas.state=f.constValue.selector.state.mouseup),h=function(){f.__core.fn.setCellDivide(n,t,r,u);f.constValue.selector.selectionType.allHorizontal==r||(f.__core.fn.setStartCellSelection(e.sectionType,e.columnStartId,e.rowStartId),f.__core.fn.setEndCellSelection(e.sectionType,e.columnEndId,e.rowEndId));f.optSelector.use&&(f.viewSelector.__datas.state=f.constValue.selector.state.mouseup);s&&s._triggerEvent(ecount.grid.event.list.formDivided,null,{})},this.constValue.selector&&r==this.constValue.selector.selectionType.allHorizontal)e={gridId:f.optLayout.containerSelector,sectionType:n,sectionDetailType:i=="2"?(t||n)+"slip":null,sectionDetailTypeName:i,columnStartIndex:u.left,columnEndIndex:u.right,rowStartIndex:0,rowEndIndex:0,callback:h};else{var o=f.dataColumn.getAll(t||n,f.constValue.returnType.multi,!0),b=o[u.top][u.left].id,k=o[u.bottom][u.right].id,l=[];for(o=o.slice(u.top,u.bottom+1),c=0,y=o.length;c<y;c++)a=o[c].splice(u.left,u.right-u.left+1),a.splice(0,0,l.length,0),l.splice.apply(l,a);v={};f.optCommon.columnType==this.constValue.columnType.multi&&t==w&&(v={exceptRowType:[ecount.grid.constValue.rowType.separate]});rowDatas=f.__core.fn.getRowList(t||n,null,v);e={gridId:f.optLayout.containerSelector,sectionType:n,columnSectionType:t,sectionDetailType:i=="2"?(t||n)+"slip":null,sectionDetailTypeName:i,columnStartIndex:u.left,columnEndIndex:u.right,columnStartId:b,columnEndId:k,rowStartIndex:u.top,rowEndIndex:u.bottom,rowStartId:rowDatas[0][this.constValue.keyColumnPropertyName],rowEndId:rowDatas[rowDatas.length-1][this.constValue.keyColumnPropertyName],callback:h}}p=s&&s._triggerEvent(ecount.grid.event.list.formBeforeDivided,null,e)||{result:!0};p.result&&h()},insertColumn:function(n,t,i,r,u){var e=this,f=e.__setting.eventsGet(),s,h=function(n){for(var t=0,i=n.length;t<i;t++)n[t].selectionType=r;e.__core.fn.addColumnSection("right",{right:u.right},n);f&&f._triggerEvent(ecount.grid.event.list.formAddedColumn,null,{})},o;s={gridId:e.optLayout.containerSelector,sectionType:t||n,sectionDetailType:i=="2"?(t||n)+"slip":null,sectionDetailTypeName:i,callback:h};o=f&&f._triggerEvent(ecount.grid.event.list.formBeforeAddedColumn,null,s)||{result:!0};o.result&&h(o.addColumnInfos)},removeColumn:function(n,t,i,r,u){var e=this,o=e.__setting.eventsGet(),f,s,h;e.optSelector.use&&(e.viewSelector.__datas.state=e.constValue.selector.state.mouseup);s=function(){var s=e.__core.fn.removeColumn(n,t,r,u);for(var i in s)f[i]||(f[i]={}),f[i].columns=s[i].columns,f[i].removedColumnStartIndex=u.left,f[i].removedColumnEndIndex=u.right;o&&o._triggerEvent(ecount.grid.event.list.formRemovedColumn,null,f)};f={gridId:e.optLayout.containerSelector,sectionType:t||n,sectionDetailType:i=="2"?(t||n)+"slip":null,sectionDetailTypeName:i,removedColumnStartIndex:u.left,removedColumnEndIndex:u.right,callback:s};h=o&&o._triggerEvent(ecount.grid.event.list.formBeforeRemovedColumn,null,f)||{result:!0};h.result&&s()},insertRow:function(n,t,i,r,u){var e=this,f=e.__setting.eventsGet(),s,h=function(r){var s={},o,h;if(typeof r.addColumnInfos=="object")if($.isArray(r.addColumnInfos))for(o=0,h=r.addColumnInfos.length;o<h;o++)s[r.addColumnInfos[o].sectionType]||(s[r.addColumnInfos[o].sectionType]={}),s[r.addColumnInfos[o].sectionType].columns=r.addColumnInfos[o].columns;else s[r.addColumnInfos.sectionType]={columns:r.addColumnInfos.columns};e.__core.fn.insertRow(n,t,i,u.bottom,"down",1,{defaultColumnValues:s});f&&f._triggerEvent(ecount.grid.event.list.formAddedRow,null,{})},o;s={gridId:e.optLayout.containerSelector,sectionType:t||n,sectionDetailType:i=="2"?(t||n)+"slip":null,sectionDetailTypeName:i,callback:h};o=f&&f._triggerEvent(ecount.grid.event.list.formBeforeAddedRow,null,s)||{result:!0};o.result&&h(o)},removeRow:function(n,t,i,r,u){var e=this,o=e.__setting.eventsGet(),f,s=function(){var s=e.__core.fn.removeRowAtBoundary(n,t,i,u),r,h;if(f={sectionType:t||n,sectionDetailType:i=="2"?(t||n)+"slip":null},s)for(r in s)s.hasOwnProperty(r)&&(e.constValue.columnType.single!=e.optCommon.columnType||e.constValue.sectionType.thead==r)&&(h=s[r],f[r]||(f[r]={columns:[]}),f[r].removedRowStartIndex=u.top,f[r].removedRowEndIndex=u.bottom,h.columnRows&&(f[r].columns=h.columnRows));o&&o._triggerEvent(ecount.grid.event.list.formRemovedRow,null,f)},h;f={gridId:e.optLayout.containerSelector,sectionType:t||n,sectionDetailType:i=="2"?(t||n)+"slip":null,sectionDetailTypeName:i,removedRowStartIndex:u.top,removedRowEndIndex:u.bottom,callback:s};h=o&&o._triggerEvent(ecount.grid.event.list.formBeforeRemovedRow,null,f)||{result:!0};h.result&&s()},totalSetting:function(n,t,i,r,u){var f=this,e=f.__setting.eventsGet(),a,o=f.dataColumn.getAll(t||n,f.constValue.returnType.multi,!0),s=[],h,v,c,l,y;for(o=o.slice(u.top,u.bottom+1),h=0,v=o.length;h<v;h++)c=o[h].splice(u.left,u.right-u.left+1),c.splice(0,0,s.length,0),s.splice.apply(s,c);l=function(){f.optSelector.use&&(f.viewSelector.__datas.state=f.constValue.selector.state.mouseup);e&&e._triggerEvent(ecount.grid.event.list.formTotalSetting,null,{})};a={gridId:f.optLayout.containerSelector,sectionType:n,sectionDetailType:i=="2"?(t||n)+"slip":null,sectionDetailTypeName:i,columnStartIndex:u.left,columnEndIndex:u.right,rowStartIndex:u.top,rowEndIndex:u.bottom,columns:s,callback:l};y=e&&e._triggerEvent(ecount.grid.event.list.formBeforeTotalSetting,null,a)||{result:!0};y.result&&l()}};ecount.gridV2.handler.formV4CustomContextmenu={addItem:function(n,t,i,r){var u=this,o=ecount.grid.constValue,f=u.__core.setting.eventsGet(),e={gridId:u.optLayout.containerSelector,datas:[]},s=u.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"});e.datas=s;u.optSelector.use&&(u.viewSelector.__datas.state=o.selector.state.mouseup);f&&f._triggerEvent(ecount.grid.event.list.formAddItem,null,e)},connectItem:function(n,t,i,r){for(var v,u,e,y,f=this,h=ecount.grid.constValue,c=f.__core.setting.eventsGet(),l={gridId:f.optLayout.containerSelector,datas:[]},a=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),s=0,p=a.length;s<p;s++){v=a[s];u=v;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var o=[],w=f.dataColumn.getAll(u.columnSectionType,h.returnType.multi,!0),o=w.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,y=o.length;e<y;e++)o[e].splice(u.boundary.right+1),o[e].splice(0,u.boundary.left);u.columnRows=o;l.datas.push(u)}f.optSelector.use&&(f.viewSelector.__datas.state=h.selector.state.mouseup);c&&c._triggerEvent(ecount.grid.event.list.formConnectItem,null,l)},deleteItem:function(n,t,i,r){var f=this,l=ecount.grid.constValue,a=f.__core.setting.eventsGet(),h={gridId:f.optLayout.containerSelector,datas:[],callback:null},w=function(){},c,o,v,y,u,e,p;for(h.callback=w,c=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),o=0,v=c.length;o<v;o++){y=c[o];u=y;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var s=[],b=f.dataColumn.getAll(u.columnSectionType,l.returnType.multi,!0),s=b.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,p=s.length;e<p;e++)s[e].splice(u.boundary.right+1),s[e].splice(0,u.boundary.left);u.columnRows=s;h.datas.push(u)}f.optSelector.use&&(f.viewSelector.__datas.state=l.selector.state.mouseup);a&&a._triggerEvent(ecount.grid.event.list.formDeleteItem,null,h)},setting:function(n,t,i,r){var f=this,a=ecount.grid.constValue,o=f.__core.setting.eventsGet(),s={gridId:f.optLayout.containerSelector,datas:[],callback:null},v=function(){f.optSelector.use&&(f.viewSelector.__datas.state=a.selector.state.mouseup);o&&o._triggerEvent(ecount.grid.event.list.formSetting,null,s)},l,h,y,p,u,e,w,b;for(s.callback=v,l=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),h=0,y=l.length;h<y;h++){p=l[h];u=p;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var c=[],k=f.dataColumn.getAll(u.columnSectionType,a.returnType.multi,!0),c=k.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,w=c.length;e<w;e++)c[e].splice(u.boundary.right+1),c[e].splice(0,u.boundary.left);u.columnRows=c;s.datas.push(u)}b=o&&o._triggerEvent(ecount.grid.event.list.formBeforeSetting,null,s)||{result:!0};b.result&&v()},allsetting:function(n,t,i,r){var u=this,s=ecount.grid.constValue,f=u.__core.setting.eventsGet(),e={gridId:u.optLayout.containerSelector,datas:[]},h=function(){u.optSelector.use&&(u.viewSelector.__datas.state=s.selector.state.mouseup);f&&f._triggerEvent(ecount.grid.event.list.formBatchSetting,null,e)},c=u.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),o;e.datas=c;o=f&&f._triggerEvent(ecount.grid.event.list.formBeforeBatchSetting,null,e)||{result:!0};o.result&&h()},displaySetting:function(n,t,i,r){var f=this,a=ecount.grid.constValue,o=f.__core.setting.eventsGet(),s={gridId:f.optLayout.containerSelector,datas:[],callback:null},v=function(){f.optSelector.use&&(f.viewSelector.__datas.state=a.selector.state.mouseup);o&&o._triggerEvent(ecount.grid.event.list.formDisplaySetting,null,s)},l,h,y,p,u,e,w,b;for(s.callback=v,l=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),h=0,y=l.length;h<y;h++){p=l[h];u=p;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var c=[],k=f.dataColumn.getAll(u.columnSectionType,a.returnType.multi,!0),c=k.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,w=c.length;e<w;e++)c[e].splice(u.boundary.right+1),c[e].splice(0,u.boundary.left);u.columnRows=c;s.datas.push(u)}b=o&&o._triggerEvent(ecount.grid.event.list.formBeforeDisplaySetting,null,s)||{result:!0};b.result&&v()},showText:function(n,t,i,r){var f=this,a=ecount.grid.constValue,o=f.__core.setting.eventsGet(),s={gridId:f.optLayout.containerSelector,datas:[],callback:null},v=function(){f.optSelector.use&&(f.viewSelector.__datas.state=a.selector.state.mouseup);o&&o._triggerEvent(ecount.grid.event.list.formShowText,null,s)},l,h,y,p,u,e,w,b;for(s.callback=v,l=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),h=0,y=l.length;h<y;h++){p=l[h];u=p;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var c=[],k=f.dataColumn.getAll(u.columnSectionType,a.returnType.multi,!0),c=k.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,w=c.length;e<w;e++)c[e].splice(u.boundary.right+1),c[e].splice(0,u.boundary.left);u.columnRows=c;s.datas.push(u)}b=o&&o._triggerEvent(ecount.grid.event.list.formBeforeShowText,null,s)||{result:!0};b.result&&v()},hideText:function(n,t,i,r){var f=this,a=ecount.grid.constValue,o=f.__core.setting.eventsGet(),s={gridId:f.optLayout.containerSelector,datas:[],callback:null},v=function(){f.optSelector.use&&(f.viewSelector.__datas.state=a.selector.state.mouseup);o&&o._triggerEvent(ecount.grid.event.list.formHideText,null,s)},l,h,y,p,u,e,w,b;for(s.callback=v,l=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),h=0,y=l.length;h<y;h++){p=l[h];u=p;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var c=[],k=f.dataColumn.getAll(u.columnSectionType,a.returnType.multi,!0),c=k.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,w=c.length;e<w;e++)c[e].splice(u.boundary.right+1),c[e].splice(0,u.boundary.left);u.columnRows=c;s.datas.push(u)}b=o&&o._triggerEvent(ecount.grid.event.list.formBeforeHideText,null,s)||{result:!0};b.result&&v()},leftFixed:function(n,t,i,r,u,f){function nt(n){for(var i=!0,r=0,h=n.length;r<h;r++){var t=n[r],f=t[e.constValue.rowVariableNames.mergeStartIndex],p=Math.floor(f/g),o=f%g,a=t[e.constValue.rowVariableNames.rowspanCount]||1,v=t[e.constValue.rowVariableNames.colspanCount]||1,w=a-1,y=v-1,u=o,s=o+y;if(c.left<=u&&u<=c.right){if(c.right<s){i=!1;l=t;break}}else if(c.left>u&&c.right<s){i=!1;l=t;break}}return i}function w(n){for(var t=0,i=n.length;t<i;t++){var u=n[t],r=u[e.constValue.rowVariableNames.mergeSet];if(r&&(s.isPossibleLeftFixed=nt(r)),!s.isPossibleLeftFixed)break}}var e=this,v=e.__setting.eventsGet(),s={isPossibleLeftFixed:!0,collideLeftFixedType:"none",callback:null},b=this.constValue.sectionType.thead,o=this.constValue.sectionType.tbody,p=this.constValue.sectionType.tfoot,k=f.columnSectionType,c=f.boundary,d=function(){e.__core.fn.setCellCancelLeftFixed(n,k,null,c);e.__core.fn.setCellLeftFixed(n,k,null,c);v&&v._triggerEvent(ecount.grid.event.list.formSetFixed,null,{})},ut=e.dataColumn.getAll(b,e.constValue.returnType.multi,!0),g=ut[0].length,ft=e.dataRow.getAll(b),et=e.dataRow.getAll(o),ot=e.dataRow.getAll(p),l,a,h,y,tt,rt;if(w(ft),s.isPossibleLeftFixed&&w(et),s.isPossibleLeftFixed&&w(ot),s.callback=d,a=[],h=[],h.push({section:o,columnSectionType:o,detailSections:[this.constValue.sectionSeparateValue.subtot1slip,this.constValue.sectionSeparateValue.subtot1]}),h.push({section:o,columnSectionType:o,detailSections:[this.constValue.sectionSeparateValue.subtot2slip,this.constValue.sectionSeparateValue.subtot2]}),h.push({section:o,columnSectionType:o,detailSections:[this.constValue.sectionSeparateValue.subtot3slip,this.constValue.sectionSeparateValue.subtot3]}),h.push({section:o,columnSectionType:o,detailSections:[this.constValue.sectionSeparateValue.subtot4slip,this.constValue.sectionSeparateValue.subtot4]}),h.push({section:o,columnSectionType:o,detailSections:[this.constValue.sectionSeparateValue.subtot5slip,this.constValue.sectionSeparateValue.subtot5]}),h.push({section:o,columnSectionType:p,detailSections:[this.constValue.sectionSeparateValue.pagetotslip,this.constValue.sectionSeparateValue.pagetot]}),h.push({section:o,columnSectionType:p,detailSections:[this.constValue.sectionSeparateValue.slip,this.constValue.sectionSeparateValue.line]}),h.forEach(function(n){e.dataRow.addTotalMergeSet(n.section,n.columnSectionType,n.detailSections,a)}),s.isPossibleLeftFixed)s.isPossibleLeftFixed=nt(a),s.isPossibleLeftFixed||(s.collideLeftFixedType="sum");else if(s.collideLeftFixedType="data",l)for(y=0,tt=a.length;y<tt;y++){var it=a[y],st=it[this.constValue.rowVariableNames.mergeStartIndex],ht=it[this.constValue.rowVariableNames.colspanCount]||1,ct=l[this.constValue.rowVariableNames.mergeStartIndex],lt=l[this.constValue.rowVariableNames.colspanCount]||1;if(st==ct&&ht&&lt){s.collideLeftFixedType="sum";break}}rt=v&&v._triggerEvent(ecount.grid.event.list.formSetBeforeFixed,null,s)||{result:!0};rt.result&&d()},cancelLeftFixed:function(n,t,i,r,u,f){var e=this,o=e.__setting.eventsGet(),s={isPossibleCancelLeftFixed:!1,callback:null},k=this.constValue.sectionType.thead,nt=this.constValue.sectionType.tbody,tt=this.constValue.sectionType.tfoot,d=f.columnSectionType,g=f.boundary,v=function(){e.__core.fn.setCellCancelLeftFixed(sectionType,d,null,g);o&&o._triggerEvent(ecount.grid.event.list.formSetCancelFixed,null,{})},l,h,y,a,c,p,w,b;for(s.callback=v,l=e.dataColumn.getAll(k,e.constValue.returnType.multi,!0),h=0,y=l.length;h<y;h++){for(a=l[h],c=0,p=a.length;c<p;c++)if(w=a[c],ecount.common.isTrue(w.LEFT_FIXD_STND_TF)){s.isPossibleCancelLeftFixed=!0;break}if(s.isPossibleCancelLeftFixed)break}b=o&&o._triggerEvent(ecount.grid.event.list.formSetBeforeCancelFixed,null,s)||{result:!0};b.result&&v()},cut:function(){for(var t,p,n,f,e,o,s,k,i=this,h=ecount.grid.constValue,c=i.__core.setting.eventsGet(),l={gridId:i.optLayout.containerSelector,datas:[]},w=[],d=function(){i.optSelector.use&&(i.viewSelector.__datas.state=h.selector.state.mouseup);c&&c._triggerEvent(ecount.grid.event.list.formCut,null,l)},b=i.__core.fn.getSectionTypes(startSectionType,endSectionType),v=0,g=b.length;v<g;v++){var a=b[v],y=i.__core.fn.getMultiSectionSelectionRange(a,startSectionType,startBoundary,endSectionType,endBoundary),nt=i.dataRow.getViewDataRenderingTableMapAll(a),r=null,u=null;for(t=y.bottom,p=y.top;t>=p;t--)n=nt[t][0],f=i.dataColumn.getById(n.columnSectionType,n.columnId),(t==y.bottom||r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&((r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&(w.push(e),l.datas.unshift(o),r=null,u=null),e={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},o={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},n.columnSectionType==h.sectionType.tfoot&&(s=i.dataColumn.getAll(h.sectionType.tbody,h.returnType.multi),e.boundary.top=n.trIdx-s.length,e.boundary.bottom=n.trIdx-s.length,o.boundary.top=n.trIdx-s.length,o.boundary.bottom=n.trIdx-s.length)),(r&&r==f.GROUP_FLAG||u&&u==n.columnSectionType)&&(e.boundary.top-=1,o.boundary.top-=1),t==p&&(w.push(e),l.datas.unshift(o)),r=f.GROUP_FLAG,u=n.columnSectionType}k=c&&c._triggerEvent(ecount.grid.event.list.formBeforeCut,null,l)||{result:!0};k.result&&d()},copy:function(){for(var t,p,n,f,e,o,s,k,i=this,h=ecount.grid.constValue,c=i.__core.setting.eventsGet(),l={gridId:i.optLayout.containerSelector,datas:[]},w=[],d=function(){i.optSelector.use&&(i.viewSelector.__datas.state=h.selector.state.mouseup);c&&c._triggerEvent(ecount.grid.event.list.formCopy,null,l)||{result:!0}},b=i.__core.fn.getSectionTypes(startSectionType,endSectionType),v=0,g=b.length;v<g;v++){var a=b[v],y=i.__core.fn.getMultiSectionSelectionRange(a,startSectionType,startBoundary,endSectionType,endBoundary),nt=i.dataRow.getViewDataRenderingTableMapAll(a),r=null,u=null;for(t=y.bottom,p=y.top;t>=p;t--)n=nt[t][0],f=i.dataColumn.getById(n.columnSectionType,n.columnId),(t==y.bottom||r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&((r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&(w.push(e),l.datas.unshift(o),r=null,u=null),e={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},o={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},n.columnSectionType==h.sectionType.tfoot&&(s=i.dataColumn.getAll(h.sectionType.tbody,h.returnType.multi),e.boundary.top=n.trIdx-s.length,e.boundary.bottom=n.trIdx-s.length,o.boundary.top=n.trIdx-s.length,o.boundary.bottom=n.trIdx-s.length)),(r&&r==f.GROUP_FLAG||u&&u==n.columnSectionType)&&(e.boundary.top-=1,o.boundary.top-=1),t==p&&(w.push(e),l.datas.unshift(o)),r=f.GROUP_FLAG,u=n.columnSectionType}k=c&&c._triggerEvent(ecount.grid.event.list.formBeforeCopy,null,l)||{result:!0};k.result&&d()},paste:function(){for(var t,p,n,f,e,o,s,k,i=this,h=ecount.grid.constValue,c=i.__core.setting.eventsGet(),l={gridId:i.optLayout.containerSelector,datas:[]},w=[],d=function(){i.optSelector.use&&(i.viewSelector.__datas.state=h.selector.state.mouseup);c&&c._triggerEvent(ecount.grid.event.list.formPaste,null,l)||{result:!0}},b=i.__core.fn.getSectionTypes(startSectionType,endSectionType),v=0,g=b.length;v<g;v++){var a=b[v],y=i.__core.fn.getMultiSectionSelectionRange(a,startSectionType,startBoundary,endSectionType,endBoundary),nt=i.dataRow.getViewDataRenderingTableMapAll(a),r=null,u=null;for(t=y.bottom,p=y.top;t>=p;t--)n=nt[t][0],f=i.dataColumn.getById(n.columnSectionType,n.columnId),(t==y.bottom||r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&((r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&(w.push(e),l.datas.unshift(o),r=null,u=null),e={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},o={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},n.columnSectionType==h.sectionType.tfoot&&(s=i.dataColumn.getAll(h.sectionType.tbody,h.returnType.multi),e.boundary.top=n.trIdx-s.length,e.boundary.bottom=n.trIdx-s.length,o.boundary.top=n.trIdx-s.length,o.boundary.bottom=n.trIdx-s.length)),(r&&r==f.GROUP_FLAG||u&&u==n.columnSectionType)&&(e.boundary.top-=1,o.boundary.top-=1),t==p&&(w.push(e),l.datas.unshift(o)),r=f.GROUP_FLAG,u=n.columnSectionType}k=c&&c._triggerEvent(ecount.grid.event.list.formBeforePaste,null,l)||{result:!0};k.result&&d()},merge:function(n,t,i,r){var f=this,e=ecount.grid.constValue,h=f.__core.setting.eventsGet(),c={gridId:f.optLayout.containerSelector,datas:[],callback:null},a=[],it=e.sectionType.thead,rt=e.sectionType.tbody,ut=e.sectionType.tfoot,p,w,b,k,v,l,d,g,u,s,nt,y,tt;for(f.optSelector.use&&(f.viewSelector.__datas.state=e.selector.state.mouseup),v=function(){var t=[it,rt,ut],n;f.optCommon.columnType==e.columnType.single&&f.dataRow.removeAutoMergeInfo();n=h&&h._triggerEvent(ecount.grid.event.list.formMerged,null,c)||{isReload:!0};$(f.optLayout.container.parentElement.parentElement).invisibleResize()},c.callback=v,a=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),l=0,d=a.length;l<d;l++){g=a[l];u=Object.clone(g,!0);u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var o=[],ft=f.dataColumn.getAll(u.columnSectionType,e.returnType.multi,!0),o=ft.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(s=0,nt=o.length;s<nt;s++)o[s].splice(u.boundary.right+1),o[s].splice(0,u.boundary.left);p=o[0][0].id;w=o[o.length-1][o[0].length-1].id;y=f.dataRow.getAll(u.sectionType);b=y[0][e.keyColumnPropertyName];k=y[0][e.keyColumnPropertyName];u.startColumnId=p;u.startRowId=b;u.endColumnId=w;u.endRowId=k;u.columnRows=o;c.datas.push(u)}tt=h&&h._triggerEvent(ecount.grid.event.list.formBeforeMerged,null,c)||{result:!0};tt.result&&v()},divide:function(n,t,i,r){var f=this,e=ecount.grid.constValue,h=f.__core.setting.eventsGet(),a=[],c={gridId:f.optLayout.containerSelector,datas:[],callback:null},it=e.sectionType.thead,rt=e.sectionType.tbody,ut=e.sectionType.tfoot,p,w,b,k,v,l,d,g,u,s,nt,y,tt;for(f.optSelector.use&&(f.viewSelector.__datas.state=e.selector.state.mouseup),v=function(){var t=[it,rt,ut],n;f.optSelector.use&&(f.viewSelector.__datas.state=e.selector.state.mouseup);$(f.optLayout.container.parentElement.parentElement).invisibleResize();n=h&&h._triggerEvent(ecount.grid.event.list.formDivided,null,c)||{isReload:!0}},c.callback=v,a=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),l=0,d=a.length;l<d;l++){g=a[l];u=Object.clone(g,!0);u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var o=[],ft=f.dataColumn.getAll(u.columnSectionType,e.returnType.multi,!0),o=ft.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(s=0,nt=o.length;s<nt;s++)o[s].splice(u.boundary.right+1),o[s].splice(0,u.boundary.left);u.columnRows=o;p=o[0][0].id;w=o[o.length-1][o[0].length-1].id;y=f.dataRow.getAll(u.sectionType);b=y[0][e.keyColumnPropertyName];k=y[0][e.keyColumnPropertyName];u.startColumnId=p;u.startRowId=b;u.endColumnId=w;u.endRowId=k;c.datas.push(u)}tt=h&&h._triggerEvent(ecount.grid.event.list.formBeforeDivided,null,c)||{result:!0};tt.result&&v()},insertRightColumn:function(){},insertLeftColumn:function(){},insertColumn:function(n,t,i,r,u,f){var o=this,s=ecount.grid.constValue,l=o.__core.setting.eventsGet(),a={gridId:o.optLayout.containerSelector,datas:[],callback:null},ut=s.sectionType.thead,et=s.sectionType.tbody,ot=s.sectionType.tfoot,w,b,k,d,g=o.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),st={top:t.top,bottom:r.bottom,left:t.left,right:r.right},nt=function(i){var c,y,e,p,u,w,v,b,k;if(i=i||[],c=[ut],y=o.dataColumn.getAll(n,s.returnType.multi),i.length==0)for(e=0,p=c.length;e<p;e++){var a=c[e],h=[],y=o.dataColumn.getAll(a,s.returnType.multi);for(u=0,w=y.length;u<w;u++)for(h[u]||(h[u]=[]),v=t.left,b=r.right;v<=b;v++)h[u].push(o.optColumn.generator.create(a,{}));i.push({sectionType:a,columns:h})}o.__core.fn.addColumnSection(f.direction,{left:t.left,right:r.right},i);k=l&&l._triggerEvent(ecount.grid.event.list.formAddedColumn,null,{})||{isReload:!0}},v,tt,it,e,c,rt,y,p;for(a.callback=nt,a.direction=f.direction,v=0,tt=g.length;v<tt;v++){it=g[v];e=Object.clone(it,!0);e.boundary=e.columnBoundary;delete e.columnBoundary;delete e.rowBoundary;var h=[],ft=o.dataColumn.getAll(e.columnSectionType,s.returnType.multi,!0),h=ft.splice(e.boundary.top,e.boundary.bottom-e.boundary.top+1);for(c=0,rt=h.length;c<rt;c++)h[c].splice(e.boundary.right+1),h[c].splice(0,e.boundary.left);e.columnRows=h;w=h[0][0].id;b=h[h.length-1][h[0].length-1].id;y=o.dataRow.getAll(e.sectionType);k=y[0][s.keyColumnPropertyName];d=y[0][s.keyColumnPropertyName];e.startColumnId=w;e.startRowId=k;e.endColumnId=b;e.endRowId=d;e.direction=f.direction;a.datas.push(e)}p=l&&l._triggerEvent(ecount.grid.event.list.formBeforeAddedColumn,null,a)||{result:!0};p.result&&nt(p.addColumnInfos)},insertUpRow:function(){},insertDownRow:function(){},insertRow:function(n,t,i,r,u,f){var ft,p,rt,yt,c,et,o,w,d,g,nt,tt,bt,ot,st;f=f||{direction:"down"};var e=this,s=ecount.grid.constValue,it=e.__core.setting.eventsGet(),h=[],ut=[],y={gridId:e.optLayout.containerSelector,datas:[],callback:null},gt=s.sectionType.thead,ni=s.sectionType.tbody,ti=s.sectionType.tfoot,ht,ct,lt,at,b={top:t.top,bottom:r.bottom,left:t.left,right:r.right},ii={top:t.top,bottom:r.bottom,left:t.left,right:r.right},vt=function(n){for(var r,t,o,a,f,w,i=0,y=h.length;i<y;i++){if(r={thead:{"1":{columns:[]}},tbody:{"1":{columns:[]}},tfoot:{"1":{columns:[]}}},n.addColumnInfos)for(f in n.addColumnInfos)_.extend(r[f],n.addColumnInfos[f]);var c=e.dataColumn.getDetailSections(h[i].sectionType),p=e.dataColumn.getAll(h[i].sectionType,s.returnType.multi,!1,"system",{byDetailSection:!0}),v=p[u].columnRows,k=v.length,l=c.indexOf(u);for(t=c.length-1;t>-1;t--){o=-1;a=-1;h[i].direction=="up"?(o=b.top,t<l?o-=v.length:t>l&&(o+=(t-l)*v.length)):h[i].direction=="down"&&(o=b.bottom,t<l?o-=v.length:t>l&&(o+=(t-l)*v.length));for(f in r)r.hasOwnProperty(f)&&r[f][c[t]]&&r[f][c[t]].columns&&(a=Math.max(a,r[f][c[t]].columns.length));a<1&&(a=1);e.__core.fn.insertRow(h[i].sectionType,h[i].columnSectionType,c[t],o,h[i].direction,a,{defaultColumnValues:r})}}w=it&&it._triggerEvent(ecount.grid.event.list.formAddedRow,null,{})||{isReload:!0}};for(y.callback=vt,ft=e.__core.fn.getSectionTypes(n,i),rt=0,yt=ft.length;rt<yt;rt++){var k=ft[rt],pt=e.dataColumn.getDetailSections(k),p=e.dataColumn.getAll(k,s.returnType.multi,!0,"system"),wt=p.length,kt=p[0].length,ri=kt-1,l=e.__core.fn.getMultiSectionSelectionRange(k,n,t,i,r),dt=e.dataRow.getViewDataRenderingTableMapAll(k),a=null,v=null;for(c=l.bottom,et=l.top;c>=et;c--){if(o=dt[c][0],w=e.dataColumn.getById(o.columnSectionType,o.columnId),lt=o.rowId,at=o.rowId,c==l.bottom||a&&a!=w.GROUP_FLAG||v&&v!=o.columnSectionType){for((a&&a!=w.GROUP_FLAG||v&&v!=o.columnSectionType)&&(h.push(d),ut.push(g),a=null,v=null),d={sectionType:k,columnSectionType:o.columnSectionType,detailSectionType:w.GROUP_FLAG,standardRowIndex:c,oneSectionRowIndex:c-wt*pt.indexOf(u),direction:f.direction,insertRowCount:1},g={sectionType:k,columnSectionType:o.columnSectionType,detailSectionType:w.GROUP_FLAG,standardRowIndex:c,oneSectionRowIndex:c-wt*pt.indexOf(u),direction:f.direction,columnRows:[]},nt=p.splice(l.top,l.bottom-l.top+1),tt=0,bt=nt.length;tt<bt;tt++)nt[tt].splice(l.right+1),nt[tt].splice(0,l.left);g.columnRows=nt;o.columnSectionType==s.sectionType.tfoot&&(ot=e.dataColumn.getAll(s.sectionType.tbody,s.returnType.multi),d.standardRowIndex=o.trIdx-ot.length,g.standardRowIndex=o.trIdx-ot.length)}(a&&a==w.GROUP_FLAG||v&&v==o.columnSectionType)&&(d.insertRowCount+=1,f.direction=="up"&&(d.standardRowIndex-=1,g.standardRowIndex-=1));c==et&&(h.push(d),ut.push(g));a=w.GROUP_FLAG;v=o.columnSectionType}}p=e.dataColumn.getAll(n,s.returnType.multi);ht=p[b.top][b.left].id;p=e.dataColumn.getAll(i,s.returnType.multi);ct=p[b.bottom][b.right].id;y.startRowId=lt;y.endRowId=at;y.startColumnId=ht;y.endColumnId=ct;y.datas=ut;st=it&&it._triggerEvent(ecount.grid.event.list.formBeforeAddedRow,null,y)||{result:!0};st.result&&vt(st)},removeColumn:function(n,t,i,r){var f=this,v=ecount.grid.constValue,s=f.__core.setting.eventsGet(),e={gridId:f.optLayout.containerSelector,datas:[],callback:null},l,a,h,y,p,u,o,w,b;for(f.optSelector.use&&(f.viewSelector.__datas.state=v.selector.state.mouseup),l=function(){var u=f.__core.fn.removeColumn(n,n,null,{left:t.left,right:r.right}),i,o;for(i in u)e[i]||(e[i]={}),e[i].columnRows=u[i].columns;$(f.optLayout.container.parentElement.parentElement).invisibleResize();o=s&&s._triggerEvent(ecount.grid.event.list.formRemovedColumn,null,e)||{isReload:!0}},e.callback=l,a=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),h=0,y=a.length;h<y;h++){p=a[h];u=Object.clone(p,!0);u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var c=[],k=f.dataColumn.getAll(u.columnSectionType,v.returnType.multi,!0),c=k.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(o=0,w=c.length;o<w;o++)c[o].splice(u.boundary.right+1),c[o].splice(0,u.boundary.left);u.columnRows=c;e.datas.push(u)}b=s&&s._triggerEvent(ecount.grid.event.list.formBeforeRemovedColumn,null,e)||{result:!0};b.result&&l()},removeRow:function(n,t,i,r,u){function y(n,t){var i=0,r=o.dataColumn.getAll(n,c.returnType.multi);return r.forEach(function(n){n[0].GROUP_FLAG==t&&(i+=1)}),i}var o=this,c=ecount.grid.constValue,h=o.__core.setting.eventsGet(),e=[],f={gridId:o.optLayout.containerSelector,datas:[],callback:null},l=function(){var n,t;e.some(function(t){for(var i,e=o.dataColumn.getDetailSections(t.sectionType),h=o.dataColumn.getAll(t.sectionType,c.returnType.multi,!1,"system",{byDetailSection:!0}),l=h[u].columnRows,s=l.length,r=e.length-1;r>-1;r--)if(n=o.__core.fn.removeRowAtBoundary(t.sectionType,t.columnSectionType,e[r],{top:t.columnBoundary.top-s*e.indexOf(u)+r*s,left:t.columnBoundary.left,bottom:t.columnBoundary.bottom-s*e.indexOf(u)+r*s,right:t.columnBoundary.right}),n)for(i in n)n.hasOwnProperty(i)&&(f[i]||(f[i]={}),f[i].columnRows?(n[i].columnRows.splice(0,0,0,0),f[i].columnRows.splice.apply(f[i].columnRows,n[i].columnRows)):f[i]=n[i])});$(o.optLayout.container.parentElement.parentElement).invisibleResize();t=h&&h._triggerEvent(ecount.grid.event.list.formRemovedRow,null,f)||{isReload:!0}},s,a,v;for(f.callback=l,e=o.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),s=e.length-1;s>-1;s--)a=y(e[s].sectionType,e[s].detailSectionType),e[s].columnBoundary.bottom-e[s].columnBoundary.top+1==a&&e.splice(s,1);f.isRemove=e.length>0;f.datas=Object.clone(e,!0);v=h&&h._triggerEvent(ecount.grid.event.list.formBeforeRemovedRow,null,f)||{result:!0};v.result&&l()},addLastRow:function(n,t,i,r,u,f){var ft,l,rt,yt,c,et,o,w,d,g,nt,tt,bt,ot,st;f=f||{direction:"down"};var e=this,s=ecount.grid.constValue,it=e.__core.setting.eventsGet(),h=[],ut=[],p={gridId:e.optLayout.containerSelector,datas:[],callback:null},ni=s.sectionType.thead,ti=s.sectionType.tbody,ii=s.sectionType.tfoot,ht,ct,lt,at,b={top:t.top,bottom:r.bottom,left:t.left,right:r.right},ri={top:t.top,bottom:r.bottom,left:t.left,right:r.right},vt=function(n){for(var r,t,o,a,f,w,i=0,y=h.length;i<y;i++){if(r={thead:{"1":{columns:[]}},tbody:{"1":{columns:[]}},tfoot:{"1":{columns:[]}}},n.addColumnInfos)for(f in n.addColumnInfos)_.extend(r[f],n.addColumnInfos[f]);var c=e.dataColumn.getDetailSections(h[i].sectionType),p=e.dataColumn.getAll(h[i].sectionType,s.returnType.multi,!1,"system",{byDetailSection:!0}),v=p[u].columnRows,k=v.length,l=c.indexOf(u);for(t=c.length-1;t>-1;t--){o=-1;a=-1;h[i].direction=="up"?(o=b.top,t<l?o-=v.length:t>l&&(o+=(t-l)*v.length)):h[i].direction=="down"&&(o=b.bottom,t<l?o-=v.length:t>l&&(o+=(t-l)*v.length));for(f in r)r.hasOwnProperty(f)&&r[f][c[t]]&&r[f][c[t]].columns&&(a=Math.max(a,r[f][c[t]].columns.length));a<1&&(a=1);e.__core.fn.insertRow(h[i].sectionType,h[i].columnSectionType,c[t],o,h[i].direction,a,{defaultColumnValues:r})}}w=it&&it._triggerEvent(ecount.grid.event.list.formAddedRow,null,{})||{isReload:!0}};for(p.callback=vt,ft=e.__core.fn.getSectionTypes(n,i),rt=0,yt=ft.length;rt<yt;rt++){var k=ft[rt],pt=e.dataColumn.getDetailSections(k),kt=e.dataColumn.getAll(k,s.returnType.multi,!0,"system",{byDetailSection:!0});l=kt[u].columnRows;var wt=l.length,dt=l[0].length,ui=dt-1,a=e.__core.fn.getMultiSectionSelectionRange(k,n,t,i,r),gt=e.dataRow.getViewDataRenderingTableMapAll(k),v=null,y=null;for(c=a.bottom,et=a.top;c>=et;c--){if(o=gt[c][0],w=e.dataColumn.getById(o.columnSectionType,o.columnId),lt=o.rowId,at=o.rowId,c==a.bottom||v&&v!=w.GROUP_FLAG||y&&y!=o.columnSectionType){for((v&&v!=w.GROUP_FLAG||y&&y!=o.columnSectionType)&&(h.push(d),ut.push(g),v=null,y=null),d={sectionType:k,columnSectionType:o.columnSectionType,detailSectionType:w.GROUP_FLAG,standardRowIndex:c,oneSectionRowIndex:c-wt*pt.indexOf(u),direction:f.direction,insertRowCount:1},g={sectionType:k,columnSectionType:o.columnSectionType,detailSectionType:w.GROUP_FLAG,standardRowIndex:c,oneSectionRowIndex:c-wt*pt.indexOf(u),direction:f.direction,columnRows:[]},nt=l.splice(a.top,a.bottom-a.top+1),tt=0,bt=nt.length;tt<bt;tt++)nt[tt].splice(a.right+1),nt[tt].splice(0,a.left);g.columnRows=nt;o.columnSectionType==s.sectionType.tfoot&&(ot=e.dataColumn.getAll(s.sectionType.tbody,s.returnType.multi),d.standardRowIndex=o.trIdx-ot.length,g.standardRowIndex=o.trIdx-ot.length)}(v&&v==w.GROUP_FLAG||y&&y==o.columnSectionType)&&(d.insertRowCount+=1,f.direction=="up"&&(d.standardRowIndex-=1,g.standardRowIndex-=1));c==et&&(h.push(d),ut.push(g));v=w.GROUP_FLAG;y=o.columnSectionType}}l=e.dataColumn.getAll(n,s.returnType.multi);ht=l[b.top][b.left].id;l=e.dataColumn.getAll(i,s.returnType.multi);ct=l[b.bottom][b.right].id;p.startRowId=lt;p.endRowId=at;p.startColumnId=ht;p.endColumnId=ct;p.datas=ut;st=it&&it._triggerEvent(ecount.grid.event.list.formBeforeAddedRow,null,p)||{result:!0};st.result&&vt(st)}};ecount.gridV2.handler.formV4SingleSectionContextmenu={addItem:function(n,t,i,r){var u=this,o=ecount.grid.constValue,f=u.__core.setting.eventsGet(),e={gridId:u.optLayout.containerSelector,datas:[]},s=u.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"});e.datas=s;u.optSelector.use&&(u.viewSelector.__datas.state=o.selector.state.mouseup);f&&f._triggerEvent(ecount.grid.event.list.formAddItem,null,e)},connectItem:function(n,t,i,r){for(var v,u,e,y,f=this,h=ecount.grid.constValue,c=f.__core.setting.eventsGet(),l={gridId:f.optLayout.containerSelector,datas:[]},a=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),s=0,p=a.length;s<p;s++){v=a[s];u=v;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var o=[],w=f.dataColumn.getAll(u.columnSectionType,h.returnType.multi,!0),o=w.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,y=o.length;e<y;e++)o[e].splice(u.boundary.right+1),o[e].splice(0,u.boundary.left);u.columnRows=o;l.datas.push(u)}f.optSelector.use&&(f.viewSelector.__datas.state=h.selector.state.mouseup);c&&c._triggerEvent(ecount.grid.event.list.formConnectItem,null,l)},deleteItem:function(n,t,i,r){var f=this,l=ecount.grid.constValue,a=f.__core.setting.eventsGet(),h={gridId:f.optLayout.containerSelector,datas:[],callback:null},w=function(){},c,o,v,y,u,e,p;for(h.callback=w,c=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),o=0,v=c.length;o<v;o++){y=c[o];u=y;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var s=[],b=f.dataColumn.getAll(u.columnSectionType,l.returnType.multi,!0),s=b.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,p=s.length;e<p;e++)s[e].splice(u.boundary.right+1),s[e].splice(0,u.boundary.left);u.columnRows=s;h.datas.push(u)}f.optSelector.use&&(f.viewSelector.__datas.state=l.selector.state.mouseup);a&&a._triggerEvent(ecount.grid.event.list.formDeleteItem,null,h)},setting:function(n,t,i,r){var f=this,a=ecount.grid.constValue,o=f.__core.setting.eventsGet(),s={gridId:f.optLayout.containerSelector,datas:[],callback:null},v=function(){f.optSelector.use&&(f.viewSelector.__datas.state=a.selector.state.mouseup);o&&o._triggerEvent(ecount.grid.event.list.formSetting,null,s)},l,h,y,p,u,e,w,b;for(s.callback=v,l=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),h=0,y=l.length;h<y;h++){p=l[h];u=p;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var c=[],k=f.dataColumn.getAll(u.columnSectionType,a.returnType.multi,!0),c=k.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,w=c.length;e<w;e++)c[e].splice(u.boundary.right+1),c[e].splice(0,u.boundary.left);u.columnRows=c;s.datas.push(u)}b=o&&o._triggerEvent(ecount.grid.event.list.formBeforeSetting,null,s)||{result:!0};b.result&&v()},allsetting:function(n,t,i,r){var u=this,s=ecount.grid.constValue,f=u.__core.setting.eventsGet(),e={gridId:u.optLayout.containerSelector,datas:[]},h=function(){u.optSelector.use&&(u.viewSelector.__datas.state=s.selector.state.mouseup);f&&f._triggerEvent(ecount.grid.event.list.formBatchSetting,null,e)},c=u.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),o;e.datas=c;o=f&&f._triggerEvent(ecount.grid.event.list.formBeforeBatchSetting,null,e)||{result:!0};o.result&&h()},displaySetting:function(n,t,i,r){var f=this,a=ecount.grid.constValue,o=f.__core.setting.eventsGet(),s={gridId:f.optLayout.containerSelector,datas:[],callback:null},v=function(){f.optSelector.use&&(f.viewSelector.__datas.state=a.selector.state.mouseup);o&&o._triggerEvent(ecount.grid.event.list.formDisplaySetting,null,s)},l,h,y,p,u,e,w,b;for(s.callback=v,l=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),h=0,y=l.length;h<y;h++){p=l[h];u=p;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var c=[],k=f.dataColumn.getAll(u.columnSectionType,a.returnType.multi,!0),c=k.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,w=c.length;e<w;e++)c[e].splice(u.boundary.right+1),c[e].splice(0,u.boundary.left);u.columnRows=c;s.datas.push(u)}b=o&&o._triggerEvent(ecount.grid.event.list.formBeforeDisplaySetting,null,s)||{result:!0};b.result&&v()},showText:function(n,t,i,r){var f=this,a=ecount.grid.constValue,o=f.__core.setting.eventsGet(),s={gridId:f.optLayout.containerSelector,datas:[],callback:null},v=function(){f.optSelector.use&&(f.viewSelector.__datas.state=a.selector.state.mouseup);o&&o._triggerEvent(ecount.grid.event.list.formShowText,null,s)},l,h,y,p,u,e,w,b;for(s.callback=v,l=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),h=0,y=l.length;h<y;h++){p=l[h];u=p;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var c=[],k=f.dataColumn.getAll(u.columnSectionType,a.returnType.multi,!0),c=k.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,w=c.length;e<w;e++)c[e].splice(u.boundary.right+1),c[e].splice(0,u.boundary.left);u.columnRows=c;s.datas.push(u)}b=o&&o._triggerEvent(ecount.grid.event.list.formBeforeShowText,null,s)||{result:!0};b.result&&v()},hideText:function(n,t,i,r){var f=this,a=ecount.grid.constValue,o=f.__core.setting.eventsGet(),s={gridId:f.optLayout.containerSelector,datas:[],callback:null},v=function(){f.optSelector.use&&(f.viewSelector.__datas.state=a.selector.state.mouseup);o&&o._triggerEvent(ecount.grid.event.list.formHideText,null,s)},l,h,y,p,u,e,w,b;for(s.callback=v,l=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),h=0,y=l.length;h<y;h++){p=l[h];u=p;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var c=[],k=f.dataColumn.getAll(u.columnSectionType,a.returnType.multi,!0),c=k.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,w=c.length;e<w;e++)c[e].splice(u.boundary.right+1),c[e].splice(0,u.boundary.left);u.columnRows=c;s.datas.push(u)}b=o&&o._triggerEvent(ecount.grid.event.list.formBeforeHideText,null,s)||{result:!0};b.result&&v()},freezeLeftColumn:function(){function a(t){for(var r=!0,f=0,c=t.length;f<c;f++){var i=t[f],o=i[n.rowVariableNames.mergeStartIndex],p=Math.floor(o/l),s=o%l,a=i[n.rowVariableNames.rowspanCount]||1,v=i[n.rowVariableNames.colspanCount]||1,w=a-1,y=v-1,e=s,h=s+y;if(boundary.left<=e&&e<=boundary.right){if(boundary.right<h){r=!1;u=i;break}}else if(boundary.left>e&&boundary.right<h){r=!1;u=i;break}}return r}function s(i){for(var r=0,u=i.length;r<u;r++){var e=i[r],f=e[n.rowVariableNames.mergeSet];if(f&&(t.isPossibleLeftFixed=a(f)),!t.isPossibleLeftFixed)break}}var i=this,n=ecount.grid.constValue,f=i.__core.setting.eventsGet(),t={isPossibleLeftFixed:!0,collideLeftFixedType:"none",callback:null},o=n.sectionType.thead,h=n.sectionType.tbody,w=n.sectionType.tfoot,c=function(){i.__core.fn.setCellCancelLeftFixed(sectionType,columnSectionType,selectionType,boundary);i.__core.fn.setCellLeftFixed(sectionType,columnSectionType,selectionType,boundary);f&&f._triggerEvent(ecount.grid.event.list.formSetFixed,null,{})},b=i.dataColumn.getAll(o,n.returnType.multi,!0),l=b[0].length,k=i.dataRow.getAll(o),d=i.dataRow.getAll(h),g=i.dataRow.getAll(w),u,r,e,v,p;if(s(k),t.isPossibleLeftFixed&&s(d),t.isPossibleLeftFixed&&s(g),t.callback=c,r=[],i.optCommon.columnType==n.columnType.single?i.dataRow.addTotalMergeSet(o,columnSectionType,null,r):i.dataRow.addTotalMergeSet(h,columnSectionType,null,r),t.isPossibleLeftFixed)t.isPossibleLeftFixed=a(r),t.isPossibleLeftFixed||(t.collideLeftFixedType="sum");else if(t.collideLeftFixedType="data",u)for(e=0,v=r.length;e<v;e++){var y=r[e],nt=y[n.rowVariableNames.mergeStartIndex],tt=y[n.rowVariableNames.colspanCount]||1,it=u[n.rowVariableNames.mergeStartIndex],rt=u[n.rowVariableNames.colspanCount]||1;if(nt==it&&tt&&rt){t.collideLeftFixedType="sum";break}}p=f&&f._triggerEvent(ecount.grid.event.list.formSetBeforeFixed,null,t)||{result:!0};p.result&&c()},cancelFreezeLeftColumn:function(){var f=this,n=ecount.grid.constValue,t=f.__core.setting.eventsGet(),i={isPossibleCancelLeftFixed:!1,callback:null},v=n.sectionType.thead,y=n.sectionType.tbody,p=n.sectionType.tfoot,s=function(){f.__core.fn.setCellCancelLeftFixed(sectionType,columnSectionType,selectionType,boundary);t&&t._triggerEvent(ecount.grid.event.list.formSetCancelFixed,null,{})},e,r,h,o,u,c,l,a;for(i.callback=s,e=f.dataColumn.getAll(v,n.returnType.multi,!0),r=0,h=e.length;r<h;r++){for(o=e[r],u=0,c=o.length;u<c;u++)if(l=o[u],ecount.common.isTrue(l.LEFT_FIXD_STND_TF)){i.isPossibleCancelLeftFixed=!0;break}if(i.isPossibleCancelLeftFixed)break}a=t&&t._triggerEvent(ecount.grid.event.list.formSetBeforeCancelFixed,null,i)||{result:!0};a.result&&s()},leftFixed:function(n,t,i,r,u,f){function nt(n){for(var i=!0,r=0,h=n.length;r<h;r++){var t=n[r],f=t[e.constValue.rowVariableNames.mergeStartIndex],p=Math.floor(f/g),o=f%g,a=t[e.constValue.rowVariableNames.rowspanCount]||1,v=t[e.constValue.rowVariableNames.colspanCount]||1,w=a-1,y=v-1,u=o,s=o+y;if(c.left<=u&&u<=c.right){if(c.right<s){i=!1;l=t;break}}else if(c.left>u&&c.right<s){i=!1;l=t;break}}return i}function w(n){for(var t=0,i=n.length;t<i;t++){var u=n[t],r=u[e.constValue.rowVariableNames.mergeSet];if(r&&(s.isPossibleLeftFixed=nt(r)),!s.isPossibleLeftFixed)break}}var e=this,v=e.__setting.eventsGet(),s={isPossibleLeftFixed:!0,collideLeftFixedType:"none",callback:null},b=this.constValue.sectionType.thead,o=this.constValue.sectionType.tbody,p=this.constValue.sectionType.tfoot,k=f.columnSectionType,c=f.boundary,d=function(){e.__core.fn.setCellCancelLeftFixed(n,k,null,c);e.__core.fn.setCellLeftFixed(n,k,null,c);v&&v._triggerEvent(ecount.grid.event.list.formSetFixed,null,{})},ut=e.dataColumn.getAll(b,e.constValue.returnType.multi,!0),g=ut[0].length,ft=e.dataRow.getAll(b),et=e.dataRow.getAll(o),ot=e.dataRow.getAll(p),l,a,h,y,tt,rt;if(w(ft),s.isPossibleLeftFixed&&w(et),s.isPossibleLeftFixed&&w(ot),s.callback=d,a=[],h=[],h.push({section:o,columnSectionType:o,detailSections:[this.constValue.sectionSeparateValue.subtot1slip,this.constValue.sectionSeparateValue.subtot1]}),h.push({section:o,columnSectionType:o,detailSections:[this.constValue.sectionSeparateValue.subtot2slip,this.constValue.sectionSeparateValue.subtot2]}),h.push({section:o,columnSectionType:o,detailSections:[this.constValue.sectionSeparateValue.subtot3slip,this.constValue.sectionSeparateValue.subtot3]}),h.push({section:o,columnSectionType:o,detailSections:[this.constValue.sectionSeparateValue.subtot4slip,this.constValue.sectionSeparateValue.subtot4]}),h.push({section:o,columnSectionType:o,detailSections:[this.constValue.sectionSeparateValue.subtot5slip,this.constValue.sectionSeparateValue.subtot5]}),h.push({section:o,columnSectionType:p,detailSections:[this.constValue.sectionSeparateValue.pagetotslip,this.constValue.sectionSeparateValue.pagetot]}),h.push({section:o,columnSectionType:p,detailSections:[this.constValue.sectionSeparateValue.slip,this.constValue.sectionSeparateValue.line]}),h.forEach(function(n){e.dataRow.addTotalMergeSet(n.section,n.columnSectionType,n.detailSections,a)}),s.isPossibleLeftFixed)s.isPossibleLeftFixed=nt(a),s.isPossibleLeftFixed||(s.collideLeftFixedType="sum");else if(s.collideLeftFixedType="data",l)for(y=0,tt=a.length;y<tt;y++){var it=a[y],st=it[this.constValue.rowVariableNames.mergeStartIndex],ht=it[this.constValue.rowVariableNames.colspanCount]||1,ct=l[this.constValue.rowVariableNames.mergeStartIndex],lt=l[this.constValue.rowVariableNames.colspanCount]||1;if(st==ct&&ht&&lt){s.collideLeftFixedType="sum";break}}rt=v&&v._triggerEvent(ecount.grid.event.list.formSetBeforeFixed,null,s)||{result:!0};rt.result&&d()},cancelLeftFixed:function(n,t,i,r,u,f){var e=this,o=e.__setting.eventsGet(),s={isPossibleCancelLeftFixed:!1,callback:null},k=this.constValue.sectionType.thead,nt=this.constValue.sectionType.tbody,tt=this.constValue.sectionType.tfoot,d=f.columnSectionType,g=f.boundary,v=function(){e.__core.fn.setCellCancelLeftFixed(sectionType,d,null,g);o&&o._triggerEvent(ecount.grid.event.list.formSetCancelFixed,null,{})},l,h,y,a,c,p,w,b;for(s.callback=v,l=e.dataColumn.getAll(k,e.constValue.returnType.multi,!0),h=0,y=l.length;h<y;h++){for(a=l[h],c=0,p=a.length;c<p;c++)if(w=a[c],ecount.common.isTrue(w.LEFT_FIXD_STND_TF)){s.isPossibleCancelLeftFixed=!0;break}if(s.isPossibleCancelLeftFixed)break}b=o&&o._triggerEvent(ecount.grid.event.list.formSetBeforeCancelFixed,null,s)||{result:!0};b.result&&v()},cut:function(){for(var t,p,n,f,e,o,s,k,i=this,h=ecount.grid.constValue,c=i.__core.setting.eventsGet(),l={gridId:i.optLayout.containerSelector,datas:[]},w=[],d=function(){i.optSelector.use&&(i.viewSelector.__datas.state=h.selector.state.mouseup);c&&c._triggerEvent(ecount.grid.event.list.formCut,null,l)},b=i.__core.fn.getSectionTypes(startSectionType,endSectionType),v=0,g=b.length;v<g;v++){var a=b[v],y=i.__core.fn.getMultiSectionSelectionRange(a,startSectionType,startBoundary,endSectionType,endBoundary),nt=i.dataRow.getViewDataRenderingTableMapAll(a),r=null,u=null;for(t=y.bottom,p=y.top;t>=p;t--)n=nt[t][0],f=i.dataColumn.getById(n.columnSectionType,n.columnId),(t==y.bottom||r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&((r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&(w.push(e),l.datas.unshift(o),r=null,u=null),e={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},o={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},n.columnSectionType==h.sectionType.tfoot&&(s=i.dataColumn.getAll(h.sectionType.tbody,h.returnType.multi),e.boundary.top=n.trIdx-s.length,e.boundary.bottom=n.trIdx-s.length,o.boundary.top=n.trIdx-s.length,o.boundary.bottom=n.trIdx-s.length)),(r&&r==f.GROUP_FLAG||u&&u==n.columnSectionType)&&(e.boundary.top-=1,o.boundary.top-=1),t==p&&(w.push(e),l.datas.unshift(o)),r=f.GROUP_FLAG,u=n.columnSectionType}k=c&&c._triggerEvent(ecount.grid.event.list.formBeforeCut,null,l)||{result:!0};k.result&&d()},copy:function(){for(var t,p,n,f,e,o,s,k,i=this,h=ecount.grid.constValue,c=i.__core.setting.eventsGet(),l={gridId:i.optLayout.containerSelector,datas:[]},w=[],d=function(){i.optSelector.use&&(i.viewSelector.__datas.state=h.selector.state.mouseup);c&&c._triggerEvent(ecount.grid.event.list.formCopy,null,l)||{result:!0}},b=i.__core.fn.getSectionTypes(startSectionType,endSectionType),v=0,g=b.length;v<g;v++){var a=b[v],y=i.__core.fn.getMultiSectionSelectionRange(a,startSectionType,startBoundary,endSectionType,endBoundary),nt=i.dataRow.getViewDataRenderingTableMapAll(a),r=null,u=null;for(t=y.bottom,p=y.top;t>=p;t--)n=nt[t][0],f=i.dataColumn.getById(n.columnSectionType,n.columnId),(t==y.bottom||r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&((r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&(w.push(e),l.datas.unshift(o),r=null,u=null),e={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},o={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},n.columnSectionType==h.sectionType.tfoot&&(s=i.dataColumn.getAll(h.sectionType.tbody,h.returnType.multi),e.boundary.top=n.trIdx-s.length,e.boundary.bottom=n.trIdx-s.length,o.boundary.top=n.trIdx-s.length,o.boundary.bottom=n.trIdx-s.length)),(r&&r==f.GROUP_FLAG||u&&u==n.columnSectionType)&&(e.boundary.top-=1,o.boundary.top-=1),t==p&&(w.push(e),l.datas.unshift(o)),r=f.GROUP_FLAG,u=n.columnSectionType}k=c&&c._triggerEvent(ecount.grid.event.list.formBeforeCopy,null,l)||{result:!0};k.result&&d()},paste:function(){for(var t,p,n,f,e,o,s,k,i=this,h=ecount.grid.constValue,c=i.__core.setting.eventsGet(),l={gridId:i.optLayout.containerSelector,datas:[]},w=[],d=function(){i.optSelector.use&&(i.viewSelector.__datas.state=h.selector.state.mouseup);c&&c._triggerEvent(ecount.grid.event.list.formPaste,null,l)||{result:!0}},b=i.__core.fn.getSectionTypes(startSectionType,endSectionType),v=0,g=b.length;v<g;v++){var a=b[v],y=i.__core.fn.getMultiSectionSelectionRange(a,startSectionType,startBoundary,endSectionType,endBoundary),nt=i.dataRow.getViewDataRenderingTableMapAll(a),r=null,u=null;for(t=y.bottom,p=y.top;t>=p;t--)n=nt[t][0],f=i.dataColumn.getById(n.columnSectionType,n.columnId),(t==y.bottom||r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&((r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&(w.push(e),l.datas.unshift(o),r=null,u=null),e={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},o={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},n.columnSectionType==h.sectionType.tfoot&&(s=i.dataColumn.getAll(h.sectionType.tbody,h.returnType.multi),e.boundary.top=n.trIdx-s.length,e.boundary.bottom=n.trIdx-s.length,o.boundary.top=n.trIdx-s.length,o.boundary.bottom=n.trIdx-s.length)),(r&&r==f.GROUP_FLAG||u&&u==n.columnSectionType)&&(e.boundary.top-=1,o.boundary.top-=1),t==p&&(w.push(e),l.datas.unshift(o)),r=f.GROUP_FLAG,u=n.columnSectionType}k=c&&c._triggerEvent(ecount.grid.event.list.formBeforePaste,null,l)||{result:!0};k.result&&d()},merge:function(n,t,i,r,u){var e=this,f=ecount.grid.constValue,c=e.__core.setting.eventsGet(),l={gridId:e.optLayout.containerSelector,datas:[],callback:null},a=[],g=f.sectionType.thead,nt=f.sectionType.tbody,tt=f.sectionType.tfoot,y,p,w,b,k,v,it,rt,o,h,ut,d,ft;for(e.optSelector.use&&(e.viewSelector.__datas.state=f.selector.state.mouseup),k=function(){var o=[g,nt,tt],k,s,t,d,r,it,v,h;if(e.optCommon.columnType==f.columnType.single&&e.dataRow.removeAutoMergeInfo(),a.forEach(function(n,t){for(var l=e.dataColumn.getAll(n.sectionType,f.returnType.multi,!1,"system",{byDetailSection:!0}),s=e.dataColumn.getDetailSections(n.sectionType),a=s.indexOf(u),v=s.filter(function(n){return[f.sectionSeparateValue.slip].contains(u)?[f.sectionSeparateValue.slip,f.sectionSeparateValue.subtot1slip,f.sectionSeparateValue.subtot2slip,f.sectionSeparateValue.subtot3slip,f.sectionSeparateValue.subtot4slip,f.sectionSeparateValue.subtot5slip,f.sectionSeparateValue.pagetotslip].contains(n):[f.sectionSeparateValue.line].contains(u)?[f.sectionSeparateValue.line,f.sectionSeparateValue.subtot1,f.sectionSeparateValue.subtot2,f.sectionSeparateValue.subtot3,f.sectionSeparateValue.subtot4,f.sectionSeparateValue.subtot5,f.sectionSeparateValue.pagetot].contains(n):void 0}),o=s.length-1;o>-1;o--)if(v.contains(s[o])){var h={top:n.columnBoundary.top,left:n.columnBoundary.left,bottom:n.columnBoundary.bottom,right:n.columnBoundary.right},c={top:n.rowBoundary.top,left:n.rowBoundary.left,bottom:n.rowBoundary.bottom,right:n.rowBoundary.right},i=0;a<o?(i=s.slice(a,o).reduce(function(n,t){return l[t]&&(n+=l[t].columnRows.length),n},0),h.top+=i,h.bottom+=i,c.top+=i,c.bottom+=i):a>o&&(i=s.slice(o,a).reduce(function(n,t){return l[t]&&(n+=l[t].columnRows.length),n},0),h.top-=i,h.bottom-=i,c.top-=i,c.bottom-=i);e.__core.fn.setCellMerge(n.sectionType,n.columnSectionType,null,h,c,{isRemoveTotalMergeSet:t==0&&r==0})}}),k=c&&c._triggerEvent(ecount.grid.event.list.formMerged,null,l)||{isReload:!0},k.isReload){for(s=[],t=0,d=o.length;t<d;t++)if(o[t]==g&&e.__core.setting.setColumns(e.dataColumn.getAll(o[t])),rowDatas=e.dataRow.getAll(o[t]),rowDatas&&rowDatas.length)if(o[t]==tt)for(r=0,it=rowDatas.length;r<it;r++)v=rowDatas[r],h=v[f.rowVariableNames.mergeSet],h&&h.length&&(s[r]||(s[r]={}),s[r][f.rowVariableNames.mergeSet]=h),e.__core.setting.setRowDataSample(o[t],Object.clone(v,!0));else e.__core.setting.setRowData(o[t],rowDatas);e.__core.setting.setRowDataSample(nt,null).setIsRefreshForm(!0).setEventAfterSelect(!0).setEventSelectInfo({startSectionType:n,startColumnId:y,startRowId:w,endSectionType:i,endColumnId:p,endRowId:b});e.__core.fn.render()}$(e.optLayout.container.parentElement.parentElement).invisibleResize()},l.callback=k,a=e.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),v=0,it=a.length;v<it;v++){rt=a[v];o=Object.clone(rt,!0);o.boundary=o.columnBoundary;delete o.columnBoundary;delete o.rowBoundary;var s=[],et=e.dataColumn.getAll(o.columnSectionType,f.returnType.multi,!0),s=et.splice(o.boundary.top,o.boundary.bottom-o.boundary.top+1);for(h=0,ut=s.length;h<ut;h++)s[h].splice(o.boundary.right+1),s[h].splice(0,o.boundary.left);y=s[0][0].id;p=s[s.length-1][s[0].length-1].id;d=e.dataRow.getAll(o.sectionType);w=d[0][f.keyColumnPropertyName];b=d[0][f.keyColumnPropertyName];o.startColumnId=y;o.startRowId=w;o.endColumnId=p;o.endRowId=b;o.columnRows=s;l.datas.push(o)}ft=c&&c._triggerEvent(ecount.grid.event.list.formBeforeMerged,null,l)||{result:!0};ft.result&&k()},divide:function(n,t,i,r,u){var e=this,f=ecount.grid.constValue,c=e.__core.setting.eventsGet(),l=[],a={gridId:e.optLayout.containerSelector,datas:[],callback:null},g=f.sectionType.thead,nt=f.sectionType.tbody,tt=f.sectionType.tfoot,y,p,w,b,k,v,it,rt,o,h,ut,d,ft;for(e.optSelector.use&&(e.viewSelector.__datas.state=f.selector.state.mouseup),k=function(){var r=[g,nt,tt],k,s,t,d,o,it,v,h;if(e.optCommon.columnType==f.columnType.single&&e.dataRow.removeAutoMergeInfo(),l.forEach(function(n){for(var o,i,s=e.dataColumn.getAll(n.sectionType,f.returnType.multi,!1,"system",{byDetailSection:!0}),r=e.dataColumn.getDetailSections(n.sectionType),h=r.indexOf(u),c=r.filter(function(n){return[f.sectionSeparateValue.slip].contains(u)?[f.sectionSeparateValue.slip,f.sectionSeparateValue.subtot1slip,f.sectionSeparateValue.subtot2slip,f.sectionSeparateValue.subtot3slip,f.sectionSeparateValue.subtot4slip,f.sectionSeparateValue.subtot5slip,f.sectionSeparateValue.pagetotslip].contains(n):[f.sectionSeparateValue.line].contains(u)?[f.sectionSeparateValue.line,f.sectionSeparateValue.subtot1,f.sectionSeparateValue.subtot2,f.sectionSeparateValue.subtot3,f.sectionSeparateValue.subtot4,f.sectionSeparateValue.subtot5,f.sectionSeparateValue.pagetot].contains(n):void 0}),t=r.length-1;t>-1;t--)c.contains(r[t])&&(o={top:n.columnBoundary.top,left:n.columnBoundary.left,bottom:n.columnBoundary.bottom,right:n.columnBoundary.right},i=0,h<t?(i=r.slice(h,t).reduce(function(n,t){return s[t]&&(n+=s[t].columnRows.length),n},0),o.top+=i,o.bottom+=i):h>t&&(i=r.slice(t,h).reduce(function(n,t){return s[t]&&(n+=s[t].columnRows.length),n},0),o.top-=i,o.bottom-=i),e.__core.fn.setCellDivide(n.sectionType,n.columnSectionType,null,o))}),e.optSelector.use&&(e.viewSelector.__datas.state=f.selector.state.mouseup),$(e.optLayout.container.parentElement.parentElement).invisibleResize(),k=c&&c._triggerEvent(ecount.grid.event.list.formDivided,null,a)||{isReload:!0},k.isReload){for(s=[],t=0,d=r.length;t<d;t++)if(r[t]==g&&e.__core.setting.setColumns(e.dataColumn.getAll(r[t])),rowDatas=e.dataRow.getAll(r[t]),rowDatas&&rowDatas.length)if(r[t]==tt)for(o=0,it=rowDatas.length;o<it;o++)v=rowDatas[o],h=v[f.rowVariableNames.mergeSet],h&&h.length&&(s[o]||(s[o]={}),s[o][f.rowVariableNames.mergeSet]=h),e.__core.setting.setRowDataSample(r[t],Object.clone(v,!0));else e.__core.setting.setRowData(r[t],rowDatas);e.__core.setting.setRowDataSample(nt,null).setIsRefreshForm(!0).setEventAfterSelect(!0).setEventSelectInfo({startSectionType:n,startColumnId:y,startRowId:w,endSectionType:i,endColumnId:p,endRowId:b});$(e.optLayout.container.parentElement.parentElement).invisibleResize();e.__core.fn.render()}},a.callback=k,l=e.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),v=0,it=l.length;v<it;v++){rt=l[v];o=Object.clone(rt,!0);o.boundary=o.columnBoundary;delete o.columnBoundary;delete o.rowBoundary;var s=[],et=e.dataColumn.getAll(o.columnSectionType,f.returnType.multi,!0),s=et.splice(o.boundary.top,o.boundary.bottom-o.boundary.top+1);for(h=0,ut=s.length;h<ut;h++)s[h].splice(o.boundary.right+1),s[h].splice(0,o.boundary.left);o.columnRows=s;y=s[0][0].id;p=s[s.length-1][s[0].length-1].id;d=e.dataRow.getAll(o.sectionType);w=d[0][f.keyColumnPropertyName];b=d[0][f.keyColumnPropertyName];o.startColumnId=y;o.startRowId=w;o.endColumnId=p;o.endRowId=b;a.datas.push(o)}ft=c&&c._triggerEvent(ecount.grid.event.list.formBeforeDivided,null,a)||{result:!0};ft.result&&k()},insertRightColumn:function(){},insertLeftColumn:function(){},insertColumn:function(n,t,i,r,u,f){var e=this,s=ecount.grid.constValue,a=e.__core.setting.eventsGet(),v={gridId:e.optLayout.containerSelector,datas:[],callback:null},p=s.sectionType.thead,tt=s.sectionType.tbody,c=s.sectionType.tfoot,w,b,k,d,it=e.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),st={top:t.top,bottom:r.bottom,left:t.left,right:r.right},rt=function(u){var l,ft,ut,et,ot,v,h,y,o,nt,st,it;if(u=u||[],l=[p],ft=e.dataColumn.getAll(n,s.returnType.multi),u.length==0)for(h=0,y=l.length;h<y;h++){var rt=l[h],g=[],ft=e.dataColumn.getAll(rt,s.returnType.multi);for(o=0,nt=ft.length;o<nt;o++)for(g[o]||(g[o]=[]),ut=t.left,et=r.right;ut<=et;ut++)g[o].push(e.optColumn.generator.create(rt,{}));u.push({sectionType:rt,columns:g})}if(e.__core.fn.addColumnSection(f.direction,{left:t.left,right:r.right},u),ot=a&&a._triggerEvent(ecount.grid.event.list.formAddedColumn,null,{})||{isReload:!0},ot.isReload){for(l=[p,tt,c],v=[],h=0,y=l.length;h<y;h++)if(l[h]==p&&e.__core.setting.setColumns(e.dataColumn.getAll(l[h])),rowDatas=e.dataRow.getAll(l[h]),rowDatas&&rowDatas.length)if(l[h]==c){for(o=0,nt=rowDatas.length;o<nt;o++)st=rowDatas[o],it=st[s.rowVariableNames.mergeSet],it&&it.length&&(v[o]||(v[o]={}),v[o][s.rowVariableNames.mergeSet]=it);e.optRow[c].additionalDatas&&e.optRow[c].additionalDatas[s.rowVariableNames.mergeSet]&&delete e.optRow[c].additionalDatas[s.rowVariableNames.mergeSet];v&&v.length>0&&e.__core.setting.setEditSpecialRowMerge(v)}else e.__core.setting.setRowData(l[h],rowDatas);e.__core.setting.setRowDataSample(tt,null).setIsRefreshForm(!0).setEventAfterSelect(!0).setEventSelectInfo({startSectionType:n,startColumnId:w,startRowId:k,endSectionType:i,endColumnId:b,endRowId:d});$(e.optLayout.container.parentElement.parentElement).invisibleResize();e.__core.fn.render()}},y,ut,ft,o,l,et,g,nt;for(v.callback=rt,v.direction=f.direction,y=0,ut=it.length;y<ut;y++){ft=it[y];o=Object.clone(ft,!0);o.boundary=o.columnBoundary;delete o.columnBoundary;delete o.rowBoundary;var h=[],ot=e.dataColumn.getAll(o.columnSectionType,s.returnType.multi,!0),h=ot.splice(o.boundary.top,o.boundary.bottom-o.boundary.top+1);for(l=0,et=h.length;l<et;l++)h[l].splice(o.boundary.right+1),h[l].splice(0,o.boundary.left);o.columnRows=h;w=h[0][0].id;b=h[h.length-1][h[0].length-1].id;g=e.dataRow.getAll(o.sectionType);k=g[0][s.keyColumnPropertyName];d=g[0][s.keyColumnPropertyName];o.startColumnId=w;o.startRowId=k;o.endColumnId=b;o.endRowId=d;o.direction=f.direction;v.datas.push(o)}nt=a&&a._triggerEvent(ecount.grid.event.list.formBeforeAddedColumn,null,v)||{result:!0};nt.result&&rt(nt.addColumnInfos)},insertUpRow:function(){},insertDownRow:function(){},insertRow:function(n,t,i,r,u,f){var c,p,ut,bt,l,ot,s,w,d,g,tt,it,gt,st,ht;f=f||{direction:"down"};var o=this,e=ecount.grid.constValue,rt=o.__core.setting.eventsGet(),h=[],ft=[],et={gridId:o.optLayout.containerSelector,datas:[],callback:null},ct=e.sectionType.thead,lt=e.sectionType.tbody,nt=e.sectionType.tfoot,at,vt,yt,pt,b={top:t.top,bottom:r.bottom,left:t.left,right:r.right},ii={top:t.top,bottom:r.bottom,left:t.left,right:r.right},wt=function(t){for(var l,r,p,g,a,ut,w,k,ft,d,et,ot,tt,s=0,it=h.length;s<it;s++){if(l={thead:{"1":{columns:[]}},tbody:{"1":{columns:[]}},tfoot:{"1":{columns:[]}}},t.addColumnInfos)for(a in t.addColumnInfos)_.extend(l[a],t.addColumnInfos[a]);var f=o.dataColumn.getDetailSections(h[s].sectionType),v=o.dataColumn.getAll(h[s].sectionType,e.returnType.multi,!1,"system",{byDetailSection:!0}),y=f.indexOf(u),st=f.filter(function(n){return[e.sectionSeparateValue.slip].contains(u)?[e.sectionSeparateValue.slip,e.sectionSeparateValue.subtot1slip,e.sectionSeparateValue.subtot2slip,e.sectionSeparateValue.subtot3slip,e.sectionSeparateValue.subtot4slip,e.sectionSeparateValue.subtot5slip,e.sectionSeparateValue.pagetotslip].contains(n):[e.sectionSeparateValue.line].contains(u)?[e.sectionSeparateValue.line,e.sectionSeparateValue.subtot1,e.sectionSeparateValue.subtot2,e.sectionSeparateValue.subtot3,e.sectionSeparateValue.subtot4,e.sectionSeparateValue.subtot5,e.sectionSeparateValue.pagetot].contains(n):void 0});for(r=f.length-1;r>-1;r--)if(p=-1,g=-1,st.contains(f[r])){h[s].direction=="up"?(p=b.top,y<r?p+=f.slice(y,r).reduce(function(n,t){return v[t]&&(n+=v[t].columnRows.length),n},0):y>r&&(p-=f.slice(r,y).reduce(function(n,t){return v[t]&&(n+=v[t].columnRows.length),n},0))):h[s].direction=="down"&&(p=b.bottom,y<r?p+=f.slice(y,r).reduce(function(n,t){return v[t]&&(n+=v[t].columnRows.length),n},0):y>r&&(p-=f.slice(r,y).reduce(function(n,t){return v[t]&&(n+=v[t].columnRows.length),n},0)));for(a in l)l.hasOwnProperty(a)&&l[a][f[r]]&&l[a][f[r]].columns&&(g=Math.max(g,l[a][f[r]].columns.length));g<1&&(g=1);o.__core.fn.insertRow(h[s].sectionType,h[s].columnSectionType,f[r],p,h[s].direction,g,{defaultColumnValues:l})}}if(ut=rt&&rt._triggerEvent(ecount.grid.event.list.formAddedRow,null,{})||{isReload:!0},ut.isReload){for(c=[ct,lt,nt],w=[],k=0,ft=c.length;k<ft;k++)if(c[k]==ct&&o.__core.setting.setColumns(o.dataColumn.getAll(c[k])),rowDatas=o.dataRow.getAll(c[k]),rowDatas&&rowDatas.length)if(c[k]==nt){for(d=0,et=rowDatas.length;d<et;d++)ot=rowDatas[d],tt=ot[e.rowVariableNames.mergeSet],tt&&tt.length&&(w[d]||(w[d]={}),w[d][e.rowVariableNames.mergeSet]=tt);w&&w.length>0&&(w.forEach(function(n){n[e.rowVariableNames.mergeSet]&&n[e.rowVariableNames.mergeSet].remove(function(n){return n[e.rowVariableNames.isAutoMerge]})}),o.optRow[nt].additionalDatas&&o.optRow[nt].additionalDatas[e.rowVariableNames.mergeSet]&&delete o.optRow[nt].additionalDatas[e.rowVariableNames.mergeSet],o.__core.setting.setEditSpecialRowMerge(w))}else o.__core.setting.setRowData(c[k],rowDatas);o.__core.setting.setRowDataSample(lt,null).setIsRefreshForm(!0).setEventAfterSelect(!0).setEventSelectInfo({startSectionType:n,startColumnId:at,startRowId:yt,endSectionType:i,endColumnId:vt,endRowId:pt}).setEventAfterInsertRow(!0);$(o.optLayout.container.parentElement.parentElement).invisibleResize();o.__core.fn.render()}};for(et.callback=wt,c=o.__core.fn.getSectionTypes(n,i),ut=0,bt=c.length;ut<bt;ut++){var k=c[ut],kt=o.dataColumn.getDetailSections(k),p=o.dataColumn.getAll(k,e.returnType.multi,!0,"system"),dt=p.length,ni=p[0].length,ri=ni-1,a=o.__core.fn.getMultiSectionSelectionRange(k,n,t,i,r),ti=o.dataRow.getViewDataRenderingTableMapAll(k),v=null,y=null;for(l=a.bottom,ot=a.top;l>=ot;l--){if(s=ti[l][0],w=o.dataColumn.getById(s.columnSectionType,s.columnId),yt=s.rowId,pt=s.rowId,l==a.bottom||v&&v!=w.GROUP_FLAG||y&&y!=s.columnSectionType){for((v&&v!=w.GROUP_FLAG||y&&y!=s.columnSectionType)&&(h.push(d),ft.push(g),v=null,y=null),d={sectionType:k,columnSectionType:s.columnSectionType,detailSectionType:w.GROUP_FLAG,standardRowIndex:l,oneSectionRowIndex:l-dt*kt.indexOf(u),direction:f.direction,insertRowCount:1},g={sectionType:k,columnSectionType:s.columnSectionType,detailSectionType:w.GROUP_FLAG,standardRowIndex:l,oneSectionRowIndex:l-dt*kt.indexOf(u),direction:f.direction,columnRows:[]},tt=p.splice(a.top,a.bottom-a.top+1),it=0,gt=tt.length;it<gt;it++)tt[it].splice(a.right+1),tt[it].splice(0,a.left);g.columnRows=tt;s.columnSectionType==e.sectionType.tfoot&&(st=o.dataColumn.getAll(e.sectionType.tbody,e.returnType.multi),d.standardRowIndex=s.trIdx-st.length,g.standardRowIndex=s.trIdx-st.length)}(v&&v==w.GROUP_FLAG||y&&y==s.columnSectionType)&&(d.insertRowCount+=1,f.direction=="up"&&(d.standardRowIndex-=1,g.standardRowIndex-=1));l==ot&&(h.push(d),ft.push(g));v=w.GROUP_FLAG;y=s.columnSectionType}}p=o.dataColumn.getAll(n,e.returnType.multi);at=p[b.top][b.left].id;p=o.dataColumn.getAll(i,e.returnType.multi);vt=p[b.bottom][b.right].id;et.datas=ft;ht=rt&&rt._triggerEvent(ecount.grid.event.list.formBeforeAddedRow,null,et)||{result:!0};ht.result&&wt(ht)},removeColumn:function(n,t,i,r){var f=this,v=ecount.grid.constValue,s=f.__core.setting.eventsGet(),e={gridId:f.optLayout.containerSelector,datas:[],callback:null},l,a,h,y,p,u,o,w,b;for(f.optSelector.use&&(f.viewSelector.__datas.state=v.selector.state.mouseup),l=function(){var u=f.__core.fn.removeColumn(n,n,null,{left:t.left,right:r.right}),i,o;for(i in u)e[i]||(e[i]={}),e[i].columnRows=u[i].columns;$(f.optLayout.container.parentElement.parentElement).invisibleResize();o=s&&s._triggerEvent(ecount.grid.event.list.formRemovedColumn,null,e)||{isReload:!0}},e.callback=l,a=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),h=0,y=a.length;h<y;h++){p=a[h];u=Object.clone(p,!0);u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var c=[],k=f.dataColumn.getAll(u.columnSectionType,v.returnType.multi,!0),c=k.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(o=0,w=c.length;o<w;o++)c[o].splice(u.boundary.right+1),c[o].splice(0,u.boundary.left);u.columnRows=c;e.datas.push(u)}b=s&&s._triggerEvent(ecount.grid.event.list.formBeforeRemovedColumn,null,e)||{result:!0};b.result&&l()},removeRow:function(n,t,i,r,u){function y(n,t){var i=0,r=s.dataColumn.getAll(n,f.returnType.multi);return r.forEach(function(n){n[0].GROUP_FLAG==t&&(i+=1)}),i}var s=this,f=ecount.grid.constValue,c=s.__core.setting.eventsGet(),o=[],e={gridId:s.optLayout.containerSelector,datas:[],callback:null},l=function(){var n,t;o.some(function(t){for(var c,h,i,l=s.dataColumn.getAll(t.sectionType,f.returnType.multi,!1,"system",{byDetailSection:!0}),o=s.dataColumn.getDetailSections(t.sectionType),a=o.indexOf(u),v=o.filter(function(n){return[f.sectionSeparateValue.slip].contains(u)?[f.sectionSeparateValue.slip,f.sectionSeparateValue.subtot1slip,f.sectionSeparateValue.subtot2slip,f.sectionSeparateValue.subtot3slip,f.sectionSeparateValue.subtot4slip,f.sectionSeparateValue.subtot5slip,f.sectionSeparateValue.pagetotslip].contains(n):[f.sectionSeparateValue.line].contains(u)?[f.sectionSeparateValue.line,f.sectionSeparateValue.subtot1,f.sectionSeparateValue.subtot2,f.sectionSeparateValue.subtot3,f.sectionSeparateValue.subtot4,f.sectionSeparateValue.subtot5,f.sectionSeparateValue.pagetot].contains(n):void 0}),r=o.length-1;r>-1;r--)if(v.contains(o[r])&&(c={top:t.columnBoundary.top,left:t.columnBoundary.left,bottom:t.columnBoundary.bottom,right:t.columnBoundary.right},h=0,a<r?(h=o.slice(a,r).reduce(function(n,t){return l[t]&&(n+=l[t].columnRows.length),n},0),c.top+=h,c.bottom+=h):a>r&&(h=o.slice(r,a).reduce(function(n,t){return l[t]&&(n+=l[t].columnRows.length),n},0),c.top-=h,c.bottom-=h),n=s.__core.fn.removeRowAtBoundary(t.sectionType,t.columnSectionType,o[r],c),n))for(i in n)n.hasOwnProperty(i)&&(e[i]||(e[i]={}),e[i].columnRows?(n[i].columnRows.splice(0,0,0,0),e[i].columnRows.splice.apply(e[i].columnRows,n[i].columnRows)):e[i]=n[i])});$(s.optLayout.container.parentElement.parentElement).invisibleResize();t=c&&c._triggerEvent(ecount.grid.event.list.formRemovedRow,null,e)||{isReload:!0}},h,a,v;for(e.callback=l,o=s.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),h=o.length-1;h>-1;h--)a=y(o[h].sectionType,o[h].detailSectionType),o[h].columnBoundary.bottom-o[h].columnBoundary.top+1==a&&o.splice(h,1);e.isRemove=o.length>0;e.datas=Object.clone(o,!0);v=c&&c._triggerEvent(ecount.grid.event.list.formBeforeRemovedRow,null,e)||{result:!0};v.result&&l()}};ecount.gridV2.handler.formV4MultiSectionContextmenu={addItem:function(n,t,i,r){var u=this,o=ecount.grid.constValue,f=u.__core.setting.eventsGet(),e={gridId:u.optLayout.containerSelector,datas:[]},s=u.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"});e.datas=s;u.optSelector.use&&(u.viewSelector.__datas.state=o.selector.state.mouseup);f&&f._triggerEvent(ecount.grid.event.list.formAddItem,null,e)},connectItem:function(n,t,i,r){for(var v,u,e,y,f=this,h=ecount.grid.constValue,c=f.__core.setting.eventsGet(),l={gridId:f.optLayout.containerSelector,datas:[]},a=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),s=0,p=a.length;s<p;s++){v=a[s];u=v;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var o=[],w=f.dataColumn.getAll(u.columnSectionType,h.returnType.multi,!0),o=w.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,y=o.length;e<y;e++)o[e].splice(u.boundary.right+1),o[e].splice(0,u.boundary.left);u.columnRows=o;l.datas.push(u)}f.optSelector.use&&(f.viewSelector.__datas.state=h.selector.state.mouseup);c&&c._triggerEvent(ecount.grid.event.list.formConnectItem,null,l)},deleteItem:function(n,t,i,r){var f=this,l=ecount.grid.constValue,a=f.__core.setting.eventsGet(),h={gridId:f.optLayout.containerSelector,datas:[],callback:null},w=function(){},c,o,v,y,u,e,p;for(h.callback=w,c=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),o=0,v=c.length;o<v;o++){y=c[o];u=y;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var s=[],b=f.dataColumn.getAll(u.columnSectionType,l.returnType.multi,!0),s=b.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,p=s.length;e<p;e++)s[e].splice(u.boundary.right+1),s[e].splice(0,u.boundary.left);u.columnRows=s;h.datas.push(u)}f.optSelector.use&&(f.viewSelector.__datas.state=l.selector.state.mouseup);a&&a._triggerEvent(ecount.grid.event.list.formDeleteItem,null,h)},setting:function(n,t,i,r){var f=this,a=ecount.grid.constValue,o=f.__core.setting.eventsGet(),s={gridId:f.optLayout.containerSelector,datas:[],callback:null},v=function(){f.optSelector.use&&(f.viewSelector.__datas.state=a.selector.state.mouseup);o&&o._triggerEvent(ecount.grid.event.list.formSetting,null,s)},l,h,y,p,u,e,w,b;for(s.callback=v,l=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),h=0,y=l.length;h<y;h++){p=l[h];u=p;u.boundary=u.columnBoundary;delete u.columnBoundary;delete u.rowBoundary;var c=[],k=f.dataColumn.getAll(u.columnSectionType,a.returnType.multi,!0),c=k.splice(u.boundary.top,u.boundary.bottom-u.boundary.top+1);for(e=0,w=c.length;e<w;e++)c[e].splice(u.boundary.right+1),c[e].splice(0,u.boundary.left);u.columnRows=c;s.datas.push(u)}b=o&&o._triggerEvent(ecount.grid.event.list.formBeforeSetting,null,s)||{result:!0};b.result&&v()},allsetting:function(n,t,i,r){var u=this,s=ecount.grid.constValue,f=u.__core.setting.eventsGet(),e={gridId:u.optLayout.containerSelector,datas:[]},h=function(){u.optSelector.use&&(u.viewSelector.__datas.state=s.selector.state.mouseup);f&&f._triggerEvent(ecount.grid.event.list.formBatchSetting,null,e)},c=u.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),o;e.datas=c;o=f&&f._triggerEvent(ecount.grid.event.list.formBeforeBatchSetting,null,e)||{result:!0};o.result&&h()},freezeLeftColumn:function(){function a(t){for(var r=!0,f=0,c=t.length;f<c;f++){var i=t[f],o=i[n.rowVariableNames.mergeStartIndex],p=Math.floor(o/l),s=o%l,a=i[n.rowVariableNames.rowspanCount]||1,v=i[n.rowVariableNames.colspanCount]||1,w=a-1,y=v-1,e=s,h=s+y;if(boundary.left<=e&&e<=boundary.right){if(boundary.right<h){r=!1;u=i;break}}else if(boundary.left>e&&boundary.right<h){r=!1;u=i;break}}return r}function s(i){for(var r=0,u=i.length;r<u;r++){var e=i[r],f=e[n.rowVariableNames.mergeSet];if(f&&(t.isPossibleLeftFixed=a(f)),!t.isPossibleLeftFixed)break}}var i=this,n=ecount.grid.constValue,f=i.__core.setting.eventsGet(),t={isPossibleLeftFixed:!0,collideLeftFixedType:"none",callback:null},o=n.sectionType.thead,h=n.sectionType.tbody,w=n.sectionType.tfoot,c=function(){i.__core.fn.setCellCancelLeftFixed(sectionType,columnSectionType,selectionType,boundary);i.__core.fn.setCellLeftFixed(sectionType,columnSectionType,selectionType,boundary);f&&f._triggerEvent(ecount.grid.event.list.formSetFixed,null,{})},b=i.dataColumn.getAll(o,n.returnType.multi,!0),l=b[0].length,k=i.dataRow.getAll(o),d=i.dataRow.getAll(h),g=i.dataRow.getAll(w),u,r,e,v,p;if(s(k),t.isPossibleLeftFixed&&s(d),t.isPossibleLeftFixed&&s(g),t.callback=c,r=[],i.optCommon.columnType==n.columnType.single?i.dataRow.addTotalMergeSet(o,columnSectionType,null,r):i.dataRow.addTotalMergeSet(h,columnSectionType,null,r),t.isPossibleLeftFixed)t.isPossibleLeftFixed=a(r),t.isPossibleLeftFixed||(t.collideLeftFixedType="sum");else if(t.collideLeftFixedType="data",u)for(e=0,v=r.length;e<v;e++){var y=r[e],nt=y[n.rowVariableNames.mergeStartIndex],tt=y[n.rowVariableNames.colspanCount]||1,it=u[n.rowVariableNames.mergeStartIndex],rt=u[n.rowVariableNames.colspanCount]||1;if(nt==it&&tt&&rt){t.collideLeftFixedType="sum";break}}p=f&&f._triggerEvent(ecount.grid.event.list.formSetBeforeFixed,null,t)||{result:!0};p.result&&c()},cancelFreezeLeftColumn:function(){var f=this,n=ecount.grid.constValue,t=f.__core.setting.eventsGet(),i={isPossibleCancelLeftFixed:!1,callback:null},v=n.sectionType.thead,y=n.sectionType.tbody,p=n.sectionType.tfoot,s=function(){f.__core.fn.setCellCancelLeftFixed(sectionType,columnSectionType,selectionType,boundary);t&&t._triggerEvent(ecount.grid.event.list.formSetCancelFixed,null,{})},e,r,h,o,u,c,l,a;for(i.callback=s,e=f.dataColumn.getAll(v,n.returnType.multi,!0),r=0,h=e.length;r<h;r++){for(o=e[r],u=0,c=o.length;u<c;u++)if(l=o[u],ecount.common.isTrue(l.LEFT_FIXD_STND_TF)){i.isPossibleCancelLeftFixed=!0;break}if(i.isPossibleCancelLeftFixed)break}a=t&&t._triggerEvent(ecount.grid.event.list.formSetBeforeCancelFixed,null,i)||{result:!0};a.result&&s()},leftFixed:function(n,t,i,r,u,f){function it(n){for(var i=!0,r=0,c=n.length;r<c;r++){var t=n[r],f=t[e.constValue.rowVariableNames.mergeStartIndex],w=Math.floor(f/y),o=f%y,l=t[e.constValue.rowVariableNames.rowspanCount]||1,a=t[e.constValue.rowVariableNames.colspanCount]||1,b=l-1,v=a-1,u=o,h=o+v;if(s.left<=u&&u<=s.right){if(s.right<h){i=!1;p=t;break}}else if(s.left>u&&s.right<h){i=!1;p=t;break}}return i}function c(n){for(var t=0,i=n.length;t<i;t++){var u=n[t],r=u[e.constValue.rowVariableNames.mergeSet];if(r&&(o.isPossibleLeftFixed=it(r)),!o.isPossibleLeftFixed)break}}var e=this,h=e.__setting.eventsGet(),o={isPossibleLeftFixed:!0,collideLeftFixedType:"none",callback:null},l=this.constValue.sectionType.thead,b=this.constValue.sectionType.tbody,k=this.constValue.sectionType.tfoot,a=f.columnSectionType,s=f.boundary,v=function(){e.__core.fn.setCellCancelLeftFixed(n,a,null,s);e.__core.fn.setCellLeftFixed(n,a,null,s);h&&h._triggerEvent(ecount.grid.event.list.formSetFixed,null,{})},d=e.dataColumn.getAll(l,e.constValue.returnType.multi,!0),y=d[0].length,g=e.dataRow.getAll(l),nt=e.dataRow.getAll(b),tt=e.dataRow.getAll(k),p,w;c(g);o.isPossibleLeftFixed&&c(nt);o.isPossibleLeftFixed&&c(tt);o.callback=v;o.collideLeftFixedType="data";w=h&&h._triggerEvent(ecount.grid.event.list.formSetBeforeFixed,null,o)||{result:!0};w.result&&v()},cancelLeftFixed:function(n,t,i,r,u,f){var e=this,o=e.__setting.eventsGet(),s={isPossibleCancelLeftFixed:!1,callback:null},k=this.constValue.sectionType.thead,nt=this.constValue.sectionType.tbody,tt=this.constValue.sectionType.tfoot,d=f.columnSectionType,g=f.boundary,v=function(){e.__core.fn.setCellCancelLeftFixed(sectionType,d,null,g);o&&o._triggerEvent(ecount.grid.event.list.formSetCancelFixed,null,{})},l,h,y,a,c,p,w,b;for(s.callback=v,l=e.dataColumn.getAll(k,e.constValue.returnType.multi,!0),h=0,y=l.length;h<y;h++){for(a=l[h],c=0,p=a.length;c<p;c++)if(w=a[c],ecount.common.isTrue(w.LEFT_FIXD_STND_TF)){s.isPossibleCancelLeftFixed=!0;break}if(s.isPossibleCancelLeftFixed)break}b=o&&o._triggerEvent(ecount.grid.event.list.formSetBeforeCancelFixed,null,s)||{result:!0};b.result&&v()},cut:function(){for(var t,p,n,f,e,o,s,k,i=this,h=ecount.grid.constValue,c=i.__core.setting.eventsGet(),l={gridId:i.optLayout.containerSelector,datas:[]},w=[],d=function(){i.optSelector.use&&(i.viewSelector.__datas.state=h.selector.state.mouseup);c&&c._triggerEvent(ecount.grid.event.list.formCut,null,l)},b=i.__core.fn.getSectionTypes(startSectionType,endSectionType),v=0,g=b.length;v<g;v++){var a=b[v],y=i.__core.fn.getMultiSectionSelectionRange(a,startSectionType,startBoundary,endSectionType,endBoundary),nt=i.dataRow.getViewDataRenderingTableMapAll(a),r=null,u=null;for(t=y.bottom,p=y.top;t>=p;t--)n=nt[t][0],f=i.dataColumn.getById(n.columnSectionType,n.columnId),(t==y.bottom||r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&((r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&(w.push(e),l.datas.unshift(o),r=null,u=null),e={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},o={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},n.columnSectionType==h.sectionType.tfoot&&(s=i.dataColumn.getAll(h.sectionType.tbody,h.returnType.multi),e.boundary.top=n.trIdx-s.length,e.boundary.bottom=n.trIdx-s.length,o.boundary.top=n.trIdx-s.length,o.boundary.bottom=n.trIdx-s.length)),(r&&r==f.GROUP_FLAG||u&&u==n.columnSectionType)&&(e.boundary.top-=1,o.boundary.top-=1),t==p&&(w.push(e),l.datas.unshift(o)),r=f.GROUP_FLAG,u=n.columnSectionType}k=c&&c._triggerEvent(ecount.grid.event.list.formBeforeCut,null,l)||{result:!0};k.result&&d()},copy:function(){for(var t,p,n,f,e,o,s,k,i=this,h=ecount.grid.constValue,c=i.__core.setting.eventsGet(),l={gridId:i.optLayout.containerSelector,datas:[]},w=[],d=function(){i.optSelector.use&&(i.viewSelector.__datas.state=h.selector.state.mouseup);c&&c._triggerEvent(ecount.grid.event.list.formCopy,null,l)||{result:!0}},b=i.__core.fn.getSectionTypes(startSectionType,endSectionType),v=0,g=b.length;v<g;v++){var a=b[v],y=i.__core.fn.getMultiSectionSelectionRange(a,startSectionType,startBoundary,endSectionType,endBoundary),nt=i.dataRow.getViewDataRenderingTableMapAll(a),r=null,u=null;for(t=y.bottom,p=y.top;t>=p;t--)n=nt[t][0],f=i.dataColumn.getById(n.columnSectionType,n.columnId),(t==y.bottom||r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&((r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&(w.push(e),l.datas.unshift(o),r=null,u=null),e={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},o={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},n.columnSectionType==h.sectionType.tfoot&&(s=i.dataColumn.getAll(h.sectionType.tbody,h.returnType.multi),e.boundary.top=n.trIdx-s.length,e.boundary.bottom=n.trIdx-s.length,o.boundary.top=n.trIdx-s.length,o.boundary.bottom=n.trIdx-s.length)),(r&&r==f.GROUP_FLAG||u&&u==n.columnSectionType)&&(e.boundary.top-=1,o.boundary.top-=1),t==p&&(w.push(e),l.datas.unshift(o)),r=f.GROUP_FLAG,u=n.columnSectionType}k=c&&c._triggerEvent(ecount.grid.event.list.formBeforeCopy,null,l)||{result:!0};k.result&&d()},paste:function(){for(var t,p,n,f,e,o,s,k,i=this,h=ecount.grid.constValue,c=i.__core.setting.eventsGet(),l={gridId:i.optLayout.containerSelector,datas:[]},w=[],d=function(){i.optSelector.use&&(i.viewSelector.__datas.state=h.selector.state.mouseup);c&&c._triggerEvent(ecount.grid.event.list.formPaste,null,l)||{result:!0}},b=i.__core.fn.getSectionTypes(startSectionType,endSectionType),v=0,g=b.length;v<g;v++){var a=b[v],y=i.__core.fn.getMultiSectionSelectionRange(a,startSectionType,startBoundary,endSectionType,endBoundary),nt=i.dataRow.getViewDataRenderingTableMapAll(a),r=null,u=null;for(t=y.bottom,p=y.top;t>=p;t--)n=nt[t][0],f=i.dataColumn.getById(n.columnSectionType,n.columnId),(t==y.bottom||r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&((r&&r!=f.GROUP_FLAG||u&&u!=n.columnSectionType)&&(w.push(e),l.datas.unshift(o),r=null,u=null),e={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},o={sectionType:a,columnSectionType:n.columnSectionType,detailSectionType:f.GROUP_FLAG,boundary:{top:t,bottom:t,left:startBoundary.left,right:endBoundary.right}},n.columnSectionType==h.sectionType.tfoot&&(s=i.dataColumn.getAll(h.sectionType.tbody,h.returnType.multi),e.boundary.top=n.trIdx-s.length,e.boundary.bottom=n.trIdx-s.length,o.boundary.top=n.trIdx-s.length,o.boundary.bottom=n.trIdx-s.length)),(r&&r==f.GROUP_FLAG||u&&u==n.columnSectionType)&&(e.boundary.top-=1,o.boundary.top-=1),t==p&&(w.push(e),l.datas.unshift(o)),r=f.GROUP_FLAG,u=n.columnSectionType}k=c&&c._triggerEvent(ecount.grid.event.list.formBeforePaste,null,l)||{result:!0};k.result&&d()},merge:function(n,t,i,r){var e=this,u=ecount.grid.constValue,c=e.__core.setting.eventsGet(),l={gridId:e.optLayout.containerSelector,datas:[],callback:null},s=[],ut=u.sectionType.thead,ft=u.sectionType.tbody,k=u.sectionType.tfoot,v,a,d,g,f,h,nt,it;for(e.optSelector.use&&(e.viewSelector.__datas.state=u.selector.state.mouseup),v=function(){var h,a,v,d,g,f,o;s.forEach(function(n){e.__core.fn.setCellMerge(n.sectionType,n.columnSectionType,null,n.columnBoundary,n.rowBoundary)});var t=s[0],r=s[s.length-1],nt=e.dataColumn.getAll(t.columnSectionType,u.returnType.multi);w=nt[t.columnBoundary.top][t.columnBoundary.left].id;h=e.dataColumn.getAll(r.columnSectionType,u.returnType.multi);b=h[r.columnBoundary.bottom][r.columnBoundary.right].id;a=e.dataRow.getAll(t.sectionType);v=a.find(function(n){if(t.columnSectionType==k){if(n[u.rowVariableNames.rowType]==u.rowType.separate)return n}else if(n[u.rowVariableNames.rowType]!=u.rowType.separate)return n});y=v[u.keyColumnPropertyName];d=e.dataRow.getAll(r.sectionType);g=d.find(function(n){if(r.columnSectionType==k){if(n[u.rowVariableNames.rowType]==u.rowType.separate)return n}else if(n[u.rowVariableNames.rowType]!=u.rowType.separate)return n});p=g[u.keyColumnPropertyName];f=e.viewCell.getCellElement(n,w,y).cell;o=e.viewCell.getCellOriginalElement(i,b,p)||{cell:null,map:{}};f&&o.cell&&e.viewSelector.ecSelectStart(f).ecSelectEnd(o.cell).ecDraw();$(e.optLayout.container.parentElement.parentElement).syncLineHandler();c&&c._triggerEvent(ecount.grid.event.list.formMerged,null,l)},l.callback=v,s=e.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),a=0,d=s.length;a<d;a++){g=s[a];f=Object.clone(g,!0);f.boundary=f.columnBoundary;delete f.columnBoundary;delete f.rowBoundary;var o=[],rt=e.dataColumn.getAll(f.columnSectionType,u.returnType.multi,!0),o=rt.splice(f.boundary.top,f.boundary.bottom-f.boundary.top+1);for(h=0,nt=o.length;h<nt;h++)o[h].splice(f.boundary.right+1),o[h].splice(0,f.boundary.left);var tt=e.dataRow.getAll(f.sectionType),y=tt[0][u.keyColumnPropertyName],p=tt[0][u.keyColumnPropertyName],w=o[0][0].id,b=o[o.length-1][o[0].length-1].id;f.startColumnId=w;f.startRowId=y;f.endColumnId=b;f.endRowId=p;f.columnRows=o;l.datas.push(f)}it=c&&c._triggerEvent(ecount.grid.event.list.formBeforeMerged,null,l)||{result:!0};it.result&&v()},divide:function(n,t,i,r){var f=this,u=ecount.grid.constValue,c=f.__core.setting.eventsGet(),s=[],l={gridId:f.optLayout.containerSelector,datas:[],callback:null},ut=u.sectionType.thead,ft=u.sectionType.tbody,k=u.sectionType.tfoot,v,y,p,w,b,a,d,g,e,h,nt,it;for(f.optSelector.use&&(f.viewSelector.__datas.state=u.selector.state.mouseup),b=function(){var e,o,h,a,b,d,g;s.forEach(function(n){f.__core.fn.setCellDivide(n.sectionType,n.columnSectionType,null,n.columnBoundary)});f.optSelector.use&&(f.viewSelector.__datas.state=u.selector.state.mouseup);var t=s[0],r=s[s.length-1],nt=f.dataColumn.getAll(t.columnSectionType,u.returnType.multi);v=nt[t.columnBoundary.top][t.columnBoundary.left].id;e=f.dataColumn.getAll(r.columnSectionType,u.returnType.multi);y=e[r.columnBoundary.bottom][r.columnBoundary.right].id;o=f.dataRow.getAll(t.sectionType);h=o.find(function(n){if(t.columnSectionType==k){if(n[u.rowVariableNames.rowType]==u.rowType.separate)return n}else if(n[u.rowVariableNames.rowType]!=u.rowType.separate)return n});p=h[u.keyColumnPropertyName];a=f.dataRow.getAll(r.sectionType);b=a.find(function(n){if(r.columnSectionType==k){if(n[u.rowVariableNames.rowType]==u.rowType.separate)return n}else if(n[u.rowVariableNames.rowType]!=u.rowType.separate)return n});w=b[u.keyColumnPropertyName];d=f.viewCell.getCellElement(n,v,p).cell;g=f.viewCell.getCellElement(i,y,w).cell;f.viewSelector.ecSelectStart(d).ecSelectEnd(g).ecDraw();$(f.optLayout.container.parentElement.parentElement).syncLineHandler();c&&c._triggerEvent(ecount.grid.event.list.formDivided,null,l)},l.callback=b,s=f.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),a=0,d=s.length;a<d;a++){g=s[a];e=Object.clone(g,!0);e.boundary=e.columnBoundary;delete e.columnBoundary;delete e.rowBoundary;var o=[],rt=f.dataColumn.getAll(e.columnSectionType,u.returnType.multi,!0),o=rt.splice(e.boundary.top,e.boundary.bottom-e.boundary.top+1);for(h=0,nt=o.length;h<nt;h++)o[h].splice(e.boundary.right+1),o[h].splice(0,e.boundary.left);var tt=f.dataRow.getAll(e.sectionType),p=tt[0][u.keyColumnPropertyName],w=tt[0][u.keyColumnPropertyName],v=o[0][0].id,y=o[o.length-1][o[0].length-1].id;e.startColumnId=v;e.startRowId=p;e.endColumnId=y;e.endRowId=w;e.columnRows=o;l.datas.push(e)}it=c&&c._triggerEvent(ecount.grid.event.list.formBeforeDivided,null,l)||{result:!0};it.result&&b()},insertRightColumn:function(){},insertLeftColumn:function(){},insertColumn:function(n,t,i,r,u,f){var o=this,d=ecount.grid.constValue,h=o.__core.setting.eventsGet(),c={gridId:o.optLayout.containerSelector,datas:[],callback:null},p=function(n){o.__core.fn.addColumnSection(f.direction,{left:t.left,right:r.right},n);$(o.optLayout.container.parentElement.parentElement).syncLineHandler();h&&h._triggerEvent(ecount.grid.event.list.formAddedColumn,null,{})},v,l,w,b,e,s,k,y;for(c.callback=p,c.direction=f.direction,v=o.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),l=0,w=v.length;l<w;l++){b=v[l];e=Object.clone(b,!0);e.boundary=e.columnBoundary;delete e.columnBoundary;delete e.rowBoundary;var a=[],g=o.dataColumn.getAll(e.columnSectionType,d.returnType.multi,!0),a=g.splice(e.boundary.top,e.boundary.bottom-e.boundary.top+1);for(s=0,k=a.length;s<k;s++)a[s].splice(e.boundary.right+1),a[s].splice(0,e.boundary.left);e.columnRows=a;e.direction=f.direction;c.datas.push(e)}y=h&&h._triggerEvent(ecount.grid.event.list.formBeforeAddedColumn,null,c)||{result:!0};y.result&&p(y.addColumnInfos)},insertUpRow:function(){},insertDownRow:function(){},insertRow:function(n,t,i,r,u,f){var ft,tt,lt,h,ot,c,w,l,b,p,at,k,d,vt,st,ht;f=f||{direction:"down"};var o=this,e=ecount.grid.constValue,pt=e.sectionType.thead,wt=e.sectionType.tbody,g=e.sectionType.tfoot,nt=o.__core.setting.eventsGet(),s=[],rt=[],ut={gridId:o.optLayout.containerSelector,datas:[],callback:null},a,n,i,ct=function(n){for(var d,v,y,u,h,c,l,i,t,w,b,k,p,r=0,tt=s.length;r<tt;r++){if(d={thead:{"1":{columns:[]}},tbody:{"1":{columns:[]}},tfoot:{"1":{columns:[]}}},v=-1,n.addColumnInfos)for(y in n.addColumnInfos)n.addColumnInfos.hasOwnProperty(y)&&(_.extend(d[y],n.addColumnInfos[y]),n.addColumnInfos[y][s[r].detailSectionType]&&n.addColumnInfos[y][s[r].detailSectionType].columns&&(v=Math.max(v,n.addColumnInfos[y][s[r].detailSectionType].columns.length)));v<1?v=1:s[r].insertRowCount=v;a[r].insertRowCount=v;o.__core.fn.insertRow(s[r].sectionType,s[r].columnSectionType,s[r].detailSectionType,s[r].standardRowIndex,s[r].direction,s[r].insertRowCount,{defaultColumnValues:d})}i=a[0];t=a[a.length-1];f.direction=="up"?(u=o.dataColumn.getAll(i.columnSectionType||i.sectionType,e.returnType.multi),h=u[i.columnBoundary.top][i.columnBoundary.left],c=o.dataRow.getAll(i.sectionType),l=c.find(function(n){return i.columnSectionType==g?n[e.rowVariableNames.rowType]==e.rowType.separate:n[e.rowVariableNames.rowType]!=e.rowType.separate}),w=o.viewCell.getCellElement(i.sectionType,h.id,l[e.keyColumnPropertyName]).cell,k=t.columnBoundary.bottom+a.filter(function(n){return n.columnSectionType==t.columnSectionType}).sum(function(n){return n.insertRowCount}),u=o.dataColumn.getAll(t.columnSectionType||t.sectionType,e.returnType.multi),h=u[k][t.columnBoundary.right],c=o.dataRow.getAll(t.sectionType),l=c.find(function(n){return t.columnSectionType==g?n[e.rowVariableNames.rowType]==e.rowType.separate:n[e.rowVariableNames.rowType]!=e.rowType.separate}),b=o.viewCell.getCellOriginalElement(t.sectionType,h.id,l[e.keyColumnPropertyName])):f.direction=="down"&&(u=o.dataColumn.getAll(i.columnSectionType||i.sectionType,e.returnType.multi),h=u[i.columnBoundary.top][i.columnBoundary.left],c=o.dataRow.getAll(i.sectionType),l=c.find(function(n){return i.columnSectionType==g?n[e.rowVariableNames.rowType]==e.rowType.separate:n[e.rowVariableNames.rowType]!=e.rowType.separate}),w=o.viewCell.getCellElement(i.sectionType,h.id,l[e.keyColumnPropertyName]).cell,k=t.columnBoundary.bottom+a.filter(function(n){return n.columnSectionType==t.columnSectionType}).sum(function(n){return n.insertRowCount}),u=o.dataColumn.getAll(t.columnSectionType||t.sectionType,e.returnType.multi),h=u[k][t.columnBoundary.right],c=o.dataRow.getAll(t.sectionType),l=c.find(function(n){return t.columnSectionType==g?n[e.rowVariableNames.rowType]==e.rowType.separate:n[e.rowVariableNames.rowType]!=e.rowType.separate}),b=o.viewCell.getCellOriginalElement(t.sectionType,h.id,l[e.keyColumnPropertyName]));w&&b.cell&&(o.viewSelector.hideOption().ecSelectByElement(w,b.cell).ecDraw().show(),p=o.__core.fn.getDisplaySelectorOption(),p.isHorizontal&&p.isVertical?o.viewSelector.showOption({isShowCross:!0}):p.isHorizontal?o.viewSelector.showOption({isShowHorizontal:!0}):p.isVertical&&o.viewSelector.showOption({isShowVertical:!0}));$(o.optLayout.container.parentElement.parentElement).syncLineHandler();nt&&nt._triggerEvent(ecount.grid.event.list.formAddedRow,null,{})};for(ut.callback=ct,ft=o.__core.fn.getSectionTypes(n,i),a=o.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),tt=0,lt=ft.length;tt<lt;tt++){var it=ft[tt],et=o.__core.fn.getMultiSectionSelectionRange(it,n,t,i,r),yt=o.dataRow.getViewDataRenderingTableMapAll(it),v=null,y=null;for(h=et.bottom,ot=et.top;h>=ot;h--){if(c=yt[h][0],w=o.dataColumn.getById(c.columnSectionType,c.columnId),h==et.bottom||v&&v!=w.GROUP_FLAG||y&&y!=c.columnSectionType){if((v&&v!=w.GROUP_FLAG||y&&y!=c.columnSectionType)&&(s.push(l),rt.push(b),v=null,y=null),l={sectionType:it,columnSectionType:c.columnSectionType,detailSectionType:w.GROUP_FLAG,standardRowIndex:h,direction:f.direction,insertRowCount:1},b={sectionType:it,columnSectionType:c.columnSectionType,detailSectionType:w.GROUP_FLAG,standardRowIndex:h,direction:f.direction,insertRowCount:1},p=a.find(function(n){return n.columnSectionType==l.columnSectionType&&n.sectionType==l.sectionType&&n.detailSectionType&&l.detailSectionType}),p){for(at=o.dataColumn.getAll(p.columnSectionType,e.returnType.multi,!0,"system"),k=at.splice(p.columnBoundary.top,p.columnBoundary.bottom-p.columnBoundary.top+1),d=0,vt=k.length;d<vt;d++)k[d].splice(p.columnBoundary.right+1),k[d].splice(0,p.columnBoundary.left);b.columnRows=k}c.columnSectionType==e.sectionType.tfoot&&(st=o.dataColumn.getAll(e.sectionType.tbody,e.returnType.multi),l.standardRowIndex=h-st.length,b.standardRowIndex=h-st.length)}(v&&v==w.GROUP_FLAG||y&&y==c.columnSectionType)&&(l.insertRowCount+=1,f.direction=="up"&&(l.standardRowIndex-=1,b.standardRowIndex-=1));h==ot&&(s.push(l),rt.push(b));v=w.GROUP_FLAG;y=c.columnSectionType}}ut.datas=rt;ht=nt&&nt._triggerEvent(ecount.grid.event.list.formBeforeAddedRow,null,ut)||{result:!0};ht.result&&ct(ht)},removeColumn:function(n,t,i,r,u,f){var o=this,p=ecount.grid.constValue,c=o.__core.setting.eventsGet(),s={gridId:o.optLayout.containerSelector,datas:[],callback:null},g=f.columnSectionType,v,y,l,w,b,e,h,k,d;for(o.optSelector.use&&(o.viewSelector.__datas.state=p.selector.state.mouseup),v=function(){var u=o.__core.fn.removeColumn(n,g,null,{left:t.left,right:r.right});for(var i in u)s[i]||(s[i]={}),s[i].columnRows=u[i].columns;$(o.optLayout.container.parentElement.parentElement).syncLineHandler();c&&c._triggerEvent(ecount.grid.event.list.formRemovedColumn,null,s)},s.callback=v,y=o.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),l=0,w=y.length;l<w;l++){b=y[l];e=Object.clone(b,!0);e.boundary=e.columnBoundary;delete e.columnBoundary;delete e.rowBoundary;var a=[],nt=o.dataColumn.getAll(e.columnSectionType,p.returnType.multi,!0),a=nt.splice(e.boundary.top,e.boundary.bottom-e.boundary.top+1);for(h=0,k=a.length;h<k;h++)a[h].splice(e.boundary.right+1),a[h].splice(0,e.boundary.left);e.columnRows=a;s.datas.push(e)}d=c&&c._triggerEvent(ecount.grid.event.list.formBeforeRemovedColumn,null,s)||{result:!0};d.result&&v()},removeRow:function(n,t,i,r){function v(n,t){var i=0,r=o.dataColumn.getAll(n,a.returnType.multi);return r.forEach(function(n){n[0].GROUP_FLAG==t&&(i+=1)}),i}var o=this,a=ecount.grid.constValue,s=o.__core.setting.eventsGet(),u=[],e={gridId:o.optLayout.containerSelector,datas:[],callback:null},h=function(){var n;u.some(function(t){if(n=o.__core.fn.removeRowAtBoundary(t.sectionType,t.columnSectionType,t.detailSectionType,t.columnBoundary),n)for(var i in n)n.hasOwnProperty(i)&&(e[i]||(e[i]={}),e[i]=n[i])});$(o.optLayout.container.parentElement.parentElement).syncLineHandler();s&&s._triggerEvent(ecount.grid.event.list.formRemovedRow,null,e)},f,c,l;for(e.callback=h,u=o.__core.fn.getRangeInformationsByRange(n,t,i,r,{returnType:"array"}),f=u.length-1;f>-1;f--)c=v(u[f].columnSectionType||u[f].sectionType,u[f].detailSectionType),u[f].columnBoundary.bottom-u[f].columnBoundary.top+1==c&&u.splice(f,1);e.isRemove=u.length>0;e.datas=Object.clone(u,!0);l=s&&s._triggerEvent(ecount.grid.event.list.formBeforeRemovedRow,null,e)||{result:!0};l.result&&h()}};ecount.gridV2.handler.resize={resizeEnable:function(n,t){(n.moveWidth||n.moveHeight)&&this.core.state=="none"&&(this.core.state="resize",this.mixinOption.optSelector.use&&(this.mixinOption.viewSelector.hide().hideOption(),this.mixinOption.viewOverlay&&(this.mixinOption.viewOverlay.hideAll(n,t),this.mixinOption.viewOverlay.__datas.selectRowSectionType=null,this.mixinOption.viewOverlay.unbindConatinerEventMousemove()),this.core.dropdownmenu.activeSectionType&&this.core.dropdownmenu.activeColumnId&&this.core.dropdownmenu.activeRowId&&this.core.fn.visibleLayer(this.core.dropdownmenu.activeSectionType,this.core.dropdownmenu.activeColumnId,this.core.dropdownmenu.activeRowId,!1)),this.mixinOption.viewOuterHorizontal&&this.mixinOption.viewOuterHorizontal.visible(!1),this.mixinOption.viewOuterVertical&&this.mixinOption.viewOuterVertical.visible(!1))},resizeStart:function(n){function tt(n){var i=u.mixinOption.dataRow.getViewDataCellMap(n.sectionType,n.columnId,n.rowId),e,r;switch(n.sectionType){case a:t=i.cellInfo.columnRowIdx-1;t<0&&(t=0);f=u.mixinOption.dataRow.getViewDataRenderingTableMapByColumnIndex(n.sectionType,t,i.cellInfo.columnIdx);n.columnId=f.columnId;break;case v:i.rowInfo.trIdx[i.cellInfo.columnRowIdx]===0?(n.sectionType=a,e=u.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.sectionType),r=e[e.length-1][i.cellInfo.columnIdx],n.columnId=r.columnId,n.rowId=r.rowId):(e=u.mixinOption.dataRow.getViewDataRenderingTableMapAll(n.sectionType),r=e[i.rowInfo.trIdx[i.cellInfo.columnRowIdx]-1][i.cellInfo.columnIdx],n.columnId=r.columnId,n.rowId=r.rowId);break;case nt:i.rowInfo.trIdx[i.cellInfo.columnRowIdx]===0?(n.sectionType=v,t=i.rowInfo.trIdx.length>1?i.rowInfo.trIdx.length-1:i.cellInfo.columnRowIdx,f=u.mixinOption.dataRow.getViewDataRenderingTableMapByColumnIndex(n.sectionType,t,i.cellInfo.columnIdx),n.columnId=f.columnId,n.rowId=f.rowId):(t=i.cellInfo.columnRowIdx!==0?i.cellInfo.columnRowIdx-1:i.rowInfo.trIdx.length-1,f=u.mixinOption.dataRow.getViewDataRenderingTableMapByColumnIndex(n.sectionType,t,i.cellInfo.columnIdx),n.columnId=f.columnId,n.rowId=f.rowId)}}function it(n){var t=u.mixinOption.dataRow.getViewDataCellMap(n.sectionType,n.columnId,n.rowId),i=u.mixinOption.dataRow.getViewDataRenderingTableMapByColumnIndex(n.sectionType,t.cellInfo.columnRowIdx,t.cellInfo.columnIdx-1);n.columnId=i.columnId}var u=this,e=ecount.grid.constValue,a=e.sectionType.thead,v=e.sectionType.tbody,nt=e.sectionType.tfoot,t,f,r,h;n.isTop&&tt(n);n.isLeft&&it(n);var s=this.mixinOption.viewCell.getCellElement(n.sectionType,n.columnId,n.rowId),l=this.mixinOption.dataRow.getViewDataTrMap(n.sectionType,n.rowId),i=l.rowInfo[n.columnId],rt=this.mixinOption.dataRow.getViewDataRenderingTableMap(n.sectionType,i.columnRowIdx),y=rt[i.columnIdx],p,ut=s&&s.cell,w=this.mixinOption.dataColumn.getAll(n.sectionType,e.returnType.multi),b=y[e.rowVariableNames.colspanCount]||1,k=y[e.rowVariableNames.rowspanCount]||1,c=b-1,ft=k-1,o=[],d=0,g=0;if(s&&s.map&&s.map.cellInfo&&(p=this.mixinOption.viewRow.getRowElement(n.sectionType,n.rowId,i.columnRowIdx)),c==0)o.push(1);else{for(r=i.columnIdx,h=i.columnIdx+c;r<=h;r++)d+=parseInt(w[0][r].width,10);for(r=i.columnIdx,h=i.columnIdx+c;r<=h;r++)r==h?o.push(1-g):(o.push(parseInt(w[0][r].width,10)/d),g+=o[o.length-1])}return{cellElem:ut,rowElem:p,sectionType:n.sectionType,rowId:n.rowId,columnId:n.columnId,tableId:l.tableId,tableIndex:l.tableIndex,columnIdx:i.columnIdx,columnRowIdx:i.columnRowIdx,widthRatio:o,changeAllColRow:n.changeAllColRow,changeAllRow:n.changeAllRow,colspanCount:b,rowspanCount:k,colspanIndex:c,rowspanIndex:ft}},resizeMove:function(n){var i=ecount.grid.constValue,w=i.sectionType.thead,b=i.sectionType.tbody,k=i.sectionType.tfoot,h=this.setting.eventsGet(),e,t,s,f,l,u;if(n.isTopCheck&&(t=this.mixinOption.dataRow.getViewDataCellMap(n.sectionType,n.columnId,n.rowId),t&&t.cellInfo))return t.cellInfo.columnRowIdx===0;if(n.isLeftCheck&&(t=this.mixinOption.dataRow.getViewDataCellMap(n.sectionType,n.columnId,n.rowId),t&&t.cellInfo))return this.mixinOption.dataRow.getViewDataRenderingTableMapByColumnIndex(n.sectionType,t.cellInfo.columnRowIdx,t.cellInfo.columnIdx-1);if(this.core.state!="resize")return!1;if(n.moveWidth)if(ecount.gridV2.handler.resize.setVariableResetFullSize.call(this),s=parseInt(n.width,10),f=this.mixinOption.optResize.groupColumns&&this.mixinOption.optResize.groupColumns[n.columnId].slice(),f){f.unshift(n.columnId);for(var o=0,c=f.length,l=this.mixinOption.dataColumn.getAll(n.sectionType,i.returnType.multi),a=parseInt(n.widthGap,10),s=Math.round(a/(n.columnIdx+1)),d=a/c;o<c;o++){var y=this.mixinOption.dataColumn.getById(n.sectionType,f[o]),r=this.mixinOption.dataColumn.getIndexById(n.sectionType,i.returnColumnIndexType.multi,f[o]),u=Math.round(n.startOffsetWidth+s*n.widthRatio[0]);this.mixinOption.view&&this.mixinOption.view.fix&&this.mixinOption.view.fix.setCloneColumnWidth(n,r,u+"px");this.mixinOption.viewTable.setColgroupElementWidth(n.sectionType,n.tableId+n.tableIndex,r,u+"px");this.mixinOption.dataColumn.setColumnInfo(n.sectionType,y.id,{width:u})}this.mixinOption.view&&this.mixinOption.view.fix&&this.mixinOption.view.fix.updateCloneTableWidth(n);this.mixinOption.viewTable.setTableElementWidth(n.sectionType,n.tableId+n.tableIndex,this.mixinOption.dataColumn.getTotalWidth()+"px")}else{l=this.mixinOption.dataColumn.getAll(n.sectionType,i.returnType.multi);for(var r=n.columnIdx,v=0,p=r+n.colspanIndex;r<=p;r++,v++)u=Math.round(s*n.widthRatio[v]),this.mixinOption.view&&this.mixinOption.view.fix&&this.mixinOption.view.fix.setCloneColumnWidth(n,r,u+"px"),this.mixinOption.viewTable.setColgroupElementWidth(n.sectionType,n.tableId+n.tableIndex,r,u+"px"),this.mixinOption.dataColumn.setColumnInfo(n.sectionType,l[0][r].id,{width:u});this.mixinOption.view&&this.mixinOption.view.fix&&this.mixinOption.view.fix.setCloneTableWidth(n,this.mixinOption.dataColumn.getTotalWidth()+"px");this.mixinOption.viewTable.setTableElementWidth(n.sectionType,n.tableId+n.tableIndex,this.mixinOption.dataColumn.getTotalWidth()+"px")}n.moveHeight&&(e=$.isNumber(n.rowspan)&&n.rowspan>0?_.parseInt(n.columnRowIdx)+n.rowspan:n.columnRowIdx,n.changeAllColRow?n.changeAllRow?this.mixinOption.viewRow.setRowElementHeightAll(n.sectionType,e,n.height,n.changeAllRow):this.mixinOption.optCommon.columnType==i.columnType.single?this.mixinOption.viewRow.setRowElementHeightAll(n.sectionType,e,n.height):this.mixinOption.optCommon.columnType==i.columnType.multi&&this.mixinOption.viewRow.setRowElementHeight(n.sectionType,n.rowId,e,n.height):this.mixinOption.viewRow.setRowElementHeight(n.sectionType,n.rowId,e,n.height));(n.moveWidth||n.moveHeight)&&h&&h._triggerEvent(ecount.grid.event.list.resizing,{},{pageId:this.mixinOption.optCommon.ecPageId,tabId:this.mixinOption.optCommon.ecTabId,gridId:this.mixinOption.optCommon.ecGridId,isResizeWidth:n.moveWidth===!0,isResizeHeight:n.moveHeight===!0})},setVariableResetFullSize:function(){var n=this.core.$container,o=n&&n instanceof jQuery&&n.children("table"),t,e,i,h;if(n&&o){var c=o.parents("div.contents"),l=c.hasClass("variable-reset"),a=o.parents("body").hasClass("variable-full-size-y");if(n.length&&!n.hasClass("variable-reset-full-size")&&!l&&a){var s=n.find("table"),r={},u=s.eq(0),f=u.find("colGroup > col");for(r.table=u.get(0).getBoundingClientRect().width,t=0;t<f.length;t++)i=f.eq(t),r[i.attr("data-columnid")]=i.get(0).getBoundingClientRect().width;for(n.find("div.wrapper-toolbar.grid-header-toolbar, div.grid-clone-top").css("width",r.table),t=0;t<s.length;t++)for(u=s.eq(t),f=u.find("colGroup > col"),u.css("width",r.table),e=0;e<f.length;e++)i=f.eq(e),h=r[i.attr("data-columnid")],h&&i.css("width",r[i.attr("data-columnid")]);n.addClass("variable-reset-full-size")}}},resizeEnd:function(n){var i=ecount.grid.constValue,s=i.sectionType.thead,h=i.sectionType.tbody,c=i.sectionType.tfoot,r=n.sectionType,t,u,f;if(this.core.state=="resize"){if(u=this.setting.eventsGet(),n.moveHeight){this.mixinOption.optRow[r].trHeight instanceof Array||(this.mixinOption.optRow[r].trHeight=[]);var e=this.mixinOption.optRow[r].trHeight,o=n.columnRowIdx,l=n.rowId;e[o]=parseInt(n.height,10)}u&&u._triggerEvent(ecount.grid.event.list.resizeEndCompleted,{},{colList:this.mixinOption.dataColumn.getAll(n.sectionType,i.returnType.single,!0),resizedHeightType:n.sectionType==i.sectionType.thead?"header":"body",resizedWidth:n.moveWidth===!0?parseInt(n.width,10):0,resizedHeight:n.moveHeight===!0?parseInt(n.height,10):0,resizedColumnId:this.mixinOption.dataColumn.getByIndex(n.sectionType,n.columnIdx,!1).id});this.mixinOption.optSelector.use&&(f=this.mixinOption.viewSelector.getSelectionType(),this.mixinOption.viewSelector&&this.mixinOption.viewSelector.resetData(),this.mixinOption.viewOverlay&&this.mixinOption.viewOverlay.bindConatinerEventMousemove(),this.mixinOption.viewOuterHorizontal&&(t=this.mixinOption.viewOuterHorizontal.__datas.activeId,this.mixinOption.viewOuterHorizontal.clearAllChildElement().clearContainerElement().resetData().render().visible(!0),t&&this.mixinOption.viewOuterHorizontal.active(f,t)),this.mixinOption.viewOuterVertical&&(t=this.mixinOption.viewOuterVertical.__datas.activeId,this.mixinOption.viewOuterVertical.clearAllChildElement().clearContainerElement().resetData().render().visible(!0),t&&this.mixinOption.viewOuterVertical.active(f,t)));this.core.state="none"}}};ecount.gridV2.handler.outerHorizontal={onClick:function(n){var t=ecount.grid.constValue,r=t.sectionType.thead,e=t.sectionType.tbody,o=t.sectionType.tfoot,s=n.id.replace(t.horizontalPrefixChildId,""),i=this.mixinOption.dataColumn.getIndexById(r,t.returnColumnIndexType.multi,s),u,f;i!=-1&&(u=[r,e,o],f=ecount.gridV2.handler.outerHorizontal.getExtendHorizontalBoundary.call(this,u,i,i),this.mixinOption.viewSelector.setSelectionType(n.gridSelectionType).ecSelectHorizontal(f).ecDrawHorizontal().show())},onDeactive:function(){},getList:function(){for(var h,t,f,a,u=ecount.grid.constValue,v=u.sectionType.thead,y=u.sectionType.tbody,p=u.sectionType.tfoot,e=[v,y,p],c=[],r,l,o,w,s=0,b=e.length;s<b;s++)if(r=this.mixinOption.dataColumn.getAll(e[s],u.returnType.multi),l=r.length,o=r[0].length,w=o-1,l>0)break;for(var n=0,i=0,k=o;n<k;){for(h=0,t=ecount.gridV2.handler.outerHorizontal.getExtendHorizontalBoundary.call(this,e,n,i),f=t.left,a=t.right;f<=a;f++)h+=parseInt(r[0][f].width,10);c.push({id:r[t.top][t.left].id,width:h});n=t.left;i=t.right;n==i?(n+=1,i+=1):n=i=Math.max(n,i)+1}return c},getExtendHorizontalBoundary:function(n,t,i){for(var u=ecount.grid.constValue,w=u.sectionType.thead,s=u.sectionType.tbody,y=u.sectionType.tfoot,f={top:-1,left:-1,bottom:-1,right:-1},r=0,p=n.length;r<p;r++){var h=n[r],c=n[r],l=this.mixinOption.dataColumn.getAll(h,u.returnType.multi),e=l.length,a=l[0].length,b=a-1,o=0,v=e-1;a!=0&&(n[r]==y&&(c=s,o=this.mixinOption.dataColumn.getAll(s,u.returnType.multi).length,v=o+e-1),f=this.mixinOption.dataRow.extendBoundary(c,h,{top:o,left:t,bottom:v,right:i},{top:0,left:t,bottom:e-1,right:i}),f.right>i&&(i=f.right,r=-1))}return f},onBeforeMousedown:function(n){var t=ecount.grid.constValue,r=t.sectionType.thead,u=t.sectionType.tbody,f=t.sectionType.tfoot,i={isRemoveActiveClass:!0};return this.mixinOption.optSelector.use&&this.mixinOption.viewSelector.__datas.selectionType==t.selector.selectionType.allHorizontal&&([t.selector.state.dragable,t.selector.state.mouseup].contains(this.mixinOption.viewSelector.__datas.state)||n.ecPageID!=this.mixinOption.optCommon.ecPageId)&&(i.isRemoveActiveClass=!1),i}};ecount.gridV2.handler.outerVertical={onClick:function(n,t){for(var v,h,k,y,p,d,g,r=ecount.grid.constValue,nt=r.sectionType.thead,w=r.sectionType.tbody,b=r.sectionType.tfoot,s=[nt,w],f={top:-1,left:-1,bottom:-1,right:-1},l,a,u,e,i,o=0,tt=s.length;o<tt;o++){for(v=this.mixinOption.dataRow.getAll(s[o]),e=this.mixinOption.dataColumn.getSystemColumnCount(s[o]),h=0,k=v.length;h<k;h++){for(l=v[h],a=l[r.keyColumnPropertyName],y=l[r.rowVariableNames.rowType]==r.rowType.separate?b:s[o],u=this.mixinOption.dataColumn.getAll(y,r.returnType.multi),i=0,groupRowLen=u.length;i<groupRowLen;i++)if(u[i][e].id==n.gridColumnID){n.gridSectionType=s[o];n.gridColumnSectionType=y;break}if(n.gridSectionType&&n.gridColumnSectionType)break}if(n.gridSectionType&&n.gridColumnSectionType)break}var rt=u.length,it=u[0].length,c=it-1;this.mixinOption.optCommon.columnType==r.columnType.multi&&n.gridColumnSectionType==b?(p=this.mixinOption.dataColumn.getAll(w,r.returnType.multi),f=this.mixinOption.dataRow.extendBoundary(n.gridSectionType,n.gridColumnSectionType,{top:p.length+i,left:e,bottom:p.length+i,right:c},{top:i,left:e,bottom:i,right:c})):f=this.mixinOption.dataRow.extendBoundary(n.gridSectionType,n.gridColumnSectionType,{top:i,left:e,bottom:i,right:c},{top:i,left:e,bottom:i,right:c});d=this.mixinOption.viewCell.getCellElement(n.gridSectionType,u[f.top][f.left].id,a).cell;g=this.mixinOption.viewCell.getCellOriginalElement(n.gridSectionType,u[f.bottom][f.right].id,a)||{cell:null,map:{}};t.target=d;t.button=0;this.mixinOption.viewSelector.MOUSEDOWN_HANDLER(t);t.target=g.cell;this.mixinOption.viewSelector.MOUSEENTER_HANDLER(t);this.mixinOption.viewSelector.setSelectionType(n.gridSelectionType);this.mixinOption.viewSelector.setState(r.selector.state.mouseup);this.mixinOption.viewSelector.unbindEventMouseenter()},getList:function(){for(var h,f,o,y,a,k,r=ecount.grid.constValue,d=r.sectionType.thead,g=r.sectionType.tbody,nt=r.sectionType.tfoot,i=[d,g],v=[],n,t=0,tt=i.length;t<tt;t++)for(h=this.mixinOption.dataRow.getAll(i[t]),f=this.mixinOption.dataColumn.getSystemColumnCount(i[t]),o=0,y=h.length;o<y;o++)for(var p=h[o],w=p[r.keyColumnPropertyName],c=p[r.rowVariableNames.rowType]==r.rowType.separate?nt:null,ut=this.mixinOption.dataRow.getSectionRowIndex(i[t],c),s=this.mixinOption.dataColumn.getAll(c||i[t],r.returnType.multi),ft=s.length,it=s[0].length,b=it-1,l=this.mixinOption.dataRow.getViewDataTrMap(i[t],w),e=0,u=0,rt=l.rowInfo.trIdx.length;e<rt;)if(n=this.mixinOption.dataRow.extendBoundary(i[t],c,{top:l.rowInfo.trIdx[e],left:f,bottom:l.rowInfo.trIdx[u],right:b},{top:e,left:f,bottom:u,right:b}),n.bottom>u)u=n.bottom;else{for(a={id:s[n.top][f]&&s[n.top][f].id,height:0};n.top<=n.bottom;)k=this.mixinOption.viewRow.getSizeByContainer(i[t],w,n.top),a.height+=k.height,n.top+=1;v.push(a);e=u=Math.max(e,u)+1}return v},onBeforeMousedown:function(n){var t=ecount.grid.constValue,r=t.sectionType.thead,u=t.sectionType.tbody,f=t.sectionType.tfoot,i={isRemoveActiveClass:!0};return this.mixinOption.optSelector.use&&this.mixinOption.viewSelector.__datas.selectionType==t.selector.selectionType.allVertical&&([t.selector.state.dragable].contains(this.mixinOption.viewSelector.__datas.state)||n.ecPageID!=this.mixinOption.optCommon.ecPageId)&&(i.isRemoveActiveClass=!1),i}};ecount.gridV2.handler.overlayManagerSingle={getSize:function(n){var t=ecount.grid.constValue,i=t.sectionType.thead,f=t.sectionType.theadSlip,h=t.sectionType.tbody,et=t.sectionType.tbodySlip,d=t.sectionType.tfoot,ot=t.sectionType.tfootSlip,g=0,c=0,v=0,y=0,u=[],e,nt,a,it,rt,ut,s,ft,b;switch(n.selectRowSectionType){case i:n.position=="top"?this.mixinOption.dataColumn.hasTheadSlipType()&&this.mixinOption.dataColumn.__datas[f].position=="top"&&u.push(f):n.position=="bottom"&&this.mixinOption.dataColumn.hasTheadSlipType()&&this.mixinOption.dataColumn.__datas[f].position=="bottom"&&u.push(f);break;case f:n.position=="top"?this.mixinOption.dataColumn.hasTheadType()&&this.mixinOption.dataColumn.__datas[i].position=="top"&&u.push(i):n.position=="bottom"&&this.mixinOption.dataColumn.hasTheadType()&&this.mixinOption.dataColumn.__datas[i].position=="bottom"&&u.push(i)}for(e=0,nt=u.length;e<nt;e++){var p=u[e],r=p,o=p,l=t.sectionSeparateValue.line;switch(p){case f:r=i;o=i;l=t.sectionSeparateValue.slip;break;case et:r=h;o=h;l=t.sectionSeparateValue.slip;break;case d:r=h;break;case ot:r=h;o=d;l=t.sectionSeparateValue.slip}var st=this.mixinOption.dataRow.getAll(r),tt=this.mixinOption.dataRow.getSectionRowIndex(r,o),w=this.mixinOption.dataColumn.getGroupRowIndexInfo(r,o,l);for(a=tt.startRowIndex,it=tt.endRowCount;a<it;a++)for(rt=st[a],ut=rt[t.keyColumnPropertyName],s=w.startRowIndex,ft=w.endRowCount;s<ft;s++)b=this.mixinOption.viewRow.getRowElement(r,ut,s),y+=b.offsetHeight,e==0&&s==w.startRowIndex&&(c=b.offsetTop)}if(u.length>0){var ht=this.mixinOption.dataRow.getViewDataTableMapAll(i),ct=Object.keys(ht),k=this.mixinOption.viewTable.getTableElement(i,ct[0]);v=k.offsetWidth;g=k.offsetLeft;c+=k.offsetTop}return n.position=="bottom"&&v>0&&y>0&&(c+=1),{x:g,y:c,width:v,height:y}},getSectionInfos:function(n,t){return this.mixinOption.view.getSectionTypeByElement(t.target)}};ecount.gridV2.handler.overlayManagerMulti={getSize:function(n){var f=ecount.grid.constValue,k=f.sectionType.thead,yt=f.sectionType.theadSlip,d=f.sectionType.tbody,pt=f.sectionType.tbodySlip,g=f.sectionType.tfoot,wt=f.sectionType.tfootSlip,ft=0,p=0,ct=0,nt=0,e={thead:[],tbody:[],tfoot:[]},et,tt,lt,w,u,it,ut,ot,r,v,c,rt,i,a,t,l,st,b,y;for(et=this.mixinOption.optCommon.columnType==f.columnType.multi?[k,d]:[k,d,g],tt=0,lt=et.length;tt<lt;tt++){var r=et[tt],o,s=null,h=null,a=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(r);for(t=0,l=a.length;t<l;t++)w=a[t][0],u=this.mixinOption.dataColumn.getById(w.columnSectionType,w.columnId),(s||h)&&s==u.GROUP_FLAG&&h==u.POSITION||(s&&h&&(s!=u.GROUP_FLAG||h!=u.POSITION)&&e[r].push(o),o={sectionType:r,columnSectionType:w.columnSectionType,detailSectionType:u.GROUP_FLAG,boundary:{top:t,bottom:t,left:-1,right:-1}},w.columnSectionType==g&&(b=this.mixinOption.dataColumn.getAll(d,f.returnType.multi),o.boundary.top=o.boundary.top-b.length,o.boundary.bottom=o.boundary.bottom-b.length),s=null,h=null),s&&h&&s==u.GROUP_FLAG&&h==u.POSITION&&(o.boundary.bottom+=1),t==l-1&&e[r].push(o),s=u.GROUP_FLAG,h=u.POSITION}if(n.position=="top"){it=!1;for(r in e)if(!it&&e.hasOwnProperty(r))for(v=e[r],c=0,rt=v.length;c<rt;c++){if(i=v[c],i.sectionType==n.sectionType&&i.columnSectionType==n.columnSectionType&&i.detailSectionType==n.detailSectionType){it=!0;break}for(a=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(i.sectionType),t=i.boundary.top,l=i.boundary.bottom;t<=l;t++)y=this.mixinOption.viewRow.getRowElement(i.sectionType,a[t][0].rowId,t),p+=y.offsetHeight}}else if(n.position=="bottom"){ut=!1;ot=!1;for(r in e)if(!it&&e.hasOwnProperty(r))for(v=e[r],c=0,rt=v.length;c<rt;c++)for(i=v[c],a=this.mixinOption.dataRow.getViewDataRenderingTableMapAll(i.sectionType),t=i.boundary.top,l=i.boundary.bottom;t<=l;t++){if(i.sectionType==n.sectionType&&i.columnSectionType==n.columnSectionType&&i.detailSectionType==n.detailSectionType){ut=!0;ot=!0;continue}ot&&(st=t,i.columnSectionType==g&&(b=this.mixinOption.dataColumn.getAll(d,f.returnType.multi),st+=b.length),y=this.mixinOption.viewRow.getRowElement(i.sectionType,a[st][0].rowId,t),p+=y.offsetHeight,ut&&!y.classList.contains("hide")&&(nt=y.offsetTop,ut=!1))}}var at=this.mixinOption.dataRow.getViewDataTableMapAll(k),vt=Object.keys(at),ht=this.mixinOption.viewTable.getTableElement(k,vt[0]);return ft=ht.offsetWidth,ct=ht.offsetLeft,nt+=ht.offsetTop,ft>0&&p>0&&(n.position=="top"&&(n.sectionType!=g||this.mixinOption.dataColumn.hasTfootSlipType()||(p-=1)),n.position=="bottom"&&(nt+=1)),{x:ct,y:nt,width:ft,height:p}},getSectionInfos:function(n,t){return this.mixinOption.view.getSectionTypeByElement(t.target)}};ecount.gridV2.generator=function(){var n={},t=function(n){for(var r=n.split("."),t=window,i=0,u=r.length;i<u;i++)t[r[i]]||(t[r[i]]=function(){}),t=t[r[i]];return new t},i=function(n,t){for(var u=n.split("."),i=window,r=0,f=u.length;r<f;r++)i[u[r]]||(i[u[r]]=function(){}),i=i[u[r]];return new i(t)},r=function(n){for(var r=n.split("."),t=window,i=0,u=r.length;i<u;i++)t[r[i]]||(t[r[i]]={}),t=t[r[i]];return t()},u=function(n){for(var i=window,u=!0,r=n.split("."),t=0,f=r.length;t<f;t++){if(!i[r[t]]){u=!1;break}i=i[r[t]]}return u};this.get=function(u,f){var e,o=ecount.grid.constValue;return o.nativeControlInWidget[u]||o.controlInWidget[u]||(e=n[u]),e?o.controlInWidget[u]&&e.init&&e.init(f):o.controlInGrid[u]?(e=t(u),n[u]=e):o.controlInWidget[u]||o.nativeControlInWidget[u]?(e=i(u,f),o.nativeControlInWidget[u]||(n[u]=e)):(e=r(u),n[u]=e),e.reset&&e.reset(),e.setControlOptions&&e.setControlOptions(f),e}};